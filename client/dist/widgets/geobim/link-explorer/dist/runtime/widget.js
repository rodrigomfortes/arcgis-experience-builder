System.register(["jimu-core","jimu-ui","widgets/shared-code/geobim"],(function(e,t){var o={},s={},i={};return{setters:[function(e){o.React=e.React,o.ReactRedux=e.ReactRedux,o.css=e.css,o.jsx=e.jsx},function(e){s.Alert=e.Alert,s.Loading=e.Loading,s.WidgetPlaceholder=e.WidgetPlaceholder},function(e){i.ApsLogIn=e.ApsLogIn,i.GeoBIMProvider=e.GeoBIMProvider,i.HEADER_LINE_HEIGHT=e.HEADER_LINE_HEIGHT,i.UserTypeNotPermissible=e.UserTypeNotPermissible,i.areRecordArraysEqual=e.areRecordArraysEqual,i.defaultSharedMessages=e.defaultSharedMessages,i.geoBIMWidgetContainerStyle=e.geoBIMWidgetContainerStyle,i.getFeatureTitle=e.getFeatureTitle,i.loadingContainerStyle=e.loadingContainerStyle,i.modelViewerDisabledSelector=e.modelViewerDisabledSelector,i.selectionWarningStyle=e.selectionWarningStyle,i.setModelViewerLinkedDocument=e.setModelViewerLinkedDocument,i.useGeoBIM=e.useGeoBIM,i.useLinks=e.useLinks,i.useSharedMessages=e.useSharedMessages}],execute:function(){e((()=>{var e={14321:e=>{"use strict";e.exports=s},38512:e=>{"use strict";e.exports=i},79244:e=>{"use strict";e.exports=o},91186:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.781 1.223-6.334 2.79A.75.75 0 0 0 5 4.696V9.66a3.8 3.8 0 0 1 1-.649V5.235l5.647 2.483.353.155v7.907l-1.69-.743c-.044.048-.077.104-.124.15l-.615.616 2.929 1.29 7.5-3.298v-.616l-5.564-2.068L20 8.665v-.59l-2.137-.94-1.074.62 1.397.615L13 10.648V7.873l7-3.078v-.59L12.5.907zm6.317 12.316L13 15.78v-4.13zM12.5 7l-1.289-.567-3.821-1.68a.277.277 0 0 1 0-.506l4.024-1.77L12.5 2l5.686 2.5zM4.105 18.016c.368.147.757.232 1.156.258l-.993.994a2.5 2.5 0 0 1-3.536-3.536l.824-.823 1.176-1.177a2.483 2.483 0 0 1 3.664.155l-.708.708a1.493 1.493 0 0 0-2.249-.156l-1.176 1.177-.824.824a1.502 1.502 0 0 0 2.122 2.12zm5.163-3.748-2 2a2.484 2.484 0 0 1-3.626-.11l.707-.708a1.49 1.49 0 0 0 2.212.11l2-2a1.49 1.49 0 0 0 .401-1.385c-.004-.021-.013-.04-.019-.062a1.5 1.5 0 0 0-.089-.247l-.02-.039a1.5 1.5 0 0 0-.154-.242l-.01-.012a1.6 1.6 0 0 0-.22-.224 1.486 1.486 0 0 0-2.01.09l-.55.55a3.7 3.7 0 0 0-1.152-.262l.994-.995a2.48 2.48 0 0 1 3.425-.09q.195.17.349.379.142.193.247.412.01.02.021.04.089.199.141.415c.008.028.02.055.027.084a2.492 2.492 0 0 1-.674 2.296" style="fill:currentColor;stroke-width:0"></path></svg>'}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var l={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(l),n.d(l,{__set_webpack_public_path__:()=>L,default:()=>I});var e=n(79244),t=n(14321),o=n(38512);const s={_widgetLabel:"Link Explorer",_widgetDescription:"A widget to display linked Autodesk Construction Cloud documents of features in web maps and web scenes.",widgetTitle:"Link Explorer",geobim_logInText:" to your Autodesk account to view linked documents.",noFeatureTitle:"(No Feature Name)",geobim_multipleFeatures:"Multiple feature selection is currently not supported by the Link Explorer widget. Please select a single feature and continue.",noDocuments:"No linked documents to display.",noDocumentAccount:"(No Account Name)",noDocumentProject:"(No Project Name)"};var i=n(91186),r=n.n(i);const{useMemo:a,useCallback:c,useState:d}=e.React,{useDispatch:u,useSelector:g}=e.ReactRedux,m=t=>(0,e.css)({label:"linkExplorerHeader",lineHeight:o.HEADER_LINE_HEIGHT,fontSize:`${t.sys.typography.h5.fontSize}`,fontWeight:`${t.sys.typography.h5.fontWeight}`,fontcolor:`${t.sys.typography.h5.color}`,padding:t.sys.spacing(3),backgroundColor:t.sys.color.surface.paper,borderBottom:`solid 1px ${t.sys.color.divider.primary}`}),p=t=>(0,e.css)({label:"documentLinkListItem",padding:t.sys.spacing(2),borderBottom:`solid 1px ${t.sys.color.divider.primary}`,cursor:"pointer",textDecoration:"underline",transition:"background-color 0.3s ease-in-out, text-decoration-color 0.3s ease-in-out",textDecorationColor:"transparent",backgroundColor:t.sys.color.surface.paper,"&:hover":{textDecorationColor:"inherit"},"&:focus":{borderLeft:`solid 3px ${t.sys.color.primary.main}`,paddingLeft:`calc(${t.sys.spacing(2)} - 3px)`,outline:"0px !important"}}),y=t=>(0,e.css)({label:"documentTitle",fontWeight:`${t.ref.typeface.fontWeightBold}`}),x=t=>(0,e.css)({label:"documentInfo",fontcolor:t.sys.color.action.disabled.text}),f=t=>(0,e.css)({label:"noDocumentsMessage",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontcolor:t.sys.color.action.disabled.text}),b=s=>{const{theme:i,config:n,i18nMessage:l}=s,{modelViewerWidgetId:r}=n,{setDocumentSelection:b,linkExplorerTitle:k,featureDocumentLinks:I,linksLoading:L,linksInitialized:h,multipleFeatureSelectionWarning:v,onMultipleFeatureSelectionWarningCancel:j}=((e,t)=>{var s;const i=g((t=>(0,o.modelViewerDisabledSelector)(e,t))),{selectedFeatures:n,geoBIMLoading:l}=(0,o.useGeoBIM)(),{featureDocumentLinks:r,linksLoading:m,linksInitialized:p}=(0,o.useLinks)(),y=u(),[x,f]=d(null),[b,k]=d([]),[I,L]=d(!1);if(!(0,o.areRecordArraysEqual)(b,n))if(k(n),1===n.length){I&&L(!1);const e=n[0].feature,i=null!==(s=(0,o.getFeatureTitle)(e))&&void 0!==s?s:t("noFeatureTitle"),l=e.layer.title,r=i===l?i:`${l}: ${i}`;x!==r&&f(r)}else n.length>1&&(I||L(!0),null!==x&&f(null));const h=a((()=>p&&!l&&null!==x?x:t("widgetTitle")),[l,t,p,x]),v=c(((t,s)=>{null==e||""===e||i||(0,o.setModelViewerLinkedDocument)(e,t,s,y)}),[e,i,y]),j=c((()=>{L(!1)}),[]);return a((()=>({setDocumentSelection:v,linkExplorerTitle:h,featureDocumentLinks:r,linksLoading:m,linksInitialized:p,multipleFeatureSelectionWarning:I,onMultipleFeatureSelectionWarningCancel:j})),[v,h,r,m,p,I,j])})(r,l),{apsAuthenticated:w,selectionUpdating:M,geoBIMLoading:S,userHasPermission:T,geoBIMInitialized:D}=(0,o.useGeoBIM)(),_=L||!h||M||S,C=!T&&D,E=(e,t)=>{b(e,t)};return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{css:(0,o.geoBIMWidgetContainerStyle)(i),className:"jimu-widget widget-link-explorer"},(0,e.jsx)("div",{css:m(i)},k),C&&(0,e.jsx)(o.UserTypeNotPermissible,{userTypeNotPermissibleLinkText:l("geobim_userTypeLink"),userTypeNotPermissibleText:l("geobim_userTypeNote",{widget_name:l("widgetTitle")}),theme:i}),!w&&!C&&(0,e.jsx)(o.ApsLogIn,{logInLinkText:l("geobim_logInLink"),loginMessageFirstLine:l("geobim_logInText"),loginMessageSecondLine:l("geobim_logInTip"),theme:i}),w&&!C&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{css:(0,e.css)({label:"documentLinkList",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",overflowY:"auto"})},_?[(0,e.jsx)("div",{key:"documents-loading",css:(0,o.loadingContainerStyle)(i)},(0,e.jsx)(t.Loading,null))]:null==I||0===I.documents.length?[(0,e.jsx)("div",{key:"no-documents",css:f(i)},l("noDocuments"))]:I.documents.map((t=>{const o=`${t.attributes.accountName||l("noDocumentAccount")} - ${t.attributes.projectName||l("noDocumentProject")}`;return(0,e.jsx)("div",{key:t.fileName,tabIndex:0,css:p(i),onClick:()=>{E(t,I.feature.bimIds)},onKeyUp:e=>{"Enter"===e.key&&E(t,I.feature.bimIds)}},(0,e.jsx)("div",{css:y(i)},t.displayName),(0,e.jsx)("div",{css:x(i)},o))})),v&&!_&&(0,e.jsx)("div",{css:(0,o.selectionWarningStyle)(i)},(0,e.jsx)(t.Alert,{text:l("geobim_multipleFeatures"),"aria-live":"polite",closable:!0,open:v,onClose:()=>{j()},size:"medium",type:"warning",withIcon:!0}))))))},{useCallback:k}=e.React,I=i=>{const{useMapWidgetIds:n,intl:l,theme:a,widgetId:c,config:d,manifest:u}=i,{translateMessage:g}=(0,o.useSharedMessages)(l,u.translatedLocales),m=k(((e,t)=>{const i=Object.assign(Object.assign({},o.defaultSharedMessages.default),s);return g(e,i,t)}),[g]),p=null==n?void 0:n[0],y=!!p;return(0,e.jsx)(e.React.Fragment,null,!y&&(0,e.jsx)(t.WidgetPlaceholder,{icon:r(),message:m("widgetTitle"),widgetId:c}),y&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(o.GeoBIMProvider,{mapWidgetId:p,widgetId:c},(0,e.jsx)(b,{i18nMessage:m,theme:a,config:d}))))};function L(e){n.p=e}})(),l})())}}}));