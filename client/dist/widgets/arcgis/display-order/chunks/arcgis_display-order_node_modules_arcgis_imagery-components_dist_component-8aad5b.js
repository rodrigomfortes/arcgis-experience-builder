/*! For license information please see arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-8aad5b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-8aad5b"],{3241:(e,t,i)=>{i.r(t),i.d(t,{ArcgisImageryMultidimensionalVariableInfo:()=>h});var n=i(3174),s=i(9619),o=i(5662),r=i(2797),a=i(9722),c=i(7960),l=i(5860);const d=i(6011).AH`:host{display:flex;flex:1 1 auto;.accordion-item-content,.accordion-item-header{--calcite-accordion-item-border: var(--calcite-color-transparent)}}.info-section-container{border:none;--calcite-color-border-2: var(--calcite-color-transparent)}.info-section{padding-bottom:.5rem;overflow-y:auto;--calcite-accordion-item-border: var(--calcite-color-transparent);background-color:var(--calcite-color-foreground-1)}.info-general{padding:10px 15px;background-color:var(--calcite-color-foreground-1)}.popover{--calcite-popover-z-index: 100}.table{width:100%;background-color:var(--calcite-color-foreground-1);border-collapse:collapse;border-spacing:0;border:1px solid var(--calcite-color-border-1);text-align:left;overflow:auto;font-size:var(--calcite-font-size--2);color:var(--calcite-color-text-1);line-height:1.5rem;caption{text-align:left;margin-top:5px}td{display:table-cell;vertical-align:inherit;&:first-child{width:30%}}th,td{font-weight:300;padding:2px 5px;text-align:left}tr:nth-child(odd){background-color:var(--calcite-color-background)}&.table-bordered{tr{border-bottom:1px solid var(--calcite-color-border-1);&:last-child{border-bottom:none}td{&:first-child{border-right:1px solid var(--calcite-color-border-1)}}}}&.table-borderless{border:none}}:dir(rtl){.table{&.table-bordered{tr{td:first-child{border-left:1px solid var(--calcite-color-border-1);border-right:none}}}}}`;class h extends l.WF{constructor(){super(...arguments),this.dimensionNode=(0,c._)(),this.panelElement=(0,c._)(),this.popoverNode=(0,c._)(),this.showStatistics=!1,this.showDimensionSummary=!1,this.open=!1,this.arcgisClose=(0,l.lh)()}static{this.properties={activeDimensionName:16,variableInfo:0,popoverProps:0,showStatistics:5,showDimensionSummary:5,messages:0,open:5}}static{this.styles=d}async reposition(){this.popoverNode.value?.reposition()}async setFocus(e){"dismiss-button"!==e?this.el.focus():await(this.panelElement.value?.setFocus())}async load(){this.unitMessages=await r.fetchMessageBundle("esri/core/t9n/Units")}willUpdate(e){if(this.hasUpdated&&e.has("variableInfo")){const t=e.get("variableInfo");if(t&&this.dimensionNode.value){const e=this.dimensionNode.value.querySelector("calcite-accordion-item[expanded]");if(e){const i=e.dataset.dimensionIndex,n=t.dimensions[Number(i)];this.activeDimensionName=n.name}else this.activeDimensionName=void 0}else this.activeDimensionName=void 0}}_formatStats(e){return e.map((e=>r.formatNumber(e))).join("; ")}_formatUnit(e){if(e){const t=e.replace("esri","");e=t.toLowerCase(),e=this.messages.time[e]??this.unitMessages.units[e]?.plural??t}return e??""}render(){const{popoverProps:e,variableInfo:t}=this,i=`${e.refElement.getBoundingClientRect().width}px`,n=t.unit?`${t.name} (${t.unit})`:t.name,s=this.showDimensionSummary?t.dimensions.map((e=>`${e.name}: ${e.values?.length??""}`)).join(", "):void 0;return a.qy`<calcite-popover .placement=${e.placement??"leading-start"} .open=${this.open} pointer-disabled .referenceElement=${e.refElement} .offsetDistance=${e.offsetDistance??0} .offsetSkidding=${e.offsetSkidding??0} trigger-disabled .label=${n} class="popover" style=${(0,l.zl)({width:i})} ${(0,c.K)(this.popoverNode)}><calcite-panel .heading=${n} style=${(0,l.zl)({width:`${e.popoverWidth}px`})} .description=${s} class="panel" closable @calcitePanelClose=${()=>this.arcgisClose.emit()} ${(0,c.K)(this.panelElement)}>${this.renderGeneralInfo()}${this.renderVariableInfoBlock()}</calcite-panel></calcite-popover>`}renderVariableInfoBlock(){return a.qy`<calcite-accordion class="info-section-container" selection-mode=single ${(0,c.K)(this.dimensionNode)}>${this.showStatistics&&this.renderStatistics()||""}${this.renderDimensions()}</calcite-accordion>`}renderGeneralInfo(){const{multidimensionalInfo:e}=this.messages,{unit:t,description:i}=this.variableInfo,n="colormap"in this.variableInfo&&!!this.variableInfo.colormap;return this.renderInfoSection([{name:e.description,description:i||e.none},{name:e.unit,description:t||e.none},{name:e.colormap,description:n?e.present:e.none}],void 0,"info-general")}renderInfoSection(e,t,i){return a.qy`<div class=${(0,l.CP)(i)}><table class="table table-bordered">${t&&a.qy`<caption>${t}</caption>`||""}${e.map((({name:e,description:t})=>a.qy`<tr><td>${e}</td><td>${t}</td></tr>`))}</table></div>`}renderStatistics(){const{statistics:e}=this.variableInfo;if(!e?.length)return null;const{multidimensionalInfo:t}=this.messages,i=this._formatStats(e.map((({min:e})=>e))),n=this._formatStats(e.map((({max:e})=>e))),s=e.map((({avg:e})=>e)),o=e.map((({stddev:e})=>e)),r=s.some((e=>null==e))?"":this._formatStats(s),c=o.some((e=>null==e))?"":this._formatStats(o);return a.qy`<calcite-accordion-item .heading=${t.statistics} class="info-section">${this.renderInfoSection([{name:t.minimum,description:i},{name:t.maximum,description:n},{name:t.mean,description:r},{name:t.stddev,description:c}])}</calcite-accordion-item>`}renderDimensions(){const{multidimensionalInfo:e}=this.messages,{name:t,dimensions:i}=this.variableInfo;return i.map(((i,n)=>{const{name:c,values:l,interval:d,intervalUnit:h,hasRegularIntervals:m,extent:u}=i;let f="StdTime"===c?e.stdTimeDimension:"StdZ"===c?e.stdZDimension:e.generalDimension.replace("${dimensionName}",c);f+=l?` (${l.length})`:"";const p=h?this._formatUnit(h):"",v=d?`${d} (${m?e.regular:e.irregular})`:"",g=`${u?(0,o.f)(u[0],i,{intl:r}):""} - ${u?(0,o.f)(u[1],i,{intl:r}):""}`;return(0,s.D)(`${t}-${c}`,a.qy`<calcite-accordion-item .expanded=${c===this.activeDimensionName} .heading=${f} data-dimension-index=${n??a.s6} class="info-section">${this.renderInfoSection([{name:e.interval,description:v},{name:e.intervalUnit,description:p},{name:e.extent,description:g}])}</calcite-accordion-item>`)}))}}(0,n.c)("arcgis-imagery-multidimensional-variable-info",h)},5662:(e,t,i)=>{i.d(t,{a:()=>u,b:()=>v,c:()=>h,d:()=>f,e:()=>d,f:()=>a,g:()=>m,h:()=>l,i:()=>p,m:()=>n,u:()=>s});const n=10.9,s=Number.MAX_VALUE-1;function o(e,t){const i=new Date(e),{useFriendlyIsoFormat:n,intl:s,format:o}=t;if(n&&s)return s.formatDate(i,{...s.convertDateFormatToIntlOptions(o??"short-date-long-time"),timeZone:"UTC"});let r=new Date(e).toISOString();return r=`${r.slice(0,r.indexOf("."))}Z`,r}function r(e,t,i="long"){const n=new Date(2022,9,10);return n.setMonth(e-1),t.formatDate(n,{month:i})}function a(e,t,i={}){if(null==e)return"";const{intl:n,useRecurringTimeLabel:s}=i;if(s&&n&&!Array.isArray(e)){const i=t.unit?.toLowerCase().trim();if(function(e){return"StdTime"===e.name&&!!e.recurring}(t)&&("months"===i||"quarters"===i))return"months"===i?r(e,n):function(e,t){return`${r(3*(e-1)+1,t,"short")} - ${r(3*e,t,"short")}`}(e,n)}const a=t.values?.[t.values.length-1];return i.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(a)&&(e=e.join("-")===a.join("-")?e[1]:e[0]),u(t)?(i.useFriendlyIsoFormat&&!i.format&&(i={format:c(t),...i}),Array.isArray(e)?e.map((e=>o(e,i))).join(" - "):o(e,i)):Array.isArray(e)?e.map((e=>n?.formatNumber(e)??String(e))).join(" - "):n?.formatNumber(e)??String(e)}function c(e){let t=e.intervalUnit?.toLowerCase().trim()??"";const{extent:i}=e,n=e.interval??0,s=e.values?.length;if(!["years","months","days","hours"].includes(t)&&i?.length&&s){const e=(i[1]-i[0])/s,n=864e5;t=e>=365*n?"years":e>=28*n?"months":t}switch(t){case"months":t=n>11?"years":t;break;case"days":t=n>364?"years":n>27?"months":t;break;case"hours":t="days"}return"years"===t?"year":"months"===t?"short-month-year":"short-date"}function l(e,t){const i=t?.dimensions?.find((({name:t})=>t===e.name));if(!i?.extent)return e;const n=[...i.extent],{values:s}=e;if(s?.length){const t=s.filter((e=>Array.isArray(e)?null==n[1]||n[0]===n[1]?e[0]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]));if(0===t.length){const e=s[s.length-1];Array.isArray(e)&&e[1]===n[0]&&t.push(e)}return{...e,extent:n,values:t}}return{...e,extent:n}}function d(e){const{values:t,extent:i,name:n}=e;let s=t?.[0]??i?.[0];return"stdz"===n.toLowerCase()&&!e.hasRanges&&i&&Math.abs(i[1])<=Math.abs(i[0])&&(s=t?.length?t[t.length-1]:i[1]),s}function h(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function m(e,t=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:i,version:n}=e;return t||n<=10.9||!i||"none"===i.functionName?.toLowerCase()?e.serviceRasterInfo.multidimensionalInfo:(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function u(e,t=!1){return"StdTime"===e.name&&(t||!e.recurring)}function f(e,t,i){t=l(t,i);const n=a(e.values[0],t);if(!t.values?.some((e=>n===a(e,t)))){const i=d(t);e.values=null!=i?[i]:[]}}function p(e){return Array.isArray(e[0])}function v(e){return e.variables.map((({name:e,unit:t,description:i})=>({name:e,label:t?`${e} (${t})`:e,description:i})))}},7960:(e,t,i)=>{i.d(t,{_:()=>u,K:()=>v});var n=i(7513),s=i(5987),o=i(3715);const r=(e,t)=>{const i=e._$AN;if(void 0===i)return!1;for(const e of i)e._$AO?.(t,!1),r(e,t);return!0},a=e=>{let t,i;do{if(void 0===(t=e._$AM))break;i=t._$AN,i.delete(e),e=t}while(0===i?.size)},c=e=>{for(let t;t=e._$AM;e=t){let i=t._$AN;if(void 0===i)t._$AN=i=new Set;else if(i.has(e))break;i.add(e),h(t)}};function l(e){void 0!==this._$AN?(a(this),this._$AM=e,c(this)):this._$AM=e}function d(e,t=!1,i=0){const n=this._$AH,s=this._$AN;if(void 0!==s&&0!==s.size)if(t)if(Array.isArray(n))for(let e=i;e<n.length;e++)r(n[e],!1),a(n[e]);else null!=n&&(r(n,!1),a(n));else r(this,e)}const h=e=>{e.type==o.OA.CHILD&&(e._$AP??=d,e._$AQ??=l)};class m extends o.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,i){super._$AT(e,t,i),c(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(r(this,e),a(this))}setValue(e){if((0,s.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const u=()=>new f;class f{}const p=new WeakMap,v=(0,o.u$)(class extends m{render(e){return n.s6}update(e,[t]){const i=t!==this.G;return i&&void 0!==this.G&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),n.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let i=p.get(t);void 0===i&&(i=new WeakMap,p.set(t,i)),void 0!==i.get(this.G)&&this.G.call(this.ht,void 0),i.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?p.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})},9619:(e,t,i)=>{i.d(t,{D:()=>r});var n=i(7513),s=i(3715),o=i(5987);const r=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=n.s6}render(e,t){return this.key=e,t}update(e,[t,i]){return t!==this.key&&((0,o.mY)(e),this.key=t),i}})}}]);