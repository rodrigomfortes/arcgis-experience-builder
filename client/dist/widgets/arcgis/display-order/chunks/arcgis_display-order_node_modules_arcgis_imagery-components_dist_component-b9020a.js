/*! For license information please see arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-b9020a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-b9020a"],{3643:(e,t,s)=>{s.r(t),s.d(t,{ArcgisImageryLazyLoadingList:()=>a});var i=s(3174),l=s(5090),o=s(7274),h=s(9722),n=s(7960),r=s(5860);const d=s(6011).AH`:host{display:flex;flex-direction:column;overflow:hidden}.pop-menu{display:flex;flex-direction:column;position:absolute;max-height:100%;width:100%;overflow-y:hidden;border:1px solid var(--calcite-color-border-3);&.pop-menu-flyout{top:0;left:0;z-index:100}}.pop-list{overflow-y:scroll}`;class a extends r.WF{constructor(){super(...arguments),this.refFilterNode=(0,n._)(),this.refMenuNode=(0,n._)(),this.hasSelectedScrolled=!1,this.suspendObserver=!1,this.filterHeight=56,this.itemHeight=33,this.itemHeightAdjusted=!1,this.listChange=e=>{const t=e.currentTarget.selectedItems[0];if(!t)return;const s=t.value,i=this.list.findIndex((({value:e})=>e===s));this.arcgisChange.emit({selectedValue:s,selectedIndex:i})},this.setLastNode=e=>{e&&(this.refLastNode&&this.observer?.unobserve(this.refLastNode),this.refLastNode=e)},this.setFirstNode=e=>{e&&(this.refFirstNode&&this.observer?.unobserve(this.refFirstNode),this.refFirstNode=e)},this.setSecondNode=e=>{e&&(this.refSecondNode=e)},this.setSecondLastNode=e=>{e&&(this.refSecondLastNode=e)},this.updateFilter=(0,o.sg)((()=>{if(!this.refFilterNode.value)return;const e=this.refFilterNode.value.filteredItems;if(!e.length)return;const t=new Set(e.map((({label:e})=>e)));this.suspendObserver=!0,this.filterList=this.list.filter((({label:e})=>t.has(e))),this.pageRanges=[0,1],this.pageId=0}),100),this.pageId=0,this.selectedIndex=0,this.showFilter=!1,this.pageSize=500,this.removeOldPages=!1,this.position="auto",this.pageBufferSize=10,this.useFlyOut=!1,this.arcgisChange=(0,r.lh)()}static{this.properties={pageId:16,filterList:16,list:0,popoverProps:0,selectedIndex:9,messages:0,showFilter:5,pageSize:9,removeOldPages:5,position:1,pageBufferSize:9,useFlyOut:5}}static{this.styles=d}load(){const e=Math.floor(this.list.length/this.pageSize);e<2||(this.updatePageId(),this.setupObserver(e))}willUpdate(e){this.hasUpdated&&e.has("list")&&(this.lockedMenuPosition=void 0),this.hasUpdated&&e.has("selectedIndex")&&this.updatePageId(this.selectedIndex)}updated(){if(this.useFlyOut&&!this.itemHeightAdjusted&&this.refSelectedNode){const e=this.refSelectedNode.getBoundingClientRect().height;if(e&&this.itemHeight!==e){this.itemHeight=e;const{refMenuNode:{value:t}}=this;if(t){const{height:e,translateX:s,translateY:i}=this.getListPosition();t.style.height=`${e}px`,t.style.transform=`translate(${s}px, ${i}px)`}}this.itemHeightAdjusted=!0}requestAnimationFrame((()=>{!this.hasSelectedScrolled&&this.refSelectedNode&&(this.refSelectedNode.scrollIntoView(),this.hasSelectedScrolled=!0),this.pendingScroll&&this.pendingScroll(),requestAnimationFrame((()=>{const{observer:e,refFirstNode:t,refLastNode:s}=this;e&&(this.suspendObserver=!1,t&&e.observe(t),s&&e.observe(s))}))}))}disconnectedCallback(){super.disconnectedCallback(),this.observer?.disconnect()}getSelectedIndex(e=this.selectedIndex){return e>=this.list.length?0:e}getListPosition(){const{width:e,left:t,top:s,bottom:i,containerTop:l,containerBottom:o=0}=this.popoverProps,h=this.filterList??this.list,n=this.itemHeight*h.length+(this.showFilter?this.filterHeight:0),r=(o>i?o:document.body.clientHeight)-i,d=s-l;this.lockedMenuPosition||("auto"===this.position?this.lockedMenuPosition=1.5*n<=r||d/(d+r)<.618?"down":"up":this.lockedMenuPosition="down"===this.position?"down":"up");const a="down"===this.lockedMenuPosition,c=a?Math.min(n,r-2):Math.min(n,d-2);return{width:e,height:c,translateX:t,translateY:a?i:Math.max(l,s-c)}}getSubList(){const{pageRanges:e,removeOldPages:t}=this,s=e&&!t?Math.min(e[0],this.pageId):this.pageId,i=e&&!t?Math.max(e[1],this.pageId+1):this.pageId+1,l=this.filterList??this.list,{pageBufferSize:o}=this,h=l.slice(0===s?0:s*this.pageSize-o,i*this.pageSize+o);return t||(this.pageRanges=[s,i]),h}setSelectedNode(e){this.refSelectedNode=e}setNullRef(e){}setupObserver(e){this.observer=new IntersectionObserver(((t,s)=>{if(this.suspendObserver)return;let i=!1;if(1===(t=t.filter((({isIntersecting:e})=>e))).length){const s=t[0];if(this.refLastNode&&"label"in s.target&&s.target.label===this.refLastNode.label)this.pageId<e&&(this.pageId++,i=!0,this.removeOldPages&&(this.pendingScroll=()=>{this.pageId>0&&this.refSecondNode?.scrollIntoView(!0)}));else if(this.pageId>0){if(this.pageId--,this.removeOldPages)this.pendingScroll=()=>{this.refSecondLastNode?.scrollIntoView(!1),this.pendingScroll=void 0};else{const e=s.target;this.pendingScroll=()=>{e.scrollIntoView(),this.pendingScroll=void 0}}i=!0}}else if(2===t.length&&this.pageId===e){if(this.pageId--,!this.removeOldPages){const e=this.refLastNode;this.pendingScroll=()=>{e?.scrollIntoView(),this.pendingScroll=void 0}}i=!0}i&&(this.refLastNode&&s.unobserve(this.refLastNode),this.refFirstNode&&s.unobserve(this.refFirstNode))}))}updatePageId(e=this.selectedIndex){e=this.getSelectedIndex(e);const t=Math.floor(e/this.pageSize);t!==this.pageId&&(this.pageId=t)}render(){let e;if(this.suspendObserver=!0,this.useFlyOut){const{width:t,height:s,translateX:i,translateY:l}=this.getListPosition();e={width:`${t}px`,height:`${s}px`,transform:`translate(${i}px, ${l}px)`}}const t=this.list.map((({label:e})=>({label:e})));return h.qy`<div class=${(0,r.CP)(this.useFlyOut?"pop-menu pop-menu-flyout":"pop-menu")} style=${(0,r.zl)(e)} ${(0,n.K)(this.refMenuNode)}>${this.showFilter&&h.qy`<div><calcite-filter .items=${t} .messageOverrides=${this.messages} @calciteFilterChange=${this.updateFilter} ${(0,n.K)(this.refFilterNode)}></calcite-filter></div>`||""}<div class="pop-list">${this.renderList()}</div></div>`}renderList(){const{pageBufferSize:e}=this,t=Math.floor(e/2),s=this.getSubList(),i=this.getSelectedIndex(),o=this.list[i];return h.qy`<calcite-list .label=${this.messages.label} selection-mode=single-persist display-mode=nested @calciteListChange=${this.listChange} scale=s>${(0,l.u)(s,(({label:e})=>e),(({value:i,label:l},r)=>h.qy`<calcite-list-item .value=${i} .label=${l} .selected=${i===o.value} ${(0,n.K)(this.hasSelectedScrolled||l!==o.label?r===s.length-t?this.setLastNode:r===s.length-e?this.setSecondLastNode:r===t?this.setFirstNode:r===e?this.setSecondNode:this.setNullRef:this.setSelectedNode)}></calcite-list-item>`))}</calcite-list>`}}(0,i.c)("arcgis-imagery-lazy-loading-list",a)},5090:(e,t,s)=>{s.d(t,{u:()=>n});var i=s(7513),l=s(3715),o=s(5987);const h=(e,t,s)=>{const i=new Map;for(let l=t;l<=s;l++)i.set(e[l],l);return i},n=(0,l.u$)(class extends l.WL{constructor(e){if(super(e),e.type!==l.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,s){let i;void 0===s?s=t:void 0!==t&&(i=t);const l=[],o=[];let h=0;for(const t of e)l[h]=i?i(t,h):h,o[h]=s(t,h),h++;return{values:o,keys:l}}render(e,t,s){return this.dt(e,t,s).values}update(e,[t,s,l]){const n=(0,o.cN)(e),{values:r,keys:d}=this.dt(t,s,l);if(!Array.isArray(n))return this.ut=d,r;const a=this.ut??=[],c=[];let u,g,p=0,f=n.length-1,v=0,m=r.length-1;for(;p<=f&&v<=m;)if(null===n[p])p++;else if(null===n[f])f--;else if(a[p]===d[v])c[v]=(0,o.lx)(n[p],r[v]),p++,v++;else if(a[f]===d[m])c[m]=(0,o.lx)(n[f],r[m]),f--,m--;else if(a[p]===d[m])c[m]=(0,o.lx)(n[p],r[m]),(0,o.Dx)(e,c[m+1],n[p]),p++,m--;else if(a[f]===d[v])c[v]=(0,o.lx)(n[f],r[v]),(0,o.Dx)(e,n[p],n[f]),f--,v++;else if(void 0===u&&(u=h(d,v,m),g=h(a,p,f)),u.has(a[p]))if(u.has(a[f])){const t=g.get(d[v]),s=void 0!==t?n[t]:null;if(null===s){const t=(0,o.Dx)(e,n[p]);(0,o.lx)(t,r[v]),c[v]=t}else c[v]=(0,o.lx)(s,r[v]),(0,o.Dx)(e,n[p],s),n[t]=null;v++}else(0,o.KO)(n[f]),f--;else(0,o.KO)(n[p]),p++;for(;v<=m;){const t=(0,o.Dx)(e,c[m+1]);(0,o.lx)(t,r[v]),c[v++]=t}for(;p<=f;){const e=n[p++];null!==e&&(0,o.KO)(e)}return this.ut=d,(0,o.mY)(e,c),i.c0}})},7960:(e,t,s)=>{s.d(t,{_:()=>g,K:()=>v});var i=s(7513),l=s(5987),o=s(3715);const h=(e,t)=>{const s=e._$AN;if(void 0===s)return!1;for(const e of s)e._$AO?.(t,!1),h(e,t);return!0},n=e=>{let t,s;do{if(void 0===(t=e._$AM))break;s=t._$AN,s.delete(e),e=t}while(0===s?.size)},r=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(void 0===s)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),c(t)}};function d(e){void 0!==this._$AN?(n(this),this._$AM=e,r(this)):this._$AM=e}function a(e,t=!1,s=0){const i=this._$AH,l=this._$AN;if(void 0!==l&&0!==l.size)if(t)if(Array.isArray(i))for(let e=s;e<i.length;e++)h(i[e],!1),n(i[e]);else null!=i&&(h(i,!1),n(i));else h(this,e)}const c=e=>{e.type==o.OA.CHILD&&(e._$AP??=a,e._$AQ??=d)};class u extends o.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),r(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(h(this,e),n(this))}setValue(e){if((0,l.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const g=()=>new p;class p{}const f=new WeakMap,v=(0,o.u$)(class extends u{render(e){return i.s6}update(e,[t]){const s=t!==this.G;return s&&void 0!==this.G&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),i.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let s=f.get(t);void 0===s&&(s=new WeakMap,f.set(t,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?f.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})}}]);