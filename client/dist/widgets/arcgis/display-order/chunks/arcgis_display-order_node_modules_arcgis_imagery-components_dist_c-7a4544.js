/*! For license information please see arcgis_display-order_node_modules_arcgis_imagery-components_dist_c-7a4544.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_display-order_node_modules_arcgis_imagery-components_dist_c-7a4544"],{584:(e,t,s)=>{s.r(t),s.d(t,{ArcgisImageryMultidimensionalInfo:()=>v});var i=s(3174),n=s(9619),o=s(5662),a=s(6024),r=s(9722),l=s(7960),c=s(5860),h=s(6011),d=s(2094);const m="arcgisImageryComponents";function u(e,t){const s=f();s[e]=t,function(e){const t=JSON.stringify(e);"{}"===t?localStorage.removeItem(m):localStorage.setItem(m,t)}(s)}function f(){const e=localStorage.getItem(m);return e?JSON.parse(e):{}}const p=h.AH`:host{display:flex;flex:1 1 auto}.info{width:100%}.default-variable{font-size:var(--calcite-font-size--2)}.notice{margin-bottom:10px}`,g="imageryMultidimensionalInfoTipDismissed";class v extends c.WF{constructor(){super(...arguments),this.messages=(0,a.u)({blocking:!0}),this.variableEl=(0,l._)(),this.filterItems=[],this.selectedVariableNames=[],this.showFilterLength=10,this.showRawSourceInfo=!1,this.open=!1,this.showStatistics=!1}static{this.properties={multidimensionalInfo:16,selectedVariableNames:16,showFilterLength:9,showRawSourceInfo:5,layer:0,open:5,showStatistics:5}}static{this.styles=p}async done(){this.closePopover()}load(){this.initLayer(this.layer)}willUpdate(e){this.hasUpdated&&e.has("layer")&&(this.closePopover(),this.multidimensionalInfo=void 0,this.selectedVariableNames=[],this.initLayer(this.layer))}disconnectedCallback(){super.disconnectedCallback(),this.closePopover()}closePopover(){this.outsideContainer?.remove(),this.outsideContainer=void 0}async initLayer(e){e&&(e.loaded||await e.load(),this.multidimensionalInfo=await(0,o.g)(e,this.showRawSourceInfo),this.multidimensionalInfo&&(this.filterItems=this.multidimensionalInfo.variables.map((({name:e,dimensions:t})=>({name:e,dimensionNames:t.map((e=>e.name))})))),this.filterMessages={clear:this.messages.general.clear,label:this.messages.multidimensionalInfo.searchVariables})}render(){const{layer:e,multidimensionalInfo:t,messages:s}=this;if(!t){const t=!e?.loaded;return r.qy`<calcite-block class="info" .heading=${s.multidimensionalInfo.info} collapsible .open=${!!this.open} .loading=${t}>${t?r.qy`<calcite-loader class="loader" label type=indeterminate></calcite-loader>`:r.qy`<div>${s.general.unsupported}</div>`}</calcite-block>`}const{variables:i}=t,n=[];i.forEach((({dimensions:e})=>e.forEach((e=>{n.some((t=>t.name===e.name))||n.push(e)}))));const o=this.showRawSourceInfo&&(a=g,!f()[a]);var a;return r.qy`<calcite-block class="info" .heading=${s.multidimensionalInfo.info} collapsible .open=${!!this.open} @calciteBlockClose=${()=>this.closePopover()}>${o&&this.renderNotice()||""}${this.renderVariableSelect()}<slot></slot></calcite-block>`}renderNotice(){return r.qy`<calcite-notice open closable icon scale=s class="notice" @calciteNoticeClose=${()=>u(g,!0)}><div slot=message> ${this.messages.multidimensionalInfo.tip}</div></calcite-notice>`}renderVariableFilter(){const{messages:e}=this;return r.qy`<calcite-filter .items=${this.filterItems} .messageOverrides=${this.filterMessages} .placeholder=${e.multidimensionalInfo.searchVariables} @calciteFilterChange=${e=>{const t=e.target.filteredItems;this.selectedVariableNames=t.map((({name:e})=>e))}}></calcite-filter>`}renderVariableSelect(){const{variables:e}=this.multidimensionalInfo,{serviceRasterInfo:t}=this.layer,s=(t?.keyProperties).DefaultVariable??e[0].name,i=[];e.forEach((({dimensions:e})=>e.forEach((e=>{i.some((t=>t.name===e.name))||i.push(e)}))));const{multidimensionalInfo:n}=this.messages,o=i.map((({name:e,values:t})=>{const s="StdTime"===e?n.timeValues:"StdZ"===e?n.zValues:n.generalValues.replace("${dimensionName}",e),i=t?.length;return i?`${s}: ${i}`:s})).join("; "),a=this.selectedVariableNames?.length?e.filter((({name:e})=>this.selectedVariableNames.includes(e))):e;return r.qy`<div ${(0,l.K)(this.variableEl)}><calcite-label>${`${n.variables}: ${e.length}; ${o}`}</calcite-label>${e.length>=this.showFilterLength&&this.renderVariableFilter()||""}<calcite-list .label=${n.variables}>${a.map((e=>this.renderVariableListItem(e,e.name===s)))}</calcite-list></div>`}renderVariableListItem(e,t){const{name:s,unit:i,description:o}=e,a=i?`${s} (${i})`:s,{general:l}=this.messages;return(0,n.D)(s,r.qy`<calcite-list-item .label=${a} .description=${o??""} @click=${()=>this.renderPickListPopover(e)}><calcite-action icon=information scale=s .text=${l.close} slot=actions-start @click=${()=>this.renderPickListPopover(e)}></calcite-action>${t?r.qy`<calcite-chip slot=actions-end .label=${l.default}><span class="default-variable">${l.default}</span></calcite-chip>`:null}</calcite-list-item>`)}renderPickListPopover(e){this.outsideContainer??=(0,d.c)();const t=this.variableEl.value?this.variableEl.value.getBoundingClientRect().top-this.el.getBoundingClientRect().top:0;(0,r.XX)(r.qy`<arcgis-imagery-multidimensional-variable-info class="js-app-flyout" .variableInfo=${e} .showStatistics=${this.showStatistics} .messages=${this.messages} open .popoverProps=${{refElement:this.el,placement:"leading-start",offsetDistance:0,offsetSkidding:t,popoverWidth:300}} @arcgisClose=${()=>this.closePopover()}></arcgis-imagery-multidimensional-variable-info>`,this.outsideContainer)}}(0,i.c)("arcgis-imagery-multidimensional-info",v)},2094:(e,t,s)=>{function i(){const e=document.createElement("div");return document.body.appendChild(e),e}s.d(t,{c:()=>i})},5662:(e,t,s)=>{s.d(t,{a:()=>u,b:()=>g,c:()=>d,d:()=>f,e:()=>h,f:()=>r,g:()=>m,h:()=>c,i:()=>p,m:()=>i,u:()=>n});const i=10.9,n=Number.MAX_VALUE-1;function o(e,t){const s=new Date(e),{useFriendlyIsoFormat:i,intl:n,format:o}=t;if(i&&n)return n.formatDate(s,{...n.convertDateFormatToIntlOptions(o??"short-date-long-time"),timeZone:"UTC"});let a=new Date(e).toISOString();return a=`${a.slice(0,a.indexOf("."))}Z`,a}function a(e,t,s="long"){const i=new Date(2022,9,10);return i.setMonth(e-1),t.formatDate(i,{month:s})}function r(e,t,s={}){if(null==e)return"";const{intl:i,useRecurringTimeLabel:n}=s;if(n&&i&&!Array.isArray(e)){const s=t.unit?.toLowerCase().trim();if(function(e){return"StdTime"===e.name&&!!e.recurring}(t)&&("months"===s||"quarters"===s))return"months"===s?a(e,i):function(e,t){return`${a(3*(e-1)+1,t,"short")} - ${a(3*e,t,"short")}`}(e,i)}const r=t.values?.[t.values.length-1];return s.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(r)&&(e=e.join("-")===r.join("-")?e[1]:e[0]),u(t)?(s.useFriendlyIsoFormat&&!s.format&&(s={format:l(t),...s}),Array.isArray(e)?e.map((e=>o(e,s))).join(" - "):o(e,s)):Array.isArray(e)?e.map((e=>i?.formatNumber(e)??String(e))).join(" - "):i?.formatNumber(e)??String(e)}function l(e){let t=e.intervalUnit?.toLowerCase().trim()??"";const{extent:s}=e,i=e.interval??0,n=e.values?.length;if(!["years","months","days","hours"].includes(t)&&s?.length&&n){const e=(s[1]-s[0])/n,i=864e5;t=e>=365*i?"years":e>=28*i?"months":t}switch(t){case"months":t=i>11?"years":t;break;case"days":t=i>364?"years":i>27?"months":t;break;case"hours":t="days"}return"years"===t?"year":"months"===t?"short-month-year":"short-date"}function c(e,t){const s=t?.dimensions?.find((({name:t})=>t===e.name));if(!s?.extent)return e;const i=[...s.extent],{values:n}=e;if(n?.length){const t=n.filter((e=>Array.isArray(e)?null==i[1]||i[0]===i[1]?e[0]===i[0]:e[0]>=i[0]&&e[0]<=i[1]&&e[1]>=i[0]&&e[1]<=i[1]:e>=i[0]&&e<=i[1]));if(0===t.length){const e=n[n.length-1];Array.isArray(e)&&e[1]===i[0]&&t.push(e)}return{...e,extent:i,values:t}}return{...e,extent:i}}function h(e){const{values:t,extent:s,name:i}=e;let n=t?.[0]??s?.[0];return"stdz"===i.toLowerCase()&&!e.hasRanges&&s&&Math.abs(s[1])<=Math.abs(s[0])&&(n=t?.length?t[t.length-1]:s[1]),n}function d(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function m(e,t=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:s,version:i}=e;return t||i<=10.9||!s||"none"===s.functionName?.toLowerCase()?e.serviceRasterInfo.multidimensionalInfo:(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function u(e,t=!1){return"StdTime"===e.name&&(t||!e.recurring)}function f(e,t,s){t=c(t,s);const i=r(e.values[0],t);if(!t.values?.some((e=>i===r(e,t)))){const s=h(t);e.values=null!=s?[s]:[]}}function p(e){return Array.isArray(e[0])}function g(e){return e.variables.map((({name:e,unit:t,description:s})=>({name:e,label:t?`${e} (${t})`:e,description:s})))}},6024:(e,t,s)=>{s.d(t,{u:()=>m});var i=s(310);const n=(e,{host:t,key:s,isReactive:n},o)=>{const a=t,r=a[s]!==e.exports,l=a[s]!==o,c=o!==e.exports;r&&!l&&c&&(a[s]=e.exports);if(t===e.component){if(n){const t=e.component.manager;l&&t.W(e,a[s]),e.onUpdate((i=>{if(i.has(s)){const i=a[s];i!==e.exports&&t.W(e,i)}}))}e.O=n?void 0:s}const h=e.component.constructor.elementProperties.get(s)?.readOnly;e.watchExports((()=>{a[s]!==e.exports&&(h?(0,i.h)((()=>{a[s]=e.exports})):a[s]=e.exports)}))};s(9722);var o=s(7274);const a=e=>l(void 0,e);class r extends i.C{constructor(e,t){super(e);const s=this.exports;try{(0,i.s)(this.component);const e=t(this.component,this),n=this.exports!==s;if((0,i.i)(e)){n||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this.P.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else n&&void 0===e||(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this.P.reject(e),console.error(e)}}catchUpLifecycle(){}}const l=(c=r,(...e)=>{const t=(0,i.e)(),s=new c(...e),o=s.exports;(0,i.d)(t.at(-1));const a=s.component.manager;a.W(s,o),s.watchExports(a.W.bind(a,s)),(0,i.o)(s);const r=[s.component,...t].reverse();return(0,i.t)(r,(e=>void 0===e?void 0:n(s,e,o)),o)});var c;i.C;const h=(e,t)=>{if(!t)return e;const s={...e};return Object.entries(t).forEach((([t,i])=>{s[t]="object"==typeof i?h(e[t],i):i??e[t]})),s};var d=s(3174);const m=(u=d.g,(e={})=>a(((t,s)=>{const i=(0,o.kn)(t.el),n={_lang:i.lang,_t9nLocale:i.t9nLocale,_loading:!0},a=t;s.onLifecycle((()=>(0,o.hd)(t.el,(()=>u("./assets")),(({t9nLocale:e,t9nStrings:i,lang:n})=>{const o={...i,_lang:n,_t9nLocale:e,_loading:!1};s.exports=o;const l=i.componentLabel;"string"==typeof l&&"label"in t&&null==t.label&&(t.label??=l),r(a.messageOverrides)}),e.name)));const r=e=>{const t=s.exports,i=t._original??t,n=h(i,e);e&&(n._original=i),s.exports=n};return"messageOverrides"in a&&s.onUpdate((e=>{e.has("messageOverrides")&&r(a.messageOverrides)})),e.blocking?(s.setProvisionalExports(n,!1),s.ready):n})));var u},7960:(e,t,s)=>{s.d(t,{_:()=>u,K:()=>g});var i=s(7513),n=s(5987),o=s(3715);const a=(e,t)=>{const s=e._$AN;if(void 0===s)return!1;for(const e of s)e._$AO?.(t,!1),a(e,t);return!0},r=e=>{let t,s;do{if(void 0===(t=e._$AM))break;s=t._$AN,s.delete(e),e=t}while(0===s?.size)},l=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(void 0===s)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),d(t)}};function c(e){void 0!==this._$AN?(r(this),this._$AM=e,l(this)):this._$AM=e}function h(e,t=!1,s=0){const i=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(i))for(let e=s;e<i.length;e++)a(i[e],!1),r(i[e]);else null!=i&&(a(i,!1),r(i));else a(this,e)}const d=e=>{e.type==o.OA.CHILD&&(e._$AP??=h,e._$AQ??=c)};class m extends o.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),l(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(a(this,e),r(this))}setValue(e){if((0,n.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const u=()=>new f;class f{}const p=new WeakMap,g=(0,o.u$)(class extends m{render(e){return i.s6}update(e,[t]){const s=t!==this.G;return s&&void 0!==this.G&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),i.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let s=p.get(t);void 0===s&&(s=new WeakMap,p.set(t,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?p.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})},9619:(e,t,s)=>{s.d(t,{D:()=>a});var i=s(7513),n=s(3715),o=s(5987);const a=(0,n.u$)(class extends n.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,s]){return t!==this.key&&((0,o.mY)(e),this.key=t),s}})}}]);