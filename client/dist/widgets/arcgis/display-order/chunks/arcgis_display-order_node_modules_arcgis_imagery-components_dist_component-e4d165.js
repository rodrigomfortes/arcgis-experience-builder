/*! For license information please see arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-e4d165.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_display-order_node_modules_arcgis_imagery-components_dist_component-e4d165"],{5331:(e,t,i)=>{i.r(t),i.d(t,{ArcgisImageryDimensionSlider:()=>d});var n=i(3174),s=i(7960),r=i(5662),a=i(2797),o=i(3789),l=i(3722),c=i(9722),h=i(5860);const u=i(6011).AH`@layer{.arcgis-imagery-dimension-slider{width:100%;height:100%;&.esri-value-picker__layout--vertical{&.esri-value-picker__type--slider{min-height:150px;.esri-value-picker__action-bar{min-height:150px}}}}}`;class d extends h.WF{constructor(){super(...arguments),this.sliderRef=e=>this.createOrUpdateValuePicker(e),this.handleResize=()=>{const e=!(0,r.a)(this.dimensionInfo),t=this.valuePickerConfig?.slider,{heightThresholdForCompactZ:i}=this.sliderSetting;if(!e||!t||!i)return;const{container:n,visibleElements:s}=t;if(n instanceof HTMLElement){const e=n.clientHeight>=i;s.previousButton=e,s.nextButton=e}},this.sliderSetting={playRate:2e3,tooltipPlacement:"auto"},this.arcgisChange=(0,h.lh)()}static{this.properties={dimensionInfo:0,dimensionValue:[9,{hasChanged:()=>!1}],sliderSetting:0}}static{this.styles=u}static{this.shadowRootOptions=h.Iq}get dimensionValue(){return this._dimensionValue}set dimensionValue(e){this._dimensionValue=e;const{activeValue:t,valuePickerConfig:i}=this;if(!i||null==e||e===t)return;const{slider:n,dimensionValues:s}=i,r=!!n.component.reversed;n.values=this.getSelectedSliderValue(e,s,r)}load(){this.listenOn(window,"resize",this.handleResize)}willUpdate(e){this.hasUpdated&&e.has("dimensionInfo")&&this.createOrUpdateValuePicker()}disconnectedCallback(){super.disconnectedCallback(),this.destroyValuePicker()}createValueTicks(e,t){return Array.from({length:t},((i,n)=>0===n?0:n===t-1?e.length-1:Math.round(n*(e.length-1)/(t-1))))}isReversedZ(e){let t=e[e.length-1];return Array.isArray(t)&&(t=t[t.length-1]),t<=0}createValuePickerSlider(e){const t=e.values.slice(),i=(0,r.a)(e,!0),n=!i&&this.isReversedZ(t),s=t.map(((e,t)=>t)),o=s.length,c=o<=4?2:i||o<=10?3:4,h=this.createValueTicks(s,c),u=Math.min(19,o>19?Math.floor(o/2):o),d=this.createValueTicks(s,u),m=[...h];return new l.default({type:"slider",min:0,max:t.length-1,steps:s,minorTicks:d,majorTicks:h,labels:m,reversed:n,visibleElements:{thumbTooltip:!this.sliderSetting.hideThumbTooltip},labelFormatFunction:(i,s)=>{const o=n?t.length-1-i:i;return"tick"===s?(0,r.f)(t[o],e,{intl:a,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,useStartOrEndForRangedValue:!0}):(0,r.f)(t[o],e,{intl:a,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,format:"short-date-long-time"})}})}createOrUpdateValuePicker(e){const{valuePickerConfig:t}=this;if(!t&&!e)return;const{dimensionInfo:i}=this,n=(0,r.a)(i,!0),{name:s,values:a}=i,l=!a?.length||a.length<2;if(t?.handle?.remove(),l)return this.destroyValuePicker(),void(this.valuePickerConfig=void 0);const c=a.slice(),h=!n&&this.isReversedZ(c),u=this.getSelectedSliderValue(this.dimensionValue,c,h),d=this.createValuePickerSlider(i),{sliderSetting:m}=this,f=t?.slider??new o.default({container:e,layout:n?"horizontal":"vertical"});if(f.component=d,f.values=u,f.playRate=m.playRate,f.caption=s,f.label=s,!t){const t=m.tooltipPlacement??(n?"top":"auto");"auto"!==t&&!m.hideThumbTooltip&&setTimeout((()=>{const i=e.getElementsByTagName("calcite-tooltip")[0];i&&(i.placement=t,i.overlayPositioning="fixed")}),1e3),f.when(this.handleResize)}const g=f.watch("values",(e=>{const t=e[0],i=h?c.length-1-t:t;this.updateDefinitionDimensionValue(s,c[i])}));this.valuePickerConfig={slider:f,dimensionName:s,dimensionValues:c,handle:g}}destroyValuePicker(){const{valuePickerConfig:e}=this;e?.handle.remove(),e?.slider.destroy(),this.valuePickerConfig=void 0}getSelectedSliderValue(e,t,i){const n=null==e?0:t.findIndex((t=>Array.isArray(e)&&Array.isArray(t)?e.join("-")===t.join("-"):e===t));return[-1===n?0:i?t.length-1-n:n]}updateDefinitionDimensionValue(e,t){this.activeValue=t,this.arcgisChange.emit({dimensionName:e,value:t})}render(){return c.qy`<div class="arcgis-imagery-dimension-slider" ${(0,s.K)(this.sliderRef)}></div>`}}(0,n.c)("arcgis-imagery-dimension-slider",d)},5662:(e,t,i)=>{i.d(t,{a:()=>m,b:()=>v,c:()=>u,d:()=>f,e:()=>h,f:()=>o,g:()=>d,h:()=>c,i:()=>g,m:()=>n,u:()=>s});const n=10.9,s=Number.MAX_VALUE-1;function r(e,t){const i=new Date(e),{useFriendlyIsoFormat:n,intl:s,format:r}=t;if(n&&s)return s.formatDate(i,{...s.convertDateFormatToIntlOptions(r??"short-date-long-time"),timeZone:"UTC"});let a=new Date(e).toISOString();return a=`${a.slice(0,a.indexOf("."))}Z`,a}function a(e,t,i="long"){const n=new Date(2022,9,10);return n.setMonth(e-1),t.formatDate(n,{month:i})}function o(e,t,i={}){if(null==e)return"";const{intl:n,useRecurringTimeLabel:s}=i;if(s&&n&&!Array.isArray(e)){const i=t.unit?.toLowerCase().trim();if(function(e){return"StdTime"===e.name&&!!e.recurring}(t)&&("months"===i||"quarters"===i))return"months"===i?a(e,n):function(e,t){return`${a(3*(e-1)+1,t,"short")} - ${a(3*e,t,"short")}`}(e,n)}const o=t.values?.[t.values.length-1];return i.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(o)&&(e=e.join("-")===o.join("-")?e[1]:e[0]),m(t)?(i.useFriendlyIsoFormat&&!i.format&&(i={format:l(t),...i}),Array.isArray(e)?e.map((e=>r(e,i))).join(" - "):r(e,i)):Array.isArray(e)?e.map((e=>n?.formatNumber(e)??String(e))).join(" - "):n?.formatNumber(e)??String(e)}function l(e){let t=e.intervalUnit?.toLowerCase().trim()??"";const{extent:i}=e,n=e.interval??0,s=e.values?.length;if(!["years","months","days","hours"].includes(t)&&i?.length&&s){const e=(i[1]-i[0])/s,n=864e5;t=e>=365*n?"years":e>=28*n?"months":t}switch(t){case"months":t=n>11?"years":t;break;case"days":t=n>364?"years":n>27?"months":t;break;case"hours":t="days"}return"years"===t?"year":"months"===t?"short-month-year":"short-date"}function c(e,t){const i=t?.dimensions?.find((({name:t})=>t===e.name));if(!i?.extent)return e;const n=[...i.extent],{values:s}=e;if(s?.length){const t=s.filter((e=>Array.isArray(e)?null==n[1]||n[0]===n[1]?e[0]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]));if(0===t.length){const e=s[s.length-1];Array.isArray(e)&&e[1]===n[0]&&t.push(e)}return{...e,extent:n,values:t}}return{...e,extent:n}}function h(e){const{values:t,extent:i,name:n}=e;let s=t?.[0]??i?.[0];return"stdz"===n.toLowerCase()&&!e.hasRanges&&i&&Math.abs(i[1])<=Math.abs(i[0])&&(s=t?.length?t[t.length-1]:i[1]),s}function u(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function d(e,t=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:i,version:n}=e;return t||n<=10.9||!i||"none"===i.functionName?.toLowerCase()?e.serviceRasterInfo.multidimensionalInfo:(await e.generateRasterInfo(e.rasterFunction).catch((()=>e.serviceRasterInfo))).multidimensionalInfo}function m(e,t=!1){return"StdTime"===e.name&&(t||!e.recurring)}function f(e,t,i){t=c(t,i);const n=o(e.values[0],t);if(!t.values?.some((e=>n===o(e,t)))){const i=h(t);e.values=null!=i?[i]:[]}}function g(e){return Array.isArray(e[0])}function v(e){return e.variables.map((({name:e,unit:t,description:i})=>({name:e,label:t?`${e} (${t})`:e,description:i})))}},7960:(e,t,i)=>{i.d(t,{_:()=>m,K:()=>v});var n=i(7513),s=i(5987),r=i(3715);const a=(e,t)=>{const i=e._$AN;if(void 0===i)return!1;for(const e of i)e._$AO?.(t,!1),a(e,t);return!0},o=e=>{let t,i;do{if(void 0===(t=e._$AM))break;i=t._$AN,i.delete(e),e=t}while(0===i?.size)},l=e=>{for(let t;t=e._$AM;e=t){let i=t._$AN;if(void 0===i)t._$AN=i=new Set;else if(i.has(e))break;i.add(e),u(t)}};function c(e){void 0!==this._$AN?(o(this),this._$AM=e,l(this)):this._$AM=e}function h(e,t=!1,i=0){const n=this._$AH,s=this._$AN;if(void 0!==s&&0!==s.size)if(t)if(Array.isArray(n))for(let e=i;e<n.length;e++)a(n[e],!1),o(n[e]);else null!=n&&(a(n,!1),o(n));else a(this,e)}const u=e=>{e.type==r.OA.CHILD&&(e._$AP??=h,e._$AQ??=c)};class d extends r.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,i){super._$AT(e,t,i),l(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(a(this,e),o(this))}setValue(e){if((0,s.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const m=()=>new f;class f{}const g=new WeakMap,v=(0,r.u$)(class extends d{render(e){return n.s6}update(e,[t]){const i=t!==this.G;return i&&void 0!==this.G&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),n.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let i=g.get(t);void 0===i&&(i=new WeakMap,g.set(t,i)),void 0!==i.get(this.G)&&this.G.call(this.ht,void 0),i.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?g.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})}}]);