/*! For license information please see arcgis_display-order_node_modules_arcgis_imagery-components_dist_c-ce7b57.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_display-order_node_modules_arcgis_imagery-components_dist_c-ce7b57"],{6024:(e,t,i)=>{i.d(t,{u:()=>u});var s=i(310);const a=(e,{host:t,key:i,isReactive:a},o)=>{const c=t,l=c[i]!==e.exports,r=c[i]!==o,n=o!==e.exports;l&&!r&&n&&(c[i]=e.exports);if(t===e.component){if(a){const t=e.component.manager;r&&t.W(e,c[i]),e.onUpdate((s=>{if(s.has(i)){const s=c[i];s!==e.exports&&t.W(e,s)}}))}e.O=a?void 0:i}const d=e.component.constructor.elementProperties.get(i)?.readOnly;e.watchExports((()=>{c[i]!==e.exports&&(d?(0,s.h)((()=>{c[i]=e.exports})):c[i]=e.exports)}))};i(9722);var o=i(7274);const c=e=>r(void 0,e);class l extends s.C{constructor(e,t){super(e);const i=this.exports;try{(0,s.s)(this.component);const e=t(this.component,this),a=this.exports!==i;if((0,s.i)(e)){a||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this.P.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else a&&void 0===e||(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this.P.reject(e),console.error(e)}}catchUpLifecycle(){}}const r=(n=l,(...e)=>{const t=(0,s.e)(),i=new n(...e),o=i.exports;(0,s.d)(t.at(-1));const c=i.component.manager;c.W(i,o),i.watchExports(c.W.bind(c,i)),(0,s.o)(i);const l=[i.component,...t].reverse();return(0,s.t)(l,(e=>void 0===e?void 0:a(i,e,o)),o)});var n;s.C;const d=(e,t)=>{if(!t)return e;const i={...e};return Object.entries(t).forEach((([t,s])=>{i[t]="object"==typeof s?d(e[t],s):s??e[t]})),i};var h=i(3174);const u=(m=h.g,(e={})=>c(((t,i)=>{const s=(0,o.kn)(t.el),a={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},c=t;i.onLifecycle((()=>(0,o.hd)(t.el,(()=>m("./assets")),(({t9nLocale:e,t9nStrings:s,lang:a})=>{const o={...s,_lang:a,_t9nLocale:e,_loading:!1};i.exports=o;const r=s.componentLabel;"string"==typeof r&&"label"in t&&null==t.label&&(t.label??=r),l(c.messageOverrides)}),e.name)));const l=e=>{const t=i.exports,s=t._original??t,a=d(s,e);e&&(a._original=s),i.exports=a};return"messageOverrides"in c&&i.onUpdate((e=>{e.has("messageOverrides")&&l(c.messageOverrides)})),e.blocking?(i.setProvisionalExports(a,!1),i.ready):a})));var m},9418:(e,t,i)=>{i.r(t),i.d(t,{ArcgisImageryDisplayOrder:()=>g});var s=i(3174),a=i(5860),o=i(9722),c=i(7274),l=i(6024),r=i(6011);const n=["center","northwest","lock-raster","attribute","nadir","viewpoint","seamline","none"],d=["first","last","min","max","mean","sum"],h=["double","single","long","integer","small-integer","oid","date","big-integer","date-only"],u={center:"mosaic-method-closest-to-center",northwest:"mosaic-method-north-west","lock-raster":"mosaic-method-lock-raster",attribute:"mosaic-method-by-attribute",nadir:"mosaic-method-closest-to-nadir",viewpoint:"mosaic-method-none",seamline:"mosaic-method-seamline",none:"mosaic-method-none"},m={first:"mosaic-method-first",last:"mosaic-method-last",min:"mosaic-method-minimum",max:"mosaic-method-maximum",mean:"mosaic-method-mean",sum:"mosaic-method-sum",blend:"mosaic-method-blend"},p=r.AH`:host{display:flex;height:100%}.image-display-order-lock-input{margin-top:.5rem}.image-display-order-block{border-block-end-width:0px}.image-display-order-block-without-heading{margin-block:0px}`;class g extends a.WF{constructor(){super(...arguments),this.mosaicMethodList=n,this.attributeFieldList=[],this._messages=(0,l.u)({blocking:!0}),this.debouncedHandleAttributeValueChange=(0,c.sg)((e=>{this.activeMosaicRule&&(this.activeMosaicRule.sortValue=e),this.updateActiveMosaicRule()}),300),this.debouncedHandleRasterIDsChange=(0,c.sg)((e=>{this.activeMosaicRule&&(this.activeMosaicRule.lockRasterIds=e),this.updateActiveMosaicRule()}),300),this.debouncedHandleReverseOrderChange=(0,c.sg)((e=>{this.activeMosaicRule&&(this.activeMosaicRule.ascending=!e),this.updateActiveMosaicRule()}),300),this.closable=!1,this.hideButtons=!1,this.arcgisClose=(0,a.lh)()}static{this.properties={activeMosaicRule:16,layer:0,panelHeading:1,closable:5,hideButtons:5}}static{this.styles=p}load(){this.init()}willUpdate(e){this.hasUpdated&&e.has("layer")&&this.init()}async init(){await this.layer.load(),this.originalMosaicRule=this.getOriginalMosaicRule(),this.activeMosaicRule=this.originalMosaicRule.clone(),this.mosaicMethodList=this.getMosaicMethodList(),this.attributeFieldList=this.getAttributeFieldList()}handleMosaicMethodChange(e){const t=e.currentTarget.selectedItems[0]?.value,{lockRasterIds:i}=this.activeMosaicRule,s="attribute"===t?this.attributeFieldList?.[0]?.name:null,a="lock-raster"!==t?null:i,o="seamline"!==t,c="seamline"===t?"blend":"first";this.activeMosaicRule&&(this.activeMosaicRule.method=t,this.activeMosaicRule.sortField=s,this.activeMosaicRule.sortValue="",this.activeMosaicRule.lockRasterIds=a,this.activeMosaicRule.ascending=o,this.activeMosaicRule.operation=c),this.updateActiveMosaicRule()}handleAttributeFieldChange(e){const t=e.currentTarget.selectedOption?.value;this.activeMosaicRule&&(this.activeMosaicRule.sortField=t),this.updateActiveMosaicRule()}handleDateAttributeValueChange(e){const t=e.currentTarget.value.replace(/-/gu,"/");this.debouncedHandleAttributeValueChange(t)}handleAttributeValueChange(e){const t=+e.currentTarget.value;this.debouncedHandleAttributeValueChange(t)}handleRasterIDsChange(e){const t=e.currentTarget.value;if(!/^[0-9]+(,[0-9]+)*$/.test(t))return;const i=t.split(",").map((e=>Number.parseInt(e,10)));this.debouncedHandleRasterIDsChange(i)}handleReverseOrderChange(e){const t=e.currentTarget?.checked;this.debouncedHandleReverseOrderChange(t)}handleMosaicOperatorChange(e){const t=e.currentTarget.selectedItems[0]?.value;this.activeMosaicRule&&(this.activeMosaicRule.operation=t),this.updateActiveMosaicRule()}handleDone(){this.activeMosaicRule&&(this.originalMosaicRule=this.activeMosaicRule.clone()),this.arcgisClose.emit("save")}handleCancel(){this.layer.mosaicRule=this.originalMosaicRule,this.activeMosaicRule=this.originalMosaicRule.clone(),this.arcgisClose.emit("cancel")}updateActiveMosaicRule(){this.activeMosaicRule&&(this.activeMosaicRule=this.activeMosaicRule.clone(),this.layer.mosaicRule=this.activeMosaicRule)}getOriginalMosaicRule(){const{mosaicRule:e,defaultMosaicRule:t}=this.layer,i=e??t;if(i){const{method:e,operation:t}=i||{};"seamline"===e?i.operation="blend":"blend"===t&&(i.operation="first")}return i}getAllowedAttributeFieldList(){const{fields:e,sourceJSON:t}=this.layer,i=e.filter((({type:e})=>h.includes(e)));i.sort(((e,t)=>e.alias.localeCompare(t.alias)));const{sortableFields:s}=t||{};if(!s?.length)return i;const a=s?.split(",").map((e=>e.toLowerCase()));return i.filter((e=>a.includes(e.name.toLocaleLowerCase())))}filterAttributeFieldList(e){return"category"!==this.layer.sourceJSON?.sortField?.toLowerCase()?e.filter((e=>"category"!==e.name.toLocaleLowerCase())):e}getAttributeFieldList(){const e=this.getAllowedAttributeFieldList();return this.filterAttributeFieldList(e)}getAllowedMosaicMethodList(){const{sourceJSON:e}=this.layer;if(!e)return n;const{currentVersion:t,allowedMosaicMethods:i}=e;if(!(t&&t>=10.1)||!(i?.length>1))return n;const s=i.split(",").map((e=>(e=>{switch(e=e.toLowerCase()){case"lockraster":case"lock-raster":return"lock-raster";case"byattribute":return"attribute";default:return e}})(e.toLowerCase()))),a="none";return s.includes(a)||s.push(a),s}filteredMosaicMethodList(e){return e.filter((e=>"viewpoint"!==e))}getMosaicMethodList(){const e=this.getAllowedMosaicMethodList();return this.filteredMosaicMethodList(e)}render(){return o.qy`<calcite-panel .heading=${this.panelHeading??this._messages.imageDisplayOrder} .closable=${this.closable} .loading=${!this.activeMosaicRule} @calcitePanelClose=${this.handleCancel} class=${(0,a.CP)({panel:!0})}>${this.renderMosaicRule()}${!this.hideButtons&&this.renderFooterActions()||""}</calcite-panel>`}renderMosaicRule(){if(!this.activeMosaicRule)return null;const e=this.activeMosaicRule.method,t="attribute"===e,i="lock-raster"===e,s="seamline"!==e;return o.qy`<calcite-block class=${(0,a.CP)({"image-display-order-block":!0,"image-display-order-block-without-heading":""===this.panelHeading})} heading expanded>${this.renderMosaicMethodSelection()}${t&&this.renderAttributeFilter()||""}${i&&this.renderRasterId()||""}${s&&this.renderReverseOrder()||""}${this.renderMosaicOperatorSelection()}</calcite-block>`}renderMosaicMethodSelection(){const{method:e}=this.activeMosaicRule,{mosaicMethod:t,componentLabel:i,mosaicMethodLabel:s,mosaicMethodDescription:a}=this._messages;return o.qy`<calcite-label>${t}<calcite-combobox .label=${i.methodSelect} clear-disabled selection-mode=single-persist overlay-positioning=fixed @calciteComboboxChange=${this.handleMosaicMethodChange}>${this.mosaicMethodList.map((t=>o.qy`<calcite-combobox-item .value=${t} .icon=${u[t]} .heading=${s[t]} .description=${a[t]} .selected=${t===e}></calcite-combobox-item>`))}</calcite-combobox></calcite-label>`}renderAttributeFilter(){const{sortField:e}=this.activeMosaicRule,t=this.attributeFieldList.find((({name:t})=>t===e))?.type,i="date"===t||"date-only"===t;return o.qy`<div>${this.renderAttributeMethodSelection()}${i?this.renderAttributeDatePicker():this.renderAttributeSortValue()}</div>`}renderAttributeMethodSelection(){const{sortField:e}=this.activeMosaicRule,{attribute:t,componentLabel:i}=this._messages;return o.qy`<calcite-label>${t}<calcite-select .label=${i.attributeFieldSelect} @calciteSelectChange=${this.handleAttributeFieldChange}>${this.attributeFieldList.map((({name:t,alias:i})=>o.qy`<calcite-option .value=${t} .label=${i??""} .selected=${t===e}></calcite-option>`))}</calcite-select></calcite-label>`}renderAttributeDatePicker(){const{sortValue:e}=this.activeMosaicRule,{highestPriorityValue:t}=this._messages,i=e?.toString()?.includes("/")?e.replace(/\//gu,"-"):"";return o.qy`<calcite-label>${t}<calcite-input-date-picker placement=bottom-end overlay-positioning=fixed .value=${i} @calciteInputDatePickerChange=${this.handleDateAttributeValueChange}></calcite-input-date-picker></calcite-label>`}renderAttributeSortValue(){const{sortValue:e}=this.activeMosaicRule,{highestPriorityValue:t}=this._messages;return o.qy`<calcite-label>${t}<calcite-input type=number step=0.001 .value=${e?.toString()} @calciteInputInput=${this.handleAttributeValueChange}></calcite-input></calcite-label>`}renderRasterId(){const{lockRasterIds:e}=this.activeMosaicRule,t=e?.join(",");return o.qy`<calcite-label>${this._messages.imageIDs}<calcite-input class="image-display-order-lock-input" .placeholder=${this._messages.useCommaDelimiter} .value=${t} @calciteInputInput=${this.handleRasterIDsChange}></calcite-input></calcite-label>`}renderReverseOrder(){const{ascending:e}=this.activeMosaicRule;return o.qy`<calcite-label layout=inline-space-between>${this._messages.reverserOrder}<calcite-switch .checked=${!e} @calciteSwitchChange=${this.handleReverseOrderChange}></calcite-switch></calcite-label>`}renderMosaicOperatorSelection(){const{method:e,operation:t}=this.activeMosaicRule,i="seamline"===e?["blend"]:d,{mosaicOperator:s,componentLabel:a,mosaicOperatorLabel:c,mosaicOperatorDescription:l}=this._messages;return o.qy`<calcite-label>${s}<calcite-combobox .label=${a.operatorSelect} clear-disabled .disabled=${"seamline"===e} selection-mode=single-persist overlay-positioning=fixed @calciteComboboxChange=${this.handleMosaicOperatorChange}>${i.map((e=>o.qy`<calcite-combobox-item .value=${e} .icon=${m[e]} .heading=${c[e]} .description=${l[e]} .selected=${e===t}></calcite-combobox-item>`))}</calcite-combobox></calcite-label>`}renderFooterActions(){return o.qy`${this.renderDoneButton()}${this.renderCancelButton()}`}renderDoneButton(){return o.qy`<calcite-button slot=footer appearance=solid width=half .disabled=${!this.activeMosaicRule} @click=${this.handleDone}>${this._messages.done}</calcite-button>`}renderCancelButton(){return o.qy`<calcite-button slot=footer appearance=outline-fill width=half .disabled=${!this.activeMosaicRule} @click=${this.handleCancel}>${this._messages.cancel}</calcite-button>`}}(0,s.c)("arcgis-imagery-display-order",g)}}]);