System.register(["jimu-core","jimu-arcgis","jimu-ui","arcgis-map-components","jimu-ui/basic/list-tree","esri/core/reactiveUtils","jimu-theme","jimu-core/dnd","esri/widgets/Legend"],(function(e,t){var n={},l={},r={},i={},a={},o={},s={},c={},u={};return{setters:[function(e){n.AppMode=e.AppMode,n.DataSourceManager=e.DataSourceManager,n.DataSourceTypes=e.DataSourceTypes,n.Immutable=e.Immutable,n.React=e.React,n.ReactRedux=e.ReactRedux,n.classNames=e.classNames,n.css=e.css,n.getAppStore=e.getAppStore,n.hooks=e.hooks,n.jsx=e.jsx,n.polished=e.polished},function(e){l.JimuMapViewComponent=e.JimuMapViewComponent,l.MapViewManager=e.MapViewManager},function(e){r.Alert=e.Alert,r.CollapsablePanel=e.CollapsablePanel,r.DistanceUnits=e.DistanceUnits,r.Icon=e.Icon,r.Switch=e.Switch,r.WidgetPlaceholder=e.WidgetPlaceholder,r.defaultMessages=e.defaultMessages},function(){},function(e){a.List=e.List},function(e){o.watch=e.watch},function(e){s.Global=e.Global,s.useTheme=e.useTheme},function(e){c.interact=e.interact},function(e){u.default=e.default}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=s},3485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m10.646 10.06.707-.707L8 6 4.646 9.353l.708.707L8 7.414z"></path><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m-1 0A6 6 0 1 1 2 8a6 6 0 0 1 12 0" clip-rule="evenodd"></path></svg>'},11466:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M9 0v20h1V0zM0 3.5A1.5 1.5 0 0 1 1.5 2h5v1h-5a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h5v1h-5A1.5 1.5 0 0 1 0 16.5zM20 16.5a1.5 1.5 0 0 1-1.5 1.5h-6v-1h6a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-6V2h6A1.5 1.5 0 0 1 20 3.5z"></path><path fill="#000" d="m6.354 6.646.707.708L4.414 10l2.647 2.646-.707.708L3 10zM12 12.646l.707.707L16.061 10l-3.354-3.354-.707.708L14.646 10z"></path></svg>'},14321:e=>{"use strict";e.exports=r},26245:e=>{"use strict";e.exports=c},26490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},27416:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6 11.943 4 1.711V4.057L6 2.346zm-1 .17V2.494l-4 1.48v9.619zm6 1.393 4-1.48V2.407l-4 1.48zM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937z"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},39420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0m1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0M5.354 6.646l-.708.708L8 10.707l3.354-3.353-.707-.708L8 9.293z" clip-rule="evenodd"></path></svg>'},39524:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6H5.43zM.961 9.8h4.88c.211 0 .359.19.359.4q0 .207.045.4a1.8 1.8 0 0 0 3.51 0h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755q.045-.194.045-.4c0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},40292:e=>{"use strict";e.exports=i},44828:e=>{"use strict";e.exports=u},62243:e=>{"use strict";e.exports=o},62686:e=>{"use strict";e.exports=l},73529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=n},95930:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="M7.5 4V1.39Q5.854 2.484 4.985 4zm0 3.5V5H4.512a8.1 8.1 0 0 0-.5 2.5zm0 3.5V8.5H4.012a8.1 8.1 0 0 0 .5 2.5zm0 3.61V12H4.985q.869 1.515 2.515 2.61m2.543.087A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M11.015 12H8.5v2.61q1.646-1.095 2.515-2.61m1.974-3.5a9.3 9.3 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5zm-1.001 0H8.5V11h2.988a8.1 8.1 0 0 0 .5-2.5m.56-3.5q.381 1.163.441 2.5h1.993a7 7 0 0 0-.656-2.5zm-1.06 0H8.5v2.5h3.488a8.1 8.1 0 0 0-.5-2.5m-1.445-3.697Q11.408 2.473 12.145 4h1.6a7 7 0 0 0-3.702-2.697M8.5 4h2.515Q10.146 2.485 8.5 1.39zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16M5.957 1.302A7 7 0 0 0 2.255 4h1.6a8.3 8.3 0 0 1 2.102-2.697M3.011 7.5q.06-1.337.441-2.5H1.674a7 7 0 0 0-.656 2.5zm.441 3.5a9.3 9.3 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5zm2.505 3.697A8.3 8.3 0 0 1 3.855 12h-1.6a7 7 0 0 0 3.702 2.697"></path></svg>'},98640:e=>{"use strict";e.exports=a}},t={};function d(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,d),r.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var p={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(p),d.d(p,{__set_webpack_public_path__:()=>je,default:()=>Ve});var e=d(79244),t=d(62686),n=d(14321);const l={_widgetLabel:"Swipe",leadingLayers:"Leading layers",trailingLayers:"Trailing layers",webSceneNotSupported:"Web scenes are not supported.",noConfiguredLayerText:"There is currently no configured layer.",noValidLayerText:"There is no valid layer.",mapOccupiedMsg:"Another active Swipe that connects to the targeted Map has been toggled off.",runtimeLayers:"Runtime layers",dragToCompare:"Drag to compare",currentDisplay:"is currently being displayed"};var r,i,a=d(11466),o=d.n(a);!function(e){e.SimpleHorizontal="SIMPLE_HORIZONTAL",e.SimpleVertical="SIMPLE_VERTICAL",e.AdvancedHorizontal="ADVANCED_HORIZONTAL",e.AdvancedVertical="ADVANCED_VERTICAL"}(r||(r={})),function(e){e.SwipeBetweenLayers="SWIPE_BETWEEN_LAYERS_OF_ONE_MAP",e.SwipeBetweenMaps="SWIPE_BETWEEN_WEBMAPS_OR_WEBSCENES"}(i||(i={}));d(40292);var s=function(e,t,n,l){return new(n||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}))};const{useEffect:c,useRef:u}=e.React;function v(t){var n,l;const{widgetId:i,activeMapView:a,leadingLayersId:o,trailingLayersId:d,swipeStyle:p,sliderPosition:v,isDesignMode:m}=t,y=null===(l=null===(n=(0,e.getAppStore)().getState())||void 0===n?void 0:n.appContext)||void 0===l?void 0:l.isRTL,g=null==a?void 0:a.mapWidgetId,h=u(),w=p===r.SimpleHorizontal&&y,f=u(w?100-v.distance:v.distance),x=u(document.querySelector(`div[data-widgetid=${g}]`)),b=u(!1),L=u(v);c((()=>{var e;const t=null===(e=x.current)||void 0===e?void 0:e.querySelector(".arcgis-swipe");t&&(t.style.pointerEvents=m?null:"none")}),[m,x]);const S=(e,t)=>s(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)}));return c((()=>()=>{b.current=!0}),[]),c((()=>{function e(){var e;h.current&&(f.current=h.current.swipePosition,null===(e=null==a?void 0:a.view)||void 0===e||e.ui.remove(h.current),h.current.destroy())}return(null==a?void 0:a.view)&&function(){var t,n;const l=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map((e=>S(a,e))),s=null===(n=null==d?void 0:d.asMutable())||void 0===n?void 0:n.map((e=>S(a,e))),c=p===r.SimpleVertical?"vertical":"horizontal";l&&s&&Promise.all(l.concat(s)).then((t=>{if(b.current)return;const n=null==o?void 0:o.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer)),l=null==d?void 0:d.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer));e(),v===L.current&&f.current||(L.current=v,f.current=w?100-v.distance:v.distance),h.current=document.createElement("arcgis-swipe"),h.current.classList.add(`exb-swipe-${i}`),h.current.leadingLayers=n,h.current.trailingLayers=l,h.current.direction=c,h.current.swipePosition=f.current,h.current.autoDestroyDisabled=!0,h.current.view=null==a?void 0:a.view,null==a||a.view.ui.add(h.current)}))}(),()=>{e()}}),[i,a,v,o,d,p,w]),null}var m=d(98640),y=d(73529),g=d.n(y),h=d(26490),w=d.n(h);const f=t=>{const{layerList:l,onChange:r,isAllowDeactivateLayers:i,toggleLayerVisibility:a,highlightIndex:o}=t,s=e.hooks.useTranslation(n.defaultMessages),c=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Express)),u=e.React.useCallback((e=>[{label:s("visibility"),buttonAriaPressed:null==e?void 0:e.visible,iconProps:{icon:(null==e?void 0:e.visible)?g():w(),size:16},action:()=>{var n;null===(n=null==t?void 0:t.onToggleLayerVisibility)||void 0===n||n.call(t,e.layerId)}}]),[t,s]),[d,p]=e.React.useState((()=>{const e=c?null==l?void 0:l.filter((e=>e.visible)):l;return null==e?void 0:e.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!i&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:a?u(e):[]})))}));e.React.useEffect((()=>{const e=c?null==l?void 0:l.filter((e=>e.visible)):l,t=null==e?void 0:e.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!i&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:a?u(e):[]})));p(t)}),[u,i,c,l,a]);return(0,e.jsx)("div",{className:"layer-list",css:x(o)},(0,e.jsx)(m.List,{size:"default",className:"w-100",itemsJson:d,isMultiSelection:i,dndEnabled:!1,disableDoubleClickTitle:!0,onUpdateItem:(e,t)=>{if(!i)return;const[n,l]=e.itemJsons;p([...l]),r(n.itemKey)}}))};function x(t){return e.css`
    .jimu-tree-item_template-card .jimu-tree-item__body:hover {
      background-color: transparent !important;
    }
    .jimu-tree-main {
      .jimu-tree-item:nth-of-type(${t}) {
        .jimu-tree-item__body {
          border-left: .125rem solid var(--sys-color-primary-main) !important;
        }
      }
    }
  `}var b=d(39524),L=d.n(b),S=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n};const M=t=>{const n=window.SVG,{className:l}=t,r=S(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",l);return n?e.React.createElement(n,Object.assign({className:i,src:L()},r)):e.React.createElement("svg",Object.assign({className:i},r))},I=t=>{const{swipeLayerMode:n}=t,r=e.hooks.useTranslation(l);return(0,e.jsx)("div",{css:V,className:"no-layer-placeholder w-100"},(0,e.jsx)("div",{className:"no-layer-placeholder-icon"},(0,e.jsx)(M,{size:32,color:"var(--ref-palette-neutral-1000)"})),(0,e.jsx)("div",{className:"no-layer-placeholder-text"},(0,e.jsx)("span",null,r(n?"noConfiguredLayerText":"noValidLayerText"))))},V=e.css`
.no-layer-placeholder-text, .no-layer-placeholder-icon{
  display: table;
  margin: 0 auto;
}
.no-layer-placeholder-text {
  color: var(--ref-palette-neutral-1000);
  font-size: 13px;
  margin-top: 16px;
  text-align: center;
}
.no-layer-placeholder-icon {
  color: var(--ref-palette-neutral-1100);
}
`;var j=d(3485),C=d.n(j),A=d(39420),E=d.n(A),O=d(62243),P=function(e,t,n,l){return new(n||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}))};const{useState:R,useEffect:k,useRef:N}=e.React;function D(t){var r,i,a,o;const{swipeMapViewList:s,activeMapView:c,isAllowDeactivateLayers:u,toggleLayerVisibility:d,handlePanelSelectedLeadingLayers:p,handlePanelSelectedTrailingLayers:v,runtimeAddedLayers:m,handleRuntimePanelSelectedLeadingLayers:y,handleRuntimePanelSelectedTrailingLayers:g}=t,[h,w]=R(!1),[x,b]=R(!1),[L,S]=R(!1),[M,V]=R(!1),j=e.React.useRef([]),A=e.React.useRef([]),D=e.React.useRef([]),z=e.React.useRef([]),$=e.hooks.useTranslation(l),[q,_]=R(null),[F,H]=R(null),[J,B]=R([]),[U,W]=R([]),G=N(q),Y=N(F),X=N(J),K=N(U),[Q,Z]=R((null===(r=null==s?void 0:s[null==c?void 0:c.id])||void 0===r?void 0:r.leadingLayersId)||(0,e.Immutable)([])),[ee,te]=R((null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i.trailingLayersId)||(0,e.Immutable)([])),[ne,le]=R((0,e.Immutable)([])),[re,ie]=R((0,e.Immutable)([])),ae=(e,t)=>P(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)})),oe=e.hooks.useEventCallback(((t,n,l,r)=>{var i,a,o;const d=t?"leadingLayersId":"trailingLayersId",p=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[d])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>ae(c,e)));p&&Promise.all(p).then((t=>{const i=t.map((e=>({layerId:e.id,title:e.layer.title,selected:!0,visible:e.layer.visible,allowOperation:u})));n(i),l.current=i;const a=[];null==i||i.forEach((e=>{e.selected&&a.push(e.layerId)})),r((0,e.Immutable)(a))}))}));k((()=>{oe(!0,_,G,p),oe(!1,H,Y,v)}),[s,c,u,p,v,oe]),k((()=>{const t=null==m?void 0:m.asMutable({deep:!0}).map((e=>{const t=c.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));B(t),X.current=t,W(t),K.current=t;const n=[];null==t||t.forEach((e=>{e.selected&&n.push(e.layerId)})),y((0,e.Immutable)(n)),g((0,e.Immutable)(n))}),[c,y,g,m]);const se=e.hooks.useEventCallback(((t,n,l,r)=>{var i,a,o;const u=t?"leadingLayersId":"trailingLayersId",d=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[u])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>ae(c,e)));d&&Promise.all(d).then((t=>{t.forEach((t=>{const i=[];i.push(O.watch((()=>t.layer.visible),(r=>{const i=JSON.parse(JSON.stringify(n.current));i.forEach((e=>{e.layerId===t.id&&(e.visible=r)})),l((0,e.Immutable)(i)),n.current=(0,e.Immutable)(i)}))),r.current=i}))}))}));k((()=>{const e=j.current,t=A.current;return se(!0,G,_,j),se(!1,Y,H,A),()=>{e.forEach((e=>{e.remove(),e=null})),t.forEach((e=>{e.remove(),e=null}))}}),[s,c,se]);const ce=e.hooks.useEventCallback(((t,n,l,r)=>{(t?J:U).forEach((t=>{const i=c.jimuLayerViews[t.layerId],a=[];a.push(O.watch((()=>i.layer.visible),(t=>{const r=JSON.parse(JSON.stringify(n.current));r.forEach((e=>{e.layerId===i.id&&(e.visible=t)})),l((0,e.Immutable)(r)),n.current=(0,e.Immutable)(r)}))),r.current=a}))}));k((()=>{const e=D.current,t=z.current;return ce(!0,X,B,D),ce(!1,K,W,z),()=>{e.forEach((e=>{e.remove(),e=null})),t.forEach((e=>{e.remove(),e=null}))}}),[c,J,U,ce]),k((()=>{p(Q)}),[p,Q]),k((()=>{v(ee)}),[v,ee]),k((()=>{y(ne)}),[y,ne]),k((()=>{g(re)}),[g,re]);const ue=()=>{w(!h)},de=()=>{b(!x)},pe=()=>{S(!L)},ve=()=>{V(!M)},me=(t,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),n((0,e.Immutable)(a)),r.current=a;const o=[];a.forEach((e=>{e.selected&&o.push(e.layerId)})),l((0,e.Immutable)(o))},ye=e.React.useCallback((e=>P(this,void 0,void 0,(function*(){const t=yield ae(c,e);t.layer.visible=!t.layer.visible}))),[c]),ge=(null===(a=null==s?void 0:s[null==c?void 0:c.id])||void 0===a?void 0:a.leadingLayersId.length)>0,he=(null===(o=null==s?void 0:s[null==c?void 0:c.id])||void 0===o?void 0:o.trailingLayersId.length)>0;return(0,e.jsx)("div",{css:T},(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse",label:$("leadingLayers"),isOpen:h,"aria-label":ge?$("leadingLayers"):$("leadingLayers")+":"+$("noConfiguredLayerText"),onRequestOpen:ue,onRequestClose:ue},ge?(0,e.jsx)(f,{layerList:q,onChange:e=>{me(q,_,Z,G,e)},isAllowDeactivateLayers:u,toggleLayerVisibility:d,onToggleLayerVisibility:ye}):(0,e.jsx)(I,{swipeLayerMode:!0}),(null==J?void 0:J.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:$("runtimeLayers"),isOpen:x,"aria-label":$("runtimeLayers"),onRequestOpen:de,onRequestClose:de,rightIcon:E(),rightActiveIcon:C()},(0,e.jsx)(f,{layerList:J,isAllowDeactivateLayers:!0,onChange:e=>{me(J,B,le,X,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:ye}))),(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse",label:$("trailingLayers"),isOpen:M,"aria-label":he?$("trailingLayers"):$("trailingLayers")+":"+$("noConfiguredLayerText"),onRequestOpen:ve,onRequestClose:ve},he?(0,e.jsx)(f,{layerList:F,onChange:e=>{me(F,H,te,Y,e)},isAllowDeactivateLayers:u,toggleLayerVisibility:d,onToggleLayerVisibility:ye}):(0,e.jsx)(I,{swipeLayerMode:!0}),(null==U?void 0:U.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:$("runtimeLayers"),isOpen:L,"aria-label":$("runtimeLayers"),onRequestOpen:pe,onRequestClose:pe,rightIcon:E(),rightActiveIcon:C()},(0,e.jsx)(f,{layerList:U,isAllowDeactivateLayers:!0,onChange:e=>{me(U,W,ie,K,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:ye}))))}const T=e.css`
.swipe-collapse {
  margin-top: 16px;
  .title {
    font-weight: 600;
  }
}
.runtime-layer-collapse {
  .title {
    font-size: 13px;
    font-weight: 500;
  }
}
.layer-list {
  margin-top: 12px;
  margin-bottom: 16px;
}
.no-layer-placeholder {
  margin-top: 16px;
  margin-bottom: 16px;
}
`;var z=d(1888),$=d(26245);const q=(e,t)=>{if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;const n=[...e].sort(),l=[...t].sort();for(let e=0;e<n.length;e++)if(n[e]!==l[e])return!1;return!0},_=t=>{var n;return(null===(n=e.DataSourceManager.getInstance().getDataSource(t))||void 0===n?void 0:n.type)===e.DataSourceTypes.WebMap},F=t=>{if(!t)return"";const n=e.DataSourceManager.getInstance().getDataSource(t);return(null==n?void 0:n.getLabel())||(null==n?void 0:n.getDataSourceJson().sourceLabel)||t};var H=function(e,t,n,l){return new(n||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}))};const{useRef:J,useEffect:B,useState:U}=e.React;function W(t){var i,a,o,s,c,u;const{activeMapView:d,inactiveMapView:p,jimuMapViewGroup:v,widgetId:m,swipeMode:y,swipeStyle:g,sliderPosition:h,mapUseDataSourcesOrderList:w,mapUseDataSources:f,dividerColor:x,handlerColor:b,isDesignMode:L}=t,S=null===(a=null===(i=(0,e.getAppStore)().getState())||void 0===i?void 0:i.appContext)||void 0===a?void 0:a.isRTL,M=d.mapWidgetId,I=J(null===(o=d.view)||void 0===o?void 0:o.width),V=J(null===(s=d.view)||void 0===s?void 0:s.height),j=`jimu-widget-swipe-${m}-handle-container`,C=q(f,w)?w:f,A=J((null==C?void 0:C[0])===(null==d?void 0:d.dataSourceId)),E=J(!1),O=J(!1),P=J(!1),R=J(!1),k={x:0,y:0},N=J(document.querySelector(`div[data-widgetid=${M}] .multi-map-container`)),D=J(null===(c=N.current)||void 0===c?void 0:c.querySelector(".multisourcemap-item-appear-noanimate")),T=J(null===(u=N.current)||void 0===u?void 0:u.querySelector(".multisourcemap-item-disappear-noanimate"));if(g===r.SimpleVertical)k.y=V.current*h.distance*.01;else{const e=S?100-h.distance:h.distance;k.x=I.current*e*.01}const[_,F]=U(k),W=J(),G=J(),Y=J(d.isClickOpenPopupEnabled()),X=J(d.isClickHighlightEnabled()),K=J(p.isClickOpenPopupEnabled()),Q=J(p.isClickHighlightEnabled()),Z=e.hooks.useTranslation(l,n.defaultMessages),ee=(0,z.useTheme)();B((()=>{d.isCached()||(N.current.style.pointerEvents=L?"none":null)}),[L]),B((()=>()=>{N.current&&(N.current.style.pointerEvents=null)}),[]),e.hooks.useUpdateEffect((()=>{A.current=!A.current}),[d]),B((()=>{if(!d.isCached())return D.current=N.current.querySelector(".multisourcemap-item-appear-noanimate"),T.current=N.current.querySelector(".multisourcemap-item-disappear-noanimate"),O.current=!1,E.current=!1,te(),ne(),le(),re(),ae(),ce(),v.hideMapTools(),()=>{oe()}}),[d]),B((()=>{const e=d.view.on("resize",(e=>{I.current=e.width,V.current=e.height,oe(),le(),re(),ae(),ce(),v.hideMapTools()}));return()=>{e.remove()}}),[d]),B((()=>{const e=()=>{E.current=!1},t=()=>{N.current=document.querySelector(`div[data-widgetid=${M}] .multi-map-container`),D.current=N.current.querySelector(".multisourcemap-item-appear-noanimate"),T.current=N.current.querySelector(".multisourcemap-item-disappear-noanimate"),le(),re(),ae(),ce(),v.hideMapTools(),ne()};return d.addCacheListener(e),d.addRestoreListener(t),()=>{d.removeCacheListener(e),d.removeRestoreListener(t),oe()}}),[d]),B((()=>{if(d.isCached())return;G.current.style.backgroundColor=x;G.current.querySelector(".handler").style.backgroundColor=b}),[d,x,b]),B((()=>{F(k)}),[y]),e.hooks.useUpdateEffect((()=>{d.isCached()||(A.current=!A.current,re(_))}),[C]),B((()=>{if(d.isCached())return;const e={x:0,y:0},t=document.querySelector(`.jimu-widget-swipe-${m}-handle-container`);if(g===r.SimpleVertical)e.y=V.current*h.distance*.01,t.style.transform=`translateY(${e.y}px)`;else{const n=S?100-h.distance:h.distance;e.x=I.current*n*.01;const l=S?-(I.current-e.x):e.x;t.style.transform=`translateX(${l}px)`}re(e),F(e),v.hideMapTools()}),[h,m,g,S]);const te=()=>{d.view.popupEnabled&&d.view.closePopup(),p.view.popupEnabled&&p.view.closePopup()},ne=()=>{d.disableClickOpenPopup(),d.disableClickHighlight(),p.disableClickOpenPopup(),p.disableClickHighlight()},le=()=>{(T.current||D.current)&&T.current&&(T.current.style.opacity="1")},re=e=>{const t=e||_;let n=null,l=null;if(g===r.SimpleVertical){n=`inset(0px 0px ${V.current-t.y}px 0px)`,l=`inset(${t.y}px 0px 0px 0px)`}else if(g===r.SimpleHorizontal){n=`inset(0px ${I.current-t.x}px 0px 0px)`,l=`inset(0px 0px 0px ${t.x}px)`}const i=A.current?D.current:T.current,a=A.current?T.current:D.current;i&&(i.style.clipPath=n),a&&(a.style.clipPath=l)},ie=e=>{const t=e.key,n=e.shiftKey?5:.5,l=g===r.SimpleVertical,i=l?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t,a=l?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t;if((i||a)&&(i?(_.x=_.x+n*I.current*.01,_.y=_.y+n*V.current*.01):a&&(_.x=_.x-n*I.current*.01,_.y=_.y-n*V.current*.01),_.x||_.y)){_.x=_.x>I.current?I.current:_.x>0?_.x:0,_.y=_.y>V.current?V.current:_.y>0?_.y:0,F(_),re(_),e.target.style.transform=l?`translateY(${_.y}px)`:`translateX(${_.x}px)`;const t=l?_.y/V.current*100:_.x/I.current*100;e.target.attributes["aria-valuenow"].value=t.toFixed(4).toString(),e.target.attributes["aria-valuetext"].value=t.toFixed(4)+"%"}},ae=()=>{var e;if(document.getElementsByClassName(j)[0])return!1;(()=>{G.current=document.createElement("div"),G.current.className=j,G.current.setAttribute("style","\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n"),G.current.style.backgroundColor=x,G.current.style.zIndex="1";const e={ariaLabel:Z("dragToCompare"),title:Z("dragToCompare"),role:"slider",tabIndex:0,onkeydown:ie,ariaValueMax:"100",ariaValueMin:"0"};for(const t in e)G.current[t]=e[t];const t=document.createElement("div");if(t.setAttribute("style","\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(110,110,110,.5);\n  borderRadius: 2px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"),t.style.backgroundColor=b,g===r.SimpleVertical){G.current.style.top="-2px",G.current.style.transform=`translateY(${_.y}px)`,G.current.style.width=`${I.current}px`,G.current.style.height="4px",G.current.ariaOrientation=Z("vertical");const e=_.y/V.current*100;G.current.ariaValueNow=e.toFixed(4).toString(),G.current.ariaValueText=e.toFixed(4)+"%",t.className="handler arcgis-swipe__handle-icon esri-icon-drag-horizontal",t.style.top="-15px",t.style.left="50%",t.style.marginLeft="-16px",t.style.cursor="row-resize"}else{G.current.style.left="-2px";const e=S?-(I.current-_.x):_.x;G.current.style.transform=`translateX(${e}px)`,G.current.style.height=`${V.current}px`,G.current.style.width="4px",G.current.ariaOrientation=Z("horizontal");const n=_.x/I.current*100;G.current.ariaValueNow=n.toFixed(4).toString(),G.current.ariaValueText=n.toFixed(4)+"%",t.className="handler arcgis-swipe__handle-icon esri-icon-drag-vertical",t.style.left="-15px",t.style.top="50%",t.style.marginTop="-16px",t.style.cursor="col-resize"}G.current.appendChild(t),G.current.onfocus=function(){G.current.style.outline=`2px solid ${ee.sys.color.primary.dark}`,t.style.outline=`2px solid ${ee.sys.color.primary.dark}`},G.current.onblur=function(){G.current.style.outline="unset",t.style.outline="unset"}})(),null===(e=N.current)||void 0===e||e.appendChild(G.current),W.current=(e=>{var t,n;return e&&g===r.SimpleVertical?null===(t=(0,$.interact)(e))||void 0===t?void 0:t.draggable({startAxis:"y",lockAxis:"y",listeners:{move(e){_.y+=e.dy,_.y=_.y>V.current?V.current:_.y>0?_.y:0,F(_),re(_),e.target.style.transform=`translateY(${_.y}px)`;const t=_.y/V.current*100;G.current.ariaValueNow=t.toFixed(4).toString(),G.current.ariaValueText=t.toFixed(4)+"%"}}}):e&&g===r.SimpleHorizontal?null===(n=(0,$.interact)(e))||void 0===n?void 0:n.draggable({startAxis:"x",lockAxis:"x",listeners:{move(e){_.x+=e.dx,_.x=_.x>I.current?I.current:_.x>0?_.x:0,F(_),re(_);const t=S?-(I.current-_.x):_.x;e.target.style.transform=`translateX(${t}px)`;const n=_.x/I.current*100;G.current.ariaValueNow=n.toFixed(4).toString(),G.current.ariaValueText=n.toFixed(4)+"%"}}}):void 0})(G.current)},oe=()=>{E.current=!1;document.getElementsByClassName(j)[0]&&N.current&&G.current&&N.current.removeChild(G.current),W.current&&W.current.unset(),v.showMapTools(),(T.current||D.current)&&(T.current&&(T.current.style.opacity=null),D.current&&(D.current.style.clipPath=null),T.current&&(T.current.style.clipPath=null),D.current&&(D.current.style.opacity=null)),N.current.removeEventListener("mousedown",ue),N.current.removeEventListener("click",de),N.current.removeEventListener("wheel",de),d.isDestroyed()||(Y.current?d.enableClickOpenPopup():d.disableClickOpenPopup(),X.current?d.enableClickHighlight():d.disableClickHighlight()),p.isDestroyed()||(K.current?p.enableClickOpenPopup():p.disableClickOpenPopup(),Q.current?p.enableClickHighlight():p.disableClickHighlight())},se=()=>H(this,void 0,void 0,(function*(){yield v.switchMap(!0),R.current=!1})),ce=()=>{T.current&&!E.current&&(N.current.addEventListener("mousedown",ue),N.current.addEventListener("click",de),N.current.addEventListener("wheel",de),E.current=!0)},ue=e=>{e.target.classList.contains("multi-map-container")?P.current=!0:P.current=!1},de=e=>{if(e.target.classList.contains("multi-map-container")&&P.current){if(O.current||R.current)return;O.current=!0,R.current=!0,se()}};return null}function G(t){const{mapUseDataSourcesOrderList:l,mapUseDataSources:r}=t,i=q(r,l)?l:r,a=t=>{var n;return d((null===(n=e.DataSourceManager.getInstance().getDataSource(t))||void 0===n?void 0:n.type)===e.DataSourceTypes.WebMap?27416:95930)},o=F(i[0]),s=F(i[1]);return(0,e.jsx)("div",{css:Y},(0,e.jsx)("div",{className:"swipe-maps-panel"},(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(n.Icon,{size:"12",color:"#FFFFFF",icon:a(i[0])})),(0,e.jsx)("div",{title:o,className:"swipe-maps-label text-truncate"},o)),(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(n.Icon,{size:"12",color:"#FFFFFF",icon:a(i[1])})),(0,e.jsx)("div",{title:s,className:"swipe-maps-label text-truncate"},s))))}const Y=e.css`
.swipe-maps-panel {
  margin-top: 16px;
  .swipe-maps-list{
    width: 100%;
    margin-bottom: 14px;
    .swipe-maps-thumbnail {
      width:  20px;
      height:  20px;
      background-color: #089BDC;
      margin-right: 8px;
    }
    .swipe-maps-label {
      font-size: 13px;
      font-weight: 500;
      color: var(--ref-palette-neutral-1100);
    }
  }
}
`;var X=function(e,t,n,l){return new(n||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}))};const{useState:K,useEffect:Q,useRef:Z}=e.React,ee="\n  position: absolute;\n  overflow-y: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",te="\n  position: absolute;\n  overflow-x: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",ne="\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flexDirection: column;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",le="\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  display: flex;\n  flexDirection: row;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",re="\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n";function ie(t){const{jimuMapViewGroup:n,widgetId:l,activeMapView:i,inactiveMapView:a,firstTrailingLayersId:o,secondTrailingLayersId:s,swipeStyle:c,handleScrollingLayerOfFirstMapView:u,handleScrollingLayerOfSecondMapView:d,handleScrollFirstMapView:p,dividerColor:v,isDesignMode:m}=t,y=i.mapWidgetId,g=Z(null),h=Z(null),[w,f]=K(0),[x,b]=K((null==o?void 0:o.length)>0),L=Z(x),[S,M]=K(null==i?void 0:i.view.height),[I,V]=K(null==i?void 0:i.view.width),j=Z(document.querySelector(`div[data-widgetid=${y}] .multi-map-container`)),C=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-appear-noanimate")},A=Z(C(j)),E=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-disappear-noanimate")},P=Z(E(j)),R=Z([]),k=null==i?void 0:i.view,N=Z(0),D=Z(!1),T=Z(!1),z=Z(0),$=Z(0),q=Z(null),F=Z(null),H=Z(null),[J,B]=K(0),U=Z([]),W=Z(0),G=`jimu-widget-swipe-${l}-handle-container`,Y=`jimu-widget-swipe-${l}-scroller`,ie=`jimu-widget-swipe-${l}-content`,ae=Z(),oe=e.React.useRef(),se=e.React.useRef(),ce=Z(!0),ue=Z(!0),de=(e,t)=>X(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)}));Q((()=>{j.current.style.pointerEvents=m?"none":null}),[m]),Q((()=>()=>{j.current.style.pointerEvents=null}),[]),Q((()=>{M(null==i?void 0:i.view.height),V(null==i?void 0:i.view.width)}),[i]),Q((()=>{const e=()=>{A.current=C(j),P.current=E(j),L.current||void 0===s||0===s.length||(c===r.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${i.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${i.view.height}px 0px 0px)`),(null==s?void 0:s.length)>0&&(P.current.style.opacity="1")};return i.addRestoreListener(e),()=>{i.removeRestoreListener(e)}}),[i,y,s,c]),Q((()=>{const e=()=>{n.hideMapTools()};function t(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",n=null===(e=null==s?void 0:s.asMutable())||void 0===e?void 0:e.map((e=>de(a,e)));n&&Promise.all(n).then((e=>{var n,r;const i=e.map((e=>e.layer));U.current=null==i?void 0:i.map((e=>{const n=document.createElement("arcgis-swipe");return n.classList.add(`exb-swipe-scroll-${l}`),n.leadingLayers=[],n.trailingLayers=[e],n.disabled=!0,n.direction=t,n.swipePosition=100,n.hideHandle=!0,n.autoDestroyDisabled=!0,n}));const o=null===(n=null==U?void 0:U.current)||void 0===n?void 0:n[0];o.view=null==a?void 0:a.view,null===(r=null==a?void 0:a.view)||void 0===r||r.ui.add(o),null==o||o.leadingLayers.addMany(o.trailingLayers),null==o||o.trailingLayers.removeAll(),ce.current=!0}))}function u(){function e(){c===r.AdvancedVertical?t(F.current.scrollTop-S*((null==o?void 0:o.length)||0)):t(F.current.scrollLeft-I*((null==o?void 0:o.length)||0))}function t(e){W.current=e,T.current||(requestAnimationFrame((()=>{var e,t;T.current=!1;const n=c===r.AdvancedVertical?W.current/k.height:W.current/k.width,l=(null===(e=null==U?void 0:U.current)||void 0===e?void 0:e.length)-1;null===(t=null==U?void 0:U.current)||void 0===t||t.forEach(((e,t,r)=>{var i;e.view=null==a?void 0:a.view,null===(i=null==a?void 0:a.view)||void 0===i||i.ui.add(e);let o=100*(t-n);0===t&&e.leadingLayers.length&&ce.current&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),ce.current=!1),o<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),B(t)):o>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),B(t)),o>=0&&o<.1&&t===l&&B(t),o<0&&(o+=100),e.swipePosition=pe(o,0,100)}))})),T.current=!0)}function n(){c===r.AdvancedVertical?t(F.current.scrollTop-S*((null==o?void 0:o.length)||0)):t(F.current.scrollLeft-I*((null==o?void 0:o.length)||0))}(()=>{const e=j.current.querySelector(`#${Y}`),t=j.current.querySelector(`#${ie}`);F.current=e,H.current=t})(),(()=>{var t;const l=c===r.AdvancedVertical?"vertical":"horizontal",i=null===(t=null==s?void 0:s.asMutable())||void 0===t?void 0:t.map((e=>de(a,e)));i&&Promise.all(i).then((t=>{var r,i;se.current="vertical"===l?null===(r=null==a?void 0:a.view)||void 0===r?void 0:r.watch("height",(()=>{n()})):null===(i=null==a?void 0:a.view)||void 0===i?void 0:i.watch("width",(()=>{n()})),n(),F.current.addEventListener("scroll",e),"horizontal"===l&&F.current.addEventListener("wheel",me)}))})()}function d(){c===r.AdvancedVertical?p(g.current.scrollTop):p(g.current.scrollLeft)}function p(e){N.current=e,D.current||(requestAnimationFrame((()=>{var e;D.current=!1;const t=c===r.AdvancedVertical?N.current/k.height:N.current/k.width,n=(null===(e=R.current)||void 0===e?void 0:e.length)-1;R.current.forEach(((e,l,i)=>{e.view=k,k.ui.add(e);let d=100*(l-t);d<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),f(l)):d>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),f(l)),(0===d||d<-100)&&(a&&_(a.dataSourceId)&&(null==s?void 0:s.length)>0&&ue.current&&(!function(){const e=()=>{const e=j.current.querySelector(`#${Y}`),t=(null==o?void 0:o.length)>0?S*((null==o?void 0:o.length)-1):0;z.current=e.scrollTop-t,A.current.style.clipPath=`inset(0px 0px ${z.current}px 0px)`,z.current<S&&(b(!0),L.current=!0),z.current>=S&&(u(),b(!1),L.current=!1)},t=e=>{e.preventDefault();const t=j.current.querySelector(`#${Y}`),n=(null==o?void 0:o.length)>0?I*((null==o?void 0:o.length)-1):0;$.current=t.scrollLeft-n,A.current.style.clipPath=`inset(0px ${$.current}px 0px 0px)`,$.current<I&&b(!0),$.current>=I&&(u(),b(!1))};var n,l,i,a;(()=>{const n=j.current.querySelector(`#${Y}`);q.current=n,c===r.AdvancedVertical?n.addEventListener("scroll",e):n.addEventListener("scroll",t)})(),P.current.style.opacity="1",c===r.AdvancedVertical?(ae.current=document.createElement("div"),ae.current.id=G,ae.current.setAttribute("style",re),ae.current.style.transform=`translateY(${S}px`,ae.current.style.width=`${I}px`,ae.current.style.height="4px",ae.current.style.backgroundColor=v,ae.current.style.zIndex=null===(l=null===(n=A.current)||void 0===n?void 0:n.style)||void 0===l?void 0:l.zIndex):(ae.current=document.createElement("div"),ae.current.id=G,ae.current.setAttribute("style",re),ae.current.style.transform=`translateX(${I})px`,ae.current.style.height=`${S}px`,ae.current.style.width="4px",ae.current.style.backgroundColor=v,ae.current.style.zIndex=null===(a=null===(i=A.current)||void 0===i?void 0:i.style)||void 0===a?void 0:a.zIndex),j.current.appendChild(ae.current)}(),ue.current=!1),l===n&&f(l)),d<0&&(d+=100),e.swipePosition=pe(d,0,100)}))})),D.current=!0)}function m(){c===r.AdvancedVertical?p(g.current.scrollTop):p(g.current.scrollLeft)}function y(){var e;const t=j.current.querySelector(`#${Y}`);t&&j.current.removeChild(t),null===(e=null==R?void 0:R.current)||void 0===e||e.forEach(((e,t,n)=>{var l;e.destroy(),null===(l=k.ui)||void 0===l||l.remove(e)})),n.showMapTools()}return(null==i?void 0:i.view)&&j.current&&(!function(){const e=document.createElement("div");e.id=Y;const t=document.createElement("div");t.className="content",c===r.AdvancedVertical?(e.setAttribute("style",ee),t.setAttribute("style",ne),t.style.height=S*(((null==o?void 0:o.length)||0)+((null==s?void 0:s.length)||0))+"px"):(e.setAttribute("style",te),t.setAttribute("style",le),t.style.width=I*(((null==o?void 0:o.length)||0)+((null==s?void 0:s.length)||0))+"px");j.current.appendChild(e),e.appendChild(t),g.current=e,h.current=t}(),(null==o?void 0:o.length)>0?(!function(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",n=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>de(i,e)));n&&Promise.all(n).then((e=>{const n=e.map((e=>e.layer));R.current=null==n?void 0:n.map((e=>{const n=document.createElement("arcgis-swipe");return n.classList.add(`exb-swipe-scroll-${l}`),n.leadingLayers=[],n.trailingLayers=[e],n.disabled=!0,n.direction=t,n.swipePosition=100,n.hideHandle=!0,n.autoDestroyDisabled=!0,n})),oe.current="vertical"===t?O.watch((()=>{var e;return null===(e=null==i?void 0:i.view)||void 0===e?void 0:e.height}),(()=>{m()})):O.watch((()=>{var e;return null===(e=null==i?void 0:i.view)||void 0===e?void 0:e.width}),(()=>{m()})),m(),g.current.addEventListener("scroll",d),"horizontal"===t&&g.current.addEventListener("wheel",ve)}))}(),a&&t(),e(),ue.current=!0):(null==s?void 0:s.length)>0&&(P.current.style.opacity="1",c===r.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${i.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${i.view.height}px 0px 0px)`,b(!1),L.current=!1,a&&t(),u(),e())),()=>{var e;y(),null===(e=null==U?void 0:U.current)||void 0===e||e.forEach(((e,t,n)=>{var l,r;e.destroy(),null===(r=null===(l=null==a?void 0:a.view)||void 0===l?void 0:l.ui)||void 0===r||r.remove(e)})),b(!0),function(){var e,t;const n=j.current.querySelector(".scrollerMap");n&&j.current.removeChild(n),P.current&&(P.current.style.opacity=null),A.current&&(A.current.style.clipPath=null),ae.current&&j.current.querySelector(`#${G}`)&&j.current.contains(ae.current)&&j.current.removeChild(ae.current),null===(e=oe.current)||void 0===e||e.remove(),oe.current=null,null===(t=se.current)||void 0===t||t.remove(),se.current=null}()}}),[l,k,i,o,s,c,v,G,S,I,Y,ie,a,n]),Q((()=>{var e;const t=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>de(i,e)));t&&Promise.all(t).then((e=>{u(e[w])}))}),[i,o,w,u]),Q((()=>{var e;const t=null===(e=null==s?void 0:s.asMutable())||void 0===e?void 0:e.map((e=>de(a,e)));t&&Promise.all(t).then((e=>{d(e[J])}))}),[s,J,a,d]),Q((()=>{p(x)}),[p,x]);const pe=(e,t,n)=>Math.min(n,Math.max(t,e)),ve=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;g.current.scrollLeft=g.current.scrollLeft+t/2},me=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;F.current.scrollLeft=F.current.scrollLeft+t/2};return null}var ae=d(44828),oe=function(e,t,n,l){return new(n||(n=Promise))((function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((l=l.apply(e,t||[])).next())}))};const{useState:se,useEffect:ce,useRef:ue}=e.React;function de(t){var r,i;const{scrollMapViewList:a,activeMapView:o,inactiveMapView:s,handlePanelSelectedFirstScrollLayer:c,handlePanelSelectedSecondScrollLayer:u,isAllowDeactivateLayers:d,toggleLayerVisibility:p,scrollingLayerOfFirstMapView:v,scrollingLayerOfSecondMapView:m,scrollFirstMapView:y,showSwipeOnMap:g,runtimeActiveMapViewAddedLayers:h,runtimeInactiveMapViewAddedLayers:w,handleRuntimePanelSelectedFirstScrollLayer:x,handleRuntimePanelSelectedSecondScrollLayer:b}=t,[L,S]=se(!1),[M,V]=se(!1),[j,A]=se(!1),[P,R]=se(!1),k=ue(null),N=e.React.useRef([]),D=e.React.useRef([]),T=e.hooks.useTranslation(l);ce((()=>{s||u((0,e.Immutable)([]))}),[u,s]);const[z,$]=se(null),q=ue(z),[H,J]=se((0,e.Immutable)([])),[B,U]=se([]),W=ue(B),[G,Y]=se((0,e.Immutable)([])),[X,K]=se([]),Q=ue(X),[Z,ee]=se((0,e.Immutable)([])),[te,ne]=se(null),le=ue(te),[re,ie]=se((0,e.Immutable)([]));ce((()=>{const e=null==a?void 0:a[null==o?void 0:o.id];J(e)}),[a,o]),ce((()=>{const e=null==a?void 0:a[null==s?void 0:s.id];ie(e)}),[a,s]);const de=(e,t)=>oe(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)})),ve=e.hooks.useEventCallback((()=>{const e=k.current,t=document.querySelector(".currentLegend");if(t&&t.remove(),g&&((null==H?void 0:H.length)>0||(null==re?void 0:re.length)>0)){const t=document.createElement("div");t.className="currentLegend";new ae.default({view:y?null==o?void 0:o.view:null==s?void 0:s.view,style:"classic",layerInfos:[{layer:y?null==v?void 0:v.layer:null==m?void 0:m.layer}]}).container=t,e.appendChild(t)}})),me=e.hooks.useEventCallback(((t,n,l,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>de(t,e)));c&&Promise.all(c).then((t=>{const a=t.map((e=>({layerId:e.id,title:null==e?void 0:e.layer.title,selected:!0,visible:null==e?void 0:e.layer.visible,allowOperation:d})));n(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),l((0,e.Immutable)(o)),i((0,e.Immutable)(o))})).catch((e=>{console.error(e)}))}));ce((()=>{me(o,$,J,q,c),me(s,ne,ie,le,u)}),[a,o,s,d,c,u,me]),ce((()=>{if((null==o?void 0:o.id)===(null==s?void 0:s.id))return;const t=null==h?void 0:h.asMutable({deep:!0}).map((e=>{const t=o.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));U(t),W.current=t;const n=[];if(t.forEach((e=>{e.selected&&e.visible&&n.push(e.layerId)})),Y((0,e.Immutable)(n)),x((0,e.Immutable)(n)),s){const t=null==w?void 0:w.asMutable({deep:!0}).map((e=>{const t=s.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));K(t),Q.current=t;const n=[];t.forEach((e=>{e.selected&&e.visible&&n.push(e.layerId)})),ee((0,e.Immutable)(n)),b((0,e.Immutable)(n))}}),[o,x,b,s,h,w]);const ye=e.hooks.useEventCallback(((t,n,l,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>de(t,e)));c&&Promise.all(c).then((t=>{t.forEach((t=>{const a=[];a.push(O.watch((()=>null==t?void 0:t.layer.visible),(n=>{const a=JSON.parse(JSON.stringify(l.current));a.forEach((e=>{e.layerId===t.id&&(e.visible=n)})),r(a),l.current=a;const o=[];null==a||a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),i((0,e.Immutable)(o))}))),n.current=a}))}))}));ce((()=>{const e=N.current;return ye(o,N,q,$,c),()=>{e.forEach((e=>{null==e||e.remove(),e=null}))}}),[a,o,ye,c]);const ge=e.hooks.useEventCallback(((t,n,l,r,i,a)=>{n.forEach((n=>{const o=t.jimuLayerViews[n.layerId],s=[];s.push(O.watch((()=>o.layer.visible),(t=>{const n=JSON.parse(JSON.stringify(l.current));n.forEach((e=>{e.layerId===o.id&&(e.visible=t)})),r(n),l.current=n;const a=[];null==n||n.forEach((e=>{e.selected&&e.visible&&a.push(e.layerId)})),i((0,e.Immutable)(a))}))),a.current=s}))}));ce((()=>{const e=D.current;return ge(o,B,W,U,x,D),()=>{e.forEach((e=>{null==e||e.remove(),e=null}))}}),[o,x,B,ge]),ce((()=>{c(H)}),[c,H]),ce((()=>{x(G)}),[x,G]),ce((()=>{b(Z)}),[b,Z]),ce((()=>{u(re)}),[u,re]),ce((()=>{(v||m)&&ve()}),[ve,v,m,o,s,g,y,a,H,re]);const he=()=>{S(!L)},we=()=>{V(!M)},fe=()=>{A(!j)},xe=()=>{R(!P)},be=(t,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),n(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),l((0,e.Immutable)(o))},Le=(e,t,n,l)=>{var r;if(t){return(null===(r=null==e?void 0:e[null==n?void 0:n.id])||void 0===r?void 0:r.indexOf(null==l?void 0:l.id))+1}return-1},Se=(e,t)=>{if(g){return(null==e?void 0:e.indexOf(null==t?void 0:t.id))+1}return-1},Me=e.React.useCallback((e=>oe(this,void 0,void 0,(function*(){const t=(yield de(o,e))||(yield de(s,e));t.layer.visible=!t.layer.visible}))),[o,s]),Ie=(null===(r=null==a?void 0:a[null==o?void 0:o.id])||void 0===r?void 0:r.length)>0,Ve=(null===(i=null==a?void 0:a[null==s?void 0:s.id])||void 0===i?void 0:i.length)>0,je=g&&y,Ce=g&&!y&&m,Ae=F(o.dataSourceId),Ee=F(null==s?void 0:s.dataSourceId),Oe=je?Ae+" "+T("currentDisplay"):Ae,Pe=Ce?Ee+" "+T("currentDisplay"):Ee;return(0,e.jsx)("div",{ref:k,css:pe},(0,e.jsx)(n.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(je?"scroll-now":"")),label:Ae,isOpen:L,"aria-label":Ie?Oe:Ae+":"+T("noConfiguredLayerText"),onRequestOpen:he,onRequestClose:he},Ie?(0,e.jsx)(f,{layerList:z,onChange:e=>{be(z,$,J,q,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:Me,highlightIndex:y?Le(a,g,o,v):-1}):(0,e.jsx)(I,{swipeLayerMode:!0}),(null==B?void 0:B.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:T("runtimeLayers"),isOpen:j,"aria-label":T("runtimeLayers"),onRequestOpen:fe,onRequestClose:fe,rightIcon:E(),rightActiveIcon:C()},(0,e.jsx)(f,{layerList:B,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Me,onChange:e=>{be(B,U,Y,W,e)},highlightIndex:y?Se(h,v):-1}))),s&&_(s.dataSourceId)&&(0,e.jsx)(n.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(Ce?"scroll-now":"")),label:Ee,isOpen:M,"aria-label":Ve?Pe:Ee+":"+T("noConfiguredLayerText"),onRequestOpen:we,onRequestClose:we},Ve?(0,e.jsx)(f,{layerList:te,onChange:e=>{be(te,ne,ie,le,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:Me,highlightIndex:y?-1:Le(a,g,s,m)}):(0,e.jsx)(I,{swipeLayerMode:!0}),(null==X?void 0:X.length)>0&&(0,e.jsx)(n.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:T("runtimeLayers"),isOpen:P,"aria-label":T("runtimeLayers"),onRequestOpen:xe,onRequestClose:xe,rightIcon:E(),rightActiveIcon:C()},(0,e.jsx)(f,{layerList:X,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Me,onChange:e=>{be(X,K,ee,Q,e)},highlightIndex:y?-1:Se(w,m)}))))}const pe=e.css`
  .swipe-collapse {
    margin-top: 16px;
    .title {
      font-weight: 600;
    }
    .layer-list {
      margin-top: 12px;
      margin-bottom: 16px;
    }
    .no-layer-placeholder {
      margin-top: 16px;
      margin-bottom: 16px;
    }
  }
  .runtime-layer-collapse {
    .title {
      font-size: 13px;
      font-weight: 500;
    }
  }
  .currentLegend {
    margin-top: 8px;
    .esri-legend__message, .esri-legend__service{
      padding-left: 0px;
    }
  }
  .scroll-now {
    .collapse-label {
      position: relative;
      &:after {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        content: "";
        display: block;
        position: absolute;
        right: -10px;
        background-color: var(--sys-color-primary-main);
      }
    }
  }
  .runtime-layer-collapse {
    .collapse-label {
      &:after {
        content: none
      }
    }
  }
`;var ve=d(28996),me=d.n(ve),ye=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n};const ge=t=>{const n=window.SVG,{className:l}=t,r=ye(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",l);return n?e.React.createElement(n,Object.assign({className:i,src:me()},r)):e.React.createElement("svg",Object.assign({className:i},r))},he=e.css`
  &.warning-info {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    .warning-icon {
      color: var(--sys-color-warning-dark);
      width: ${e.polished.rem(22)};
      height: ${e.polished.rem(22)};
      margin-bottom: ${e.polished.rem(10)};
    }
    .warning-text {
      font-size: ${e.polished.rem(13)};
      line-height: ${e.polished.rem(18)};
    }
  }
`;function we(){const t=e.hooks.useTranslation(l);return(0,e.jsx)("div",{className:"w-100 d-flex flex-column align-items-center warning-info",css:he},(0,e.jsx)(ge,{className:"warning-icon"}),(0,e.jsx)("div",{className:"warning-text"},t("webSceneNotSupported")))}r.SimpleHorizontal;const fe={distance:35,unit:n.DistanceUnits.PERCENTAGE},xe=e.css`
  &{
    .widget-container {
      overflow: auto;
    }
    .swipe-panel {
      padding: ${e.polished.rem(16)};
    }
    .swipe-title {
      .swipe-label {
        font-size: ${e.polished.rem(14)};
        color: var(--ref-palette-black);
        span {
          margin-left: 0.5rem;
          margin-right: var(--sys-spacing-6);
        }
      }
    }
    .error-alert {
      position: absolute;
      bottom: 4px;
      left: 4px;
      z-index: 1;
    }
  }
`,be=(t,n,l)=>e.css`
  .esri-ui .exb-swipe-${l},.esri-component {
    pointer-events: none !important;
  }
  .exb-swipe-${l} {
    .arcgis-swipe__divider {
      --calcite-color-background: ${t} !important;
    }
    .arcgis-swipe__handle {
      --calcite-color-background: ${n} !important;
    }
  }
  .exb-swipe-scroll-${l} {
    .arcgis-swipe__divider {
      --calcite-color-background: ${t} !important;
    }
  }
`,{useState:Le,useEffect:Se,useCallback:Me,useRef:Ie}=e.React,Ve=a=>{var s,c,u,d,p,m,y;const{id:g,label:h,config:w}=a,{styleConfig:f,scrollMapViewList:x,swipeMapViewList:b,mapUseDataSourcesOrderList:L,swipeStyle:S,swipeMode:M}=w,{defaultActivation:I=!1,detailsVisibility:V=!0,isAllowDeactivateLayers:j=!0,toggleLayerVisibility:C=!1,sliderPosition:A=fe,dividerColor:E="var(--ref-palette-neutral-200)",handleColor:O="var(--ref-palette-neutral-200)"}=f||{},P=null===(s=a.useMapWidgetIds)||void 0===s?void 0:s[0],[R,k]=Le(null),[N,T]=Le(null),[$,_]=Le(null),[H,J]=Le(I),[B,U]=Le(null),[Y,X]=Le(null),[K,Q]=Le(!0),[Z,ee]=Le((0,e.Immutable)([])),[te,ne]=Le((0,e.Immutable)([])),[le,re]=Le((0,e.Immutable)([])),[ae,oe]=Le((0,e.Immutable)([])),[se,ce]=Le((0,e.Immutable)([])),[ue,pe]=Le((0,e.Immutable)([])),[ve,me]=Le((0,e.Immutable)([])),[ye,ge]=Le((0,e.Immutable)([])),[he,Ve]=Le((0,e.Immutable)([])),[je,Ce]=Le((0,e.Immutable)([])),[Ae,Ee]=Le((0,e.Immutable)([])),[Oe,Pe]=Le(!1),[Re,ke]=Le(!0),[Ne,De]=Le(!0),[Te,ze]=Le(!0),[$e,qe]=Le(!0),[_e,Fe]=Le((0,e.Immutable)([])),[He,Je]=Le((0,e.Immutable)([])),Be=Ie(null),Ue=e.hooks.useTranslation(l,n.defaultMessages),We=S===r.SimpleHorizontal||S===r.SimpleVertical,Ge=e.ReactRedux.useSelector((e=>{var t,n;return null===(n=(null!==(t=e.appStateInBuilder)&&void 0!==t?t:e).appConfig.widgets[P])||void 0===n?void 0:n.useDataSources})),Ye=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Design));Se((()=>{Oe&&!Be.current&&(Be.current=setTimeout((()=>{Pe(!1),Be.current=null}),3e3))}),[Oe]),Se((()=>{const e=null==Ge?void 0:Ge.map((e=>e.dataSourceId));Ee(e)}),[Ge]),Se((()=>{J(!1)}),[S,P]),Se((()=>{J(I)}),[I]);const Xe=e=>{var t,n,l;const r=[],i=null===(l=null===(n=null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.map)||void 0===n?void 0:n.layers)||void 0===l?void 0:l.toArray();return null==i||i.forEach((t=>{const n=e.getJimuLayerViewByAPILayer(t);(null==n?void 0:n.fromRuntime)&&r.push(n.id)})),r};Se((()=>{oe(Z?Z.concat(le):le)}),[Z,le]),Se((()=>{pe(te?null==te?void 0:te.concat(se):se)}),[te,se]),Se((()=>{var n;const l=null==Ge?void 0:Ge.filter((e=>e.dataSourceId!==(null==R?void 0:R.dataSourceId))),r=(i=P,a=null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.dataSourceId,i+"-"+a);var i,a;const o=t.MapViewManager.getInstance().getJimuMapViewById(r);T(o);const s=Xe(R);Fe((0,e.Immutable)(s)),ze(!0),qe(!0);const c=Xe(o);Je((0,e.Immutable)(c));const u=()=>{const t=Xe(R);Fe((0,e.Immutable)(t))},d=()=>{const t=Xe(R);Fe((0,e.Immutable)(t)),ze(!0),qe(!0)};return R&&(null==R||R.addJimuLayerViewCreatedListener(u),null==R||R.addJimuLayerViewRemovedListener(d)),()=>{null==R||R.removeJimuLayerViewCreatedListener(u),null==R||R.removeJimuLayerViewRemovedListener(d)}}),[R,Ge,P]);const Ke=()=>{if(!H){const e=document.querySelector(`.jimu-widget-swipe .useMapWidgetId-${P} .swipe-title .checked:not(.${g})`);e&&(Pe(!0),e.getElementsByTagName("input")[0].click())}J(!H)},Qe=Me((e=>{U(e)}),[]),Ze=Me((e=>{X(e)}),[]),et=Me((e=>{Q(e)}),[]),tt=Me((e=>{ee(e),De(!0)}),[]),nt=Me((e=>{ne(e),De(!0)}),[]),lt=Me((e=>{re(e),qe(!0)}),[]),rt=Me((e=>{ce(e),qe(!0)}),[]),it=Me((e=>{me(e),ke(!0)}),[]),at=Me((e=>{ge(e),ke(!0)}),[]),ot=Me((e=>{Ve(e),ze(!0)}),[]),st=Me((e=>{Ce(e),ze(!0)}),[]),ct=!We&&!!R&&(null==Ae?void 0:Ae.length)>0&&"2d"===(null===(c=null==R?void 0:R.view)||void 0===c?void 0:c.type)&&(null==$?void 0:$.jimuMapViews)&&Object.keys(null==$?void 0:$.jimuMapViews).length>0,ut=We&&!!R&&"LOADED"===R.status&&"2d"===(null===(u=null==R?void 0:R.view)||void 0===u?void 0:u.type)&&M===i.SwipeBetweenLayers,dt=We&&M===i.SwipeBetweenMaps&&(null==$?void 0:$.jimuMapViews)&&2===Object.keys(null==$?void 0:$.jimuMapViews).length&&2===Ae.length,pt=H&&S&&!We&&"2d"===(null===(d=null==R?void 0:R.view)||void 0===d?void 0:d.type)&&(null==Ae?void 0:Ae.length)>0&&(null==$?void 0:$.jimuMapViews)&&Object.keys(null==$?void 0:$.jimuMapViews).length>0,vt="2d"===(null===(p=null==R?void 0:R.view)||void 0===p?void 0:p.type)&&((null===(m=null==ve?void 0:ve.concat(he))||void 0===m?void 0:m.length)>0||(null===(y=null==ye?void 0:ye.concat(je))||void 0===y?void 0:y.length)>0),mt=(null==$?void 0:$.jimuMapViews)&&2===Object.keys(null==$?void 0:$.jimuMapViews).length&&(null==R?void 0:R.view)&&(null==N?void 0:N.view),yt=()=>{if(dt){const e=q(Ae,L)?L:Ae;return h+":"+F(e[0])+","+F(e[1])}return h};return(0,e.jsx)("div",{className:"jimu-widget jimu-widget-swipe",css:xe},(0,e.jsx)(z.Global,{styles:be(E,O,g)}),P&&(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:P,onActiveViewChange:e=>{(null==e?void 0:e.view)?(k(e),ke(!1),De(!1),ze(!1),qe(!1)):k(null)},onViewsCreate:e=>{const n=t.MapViewManager.getInstance().getJimuMapViewGroup(P);_(n),Object.keys(e).forEach((t=>{const n=e[t];n.isActive||T(n)}))}}),P&&S?(0,e.jsx)("div",{className:"widget-container surface-1 border-0 w-100 h-100"},(()=>{var t,l;return(0,e.jsx)("div",{className:(0,e.classNames)(`swipe-panel useMapWidgetId-${P}`)},(0,e.jsx)("div",{className:"swipe-title d-flex justify-content-between align-items-center"},(0,e.jsx)("div",{className:"swipe-label"},(0,e.jsx)(n.Icon,{icon:o()}),(0,e.jsx)("span",null,h)),(0,e.jsx)(n.Switch,{"aria-label":yt(),title:h,className:g,checked:H,onChange:Ke})),(0,e.jsx)("div",{className:(0,e.classNames)({"d-none":!V})},ct&&$e&&(0,e.jsx)(de,{scrollMapViewList:x,activeMapView:R,inactiveMapView:N,handlePanelSelectedFirstScrollLayer:tt,handlePanelSelectedSecondScrollLayer:nt,isAllowDeactivateLayers:j,toggleLayerVisibility:C,scrollingLayerOfFirstMapView:B,scrollingLayerOfSecondMapView:Y,scrollFirstMapView:K,showSwipeOnMap:H,runtimeActiveMapViewAddedLayers:_e,runtimeInactiveMapViewAddedLayers:He,handleRuntimePanelSelectedFirstScrollLayer:lt,handleRuntimePanelSelectedSecondScrollLayer:rt}),!We&&"3d"===(null===(t=null==R?void 0:R.view)||void 0===t?void 0:t.type)&&(0,e.jsx)(we,null),We&&"3d"===(null===(l=null==R?void 0:R.view)||void 0===l?void 0:l.type)&&M===i.SwipeBetweenLayers&&(0,e.jsx)(we,null),ut&&Te&&(0,e.jsx)(D,{swipeMapViewList:b,activeMapView:R,isAllowDeactivateLayers:j,toggleLayerVisibility:C,handlePanelSelectedLeadingLayers:it,handlePanelSelectedTrailingLayers:at,runtimeAddedLayers:_e,handleRuntimePanelSelectedLeadingLayers:ot,handleRuntimePanelSelectedTrailingLayers:st}),dt&&(0,e.jsx)(G,{mapUseDataSourcesOrderList:L,mapUseDataSources:Ae}),Oe&&(0,e.jsx)(n.Alert,{className:"w-100 error-alert",form:"basic",open:!0,withIcon:!0,type:"warning",text:Ue("mapOccupiedMsg")})))})()):(0,e.jsx)(n.WidgetPlaceholder,{icon:o(),name:Ue("_widgetLabel")}),H&&S&&We&&(M===i.SwipeBetweenLayers?vt&&Re&&(0,e.jsx)(v,{widgetId:g,activeMapView:R,leadingLayersId:ve.concat(he),trailingLayersId:ye.concat(je),swipeStyle:S,sliderPosition:A,isDesignMode:Ye}):mt&&(0,e.jsx)(W,{swipeMode:M,widgetId:g,activeMapView:R,inactiveMapView:N,jimuMapViewGroup:$,sliderPosition:A,swipeStyle:S,mapUseDataSourcesOrderList:L,mapUseDataSources:Ae,dividerColor:E,handlerColor:O,isDesignMode:Ye})),pt&&Ne&&(0,e.jsx)(ie,{widgetId:g,activeMapView:R,inactiveMapView:N,jimuMapViewGroup:$,firstTrailingLayersId:ae,secondTrailingLayersId:ue,swipeStyle:S,handleScrollingLayerOfFirstMapView:Qe,handleScrollingLayerOfSecondMapView:Ze,handleScrollFirstMapView:et,dividerColor:E,isDesignMode:Ye}))};function je(e){d.p=e}})(),p})())}}}));