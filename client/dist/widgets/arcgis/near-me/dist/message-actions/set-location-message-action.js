System.register(["jimu-core","jimu-arcgis"],(function(e,t){var r={},n={};return{setters:[function(e){r.AbstractMessageAction=e.AbstractMessageAction,r.DataSourceManager=e.DataSourceManager,r.MessageType=e.MessageType,r.MutableStoreManager=e.MutableStoreManager},function(){}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=r}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var a={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(a),o.d(a,{default:()=>s});var e,t=o(79244);o(62686);!function(e){e.Closest="closest",e.Proximity="proximity",e.Summary="summary"}(e||(e={}));var r;!function(e){e[e.Feet=528e4]="Feet",e[e.Miles=1e3]="Miles",e[e.Kilometers=1609.344]="Kilometers",e[e.Meters=1609344]="Meters",e[e.Yards=176e4]="Yards"}(r||(r={}));var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}u((n=n.apply(e,t||[])).next())}))};class s extends t.AbstractMessageAction{filterMessageDescription(e){return e.messageType===t.MessageType.DataRecordsSelectionChange}filterMessageType(e){return e===t.MessageType.DataRecordsSelectionChange}filterMessage(e){return!0}onExecute(e,r){return n(this,void 0,void 0,(function*(){var r;const n=e;if((null==n?void 0:n.records.length)>0){const e={},o={};let a;if(null===(r=null==n?void 0:n.records)||void 0===r||r.forEach((t=>{var r;a||(a=t.feature.geometry.spatialReference.toJSON());const n=null===(r=null==t?void 0:t.dataSource)||void 0===r?void 0:r.id;e[n]||(e[n]=[]),t.hasFullGeometry?e[n].push(t.feature.geometry):(o[n]||(o[n]=[]),o[n].push(t.getId()))})),Object.keys(o).length){const r=yield((e,r)=>{const n=[],o={},a=Object.keys(e);return new Promise((s=>{a.forEach((o=>{const a=t.DataSourceManager.getInstance().getDataSource(o),s={};s.objectIds=e[o],s.returnGeometry=!0,s.returnFullGeometry=!0,s.returnZ=!0,s.outSR=r,n.push(a.query(s))})),Promise.all(n).then((e=>{e.forEach(((e,t)=>{if((null==e?void 0:e.records.length)>0){const r=[];e.records.forEach((e=>{r.push(e.feature.geometry)})),o[a[t]]=r}})),s(o)}))}))})(o,a);Object.keys(r).forEach((t=>{e[t]?e[t]=[...e[t],...r[t]]:e[t]=r[t]}))}return t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedIncidentLocation",e),!0}}))}getSettingComponentUri(e,t){return null}}})(),a})())}}}));