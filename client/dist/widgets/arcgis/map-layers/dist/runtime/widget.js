System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-theme","jimu-ui/advanced/map"],(function(e,t){var i={},a={},r={},s={},n={};return{setters:[function(e){i.AppMode=e.AppMode,i.BaseVersionManager=e.BaseVersionManager,i.DataSourceComponent=e.DataSourceComponent,i.DataSourceTypes=e.DataSourceTypes,i.ExBAddedJSAPIProperties=e.ExBAddedJSAPIProperties,i.MutableStoreManager=e.MutableStoreManager,i.React=e.React,i.SupportedJSAPILayerTypes=e.SupportedJSAPILayerTypes,i.appActions=e.appActions,i.classNames=e.classNames,i.css=e.css,i.focusElementInKeyboardMode=e.focusElementInKeyboardMode,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.isKeyboardMode=e.isKeyboardMode,i.jsx=e.jsx,i.lodash=e.lodash,i.portalUrlUtils=e.portalUrlUtils,i.semver=e.semver,i.utils=e.utils},function(e){a.JimuMapViewComponent=e.JimuMapViewComponent,a.MapViewManager=e.MapViewManager,a.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules,a.zoomToUtils=e.zoomToUtils},function(e){r.Button=e.Button,r.DataActionList=e.DataActionList,r.Dropdown=e.Dropdown,r.DropdownButton=e.DropdownButton,r.DropdownItem=e.DropdownItem,r.DropdownMenu=e.DropdownMenu,r.FloatingPanel=e.FloatingPanel,r.Label=e.Label,r.Loading=e.Loading,r.LoadingType=e.LoadingType,r.Popper=e.Popper,r.Radio=e.Radio,r.Slider=e.Slider,r.TextInput=e.TextInput,r.Tooltip=e.Tooltip,r.WidgetPlaceholder=e.WidgetPlaceholder,r.defaultMessages=e.defaultMessages,r.getFocusableElements=e.getFocusableElements},function(e){s.styled=e.styled},function(e){n.JimuSymbolType=e.JimuSymbolType,n.SymbolList=e.SymbolList}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=s},13424:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><path stroke="#000" d="M1 3.5h5M1 9.5h14M1 14.5h14M14 3.5H9l2.5 3z"></path></svg>'},14321:e=>{"use strict";e.exports=r},18249:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 2h14v12H1zm13 1H2v4h12zm0 5h-3v2h3zm0 3h-3v2h3zm-4 2v-2H6v2zm-5 0v-2H2v2zm-3-3h3V8H2zm8-2v2H6V8z" clip-rule="evenodd"></path></svg>'},40283:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.795 5.281c.387-.387 1.028-.373 1.432.03l1.461 1.462c.404.404.417 1.045.03 1.432L8.414 14.51l-2.674.48a.636.636 0 0 1-.73-.73l.48-2.673zm-5.362 6.825-.32 1.782 1.782-.32 3.99-3.992-1.461-1.462zm4.692-4.693 1.46 1.462 1.402-1.401-1.462-1.461zM4 1a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},43052:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#100" fill-rule="evenodd" d="M1 9H0V8h1zm2-1H2v1h1zm10 1h1V8h-1zm3-1h-1v1h1zM5 9h6v1h1V7h-1v1H5V7H4v3h1zm4-5.5a2.5 2.5 0 1 1 3 2.45v.55h-1v-.55A2.5 2.5 0 0 1 9 3.5m1 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0m-8 10a2.5 2.5 0 0 1 2-2.45v-.55h1v.55a2.5 2.5 0 1 1-3 2.45m1 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0" clip-rule="evenodd"></path></svg>'},48993:e=>{"use strict";e.exports=n},50170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},62686:e=>{"use strict";e.exports=a},79244:e=>{"use strict";e.exports=i},85643:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4 11V4h7V1H1v10zm1-6v10h10V5zm9 9H6V6h8z" clip-rule="evenodd"></path><path fill="#000" d="M6 6h5v5H6z" opacity=".5"></path></svg>'},88775:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M10.226.054a.5.5 0 0 0-.451 0L.25 4.942a.446.446 0 0 0 .025.813L9.8 9.958a.5.5 0 0 0 .4 0l9.524-4.203a.446.446 0 0 0 .025-.813zM10 9.044 1.542 5.313 10 .97l8.458 4.34z" clip-rule="evenodd"></path><path fill="#000" d="M.676 10.04a.493.493 0 0 0-.632.216c-.11.22-.006.482.232.585L10 15l9.724-4.16c.238-.102.342-.363.232-.584a.493.493 0 0 0-.632-.215L10 14.029z"></path><path fill="#000" fill-rule="evenodd" d="M.676 15.04a.493.493 0 0 0-.632.216c-.11.22-.006.482.232.585L10 20l9.724-4.16c.238-.102.342-.363.232-.584a.493.493 0 0 0-.632-.215L10 19.029zM10 19.03l.2.085h-.4z" clip-rule="evenodd"></path></svg>'}},t={};function o(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var l={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(l),o.d(l,{LoadStatus:()=>rt,Widget:()=>st,__set_webpack_public_path__:()=>ot,default:()=>nt});var e=o(79244),t=o(62686),i=o(14321);function a(t,i){var a,r,s,n,o,l;let c,p;i.setVisibility&&i.useMapWidget?(c="block",p=""):(c="none",p="unset");const d=t.sys.color.surface.paper;return e.css`
    overflow: auto;
    .widget-layerlist {
      width: 100%;
      height: 100%;
      min-height: 32px;
      overflow-x: hidden;
      background-color: var(--calcite-color-foreground-1);

      .data-action-list-loading {
        height: 32px;
        border: 1px solid rgba(0,0,0,0);
        border-top: 2px solid ${t.sys.color.secondary.light};
        padding-left: 16px;

        display: flex;
        align-items: center;
        @keyframes ball-fall {
          0%{
            opacity: 0;
            transform: translateY(-145%);
          }
          10%{
            opacity: .5;
          }
          20%{
            opacity: 1;
            transform: translateY(0);
          }
          80%{
            opacity: 1;
            transform: translateY(0);
          }
          90%{
            opacity: .5;
          }
          100%{
            opacity: 0;
            transform:translateY(145%);
          }
        }
        &:before,
        &:after,
        .dot-loading {
          width: 0.25rem;
          height: 0.25rem;
          border-radius: 0.25rem;
          box-sizing: border-box;
          opacity:0;
          animation: ball-fall 1s ease-in-out infinite;
        }
        &:before,
        &:after {
          content: '';
          display: inline-block;
        }
        &:before {
          left: -0.375rem;
          animation-delay: -200ms;
        }
        .dot-loading {
          display: inline-block;
          margin: 0 0.125rem;
          animation-delay: -100ms;
        }
        &:after {
          left: 0.375rem;
          animation-delay: 0ms;
        }
        .dot-loading, &:before, &:after {
          background: ${t.sys.color.secondary.main};
        }
      }

      .esri-layer-list__item-label:focus {
        outline: ${p};
      }

      .esri-layer-list__item-toggle {
        display: ${c};
      }

      .esri-layer-list {
        background-color: ${d};
      }

      .esri-layer-list__list {
        padding: 0px 2px;
      }

      .esri-list-item-panel {
        .esri-legend.esri-widget {
          background-color: var(--calcite-color-foreground-1);
        }
      }

      .esri-layer-list__item {
        background-color: var(--calcite-color-foreground-1);
        .data-action-list-wrapper {
          padding: 0;

          .jimu-dropdown, .jimu-dropdown-item {
            font-size: 12px;
            color: ${null===(o=null===(n=null===(s=null===(r=null===(a=null==t?void 0:t.arcgis)||void 0===a?void 0:a.widgets)||void 0===r?void 0:r.layerlist)||void 0===s?void 0:s.icon)||void 0===n?void 0:n.default)||void 0===o?void 0:o.color};
          }

          .jimu-dropdown-item {
            padding: 6px 15px;
            border: 1px solid rgba(0,0,0,0);
            border-top: 2px solid ${null===(l=null==t?void 0:t.sys.color.divider)||void 0===l?void 0:l.primary};
          }

          .dropdown-item:hover {
            .jimu-icon-auto-color {
              color: ${t.sys.color.primary.main} !important;
            }
            background: transparent;
            color: ${t.sys.color.primary.main} !important;
          }
        }
        .ml-2 {
          margin-left: 5px !important;
        }
      }

      .esri-layer-list__item-action {
        outline-offset: -2px;
      }

      .invalid-ds-message {
        font-size: 12px;
        padding: 6px 15px;
        border: 1px solid rgba(0,0,0,0);
        border-top: 2px solid #d5d5d5;
        color: ${t.ref.palette.neutral[1e3]};
      }

      .table-list-divider {
        background-color: var(--calcite-color-foreground-1);
        color: var(--calcite-color-text-2);
        border-block-start: 1px solid var(--calcite-color-border-3);
        font-size: var(--calcite-font-size--1);
        padding-left: 12px;
        height: 28px;
      }
    }
  `}const r={_widgetLabel:"Map Layers",goto:"Zoom to",information:"Details",showLabels:"Show labels",hideLabels:"Hide labels",emptyListTip:"There are currently no items to display",enablePopup:"Enable pop-up",disablePopup:"Disable pop-up",tables:"Tables",visibilityRange:"Visibility range",changeSymbol:"Change symbol",usePredefinedSymbols:"Use predefined symbols",useCustomSymbols:"Use custom symbols"};var s=o(88775),n=o.n(s);class c extends e.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.12.0",description:"disable old app data-action, delete unused config prop selectedJimuLayerIds",upgrader:e=>{let t=e;return t=t.without("selectedJimuLayerIds"),t}}]}}const p=new c;var d=o(1888),u=function(e,t,i,a){return new(i||(i=Promise))((function(r,s){function n(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,o)}l((a=a.apply(e,t||[])).next())}))};const f=d.styled.div`
  min-width: 120px;
  min-height: 20px;
`,h=e.css`
  .jimu-dropdown-item.jimu-dropdown-item-header {
    display: flex;
    justify-content: center;
  }
  .jimu-dropdown {
    .jimu-dropdown-item {
      display: flex;
      justify-content: center;
    }
  }
`;function y(t){const{icon:a,title:r,onClick:s}=t;return(0,e.jsx)(i.DropdownItem,{onClick:s},(0,e.jsx)("div",{className:"d-flex align-items-center"},"string"==typeof a?(0,e.jsx)("div",{className:`jimu-icon-auto-color ${a}`}):a,(0,e.jsx)("span",{className:"ml-2"},r)))}function m(t){const{widgetId:a,actionObjects:r,listItem:s,onActionListItemClick:n,jimuMapView:o,shouldHideEmptyList:l,enableDataAction:c=!0,mapDataSource:p,optionBtnRef:d}=t,[m,g]=e.React.useState(null),b=e.React.useRef(null),v=(t,i)=>{const a=(null==t?void 0:t.icon)||t.className,r=t.title;return(0,e.jsx)(y,{key:i,icon:a,title:r,onClick:()=>{t.execute(s),n()}})};return e.React.useEffect((()=>{c&&function(){u(this,void 0,void 0,(function*(){let t=[];try{let e=null;if(p)e=p.getDataSourceByLayer(s.layer);else if(o){const t=null==o?void 0:o.getJimuLayerViewByAPILayer(s.layer);e=t?yield t.getOrCreateLayerDataSource():yield o.getMapDataSource().createDataSourceByLayer(s.layer)}t=e?[{dataSource:e,records:[],name:null==e?void 0:e.getLabel()}]:[]}catch(e){console.error("DataSource create error:",e)}finally{if(b.current){const r=(0,e.jsx)("div",{className:"data-action-list-wrapper",css:h},(0,e.jsx)(i.DataActionList,{key:Math.random(),widgetId:a,dataSets:t,hideGroupTitle:!0,shouldHideEmptyList:l,onActionListItemClick:n,actionPanelRefDOM:d.current}));g(r)}}}))}()}),[c,s.layer,n,l,a,o,p,d]),(0,e.jsx)(f,{ref:b},r.map(((e,t)=>v(e,t))),c&&m)}var g=o(18249),b=o.n(g),v=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const w=t=>{const i=window.SVG,{className:a}=t,r=v(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:b()},r)):e.React.createElement("svg",Object.assign({className:s},r))};class S{constructor(){this.id="id",this.title="title",this.className="esri-icon",this.group=0,this.widget=null,this.icon=null,this.isValid=(e,t=!1)=>!1,this.execute=e=>{}}useMapWidget(){return this.widget.props.config.useMapWidget}}class L extends S{constructor(e,i){super(),this.isValid=(e,t)=>!t&&("esri.layers.GroupLayer"!==e.layer.declaredClass&&((!e.parent||"esri.layers.GroupLayer"===e.parent.layer.declaredClass)&&!(!this.useMapWidget()||!this.widget.props.config.goto))),this.execute=e=>{this.widget.viewFromMapWidget&&t.zoomToUtils.zoomTo(this.widget.viewFromMapWidget,e.layer,{padding:{top:50,bottom:50,left:50,right:50}})},this.id="goto",this.title=i,this.className="esri-icon-zoom-out-fixed",this.group=0,this.widget=e}}class x extends S{constructor(e,t,i){super(),this.isValid=(e,t)=>{var i;return!t&&(("string"!=typeof e.layer.id||!e.layer.id.startsWith("jimu-draw"))&&(this.title=e.layer.labelsVisible?this.titleHide:this.titleShow,!!(this.useMapWidget()&&this.widget.props.config.label&&(null===(i=null==e?void 0:e.layer)||void 0===i?void 0:i.labelingInfo))))},this.execute=e=>{e.layer.labelsVisible=!e.layer.labelsVisible},this.id="label",this.className="esri-icon-labels label-action-title",this.group=0,this.widget=e,this.titleShow=t,this.titleHide=i}}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},j.apply(null,arguments)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function R(e){var t="function"==typeof Map?new Map:void 0;return R=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if(P())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var r=new(e.bind.apply(e,a));return i&&M(r,i.prototype),r}(e,arguments,I(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),M(i,e)},R(e)}var O=function(e){var t,i;function a(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,M(t,i),a}(R(Error));function A(e,t){return e.substr(-t.length)===t}var E=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function V(e){return"string"!=typeof e?e:e.match(E)?parseFloat(e):e}var N=function(e){return function(t,i){void 0===i&&(i="16px");var a=t,r=i;if("string"==typeof t){if(!A(t,"px"))throw new O(69,e,t);a=V(t)}if("string"==typeof i){if(!A(i,"px"))throw new O(70,e,i);r=V(i)}if("string"==typeof a)throw new O(71,t,e);if("string"==typeof r)throw new O(72,i,e);return""+a/r+e}};N("em");var T=N("rem");function C(e){return Math.round(255*e)}function k(e,t,i){return C(e)+","+C(t)+","+C(i)}function D(e,t,i,a){if(void 0===a&&(a=k),0===t)return a(i,i,i);var r=(e%360+360)%360/60,s=(1-Math.abs(2*i-1))*t,n=s*(1-Math.abs(r%2-1)),o=0,l=0,c=0;r>=0&&r<1?(o=s,l=n):r>=1&&r<2?(o=n,l=s):r>=2&&r<3?(l=s,c=n):r>=3&&r<4?(l=n,c=s):r>=4&&r<5?(o=n,c=s):r>=5&&r<6&&(o=s,c=n);var p=i-s/2;return a(o+p,l+p,c+p)}var F={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var B=/^#[a-fA-F0-9]{6}$/,W=/^#[a-fA-F0-9]{8}$/,J=/^#[a-fA-F0-9]{3}$/,z=/^#[a-fA-F0-9]{4}$/,_=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,G=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,$=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,U=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function H(e){if("string"!=typeof e)throw new O(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return F[t]?"#"+F[t]:e}(e);if(t.match(B))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(W)){var i=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:i}}if(t.match(J))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(z)){var a=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:a}}var r=_.exec(t);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=G.exec(t.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var n=$.exec(t);if(n){var o="rgb("+D(parseInt(""+n[1],10),parseInt(""+n[2],10)/100,parseInt(""+n[3],10)/100)+")",l=_.exec(o);if(!l)throw new O(4,t,o);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var c=U.exec(t.substring(0,50));if(c){var p="rgb("+D(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=_.exec(p);if(!d)throw new O(4,t,p);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])>1?parseFloat(""+c[4])/100:parseFloat(""+c[4])}}throw new O(5)}function K(e){return function(e){var t,i=e.red/255,a=e.green/255,r=e.blue/255,s=Math.max(i,a,r),n=Math.min(i,a,r),o=(s+n)/2;if(s===n)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var l=s-n,c=o>.5?l/(2-s-n):l/(s+n);switch(s){case i:t=(a-r)/l+(a<r?6:0);break;case a:t=(r-i)/l+2;break;default:t=(i-a)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:o,alpha:e.alpha}:{hue:t,saturation:c,lightness:o}}(H(e))}var X=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function q(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function Y(e){return q(Math.round(255*e))}function Z(e,t,i){return X("#"+Y(e)+Y(t)+Y(i))}function Q(e,t,i){return D(e,t,i,Z)}function ee(e,t,i){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i)return Q(e,t,i);if("object"==typeof e&&void 0===t&&void 0===i)return Q(e.hue,e.saturation,e.lightness);throw new O(1)}function te(e,t,i,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof a)return a>=1?Q(e,t,i):"rgba("+D(e,t,i)+","+a+")";if("object"==typeof e&&void 0===t&&void 0===i&&void 0===a)return e.alpha>=1?Q(e.hue,e.saturation,e.lightness):"rgba("+D(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new O(2)}function ie(e,t,i){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i)return X("#"+q(e)+q(t)+q(i));if("object"==typeof e&&void 0===t&&void 0===i)return X("#"+q(e.red)+q(e.green)+q(e.blue));throw new O(6)}function ae(e,t,i,a){if("string"==typeof e&&"number"==typeof t){var r=H(e);return"rgba("+r.red+","+r.green+","+r.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof a)return a>=1?ie(e,t,i):"rgba("+e+","+t+","+i+","+a+")";if("object"==typeof e&&void 0===t&&void 0===i&&void 0===a)return e.alpha>=1?ie(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new O(7)}function re(e){if("object"!=typeof e)throw new O(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return ae(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return ie(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return te(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return ee(e);throw new O(8)}function se(e,t,i){return function(){var a=i.concat(Array.prototype.slice.call(arguments));return a.length>=t?e.apply(this,a):se(e,t,a)}}function ne(e){return se(e,e.length,[])}ne((function(e,t){if("transparent"===t)return t;var i=K(t);return re(j({},i,{hue:i.hue+parseFloat(e)}))}));function oe(e,t,i){return Math.max(e,Math.min(t,i))}ne((function(e,t){if("transparent"===t)return t;var i=K(t);return re(j({},i,{lightness:oe(0,1,i.lightness-parseFloat(e))}))}));ne((function(e,t){if("transparent"===t)return t;var i=K(t);return re(j({},i,{saturation:oe(0,1,i.saturation-parseFloat(e))}))}));ne((function(e,t){if("transparent"===t)return t;var i=K(t);return re(j({},i,{lightness:oe(0,1,i.lightness+parseFloat(e))}))}));var le=ne((function(e,t,i){if("transparent"===t)return i;if("transparent"===i)return t;if(0===e)return i;var a=H(t),r=j({},a,{alpha:"number"==typeof a.alpha?a.alpha:1}),s=H(i),n=j({},s,{alpha:"number"==typeof s.alpha?s.alpha:1}),o=r.alpha-n.alpha,l=2*parseFloat(e)-1,c=((l*o==-1?l:l+o)/(1+l*o)+1)/2,p=1-c;return ae({red:Math.floor(r.red*c+n.red*p),green:Math.floor(r.green*c+n.green*p),blue:Math.floor(r.blue*c+n.blue*p),alpha:r.alpha*parseFloat(e)+n.alpha*(1-parseFloat(e))})}));ne((function(e,t){if("transparent"===t)return t;var i=H(t);return ae(j({},i,{alpha:oe(0,1,(100*("number"==typeof i.alpha?i.alpha:1)+100*parseFloat(e))/100)}))}));ne((function(e,t){if("transparent"===t)return t;var i=K(t);return re(j({},i,{saturation:oe(0,1,i.saturation+parseFloat(e))}))}));ne((function(e,t){return"transparent"===t?t:re(j({},K(t),{hue:parseFloat(e)}))}));ne((function(e,t){return"transparent"===t?t:re(j({},K(t),{lightness:parseFloat(e)}))}));ne((function(e,t){return"transparent"===t?t:re(j({},K(t),{saturation:parseFloat(e)}))}));ne((function(e,t){return"transparent"===t?t:le(parseFloat(e),"rgb(0, 0, 0)",t)}));ne((function(e,t){return"transparent"===t?t:le(parseFloat(e),"rgb(255, 255, 255)",t)}));ne((function(e,t){if("transparent"===t)return t;var i=H(t);return ae(j({},i,{alpha:oe(0,1,+(100*("number"==typeof i.alpha?i.alpha:1)-100*parseFloat(e)).toFixed(2)/100)}))}));const{useState:ce,useCallback:pe}=e.React,de=(e,t)=>["ar","tr"].includes(e)?`%${t}`:`${t}%`;function ue(t){const{widget:a,listItem:r}=t,[s,n]=ce(!0),{isRTL:o,locale:l}=(0,e.getAppStore)().getState().appContext,c=pe((()=>{n(!1),a.setState({nativeActionPopper:null})}),[a]);return(0,e.jsx)(i.FloatingPanel,{toggle:(e,t)=>{"clickOutside"!==t&&c()},headerTitle:a.translate("transparency"),reference:a.optionBtnRef.current,open:s,className:"transparency-panel",onHeaderClose:c,css:e.css`
    .transparency-panel-container {
      width: 320px;
      padding: 1rem;
      .transparency-panel-title {
        display: block;
        -webkit-box-orient: vertical;
        word-break: break-all;
        white-space: normal;
        -webkit-line-clamp: 1;
        font-size: ${T(14)};
      }
      .transparency-slider {
        padding-bottom: 0.3rem;
        padding-top: 0.4rem;
        margin-top: 1.1rem;
      }
      .transparency-slider-meters {
        span {
          font-size: 5px;
        }
      }
    }
  `,autoSize:!0},(0,e.jsx)("div",{className:"transparency-panel-container"},(0,e.jsx)("span",{title:r.layer.title,className:"transparency-panel-title"},r.layer.title),(0,e.jsx)(i.Slider,{className:(0,e.classNames)("transparency-slider",o?"rtl":"ltr"),defaultValue:1-r.layer.opacity,min:0,max:1,step:.01,onChange:e=>{const t=Number.parseFloat(e.target.value);r.layer.opacity=1-t},tooltip:!0,formatter:t=>e.utils.formatPercentageNumber((100*t).toFixed(0)+"%")}),(0,e.jsx)("div",{className:"d-flex justify-content-center transparency-slider-meters"},(0,e.jsx)("span",null,"|")),(0,e.jsx)("div",{className:"d-flex justify-content-between transparency-slider-label",dir:"ltr"},(0,e.jsx)("span",{style:{width:"28px",textAlign:"left"}},"0"),(0,e.jsx)("span",null,de(l,"50")),(0,e.jsx)("span",null,de(l,"100")))))}var fe=o(85643),he=o.n(fe),ye=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const me=t=>{const i=window.SVG,{className:a}=t,r=ye(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:he()},r)):e.React.createElement("svg",Object.assign({className:s},r))};class ge extends S{constructor(t,i){super(),this.isValid=(e,t)=>!t&&((!e.parent||"esri.layers.GroupLayer"===e.parent.layer.declaredClass)&&!(!this.useMapWidget()||!this.widget.props.config.opacity)),this.execute=t=>{const i=e.React.createElement(ue,{widget:this.widget,listItem:t});this.widget.setState({nativeActionPopper:i})},this.id="transparency",this.title=i,this.className="esri-icon-sliders-horizontal",this.group=1,this.widget=t,this.icon=e.React.createElement(me,null)}}class be extends S{constructor(t,i){super(),this.isValid=e=>!(!e.layer.url||!this.widget.props.config.information),this.execute=t=>{var i;const a=t.layer,r=null==a?void 0:a.portalItem;if((null===(i=null==r?void 0:r.portal)||void 0===i?void 0:i.url)&&r.id){const t=e.portalUrlUtils.getStandardPortalUrl(r.portal.url)+`/home/item.html?id=${r.id}`;window.open(t)}else{const e="feature"===(null==a?void 0:a.type)?`${a.url}/${a.layerId}`:a.url;window.open(e)}},this.id="information",this.title=i,this.className="esri-icon-description",this.group=3,this.widget=t}}class ve extends S{constructor(e,t){super(),this.isValid=e=>!0,this.execute=e=>{},this.id="option-action",this.title=t,this.className="esri-icon-handle-horizontal",this.group=100,this.widget=e}}const we=[e.SupportedJSAPILayerTypes.FeatureLayer,e.SupportedJSAPILayerTypes.CSVLayer,e.SupportedJSAPILayerTypes.ImageryLayer,e.SupportedJSAPILayerTypes.ImageryTileLayer,e.SupportedJSAPILayerTypes.GeoJSONLayer,e.SupportedJSAPILayerTypes.SubtypeSublayer,"sublayer"];class Se extends S{constructor(t,i,a){super(),this.isValid=t=>{var i;const a=t.layer;if("string"==typeof a.id&&a.id.startsWith("jimu-draw"))return!1;const r=this.widget.jmvFromMap,s=this.widget.props.widgetId,n=e.MutableStoreManager.getInstance().getStateValue([s,"popup",a.id]);if(a&&(null===(i=this.widget.props.config)||void 0===i?void 0:i.popup)&&we.includes(a.type)){const e=a.popupEnabled&&r.isClickOpenPopupEnabled()||(null==n?void 0:n.popupEnabled);return this.title=e?this.disableTitle:this.enableTitle,!0}return!1},this.execute=t=>{const i=t.layer,a=this.widget.jmvFromMap,r=this.widget.props.widgetId,s=e.MutableStoreManager.getInstance(),n=s.getStateValue([r,"popup",i.id]),o=n||{};void 0===(null==n?void 0:n.initialValue)&&(o.initialValue=i.popupEnabled,o.layer=i),this.title===this.disableTitle?(i.popupEnabled=!1,a.disableLayerPopup(i),o.popupEnabled=!1):(i.popupEnabled=!0,a.enableLayerPopup(i,!0),o.popupEnabled=!0),s.updateStateValue(r,`popup.${i.id}`,o)},this.id="popup",this.className="esri-icon-configure-popup",this.group=6,this.widget=t,this.enableTitle=i,this.disableTitle=a}}const{useState:Le,useCallback:xe,useRef:je,useEffect:Me}=e.React;function Ie(t){const{widget:a,listItem:r,scaleRangeSliderClass:s}=t,[n,o]=Le(!0),[l,c]=Le(null),p=je(null);Me((()=>{var t,i;if(!l){const n=null===(i=null===(t=(0,e.getAppStore)().getState())||void 0===t?void 0:t.appContext)||void 0===i?void 0:i.locale;let o="US";if(n){const e=n.split("-");if((null==e?void 0:e.length)>0){const t=e[e.length-1];if(t){const e=t.toUpperCase();["AE","AR","AT","AU","BE","BG","BO","BR","CA","CH","CI","CL","CN","CO","CR","CZ","DE","DK","EE","EG","ES","FI","FR","GB","GL","GR","GT","HK","ID","IE","IL","IN","IQ","IS","IT","JP","KE","KR","KW","LI","LT","LU","LV","MA","MG","ML","MO","MX","MY","NI","NL","NO","NZ","PE","PL","PR","PT","RO","RU","RW","SE","SG","SK","SR","SV","TH","TN","TW","US","VE","VI","ZA"].includes(e)&&(o=e)}}}const l=new s({view:a.jmvFromMap.view,layer:r.layer,region:o,container:p.current});c(l),l.watch(["minScale","maxScale"],(function(e,t,i){r.layer[i]=e}))}}),[r.layer,l,s,a.jmvFromMap.view]);const d=xe((()=>{o(!1),a.setState({nativeActionPopper:null})}),[a]);return(0,e.jsx)(i.FloatingPanel,{toggle:(e,t)=>{"clickOutside"!==t&&d()},headerTitle:a.translate("visibilityRange"),reference:a.optionBtnRef.current,open:n,className:"visibility-range-panel",autoSize:!0,onHeaderClose:d,css:e.css`
    .visibility-range-container {
      min-width: 342px;
      .visibility-range-panel-title {
        display: block;
        -webkit-box-orient: vertical;
        word-break: break-all;
        white-space: normal;
        -webkit-line-clamp: 1;
        font-size: ${T(14)};
        padding: 1rem 1rem 0 1rem;
      }
      .scale-range-slider-container {
        padding: 1rem;
      }
    }
  `},(0,e.jsx)("div",{className:"visibility-range-container"},(0,e.jsx)("span",{title:r.layer.title,className:"visibility-range-panel-title"},r.layer.title),(0,e.jsx)("div",{className:"scale-range-slider-container"},(0,e.jsx)("div",{ref:p,className:"scale-range-slider"}))))}var Pe=o(43052),Re=o.n(Pe),Oe=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const Ae=t=>{const i=window.SVG,{className:a}=t,r=Oe(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:Re()},r)):e.React.createElement("svg",Object.assign({className:s},r))};class Ee extends S{constructor(t,i){super(),this.isValid=(e,t)=>!t&&(!(!this.useMapWidget()||!this.widget.props.config.visibilityRange)&&(this.widget.getModule("esri/widgets/ScaleRangeSlider",(()=>this.ScaleRangeSlider),(e=>{this.ScaleRangeSlider=e})),!0)),this.execute=t=>{const i=e.React.createElement(Ie,{widget:this.widget,listItem:t,scaleRangeSliderClass:this.ScaleRangeSlider});this.widget.setState({nativeActionPopper:i})},this.id="visibility-range",this.title=i,this.className="esri-icon-sliders-horizontal",this.group=7,this.widget=t,this.ScaleRangeSlider=null,this.icon=e.React.createElement(Ae,null)}}var Ve=o(48993);const{useState:Ne,useCallback:Te}=e.React,Ce=t=>e.css`
    .change-symbol-container {
      width: 320px;
      .change-symbol-title {
        display: block;
        -webkit-box-orient: vertical;
        word-break: break-all;
        white-space: normal;
        -webkit-line-clamp: 1;
        font-size: ${T(14)};
        padding: 1rem 1rem 0 1rem;
      }
      .change-symbol-options {
        margin-left: 1rem;
        margin-top: 0.5rem;
        .radio-option {
          margin-right: 0.25rem;
        }
      }
      .symbol-list-container {
        min-height: ${t===Ve.JimuSymbolType.Point?"294px":"238px"};
      }
    }
  `;function ke(t){var a;const{widget:r,listItem:s,symbolType:n}=t,[o,l]=Ne(s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER]?"custom":"predefined"),[c,p]=Ne(!0),[d,u]=Ne(!!s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER]),f=Te((()=>{p(!1),r.setState({nativeActionPopper:null})}),[r]),h=Te((t=>{r.state.jimuMapViewId&&(l(t.target.value),"predefined"===t.target.value&&s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER]&&(s.layer.renderer=s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER],delete s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER],u(!1)))}),[s.layer,r]),y=Te((t=>{s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER]||(s.layer[e.ExBAddedJSAPIProperties.EXB_PREDEFINED_RENDERER]=s.layer.renderer),u(!0),s.layer.renderer={type:"simple",symbol:t}}),[s.layer]);return(0,e.jsx)(i.FloatingPanel,{toggle:(e,t)=>{"clickOutside"!==t&&f()},headerTitle:r.translate("changeSymbol"),reference:r.optionBtnRef.current,open:c,className:"change-symbol-popper-panel",onHeaderClose:f,css:Ce(n),autoSize:!0,shiftOptions:{crossAxis:!0}},(0,e.jsx)("div",{className:"change-symbol-container pb-2"},(0,e.jsx)("span",{title:s.layer.title,className:"change-symbol-title"},s.layer.title),(0,e.jsx)("div",{className:"change-symbol-options",role:"radiogroup"},(0,e.jsx)(i.Label,{className:"d-flex align-items-center",style:{cursor:"pointer",fontWeight:"normal"}},(0,e.jsx)(i.Radio,{className:"radio-option",name:"predefined",value:"predefined",onChange:h,checked:"predefined"===o}),r.translate("usePredefinedSymbols")),(0,e.jsx)(i.Label,{className:"d-flex align-items-center",style:{cursor:"pointer",fontWeight:"normal"}},(0,e.jsx)(i.Radio,{className:"radio-option",name:"custom",value:"custom",onChange:h,checked:"custom"===o}),r.translate("useCustomSymbols"))),"custom"===o&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{className:"px-4 pt-2 pb-1 align-items-center",style:{display:d?"none":"flex",height:"40px"}},(0,e.jsx)("div",null,r.translate("preview"))),(0,e.jsx)(Ve.SymbolList,{symbol:d?null===(a=s.layer.renderer)||void 0===a?void 0:a.symbol:null,className:"symbol-list-container",isShow:!0,onA11yFocus:()=>{},jimuSymbolType:n,onPointSymbolChanged:y,onPolylineSymbolChanged:y,onPolygonSymbolChanged:y,showSymbolPreview:d}))))}var De=o(40283),Fe=o.n(De),Be=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const We=t=>{const i=window.SVG,{className:a}=t,r=Be(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:Fe()},r)):e.React.createElement("svg",Object.assign({className:s},r))};class Je extends S{constructor(t,i){super(),this.isValid=(t,i)=>{if(i)return!1;if(![e.SupportedJSAPILayerTypes.FeatureLayer,e.SupportedJSAPILayerTypes.OrientedImageryLayer,e.SupportedJSAPILayerTypes.MapImageLayer,e.SupportedJSAPILayerTypes.CSVLayer,e.SupportedJSAPILayerTypes.GeoJSONLayer,e.SupportedJSAPILayerTypes.SubtypeSublayer,"sublayer"].includes(t.layer.type))return!1;if("sublayer"===t.layer.type&&!this.supportDynamicLayers(t))return!1;if(this.useMapWidget()&&this.widget.props.config.changeSymbolForRuntimeLayers){const i=["point","polyline","polygon"],a=t.layer;return a[e.ExBAddedJSAPIProperties.EXB_LAYER_FROM_RUNTIME]&&i.includes(a.geometryType)}return!1},this.supportDynamicLayers=t=>{var i,a;const r=t.layer;return!(r.layer.type!==e.SupportedJSAPILayerTypes.MapImageLayer||!(null===(a=null===(i=r.layer.capabilities)||void 0===i?void 0:i.exportMap)||void 0===a?void 0:a.supportsDynamicLayers))},this.getSymbolType=e=>{let t=null;switch(e.geometryType){case"point":t=Ve.JimuSymbolType.Point;break;case"polyline":t=Ve.JimuSymbolType.Polyline;break;case"polygon":t=Ve.JimuSymbolType.Polygon}return t},this.execute=t=>{const i=e.React.createElement(ke,{widget:this.widget,listItem:t,symbolType:this.getSymbolType(t.layer)});this.widget.setState({nativeActionPopper:i})},this.id="change-symbol",this.title=i,this.className="esri-icon-edit",this.group=8,this.widget=t,this.icon=e.React.createElement(We,null)}}var ze=o(50170),_e=o.n(ze),Ge=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const $e=t=>{const i=window.SVG,{className:a}=t,r=Ge(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:_e()},r)):e.React.createElement("svg",Object.assign({className:s},r))};var Ue=o(13424),He=o.n(Ue),Ke=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};const Xe=t=>{const i=window.SVG,{className:a}=t,r=Ke(t,["className"]),s=(0,e.classNames)("jimu-icon jimu-icon-component",a);return i?e.React.createElement(i,Object.assign({className:s,src:He()},r)):e.React.createElement("svg",Object.assign({className:s},r))},qe=t=>e.css`
    background-color: ${t.sys.color.surface.paper};
    .map-layers-header-title{
      span {
        font-size: 16px;
        font-weight: 500;
      }
    }
  `,{useState:Ye,useCallback:Ze,useEffect:Qe}=e.React,et=e=>t=>!t||!e||t.layer.title.toLowerCase().includes(e.toLowerCase());function tt(a){const{theme:s,jimuMapViewId:n,layerListRef:o,tableListRef:l,enableSearch:c,enableBatchOption:p,isMapWidgetMode:d}=a,u=e.hooks.useTranslation(r),[f,h]=Ye(!1),[y,m]=Ye(""),g=e.lodash.throttle((e=>{const t=e.target.value;m(t)}),200),b=Ze((e=>()=>{!function(e,t){for(const i of e){i.layer.visible=t}}(t.MapViewManager.getInstance().getJimuMapViewById(n).getAllJimuLayerViews(),e)}),[n]),v=Ze((e=>()=>{!function e(t,i){if(t)for(const a of t)a.open=i,a.children&&e(a.children,i)}(o.current.operationalItems,e)}),[o]);return Qe((()=>{o.current&&(o.current.filterPredicate=et(y)),l.current&&(l.current.filterPredicate=et(y))}),[o,y,l]),p||c?(0,e.jsx)("div",{className:"map-layers-header d-flex justify-content-between p-1",css:qe(s)},f?(0,e.jsx)(i.TextInput,{className:"w-100 mr-1",type:"text",onChange:g,autoFocus:!0,allowClear:!0}):(0,e.jsx)("div",{className:"map-layers-header-title d-flex align-items-center"},(0,e.jsx)("span",{className:"ml-2"},u("layers"))),(0,e.jsx)("div",{className:"map-layers-header-icons d-flex"},p&&!f&&(0,e.jsx)(i.Dropdown,{className:"map-layers-batch-action-dropdown","aria-label":u("batchOptions")},(0,e.jsx)(i.Tooltip,{role:"tooltip",title:u("batchOptions"),enterDelay:1e3,enterNextDelay:1e3,placement:"top"},(0,e.jsx)(i.DropdownButton,{icon:!0,arrow:!1,variant:"text"},(0,e.jsx)(Xe,null))),(0,e.jsx)(i.DropdownMenu,null,d&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.DropdownItem,{onClick:b(!0)},u("turnOnAllLayers")),(0,e.jsx)(i.DropdownItem,{onClick:b(!1)},u("turnOffAllLayers")),(0,e.jsx)(i.DropdownItem,{divider:!0})),(0,e.jsx)(i.DropdownItem,{onClick:v(!0)},u("expandAllLayers")),(0,e.jsx)(i.DropdownItem,{onClick:v(!1)},u("collapseAllLayers")))),c&&(0,e.jsx)(i.Tooltip,{role:"tooltip",title:u("SearchLabel"),enterDelay:1e3,enterNextDelay:1e3,placement:"top"},(0,e.jsx)(i.Button,{variant:"text",className:"map-layers-search-btn",icon:!0,onClick:()=>{h(!f)},"aria-label":u("SearchLabel")},(0,e.jsx)($e,null))))):null}var it=function(e,t,i,a){return new(i||(i=Promise))((function(r,s){function n(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,o)}l((a=a.apply(e,t||[])).next())}))};const at=Object.assign({},r,i.defaultMessages);var rt;!function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(rt||(rt={}));class st extends e.React.PureComponent{constructor(t){super(t),this.translate=e=>this.props.intl.formatMessage({id:e,defaultMessage:at[e]}),this.defineLayerListActionsGenerator=(e=!1)=>t=>{var i,a,r,s,n,o,l,c,p;const d=t.item;let u={};d.actionsSections=[],!e&&(null===(i=this.props.config)||void 0===i?void 0:i.useMapWidget)&&(null===(a=this.props.config)||void 0===a?void 0:a.enableLegend)&&d.layer.legendEnabled&&("string"==typeof(null===(r=d.layer)||void 0===r?void 0:r.id)&&d.layer.id.startsWith("jimu-draw")||(d.panel={content:"legend",open:d.layer.visible&&(null===(s=this.props.config)||void 0===s?void 0:s.showAllLegend)})),this.layerListActions.forEach((t=>{if(t.isValid(d,e)){let e=u[t.group];e||(e=[],u[t.group]=e),e.push({id:t.id,title:t.title,className:t.className})}}));const f=null===(n=this.props.enableDataAction)||void 0===n||n,h=Object.keys(u).length-1;f||!(h<=1)||u[1]||u[7]||u[8]?u={OPTION_ACTION_INDEX:u[100]}:delete u[100];const y=null===(c=null===(l=null===(o=this.props)||void 0===o?void 0:o.config)||void 0===l?void 0:l.customizeLayerOptions)||void 0===c?void 0:c[this.state.jimuMapViewId];if(y&&y.isEnabled){const e=new Set(null==y?void 0:y.hiddenJimuLayerViewIds),t=new Set(null==y?void 0:y.showJimuLayerViewIds),i=this.jimuMapView.getJimuLayerViewIdByAPILayer(d.layer);e.has(i)&&(d.hidden=!0),(null==y?void 0:y.showJimuLayerViewIds)&&(d.hidden=!t.has(i)),this.isLayerFromRuntime(d.layer)&&(d.hidden=!(null===(p=null==y?void 0:y.showRuntimeAddedLayers)||void 0===p||p)),this.isWMTSSublayer(d.layer)&&(d.hidden=!1)}Object.entries(u).sort(((e,t)=>Number(e[0])-Number(t[0]))).forEach((([e,t])=>{d.actionsSections.push(t)}))},this.onLayerListActionsTriggered=(t,i=!1)=>{var a;const r=t.action,s=t.item,n=this.layerListActions.find((e=>e.id===r.id));if("option-action"===n.id){const t=this.layerListActions.filter((e=>e.isValid(s,i)&&"option-action"!==e.id)),r=t.length>0,n=null===(a=this.props.enableDataAction)||void 0===a||a;setTimeout((()=>{const i=(0,e.jsx)(m,{widgetId:this.props.id,jimuMapView:this.jimuMapView,mapDataSource:this.dataSource,actionObjects:t,listItem:s,onActionListItemClick:()=>{this.onActionListItemClick()},enableDataAction:n,shouldHideEmptyList:r,optionBtnRef:this.optionBtnRef});this.setState({actionListDOM:i})}),0)}else{const e=n.execute(s);e&&this.setState({nativeActionPopper:e})}},this.onActiveViewChange=e=>{const t=this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0];e&&e.view||!t?(this.jmvFromMap=e,this.viewFromMapWidget=e&&e.view,this.setState({nativeActionPopper:null},(function(){this.setState({mapWidgetId:t,jimuMapViewId:e.id})}))):this.destroyLayerList()},this.onDataSourceCreated=e=>{this.dataSource=e,this.setState({mapDataSourceId:e.id})},this.isLayerFromRuntime=t=>!this.isWMTSSublayer(t)&&t[e.ExBAddedJSAPIProperties.EXB_LAYER_FROM_RUNTIME],this.editWidgetConfig=t=>{var i,a;let r=this.props.config;for(const e of t){const t=(null===(a=null===(i=this.props.config.customizeLayerOptions)||void 0===i?void 0:i[e])||void 0===a?void 0:a.showJimuLayerViewIds)||[],s=this.oldSublayersSetMap.get(e);s&&(r=r.setIn(["customizeLayerOptions",e,"showJimuLayerViewIds"],[...t,...s]))}let s=(0,e.getAppStore)().getState().appConfig;s=s.setIn(["widgets",this.props.id,"config"],r),(0,e.getAppStore)().dispatch(e.appActions.appConfigChanged(s)),this.setState({oldConfigUpdated:!0})},this.upgradeOldSublayerConfig=t=>it(this,void 0,void 0,(function*(){var i,a,r,s;const n=this.props.originVersion;if(n&&e.semver.lt(n,"1.18.0")&&!this.state.oldConfigUpdated){for(const e of Object.keys(t)){const n=null===(a=null===(i=this.props.config.customizeLayerOptions)||void 0===i?void 0:i[e])||void 0===a?void 0:a.isEnabled;if(void 0===(null===(s=null===(r=this.props.config.customizeLayerOptions)||void 0===r?void 0:r[e])||void 0===s?void 0:s.showJimuLayerViewIds))break;if(n){const i=t[e],a=yield this.getAllLayers(i.view.map.layers);for(const e of a)this.getOldVersionUnselectableSublayer(e,i,this.oldSublayersSetMap)}}this.oldSublayersSetMap.size>0&&this.editWidgetConfig(Object.keys(t))}})),this.onToggleActionsPopper=()=>{if(this.setState({isActionListPopperOpen:!1,actionListDOM:null}),(0,e.isKeyboardMode)()){const t=(0,i.getFocusableElements)(this.optionBtnRef.current);(0,e.focusElementInKeyboardMode)(t[0])}},this.toggleExpand=(e,t)=>{for(const i of e)i.open=t,i.children&&this.toggleExpand(i.children,t)},this.state={mapWidgetId:null,mapDataSourceId:null,jimuMapViewId:null,listLoadStatus:rt.Pending,isActionListPopperOpen:!1,actionListDOM:null,tableLoadStatus:rt.Pending,nativeActionPopper:null,oldConfigUpdated:!1},this.renderPromise=Promise.resolve(),this.layerListActions=function(e){const t=e.translate;return[new L(e,t("goto")),new x(e,t("showLabels"),t("hideLabels")),new ge(e,t("transparency")),new be(e,t("information")),new ve(e,t("options")),new Se(e,t("enablePopup"),t("disablePopup")),new Ee(e,t("visibilityRange")),new Je(e,t("changeSymbol"))]}(this),this.mapContainerRef=e.React.createRef(),this.layerListContainerRef=e.React.createRef(),this.tableListContainerRef=e.React.createRef(),this.optionBtnRef=e.React.createRef(),this.layerListRef=e.React.createRef(),this.tableListRef=e.React.createRef(),this.oldSublayersSetMap=new Map}componentDidMount(){this.bindClickHandler()}componentDidUpdate(e,t){var i,a;this.props.isDesignMode&&this.props.isDesignMode!==e.isDesignMode&&this.setState({nativeActionPopper:null}),this.needToPreventRefreshList(e,t)||(this.props.enableDataAction===e.enableDataAction&&this.props.config===e.config||(this.optionBtnRef.current=null,this.setState({isActionListPopperOpen:!1})),this.bindClickHandler(),(null===(i=this.props.config)||void 0===i?void 0:i.showTables)===(null===(a=e.config)||void 0===a?void 0:a.showTables)?((this.props.config.useMapWidget&&this.state.mapWidgetId===this.currentUseMapWidgetId||!this.props.config.useMapWidget&&this.state.mapDataSourceId===this.currentUseDataSourceId)&&setTimeout((()=>{this.syncRenderer(this.renderPromise)}),150),!this.props.config.popup&&e.config.popup&&this.restoreLayerPopupField()):this.renderTableList())}restoreLayerPopupField(){const t=e.MutableStoreManager.getInstance().getStateValue([this.props.widgetId,"popup"])||{};for(const e of Object.values(t))e.layer.popupEnabled=e.initialValue;t&&e.MutableStoreManager.getInstance().updateStateValue(this.props.widgetId,"popup",null)}bindClickHandler(){const e=e=>{e&&!e.onclick&&(e.onclick=e=>{const t=e.target;"CALCITE-ACTION"===t.nodeName&&t.title===this.translate("options")&&(this.optionBtnRef.current!==t?(this.optionBtnRef.current=t,this.setState({isActionListPopperOpen:!0,nativeActionPopper:null})):this.setState({isActionListPopperOpen:!this.state.isActionListPopperOpen,nativeActionPopper:null}))})};e(this.layerListContainerRef.current),e(this.tableListContainerRef.current)}needToPreventRefreshList(e,t){return t.isActionListPopperOpen!==this.state.isActionListPopperOpen||t.nativeActionPopper!==this.state.nativeActionPopper||t.listLoadStatus!==this.state.listLoadStatus||t.tableLoadStatus!==this.state.tableLoadStatus||(t.actionListDOM!==this.state.actionListDOM||(t.tableLoadStatus!==this.state.tableLoadStatus||this.props.isDesignMode!==e.isDesignMode))}createView(){return it(this,void 0,void 0,(function*(){return this.props.config.useMapWidget?this.viewFromMapWidget:yield this.createViewByDataSource()}))}createViewByDataSource(){return it(this,void 0,void 0,(function*(){return yield this.loadViewModules(this.dataSource),this.dataSource.type===e.DataSourceTypes.WebMap?yield new Promise(((e,t)=>{this.createWebMapView(this.MapView,e,t)})):this.dataSource.type===e.DataSourceTypes.WebScene?new Promise(((e,t)=>{this.createSceneView(this.SceneView,e,t)})):Promise.reject(new Error(null))}))}createWebMapView(e,t,i){if(this.mapView)this.mapView.map=this.dataSource.map;else{const t={map:this.dataSource.map,container:this.mapContainerRef.current};this.mapView=new e(t)}this.mapView.when((()=>{t(this.mapView)}),(e=>i(e)))}createSceneView(e,t,i){if(this.sceneView)this.sceneView.map=this.dataSource.map;else{const t={map:this.dataSource.map,container:this.mapContainerRef.current};this.sceneView=new e(t)}this.sceneView.when((()=>{t(this.sceneView)}),(e=>i(e)))}destroyView(){this.mapView&&!this.mapView.destroyed&&this.mapView.destroy(),this.sceneView&&!this.sceneView.destroyed&&this.sceneView.destroy()}getModule(e,i,a){return it(this,void 0,void 0,(function*(){const r=i();if(r)return r;const s=yield(0,t.loadArcGISJSAPIModules)([e]);return a(s[0]),s[0]}))}loadViewModules(t){return it(this,void 0,void 0,(function*(){let i=null;return t.type===e.DataSourceTypes.WebMap?i=yield this.getModule("esri/views/MapView",(()=>this.MapView),(e=>{this.MapView=e})):t.type===e.DataSourceTypes.WebScene&&(i=yield this.getModule("esri/views/SceneView",(()=>this.SceneView),(e=>{this.SceneView=e}))),i}))}destroyTableList(){this.tableListRef.current&&!this.tableListRef.current.destroyed&&this.tableListRef.current.destroy()}destroyLayerList(){this.layerListRef.current&&!this.layerListRef.current.destroyed&&this.layerListRef.current.destroy()}createTableList(e){return it(this,void 0,void 0,(function*(){var t;this.setState({tableLoadStatus:rt.Pending}),yield this.getModule("esri/widgets/TableList",(()=>this.TableList),(e=>{this.TableList=e}));const i=document&&document.createElement("div");return i.className="table-list",this.tableListContainerRef.current.appendChild(i),this.destroyTableList(),this.tableListRef.current=new this.TableList({container:i,map:e.map,dragEnabled:null===(t=this.props.config)||void 0===t?void 0:t.reorderLayers,listItemCreatedFunction:this.defineLayerListActionsGenerator(!0)}),this.tableListRef.current.on("trigger-action",(e=>{this.onLayerListActionsTriggered(e,!0)})),this.tableListRef.current}))}createLayerList(e){return it(this,void 0,void 0,(function*(){var i,a,r;if(this.setState({listLoadStatus:rt.Pending}),!this.LayerList){const e=yield(0,t.loadArcGISJSAPIModules)(["esri/widgets/LayerList"]);this.LayerList=e[0]}const s=document&&document.createElement("div");s.className="jimu-widget",this.layerListContainerRef.current.appendChild(s),this.destroyLayerList();let n={view:e,listItemCreatedFunction:this.defineLayerListActionsGenerator(!1),container:s};this.props.config.useMapWidget&&(n=Object.assign(Object.assign({},n),{dragEnabled:null!==(a=null===(i=this.props.config)||void 0===i?void 0:i.reorderLayers)&&void 0!==a&&a,visibilityAppearance:(null===(r=this.props.config)||void 0===r?void 0:r.useTickBoxes)?"checkbox":"default"}));const o=new this.LayerList(n);o.on("trigger-action",(e=>{this.onLayerListActionsTriggered(e)})),o.when((()=>{this.props.config.expandAllLayers&&this.toggleExpand(o.operationalItems,!0)})),this.layerListRef.current=o}))}onActionListItemClick(){setTimeout((()=>{this.setState({isActionListPopperOpen:!1})}),100)}renderLayerList(){return it(this,void 0,void 0,(function*(){var e;try{const t=yield this.createView();(null===(e=this.props.config)||void 0===e?void 0:e.showTables)&&(yield this.renderTableList()),yield this.createLayerList(t),this.setState({listLoadStatus:rt.Fulfilled})}catch(e){console.error(e)}}))}renderTableList(){return it(this,void 0,void 0,(function*(){var e;try{const t=yield this.createView();(null===(e=this.props.config)||void 0===e?void 0:e.showTables)?(yield this.createTableList(t),this.setState({tableLoadStatus:rt.Fulfilled})):this.destroyTableList()}catch(e){console.error(e)}}))}syncRenderer(e){return it(this,void 0,void 0,(function*(){this.jimuMapView=t.MapViewManager.getInstance().getJimuMapViewById(this.state.jimuMapViewId),this.jimuMapView&&(yield this.jimuMapView.whenJimuMapViewLoaded()),yield e,this.renderPromise=this.renderLayerList()}))}isWMTSSublayer(e){let t=e.parent;const i=["esri.layers.WMTSLayer"];for(;t;){if(i.includes(t.declaredClass))return!0;t=t.parent}return!1}getAllLayers(e){return it(this,arguments,void 0,(function*(e,t=[]){const i=["esri.layers.WMSLayer","esri.layers.support.WMSSublayer","esri.layers.WMTSLayer","esri.layers.support.WMTSSublayer","esri.layers.KMLLayer","esri.layers.support.KMLSublayer","esri.layers.CatalogLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.KnowledgeGraphLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.LinkChartLayer","esri.layers.GroupLayer"];for(const a of e)i.includes(a.declaredClass)&&(a.load&&(yield a.load()),t.push(a),a.layers?yield this.getAllLayers(a.layers,t):a.sublayers&&(yield this.getAllLayers(a.sublayers,t)));return t}))}getOldVersionUnselectableSublayer(e,t,i){const a=["esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.KMLLayer","esri.layers.CatalogLayer","esri.layers.KnowledgeGraphLayer","esri.layers.LinkChartLayer"],r=t.getJimuLayerViewIdByAPILayer(e);let s=e.parent;for(;s;){if(a.includes(s.declaredClass)){if(i.has(t.id))i.get(t.id).add(r);else{const e=new Set;e.add(r),i.set(t.id,e)}return!0}s=s.parent}return!1}render(){var r,s,o,l;const c=this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0],p=this.props.useDataSources&&this.props.useDataSources[0];this.currentUseMapWidgetId=c,this.currentUseDataSourceId=p&&p.dataSourceId;let d=null;this.props.config.useMapWidget?d=(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:null===(r=this.props.useMapWidgetIds)||void 0===r?void 0:r[0],onActiveViewChange:this.onActiveViewChange,onViewsCreate:e=>{this.upgradeOldSublayerConfig(e)}}):p&&(d=(0,e.jsx)(e.DataSourceComponent,{useDataSource:p,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:e=>{console.error(e)}}));let u=null;if(this.props.config.useMapWidget?c:p){let t=null;this.state.listLoadStatus===rt.Pending&&(t=(0,e.jsx)("div",{className:"jimu-secondary-loading"})),u=(0,e.jsx)("div",{className:`widget-layerlist widget-layerlist_${this.props.id}`},!t&&(0,e.jsx)(tt,{theme:this.props.theme,jimuMapViewId:this.state.jimuMapViewId,layerListRef:this.layerListRef,tableListRef:this.tableListRef,enableSearch:null!==(s=this.props.config.searchLayers)&&void 0!==s&&s,enableBatchOption:null!==(o=this.props.config.layerBatchOptions)&&void 0!==o&&o,isMapWidgetMode:null===(l=this.props.config)||void 0===l?void 0:l.useMapWidget}),(0,e.jsx)("div",{ref:this.layerListContainerRef}),this.props.config.showTables&&(0,e.jsx)(e.React.Fragment,null,null===t&&this.state.tableLoadStatus===rt.Fulfilled&&(0,e.jsx)("div",{className:"table-list-divider d-flex align-items-center"},(0,e.jsx)(w,null),(0,e.jsx)("span",{className:"ml-1"},this.translate("tables"))),null===t&&this.state.tableLoadStatus===rt.Pending&&(0,e.jsx)(i.Loading,{type:i.LoadingType.DotsPrimary}),(0,e.jsx)("div",{ref:this.tableListContainerRef,className:"table-list-wrapper"})),(0,e.jsx)("div",{style:{position:"absolute",opacity:0},ref:this.mapContainerRef},"mapContainer"),(0,e.jsx)("div",{style:{position:"absolute",display:"none"}},d))}else this.destroyLayerList(),u=(0,e.jsx)("div",{className:"widget-layerlist"},(0,e.jsx)(i.WidgetPlaceholder,{icon:n(),name:this.translate("_widgetLabel"),widgetId:this.props.id}));return(0,e.jsx)("div",{css:a(this.props.theme,this.props.config),className:"jimu-widget"},u,(0,e.jsx)(i.Popper,{style:{minWidth:"170px"},keepMount:!0,reference:this.optionBtnRef.current,open:this.state.isActionListPopperOpen,toggle:this.onToggleActionsPopper},this.state.actionListDOM),this.state.nativeActionPopper)}}st.mapExtraStateProps=(t,i)=>({isDesignMode:t.appRuntimeInfo.appMode===e.AppMode.Design}),st.versionManager=p;const nt=st;function ot(e){o.p=e}})(),l})())}}}));