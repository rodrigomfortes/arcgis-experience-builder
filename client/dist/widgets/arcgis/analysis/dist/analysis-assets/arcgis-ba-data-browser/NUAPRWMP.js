/*! For license information please see NUAPRWMP.js.LICENSE.txt */
import{b as Rn,c as Ri}from"./EU36O4N4.js";import{a as Fn,h as On}from"./462ZA43P.js";import{j as Bi,l as Dn,n as Bn}from"./N22VDD26.js";export default $arcgis.t((([{getLocale:e,setLocale:t},i,{has:r,format:o,parse:s,on:a,generateUUID:n},l,d,c,h,{subclass:p,property:u},g,m])=>{var{entries:b,setPrototypeOf:_,isFrozen:f,getPrototypeOf:v,getOwnPropertyDescriptor:y}=Object,{freeze:w,seal:x,create:C}=Object,{apply:S,construct:N}=typeof Reflect<"u"&&Reflect;w||(w=function(e){return e}),x||(x=function(e){return e}),S||(S=function(e,t,i){return e.apply(t,i)}),N||(N=function(e,t){return new e(...t)});var E,k=H(Array.prototype.forEach),I=H(Array.prototype.lastIndexOf),T=H(Array.prototype.pop),M=H(Array.prototype.push),G=H(Array.prototype.splice),A=H(String.prototype.toLowerCase),P=H(String.prototype.toString),L=H(String.prototype.match),D=H(String.prototype.replace),B=H(String.prototype.indexOf),R=H(String.prototype.trim),F=H(Object.prototype.hasOwnProperty),V=H(RegExp.prototype.test),O=(E=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return N(E,t)});function H(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return S(e,t,r)}}function z(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;_&&_(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){let e=i(o);e!==o&&(f(t)||(t[r]=e),o=e)}e[o]=!0}return e}function W(e){for(let t=0;t<e.length;t++)F(e,t)||(e[t]=null);return e}function U(e){let t=C(null);for(let[i,r]of b(e))F(e,i)&&(Array.isArray(r)?t[i]=W(r):r&&"object"==typeof r&&r.constructor===Object?t[i]=U(r):t[i]=r);return t}function j(e,t){for(;null!==e;){let i=y(e,t);if(i){if(i.get)return H(i.get);if("function"==typeof i.value)return H(i.value)}e=v(e)}return function(){return null}}var q=w(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$=w(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Q=w(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Y=w(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X=w(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),J=w(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),K=w(["#text"]),Z=w(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ee=w(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),te=w(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ie=w(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),re=x(/\{\{[\w\W]*|[\w\W]*\}\}/gm),oe=x(/<%[\w\W]*|[\w\W]*%>/gm),se=x(/\$\{[\w\W]*/gm),ae=x(/^data-[\-\w.\u00B7-\uFFFF]+$/),ne=x(/^aria-[\-\w]+$/),le=x(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),de=x(/^(?:\w+script|data):/i),ce=x(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),he=x(/^html$/i),pe=x(/^[a-z][.\w]*(-[.\w]+)+$/i),ue=Object.freeze({__proto__:null,ARIA_ATTR:ne,ATTR_WHITESPACE:ce,CUSTOM_ELEMENT:pe,DATA_ATTR:ae,DOCTYPE_NAME:he,ERB_EXPR:oe,IS_ALLOWED_URI:le,IS_SCRIPT_OR_DATA:de,MUSTACHE_EXPR:re,TMPLIT_EXPR:se}),ge=1,me=3,be=7,_e=8,fe=9;var ve=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,i=t=>e(t);if(i.version="3.2.4",i.removed=[],!t||!t.document||t.document.nodeType!==fe||!t.Element)return i.isSupported=!1,i;let{document:r}=t,o=r,s=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:n,Node:l,Element:d,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:u,trustedTypes:g}=t,m=d.prototype,_=j(m,"cloneNode"),f=j(m,"remove"),v=j(m,"nextSibling"),y=j(m,"childNodes"),x=j(m,"parentNode");if("function"==typeof n){let e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let S,N="",{implementation:E,createNodeIterator:H,createDocumentFragment:W,getElementsByTagName:re}=r,{importNode:oe}=o,se={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported="function"==typeof b&&"function"==typeof x&&E&&void 0!==E.createHTMLDocument;let{MUSTACHE_EXPR:ae,ERB_EXPR:ne,TMPLIT_EXPR:de,DATA_ATTR:ce,ARIA_ATTR:pe,IS_SCRIPT_OR_DATA:ve,ATTR_WHITESPACE:ye,CUSTOM_ELEMENT:we}=ue,{IS_ALLOWED_URI:xe}=ue,Ce=null,Se=z({},[...q,...$,...Q,...X,...K]),Ne=null,Ee=z({},[...Z,...ee,...te,...ie]),ke=Object.seal(C(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Te=null,Me=!0,Ge=!0,Ae=!1,Pe=!0,Le=!1,De=!0,Be=!1,Re=!1,Fe=!1,Ve=!1,Oe=!1,He=!1,ze=!0,We=!1,Ue=!0,je=!1,qe={},$e=null,Qe=z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ye=null,Xe=z({},["audio","video","img","source","image","track"]),Je=null,Ke=z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ze="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",it=tt,rt=!1,ot=null,st=z({},[Ze,et,tt],P),at=z({},["mi","mo","mn","ms","mtext"]),nt=z({},["annotation-xml"]),lt=z({},["title","style","font","a","script"]),dt=null,ct=["application/xhtml+xml","text/html"],ht=null,pt=null,ut=r.createElement("form"),gt=function(e){return e instanceof RegExp||e instanceof Function},mt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pt||pt!==e){if((!e||"object"!=typeof e)&&(e={}),e=U(e),dt=-1===ct.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ht="application/xhtml+xml"===dt?P:A,Ce=F(e,"ALLOWED_TAGS")?z({},e.ALLOWED_TAGS,ht):Se,Ne=F(e,"ALLOWED_ATTR")?z({},e.ALLOWED_ATTR,ht):Ee,ot=F(e,"ALLOWED_NAMESPACES")?z({},e.ALLOWED_NAMESPACES,P):st,Je=F(e,"ADD_URI_SAFE_ATTR")?z(U(Ke),e.ADD_URI_SAFE_ATTR,ht):Ke,Ye=F(e,"ADD_DATA_URI_TAGS")?z(U(Xe),e.ADD_DATA_URI_TAGS,ht):Xe,$e=F(e,"FORBID_CONTENTS")?z({},e.FORBID_CONTENTS,ht):Qe,Ie=F(e,"FORBID_TAGS")?z({},e.FORBID_TAGS,ht):{},Te=F(e,"FORBID_ATTR")?z({},e.FORBID_ATTR,ht):{},qe=!!F(e,"USE_PROFILES")&&e.USE_PROFILES,Me=!1!==e.ALLOW_ARIA_ATTR,Ge=!1!==e.ALLOW_DATA_ATTR,Ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Le=e.SAFE_FOR_TEMPLATES||!1,De=!1!==e.SAFE_FOR_XML,Be=e.WHOLE_DOCUMENT||!1,Ve=e.RETURN_DOM||!1,Oe=e.RETURN_DOM_FRAGMENT||!1,He=e.RETURN_TRUSTED_TYPE||!1,Fe=e.FORCE_BODY||!1,ze=!1!==e.SANITIZE_DOM,We=e.SANITIZE_NAMED_PROPS||!1,Ue=!1!==e.KEEP_CONTENT,je=e.IN_PLACE||!1,xe=e.ALLOWED_URI_REGEXP||le,it=e.NAMESPACE||tt,at=e.MATHML_TEXT_INTEGRATION_POINTS||at,nt=e.HTML_INTEGRATION_POINTS||nt,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(Ge=!1),Oe&&(Ve=!0),qe&&(Ce=z({},K),Ne=[],!0===qe.html&&(z(Ce,q),z(Ne,Z)),!0===qe.svg&&(z(Ce,$),z(Ne,ee),z(Ne,ie)),!0===qe.svgFilters&&(z(Ce,Q),z(Ne,ee),z(Ne,ie)),!0===qe.mathMl&&(z(Ce,X),z(Ne,te),z(Ne,ie))),e.ADD_TAGS&&(Ce===Se&&(Ce=U(Ce)),z(Ce,e.ADD_TAGS,ht)),e.ADD_ATTR&&(Ne===Ee&&(Ne=U(Ne)),z(Ne,e.ADD_ATTR,ht)),e.ADD_URI_SAFE_ATTR&&z(Je,e.ADD_URI_SAFE_ATTR,ht),e.FORBID_CONTENTS&&($e===Qe&&($e=U($e)),z($e,e.FORBID_CONTENTS,ht)),Ue&&(Ce["#text"]=!0),Be&&z(Ce,["html","head","body"]),Ce.table&&(z(Ce,["tbody"]),delete Ie.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw O('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw O('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=e.TRUSTED_TYPES_POLICY,N=S.createHTML("")}else void 0===S&&(S=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null,r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));let o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(g,s)),null!==S&&"string"==typeof N&&(N=S.createHTML(""));w&&w(e),pt=e}},bt=z({},[...$,...Q,...Y]),_t=z({},[...X,...J]),ft=function(e){M(i.removed,{element:e});try{x(e).removeChild(e)}catch{f(e)}},vt=function(e,t){try{M(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch{M(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Ve||Oe)try{ft(t)}catch{}else try{t.setAttribute(e,"")}catch{}},yt=function(e){let t=null,i=null;if(Fe)e="<remove></remove>"+e;else{let t=L(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===dt&&it===tt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let o=S?S.createHTML(e):e;if(it===tt)try{t=(new u).parseFromString(o,dt)}catch{}if(!t||!t.documentElement){t=E.createDocument(it,"template",null);try{t.documentElement.innerHTML=rt?N:o}catch{}}let s=t.body||t.documentElement;return e&&i&&s.insertBefore(r.createTextNode(i),s.childNodes[0]||null),it===tt?re.call(t,Be?"html":"body")[0]:Be?t.documentElement:s},wt=function(e){return H.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},xt=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Ct=function(e){return"function"==typeof l&&e instanceof l};function St(e,t,r){k(e,(e=>{e.call(i,t,r,pt)}))}let Nt=function(e){let t=null;if(St(se.beforeSanitizeElements,e,null),xt(e))return ft(e),!0;let r=ht(e.nodeName);if(St(se.uponSanitizeElement,e,{tagName:r,allowedTags:Ce}),e.hasChildNodes()&&!Ct(e.firstElementChild)&&V(/<[/\w]/g,e.innerHTML)&&V(/<[/\w]/g,e.textContent)||e.nodeType===be||De&&e.nodeType===_e&&V(/<[/\w]/g,e.data))return ft(e),!0;if(!Ce[r]||Ie[r]){if(!Ie[r]&&kt(r)&&(ke.tagNameCheck instanceof RegExp&&V(ke.tagNameCheck,r)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r)))return!1;if(Ue&&!$e[r]){let t=x(e)||e.parentNode,i=y(e)||e.childNodes;if(i&&t){for(let r=i.length-1;r>=0;--r){let o=_(i[r],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,v(e))}}}return ft(e),!0}return e instanceof d&&!function(e){let t=x(e);(!t||!t.tagName)&&(t={namespaceURI:it,tagName:"template"});let i=A(e.tagName),r=A(t.tagName);return!!ot[e.namespaceURI]&&(e.namespaceURI===et?t.namespaceURI===tt?"svg"===i:t.namespaceURI===Ze?"svg"===i&&("annotation-xml"===r||at[r]):!!bt[i]:e.namespaceURI===Ze?t.namespaceURI===tt?"math"===i:t.namespaceURI===et?"math"===i&&nt[r]:!!_t[i]:e.namespaceURI===tt?!(t.namespaceURI===et&&!nt[r]||t.namespaceURI===Ze&&!at[r])&&!_t[i]&&(lt[i]||!bt[i]):!("application/xhtml+xml"!==dt||!ot[e.namespaceURI]))}(e)||("noscript"===r||"noembed"===r||"noframes"===r)&&V(/<\/no(script|embed|frames)/i,e.innerHTML)?(ft(e),!0):(Le&&e.nodeType===me&&(t=e.textContent,k([ae,ne,de],(e=>{t=D(t,e," ")})),e.textContent!==t&&(M(i.removed,{element:e.cloneNode()}),e.textContent=t)),St(se.afterSanitizeElements,e,null),!1)},Et=function(e,t,i){if(ze&&("id"===t||"name"===t)&&(i in r||i in ut))return!1;if((!Ge||Te[t]||!V(ce,t))&&(!Me||!V(pe,t)))if(!Ne[t]||Te[t]){if(!(kt(e)&&(ke.tagNameCheck instanceof RegExp&&V(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&V(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&V(ke.tagNameCheck,i)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(i))))return!1}else if(!Je[t]&&!V(xe,D(i,ye,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==B(i,"data:")||!Ye[e])&&(!Ae||V(ve,D(i,ye,"")))&&i)return!1;return!0},kt=function(e){return"annotation-xml"!==e&&L(e,we)},It=function(e){St(se.beforeSanitizeAttributes,e,null);let{attributes:t}=e;if(!t||xt(e))return;let r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne,forceKeepAttr:void 0},o=t.length;for(;o--;){let s=t[o],{name:a,namespaceURI:n,value:l}=s,d=ht(a),c="value"===a?l:R(l);if(r.attrName=d,r.attrValue=c,r.keepAttr=!0,r.forceKeepAttr=void 0,St(se.uponSanitizeAttribute,e,r),c=r.attrValue,We&&("id"===d||"name"===d)&&(vt(a,e),c="user-content-"+c),De&&V(/((--!?|])>)|<\/(style|title)/i,c)){vt(a,e);continue}if(r.forceKeepAttr||(vt(a,e),!r.keepAttr))continue;if(!Pe&&V(/\/>/i,c)){vt(a,e);continue}Le&&k([ae,ne,de],(e=>{c=D(c,e," ")}));let h=ht(e.nodeName);if(Et(h,d,c)){if(S&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!n)switch(g.getAttributeType(h,d)){case"TrustedHTML":c=S.createHTML(c);break;case"TrustedScriptURL":c=S.createScriptURL(c)}try{n?e.setAttributeNS(n,a,c):e.setAttribute(a,c),xt(e)?ft(e):T(i.removed)}catch{}}}St(se.afterSanitizeAttributes,e,null)},Tt=function e(t){let i=null,r=wt(t);for(St(se.beforeSanitizeShadowDOM,t,null);i=r.nextNode();)St(se.uponSanitizeShadowNode,i,null),Nt(i),It(i),i.content instanceof a&&e(i.content);St(se.afterSanitizeShadowDOM,t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,n=null,d=null;if(rt=!e,rt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ct(e)){if("function"!=typeof e.toString)throw O("toString is not a function");if("string"!=typeof(e=e.toString()))throw O("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Re||mt(t),i.removed=[],"string"==typeof e&&(je=!1),je){if(e.nodeName){let t=ht(e.nodeName);if(!Ce[t]||Ie[t])throw O("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=yt("\x3c!----\x3e"),s=r.ownerDocument.importNode(e,!0),s.nodeType===ge&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Ve&&!Le&&!Be&&-1===e.indexOf("<"))return S&&He?S.createHTML(e):e;if(r=yt(e),!r)return Ve?null:He?N:""}r&&Fe&&ft(r.firstChild);let c=wt(je?e:r);for(;n=c.nextNode();)Nt(n),It(n),n.content instanceof a&&Tt(n.content);if(je)return e;if(Ve){if(Oe)for(d=W.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return(Ne.shadowroot||Ne.shadowrootmode)&&(d=oe.call(o,d,!0)),d}let h=Be?r.outerHTML:r.innerHTML;return Be&&Ce["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&V(he,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),Le&&k([ae,ne,de],(e=>{h=D(h,e," ")})),S&&He?S.createHTML(h):h},i.setConfig=function(){mt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Re=!0},i.clearConfig=function(){pt=null,Re=!1},i.isValidAttribute=function(e,t,i){pt||mt({});let r=ht(e),o=ht(t);return Et(r,o,i)},i.addHook=function(e,t){"function"==typeof t&&M(se[e],t)},i.removeHook=function(e,t){if(void 0!==t){let i=I(se[e],t);return-1===i?void 0:G(se[e],i,1)[0]}return T(se[e])},i.removeHooks=function(e){se[e]=[]},i.removeAllHooks=function(){se={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i}(),ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0;function we(e){return"worker"===e?!0===ye.isWorker:!!r(e)||!we("worker")&&("report-player-dist-build"===e&&(typeof REPORT_PLAYER_BUILD<"u"&&"report-player-dist-build"===REPORT_PLAYER_BUILD))}function xe(e){let t=e instanceof ArrayBuffer?new Uint8Array(e):e,i=t.length,r=new Array(i);for(let e=0;e<i;e++)r[e]=String.fromCharCode(t[e]);return r.join("")}function Ce(e){let t=function(e){switch(Se(e)){case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"svg":return"image/svg+xml";case"tif":case"tiff":return"image/tiff";case"bmp":return"image/bmp";default:return null}}(e);if(t)return t;switch(Se(e)){case"json":case"sdcx":return"application/json";case"txt":return"text/plain";case"xml":return"text/xml";default:return null}}function Se(e){let t=e.lastIndexOf(".")+1;return t?e.substr(t).toLowerCase():null}function Ne(e){return e&&"function"==typeof e.then}function Ee(){let e,t=!1,i=new Promise(((i,r)=>{e={promise:null,resolve:e=>{t=!0,i(e)},reject:e=>{t=!0,r(e)},isFulfilled:()=>t}}));return e.promise=i,e}function ke(e){return e instanceof Promise?e:Promise.resolve(e)}function Ie(e){let t={_isImmediatePromise:!0,_immediateResult:e,then:(t,i)=>{if(!Te(e))return ke(e).then(t,i);let r=Me(e),o="function"==typeof t?t(r):r;return Te(o)?Ie(Me(o)):ke(o)},catch:i=>Te(e)?t:ke(e).catch(i),finally:t=>ke(e).finally(t)};return t}function Te(e){return!Ne(e)||!!e._isImmediatePromise&&Te(e._immediateResult)}function Me(e){return Ne(e)?Me(e._immediateResult):e}function Ge(e,t){if(!ye.XMLHttpRequest)return function(e){for(;e.includes("../");)e=e.replace(/\.\.\//g,"");e="./"+e;let t=Ee(),i=globalThis.fs;return ye.jestTesting&&(e=e.replace(/\/http:\/\/localhost/,""),e="./src/"+e.substring(2)),i.readFile(e,"utf8",((e,i)=>{e?console.log("Error: "+e):t.resolve(i)})),t.promise}(e);let i=Ee();return setTimeout((()=>{let t=new XMLHttpRequest;t.onreadystatechange=()=>{4===t.readyState?(i?.resolve(t.responseText),i=null):404===t.status&&(i?.reject(new Error(`File not found: ${e}`)),i=null)},t.onerror=e=>{i?.reject(e),i=null},t.open("GET",e,!0),t.send(null)})),i.promise}function Ae(e,t,i=!1){if(null==t||null==e||Array.isArray(t)!==Array.isArray(e))return e;function r(r){let o=t[r],s=e[r],a=o&&"object"==typeof o;void 0!==o&&(s&&"object"==typeof s&&a?Ae(s,o,i):(i||void 0===s)&&(a?(e[r]=Array.isArray(o)?[]:{},Ae(e[r],o,i)):e[r]=t[r]))}if(Array.isArray(t))t.forEach(((e,t)=>{r(t)}));else if("object"==typeof t)for(let e in t)r(e);return e}Promise.allSettled||(Promise.allSettled=e=>{let t=e.map((e=>e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e})))));return Promise.all(t)});var Pe=/\$\{.+?\}/g,Le=/^\$\{|\}$/g;function De(e,t,i,r){return e.replace(Pe,(e=>{let i,r=e.replace(Le,"");return i=t[r],i+""}))}try{!!ye.parent?.window?.Object.prototype}catch{0}function Be(e){(e=e||{}).presicion="number"==typeof e.presicion?e.presicion:3;let t,i=Date.now(),r=Date.now(),o=[],s=[],a=[],n={presicion:e.presicion,messages:o,messageInfos:s,reset:()=>{r=Date.now()},log:t=>{let a={message:t,deltaTime:Date.now()-r,totalDeltaTime:Date.now()-i};o.push(function({message:e,deltaTime:t,totalDeltaTime:i,options:r}){let o=ye.workerId,s=(we("worker")?"Worker #"+o:"Main")+": "+(r.prefix||""),a=e=>(e/(r.showMilliseconds?1:1e3)).toFixed(r.presicion),n=a(t),l=a(i),d=`%c ${s}[${n+(r.showTotalDelta?`/${l}`:"")} ${r.showMilliseconds?"ms":"s"}]: `+e;return console.log(d,`color:${r.color||"#9400D3"}`),d}({...a,options:e})),s.push(a),n.reset()},startInterval:(e,i)=>{if(t)throw new Error(`Complete interval ${t.message} before starting new one ${e}!`);let r,o={message:e,type:i,startTime:Date.now(),endTime:null,startInterval:(e,t)=>(r=r||Be(),r.startInterval(e,t)),toJSON:()=>({message:e,type:i,startTime:o.startTime,endTime:o.endTime,logger:r?.toJSON()})};return a.push(o),t=o,{remove:()=>{t.endTime=Date.now(),t=null}}},getCurrentInterval:()=>t,toJSON:()=>({creationTime:i,messageInfos:s.slice(),messages:o.slice(),intervalInfos:a.map((e=>e.toJSON()))})};return n}new class{constructor(){this.reset()}reset(){this._logger=Be({showTotalDelta:!0}),this._workerLoggers=[],this._workerTimePointInfos=[]}log(e){this._logger.log(e)}logWorkerInvokation(e){this._workerTimePointInfos.push({type:"invoke",workerId:e,time:Date.now()})}startInterval(e,t){return this._logger.startInterval(e,t)}getCurrentInterval(){return this._logger.getCurrentInterval()}toJSON(){return{workerId:we("worker")?+ye.workerId:-1,logger:this._logger.toJSON(),workerTimePointInfos:this._workerTimePointInfos.slice()}}toChartData(){return{main:this.toJSON(),workers:this._workerLoggers,workerTimePointInfos:this._workerTimePointInfos}}addWorkerProfilerJSON(e){this._workerLoggers.push(e)}logWorkerRun(e){this._workerTimePointInfos.push({type:"run",workerId:e,time:Date.now()})}logWorkerRequestMain(e,t,i){this._workerTimePointInfos.push({type:"request-main",workerId:e,time:Date.now(),processId:t,methodName:i})}logWorkerResponseMain(e,t){this._workerTimePointInfos.push({type:"response-main",workerId:e,time:Date.now(),processId:t})}};var Re={80:"443",8080:"8443"},Fe=/^(http:\/\/|https:\/\/)/i;function Ve(e){let t=e.indexOf("?");if(t>=0){let i=e.substr(t+1);if(Fe.test(i)){let e=i.indexOf("?");t=e>=0?t+1+e:-1}}return t}function Oe(e,t,i){return function(e,t){return e+(Ve(e)<0?"?":"&")+t}(e,(t=encodeURIComponent(t))+"="+(i=encodeURIComponent(i)))}var He,ze=/file:\/\/\w:\//;function We(e,t){let i,r=e?.match(ze)?.[0];r&&(e=e.replace(r,i="https://temp.com/"));let o=()=>(i&&(e=e.replace(i,r)),e);if("number"==typeof t&&(t+=""),t){if(/^(http:\/\/|https:\/\/)/i.test(t)||!e)return t;let i;if(t.startsWith("./")&&(t=t.slice(2)),"."===t&&(t=""),t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1),i=!0),!t)return o();let r=h.urlToObject(e);if(e=function(e){let t=Ve(e);return t<0?e:e.substr(0,t)}(e),r.hash){let t=e.indexOf("#");t>0&&(e=e.slice(0,t))}e.endsWith("/")&&(e=e.slice(0,-1));let s=e.length-t.length;s>=0&&"/"===e.charAt(s-1)&&e.slice(s).toLowerCase()===t.toLowerCase()&&(e=e.slice(0,s-1));let a=t.split("/"),n=e.split("/");a.forEach((e=>".."===e?n.pop():n.push(e))),e=n.join("/"),i&&!r.query&&(e+="/");for(let t in r.query)e=Oe(e,t,r.query[t])}return o()}var Ue=Ee();var je,qe,$e,Qe={},Ye={},Xe=["en","de","es","fr","ja","pt"],Je=["en","ar","bg","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Ke={pt:"pt-BR"};function Ze(e){let t=Qe[je]?.[e];if(!t)throw new Error("Messages are not loaded.");return t}function et(t){let i="DataBrowser"===t?Je:Xe,r=i[0],o=e(),s=o.substring(0,2),a=o.substring(3,5).toLowerCase();if(i.includes(o)||(o=o.length>2?i.includes(s)?s:i.includes(a)?a:r:r),je=o,Ye[o])return Ye[o];let n=[];if(!Qe[o]){let e=Qe[o]={},t=function(){if(we("report-player-dist-build"))return{infographics:"scripts/t9n/infographics",ReportPlayer:"scripts/t9n/ReportPlayer",widgets:"scripts/t9n/widgets",utils:"scripts/t9n/utils",Legend:"scripts/t9n/Legend"};let e={widgets:Ri("./assets/arcgis-geoenrichment-databrowser/geoenrichment/t9n/widgets"),utils:Ri("./assets/arcgis-geoenrichment-databrowser/geoenrichment/t9n/utils")};return e.DataBrowserNew=Ri("./assets/arcgis-geoenrichment-databrowser/geoenrichment/t9n/DataBrowserNew"),e}();for(let i in t){let s=window.location.href,a=new URL(s).origin+new URL(s).pathname.substring(0,new URL(s).pathname.lastIndexOf("/")+1),l=new URL(`${t[i]}/${i}_${Ke[o]||o}.json`,a).href,d=new URL(`${t[i]}/${i}_${r}.json`,a).href;n.push(tt(l).then((t=>(e[i]=t,o!==r?ke(Qe[r]&&Qe[r][i]||tt(d)).then((t=>{Ae(e[i],t)})):null))))}}return Ye[o]=Promise.all(n).then((()=>{}))}function tt(e){return ye.XMLHttpRequest?Ue.promise.then((()=>Ge(function(e){return We(He,e)}(e)).then((e=>JSON.parse(e))).catch((()=>({}))))):Promise.resolve({})}function it(){return qe=qe||(ye.navigator?.language||"en-us").toLowerCase()}function rt(){return $e=$e||it()}var ot=class{constructor(e){this._initWithLevels(e.levels)}_initWithLevels(e){this._levels=e||[],this._levelsCache={},this._levels.forEach((e=>{e.description=void 0,this._levelsCache[e.id.toUpperCase()]=e,e.adminLevel&&(this._levelsCache[e.adminLevel.toUpperCase()]=e)}))}getLevels(){return this._levels.slice()}getLevel(e){return this._levelsCache[e?.toUpperCase()]}getLevelPluralName(e){let t=this.getLevel(e);return t?t.pluralName||t.name:null}getLevelSingleName(e){let t=this.getLevel(e);return t?t.singularName||t.name:null}toJSON(){return{levels:this._levels}}},st=new class{getCurrentCountry(){return this._currentCountry}getCountryID(){return this._currentCountry?.id}getCurrencySymbol(){return this._currentCountry?.currencySymbol||"$"}getCurrencyFormat(){if(this._currentCountry?.currencyFormat)return this._currentCountry.currencyFormat;{let e=this.getCurrencySymbol();return`${e}0;-${e}0`}}setCountry(e,t){this._currentCountry=e,e?t&&(this._hierarchyID=t):this._hierarchyID=null}getSingleUnits(){return this._singleUnits}getPluralUnits(){return this._pluralUnits}setSingleAndPluralUnits(e,t){this._singleUnits=e,this._pluralUnits=t}getHierarchyID(){return this._hierarchyID}getGeographiesModel(){return this._currentGeographiesModel}setGeographiesModel(e){this._currentGeographiesModel=e}toJSON(){return{country:{id:this.getCountryID(),currencySymbol:this.getCurrencySymbol(),currencyFormat:this.getCurrencyFormat()},hierarchy:this._hierarchyID,geographiesModel:this._currentGeographiesModel?.toJSON()}}fromJSON(e){e&&(this._currentCountry=e.country,this._hierarchyID=e.hierarchy,this._currentGeographiesModel=e.geographiesModel&&new ot(e.geographiesModel))}},at="https://geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer";function nt(e,t){let i=e.indexOf(t);return-1!==i&&e.splice(i,1),-1!==i}function lt(e,t){if(null==e)return[];void 0===t&&(t=",");let i="string"==typeof e?e.split(t):e.slice();for(let e=0,t=i.length;e<t;e++){let t=i[e];t&&(i[e]=t.trim())}return i}function dt(e,t,i){let r=function(e){return"function"==typeof e?e:e?t=>null==t?null:t[e]+"":e=>e+""}(t),o={};if(e)for(let t of e){o[r(t)]=i?i(t):t}return o}function ct(e,t){let i=e.split("-");i.length<2&&"+"===e.charAt(e.length-1)&&(i=[e.slice(0,e.length-1)],t&&(i[1]=1/0));let r=+i[0],o=i.length<2?r:+i[1];return isNaN(r)||isNaN(o)||r>o?null:{min:r,max:o}}function ht(e){let t=e?.match(/^(customSource|layersSource)\.(.+)$/);return t?{sourceId:t[1],value:t[2]}:null}function pt(e){return Ze("utils").variables[e]}function ut(e){return Ze("utils").variables[e]||e}function gt(e){let t=!(!e||e.isWebMap||e.isChartAttribute||e.isDataLayerAttribute||e.isSiteAttribute||e.customDataCollection||e.isCustom||e.isThematic||e.isHidden);return t&&e.isAdditional?e.isDCMappable:t}function mt(e){let t,i,r=e.indexOf(".")+1;return r&&(t=e,i=e.slice(0,r-1),e=e.slice(r)),{id:e,fullName:t,dataCollectionId:i}}var bt="n/",_t="a/",ft="i/",vt="p/",yt="r/",wt=bt,xt=vt,Ct=_t,St=ft,Nt=yt,Et=!1,kt=!1,It={};function Tt(e,t){return e?function(e,t){let i=function(e,t){let i=wt;return e.percentBase&&(i+=xt),e.averageBase&&(i+=Ct),e.indexBase&&(i+=St),t&&(i+=Nt),i}(e,t),r=It[i];if(r){r={...r},r.ids=r.names.map((t=>t+e.fullName));let t=e.variableType||"count",i=r.names.join("")+t,o=Mt[i];o||(o=r.names.map((e=>function(e,t){let i;switch(t){case _t:i="average";break;case ft:i="index";break;case vt:i="percent";break;case yt:i="reliability";break;default:i=e}return ut(i)}(t,e))),Mt[i]=o),r.labels=o}return r||null}(e,At(e,!!t)):null}It[bt+vt]={labels:null,names:[bt,vt],ids:null},It[bt+_t]={labels:null,names:[bt,_t],ids:null},It[bt+ft]={labels:null,names:[bt,ft],ids:null},It[bt+yt]={labels:null,names:[bt,yt],ids:null},It[bt+vt+ft]={labels:null,names:[bt,vt,ft],ids:null},It[bt+_t+ft]={labels:null,names:[bt,_t,ft],ids:null},It[bt+vt+yt]={labels:null,names:[bt,vt,yt],ids:null},It[bt+vt+_t+ft]={labels:null,names:[bt,vt,_t,ft],ids:null};var Mt={};function Gt(){return Et||kt}function At(e,t=!0){return Gt()&&t&&!e.derivative&&"ACS"===e.id.slice(0,3)}function Pt(e,t){switch(e){case ft:return 0;case _t:case vt:case yt:return 2;default:return t}}function Lt(e,t){switch(e){case ft:return"INDEX";case vt:case yt:return"PCT";default:return t}}function Dt(e){switch(e){case Ct:return"_A";case xt:return"_P";case St:return"_I";default:return""}}function Bt(e){if(!e)return e;switch(e.slice(0,2)){case wt:case xt:case Ct:case St:case Nt:return e.slice(2);default:return e}}function Rt(e){let t=e&&(1===e.length?e+"/":e.slice(0,2));switch(t){case xt:case Ct:case St:case Nt:return t;default:return wt}}var Ft=!0;function Vt(e,t){let i;switch(t){case xt:i="%";break;case Ct:i=Ft?Ze("utils").variables.averageShort:"Avg";break;case St:i=Ft?Ze("utils").variables.index:"Index";break;case Nt:i=Ft?Ze("utils").variables.reliability:"Reliability";break;default:return e}return Ft?De(Ze("utils").variables.labelWithType,{label:e,type:i}):`${e} (${i})`}var Ot="OTHER",Ht=null;function zt(e){let t=function(e,t,i,r,s){let a=rt();return t===a&&(t=null),t&&(e=null),e?{separator:e}:(e=o(i,{places:r,locale:(t||a).toLowerCase()}).replace(s,""),{separator:e,isDefault:!t})}(Ht,e,9999,0,/9/g);return t.isDefault&&(Ht=t.separator),t.separator}function Wt(e,t){return"number"!=typeof e?e:parseFloat(e.toFixed(void 0!==t?t:0))}function Ut(e){return 0===e?0:Math.max(0,Math.round(function(e){return Math.log(e)*Math.LOG10E}(3e3/Math.abs(e))))}function jt(e,t){if("number"!=typeof e&&(e=+e),!isFinite(e))return e+"";let i=(t="number"==typeof t?{places:t}:t||{}).places;(null==i||i<0)&&(i=function(e){if(e=+Number(e).toFixed(6),isNaN(e))return-1;let t=e+"",i=t.indexOf(".")+1,r=i?t.length-i:0;if(r<=2)return r;let o=0;if(!+t.slice(0,i-1))for(;"0"===t.charAt(i);)i++,o++,r--;function s(e,o){let s=t.indexOf(e,i);if(s<0)return r;let a=t.charAt(s+e.length);return a&&o.includes(a)?s-i:r}for(let e=r-1;e>=2;e--){let t=Math.min(s("000000000000000".substr(0,e),"01234"),s("999999999999999".substr(0,e),"56789"));if(t!==r){r=t;break}}return r+o}(e),t.maxPlaces&&i>t.maxPlaces&&(i=t.maxPlaces));let r={};i>=0?r.places=i:i=-1,r.locale=(t.locale||rt()).toLowerCase();let s=o(e,r);if(t.noSeparator||"es-es"===r.locale&&e<1e4){let e,t=zt(r.locale);if(t)for(;(e=s.indexOf(t))>=0;)s=s.substr(0,e)+s.substr(e+1)}return t.preserveTrailingZeroes||i<=0||!s?s:function(e,t){let i=e.length,r="";for(;t>0;)if("%"!==e.charAt(i-1)){if("0"!==e.charAt(i-1))break;i--,--t||i--}else r="%",i--;return e.slice(0,i)+r}(s,i)}function qt(e,t){if(t=t||{},!ye.Intl)return jt(e,t);t.locale=t.locale||rt();let i=function(e){let t=$t[e];if(!1===t)return null;if(t)return t;let i=["ar","bs","cs","da","en","el","et","fi","fr","he","hr","hu","id","lv","lt","nl","nb","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-hk","de","it","ca","es"];if(i.includes(e)||i.includes(e.substr(0,2))){let t=t=>{let i=Qt(t,{locale:e}),r=i.match(/(\d|\.|,)+/)[0];return i.replace(r,"")};$t[e]={kilo:t(1e4),mega:t(1e7),giga:t(1e10),tera:t(1e13)}}else $t[e]=!1;return $t[e]}(t.locale);if(!t.unitPrefix||!i||!i[t.unitPrefix])return Qt(e,t);let r="";switch(t.unitPrefix){case"kilo":e/=1e3,r=i.kilo;break;case"mega":e/=1e6,r=i.mega;break;case"giga":e/=1e9,r=i.giga;break;case"tera":e/=1e12,r=i.tera}return jt(e,{locale:t.locale,places:t.places,noSeparator:t.noSeparator,preserveTrailingZeroes:t.preserveTrailingZeroes})+(r?t.unitPrefixSymbol||r:"")}var $t={};function Qt(e,t){return new Intl.NumberFormat(t.locale,{notation:"compact",compactDisplay:"short",minimumFractionDigits:t.places,maximumFractionDigits:t.places}).format(e)}function Yt(e,t,i,r){if(""===e)return NaN;if(null==e||"string"!=typeof e&&isNaN(e))return NaN;if(!(e=String(e)).trim())return void 0!==i?i:NaN;let o=s(e,{strict:r,locale:rt().toLowerCase()});return isNaN(o)&&e.trim().length&&(o=Number(e)),isNaN(o)||void 0===t||t<0?o:Wt(o,t)}var Xt,Jt,Kt,Zt=class{setCurrencySymbol(e){this.currencySymbol=e.trim()}setCurrencyFormat(e){this._currencyFormat=e,e&&(this._splittedFormat=e.split(";"),this._currencySymbols=[],this._splittedFormat.forEach((e=>{this._currencySymbols.push(e.replace("0",""))})))}formatValue(e,t,i,r,o,s){return"*"===i||i===Ot?null==e?"":e+"":r?qt(+e,{places:o,preserveTrailingZeroes:!0,locale:this.locale}):jt(+e,{places:t,maxPlaces:10,preserveTrailingZeroes:s,locale:this.locale})}formatValueWithUnits(e,t,i,r,o,s){let a=this.formatValue(e,t,i,r,o,s);return this.formatUnits(a,i)}parse(e,t){return"*"===t||t===Ot?e:Yt(e=this.removeUnits(e))}formatUnits(e,t){switch(t){case"PCT":case"%":return e+"%";case"CURRENCY":case"$":return this._formatWithCurrency(e);default:return e}}_formatWithCurrency(e){if(!this._currencyFormat||!e)return e;let t="-"===e.charAt(0);return t&&(e=e.substr(1)),this._splittedFormat[t?1:0].replace("0",e)}removeUnits(e){if(e.lastIndexOf("%")===e.length-1)e=e.substr(0,e.length-1);else if(this._currencyFormat){e=e.toLowerCase();for(let t=2;t-- >0;){let i=this._currencySymbols[t];if(i&&(i=i.toLowerCase(),-1!==e.lastIndexOf(i))){e=e.replace(i,""),1===t&&(e="-"+e);break}}}return e}};function ei(e){Xt&&e.setCurrencySymbol(Xt),Jt&&e.setCurrencyFormat(Jt)}function ti(e){return"function"==typeof e.toJSON?e.toJSON():e}var ii,ri,oi=class e{constructor(e,t,i){this.contentType="application/octet-stream",this.contentTransferEncoding="binary",this.data=e,t&&(this.contentType=t),i&&(this.contentTransferEncoding=i)}static fromArrayBuffer(t,i){return new e(xe(t),i)}static fromBlob(t,i){return function(e){return new Promise(((t,i)=>{let r=new FileReader;r.onloadend=()=>{r.error?i(r.error):t(r.result)},r.readAsArrayBuffer(e)}))}(t).then((r=>new e(xe(r),i||t.type)))}static getBinarySourceType(t){return"string"==typeof t?"string":t instanceof ArrayBuffer?"array-buffer":t instanceof Blob?"blob":t instanceof e?"file-content":null}static fromFileData(t,i,r){if(r=r||Ce(t),i instanceof ArrayBuffer||i instanceof Uint8Array)i=xe(i);else{let t=e.getContentConversionType(r);if("json"===t&&"object"==typeof i&&(i=JSON.stringify(i)),"string"!=typeof i)throw new Error("Wrong file data.");switch(t){case"base64":i=atob(i);break;case"text":case"json":i=function(e){return xe((new TextEncoder).encode(e))}(i)}}let o=new e(i,r);return o.filename=t,o}static getContentConversionType(e){return e?/^image\//.test(e)?"base64":/^text\//.test(e)?"text":/application\/json/.test(e)?"json":"bin":"bin"}getBase64Data(){return this.data?"base64"===this.contentTransferEncoding?this.data:btoa(this.data):null}toString(){return this.filename||"<unknown>"}},si=new class{request(e,t){return c(e,t)}};function ai(e,t,i){t={...t},t.method||="post",t.query={...t.query},i?t.query.token||=function(e){let t=d.id;return(t&&(e&&t.findCredential(e)||t.credentials[0]))?.token}(e):delete t.query.token;for(let e in t.query){let i=t.query[e];!i||"object"!=typeof i||i instanceof oi||(t.query[e]=JSON.stringify(ti(i)))}return t.responseType||="json","json"===t.responseType&&(t.query.f="json"),t.timeout=3e5,t}function ni(e,t){return function(e,t){return si.request(e,ai(e,t,!1)).then((e=>e.data),(i=>{if(499===i.code||499===i.details?.httpStatus)return si.request(e,ai(e,t,!0)).then((e=>e.data));throw i}))}(We(ii||at,e),t)}var li,di={};function ci(e,t){let i,r=e?.hierarchies.find((e=>(e.default&&(i=e),e.ID===t)));di={country:e,hierarchy:r||i||e?.hierarchies[0]},!ii&&st.setCountry(e,ui()),function(e,t){Et="US"===e,kt="PR"===e&&("census2023"===t||"census2024"===t)}(pi(),ui()),function(e){Ft=e}(hi(gi()?.locales||["en"])),function(e){Jt=e.currencyFormat,Xt=e.currencySymbol,Kt&&ei(Kt)}(e||{currencyFormat:"$0;-$0",currencySymbol:"$"})}function hi(e){return!!e?.includes(it().slice(0,2))}function pi(){return di?.country?.id||null}function ui(){return di?.hierarchy?.ID||null}function gi(){return di?.hierarchy}async function mi(e,t,i){return(await ni(function(e,t,i){let r=pi();if(t){let e=t===r?ui():null;i||=e}else t=r,i=ui();return t?`${e}/${t||"US"}/${i||"census"}`:e}("Geoenrichment/DataCollections",e,t),{query:{suppressNullValues:!0,outFields:"*",returnSimilarity:!!i?.query,...i}})).DataCollections}function bi(e){return e>=0||"next-frame"===e}function _i(e,t){return new Promise(((i,r)=>{let o="function"==typeof e?e:null;"next-frame"!==(t=bi(e)?e:t)?setTimeout((()=>{ke(o&&o()).then(i,r)}),t||0):requestAnimationFrame((()=>{ke(o&&o()).then(i,r)}))}))}function fi(){if(li)return li;let e={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,safari:!1,macos:!1,windows:!1,electron:!1,pixelRatio:1,os:null,osVersion:"",webView:!1,worker:!1};try{if(we("worker")||void 0===self.window)return e.desktop=!0,e.worker=!0,li=e;let t=window,i=t.navigator.platform,r=t.navigator.userAgent,o=t.screen.width,s=t.screen.height,a=r.match(/(Android);?[\s\/]+([\d.]+)?/),n=r.match(/(iPad).*OS\s([\d_]+)/),l=r.match(/(iPod)(.*OS\s([\d_]+))?/),d=!n&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),c=r.includes("MSIE ")||r.includes("Trident/"),h=r.includes("Edge/"),p=r.includes("Gecko/")&&r.includes("Firefox/"),u="Win32"===i,g=r.toLowerCase().includes("electron"),m="MacIntel"===i;e.safari=m&&!a&&!/chrome/i.test(r)&&/safari/i.test(r);let b=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768"];!n&&m&&yi()&&b.includes(o+"x"+s)&&(n=r.match(/(Version)\/([\d.]+)/),n||(n=[0,1,"13_0_0"]),m=!1),e.ie=c,e.edge=h,e.firefox=p,a&&!u&&(e.os="android",e.osVersion=a[2],e.android=!0,e.androidChrome=r.toLowerCase().includes("chrome")),(n||d||l)&&(e.os="ios",e.ios=!0),d&&!l&&(e.osVersion=d[2].replace(/_/g,"."),e.iphone=!0),n&&(e.osVersion=n[2].replace(/_/g,"."),e.ipad=!0),l&&(e.osVersion=l[3]?l[3].replace(/_/g,"."):null,e.ipod=!0),e.ios&&e.osVersion&&r.includes("Version/")&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=r.toLowerCase().split("version/")[1].split(" ")[0]),e.webView=!(!(d||n||l)||!r.match(/.*AppleWebKit(?!.*Safari)/i)&&!t.navigator.standalone)||t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches,e.desktop=!(e.ios||e.android)||g,e.desktop&&(e.electron=g,e.macos=m,e.windows=u,e.macos?e.os="macos":e.windows?e.os="windows":/Linux/.test(i)&&(e.os="linux")),e.pixelRatio=t.devicePixelRatio||1}catch(t){e.error=String(t)}return li=e}function vi(){return!fi().desktop}function yi(){return"ontouchstart"in document||"onpointerdown"in document&&navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function wi(e,t,i){let r=function(e,t,i){if("string"==typeof t&&t.includes(","))throw new TypeError("Event notation like 'click, mouseup' is not supported.");if(e&&"function"==typeof e.addEventListener){let e=[],r=[];(Array.isArray(t)?t:[t]).forEach((t=>{(Ni[t]?e:r).push(t)}));let o={},s={},a=fi().desktop&&yi();if(e.length){e.forEach((e=>{let t=a?Si[e]:[Ni[e]];if(t.forEach((e=>{o[e]||(o[e]=e)})),a){let e=t[0],i=t[1],r=s[e];r||(r=s[e]={}),r[i]=1}})),r.forEach((e=>{o[e]||(o[e]=e),s[e]&&delete s[e]})),t=[];for(let e in o)t.push(o[e])}if(e.length&&a){let e,r,o=()=>{e&&clearTimeout(e),e=null};return{type:t,listener:t=>{if(t.touches)o(),e=setTimeout(o,500),r=t.type;else if(e){let e=s[t.type];if(e&&e[r])return}i.call(null,t)}}}}return{type:t,listener:i}}(e,t,i);return a(e,r.type,r.listener)}function xi(e,t,i){let r=wi(e,t,(e=>{r.remove(),i.call(null,e)}));return r}var Ci,Si={click:["click","touchend"],press:["mousedown","touchstart"],move:["mousemove","touchmove"],release:["mouseup","touchend"],over:["mouseover","touchstart"],out:["mouseout","touchend"],enter:["mouseenter","touchstart"],leave:["mouseleave","touchend"]},Ni=(()=>{let e={},t=vi()?1:0;for(let i in Si)e[i]=Si[i][t];return e})();function Ei(e){let t=ki(e);return t?{type:e.type,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}:e}function ki(e){let t=e;if(t.touches){if(!t.touches.length)return t.changedTouches[0];let e,i=t.touches[0].identifier;for(let r=0;r<t.changedTouches.length;r++)if(t.changedTouches[r].identifier===i){e=t.changedTouches[r];break}return e||t.touches[0]}return null}function Ii(e){return Array.isArray(e)?e.filter((e=>!!e)):e?e.split(" ").filter((e=>!!e)):[]}function Ti(){return"ltr"===((we("worker")?undefined:document.body.dir)||"ltr").toLowerCase()}Ti(),Ti();var Mi={innerHTML:1,textContent:1,className:1,value:1},Gi={classname:"class"},Ai={class:"className",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent"};function Pi(e,t,i){if("object"==typeof t){for(let i in t)Pi(e,"style"===i?"style":i,t[i]);return e}if(void 0===i)return e;let r=t,o=r.toLowerCase(),s=Ai[o]||r,a=Mi[s];return"style"===s&&"string"!=typeof i?Ui(e,i):a||"boolean"==typeof i?e[s]=i:e.setAttribute(Gi[o]||r,i+""),e}function Li(e,t){e?.classList&&Ii(t).forEach((t=>e.classList.add(t)))}function Di(e,t){e?.classList&&Ii(t).forEach((t=>{e.classList.remove(t)}))}function Fi(e,t,i){i?Li(e,t):Di(e,t)}function Vi(e,t){return!!e?.classList&&e.classList.contains(t)}var Oi={left:!0,top:!0},Hi={cssFloat:1,styleFloat:1,float:1},zi=/margin|padding|width|height|max|min|offset/;function Wi(e,t,i){let r=e.style;return"opacity"===t?r.opacity:function(e,t,i){if(t=t.toLowerCase(),"auto"===i){if("height"===t)return e.offsetHeight;if("width"===t)return e.offsetWidth}return"fontweight"===t?i+""=="700"?"bold":"normal":(t in Oi||(Oi[t]=zi.test(t)),Oi[t]?qi(i):i)}(e,t=Hi[t]?"cssFloat"in r?"cssFloat":"styleFloat":t,ji(e)[t]||r[t])}function Ui(e,t,i){if((t=Hi[t]?"cssFloat"in e.style?"cssFloat":"styleFloat":t)&&"object"==typeof t&&void 0===i)for(let i in t)Ui(e,i,t[i]);else"opacity"===t?e.style.opacity=i+"":e.style[t]=i}function ji(e){return 1===e?.nodeType&&window.getComputedStyle(e)}function qi(e){return parseFloat(e)||0}function $i(e,t){let i=e.getBoundingClientRect(),r={x:i.left,y:i.top,w:i.right-i.left,h:i.bottom-i.top};if(t){let e=vr();r.x+=e.x,r.y+=e.y}return r}function Qi(e,t){let i=Xi(e,ji(e));return{l:e.offsetLeft-i.l,t:e.offsetTop-i.t,w:e.offsetWidth+i.w,h:e.offsetHeight+i.h}}function Yi(e,t,i){let r=t.w,o=t.h,s=ji(e),a=function(e,t){let i=t||ji(e),r=Ki(e,i),o=Zi(e,i);return{l:r.l+o.l,t:r.t+o.t,r:r.r+o.r,b:r.b+o.b,w:r.w+o.w,h:r.h+o.h}}(e,s),n=Xi(e,s);r>=0&&(r=Math.max(r-a.w-n.w,0)),o>=0&&(o=Math.max(o-a.h-n.h,0)),function(e,t,i,r,o,s){s=s||"px";let a=e.style;isNaN(t)||(a.left=t+s),isNaN(i)||(a.top=i+s),r>=0&&(a.width=r+s),o>=0&&(a.height=o+s)}(e,t.l,t.t,r,o)}function Xi(e,t){let i=t||ji(e),r=qi,o=r(i.marginLeft),s=r(i.marginTop),a=r(i.marginRight),n=r(i.marginBottom);return{l:o,t:s,r:a,b:n,w:o+a,h:s+n}}function Ji(e,t){let i,r=ji(e),o=Ki(e,r),s=Zi(e,r),a=e.offsetLeft+o.l+s.l,n=e.offsetTop+o.t+s.t,l=e.clientWidth;return l?i=e.clientHeight:(l=e.offsetWidth-s.w,i=e.offsetHeight-s.h),{l:a,t:n,w:l-o.w,h:i-o.h}}function Ki(e,t){let i=t||ji(e),r=qi,o=r(i.paddingLeft),s=r(i.paddingTop),a=r(i.paddingRight),n=r(i.paddingBottom);return{l:o,t:s,r:a,b:n,w:o+a,h:s+n}}function Zi(e,t){let i=qi,r=t||ji(e),o="none"!==r.borderLeftStyle?i(r.borderLeftWidth):0,s="none"!==r.borderTopStyle?i(r.borderTopWidth):0,a="none"!==r.borderRightStyle?i(r.borderRightWidth):0,n="none"!==r.borderBottomStyle?i(r.borderBottomWidth):0;return{l:o,t:s,r:a,b:n,w:o+a,h:s+n}}function er(e,t,i,r){if(we("worker")){let e=new Error("Can't create DOM elements inside a web worker.");throw console.error(e),console.error(e.stack),e}let o=document.createElement(e);return t&&Pi(o,t),i&&ir(o,i,r),o}function tr(e,t){return wi(e,t||["click","keydown","keyup","release"],(e=>e.stopPropagation())),e}function ir(e,t,i){if("number"==typeof i){let r=t.childNodes;!r.length||r.length<=i?t.appendChild(e):rr(e,r[i<0?0:i])}else switch(i){case"before":rr(e,t);break;case"after":!function(e,t){let i=t.parentNode;i&&(i.lastChild===t?i.appendChild(e):i.insertBefore(e,t.nextSibling))}(e,t);break;case"replace":t.parentNode.replaceChild(e,t);break;case"first":if(t.firstChild){rr(e,t.firstChild);break}case"only":or(t),t.appendChild(e);break;default:t.appendChild(e)}return e}function rr(e,t){let i=t.parentNode;i&&i.insertBefore(e,t)}function or(e){if(e)for(("innerHTML"in e&&(e.innerHTML=""));e.lastChild;)e.removeChild(e.lastChild)}function sr(e){e&&(e.firstChild&&or(e),e.parentNode&&e.parentNode.removeChild(e))}function ar(e,t,i){if(0===e.indexOf("#"))return[document.getElementById(e.substring(1))];let r=[],o=e.split(".").filter((e=>!!e)),s=!e.includes(".")||e.indexOf(".")>0?o.shift().toLowerCase():null;return!s&&!o.length||_r(t||document.body,(e=>{let t=!o.length||o.every((t=>Vi(e,t))),i=!s||e.nodeName.toLowerCase()===s;t&&i&&r.push(e)})),r}function nr(e){return e&&Vi(e,"esriGEHidden")}function lr(e){return cr(e,!0),function(e,t){return pr(e,(e=>{Li(e,t)}))}(e,"esriGEHidden")}function dr(e){return cr(e,!1),function(e,t){return pr(e,(e=>{e&&Di(e,t)}))}(e,"esriGEHidden")}function cr(e,t){pr(e,(e=>{e&&(e.ariaHidden=t?"true":"false")}))}function hr(e,t){return t?dr(e):lr(e)}function pr(e,t){return Array.isArray(e)?e.forEach(t):t(e),e}function ur(e,t){if(!e||!e.children||!t)return-1;for(let i=0;i<e.children.length;i++)if(e.children[i]===t)return i;return-1}function gr(e,t,i){let r=!1,o=e=>{i&&!i(e)||(e.parentNode===t?r=!0:e.parentNode&&o(e.parentNode))};return e&&o(e),r}function mr(e){return gr(e,document.body,(e=>br(e)))}function br(e){return!nr(e)&&"none"!==Wi(e,"display")}function _r(e,t,i){let r=!1;!function e(t,i,o){if(t&&t.children)for(let o=0;o<t.children.length;o++){let s=t.children[o],a=i(s,t);if(!0===a)return void(r=!0);if("skip"!==a&&(e(s,i),r))return}}(e,t)}function fr(){if(!Ci){let e=er("div",null,document.body);e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="9999px",Ci={w:e.offsetWidth-e.clientWidth,h:e.offsetHeight-e.clientHeight},e.remove()}return Ci}function vr(){return{x:window.scrollX||0,y:window.scrollY||0}}var yr=Object.getOwnPropertyDescriptor,wr=class{constructor(){this._emitter=new xr}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};var xr=class{clear(){this._listenersMap?.clear()}emit(e,t){let i=this._listenersMap?.get(e);return!!i&&(i.slice().forEach((e=>{e.call(null,t)})),i.length>0)}on(e,t){if(Array.isArray(e)){return function(e){return function(e){return{remove:()=>{e&&(e(),e=null)}}}((()=>e.forEach((e=>e?.remove()))))}(e.map((e=>this.on(e,t))))}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);let i=this._listenersMap.get(e)||[];return i.push(t),this._listenersMap.set(e,i),{remove:()=>{let i=this._listenersMap?.get(e)||[];i.indexOf(t)>=0&&i.splice(i.indexOf(t),1)}}}once(e,t){let i=this.on(e,(e=>{i.remove(),t.call(null,e)}));return i}hasEventListener(e){let t=this._listenersMap?.get(e);return null!=t&&t.length>0}},Cr=class extends g{constructor(){super(...arguments),this._emitter=new xr}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}get(e){return super._get(e)}set(e,t){return super.set(e,t)}};Cr=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?yr(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Cr);var Sr=Object.getOwnPropertyDescriptor;!we("worker")&&import("./AZUGC4LX.js");var Nr=/>\s+</g;function Er(e){let t=e,i="function"==typeof t._templateString?t._templateString():t._templateString;return t.templateString&&(console.error("Rename 'templateString' to use protected property '_templateString'"),i=t.templateString),i=i.replace(Nr,"><"),i.match(/\$\{.+?\}/g)?.forEach((t=>{let r=t.substring(2,t.length-1).split("."),o=r[0],s=r[1],a=e[o];if(null==a)console["innerTabIndex"===o?"warn":"error"]("Widget doesn't have nls source for pattern: "+t);else{let e=s?a[s]:a;null==e?console.error("Can't find nls value for pattern: "+t):i=i.replace(t,e)}})),function(e,t){if(!e)return null;let i=er("div",{innerHTML:e}).children[0];if(i.remove(),t){let e=(e,i)=>{let r=e.getAttribute("data-attach-point");r&&(t[r]=e,i&&console.error("Reference domNode directly from the widget instead of "+r))};e(i,!0),_r(i,(t=>e(t)))}return i}(i,t)}var kr=class extends Cr{constructor(e,t,i){super(e),this._refNodeBehavior="replace",this._refNode=t,this._refPosition=i}initialize(){this.buildRendering(),this.postCreate()}buildRendering(){if(this.domNode=this._templateString?Er(this):this._refNode&&"replace"===this._refNodeBehavior?this._refNode:er("div"),this.class&&Li(this.domNode,this.class),this._refNode&&this.domNode!==this._refNode){let e=this._refNode.id;ir(this.domNode,this._refNode,"replace"===this._refNodeBehavior?"replace":this._refPosition),e&&"replace"===this._refNodeBehavior&&(this.domNode.id=e)}this._refNode=null,this._refPosition=null}postCreate(){}startup(){!this._started&&this._doStart(),this._started=!0}_doStart(){}placeAt(e,t){return"replace"===t&&!e?.parentElement&&(t="last",console.error("Can't replace reference node. Consider adding without any position specified"),console.log(e)),e&&ir(this.domNode,e,t),this}addHandles(e,t){let i=e;"function"==typeof i.destroy&&(e={remove:()=>i.destroy()}),super.addHandles(e,t)}own(e){this.addHandles(e)}destroy(){this.destroyed||this.domNode&&setTimeout((()=>{this.domNode?.remove(),this.domNode=null}))}};kr=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Sr(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],kr);var Ir=Object.getOwnPropertyDescriptor,Tr=class extends kr{constructor(e){super(e),this._templateString='<calcite-loader class="esriGECalcite"></calcite-loader>'}get scale(){return this.domNode.scale}set scale(e){this._scale=e||"m",this.domNode&&(this.domNode.scale=this._scale)}postCreate(){this.scale=this._scale,this.domNode.style.padding="0"}};Tr=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Ir(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p("Loader")],Tr);var Mr="__waitingDiv";function Gr(e,t,i={}){let r=e;return r&&(r.__progressIndex=r.__progressIndex||0,0===r.__progressIndex&&(r.__progressDfd=Ee(),function(e,t){if(!e||e[Mr])return;if(t=t||{},e!==document.body){let t=Wi(e,"position");"absolute"!==t&&"relative"!==t&&(e.style.position="relative")}let i=t.position,r=e[Mr];r||(r=e[Mr]=er("div",{class:"esriGEFlexRow esriGEProgress"+("bottom-right"===i?" esriGEProgressBottomRight":" esriGEAbsoluteStretched")+(t.progressClass?" "+t.progressClass:"")},e),new Tr({scale:t.indicatorSize}).placeAt(r)),t.backgroundColor&&(r.style.backgroundColor=t.backgroundColor)}(r,{progressClass:i.progressClass,position:i.position,indicatorSize:i.indicatorSize,backgroundColor:i.backgroundColor}),i.onShowProgress?.()),r.__progressIndex++,Promise.resolve(t).finally((()=>{r.__progressIndex=Math.max(0,--r.__progressIndex),0===r.__progressIndex&&(r.__progressDfd&&r.__progressDfd.resolve(),delete r.__progressDfd,function(e){!e||!e[Mr]||(sr(e[Mr]),delete e[Mr])}(r),i.onRemoveProgress?.())}))),t}async function Ar(e,t,i){await async function(e){if("function"==typeof e.componentOnReady)return void await e.componentOnReady();let t=()=>!!e.shadowRoot?.childElementCount;if(t())return;let i=Ee(),r=setInterval((()=>{t()&&i.resolve()})),o=setTimeout((()=>i.resolve()),500);return i.promise.finally((()=>{clearInterval(r),clearTimeout(o)})),i.promise}(e);let r=e.shadowRoot;return r?t?function(e,t,i,r){let o=t?.frameLimit||100;return new Promise(((s,a)=>{let n=()=>{let l=e();l?s(l):r&&r()||(o--?requestAnimationFrame(n):i||(a(new Error("Frame limit is reached, but requested object is not discovered.")),t?console.log(t):console.trace()))};n()}))}((()=>r.querySelector(t)),{rootNode:e,query:t},i?.silent,i?.stopWaitingFlag):r.children[0]:null}function Pr(e,t,i){Ar(e).then((()=>{let r=e.shadowRoot;if(r&&(r.querySelectorAll("style").forEach((e=>e.id===t&&e.remove())),i)){let e=document.createElement("style");e.id=t,e.textContent=i,r.append(e)}}))}function Lr(e,t){let i=function(e){return"light"===e?"calcite-mode-light":"dark"===e?"calcite-mode-dark":""}(t||"light");i&&e.classList.add(i)}try{ve.addHook("afterSanitizeAttributes",(e=>{"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener"))}))}catch{}var Dr={sanitize(e){try{return ve.sanitize(e)}catch{return e}}};function Br(e,t,i){return null==e?"":(""+e).replace(t,(e=>i[e]||""))}var Rr=/&(?![#0-9a-zA-Z]{2,6};)|<|>/g,Fr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};var Vr=/&amp;|&lt;|&gt;|&quot;|&apos;/g,Or={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};var Hr,zr,Wr=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/,Ur=/<.*?>/g;function jr(e,t){if(!e)return"";if(e=function(e){return Br(e,Vr,Or)}((e=String(e)).trim()),Ur.test(e)){let t;do{t=e,e=e.replace(Ur,"")}while(e!==t)}return 0===e.indexOf("<")&&e.includes(">")&&(e=""),e}function qr(e){Hr=e}function $r(){return Hr}function Qr(e,t){if(!(e&&e.parentNode&&e.getBoundingClientRect&&Hr))return!1;t=t||{};let i=function(e,t){if(!e||!Hr)return!1;t=t||{};let i=t.ignorePadding;i&&(e={...e},e.x+=i,e.y+=i,e.w-=2*i,e.h-=2*i);let r=t.event?Ei(t.event):Hr;return e.x<=r.clientX&&e.x+e.w>=r.clientX&&e.y<=r.clientY&&e.y+e.h>=r.clientY}($i(e),{ignorePadding:t.ignorePadding,event:t.event});if(!i&&t.checkAllChildren){let i=!1;return _r(e,(e=>{if(Qr(e,{ignorePadding:t.ignorePadding,event:t.event}))return i=!0,!0})),i}return i}if(!we("worker")&&globalThis.addEventListener){let e=e=>{let t=ki(e);return t&&(t.type=e.type),t||e};wi(document.body,"touchstart",(t=>{qr(e(t))})),wi(document.body,"touchmove",(t=>{qr(e(t))})),vi()||wi(document.body,"mousemove",(t=>{qr(e(t))})),wi(document.body,"mousedown",(()=>{zr||(zr=!0,xi(document.body,["mouseup","click"],(()=>{zr=!1})))}))}var Yr="var(--calcite-color-brand)",Xr=["CALCITE-TAB-TITLE"];function Jr(e,t){let i;return _r(e,(e=>{let t=e,r=Xr.includes(t.nodeName);if((t.setFocus||r)&&function(e){return gr(e,document.body,(e=>br(e)&&"hidden"!==Wi(e,"visibility")))}(e)&&("CALCITE-CHIP"!==t.nodeName||e.closable))return Ar(t).then((()=>{Zr(t)})),i=e,!0})),i}function Kr(e,t,i){Pr(e,"improve-focus-behavior",i?` :host(:focus) ${t} {\n          outline: 2px solid ${Yr} !important;\n        }\n        :host(:focus:focus-visible) ${t} {\n          outline: 2px solid ${Yr} !important;\n        }\n        :host(:focus:not(:focus-visible)) ${t} {\n          outline: none !important;\n        }\n      }`:`${t} { \n        &:focus {\n          outline: 2px solid ${Yr} !important;\n        }\n        &:focus:focus-visible {\n          outline: 2px solid ${Yr} !important;\n        }\n        &:focus:not(:focus-visible) {\n          outline: none !important;\n        }\n      }`)}function Zr(e){e.setFocus?e.setFocus():e.focus?.()}var eo=999;function to(e){let{anchor:t,content:i,autoFocus:r,showOnHover:o,openPopup:s,stopEventsPropagation:a,onBeforeOpen:n,onOpen:l,onBeforeClose:d,onClose:c,isMouseOver:h}=e;t.__removePopover?.();let p,u,g,m=[],b=()=>{delete t.__removePopover,_&&(_.referenceElement=null,_.remove(),_=null,p?.remove(),u?.remove(),m.forEach((e=>e.remove())),m.length=0),v&&(v.destroy(),v=null)},{popover:_,anchor_node:f,temp_anchor:v}=function({anchor:e,placement:t,flipPlacements:i,showArrow:r,closable:o,title:s,headingLevel:a,offsetSkidding:n,offsetDistance:l,closeOnClickOutside:d,disableOpenOnClick:c,zIndex:h,placeTo:p,theme:u,suppressReposition:g,autoFocus:m,transitionDuration:b}){let _,f=e.domNode||e;if(g){_=er("div",null,document.body),_.reposition=()=>{if(!mr(f))return;let e=$i(f),t=5;_.style.cssText=`\n        position:absolute;\n        left:${e.x-t}px;\n        top:${e.y-t}px;\n        width:${e.w+2*t}px;\n        height:${e.h+2*t}px;\n        z-index:1000;\n      `};let e=setInterval((()=>_.reposition()),300);_.destroy=()=>{clearInterval(e),_.remove()}}let v=er("calcite-popover",{class:"esriGECalcitePopover"},"document"===p?document.body:p||f,p?"last":"after");if(u&&Lr(v,u),!v.parentElement)throw new Error("Popup is not placed");v.referenceElement=_||f,v.placement=t||"bottom-start",v.flipPlacements=i||["bottom-start","right-start","top-start","left-start"],"number"==typeof n&&(v.offsetSkidding=n),"number"==typeof l&&(v.offsetDistance=l),v.overlayPositioning="fixed",v.closable=o,v.label=v.heading=s,v.headingLevel=a||2,v.pointerDisabled=!r,v.triggerDisabled=c;let y=e=>e&&"above-dialog"!==e?"above-popover"===e?1e3:e:eo;return v.style.setProperty("--calcite-popover-z-index",y(h).toString()),v.autoClose=!1!==d,v.focusTrapDisabled=!1===m,Pr(v,"popup-util",`.container {\n        border-radius: 0px !important;\n     }\n\n     .calcite-floating-ui-anim {\n        border-radius: 0px !important;\n        /* FIX: by default it's empty, which results in no transition events fired and no popup events available */\n        transition-duration: ${b||1}ms !important;\n     }\n\n     .content {\n        /* The content should not be taller than [window height] - [header height ~ 40px]? - [padding ~ 10px]. */\n        max-height: calc(100vh - ${s?50:10}px);\n        overflow-y: auto;\n     }\n    `),o&&Ar(v).then((()=>{let e=v.shadowRoot.querySelector(".close-button");e&&Kr(e,"button")})),{popover:v,anchor_node:f,temp_anchor:_}}(e),y=e=>{if("string"==typeof e)_.innerHTML=e;else{let t=g=e.domNode||e;if(1!==_.childElementCount||_.firstChild!==t){for(;_.firstChild;)_.firstChild.remove();_.innerHTML="",_.appendChild(t)}}};"function"==typeof i?_.innerHTML="On-demand":y(i);let w,x=()=>{!1!==r&&g&&Jr(g),l?.()},C=(e,t,i)=>{m.push(wi(_,e,(e=>{e.target===e.currentTarget&&t()})))};a&&tr(_,!0===a?["press","release"]:a),C("calcitePopoverBeforeOpen",(()=>{if(v?.reposition(),w=null,"function"==typeof i){let e=i();if(Ne(e)){let t=new Tr({scale:"s"}).domNode;t.style.cssText="width:100px;height:100px;padding:0;",y(t),g=null,w="loading",Promise.resolve(e).then((e=>{y(e),"opened"===w&&x(),w=null}))}else y(e);n?.(e)}else n?.(i)})),C("calcitePopoverOpen",(()=>{"loading"!==w&&x(),w="opened"})),C("calcitePopoverBeforeClose",(()=>{d?.()})),C("calcitePopoverClose",(()=>{u?.remove(),c?.()})),o&&(p=wi(f,"over",(()=>{if(!_.open){_.open=!0;let e=setInterval((async()=>{let e=await Ar(_),t=await(h?.());!Qr(f)&&!Qr(e)&&!t&&(_&&(_.open=!1),u?.remove())}),100);u={remove:()=>clearInterval(e)}}}))),t.__removePopover=b;let S,N=async()=>{_&&await Ar(_),_&&(_.open=!0)},E=async()=>{_&&await Ar(_),_&&(_.open=!1)};return t.openPopover=N,s&&N(),{remove:()=>b(),getPopover:()=>_,getPopoverShadowRoot:()=>(async()=>Ar(_))(),isOpen:()=>_?.open,open:N,close:E,anchorClicked:e=>(e?.stopImmediatePropagation(),_?.open?E():N()),reposition:()=>_?.reposition(),setSuspended:e=>{_&&(e&&!S?S=er("div",null,_,"replace"):!e&&S&&(ir(_,S,"replace"),S=null))}}}function io(e,t,i){return i=i||{},function(e){e?.__removeTooltip?.()}(e),e&&t?i.isPopup?function(e,t,i){let r,o,{placement:s,notRestricted:a,placeToAction:n,placeTo:l,zIndex:d,offsetSkidding:c,offsetDistance:h}=i,p=e=>{let t=e=>jr(e).length>=35?" overrideParent":"",i="esriGECalciteTooltipAsPopup"+(a?"":" restricted");return"string"==typeof e?er("div",{innerHTML:e,class:i+t(e)}):("boolean"!=typeof e&&Li(e,i+t(e.innerHTML)),e)},u=e=>"function"==typeof e?()=>p(e()):p(e),g=e;if(!g)return null;Ar(g.domNode||e).then((()=>{r=!o&&to({anchor:g,showArrow:!0,showOnHover:!0,autoFocus:!1,placeTo:n?g.domNode:l,offsetSkidding:c,offsetDistance:h,zIndex:d,placement:s,content:u(t)})}));let m=()=>{o=!0,r?.remove(),delete e.__removeTooltip};return e.__removeTooltip=m,{remove:m,close:()=>r?.close(),reposition:()=>r?.reposition(),open:()=>r?.open(),toggle:()=>r&&(r.isOpen()?r.close():r.open())}}(e,t,i):function(e,t,i){let r,{placement:o,hideOnClick:s,overlayPositioning:a,placeTo:n,offsetSide:l,offsetDistance:d,offsetSkidding:c,notRestricted:h,theme:p,style:u,zIndex:g}=i,m=document.createElement("calcite-tooltip");m.style.whiteSpace="normal",g&&m.style.setProperty("--calcite-floating-ui-z-index",("above-dialog"===g?eo:g)+""),Li(m,"esriGECalcite"),Lr(m,p),m.overlayPositioning=a||"fixed",m.closeOnClick=s,d&&(m.offsetDistance=d),c&&(m.offsetSkidding=c),m.placement=o||"trailing",wi(m,"click",(e=>{e.stopPropagation()})),Pr(m,"tooltip-util",`.container {\n        max-inline-size: ${h?"90vw":"250px"} !important;\n        max-block-size: 90vh !important;\n     }`);let b="document"===n?document.body:n;e instanceof HTMLElement?(ir(m,b||e,b?"last":"after"),m.referenceElement=e):(e.domNode&&(m.slot=Vi(e.domNode,"esriGECalciteAction")?"tooltip":"expand-tooltip"),m.referenceElement=e.domNode,ir(m,b||e.domNode));let _=e=>{if("string"==typeof e)m.innerHTML=Dr.sanitize(e);else{m.innerHTML="";let t=e?.domNode||e;t&&m.append(t)}if(m.style.display=m.innerHTML?"":"none",u){let e="function"==typeof u?u():u;Pr(m,"tooltip-util-custom-style",e?`.calcite-floating-ui-anim {\n            ${e.backgroundColor?`--calcite-color-foreground-1: ${e.backgroundColor}`:""};\n            ${e.color?`--calcite-color-text-1: ${e.color}`:""};\n         }`:null)}};if(l){let e=l;wi(m,"calciteTooltipBeforeOpen",(t=>{if(t.target!==t.currentTarget)return;let i="left"===m.getAttribute("data-placement")?"before":"after";Ti()||(i="before"===i?"after":"before"),e!==i&&(lr(m),e=i,m.offsetDistance=e===l?d:0,setTimeout((()=>{dr(m)})))}))}if("function"==typeof t){m.innerHTML="Placeholder";let e="Placeholder";r=wi(m.referenceElement,["focus","over"],(()=>{if(!m.hasAttribute("inert"))return;let i=t()||null;i!==e&&(_(i),e=i)}))}else _(t);let f=()=>{m&&(m.referenceElement=null,m.remove(),delete e.__removeTooltip),m=null,r?.remove()};return e.__removeTooltip=f,{remove:f,close:()=>m&&(m.open=!1),reposition:()=>m?.reposition(),open:()=>m.open=!0,toggle:()=>m&&(m.open=!m.open)}}(e,t,i):null}var ro=Object.getOwnPropertyDescriptor,oo=class extends kr{constructor(e){super(e),this._defaultTooltipPlacement="trailing"}get slot(){return this.domNode.slot}set slot(e){this._slot=e,this.domNode&&this._slot&&(this.domNode.slot=e)}postCreate(){this.slot=this._slot,super.postCreate(),this.addHandles({remove:()=>this._lastTooltipH?.remove()})}setFocus(){let e=this.domNode;return e.setFocus&&Ar(e).then((()=>e.setFocus()))}setTooltip(e,t){return this._lastTooltipH?.remove(),(t=t||{}).placement=t.placement||this._defaultTooltipPlacement,t.isPopup=null==t.isPopup?this.showTooltipAsPopup:t.isPopup,t.placeToAction=null==t.placeToAction?this.placeTooltipToAction:t.placeToAction,this._lastTooltipH=this._setTooltip(e,t)}_setTooltip(e,t){return io(this.domNode,e,t)}};function so(e,t){let i=ao(e,t);return`\n    block-size: ${i} !important;\n    inline-size: ${i} !important;\n    min-block-size: ${i} !important;\n    min-inline-size: ${i} !important;\n  `}function ao(e,t){return(t||("s"===e?16:"m"===e?20:28))+"px"}oo=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?ro(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],oo);var no=Object.defineProperty,lo=Object.getOwnPropertyDescriptor,co=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?lo(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&no(t,i,s),s};function ho(e){return!e||"string"==typeof e}function po(e,t){return!ho(t)||!ho(e)}var uo=class extends oo{constructor(e){super(e),this._templateString='<calcite-button class="esriGECalcite esriGECalciteButton"></calcite-button>',this._disabled=!1,this._iconFlipRtl="both",this._loading=!1,this._round=!1,this._linkStyle=!1,this._allowUpdates=!1}get alignment(){return this.domNode.alignment}set alignment(e){this._alignment=e||"center",this.domNode&&(this.domNode.alignment=this._alignment)}get appearance(){return this.domNode.appearance}set appearance(e){this._appearance=e||"outline-fill",this.domNode&&(this.domNode.appearance=this._appearance)}get kind(){return this._kind}set kind(e){this._kind=e,this.domNode&&e&&(this.domNode.kind=e)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}get href(){return this.domNode.href}set href(e){this._href=e,this.domNode&&(this.domNode.href=e)}get iconEnd(){return this._iconEnd}set iconEnd(e){let t=po(e,this._iconEnd);this._iconEnd=e,this.domNode&&(this.domNode.iconEnd=ho(e)?e:void 0,this._fixIconScale(),t&&this._updateTextContent())}get iconFlipRtl(){return this.domNode.iconFlipRtl}set iconFlipRtl(e){this._iconFlipRtl=e,this.domNode&&(this.domNode.iconFlipRtl=e)}get iconStart(){return this._iconStart}set iconStart(e){let t=po(e,this._iconStart);this._iconStart=e,this.domNode&&(this.domNode.iconStart=ho(e)?e:void 0,this._fixIconScale(),t&&this._updateTextContent())}get iconScale(){return this._iconScale}set iconScale(e){this._iconScale=e||"s",this.domNode&&this._fixIconScale()}get iconSize(){return this._iconSize}set iconSize(e){this._iconSize=e,this.domNode&&this._fixIconScale()}get ariaLabel(){return this.domNode.label}set ariaLabel(e){this._ariaLabel=e||"",this.domNode&&!this._ariaLabel.startsWith("<")&&!this.text&&(this.domNode.label=this.domNode.ariaLabel=this._ariaLabel)}get ariaHasPopup(){return this._ariaHasPopup}set ariaHasPopup(e){this._ariaHasPopup=e||null,this.domNode&&(this.domNode.ariaHasPopup=e)}get loading(){return this.domNode.loading}set loading(e){this._loading=e,this.domNode&&(this.domNode.loading=e,e&&Ar(this.domNode,"calcite-loader").then((e=>{e.scale="m"})))}get rel(){return this.domNode.rel}set rel(e){this._rel=e||"",this.domNode&&(this.domNode.rel=this._rel)}get round(){return this.domNode.round}set round(e){this._round=e,this.domNode&&(this.domNode.round=e)}get scale(){return this.domNode.scale}set scale(e){this._scale=e||"m",this.domNode&&(this.domNode.scale=this._scale,this._fixIconScale())}get target(){return this.domNode.target}set target(e){this._target=e,this.domNode&&(this.domNode.target=e)}get type(){return this.domNode.type}set type(e){this._type=e,this.domNode&&(this.domNode.type=e)}get width(){return this._width}set width(e){this._width=e||"auto",this.domNode&&("number"==typeof this._width?(this.domNode.width="full",this.domNode.style.width=this._width+"px"):this.domNode.width=this._width)}get text(){return this._text}set text(e){this._text=e||"",this.domNode&&(this._updateTextContent(),(this._ariaLabel||this._text)&&(this.ariaLabel=this._ariaLabel||this._text))}get linkStyle(){return this._linkStyle}set linkStyle(e){this._linkStyle=e,this.domNode&&this._updateLayout()}get padding(){return this._padding}set padding(e){this._padding=e,this.domNode&&this._updateLayout()}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e,this.domNode&&(this.domNode.style.fontSize=this._fontSize+" !important")}postCreate(){super.postCreate(),this.alignment=this._alignment,this.appearance=this._appearance,this.kind=this._kind,this.disabled=this._disabled,this.href=this._href,this.iconStart=this._iconStart,this.iconEnd=this._iconEnd,this.iconScale=this._iconScale,this.iconSize=this._iconSize,this.iconFlipRtl=this._iconFlipRtl,this.loading=this._loading,this.rel=this._rel,this.round=this._round,this.scale=this._scale,this.type=this._type,this.target=this._target,this.width=this._width,this.text=this._text,this.ariaLabel=this._ariaLabel||this.text,this.ariaHasPopup=this._ariaHasPopup,this.fontSize=this._fontSize,wi(this.domNode,"click",(e=>{this.onClick&&!this._disabled&&!this._loading&&this.onClick(e)})),wi(this.domNode,"mousedown",(e=>{this.onMouseDown&&!this._disabled&&!this._loading&&this.onMouseDown(e)})),this._allowUpdates=!0,this._updateTextContent(),this._fixIconScale(),this._updateLayout(),Kr(this.domNode,"button, a"),Pr(this.domNode,"remove-1.4-trim",`\n        .content {\n          display: flex !important;\n          flex-basis: auto !important;\n          overflow: visible !important;\n          text-overflow: clip !important;\n          white-space: normal !important;\n          text-align: ${"start"===this.alignment||"icon-end-space-between"===this.alignment?"start":"end"===this.alignment?"end":"center"} !important;\n          line-height: 1.2 !important;\n        }\n      `)}_fixIconScale(){if(this._allowUpdates){let e=Array.isArray(this._iconScale)?this._iconScale:[this._iconScale,this._iconScale],t=Array.isArray(this._iconSize)?this._iconSize:[this._iconSize,this._iconSize];this.iconStart&&ho(this.iconStart)&&Pr(this.domNode,"button-icon-start",`.icon--start { ${so(e[0],t[0])} }`),this.iconEnd&&ho(this.iconEnd)&&Pr(this.domNode,"button-icon-end",`.icon--end { ${so(e[1],t[1])} }`)}}_updateTextContent(){if(!this._allowUpdates)return;let e=0;function t(t){return ho(t)?null:(e++,er("div",{display:"inline-block",...t}))}let i=t(this._iconStart),r=t(this._iconEnd),o=this.trim&&this._text&&er("span",{class:this.trimClass,style:"line-height:16px; "+(this.fontSize?"font-size: "+this.fontSize+";":""),innerHTML:this._text});if(this.domNode.innerHTML="",e)if(1!==e||this._text){let e=er("div",{class:"esriGEFlexRow",style:`max-width:100%;gap:${this._linkStyle?"5px":"0.75rem"};`},this.domNode);i&&(Li(i,"esriGEFlexNoShrink"),ir(i,e)),o?ir(o,e):this._text&&er("span",{innerHTML:this._text},e),r&&(Li(r,"esriGEFlexNoShrink"),ir(r,e))}else ir(i||r,this.domNode);else o?ir(o,this.domNode):this.domNode.innerHTML=this._text;(this._iconStart||this._iconEnd)&&Pr(this.domNode,"adjust-for-avenir-next-font","\n        .content {\n          /* Shifting by 1px to compensate for the new Avenir Next font. */\n          position: relative !important;\n          top: 1px !important;\n        }\n      ")}_updateLayout(){Fi(this.domNode,"linkColor",this._linkStyle),Pr(this.domNode,"button-link",this._linkStyle?`a, button {\n        --calcite-internal-button-padding-x: ${this._padding||"5px"} !important;\n        --calcite-internal-button-content-margin: 5px !important;\n      }`:null),this._padding&&Pr(this.domNode,"button-padding",`button { padding: ${this._padding} !important; }`),this._updateStretchedWidth()}_updateStretchedWidth(){if(!this.trim&&!this.stretchContent)return;let e=0,t=e=>4+("s"===e?16:"m"===e?24:32),i=Array.isArray(this.iconScale)?[t(this.iconScale[0]),t(this.iconScale[1])]:[t(this.iconScale),t(this.iconScale)];this.iconStart&&(e+=i[0]),this.iconEnd&&(e+=i[1]),Pr(this.domNode,"button-trim",`button .content {\n        justify-content: ${"start"===this.alignment||"icon-end-space-between"===this.alignment?"flex-start":"end"===this.alignment?"flex-end":"center"} !important;\n        width: calc(100% - ${e}px) !important;\n        ${this.contentMarginEnd?`margin-inline-end: ${this.contentMarginEnd} !important;`:""}\n       }`)}};co([u({constructOnly:!0,value:!1})],uo.prototype,"trim",2),co([u({constructOnly:!0,value:"esriGETrimWithEllipsis"})],uo.prototype,"trimClass",2),co([u({constructOnly:!0})],uo.prototype,"contentMarginEnd",2),uo=co([p()],uo);var go=Object.getOwnPropertyDescriptor,mo=class extends oo{constructor(e){super(e),this._templateString='<calcite-action class="esriGECalcite esriGECalciteAction"></calcite-action>',this._active=!1,this._disabled=!1,this._loading=!1,this._indicator=!1,this._textEnabled=!1,this._allowFixScale=!1}get active(){return this.domNode.active}set active(e){this._active=e,this.domNode&&(this.domNode.active=e)}get alignment(){return this.domNode.alignment}set alignment(e){this._alignment=e||"start",this.domNode&&(this.domNode.alignment=this._alignment)}get appearance(){return this.domNode.appearance}set appearance(e){this._appearance=e,this.domNode&&(this.domNode.appearance=this._appearance)}get scale(){return this.domNode.scale}set scale(e){this._scale=e||"m",this.domNode&&(this.domNode.scale=this._scale,this._fixIconScale())}get iconScale(){return this._iconScale}set iconScale(e){this._iconScale=e||"m",this.domNode&&this._fixIconScale()}get iconSize(){return this._iconSize}set iconSize(e){this._iconSize=e,this.domNode&&this._fixIconScale()}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.domNode&&(this.domNode.label=this.domNode.ariaLabel=e)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}get icon(){return this.domNode.icon}set icon(e){this._icon=e,this.domNode&&(this.domNode.icon=e,this._fixIconScale())}get loading(){return this.domNode.loading}set loading(e){this._loading=e,this.domNode&&(this.domNode.loading=e)}get indicator(){return this.domNode.indicator}set indicator(e){this._indicator=e,this.domNode&&(this.domNode.indicator=e)}get text(){return this._text}set text(e){this._text=e,this.domNode&&(this.domNode.text=e)}get textEnabled(){return this.domNode.textEnabled}set textEnabled(e){this._textEnabled=e,this.domNode&&(this.domNode.textEnabled=e)}get width(){return this._width}set width(e){this._width=e,this.domNode&&this._updateLayout()}get height(){return this._height}set height(e){this._height=e,this.domNode&&this._updateLayout()}get padding(){return this._padding}set padding(e){this._padding=e,this.domNode&&this._updateLayout()}get round(){return this._round}set round(e){this._round=e,this.domNode&&this._updateLayout()}get expanded(){return this._expanded}set expanded(e){this._expanded=e,this.domNode&&(this.domNode.ariaExpanded=e?"true":"false")}postCreate(){super.postCreate(),this.disabled=this._disabled,this.icon=this._icon,this.scale=this._scale,this.iconScale=this._iconScale,this.iconSize=this._iconSize,this.active=this._active,this.ariaLabel=this._ariaLabel,this.alignment=this._alignment,this.appearance=this._appearance,this.disabled=this._disabled,this.loading=this._loading,this.indicator=this._indicator,this.text=this._text,this.textEnabled=this._textEnabled,wi(this.domNode,"click",(e=>{this.onClick&&!this._disabled&&!this._loading&&this.onClick(e)})),this._allowFixScale=!0,this._fixIconScale(),this._updateLayout(),Kr(this.domNode,"button")}_fixIconScale(){this._allowFixScale&&this._icon&&Pr(this.domNode,"action-icon",`calcite-icon { ${so(this._iconScale,this._iconSize)} }`)}_updateLayout(){if(this._width||this._height||this._padding||this._round){let e="";this._width&&(e+=`width:${this._width}px !important;`),this._height&&(e+=`height:${this._height}px !important;`),this._padding&&(e+=`padding:${this._padding} !important;`),this._round&&(e+="border-radius:50%  !important;"),Pr(this.domNode,"default",`button {${e}}`)}}_setTooltip(e,t){return this._tooltipH=io(this,e,t),this._tooltipH}getTooltipHandle(){return this._tooltipH}};function bo(e,t){return function(e,t){let{tooltip:i,tooltipParams:r,iconScale:o,class:s,...a}=e;s="actionIcon"+(s?" "+s:"");let n=new mo({scale:"s"!==o?"l":"s",iconScale:o,class:s,...a});return t&&n.placeAt(t),n.showTooltipAsPopup=r?.isPopup,n.placeTooltipToAction=r?.placeToAction,i&&setTimeout((()=>n.setTooltip(vo(i,n.domNode),r))),n}({iconScale:"m",appearance:"transparent",alignment:"center",padding:"0",...e},t)}function _o(e,t){return function(e,t){return bo({iconScale:"s",iconSize:16,padding:"2px",...e},t)}({icon:"pencil",ariaLabel:Ze("widgets").calcite.buttons.edit,...e},t)}function fo(e,t){e={...e},e.tooltipParams||={},e.tooltipParams.isPopup=null==e.tooltipParams.isPopup||e.tooltipParams.isPopup;let i=bo({icon:e.isWarning?"exclamation-mark-triangle":"information",ariaLabel:Ze("widgets").calcite.buttons.information,...e},t);return function(e){Ar(e.domNode).then((e=>{wi(e,["mousedown","touchstart"],(e=>{e.preventDefault()}))}))}(i),i}function vo(e,t){let i;if("function"!=typeof e)i=e?!0===e?()=>t.label:e:null;else{let r=e;i=()=>{let e=r();return e?!0===e?t.label:e:null}}return i}function yo(e,t){let{style:i,trim:r,...o}=e;o.trim=!!r;let s=new uo(o);return"stretch"===r&&(i={width:"1px",flexGrow:"1",...i}),i&&Ui(s.domNode,i),t&&s.placeAt(t),s}function wo(e,t){let{style:i,...r}=e;return void 0===i&&(i={minHeight:"20px"}),yo({appearance:"transparent",linkStyle:!0,scale:"s",style:i,...r},t)}function xo(e,t){return yo({style:{height:"29px",minWidth:"66px"},...e},t)}function Co(e,t,i){let r=e?.styleProps;r&&delete(e={...e}).styleProps;let o=new uo({appearance:"transparent",kind:"neutral",padding:"0",...e});if(!1!==i&&o.placeAt(i||t,i?null:"replace"),i&&t.remove(),o.domNode.append(t),r){let e=[];r.noBorder&&e.push("border-width:0 !important;"),r.roundButton&&e.push("border-radius:999px !important;"),e.length&&Pr(o.domNode,"wrap-style-props",`button {${e.join(" ")}}`)}return o}mo=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?go(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],mo);var So=/^(.+)\s([1-9]\d*)(\D*)$/;function No(e){let t=/^(.+)\s([1-9]\d*)$/.exec(e);return t?{base:t[1],number:+t[2]}:/^[1-9]\d*$/.test(e)?{base:"",number:+e}:{base:e,number:0}}function Eo(e,t,i,r){let o=void 0===r?i:r,s=null==e||"number"==typeof e&&isNaN(e);if(s!==(null==t||"number"==typeof t&&isNaN(t))){let e=s?-1:1;return o?-e:e}return s?0:null}function ko(e,t,i,r){let o=Eo(e,t,i,r);return null!==o?o:(o=(e=Number(e))>(t=Number(t))?1:e<t?-1:0,i?-o:o)}function Io(e,t,i,r){let o=Eo(e,t,i,r);return null!==o?o:(e=String(e),t=String(t),o=e.localeCompare(t),i?-o:o)}function To(e,t,i,r){let o=No("string"==typeof e?e.toLowerCase():e),s=No("string"==typeof t?t.toLowerCase():t),a=null;if(o.base===s.base)a=ko(o.number,s.number,i,r);else{let e=So.exec(o.base);if(e){let t=So.exec(s.base);t&&e[1]===t[1]&&e[3]===t[3]&&(a=ko(+e[2],+t[2],i,r))}null===a&&(a=Io(o.base,s.base,i,r))}return a||Io(e,t,i,r)}function Mo(e,t,i,r){let o=Eo(e,t,i,r);if(null!==o)return o;let s=typeof e;switch(typeof t!==s&&(s=""),s){case"number":case"boolean":break;case"object":e=e.valueOf(),t=t.valueOf();break;default:return Io(String(e),String(t),i,r)}return o=e>t?1:e<t?-1:0,i?-o:o}function Go(){return function(e,t){return i=>{let r="function"==typeof e?e:t=>{for(let i in e){let r=e[i];if(r&&"function"==typeof r.test){if(!r.test(t[i],t))return!1}else if(void 0!==r&&r!==t[i])return!1}return!0},o=i.filter(r),s=t?.sort;return s&&o.sort("function"==typeof s?s:function(e){return(t,i)=>{let r;for(let o=0;o<e.length;o++){r=e[o];let s=Mo(t[r.attribute],i[r.attribute],r.descending);if(0!==s)return s}return 0}}(s)),o=function(e,t){if(t&&(t.start||t.count)){let i=e.length;(e=e.slice(t.start||0,(t.start||0)+(t.count||1/0))).total=i}return e}(o,t),o}}}function Ao(e,t){if(!e)return Mo;if("function"==typeof e)return e;let i=Array.isArray(e)?e:[e],r={};return Array.isArray(t)&&t.forEach((e=>{r[e]=To})),(e,t)=>{let o=null==e||"number"==typeof e&&isNaN(e),s=null==t||"number"==typeof t&&isNaN(t);if(o||s)return o===s?0:o?-1:1;for(let o of i){let i,s=o.attribute,a=e[s],n=t[s];"*"!==o.attribute&&(i=r[s]),!i&&r["*"]&&(i=r["*"].bind(null,s)),i||(i=Mo);let l=i(a,n,!1,!1,e,t);if(l)return o.descending?-l:l}return 0}}function Po(e,t,i){return e.sort(Ao(t,i))}function Lo(e,t,i,r){let o=$i(t,!0),s=function(e){if(!e)return["below"];let t=[];return e.forEach((e=>{let i=Ti();switch(e){case"before-alt":i=!i;case"after-alt":return t.push(i?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"}),void t.push(i?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"})}t.push(e)})),t}(i);if(/^(above|below)/.test(s[0]+"")){let i=Zi(t),r=t.firstChild?Zi(t.firstChild):{t:0,b:0},s=Zi(e),a=e.firstChild?Zi(e.firstChild):{t:0,b:0};o.y+=Math.min(i.t+r.t,s.t+a.t),o.h-=Math.min(i.t+r.t,s.t+a.t)+Math.min(i.b+r.b,s.b+a.b)}if(t.parentNode){let e="absolute"===ji(t).position,i=t.parentElement;for(;1===i?.nodeType&&"BODY"!==i.nodeName;){let t=$i(i,!0),r=ji(i);if(/relative|absolute/.test(r.position)&&(e=!1),!e&&/hidden|auto|scroll/.test(r.overflow)){let e=Math.min(o.y+o.h,t.y+t.h),i=Math.min(o.x+o.w,t.x+t.w);o.x=Math.max(o.x,t.x),o.y=Math.max(o.y,t.y),o.h=e-o.y,o.w=i-o.x}"absolute"===r.position&&(e=!0),i=i.parentElement}}let a=o.x,n=o.y,l=o.w,d=o.h,c=[];function h(e,t){c.push({aroundCorner:e,corner:t,pos:{x:{L:a,R:a+l,M:a+(l>>1)}[e.charAt(1)],y:{T:n,B:n+d,M:n+(d>>1)}[e.charAt(0)]}})}s.forEach((e=>{let t=Ti();switch(e){case"above-centered":h("TM","BM");break;case"below-centered":h("BM","TM");break;case"after-centered":t=!t;case"before-centered":h(t?"ML":"MR",t?"MR":"ML");break;case"after":t=!t;case"before":h(t?"TL":"TR",t?"TR":"TL"),h(t?"BL":"BR",t?"BR":"BL");break;case"below-alt":t=!t;case"below":h(t?"BL":"BR",t?"TL":"TR"),h(t?"BR":"BL",t?"TR":"TL");break;case"above-alt":t=!t;case"above":h(t?"TL":"TR",t?"BL":"BR"),h(t?"TR":"TL",t?"BR":"BL");break;default:"object"==typeof e&&h(e.aroundCorner,e.corner)}}));let p=function(e,t,i,r){let o=vr(),s={l:o.x,t:o.y,w:document.body.clientWidth-fr().w,h:document.body.clientHeight};(!e.parentNode||"body"!==String(e.parentNode.nodeName).toLowerCase())&&document.body.appendChild(e);let a=null;t.some((t=>{let o=t.corner,n=t.pos,l=0,d={w:{L:s.l+s.w-n.x,R:n.x-s.l,M:s.w}[o.charAt(1)],h:{T:s.t+s.h-n.y,B:n.y-s.t,M:s.h}[o.charAt(0)]},c=e.style;if(c.left=c.right="auto",i){let s=i(e,t.aroundCorner,o,d,r);l=typeof s>"u"?0:s}let h=e.style,p=h.display,u=h.visibility;"none"===h.display&&(h.visibility="hidden",h.display="");let g=$i(e);h.display=p,h.visibility=u;let m={L:n.x,R:n.x-g.w,M:Math.max(s.l,Math.min(s.l+s.w,n.x+(g.w>>1))-g.w)}[o.charAt(1)],b={T:n.y,B:n.y-g.h,M:Math.max(s.t,Math.min(s.t+s.h,n.y+(g.h>>1))-g.h)}[o.charAt(0)],_=Math.max(s.l,m),f=Math.max(s.t,b),v=Math.min(s.l+s.w,m+g.w)-_,y=Math.min(s.t+s.h,b+g.h)-f;return l+=g.w-v+(g.h-y),(null==a||l<a.overflow)&&(a={corner:o,aroundCorner:t.aroundCorner,x:_,y:f,w:v,h:y,overflow:l,spaceAvailable:d}),!l})),a.overflow&&i&&i(e,a.aroundCorner,a.corner,a.spaceAvailable,r);let n=a.y-+Wi(document.body,"marginTop"),l=a.x-+Wi(document.body,"marginLeft");return e.style.top=n+"px",e.style.left=l+"px",e.style.right="auto",a}(e,c,r,{w:l,h:d});return p.aroundNodePos=o,p}function Do({openButton:e,placement:t,allowedMinHeight:i,popupMargins:r}){let o,s,a=function(){let e=document.documentElement;return{w:e.clientWidth-fr().w,h:e.clientHeight,scrollable:!1}}(),n=$i(e,a.scrollable);return o=/top-?/.test(t)?n.y:/bottom-?/.test(t)?a.h-n.y-n.h-(r?.b||0):/-start|-leading/.test(t)?a.h-n.y:/-end|-trailing/.test(t)?n.y+n.h:a.h,"number"==typeof i&&o<i?(/^top/.test(t)?s=t.replace(/^top/,"bottom"):/^bottom/.test(t)&&(s=t.replace(/^bottom/,"top")),Do({openButton:e,placement:s})):{maxHeight:o,minWidth:n.w,placement:s||t}}function Bo(e,t,i,r,o){let s=e;s.__invokeInfo||(s.__invokeInfo={});let a=s.__invokeInfo[t];if(a){if(null==i||!1===r)return a.dfd.promise;clearTimeout(a.handle)}return a||(a={dfd:Ee(),handle:null},s.__invokeInfo[t]=a),a.handle=setTimeout((()=>{s.__invokeInfo[t]=void 0,ke(o?s[t].apply(s,o):s[t]()).then((e=>{a.dfd.resolve(e)}),(e=>{a.dfd.reject(e)}))}),i||0),a.dfd.promise}function Ro(e,t){let i=e;i.__invokeInfo&&i.__invokeInfo[t]&&(clearTimeout(i.__invokeInfo[t].handle),i.__invokeInfo[t]=void 0)}var Fo=Object.defineProperty,Vo=Object.getOwnPropertyDescriptor,Oo=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?Vo(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&Fo(t,i,s),s},Ho=class extends kr{constructor(){super(...arguments),this.idProperty="value",this.labelProperty="label",this.requireSelection=!0,this._items=[]}get value(){return this._value}set value(e){this._normalizeValue(e)!==this._value&&!this._setValue(e)&&this._trySelectValue()}_normalizeValue(e){let t=e;return(null==t||"string"==typeof t&&!t.trim()||"number"==typeof t&&isNaN(t))&&(e=null),e}get items(){return this._items}set items(e){this._setItems(e)}postCreate(){this._trySelectValue()}_trySelectValue(){null!==this.value&&this._setValue(this.value)||(this.requireSelection?this.items.length&&(this.findItem((e=>this.value===e[this.idProperty]))?this._setValue(this.value):this._setValue(this.items[0][this.idProperty])):this._itemsChanged&&this._updateUI_delayed())}_setValue(e){if(e=this._normalizeValue(e),this._value=e,!this.items||!this.domNode)return!1;let t=this.findItem((e=>e[this.idProperty]===this.value));return this._updateUI_delayed(),!!t}setValueWithEvent(e){let t=this.value;this.value=e,this._onChange({type:"change",value:this.value,previousValue:t,selectedItem:this.getSelectedItem(),selectedIndex:this.getSelectedIndex()})}_updateUI_delayed(){Bo(this,"_updateUI_private")}refresh(e){e&&(this._itemsChanged=!0),this._updateUI_private()}_updateUI_private(){this.uiUpdateSuspended||this.destroyed||(this._updateUI(this._itemsChanged),this._itemsChanged=!1)}_updateUI(e){}_setItems(e){this._items=e||[],this._itemsChanged=!0,this._trySelectValue()}findItem(e){let t;return this._traverseItems((i=>{if("function"==typeof e){if(e(i))return t=i,!0}else if(e.value===i[this.idProperty])return t=i,!0})),t}_traverseItems(e){(()=>{this.items.forEach((t=>{e(t)}))})()}getSelectedItem(){return this.findItem((e=>e[this.idProperty]===this.value))}setSelectedItem(e){this.destroyed||!e||this._setValue(e[this.idProperty])}getSelectedIndex(){let e=this.getSelectedItem();return e?this.items.indexOf(e):-1}setSelectedIndex(e){this.setSelectedItem(this.items[e])}isMouseOver(e){return Qr(this.domNode,{event:e})}_onChange(e){this.onChange(e)}onChange(e){}};Oo([u({constructOnly:!0})],Ho.prototype,"idProperty",2),Oo([u({constructOnly:!0})],Ho.prototype,"labelProperty",2),Oo([u({constructOnly:!0})],Ho.prototype,"requireSelection",2),Ho=Oo([p()],Ho);var zo=Object.getOwnPropertyDescriptor,Wo=class extends kr{constructor(e){super(e),this._templateString='<calcite-icon class="esriGECalcite"></calcite-icon>',this._allowFixScale=!1}get icon(){return this.domNode.icon}set icon(e){this._icon=e,this.domNode&&(this.domNode.icon=this._icon)}get scale(){return this.domNode.scale}set scale(e){this._scale=e||"m",this.domNode&&(this.domNode.scale=this._scale,this._fixIconScale())}get size(){return this._size}set size(e){this._size=e,this.domNode&&this._fixIconScale()}get textLabel(){return this.domNode.textLabel}set textLabel(e){this._textLabel=e,this.domNode&&(this.domNode.textLabel=this._textLabel)}postCreate(){this.icon=this._icon,this.scale=this._scale,this.size=this._size,this.textLabel=this._textLabel,this._allowFixScale=!0,this._fixIconScale()}_fixIconScale(){this._allowFixScale&&function(e,t,i){let r=ao(t,i);e.style.blockSize=r,e.style.inlineSize=r,e.style.minInlineSize=r,e.style.minBlockSize=r}(this.domNode,this._scale,this._size)}};Wo=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?zo(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Wo);var Uo=class{constructor(e){this.showSelectionIcon=!0,this._tooltipHandles=[],Object.assign(this,e)}createPresentation(e,t,i){if(e.hidden)return null;if(e.isSeparator)return er("div",{class:"listSeparator"});let r=this._createItemNode(e,t,i),o=r.itemLabel=this.createLabel(e,i);return o.slot="content",r.append(o),this._createActions(e,i,r),this._appendExtraStyles(i,e,r),r}_appendExtraStyles(e,t,i){Kr(i,".row"),"icon"===e?.domNode.selectionAppearance?Pr(i,"list-item-renderer-selection",`.selection-container {\n            width: 0 !important;\n            ${this.showSelectionIcon?"":"display: none !important;"}\n            ${!1===t.selectable?"pointer-events: none !important;":""}\n         }\n\n         tr[aria-selected="true"] .selection-container:before {\n            content: "\u2022";\n            color: var(--calcite-brand);\n         }\n         \n         .selection-container calcite-icon {\n            display: none !important;\n         }\n         `):"border"===e?.domNode.selectionAppearance&&Pr(i,"list-item-renderer-selection",`.container {\n            ${this.showSelectionIcon?"":"border-inline-color: transparent !important;"}\n          }`),Pr(i,"list-item-renderer-content",`.content-container {\n          ${!1===t.selectable?`opacity: ${t.opacity||.5} !important;`:""}\n          ${!1===t.selectable?"pointer-events: none !important;":""}\n       }`),"none"===e?.domNode.selectionMode?Pr(i,"list-item-renderer-focus",".row {\n          &:focus {\n            &::before {\n              all: unset !important;\n            }\n            &::after {\n              all: unset !important;\n            }\n          }\n        }"):Pr(i,"list-item-renderer-focus",".row {\n          &:focus {\n            &::after {\n              all: unset !important;\n            }\n          }\n        }"),Pr(i,"focus-and-selected",".container--border-selected::before { display: block !important; inline-size: 4px !important;}")}_createItemNode(e,t,i){let r=er("calcite-list-item",{class:"listItem"});return r.selected=t,r.label=null==e[i.labelProperty]?"":e[i.labelProperty]+"",r.value=e[i.idProperty]+"",r.disabled=!1===e.enabled,r}createLabel(e,t){let i,r,o,s=er("div",{class:"esriGEFlexRow esriGEFlexSpacer listItemLabel"});return e.iconStart&&(i=new Wo({class:"esriGESpaceAfterBig",icon:e.iconStart})),(e.imageClass||e.imageUrl)&&(r=er("div",{class:"esriGESpaceAfterBig listItemImage"+(e.imageClass?" "+e.imageClass:"")}),e.imageUrl&&(r.style.backgroundImage=e.imageUrl)),e.iconEnd&&(o=new Wo({class:"esriGESpaceBeforeBig",icon:e.iconEnd})),i||r||o?(i&&ir(i.domNode,s),r&&ir(r,s),er("div",{class:"esriGEFlexRow esriGEFlexSpacer listItemLabelInner",innerHTML:e[t.labelProperty]},s),o&&ir(o.domNode,s)):s.innerHTML=e[t.labelProperty],s}_createActions(e,t,i){if(e.loading){let e=er("div",{class:"esriGEFlexRow"},i);return e.slot="actions-end",void(new Tr({class:"esriGECalciteLoaderSmallIndicator",scale:"s"}).placeAt(e).domNode.style.cssText="padding:10px")}let r=e.actionsEnd;e.tooltip&&(r=r||[],r.some((t=>t.tooltip===e.tooltip))||r.push({icon:"information",tooltip:e.tooltip,tooltipParams:e.tooltipParams})),r?.length&&(this._placeActions(r,e,t,i,"actions-end"),Li(i,"hasActions")),e.actionsStart?.length&&this._placeActions(e.actionsStart,e,t,i,"actions-start")}_placeActions(e,t,i,r,o){let s=er("div",{class:"esriGEFlexRow"},r);s.slot=o,e.forEach((e=>{let r;if(r=e.isLink?wo({class:"esriGESpaceAfterMedium",text:e.text,onClick:()=>{i.onItemAction?.(t,e,r),e.onClick?.(t,e,r)}}).placeAt(s):new mo({icon:e.icon,scale:"m",iconScale:e.iconScale||"s",appearance:"transparent",onClick:o=>{o.stopPropagation(),i.onItemAction?.(t,e,r),e.onClick?.(t,e,r)}}).placeAt(s),r.disabled=e.disabled,e.opacity&&(r.domNode.style.opacity=e.opacity+""),e.tooltip){let t=this.tooltipParent?{parentNode:this.tooltipParent,...e.tooltipParams}:e.tooltipParams;this._tooltipHandles.push(r.setTooltip(e.tooltip,t))}}))}removeTooltips(){this._tooltipHandles.forEach((e=>e.remove())),this._tooltipHandles.length=0}hideTooltips(){this._tooltipHandles.forEach((e=>e.close()))}},jo=Object.defineProperty,qo=Object.getOwnPropertyDescriptor,$o=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?qo(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&jo(t,i,s),s},Qo=class extends Ho{constructor(e){super(e),this._templateString="<calcite-list class='esriGECalcite esriGECalciteList' icon='circle'></calcite-list>",this.requireSelection=!1,this._itemNodes=[],this._multiSelection={}}get filterEnabled(){return this._filterEnabled}set filterEnabled(e){this._filterEnabled=e,this.domNode&&(this.domNode.filterEnabled=e)}postCreate(){super.postCreate(),this.itemRenderer=this.itemRenderer||new Uo,this.domNode.filterEnabled=this.filterEnabled,this.domNode.dragEnabled=this.dragEnabled,this.domNode.selectionMode=this.selectionMode||"single",this.domNode.selectionAppearance=this.selectionAppearance||"border",this.domNode.filterPlaceholder=this.filterPlaceholder,wi(this.domNode,"calciteListItemSelect",(e=>{if(e.target.parentElement!==this.domNode||e.target.unavailable)return;let t=this.value,i=e.target.value,r=this.findItem((e=>e[this.idProperty]+""===i));if(r){if(!1===r.selectable||null===r.selectable)return void(!e.target.selected&&setTimeout((()=>{this._updateSelection()})));if(e.target.selected||(e.target.selected=!0),"multiple"===this.selectionMode)return this._multiSelection[r[this.idProperty]]=!this.canToggleMultiSelection||!this._multiSelection[r[this.idProperty]],this._updateSelection(),this.onChange(null);this._value=r[this.idProperty],this.onItemClick?.(this._value),(this._value!==t||"none"===this.selectionMode)&&this._onChange({type:"change",value:this.value,previousValue:t,selectedIndex:this.getSelectedIndex(),selectedItem:this.getSelectedItem()})}})),this.dragEnabled&&wi(this.domNode,"calciteListOrderChange",(e=>{let t=e.detail.oldIndex,i=e.detail.newIndex,r=this.items[t];this.items.splice(t,1),this.items.splice(i,0,r);let o=this._itemNodes[t];this._itemNodes.splice(t,1),this._itemNodes.splice(i,0,o),this.onChange(null)}))}getItemNode(e){return this._itemNodes.find((t=>t.item===e))}getSelectedItem(){return"multiple"===this.selectionMode?null:super.getSelectedItem()}_updateUI(e){e?this._buildItemNodes():this._updateSelection()}_buildItemNodes(){let e,t="multiple"===this.selectionMode?this.getSelectedItems():[this.getSelectedItem()];this.keepScrollPosition?(e=document.createElement("calcite-list"),e.className="esriGEOffscreen",document.body.append(e)):this.domNode.innerHTML="",this._itemNodes.length=0,this.items.forEach((i=>{let r=this.itemRenderer.createPresentation(i,t.includes(i),this);r&&(r.item=i,(e||this.domNode).appendChild(r),this._itemNodes.push(r))})),e&&Ar(e).then((()=>{if(this.destroyed)return void e.remove();let t=this.domNode.scrollTop;for(this.domNode.innerHTML="";e.firstChild;){let t=e.firstChild;t.remove(),this.domNode.append(t)}e.remove(),this.domNode.scrollTop=t}))}_updateSelection(){if("multiple"===this.selectionMode){let e=this.getSelectedItems();return void this._itemNodes.forEach((t=>{t.selected=e.includes(t.item)}))}let e=this.getSelectedItem();this._itemNodes.forEach((t=>{t.selected=t.item===e}))}_setItems(e){this._multiSelection={},super._setItems(e)}getSelectedItems(){return"multiple"===this.selectionMode?this.items.filter((e=>this._multiSelection[e[this.idProperty]])):[]}setSelectedItems(e){this._multiSelection={},e?.forEach((e=>this._multiSelection[e]=!0)),this._updateSelection()}};$o([u({constructOnly:!0})],Qo.prototype,"selectionAppearance",2),$o([u({constructOnly:!0})],Qo.prototype,"selectionMode",2),$o([u({constructOnly:!0})],Qo.prototype,"dragEnabled",2),$o([u({constructOnly:!0})],Qo.prototype,"filterPlaceholder",2),Qo=$o([p()],Qo);var Yo,Xo={Enter:"Enter",Escape:"Escape",Space:"Space",Shift:"Shift"};function Jo(e){return we("mac")?e.metaKey:e.ctrlKey}function Ko(){return Yo}we("worker")||(wi(document.body,"keydown",(e=>{e.key===Xo.Shift&&(Yo=!0)})),wi(document.body,"keyup",(e=>{e.key===Xo.Shift&&(Yo=!1)})));function Zo(e,t,i){return vi()?function(e,t,i){i=i||{};let r,o,s,a,n=i.tolerance||10;function l(){r?.remove(),o?.remove(),s?.remove(),clearTimeout(a)}let d=wi(e,"touchstart",(d=>{let c;function h(e){let t=Ei(d),i=Ei(e);return Math.abs(t.pageX-i.pageX)<n&&Math.abs(t.pageY-i.pageY)<n}if(l(),i.detectLongPress){let t;o=wi(e,"touchmove",(e=>{t=e})),a=setTimeout((()=>{h(t||d)&&(i.ignoreReleaseIfLongPressHappened&&(c=!0),i.longPressCallback(d))}),i.longPressTimeout||500)}r=xi(e,"touchend",(e=>{!c&&h(e)&&t(e),l()})),s=xi(e,"touchcancel",l)}));return{remove:()=>{d?.remove(),l()}}}(e,t,i):function(e,t,i){i=i||{};let r,o,s=i.tolerance||0,a=wi(e,"press",(e=>{o?.remove();let i,a=e.pageX,n=e.pageY;r=wi(document.body,"move",(e=>{if(e.shiftKey||Jo(e))return;let t=e.pageX,r=e.pageY;(Math.abs(t-a)>s||Math.abs(r-n)>s)&&(i=!0)})),o=xi(document.body,"release",(e=>{r.remove();let o=e.pageX,l=e.pageY;!i&&Math.abs(o-a)<=s&&Math.abs(l-n)<=s&&t(e)}))}));return{remove(){r?.remove(),o?.remove(),a?.remove()}}}(e,t,i)}function es({node:e,tolerance:t,onMouseDown:i,onDragStarted:r,createDnDBox:o,destroyDnDBox:s,onDragMoved:a,onDragEnded:n,onDragCanceled:l,onMouseUp:d}){let c,h,p,u,g,m,b,_;function f(){v(),u?.remove(),g?.remove(),m?.remove(),b&&(s&&s(b),_&&Promise.resolve().then((()=>ra)).then((e=>{e.removeFollowCursorTooltip(_)})))}function v(){c?.remove(),h?.remove(),p?.remove()}return t=t>0?t:5,wi(e,"press",(s=>{if(f(),i&&!i(s))return;let y=Ei(s),w=y.pageX,x=y.pageY,C=w,S=x;c=wi(document.body,"move",(e=>{if(e.shiftKey||Jo(e))return;let i=Ei(e);function s(){f(),n&&n(),d&&d()}(Math.abs(w-i.pageX)>=t||Math.abs(x-i.pageY)>=t)&&(v(),!r||r(e,i.pageX-C,i.pageY-S))&&(C=i.pageX,S=i.pageY,b=o&&o(),b&&Promise.resolve().then((()=>ra)).then((e=>{_=e.createFollowCursorTooltip({node:b,toMouseCursor:!0})})),u=wi(document.body,"move",(e=>{let t=Ei(e);a&&a(t,t.pageX-C,t.pageY-S,s),C=t.pageX,S=t.pageY})),g=xi(document.body,"release",s),m=wi(document.body,"keyup",(e=>{e.key===Xo.Escape&&(f(),l&&l(),d&&d())})))})),h=xi(e,["mouseup","touchend"],(()=>{d&&d(),v()})),p=xi(document.body,["mouseup","touchend"],(()=>{d&&d(),v()}))}))}function ts(e){return Array.isArray(e)?e:[e.x,e.y,e.x+e.w,e.y+e.h]}function is(e){return e*Math.PI/180}function rs(e){return 180*e/Math.PI}function os(e){e.progress<1?requestAnimationFrame((()=>{if(e._stopMethod)return;let t=Date.now();e.progress=1-(e.endTime-t)/e.duration,e.progress=Math.min(1,e.progress),ss(e),os(e)})):e._onEnd()}function ss(e){for(let t in e.properties){let r=e.properties[t],o=r.easing?"function"==typeof r.easing?r.easing:i.EasingFunctions[r.easing]:null,s=o?o(e.progress):e.progress,a=r.start+s*(r.end-r.start);e.obj[t]=r.units?a+r.units:a,e._onProgress(t,a,s)}}function as({obj:e,duration:t=1e3,properties:i,onProgress:r,onEnd:o,onStop:s,onCancel:a}){let n=Ee(),l=Date.now(),d=new wr,c={properties:i,obj:e||{},progress:0,promise:n.promise,duration:t,startTime:l,endTime:l+t,stop:e=>{if(c._stopMethod=e?"stopEnd":"stop","stop"!==c._stopMethod)return"stopEnd"===c._stopMethod?(c.progress=1,ss(c),void c._onEnd()):void 0;c._onEnd()},cancel:()=>{c._stopMethod="cancel",c._onCancel()},then:(e,t)=>n.promise.then(e,t),events:d,_stopMethod:null,_onProgress:(e,t,i)=>{r&&r(e,t,i)},_onEnd:()=>{s&&s(),o&&o(),n.resolve(),d.emit("onEnd")},_onCancel:()=>{a&&a()}};return ss(c),os(c),c}function ns(e,t=!1,i){return"string"==typeof e&&!/^0x/i.test(e)&&(e=m.fromString(e)),Array.isArray(e)&&(e=m.fromArray(e)),function(e){return e&&"function"==typeof e.toHex}(e)?t||1===e.a?e.toHex():e.toCss(!0):null==e||isNaN(e)?i?ns(i,t):"#000000":"#"+(e="00000"+Number(e).toString(16)).substr(e.length-6)}function ls(e,t){return"object"==typeof e?new m(e):m.fromString(ns(e,!1,t))}function ds(e={},...t){for(let i of t)cs(e,i);return e}function cs(e,t,i){let r,o,s={};for(r in t){o=t[r];let i=!(r in s)||s[r]!==o;(!(r in e)||e[r]!==o&&i)&&(e[r]=o)}return e}var hs=class{constructor(e){this.dx=0,this.dy=0,this.xx=1,this.xy=0,this.yx=0,this.yy=1,ds(this,e)}},ps=new class{create(e){return new hs(e)}normalize(e){return e}isIdentity(e){return 1===e.xx&&0===e.xy&&0===e.yx&&1===e.yy&&0===e.dx&&0===e.dy}translate(e,t){return new hs({dx:e,dy:t})}scale(e,t){return new hs({xx:e,yy:t})}rotate(e){let t=Math.cos(e),i=Math.sin(e);return new hs({xx:t,xy:-i,yx:i,yy:t})}rotateg(e){return this.rotate(is(e))}rotategAt(e,t,i){return this._sandwich(this.rotateg(e),t,i)}multiply(e){let t=(e=e.filter((e=>!!e)))[0];for(let i=1;i<e.length;++i){let r=t,o=e[i];t=new hs,t.xx=r.xx*o.xx+r.xy*o.yx,t.xy=r.xx*o.xy+r.xy*o.yy,t.yx=r.yx*o.xx+r.yy*o.yx,t.yy=r.yx*o.xy+r.yy*o.yy,t.dx=r.xx*o.dx+r.xy*o.dy+r.dx,t.dy=r.yx*o.dx+r.yy*o.dy+r.dy}return ds(this,t),t}multiplyRectangle(e,t){let i=ps.normalize(e);if(this.isIdentity(i))return{x:t.x,y:t.y,w:t.w,h:t.h};let r=this.multiplyPoint(i,t.x,t.y),o=this.multiplyPoint(i,t.x,t.y+t.h),s=this.multiplyPoint(i,t.x+t.w,t.y),a=this.multiplyPoint(i,t.x+t.w,t.y+t.h),n=Math.min(r.x,o.x,s.x,a.x),l=Math.min(r.y,o.y,s.y,a.y);return{x:n,y:l,w:Math.max(r.x,o.x,s.x,a.x)-n,h:Math.max(r.y,o.y,s.y,a.y)-l}}multiplyPoint(e,t,i){let r=this.normalize(e);return this._multiplyPoint(r,t,i)}_multiplyPoint(e,t,i){return{x:e.xx*t+e.xy*i+e.dx,y:e.yx*t+e.yy*i+e.dy}}_sandwich(e,t,i){return this.multiply([this.translate(t,i),e,this.translate(-t,-i)])}};function us(e,t,i,r){let{xmodifier:o,ymodifier:s}=function(e,t,i){let r,o;switch(i=i||"xMidYMin meet"){case"none":{let i=e.w/t.width,s=e.h/t.height;r=e=>i*(e-(t.xmin||0)),o=e=>s*(e-(t.ymin||0));break}case"xMidYMin meet":{let i=function({box:e,parentBox:t,vAlign:i="middle",hAlign:r="center"}){let o,s=e.w/t.w,a=e.h/t.h,n=s>1?1:-1,l=a>1?1:-1;s=s>1?1/s:s,a=a>1?1/a:a,-1===n&&-1===l?o=1/Math.max(s,a):-1===n&&1===l?o=a:1===n&&-1===l?o=s:1===n&&1===l&&(o=Math.min(s,a));let d={x:0,y:0,w:e.w*o,h:e.h*o,ratio:o};switch(r){case"left":d.x=0;break;case"right":d.x=t.w-d.w;break;default:d.x=(t.w-d.w)/2}switch(i){case"top":d.y=0;break;case"bottom":d.y=t.h-d.h;break;default:d.y=(t.h-d.h)/2}return d}({box:{w:t.width,h:t.height},parentBox:e});r=e=>i.x+i.ratio*(e-(t.xmin||0)),o=e=>i.y+i.ratio*(e-(t.ymin||0));break}}return{xmodifier:r,ymodifier:o}}(e,i,r),a=o(t.x),n=s(t.y),l=e.w-o(t.x+t.w),d=e.h-s(t.y+t.h);return{x:a,y:n,r:l,b:d,w:e.w-l-a,h:e.h-d-n}}function gs(e){return Number("string"==typeof e?e.replace("px",""):e)||0}function ms(){let e,t={};return{updateBBox:i=>{let r,o=i.action,s=i.args,a=s.length;switch(o){case"M":case"L":for(r=0;r<a;r+=2)c(s[r],s[r+1]);t.x=s[a-2],t.y=s[a-1],"M"===o&&(t.xm=t.x,t.ym=t.y);break;case"H":for(r=0;r<a;++r)c(s[r],t.y);t.x=s[a-1];break;case"V":for(r=0;r<a;++r)c(t.x,s[r]);t.y=s[a-1];break;case"m":{let e=0;for(("x"in t||(c(t.x=s[0],t.y=s[1]),e=2),r=e);r<a;r+=2)c(t.x+=s[r],t.y+=s[r+1]);"m"===o&&(t.xm=t.x,t.ym=t.y);break}case"l":for(r=0;r<a;r+=2)c(t.x+=s[r],t.y+=s[r+1]);break;case"h":for(r=0;r<a;++r)c(t.x+=s[r],t.y);break;case"v":for(r=0;r<a;++r)c(t.x,t.y+=s[r]);break;case"C":for(r=0;r<a;r+=6)n(t.x,t.y,s[r],s[r+1],t.cx=s[r+2],t.cy=s[r+3],t.x=s[r+4],t.y=s[r+5]);break;case"c":for(r=0;r<a;r+=6)n(t.x,t.y,t.x+s[r],t.y+s[r+1],t.cx=t.x+s[r+2],t.cy=t.y+s[r+3],t.x+=s[r+4],t.y+=s[r+5]);break;case"S":for(r=0;r<a;r+=4){let e="number"==typeof t.cx?t.cx:t.x,i="number"==typeof t.cy?t.cy:t.y,o=t.x+(t.x-e),a=t.y+(t.y-i);n(t.x,t.y,o,a,t.cx=s[r],t.cy=s[r+1],t.x=s[r+2],t.y=s[r+3])}break;case"s":for(r=0;r<a;r+=4){let e="number"==typeof t.cx?t.cx:t.x,i="number"==typeof t.cy?t.cy:t.y,o=t.x+(t.x-e),a=t.y+(t.y-i);n(t.x,t.y,o,a,t.cx=t.x+s[r],t.cy=t.y+s[r+1],t.x+=s[r+2],t.y+=s[r+3])}break;case"Q":for(r=0;r<a;r+=4)l(t.x,t.y,t.qx=s[r],t.qy=s[r+1],t.x=s[r+2],t.y=s[r+3]);break;case"q":for(r=0;r<a;r+=4)l(t.x,t.y,t.qx=t.x+s[r],t.qy=t.y+s[r+1],t.x+=s[r+2],t.y+=s[r+3]);break;case"T":for(r=0;r<a;r+=2){let e="number"==typeof t.qx?t.qx:t.x,i="number"==typeof t.qy?t.qy:t.y,o=t.x+(t.x-e),a=t.y+(t.y-i);l(t.x,t.y,t.qx=o,t.qy=a,t.x=s[r],t.y=s[r+1])}break;case"t":for(r=0;r<a;r+=2){let e="number"==typeof t.qx?t.qx:t.x,i="number"==typeof t.qy?t.qy:t.y,o=t.x+(t.x-e),a=t.y+(t.y-i);l(t.x,t.y,t.qx=o,t.qy=a,t.x+=s[r],t.y+=s[r+1])}break;case"A":for(r=0;r<a;r+=7)d(t.x,t.y,s[r],s[r+1],s[r+2],s[r+3],s[r+4],t.x=s[r+5],t.y=s[r+6]);break;case"a":for(r=0;r<a;r+=7)d(t.x,t.y,s[r],s[r+1],s[r+2],s[r+3],s[r+4],t.x+=s[r+5],t.y+=s[r+6]);break;case"z":case"Z":t.x=t.xm,t.y=t.ym}switch(o){case"M":case"L":case"H":case"V":case"A":case"m":case"l":case"h":case"v":case"a":t.cx=null,t.cy=null,t.qx=null,t.qy=null}function n(e,t,i,r,o,s,a,n){function l(e,t,i,r,o){let s=1-e;return s*s*s*t+3*s*s*e*i+3*s*e*e*r+e*e*e*o}for(let d=0;d<10;d++){let h=.1*(d+1);c(l(h,e,i,o,a),l(h,t,r,s,n))}}function l(e,t,i,r,o,s){function a(e,t,i,r){let o=1-e;return o*o*t+2*o*e*i+e*e*r}for(let n=0;n<10;n++){let l=.1*(n+1);c(a(l,e,i,o),a(l,t,r,s))}}function d(e,t,i,r,o,s,a,n,l){let d=function(e,t,i,r,o,s,a,n,l){let d=(e-n)/2,c=(t-l)/2,h=is(o%360),p=Math.cos(h),u=Math.sin(h),g=p*d+u*c,m=-u*d+p*c;i=Math.abs(i),r=Math.abs(r);let b=i*i,_=r*r,f=g*g,v=m*m,y=f/b+v/_;y>1&&(i=Math.sqrt(y)*i,r=Math.sqrt(y)*r,b=i*i,_=r*r);let w=s===a?-1:1,x=(b*_-b*v-_*f)/(b*v+_*f);x=x<0?0:x;let C,S,N=w*Math.sqrt(x),E=N*(i*m/r),k=N*(-r*g/i),I=(e+n)/2,T=(t+l)/2,M=I+(p*E-u*k),G=T+(u*E+p*k),A=(g-E)/i,P=(m-k)/r,L=(-g-E)/i,D=(-m-k)/r;S=Math.sqrt(A*A+P*P),C=A,w=P<0?-1:1;let B=rs(w*Math.acos(C/S));S=Math.sqrt((A*A+P*P)*(L*L+D*D)),C=A*L+P*D,w=A*D-P*L<0?-1:1;let R=rs(w*Math.acos(C/S));return!a&&R>0?R-=360:a&&R<0&&(R+=360),R%=360,B%=360,{cx:M,cy:G,rx:i,ry:r,angleFromRad:is(B),angleToRad:is(B+R),rotationRad:h}}(e,t,i,r,o,s,a,n,l),h=d.rotationRad?Math.cos(d.rotationRad):1,p=d.rotationRad?Math.sin(d.rotationRad):0;function u(e){let t=d.angleFromRad+(d.angleToRad-d.angleFromRad)*e,i=t?Math.cos(t):1,r=t?Math.sin(t):0,o=d.rx*i,s=d.ry*r,a=h*o-p*s,n=p*o+h*s;return{x:d.cx+a,y:d.cy+n}}for(let e=0;e<10;e++){let t=u(.1*(e+1));c(t.x,t.y)}}function c(t,i){let r=e;r&&"l"in r?(r.l>t&&(r.l=t),r.r<t&&(r.r=t),r.t>i&&(r.t=i),r.b<i&&(r.b=i)):e={l:t,b:i,r:t,t:i}}t.prevAction=o},getBBox:()=>e}}var bs=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,_s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};function fs(e,t){let i=e.match(bs);if(!i)return;function r(e,i){let r=_s[e.toLowerCase()];if("number"==typeof r)if(r){if(i.length===r)t(e,i);else if(i.length>=r){let o,s=function(e,t){let i=e.length;if(i&&!t)return[e];let r=[];for(let o=0;o<i;o+=t){let s=Math.min(i-o,t);r.push(e.slice(o,o+s))}return r}(i,r);s.length>1&&("M"===e||"m"===e)&&(o="M"===e?"L":"l"),s.forEach(((i,s)=>{i.length===r&&t(0===s?e:o||e,i)}))}}else t(e,[])}let o,s=[],a=i.length;for(let e=0;e<a;e++){let t=i[e],a=parseFloat(t);0===a&&"00"===t&&(t="0",i[e]="0",e--),isNaN(a)?(o&&r(o,s),s=[],o=t):s.push(a)}r(o,s)}var vs={shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},ys="http://www.w3.org/1999/xlink",ws="http://www.w3.org/2000/svg",xs=0,Cs={color:"black",style:"solid",width:0,cap:"butt",join:4},Ss={type:"path",path:""},Ns={type:"polyline",points:[]},Es={type:"polygon",points:[]},ks={type:"rect",x:0,y:0,w:100,h:100,r:0},Is={type:"line",x1:0,y1:0,x2:100,y2:100},Ts={type:"ellipse",cx:0,cy:0,rx:200,ry:100},Ms={type:"circle",cx:0,cy:0,r:100},Gs={type:"image",x:0,y:0,w:0,h:0,src:""},As={type:"text",x:0,y:0,text:"",align:"start",decoration:"none"};function Ps(e){return"w"===e?"width":"h"===e?"height":e}function Ls(e,t=!1){let i=e;i._rawNode=null,i.getAttribute=e=>i._rawNode.attrs[e],i.setAttribute=(e,t)=>{i._rawNode.attrs[e]=t,i.rawNode?.setAttribute(e,t)},i._setAttributeNS=(e,t,r)=>{i._rawNode.attrs[t]=r,i.rawNode?.setAttributeNS(e,t,r)},i.removeAttribute=e=>{delete i._rawNode.attrs[e],i.rawNode?.removeAttribute(e)},i.getStyle=()=>i._rawNode.style,i.setStyle=e=>{if(i._rawNode.style?i._rawNode.style=ds(i._rawNode.style,e):i._rawNode.style=e,i.rawNode)for(let t in e){let r=e[t];i.rawNode.style[t]=r??""}},i._setRawNode=(e,r,o)=>{i._rawNode={name:r,attrs:{}},o&&i._assignRawNode(document.createElementNS(e,r)),!t&&i.shape&&("image"!==i.shape.type&&i.setAttribute("fill","none"),i.setAttribute("fill-opacity","0"),i.setAttribute("stroke","none"),i.setAttribute("stroke-opacity","0"),i.setAttribute("stroke-width","1"),i.setAttribute("stroke-linecap","butt"),i.setAttribute("stroke-linejoin","miter"),i.setAttribute("stroke-miterlimit","4"))},i._assignRawNode=e=>{e||console.error("Empty rawNode assignment. This might be a mistake."),i.rawNode=e,i._rawNode.pendingEvents&&(i._rawNode.pendingEvents.forEach((e=>{e.handle=wi(i.rawNode,e.type,e.callback)})),i._rawNode.pendingEvents=null)},i._setText=e=>{if(i._rawNode.text=e,i.rawNode){let t=i.rawNode;t.firstChild?t.firstChild.nodeValue=e:t.appendChild(document.createTextNode(e))}},i._appendRawNodeChild=(e,t)=>{i._rawNode.children=i._rawNode.children||[],i._rawNode.children.push(e._rawNode),!t&&i.rawNode?.appendChild(e.rawNode)},i._removeRawNodeChild=e=>{nt(i._rawNode.children,e._rawNode),i.rawNode&&e.rawNode&&i.rawNode===e.rawNode.parentNode&&i.rawNode.removeChild(e.rawNode)},i._emptryRawNode=()=>{i._rawNode.children=null;let e=i.rawNode;for(;e?.lastChild;)e.removeChild(e.lastChild)},i._createDefsNode=()=>{i._rawNode.children=i._rawNode.children||[],i._rawNode.children.push({name:"defs"}),i.rawNode?.appendChild(document.createElementNS(ws,"defs"))},i._getHTMLString=e=>{let t=e?.removeHidden;return function i(r){if(t&&("none"===r.style?.display||"text"===r.name&&"0"===r.attrs?.["fill-opacity"]))return"";let o="<"+r.name;"svg"===r.name&&(o+=' xmlns="'+ws+'"',o+=' xmlns:xlink="'+ys+'"');for(let e in r.attrs)o+=" "+e+'="'+r.attrs[e]+'"';if(!e||!e.noStyle){let e;for(let t in r.style)e=e||"",null!=r.style[t]&&(e+=t+":"+r.style[t]+";");e&&(o+=' style="'+e+'"')}let s=r.text?function(e){return Br(e,Rr,Fr)}(r.text):"";return!s&&r.children&&r.children.forEach((e=>{s+=i(e)})),o+=">"+s+"</"+r.name+">",o}(i._rawNode)},i.on=(e,t)=>{if(i.rawNode)return wi(i.rawNode,e,t);i._rawNode.pendingEvents=i._rawNode.pendingEvents||[];let r={type:e,callback:t,handle:null};return i._rawNode.pendingEvents.push(r),{remove:()=>{r.handle?r.handle.remove():i._rawNode.pendingEvents&&nt(i._rawNode.pendingEvents,r)}}},i._destroyRawNode=()=>{i._rawNode=null,i.rawNode=null}}function Ds(e,t=!1){let i=e||{};return Ls(i,t),i.getFill=()=>i.fillStyle,i.setFill=e=>{if(e){let t=ls(e);i.setAttribute("fill",t.toCss()),i.setAttribute("fill-opacity",t.a+""),i.setAttribute("fill-rule","evenodd"),i.fillStyle=t}else i.setAttribute("fill","none"),i.setAttribute("fill-opacity","0"),i.fillStyle=null;return i},i.getStroke=()=>i.strokeStyle,i.setStroke=e=>{if(i.strokeStyle=e,!e)return i.strokeStyle=null,i.setAttribute("stroke","none"),i.setAttribute("stroke-opacity","0"),i;let t=i.strokeStyle=ds({},Cs,e),r=t.color=ls(t.color);if(t){let e=t.width<0?0:t.width;i.setAttribute("stroke",r.toCss()),i.setAttribute("stroke-opacity",r.a+""),i.setAttribute("stroke-width",(e||0)+""),i.setAttribute("stroke-linecap",t.cap),"number"==typeof t.join?(i.setAttribute("stroke-linejoin","miter"),i.setAttribute("stroke-miterlimit",t.join+"")):i.setAttribute("stroke-linejoin",t.join);let o=t.style.toLowerCase();if("solid"!==o)if(o in vs){let r,s=vs[o].slice();for(r=0;r<s.length;++r)s[r]*=e;if("butt"!==t.cap){for(r=0;r<s.length;r+=2)s[r]-=e,s[r]<1&&(s[r]=1);for(r=1;r<s.length;r+=2)s[r]+=e}i.setAttribute("stroke-dasharray",s.join(","))}else i.setAttribute("stroke-dasharray",o)}return i},i.applyTransform=e=>(i.setTransform(ps.multiply([i.matrix,e])),i),i.setTransform=e=>(i.matrix=Array.isArray(e)?ps.multiply(e):new hs(e),function(){if(i.matrix){let e=i.matrix;i.setAttribute("transform","matrix("+e.xx.toFixed(8)+","+e.yx.toFixed(8)+","+e.xy.toFixed(8)+","+e.yy.toFixed(8)+","+e.dx.toFixed(8)+","+e.dy.toFixed(8)+")")}else i.removeAttribute("transform");return i}()),i._setShape=e=>{i.shape=ds({},i.shape,e);for(let e in i.shape)if("type"!==e&&"path"!==e){let t=i.shape[e];"w"===e||"h"===e?t=t<0?0:t:null==t&&("x"===e||"y"===e)&&(t=0),i.setAttribute(Ps(e),t)}return i},i.setClip=e=>{i.clip=e;let t,r=i.getAttribute("clip-path");if(r&&(r=r.substr(5).replace(")",""),i.parent._rawNode.children&&i.parent._rawNode.children.some((e=>"clipPath"===e.name&&e.attrs.id===r&&(t=e,!0))),t&&(nt(i.parent._rawNode.children,t),i.rawNode&&t)))for(let e=0,t=i.rawNode.parentNode.children.length;e<t;e++){let t=i.rawNode.parentNode.children[e];if(t.getAttribute("id")===r){i.rawNode.parentNode.removeChild(t);break}}if(e){let r="w"in e?"rect":"ellipse",o="gfx_clip"+ ++xs;i.setAttribute("clip-path","url(#"+o+")");let s={name:r,attrs:{}};for(let t in e)s.attrs[Ps(t)]=e[t];if(t={name:"clipPath",attrs:{id:o},children:[s]},i.parent._rawNode.children.splice(i.parent._rawNode.children.indexOf(i._rawNode),0,t),i.rawNode){let t=document.createElementNS(ws,"clipPath");t.setAttribute("id",o);let s=document.createElementNS(ws,r);for(let t in e)s.setAttribute(Ps(t),e[t]);t.appendChild(s),i.rawNode.parentNode.insertBefore(t,i.rawNode)}}else i.removeAttribute("clip-path");return i},i._destroy=()=>{i._destroyRawNode()},i}function Bs(e){let t={};return Ds(t),t.shape=ds({},e?Ns:Es),t._setShape=e=>{t.shape=ds({},t.shape,e);let i=[];return t.shape.points.forEach((e=>{i.push(e.x.toFixed(8),e.y.toFixed(8))})),t.setAttribute("points",i.join(" ")),t},t.getBoundingBox=()=>{if(!t.shape.points.length)return null;let e=t.shape.points,i=e.length,r=e[0],o={l:r.x,t:r.y,r:r.x,b:r.y};for(let t=1;t<i;++t)r=e[t],o.l>r.x&&(o.l=r.x),o.r<r.x&&(o.r=r.x),o.t>r.y&&(o.t=r.y),o.b<r.y&&(o.b=r.y);return{x:o.l,y:o.t,w:o.r-o.l,h:o.b-o.t}},t}function Rs(){let e={};Ds(e),e.shape=ds({},Ss),e.segments=[],e.segmented=!1,e.absolute=!0;let t,i,r=e._setShape;function o(){if(!e.segmented){let i=e.shape.path;t=[],function(t){e.segments=[],e.absolute=!0,fs(t,((e,t)=>s(e,t)))}(i),e.shape.path=t.join(""),t=null,e.segmented=!0}}function s(r,o){let s={action:r,args:o};e.segments.push(s),function(r){switch(r.action){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"A":e.absolute=!0;break;case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":e.absolute=!1}let o,s=r.args,n=s.length;if(i?.updateBBox(r),t)for(t.push(r.action),o=0;o<n;++o)t.push(a(s[o],!0));else{for(e.shape.path+=r.action,o=0;o<n;++o)e.shape.path+=a(s[o],!0);e.setAttribute("d",e.shape.path)}}(s)}function a(e,t){return e>=0&&t?" "+e:e+""}return e._setShape=t=>(r(t),e.segmented=!1,e.segments=[],o(),e.shape.path?e.setAttribute("d",e.shape.path):e.removeAttribute("d"),e),e.moveTo=(t,i)=>(o(),s(e.absolute?"M":"m",[t,i]),e),e.lineTo=(t,i)=>(o(),s(e.absolute?"L":"l",[t,i]),e),e.hLineTo=t=>(o(),s(e.absolute?"H":"h",[t]),e),e.vLineTo=t=>(o(),s(e.absolute?"V":"v",[t]),e),e.arcTo=(t,i,r,a,n,l,d)=>(o(),s(e.absolute?"A":"a",[t,i,r,a?1:0,n?1:0,l,d]),e),e.curveTo=(t,i,r,a,n,l)=>(o(),s(e.absolute?"C":"c",[t,i,r,a,n,l]),e),e.smoothCurveTo=(t,i,r,a)=>(o(),s(e.absolute?"S":"s",[t,i,r,a]),e),e.qCurveTo=(t,i,r,a)=>(o(),s(e.absolute?"Q":"q",[t,i,r,a]),e),e.qSmoothCurveTo=(t,i)=>(o(),s(e.absolute?"T":"t",[t,i]),e),e.closePath=()=>(o(),s("Z",[]),e),e.getBoundingBox=()=>{i=ms(),e.segmented=!1,o();let t=i.getBBox();return i=null,t?{x:t.l,y:t.t,w:t.r-t.l,h:t.b-t.t}:{x:NaN,y:NaN,w:NaN,h:NaN}},e}function Fs(e,t=!1){let i=e||{};function r(e,t,r){return i._rawNode||i.rawNode?(e._setRawNode(ws,t,!!i.rawNode),e._setShape(r),i.add(e),e):null}return function(e,t=!1){let i=e||{};i.children=[];let r,o=0;i.openBatch=()=>(!o&&i.rawNode&&(r=document.createDocumentFragment()),++o,i),i.closeBatch=()=>(o=o>0?--o:0,r&&!o&&(i.rawNode.appendChild(r),r=null),i),i.add=e=>{if(e.parent)throw new Error("The shape is already added.");return r?(r.appendChild(e.rawNode),i._appendRawNodeChild(e,!0)):i._appendRawNodeChild(e,!1),i.children.push(e),e.parent=i,e.setClip(e.clip),i},i.remove=e=>{if(e.parent!==i)throw new Error("Shape doesn't belong to this parent.");return i._removeRawNodeChild(e),r&&r===e.rawNode.parentNode&&r.removeChild(e.rawNode),nt(i.children,e),e.parent=null,i},i.clear=e=>{let r;i._emptryRawNode(),t&&i._createDefsNode();for(let t=0;t<i.children.length;++t)r=i.children[t],r.parent=null,e&&r._destroy();return i.children=[],i},i.getBoundingBox=()=>{if(!i.children||!i.children.length)return null;let e=null;return i.children.forEach((t=>{let i=t.getBoundingBox();if(!i)return;let r=t.matrix;r&&(i=ps.multiplyRectangle(r,i)),e?(e.x=Math.min(e.x,i.x),e.y=Math.min(e.y,i.y),e.endX=Math.max(e.endX,i.x+i.w),e.endY=Math.max(e.endY,i.y+i.h)):e={x:i.x,y:i.y,endX:i.x+i.w,endY:i.y+i.h,w:null,h:null}})),e&&(e.w=e.endX-e.x,e.h=e.endY-e.y),e.endX=void 0,e.endY=void 0,e}}(i,t),i.createGroup=()=>r(function(){let e={};return Ds(e,!0),Fs(e),e._destroy=()=>{e.clear(!0),e._destroyRawNode()},e}(),"g"),i.createRect=e=>r(function(){let e={};Ds(e),e.shape=ds({},ks);let t=e._setShape;return e._setShape=i=>(t(i),null!=e.shape.r&&(e.setAttribute("ry",e.shape.r+""),e.setAttribute("rx",e.shape.r+"")),e),e.getBoundingBox=()=>e.shape,e}(),"rect",e),i.createLine=e=>r(function(){let e={};return Ds(e),e.shape=ds({},Is),e.getBoundingBox=()=>({x:Math.min(e.shape.x1,e.shape.x2),y:Math.min(e.shape.y1,e.shape.y2),w:Math.abs(e.shape.x2-e.shape.x1),h:Math.abs(e.shape.y2-e.shape.y1)}),e}(),"line",e),i.createCircle=e=>r(function(){let e={};return Ds(e),e.shape=ds({},Ms),e.getBoundingBox=()=>({x:e.shape.cx-e.shape.r,y:e.shape.cy-e.shape.r,w:2*e.shape.r,h:2*e.shape.r}),e}(),"circle",e),i.createEllipse=e=>r(function(){let e={};return Ds(e),e.shape=ds({},Ts),e.getBoundingBox=()=>({x:e.shape.cx-e.shape.rx,y:e.shape.cy-e.shape.ry,w:2*e.shape.rx,h:2*e.shape.ry}),e}(),"ellipse",e),i.createPath=e=>r(Rs(),"path",e),i.createPolyline=e=>r(Bs(!0),"polyline",e),i.createPolygon=e=>r(Bs(!1),"polygon",e),i.createText=e=>r(function(){let e={};return Ds(e),e.shape=ds({},As),e._setShape=t=>{e.shape=ds({},e.shape,t);let i=e.shape;return e.setAttribute("x",i.x+""),e.setAttribute("y",i.y+""),e.setAttribute("text-anchor",i.align),e.setAttribute("text-decoration",i.decoration),e.setAttribute("kerning","auto"),e.setAttribute("text-rendering","auto"),e._setText(i.text),e},e.setFont=t=>(e.font=t,e.setAttribute("font-style",t.fontStyle||"normal"),e.setAttribute("font-weight",t.fontWeight||"normal"),e.setAttribute("font-size",(t.fontSize||0)+"px"),e.setAttribute("font-family",t.fontFamily||"Verdana"),e),e.getBoundingBox=()=>null,e}(),"text",e),i.createImage=e=>r(function(){let e={};return Ds(e),e.shape=ds({},Gs),e._setShape=t=>{e.shape=ds({},e.shape,t);for(let t in e.shape)if("type"!==t&&"src"!==t){let i=e.shape[t];("w"===t||"h"===t)&&(i=i<0?0:i),e.setAttribute(Ps(t),i)}return e.setAttribute("preserveAspectRatio","none"),e._setAttributeNS(ys,"xlink:href",e.shape.src),e},e.getBoundingBox=()=>e.shape,e}(),"image",e),i.createShape=e=>{switch(e.type){case"path":return i.createPath(e);case"rect":return i.createRect(e);case"line":return i.createLine(e);case"circle":return i.createCircle(e);case"ellipse":return i.createEllipse(e);case"polyline":return i.createPolyline(e);case"polygon":return i.createPolygon(e);case"image":return i.createImage(e);case"text":return i.createText(e)}},i}function Vs(){let e={isSurface:!0};Ls(e),Fs(e,!0),e.setDimensions=(t,i)=>{if(!e._rawNode&&!e.rawNode)return e;let r=t<0?0:t,o=i<0?0:i;return e.roundDimensions&&(r=Math.round(2*r)/2,o=Math.round(2*o)/2),e.setAttribute("width",r+""),e.setAttribute("height",o+""),e},e.getDimensions=()=>({w:parseFloat(e.getAttribute("width")),h:parseFloat(e.getAttribute("height"))}),e.getContentBoundingBoxInViewPort=()=>{let t=e.getDimensions(),i=function(e,t,i){if(e){let t=e.split(" ");return{xmin:gs(t[0]),ymin:gs(t[1]),width:gs(t[2]),height:gs(t[3])}}return t&&i?{xmin:0,ymin:0,width:gs(t),height:gs(i)}:null}(e.getAttribute("viewBox"),t.w,t.h);return us(t,e.getBoundingBox(),i,e.getAttribute("preserveAspectRatio"))},e._render=()=>{if(e.rawNode)return;let t=e._parent||document.createElement("div");t.innerHTML=e._getHTMLString(),e._assignRawNode(t.children[0])};let t=e._assignRawNode;return e._assignRawNode=i=>{t(i),function e(t){let i=0;t.children.forEach((r=>{let o=t.rawNode.children[i];for(;"defs"===o.nodeName||"clipPath"===o.nodeName;)o=t.rawNode.children[++i];i++,r._assignRawNode(o),r.children&&e(r)}))}(e)},e.destroy=()=>{e._destroyRawNode(),e._parent&&(e._parent.innerHTML="",e._parent=null)},e}var Os=Object.getOwnPropertyDescriptor,Hs=["after-centered","before-centered","above-centered","below-centered"],zs=class extends kr{constructor(e){super(e),this._templateString="\n  <div class='esriGETooltip esriGETooltipLeft'>\n    <div class='esriGETooltipContainer esriGETooltipContents' data-attach-point='_containerNode'></div>\n    <div class='esriGETooltipConnector' data-attach-point='_connectorNode'></div>\n  </div>",this.duration=200}postCreate(){ir(this.domNode,document.body)}show(e,t,i){this._stopAnimation(),this._lastRenderFunc=()=>this._render(e,t,i),this._lastRenderFunc(),"number"==typeof this.duration&&(this.domNode.style.opacity="0",this._fadeInHandle=function(e){return as({obj:e.node.style,duration:e.duration||250,properties:{opacity:{start:0,end:1}},onEnd(){e.onEnd&&e.onEnd()}})}({node:this.domNode,duration:this.duration,onEnd:()=>this.domNode.style.setProperty("visibility","visible")}))}_render(e,t,i){"string"==typeof e?this._containerNode.innerHTML=e:(this._containerNode.innerHTML="",ir(e.domNode||e,this._containerNode));let r=Lo(this.domNode,t,i?.length?i:Hs,this._orient.bind(this)),o=$i(t);this.domNode.style.opacity=function(e){let t=e.map(ts);return t.every((e=>t.every((t=>e===t||!(e[0]>t[2]||t[0]>e[2]||e[1]>t[3]||t[1]>e[3])))))}([o,{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}])?"":"0.001";let s=r.aroundNodePos;"M"===r.corner.charAt(0)&&"M"===r.aroundCorner.charAt(0)?(this._connectorNode.style.top=s.y+(s.h-this._connectorNode.offsetHeight>>1)-r.y+"px",this._connectorNode.style.left=""):"M"===r.corner.charAt(1)&&"M"===r.aroundCorner.charAt(1)?this._connectorNode.style.left=s.x+(s.w-this._connectorNode.offsetWidth>>1)-r.x+"px":(this._connectorNode.style.left="",this._connectorNode.style.top=""),this._drawBackground()}updatePosition(){this._lastRenderFunc?.()}_orient(e,t,i,r,o){this._connectorNode.style.top="";let s=r.w,a=r.h;e.className="esriGETooltip "+{"MR-ML":"esriGETooltipRight","ML-MR":"esriGETooltipLeft","TM-BM":"esriGETooltipAbove","BM-TM":"esriGETooltipBelow","BL-TL":"esriGETooltipBelow esriGETooltipABLeft","TL-BL":"esriGETooltipAbove esriGETooltipABLeft","BR-TR":"esriGETooltipBelow esriGETooltipABRight","TR-BR":"esriGETooltipAbove esriGETooltipABRight","BR-BL":"esriGETooltipRight","BL-BR":"esriGETooltipLeft"}[this._orientKey=t+"-"+i]+(this.class?" "+this.class:""),this.domNode.style.width="auto";let n=$i(this.domNode);n.w=Math.ceil(n.w);let l=Math.min(Math.max(s,1),n.w);if(Yi(this.domNode,{w:l}),"B"===i.charAt(0)&&"B"===t.charAt(0)){let t=$i(e),i=this._connectorNode.offsetHeight;if(t.h>a){let e=a-(o.h+i>>1);this._connectorNode.style.top=e+"px",this._connectorNode.style.bottom=""}else this._connectorNode.style.bottom=Math.min(Math.max(o.h/2-i/2,0),t.h-i)+"px",this._connectorNode.style.top=""}else this._connectorNode.style.top="",this._connectorNode.style.bottom="";return this._drawBackground(),Math.max(0,n.w-s)}_drawBackground(){if(!this._orientKey)return;let e="function"==typeof this.customStyle?this.customStyle():this.customStyle,t=this.domNode.clientWidth,i=this.domNode.clientHeight,r=$i(this.domNode,!0),o=$i(this._connectorNode,!0),s=$i(this._containerNode,!0);o.x-=r.x,o.y-=r.y,s.x-=r.x,s.y-=r.y,s.x+=1,s.y+=1,s.w-=2,s.h-=2,this._surface?.destroy(),this._surfaceContainer&&sr(this._surfaceContainer);let a=this._surfaceContainer=er("div",{class:"esriGEAbsoluteStretched"},this.domNode,"first");a.style.pointerEvents="none";let n,l=this._surface=function(e,t,i,r){let o=Vs();return o.roundDimensions=r,o._setRawNode(ws,"svg",!!e),o.setAttribute("overflow","hidden"),o.setDimensions(t,i),o.setStyle({position:"absolute",left:0,top:0}),o._createDefsNode(),e&&(o._parent=e,e.appendChild(o.rawNode)),o}(a,t,i),d=[{x:s.x,y:s.y},{x:s.x+s.w,y:s.y},{x:s.x+s.w,y:s.y+s.h},{x:s.x,y:s.y+s.h},{x:s.x,y:s.y}],c=o.x+o.w/2,h=o.y+o.h/2;switch(this._orientKey){case"BL-TL":case"BM-TM":case"BR-TR":n=[{x:c-5,y:s.y},{x:c,y:h},{x:c+5,y:s.y}],d.splice.apply(d,[1,0].concat(n));break;case"ML-MR":case"BL-BR":n=[{x:s.x+s.w,y:h-5},{x:c,y:h},{x:s.x+s.w,y:h+5}],d.splice.apply(d,[2,0].concat(n));break;case"TM-BM":case"TL-BL":case"TR-BR":n=[{x:c+5,y:s.y+s.h},{x:c,y:h},{x:c-5,y:s.y+s.h}],d.splice.apply(d,[3,0].concat(n));break;case"MR-ML":case"BR-BL":n=[{x:s.x,y:h+5},{x:c,y:h},{x:s.x,y:h-5}],d.splice.apply(d,[4,0].concat(n))}let p=l.createPolyline({points:d}),u=e?.backgroundColor||"white",g=e?.borderColor||"#d3d3d3";p.setFill(u).setStroke({color:g,width:1,join:"round"}),e?.color&&(this._containerNode.style.color=e.color)}hide(){this._stopAnimation(),"number"==typeof this.duration&&(this._fadeOutHandle=function(e){return as({obj:e.node.style,duration:e.duration||250,properties:{opacity:{start:1,end:0}},onEnd(){e.onEnd&&e.onEnd()}})}({node:this.domNode,duration:this.duration,onEnd:()=>this.domNode.style.setProperty("visibility","hidden")}))}_stopAnimation(){this._fadeInHandle?.stop(),this._fadeInHandle=null,this._fadeOutHandle?.stop(),this._fadeOutHandle=null}};zs=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Os(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],zs);var Ws,Us=[],js={show(e){let t=e.textOrNodeOrWidget,i=e.aroundNode,r=e.position,o=e.classes,s=e.style;Us.forEach((e=>e._shownTooltip&&(e._shownTooltip.domNode.style.display="none"))),Us.length=0,"string"==typeof r&&(r=[r]);let a={after:"after-centered",before:"before-centered"};r=r?.map((e=>a[e]||e));let n=new zs({class:Array.isArray(o)?o.join(" "):o,customStyle:s,duration:e.duration});return n.show(t,i,r),i._shownTooltip=n,e.keepWhenOtherShown||Us.push(i),n},hide(e){e&&(e._shownTooltip?.destroy(),e._shownTooltip=void 0,nt(Us,e))}};function qs(e,t,i){let r=e;if(i=i||{},!r||(Ys(r),r.__setTooltipToNodeMouseEnterHandle&&r.__setTooltipToNodeMouseEnterHandle.remove(),r.__setTooltipToNodeKeyDownHandle&&r.__setTooltipToNodeKeyDownHandle.remove(),!t))return null;!i?.skipTabindex&&r.setAttribute("tabindex","0");let o=!1;function s(){!o&&!Qs(r)&&$s(r,t,i)}return vi()?r.__setTooltipToNodeMouseEnterHandle=Zo(r,s):(r.__setTooltipToNodeMouseEnterHandle=wi(r,"over",s),r.__setTooltipToNodeKeyDownHandle=wi(r,"keydown",(e=>{[Xo.Enter,Xo.Space].includes(e.code)&&(i.hideOnClick?Ys(r):!r._shownTooltip&&s())}))),i.showTooltip&&s(),{remove(){t=null,Ys(r)},suspend(){Ys(r),o=!0},resume(){o=!1},refresh(){r._shownTooltip&&s()}}}function $s(e,t,i){let r=e;(i=i||{}).stayOnHover=null==i.stayOnHover?"hyperlink":i.stayOnHover;let o=i.stayOnHover;if(!r)return null;Ys(r);let s,a="function"==typeof t?t():t;if(!a)return null;if(i.textAlign&&"string"==typeof a&&(a="<div class='"+("start"===i.textAlign?"esriGEStart esriGEFlexStart":"end"===i.textAlign?"esriGEEnd esriGEFlexEnd":"")+"'>"+a+"</div>"),"hyperlink"===i.stayOnHover){let e;"string"==typeof a?e=a:a instanceof HTMLElement?e=a.outerHTML:a.domNode instanceof HTMLElement&&(e=a.domNode.outerHTML),o=e&&/href=|esriGELink|esriGECalciteButton/.test(e)}function n(e,t){return Qr(e,{checkAllChildren:!0,event:t})}function l(){Ys(r);let e=Array.isArray(i.classes)?i.classes.join(" "):i.classes;e=e||"",o||(e+=" esriGENonInteractable"),i.notRestricted&&(e+=" notRestricted"),s=js.show({textOrNodeOrWidget:a,aroundNode:r,position:i.position,classes:e,style:i.style,duration:i.duration,keepWhenOtherShown:i.keepWhenOtherShown})}if(Li(r,"esriGESimpleTextTooltip"),l(),i.ignoreMousePosition||(vi()?r.__setTooltipToNodeMouseLeaveHandle=wi(document.body,"press",(e=>{(!o||!n(s?.domNode,e))&&!n(r,e)&&Ys(r)})):r.__setTooltipToNodeMouseLeaveHandle=xi(r,"mouseout",(()=>{!o&&!n(r)&&Ys(r)}))),i.ignoreNodeRemoval||(r.__setTooltipToNodeInLayoutHandle=setInterval((()=>{!mr(r)&&Ys(r)}),50)),vi()||(r.__setTooltipToNodeMouseOverHandle=setInterval((()=>{!i.ignoreMousePosition&&(!o||!n(s.domNode))&&!n(r)&&r!==document.activeElement&&!gr(document.activeElement,s.domNode)&&Ys(r)}),300),r.__setTooltipToNodeClickHandle=wi(r,"click",(()=>{i.hideOnClick?Ys(r):!r._shownTooltip&&l()})),o&&(r.__setTooltipToNodeMouseLeaveMasterHandle=wi(s.domNode,"out",(()=>{!n(s.domNode)&&Ys(r)})))),i.autoAdjustPosition){let e=$i(r);r.__setTooltipToNodeAdjustHandle=setInterval((()=>{let t=$i(r);(e.x!==t.x||e.y!==t.y)&&(e=t,r._shownTooltip?.updatePosition())}),30)}return r._shownTooltip}function Qs(e){return!!e?._shownTooltip}function Ys(e){let t=e;t&&(t.removeAttribute("title"),Di(t,"esriGESimpleTextTooltip"),js.hide(t),t.__setTooltipToNodeMouseLeaveHandle&&t.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(t.__setTooltipToNodeInLayoutHandle),clearInterval(t.__setTooltipToNodeMouseOverHandle),t.__setTooltipToNodeClickHandle&&t.__setTooltipToNodeClickHandle.remove(),t.__setTooltipToNodeMouseLeaveMasterHandle&&t.__setTooltipToNodeMouseLeaveMasterHandle.remove(),clearInterval(t.__setTooltipToNodeAdjustHandle))}function Xs(e){Ws&&(!e||Ws.node===e)&&(js.hide(Ws.node),Ws.mouseOutH.remove(),Ws.mouseMoveH.remove(),Ws=null)}var Js=/^tooltip-(before|after|above|above-alt|above-centered|below|below-alt|below-centered)$/;function Ks(e){let t=getComputedStyle(e);return e.offsetWidth-Zi(e,t).w<e.scrollWidth}function Zs(e,t){return wi(e,"over",(e=>{let i,r,o=e.target;if(o===Ws?.node)return;if(Xs(),t?i=t(o):Vi(o,"esriGETrimWithEllipsis")&&Ks(o)&&(i=o.textContent),!i)return;"string"==typeof i?(r=er("div",{style:`max-width:${document.body.clientWidth/2}px;`}),t?r.innerHTML=i:r.textContent=i):r=i;let s=o.className.split(" ").reduce(((e,t)=>{let i=Js.exec(t);return i&&e.push(i[1]),e}),[]);js.show({textOrNodeOrWidget:r,aroundNode:o,position:s.length?s:["above","below"]}),Ws={node:o,mouseOutH:xi(o,["mouseout","mousedown","touchstart"],(()=>{Xs(o)})),mouseMoveH:wi(document.body,"mousemove",(e=>{e.target!==o&&!Qr(o)&&Xs(o)}))}}))}function ea(e){let t=e.position||"before",i=$s(e.node,e.message,{classes:"esriGEClosableTooltip "+(e.tooltipClass||""),position:t,style:e.style||{color:"white",backgroundColor:"#6E6E6E"},ignoreMousePosition:!0,keepWhenOtherShown:!0,autoAdjustPosition:!0,stayOnHover:!0});if(e.timeout&&setTimeout((()=>Ys(e.node)),e.timeout),!e.noCloseButton){let r=er("div",{class:"esriGEClosableTooltipCloseButton"},i.domNode);r.style.right="before"===t?"16px":"2px",wi(r,"click",(()=>{Ys(e.node),e.onClosed?.()}))}return i}function ta(e){let t=e.hoverNode||document.body,i=Ti()?"right":"left",r=e.offset||{x:15,y:0},o=e.toMouseCursor&&$r(),s=e.horizontalOffset,a=er("div",{innerHTML:e.text||""},document.body);e.node&&ir(e.node,a),e.widget&&e.widget.placeAt(a),a.style.position="absolute",a.style.zIndex="10000";let n=Qi(a),l=(t,o)=>{let s,l,d=Ei(t),c=d.clientX,h=d.clientY,p=r.x,u=r.y;"left"===i?c-n.w-p<0&&(s="right"):c+n.w+p>document.body.clientWidth&&(s="left"),h+n.h+u>document.body.clientHeight&&(l="above");let g=s||i;e.positionHandler?e.positionHandler(a,n,c,h):(a.style.left=o?o+"px":c+("left"===g?-n.w-p:p)+"px",a.style.top=h+("above"===l?-n.h-u:u)+"px"),a.style.display=""},d=()=>{a.style.display="none"};d(),o&&l(o,s);let c=[];return c.push(wi(document.body,["mousemove","touchmove"],(e=>{Qr(t)?l(e,s):d()}))),a._remove=()=>{c.forEach((e=>e.remove())),sr(a),delete a._remove},a}function ia(e){e?._remove?.()}var ra=Object.freeze(Object.defineProperty({__proto__:null,autoTooltip:Zs,createFollowCursorTooltip:ta,isTextContentTrimmed:Ks,isTooltipShown:Qs,removeFollowCursorTooltip:ia,removeTooltipFromNode:Ys,setTooltipToNode:qs,showClosableTooltip:ea,showErrorTooltip:function(e){return ea({node:e.node,message:e.message,timeout:e.timeout,position:e.position,style:{color:"#4d4d4d",backgroundColor:"#f3ded7",borderColor:"#e4a793"},noCloseButton:!0})},showTooltipForNode:$s},Symbol.toStringTag,{value:"Module"})),oa=Object.defineProperty,sa=Object.getOwnPropertyDescriptor,aa=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?sa(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&oa(t,i,s),s};var na=class extends Ho{constructor(e){super(e),this.placement="bottom-start",this.popupOffset=20,this.mode="default",this.iconEnd="chevron-down",this.stopEventPropagation=!1,this._disabled=!1}get disabled(){return this.openButton.disabled}set disabled(e){this._setDisabled(e)}_setDisabled(e){this._disabled=e,this.openButton&&(this.openButton.disabled=e),this._popupH&&(this._popupH.getPopover().triggerDisabled=e)}postCreate(){Li(this.domNode,"esriGECalcite esriGECalciteSelect"),super.postCreate(),this.itemRenderer=this.itemRenderer||new Uo({tooltipParent:this.domNode}),"compact"===this.mode&&Li(this.domNode,"compact"),this.openButton=this.createOpenButton(this.mode).placeAt(this.domNode),this.openButton.domNode.role="button",this._handleStopOpenBtnEventPropagation(),this.popup=er("div",{class:"esriGESelectPanel"}),this.popupList=new Qo({class:"esriGECalciteSelectList"+(this.listClass?" "+this.listClass:""),idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:this.itemRenderer,requireSelection:this.requireSelection,selectionAppearance:this.selectionAppearance,keepScrollPosition:this.keepScrollPosition,value:this.value,items:this.items,onChange:e=>{this._popupH.isOpen()&&(this.value=e.value,!this.popupOnChangeClosePreProcessor||this.popupOnChangeClosePreProcessor(e.selectedItem)?(this.popupList.uiUpdateSuspended=!0,this._popupH.close().then((()=>{this._updateOpenButtonText(),this.setFocus()}))):this._updateOpenButtonText(),this._onChange(e))},onItemAction:(e,t,i)=>{this.onItemAction?.(e,t,i)},onItemClick:e=>{this.onItemClick?.(e)}}).placeAt(this.popup),this.popupList.uiUpdateSuspended=!0,this._popupH=to({anchor:this.openButton,placeTo:this.placeToDocument?"document":null,zIndex:this.zIndex,content:this.popup,placement:this.placement,offsetDistance:1,transitionDuration:this.popupTransitionDuration,onBeforeOpen:()=>{this._onPreShow(),function(e){let t=Do({openButton:e.openButton.domNode,placement:e.placement,allowedMinHeight:200,popupMargins:e.popupMargins}),i=t.maxHeight-e.popupOffset,r=i;e.contentBefore&&(r-=e.contentBefore.clientHeight),e.contentAfter&&(r-=e.contentAfter.clientHeight);let o=e.popupList.domNode.style,s=e.popupList.domNode.parentElement.style;i!==r?o.maxHeight=`${r}px`:(s.maxHeight=`${i}px`,o.maxHeight="inherit"),e.popupListWidth?e.popupList.domNode.style.width=("button-width"===e.popupListWidth?Qi(e.openButton.domNode).w-3:e.popupListWidth)+"px":e.popupList.domNode.style.minWidth=t.minWidth+"px"}(this),this.popupList.uiUpdateSuspended=!1,this.popupList.refresh()},onOpen:()=>{let e=this.popupList.getItemNode(this.popupList.getSelectedItem()||this.popupList.items[0]);e&&Ar(e).then((()=>{e.setFocus()})),this._onOpened(),this.onPopupOpened()},onBeforeClose:()=>{this.itemRenderer.hideTooltips()},onClose:()=>{this.popupList.uiUpdateSuspended=!0,this._onClosed(),this.onPopupClosed()}}),this.addHandles(this._popupH),this._popupH.getPopover().triggerDisabled=this._disabled,this._updateOpenButtonText(),this.contentBefore&&this.popup.prepend(this.contentBefore),this.contentAfter&&this.popup.append(this.contentAfter),this.disabled=this._disabled,Zs(this.openButton.domNode)}createOpenButton(e){let t;if("compact"===e)t=new uo({appearance:"transparent",kind:"neutral",iconEnd:this.iconEnd,trim:!0,padding:"0"}),t.domNode.style.height="var(--calcite-font-size-0)",t.domNode.style.borderBlockEnd="1px solid";else{let{style:e,...i}=this.openButtonParams||{};t=new uo({width:"full",appearance:"outline",kind:"neutral",iconEnd:this.iconEnd,alignment:"icon-end-space-between",text:"no-label"===this.selectedLabelRenderer?null:" ",trim:!0,ariaHasPopup:"dialog",...i}),e&&Ui(t.domNode,e)}return t}_handleStopOpenBtnEventPropagation(){this.stopEventPropagation&&(this.openButton.onClick=e=>{e.stopPropagation(),this.togglePopup()})}_setValue(e){let t=super._setValue(e);return this.popupList&&(this.popupList.value=e),t}_setItems(e){super._setItems(e),this.itemRenderer?.removeTooltips(),this.popupList&&(this.popupList.items=e)}_updateUI(){this._updateOpenButtonText()}_updateOpenButtonText(){let e=this.getSelectedItem();if(this.selectedLabelRenderer)if("no-label"===this.selectedLabelRenderer)this.openButton.text=null;else{let t=this.selectedLabelRenderer(e)||this.placeHolder;t?"string"==typeof t?this.openButton.text=t:(this.openButton.domNode.innerHTML="",this.openButton.domNode.appendChild(t)):this.openButton.text=" "}else if(this.renderSelectionAsItem){let t=e&&this.itemRenderer.createLabel(e,this);t?(this.openButton.domNode.innerHTML="",this.openButton.domNode.appendChild(t)):this.openButton.text=this.placeHolder||" "}else this.openButton.text=e?.[this.labelProperty]||this.placeHolder||" ";this._onOpenButtonTextChanged()}isPopupOpen(){return this._popupH.isOpen()}openPopup(){return this._popupH.open()}closePopup(){return this.popupList.uiUpdateSuspended=!0,this._popupH.close()}togglePopup(){return this.isPopupOpen()?this.closePopup():this.openPopup()}allowAutoClose(e){this._popupH.getPopover().autoClose=e}isMouseOver(e){return super.isMouseOver(e)||Qr(this._popupH.getPopover(),{event:e,checkAllChildren:!0})}setFocus(){this.openButton.setFocus()}destroy(){this.itemRenderer?.removeTooltips(),super.destroy()}_onPreShow(){}_onOpened(){}onPopupOpened(){}_onClosed(){}onPopupClosed(){}_onOpenButtonTextChanged(){}};aa([u({constructOnly:!0})],na.prototype,"listClass",2),na=aa([p()],na);var la=Object.defineProperty,da=Object.getOwnPropertyDescriptor,ca=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?da(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&la(t,i,s),s},ha=class extends kr{constructor(e){super(e),this._templateString='\n  <calcite-alert class="esriGECalcite esriGECalciteAlert">\n      <div slot="title" data-attach-point="titleDiv"></div>\n      <span slot="message" class="esriGEFlexRow">\n        <span data-attach-point="messageDiv"></span>\n        </span>\n      <div slot="link" data-attach-point="linkDiv"></div>\n  </calcite-alert>\n  '}get title(){return this.titleDiv.innerHTML}set title(e){this._title=e||"",this.titleDiv&&(this.titleDiv.innerHTML=e)}get message(){return this.messageDiv.innerHTML}set message(e){this._message=e||"",this.messageDiv&&(this.messageDiv.innerHTML=e)}get link(){return this.linkDiv.innerHTML}set link(e){this._link=e||"",this.linkDiv&&(this.linkDiv.innerHTML="",e&&wo({text:e,alignment:"start",onClick:()=>this.onClickLink?.()}).placeAt(this.linkDiv),hr(this.linkDiv,!!e))}get kind(){return this._kind}set kind(e){this._kind=e||"brand",this.domNode&&(this.domNode.kind=e)}get icon(){return this._icon}set icon(e){e&&(this._icon=e,this.domNode&&(this.domNode.icon=e))}get autoClose(){return this.domNode.autoClose}set autoClose(e){this._autoClose=!!e,this.domNode&&(this.domNode.autoClose=e)}get autoCloseDuration(){return this.domNode.autoCloseDuration}set autoCloseDuration(e){this._autoCloseDuration=e,this.domNode&&(this.domNode.autoCloseDuration=e)}postCreate(){this.title=this._title,this.message=this._message,this.link=this._link,this.kind=this._kind,this.icon=this._icon,this.autoClose=this._autoClose,this.autoCloseDuration=this._autoCloseDuration,Kr(this.domNode,".alert-close"),Pr(this.domNode,"alert-default",`.container {\n          z-index: 1000 !important; /* above the dialog */\n          ${this.offsetLeft?`inset-inline-start: ${this.offsetLeft}px !important;`:""}\n          ${this.offsetBottom?`inset-block-end: ${this.offsetBottom}px !important;`:""}\n       }\n\n       .alert-close {\n          ${this.showLoader?"display: none !important;":""}\n       }\n      `),this.showLoader&&Ar(this.domNode,".container").then((e=>{new Tr({scale:"s"}).placeAt(e).domNode.style.width="50px"})),wi(this.domNode,"calciteAlertClose",(()=>this.onClose?.())),this.show()}refresh(){this.domNode&&Ar(this.domNode,"calcite-chip",{silent:!0}).then((e=>{e.kind="brand",e.appearance="outline-fill"}))}show(){this.domNode&&(this.domNode.open=!0)}hide(){this.domNode&&(this.domNode.open=!1)}};ca([u({constructOnly:!0})],ha.prototype,"showLoader",2),ca([u({constructOnly:!0})],ha.prototype,"offsetLeft",2),ca([u({constructOnly:!0})],ha.prototype,"offsetBottom",2),ha=ca([p()],ha);var pa={};function ua({title:e,message:t,link:i,kind:r,icon:o,duration:s,offsetLeft:a,offsetBottom:n,onClickLink:l,autoClose:d}){let c=[e,t,i].join(";"),h=pa[c]=pa[c]||[],p=new ha({title:e,message:t,link:i,kind:r,icon:o,autoClose:!1!==d,autoCloseDuration:s||"fast",offsetLeft:a,offsetBottom:n,onClickLink:l,onClose:()=>{h.forEach((e=>{e.hide(),e.destroy()})),h.length=0,delete pa[c]}}).placeAt(document.body);return h.push(p),h.forEach((e=>e.refresh())),p}function ga(e,t){let i,r=e?.[0];return!e||e.length<2?r:e.find((e=>(e.default&&(i=e),e.ID===t)))||i||r}var ma=Object.getOwnPropertyDescriptor,ba=class extends kr{constructor(e){super(e),this.allowHierarchies=!1,this.selectedCountryIdx=-1,this.originalCountryIdx=-1,this._countries={},this._isUpdating=!1}postCreate(){this._countrySelect=new na({class:"ge-country-select",requireSelection:!1,openButtonParams:this.openButtonParams,onChange:()=>{this._isUpdating||(this._tryShowHierarchies(),this.onChange())}}).placeAt(this.domNode),this._countrySelect.domNode.addEventListener("click",(e=>{this.originalCountryIdx=this.selectedCountryIdx=this._countrySelect.getSelectedIndex()})),this._countrySelect.onPopupOpened=()=>{let e=this._countrySelect.popupList._itemNodes.find((e=>e.item.value===this._countrySelect.items[this.originalCountryIdx].value));e&&e.setFocus().then((e=>{}))},this._countrySelect.domNode.addEventListener("keydown",(e=>{let t=this._countrySelect.items;if("Enter"===e.key&&(this.selectedCountryIdx=this._countrySelect.getSelectedIndex(),this.onChange(),setTimeout((()=>{this._countrySelect.closePopup().then((e=>{this._countrySelect.openButton.domNode.blur(),this._countrySelect.domNode.blur()}))}),100),this._countrySelect.closePopup().then((e=>{this._countrySelect.openButton.domNode.blur(),this._countrySelect.domNode.blur()}))),"Escape"===e.key){let e=this._countrySelect.popupList._itemNodes.find((e=>e.item.value===t[this.originalCountryIdx].value));e&&e.setFocus().then((e=>{})),setTimeout((()=>{this._countrySelect.closePopup().then((e=>{this._countrySelect.openButton.domNode.blur(),this._countrySelect.domNode.blur()}))}),100),this._countrySelect.closePopup().then((e=>{this._countrySelect.openButton.domNode.blur(),this._countrySelect.domNode.blur()}))}if("ArrowUp"===e.key&&this.selectedCountryIdx>0&&(this.selectedCountryIdx-=1),"ArrowDown"===e.key&&this.selectedCountryIdx<t.length&&(this.selectedCountryIdx+=1),1===e.key.length&&/^[a-zA-Z]$/.test(e.key)){let i=e.key.toLowerCase(),r=-1;if(-1===this.selectedCountryIdx?(r=t.findIndex(((e,t)=>e.label.toLowerCase().startsWith(i))),this.selectedCountryIdx=r):(r=t.findIndex(((e,t)=>e.label.toLowerCase().startsWith(i)&&t>this.selectedCountryIdx)),-1===r&&(r=t.findIndex(((e,t)=>e.label.toLowerCase().startsWith(i)))),this.selectedCountryIdx=r),-1!==this.selectedCountryIdx){let e=this._countrySelect.popupList._itemNodes.find((e=>e.item.value===t[this.selectedCountryIdx].value));e&&e.setFocus().then((e=>{})),this._scrollCountrySelectToSelected(),this._tryShowHierarchies()}}})),this._hierarchySelect=new na({class:"ge-hierarchy-select",requireSelection:!1,openButtonParams:this.openButtonParams,items:[],onChange:()=>{!this._isUpdating&&this.onChange()}}).placeAt(this.domNode),this._updateHierarchiesVisibility()}setCountries(e){let t=[];return this.globalCountryID&&t.push({label:Ze("DataBrowserNew").geDataBrowser.global,value:this.globalCountryID}),e.map((e=>{t.push({label:e.name,value:e.id}),this._countries[e.id]=e})),Po(t,{attribute:"label"}),this._countrySelect.items=t,this._countries}get value(){return{countryID:this._countrySelect.value,hierarchyID:this._hierarchySelect.items.length&&this._hierarchySelect.value||this._lastHierarchy?.ID}}set value(e){this._isUpdating=!0,this._countrySelect.value=e.countryID,this._tryShowHierarchies(e.hierarchyID)}_scrollCountrySelectToSelected(){let e=this._countrySelect.popup,t=this._countrySelect.value;if(!t)return;let i=e.querySelectorAll("calcite-list-item.listItem"),r=Array.from(i).find((e=>e.item.value===t));r&&"function"==typeof r.scrollIntoView&&r.scrollIntoView({block:"nearest"})}_tryShowHierarchies(e){this._isUpdating=!0;let t=this._countries[this._countrySelect.value]?.hierarchies;if(this._lastHierarchy=ga(t,e),!t||t.length<2)return this._hierarchySelect.items=[],void this._updateHierarchiesVisibility();this._hierarchySelect.items=t.map((e=>({label:e.alias,value:e.ID}))),this._hierarchySelect.value=this._lastHierarchy.ID,this._updateHierarchiesVisibility()}_updateHierarchiesVisibility(){let e=this.allowHierarchies&&!!this._hierarchySelect.items.length;hr(this._hierarchySelect.domNode,e);let t=e?Ji(this._countrySelect.domNode).w+"px":"";this._hierarchySelect.domNode.style.minWidth=t,this._isUpdating=!1}onChange(){}};function _a(e,t,i){let r,{class:o,kind:s,size:a,...n}=e;switch(s){case"danger":r="dangerColor";break;case"warning":r="warningColor";break;case"success":r="successColor"}r&&(o=r+(o?" "+o:""));let l=new Wo({scale:"s",class:o,size:"auto"===a?null:a,...n});if("auto"===a){let e=l.domNode;e.style.blockSize="",e.style.inlineSize="",e.style.minInlineSize="",e.style.minBlockSize=""}return l}ba=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?ma(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],ba);var fa={population:"users",income:"credits",age:"calendar",households:"locator",housing:"organization",health:"activity-monitor",education:"education",business:"organization",race:"group",ethnicity:"group",language:"group",spending:"credit-card",behaviors:"biking",psychographics:"speech-bubble",jobs:"projects",poverty:"globe",maritalstatus:"heart",tapestry:"map",segmentation:"map",atrisk:"user-risk",keyfacts:"chart-magnifying-glass",policy:"check-shield",crime:"fingerprint",purchasingpower:"shopping-cart",retail:"graph-time-series",urbanicity:"urban-model"};function va(e){return fa[function(e){return e=e.toLowerCase().replace(/(\s|_|\d|\(|\))/g,""),e=e.split(/\W+/)[0],e.startsWith("retail")?"retail":e}(e)]||"user"}var ya={none:null,Dataset:"data-folder",Year:"calendar",Source:"data"};var wa={explore:"magnifying-glass",allVariables:"list-bullet",popular:"ribbon-rosette",newAndNoteworthy:"mega-phone",favorites:"star",customVariables:"configure",savedLists:"storage"};function xa(e){return wa[e]}function Ca(e,t){let i=[],r="Author"!==t?function(e){return ya[e]}(t):null,o="Source"===t||"Author"===t;for(let s in e){let a,n=s;if(o){let e=ht(s);e?(n=e.value,a=e.sourceId):a="standardSource"}let l=e[s];i.push({id:s,title:n,sourceId:a,icon:r,variablesNumber:l[0],newVariablesNumber:"Author"!==t?l[1]:0})}return Po(i,o?[{attribute:"sourceId",descending:!0},{attribute:"title"}]:{attribute:"title"}),i}function Sa(e,t,i){e.id={test:(e,r)=>{let o=t[e]||0;return i?(r.score=o,!0):!!o}}}var Na=class{constructor(e){this.variables=e}async queryAllVariables(e){if(e?.favorites)return this._queryFavoriteVariables();let t={};return t.searchString=e?.searchString||"*",this.variables.query(t)}async _queryFavoriteVariables(){if(!this.variables.favorites)return[];await this.variables.synchronize();let e=[],t=this.variables,i=t.queryFilter;return t.favorites.getItems({converter:r=>{let o=t.get(r);o&&i(o)&&e.push(o)},reverse:!0}),e}async queryPopularVariables(){let e={},t=this.variables.categories.data.map((t=>{let i=t.popularityCache;for(let t in i)e[t]=i[t];return{id:t.id,name:t.alias||t.name,popularityCache:i}})),i={};return Sa(i,e,!1),{variables:await this.variables.query(i),popularOrNewGroups:t}}async queryNewVariables(){let e=this.variables.queryFilter,t=this.variables.categories.data,i=[],r={},o=[];for(let s of t){let t={},a=o=>{e(o)&&o.newAndNotable&&(n++,t[o.id]=-n,r[o.id]||(r[o.id]=!0,i.push(o)))},n=0;for(let e of s.dataCollections)for(let t of e.data)a(t);n&&o.push({id:s.id,name:s.alias||s.name,popularityCache:t})}return{variables:i,popularOrNewGroups:o}}async queryVariables(e,t){if(!t||"*"===t.categoryId)return this.variables.manager.queryAllStandardVariables(this.variables.queryFilter,t?.searchString);let i={categoryID:t.categoryId,searchString:"*"},r=this.variables.categories.get(i.categoryID).popularityCache;return r&&Sa(i,r,!0),this.variables.query(i)}};var Ea=class{constructor(e){this.variables=e}get showFavorites(){return!!this.variables.favorites&&!this.variables.stateProcessor}canBeFavorite(e){return!0}isFavorite(e){return this.variables.favorites.contains(this._getFavoriteId(e))}updateFavorite(e,t){let i=this.variables.favorites,r=this._getFavoriteId(e);t!==i.contains(r)&&(t?i.add(r):i.remove(r),Bo(this,"_saveFavorites",1e3))}_getFavoriteId(e){return this.variables.get(e)?.fullName||e}_saveFavorites(){this.variables.favorites.save()}getRefineFilters(e){let t={};return"standard"===e.mode&&e.categoryId&&(t.categoryID=e.categoryId),this.variables.getRefineFilters(t)}getDataCollectionFilter(e){return"standard"===e.mode||e.categoryId&&"*"!==e.categoryId?this.variables.getDataCollectionFilter(e.categoryId):null}get hideVariableToggles(){return this._hideVariableToggles||this.variables.hideVariableToggles}set hideVariableToggles(e){this._hideVariableToggles=e}getShoppingCartItemInfo(e,t){if(t)return{label:this.variables.getAliasWithType(e),group:{value:null,states:null}};let i=this.variables.get(e);return i?{label:i.alias,group:this.getToggleGroup(i),variableType:i.variableType}:null}getToggleGroup(e){return function(e,t){let i=e.getStates?.(t),r={value:t,states:i};if(i){let e=!1;i.ids.forEach((i=>{t===i&&(e=!0)})),e||(t=r.value=i.ids[0])}return r}(this.variables,e.fullName||e.id)}get allowReliabilityState(){return this.variables.allowReliabilityState}statefulNameToCalculator(e){return this.variables.statefulNameToCalculator(e)}statefulNameToVariableType(e){switch(Rt(e)){case xt:return"percent";case Ct:return"average";case St:return"index";case Nt:return"reliability"}return null}isACSVariable(e){return At(e)}getDescriptionWithType(e){return this.variables.getDescriptionWithType(e)}getVariable(e){return this.variables.get(e)}processVariables(e){return this.variables.stateProcessor?this.variables.stateProcessor.processVariables(e):e}showLimitAlert(e){!function(e){let t=Ze("DataBrowserNew").dataBrowser.variablesView;ua({title:t.selectionLimitTitle,message:De(t.selectionLimit,[e]),kind:"warning",autoClose:!1})}(e)}},ka=class{constructor(e,t){this.enumItems=[],this.totalCount=0,this.matchCount=0,this.noSort=!0,this._dataCollections={},e.forEach((e=>{this._dataCollections[e.id]=e.cache,this.enumItems.push({id:e.id,value:e.name,leafCount:0,selected:!0})})),this._trimCalcType=t||(e=>e)}initialize(e){this._variables=e,this.totalCount=this._variables.length,this.enumItems.forEach((e=>e.leafCount=0));for(let t of e){let e=this._trimCalcType(t.id);for(let t of this.enumItems)this._dataCollections[t.id][e]&&t.leafCount++}this.enumItems=this.enumItems.filter((e=>e.leafCount))}activate(){return this.enumItems.length>1}isActive(){return this.enumItems.some((e=>!e.selected))}selectAll(){for(let e of this.enumItems)e.selected=!0}match(e){let t=this._trimCalcType(e.id);return this.enumItems.some((e=>e.selected&&this._dataCollections[e.id][t]))}calculateMatchCount(){if(this.isActive){let e=0;for(let t of this._variables)this.match(t)&&e++;this.matchCount=e}else this.matchCount=this._variables.length}},Ia=class{constructor(e=-1,t="#",i,r=!0){this.formatWithUnits=!0,this.preserveTrailingZeroes=!1,this._formatter=null,this.decimals=e,this.valueType=t,this._formatter=i,this.formatWithUnits=r}getValueFormatter(){return this._formatter||=new Zt}formatValue(e,t,i){let r=this.getValueFormatter();return this.formatWithUnits?r.formatValueWithUnits(e,this.decimals,this.valueType,t,i,this.preserveTrailingZeroes):r.formatValue(e,this.decimals,this.valueType,t,i,this.preserveTrailingZeroes)}parse(e){return this.getValueFormatter().parse(e,this.valueType)}},Ta=[wt],Ma=class e{constructor(e,t){this._states=null,this.variable=e,this.returnsTextData="esriFieldTypeString"===e.type,this._formatter=function(){if(!Kt){let e=new Zt;ei(e),Kt=e}return Kt}(),this._states=t,this._calcType=t||!this.returnsTextData&&e.units&&e.units!==Ot?wt:null,this._update()}getCalcType(){return this._calcType||""}setCalcType(e){let t=e;return!(this._calcType===t||!this._states?.names.includes(t))&&(this._calcType=t,this._update(),this.onCalcMethodChanged(),!0)}onCalcMethodChanged(){}_update(){let e=this.getDecimals();this.roundMultiple=e<0?0:10**e,this._currentId=this._calcType===Nt?"REL"+this.variable.id.slice(3):this.variable.id+Dt(this._calcType)}createValueFormat(e){return new Ia(this.getDecimals(),this.getValueType(),this._formatter,e)}getSummarizationFields(){return[this._currentId]}calculate(e){let t=e[this._currentId];return this.roundMultiple?this.round(t):t}getScriptString(){return this._currentId}round(e){let t=this.roundMultiple;return t?Math.round(e*t)/t:e}getAliasWithType(){return Vt(this.variable.alias,this._calcType)}getDescriptionWithType(){return Vt(this.variable.description,this._calcType)}getDecimals(){return this._calcType?Pt(this._calcType,this.variable.precision):-1}getValueType(){return Lt(this._calcType,this.variable.units)}getAvailableCalcTypes(){return this._states?this._states.names:this._calcType?Ta:[]}supportsCalcType(e){return this.getAvailableCalcTypes().includes(e)}getToggleGroup(){if(!this._states)return null;let e={states:this._states,value:null};return e.states.names.some(((t,i)=>t===this._calcType?!!(e.value=e.states.ids[i]):null)),e}static create(t,i){let r=t.units===Ot||t.derivative||t.isHidden?null:Tt(t,i);return new e(t,r)}},Ga=class extends wr{constructor(e){super(),this._lastCountryID=null,this._lastHierarchyID=null,this._updated=!1,Object.assign(this,e),this._items=[],this._index={},this.itemLimit=this.itemLimit||0,this.storageKey=this.storageKey||"data-browser-favorites-"}synchronize(e,t){return e?(e||=null,t||=null,(this._lastCountryID!==e||this._lastHierarchyID!==t)&&(this._lastCountryID=e,this._lastHierarchyID=t,this._updated=!1,this._items=[],this._index={},this._syncPromise=this._loadItems().then((e=>{this._lastError=null;let t=!1;return e&&(this.itemLimit&&e.length>this.itemLimit?(this._items=e.slice(e.length-this.itemLimit),t=!0):this._items=e.slice(),this.updateIndex(),this._updated=t,this.save(),t=!0),t})).catch((e=>(this._lastError=e,!1)))),this._syncPromise):this._syncPromise||Promise.resolve(!0)}getLastError(){return this._lastError}updateIndex(){this._index={},this._items.forEach(((e,t)=>{this._index[this.getIdentity(e)]=t+1})),this._updated=!0}getIdentity(e){return e+""}save(e){return!(!this._updated&&!e)&&(this._updated=!1,this.emit("updated"),!this._lastError&&this._saveItems(e))}get(e){let t=this._index[e];return t?this._items[t-1]:null}contains(e){return!!this._index[e]}getItemsCount(){return this._items.length}getItems(e){e=e||{};let t,i=this._items.length,r=Math.min(e.start||0,i),o=Math.min(e.count||i,i-r);if(e.reverse&&(r=i-r-o),e.converter){let s;if(t=[],e.reverse)for(r+=o;r-- >0&&t.length!==o;)s=e.converter(this._items[r]),null!=s&&t.push(s);else for(;r<i&&t.length!==o;)s=e.converter(this._items[r++]),null!=s&&t.push(s)}else t=this._items.slice(r,r+o),e.reverse&&t.reverse();return t}add(e){let t=this.getIdentity(e);this.remove(t),this.itemLimit&&this._items.length===this.itemLimit&&this.remove(this.getIdentity(this._items[0])),this._items.push(e),this._index[t]=this._items.length,this._updated=!0}remove(e){let t="string"==typeof e?e:this.getIdentity(e),i=this._index[t];if(!i)return!1;this._items.splice(i-1,1),delete this._index[t];for(let e in this._index){let t=this._index[e];t>i&&(this._index[e]=t-1)}return this._updated=!0,!0}clear(e){return this._items=[],this._index={},this._updated=!0,!!e&&this.save()}async _loadItems(){return this._getStorage().get(this._composeStorageListKey())}async _saveItems(e){return this._getStorage().set(this._composeStorageListKey(),this._items)}_composeStorageListKey(){return"function"==typeof this.storageKey?this.storageKey(this._lastCountryID,this._lastHierarchyID):this.storageKey+(this._lastCountryID?this._lastCountryID+(this._lastHierarchyID||""):"")}_getStorage(){return this.storage||(this.storage={get:e=>this[e],set:(e,t)=>(this[e]=t,!0)}),this.storage}},Aa=class extends Ga{constructor(e){super(e),this.localStorageKey="DataBrowserFavorites",this.storageKey="favorites";let t,i=function(){try{return window.localStorage}catch(e){return console.log(e),null}}(),r=this.localStorageKey;try{let e=i.getItem(r);t=e?JSON.parse(e):{},Array.isArray(t)&&(t={})}catch{console.log("Can't get favorites from local storage."),t={}}let o=!1;this._localStorageItem={get:e=>t[e]||[],set:(e,s)=>{t[e]=s;try{return i.setItem(r,JSON.stringify(t)),!0}catch{return!o&&console.log("Can't save fovorites to local storage."),o=!0,!1}}}}_getStorage(){return this._localStorageItem}},Pa=class extends wr{queryFilter(e){return!e.hideInDataBrowser}async queryVariables(e,t){if(t||=this.queryFilter,e.searchString&&"*"!==e.searchString){let i=this.get(e.searchString,!0,{skipDerivatives:!0});if(i){let r={};return r[i.id]=!0,this.queryModel.queryVariables(e,t,r)}if(this._canApplySemanticSearch()){let i=await this._getSimilarMeaningData(e.searchString);return this.queryModel.queryVariables(e,t,i)}}return this.queryModel.queryVariables(e,t)}async _getSimilarMeaningData(e){let t;return(await this._getDataCollections({outFields:["id"],query:e,filters:"hideInDataBrowser:false"})).forEach((e=>{t||={};for(let i of e.data){let e=i.similarity||0,r=t[i.id];("number"!=typeof r||e>r)&&(t[i.id.toUpperCase()]=e,t[i.id]=e)}})),t||{"":-1}}_canApplySemanticSearch(){return!1}async _getDataCollections(e){return[]}get(e,t,i){if("string"!=typeof e)return null;i||={},e=Bt(e);let r=this._tryParseFullName(e),o=this._tryGetCustomVariable(r.id);if(o)return o;if(r.fullName){if(r.isStandard){let s=!(!t||!0!==t&&!t.additionalData)&&Da;return o=i.preserveFullName?this.storeModel.get(r.id,r.fullName,r.dataCollectionId):this.storeModel.get(r.id),!o&&s&&(o=this._tryGetAdditionalVariable(r.id,s,r.dataCollectionId)),o||i.skipDerivatives?o:this._tryCreateDerivativeVariable(e,r.dataCollectionId)}if(t&&(o=this._tryGetAdditionalVariable(r.id,t,r.dataCollectionId)),!o&&i.lookUpHiddenDCs&&(o=this.storeModel.getHiddenDCVariable(r.id,r.dataCollectionId)),o)return o}return r.fullName||(o=this.storeModel.get(r.id)),!o&&t&&(r.fullName&&(o=this._tryGetAdditionalVariable(r.fullName,t)),o||(o=this._tryGetAdditionalVariable(r.id,t))),!o&&!i.skipDerivatives&&(o=this._tryCreateDerivativeVariable(e)),!o&&i.lookUpHiddenDCs&&(o=this.storeModel.getHiddenDCVariable(r.id)),o||null}_tryGetCustomVariable(e){return null}_tryGetAdditionalVariable(e,t,i){return null}fromStandardData(e){return this._tryParseFullName(Bt(e)).isStandard}_tryParseFullName(e){let t=mt(e);return{...t,isStandard:t.dataCollectionId?this._isStandardDC(t.dataCollectionId):null}}_isStandardDC(e){return!!this.storeModel.dataCollections.get(e)}statefulNameToDerivative(e,t){if(e&&0===e.indexOf(wt))return e.slice(2);let i=this.get(e,Da,La);if(i&&i.isCustom)return null;if(!1===this.fromStandardData(e))return e;if(!i){let t=this.derivativeNameToStateful(e);if(i=this.get(t,Da,La),!i)return e}function r(e,r){o=i[e]&&o+r,o&&t&&(t[r]=1)}let o=i.fullName;switch(Rt(e)){case Ct:r("averageBase","_A");break;case xt:r("percentBase","_P");break;case St:r("indexBase","_I");break;case Nt:o=Gt()&&Ra(this,o,!0)}return o}suffixCacheToString(e){let t=[];for(let i in e)if(e[i])switch(i){case"_A":t.push("average");break;case"_P":t.push("percent");break;case"_I":t.push("index")}return 3===t.length?"all":t.join(",")}derivativeNameToStateful(e,t){if(!e)return null;if(!1===this.fromStandardData(e))return e;let i;if(!t&&Gt()&&(i=Ra(this,e,!1),i))return Nt+i;let r=(t,i)=>{let r=this.get(e.slice(0,e.length-2),!1,La);return r?.[t]?i+r.id:e};switch(e.slice(-2).toUpperCase()){case"_A":i=r("averageBase",Ct);break;case"_P":i=r("percentBase",xt);break;case"_I":i=r("indexBase",St);break;default:i=e}if(i===e){let t=this.get(e,Da,La);if(t&&!1===t.derivative)return wt+t.fullName}return i}_tryCreateDerivativeVariable(e,t){let i=this.derivativeNameToStateful(e,!0);if(!i)return null;let r=this.get(i,Da,La);if(!r||t&&(r=this.get(`${t}.${r.id}`,Da,La),!r))return null;let o=Rt(i),s=Dt(o);return s?(r={...r},r.id+=s,r.fullName+=s,r.alias=Vt(r.alias,o),r.description=Vt(r.description,o),r.precision=Pt(o,r.precision),r.units=Lt(o,r.units),r.derivative=!0,r):null}getPopularVariable(e){if(e||=this.storeModel.categories.data[0],!e)return null;let t,i=0,r=e.popularityCache;for(let e in r){let o=r[e];o>i&&(i=o,t=e)}return t?this.storeModel.get(t):null}getPopularVariables(e,t){let i=e.popularityCache;if(!i)return[];let r=[];for(let e in i){let o=this.storeModel.get(e);o&&(!t||t(o))&&(o.score=i[e],r.push(o))}return Po(r,{attribute:"score",descending:!0}),r}validateFavorites(e){let t,i={},r=e.getItems({converter:e=>{let r=this.get(e,!0)?.fullName||e;return i[r]?(t=!0,null):(i[r]=!0,r!==e&&(t=!0),r)}});t&&(e.clear(),r.forEach((t=>e.add(t))),e.save())}},La={preserveFullName:!0,skipDerivatives:!0},Da={additionalData:!0},Ba=["ACS","MOE","REL"];function Ra(e,t,i){let r=t.indexOf(".")+1,o=t.slice(r,r+3).toUpperCase();if(o!==Ba[i?0:2])return null;let s=t.slice(0,r);o=t.slice(r+3),t=s+Ba[i?2:0]+o;let a=e.get(s+Ba[1]+o,Da,La)&&e.get(t,Da,La);return a?a.fullName:null}var Fa=class{constructor(e){this.isIdFilter=!0,this.bitIndex=0,this._cache=e;for(let t in e){this.isRelevanceFilter="number"==typeof e[t];break}}isActive(){return!0}match(e){let t=this._cache[e.id];return"number"==typeof t?(e.score=t,!0):t}},Va=class{constructor(e,t){this.isKeywordFilter=!0,this.searchString="",this.delimiters=/[\s;,\/?:@&=\$#'%"`~!^\(\)\[\]\{\}\\*|\u0000-\u001f\u007f-\u009f\u2000-\u2bff\ud800-\uffff]+/,this.totalCount=0,this.bitIndex=0,this.matchCount=0,this.calculateRelevance=!1,this.update(e),this.searchFields=t?"string"==typeof t?[t]:t:["alias","description","fieldCategory"]}update(e){this.searchString=e?.trim()||"",this._keywords=this.searchString&&"*"!==this.searchString?this.searchString.toLowerCase().split(this.delimiters):null}isActive(){return!!this._keywords}match(e){return!this._keywords||(this.calculateRelevance?this._matchWithRelevance(e):this.searchFields.some((t=>this._matchField(e[t]))))}_matchField(e){return!!e&&(e=e.toLowerCase(),this._keywords.every((t=>e.includes(t))))}_matchWithRelevance(e){return this.relevance=-1,this.searchFields.forEach((t=>{let i=e[t];if(!i)return;i=i.toLowerCase();let r=-1,o=!0;if(!this._keywords.every((e=>{let t=i.indexOf(e);return t<r&&(o=!1),r=t,t>=0})))return;let s=0;if(o&&"fieldCategory"!==t){let e=i.split(this.delimiters);s=this._keywords.reduce(((t,i)=>t+(e.includes(i)?1:0)),0)/this._keywords.length}this.relevance=Math.max(this.relevance,s)})),this.relevance>=0}},Oa=class{constructor(e){this._storeModel=e}queryVariables(e,t,i){let r,o,s={},a=[e=>(e.score=null,t(e))];e||={};for(let t in e)switch(t){case"categoryID":case"dataCollectionID":s[t]=e[t];break;case"searchString":{let r,o;if("object"!=typeof i?r=new Va(e[t]):(o=new Fa(i),o.isRelevanceFilter&&(r=new Va(e[t]),r.calculateRelevance=!i[""])),o&&r)a.push((e=>!!o.match(e)||!(gt(e)||!r.match(e))&&(e.score=r.relevance*(e.customDataCollection?.isShared?.01:.1),!0)));else{let e=o||r;a.push((t=>e.match(t)))}break}case"filters":{let i=this._prepareFilterCache(e[t]);i&&a.push((e=>{for(let t in e.filteringTags)if(i[t]||i["*"])return!0;return!1}));break}case"additionalData":r=e[t];break;default:o||={},o[t]=e[t]}o&&a.push((e=>{for(let t in o){let i=o[t];if(i&&"object"==typeof i&&"test"in i){if(!i.test(e[t],e))return!1}else if(i!==e[t])return!1}return!0}));let n=1===a.length?a[0]:e=>a.every((t=>t(e)));return"function"==typeof i?i(n):s.dataCollectionID?this.queryDCVariables(s.dataCollectionID,n,r):s.categoryID?this.queryCategoryVariables(s.categoryID,n,r):this.queryAllVariables(n,r)}queryAllVariables(e,t){return this.baseQuery(this._storeModel.data,e,t?.getVariables())}queryCategoryVariables(e,t,i){let r=this._storeModel.categories.get(e);return!r&&i&&(r=i.getCategory(e)),r?this.baseQuery(r.data,t):[]}queryDCVariables(e,t,i){let r=this._storeModel.dataCollections.get(e);return!r&&i&&(r=i.getDataCollection(e)),r?this.baseQuery(r.data,(e=>r.idCache[e.id]&&t(e))):[]}baseQuery(e,t,i){let r=e.filter(t);if(i?.length){let e=[];this._addAdditionalVariables(e,i),r.push(...e.filter(t))}return r}_addAdditionalVariables(e,t){t.forEach((t=>{Array.isArray(t)?this._addAdditionalVariables(e,t):t&&e.push(t)}))}getRefineFilters(e){let t={};if(e.dataCollectionID){let i=this._storeModel.dataCollections.get(e.dataCollectionID);!i&&e.additionalData&&(i=e.additionalData.getDataCollection(e.dataCollectionID)),i?.filters&&this._combineFilters(i.filters,t)}else if(e.categoryID){let i=this._storeModel.categories.get(e.categoryID);!i&&e.additionalData&&(i=e.additionalData.getCategory(e.categoryID)),i&&this._collectCategoryFilters(i,t)}else this._collectAllFilters(t,e.additionalData);let i=this._prepareFilterCache(e.filters);if(i&&!i["*"]){let e=t;t={};for(let r in e)i[r]&&(t[r]=e[r])}return t}_collectAllFilters(e,t){this._storeModel.categories.data.forEach((t=>{this._collectCategoryFilters(t,e)})),t?.getCategories().forEach((t=>{this._collectCategoryFilters(t,e)}))}_collectCategoryFilters(e,t){e.dataCollections.forEach((e=>{this._combineFilters(e.filters,t)}))}_combineFilters(e,t){for(let i in e){let r=e[i],o=t[r.id];o?this._mergeFilter(o,r):(o={...r},t[r.id]=o)}}_mergeFilter(e,t){if("Range"===e.type&&"Range"===t.type){let i=e.rangeMin,r=t.rangeMin;!isNaN(i)&&!isNaN(r)&&i>r&&(e.rangeMin=r),i=e.rangeMax,r=t.rangeMax,!isNaN(i)&&!isNaN(r)&&i<r&&(e.rangeMax=r)}else if("Enumeration"===e.type&&"Enumeration"===t.type){let i=dt(e.enumValues.split(","));t.enumValues.split(",").forEach((t=>{i[t]||(e.enumValues+=","+t)}))}}_prepareFilterCache(e){return(e=lt(e)).length?dt(e,null,(e=>!0)):null}},Ha=class{constructor(e){this.idProperty="id",this.data=[],this.queryEngine=Go(),this._cache={},e?.idProperty&&(this.idProperty=e.idProperty),e?.idIgnoreCase&&(this.getIdentity=e=>e[this.idProperty]?.toUpperCase(),this.get=e=>this._cache[e?.toUpperCase()]),e?.data&&this.setData(e.data)}getIdentity(e){return e[this.idProperty]}get(e){return this._cache[e]}put(e){if(!e)return;let t=this.getIdentity(e);this.get(t)&&this.remove(t),this._cache[t]=e,this.data.push(e)}remove(e){let t=this.get(e);return!!t&&(this.data=this.data.splice(this.data.indexOf(t),1),e=this.getIdentity(t),delete this._cache[e],!0)}setData(e){this.data=e||[],this._updateCache()}query(e,t){return this.queryEngine(e,t)(this.data)}_updateCache(){this._cache={},this.data.forEach((e=>this._cache[this.getIdentity(e)]=e))}},za=class{constructor(){this.data=[],this.hideGlobalVariables=!1,this._variables={},this._initialize()}_initialize(){this.categories=new Ha,this.dataCollections=new Ha({idIgnoreCase:!0}),this.hiddenDataCollections=new Ha({idIgnoreCase:!0})}clear(){this.data=[],this._variables={},this.categories.setData([]),this.dataCollections.setData([]),this.hiddenDataCollections.setData([])}get(e,t,i){let r=e&&this._variables[e.toUpperCase()]||null;if(!r||!t)return r;if(r.fullName!==t){if(!this.dataCollections.get(i)?.hasVariable(r))return null;r={...r},r.fullName=t}return r}processDataCollections(e,t){t||={variables:{},categories:{},dataCollections:[]};let i=[];for(let r of e){if(this._isDataCollectionHidden(r)){i.push(this._prepareHiddenDataCollection(r));continue}let e=r.data,o=r,s=r.metadata.categories;o.id=r.dataCollectionID,delete r.dataCollectionID;let a=r.metadata;Object.assign(o,a),delete r.metadata,o.filters=this._prepareFilters(a.filters),o.hasVariable=e=>e?.id?.toUpperCase()in o.idCache,o.categories=[],s.forEach((e=>{let i=this._prepareCategory(e,o,t);i&&o.categories.push(i)})),o.data=[],o.idCache={},this._testOneYearIncrements(e),e.forEach((e=>{this._processVariable(e,o,t)})),t.dataCollections.push(o)}let r=function(e){let t=[];for(let i in e){let r=e[i];void 0!==r&&t.push(r)}return t}(t.categories);return Po(r,{attribute:"displayOrder",descending:!0}),this.categories.setData(r),this.dataCollections.setData(t.dataCollections),Po(i,{attribute:"order"}),this.hiddenDataCollections.setData(i),t}_isDataCollectionHidden(e){"KeyGlobalFacts"===e.dataCollectionID&&this._processKeyGlobalFacts(e);let t=e.metadata;return!t.categories.length||!(!t.infographics&&!t.infographics2)}_processKeyGlobalFacts(e){let t;e.data.forEach((e=>{switch(e.hideInDataBrowser=this.hideGlobalVariables,e.id){case"TOTPOP":t=e.alias,e.popularity=100;break;case"TOTHH":e.popularity=90;break;case"AVGHHSZ":delete e.indexBase;break;case"TOTMALES":case"TOTFEMALES":e.percentBase="TOTPOP",e.percentBaseAlias=t}}))}_prepareHiddenDataCollection(e){let t,i=e.metadata,r={id:e.dataCollectionID,metadata:i};return r.order=i.infographics||i.infographics2?0:i.mobileinfographics?1:2,r.data=e.data.map((e=>{let t=this._prepareVariable(e,!0);return t.fullName=`${r.id}.${e.id}`,t})),r.get=e=>(!t&&(t=dt(r.data,(e=>e.id.toUpperCase()))),e&&t[e.toUpperCase()]||null),r}_prepareFilters(e){return dt(e,"id",(e=>function(e){return"Range"===e.type?(e.rangeMin=+e.rangeMin||0,e.rangeMax=+e.rangeMax):e.enumValues=lt(e.enumValues).join(","),e}(e)))}_testOneYearIncrements(e){function t(e){for(let t of e.filteringTags)if("Age"===t.id)return t.value;return null}let i=0;for(let r of e){let e=t(r);if(!e)continue;let o=e.split("-");if(2!==o.length||o[0]!==o[1])return;i++}if(!(i<50))for(let i of e)t(i)&&(i.strictFilterTag="Age")}_prepareCategory(e,t,i){let r=+e.displayOrder||0,o=i.categories[e.id];return o?o.displayOrder=Math.max(r,o.displayOrder):(o=e,o.idCache={},o.data=[],o.dataCollections=[],o.displayOrder=r,o.popularityCache={},i.categories[e.id]=o),o.dataCollections.push(t),o}_processVariable(e,t,i){if(t.categories?.length||(e.missedInCategories=!0),this._isVariableDisallowed(e))return;let r=this._prepareVariable(e),o=this._isVariableAllowedInCategories(r,t),s=o&&"number"==typeof e.popularity?e.popularity:null;e.popularity=null,s&&(t.popularityCache||={},t.popularityCache[r.id]=s);let a=r.id,n=`${t.id}.${a}`,l=i.variables[a];if(l){let e=!r.missedInCategories,t=l.hideInDataBrowser&&r.hideInDataBrowser,i=l.missedInCategories?r.__sourceDesc||l.__sourceDesc:l.__sourceDesc||r.__sourceDesc;l.missedInCategories&&e&&delete l.missedInCategories,e&&Object.keys(r.filteringTags).length&&(Object.keys(l.filteringTags).length?(Object.assign(r.filteringTags,l.filteringTags),r.indexBase=l.indexBase||r.indexBase,r.fullName=l.fullName):(r.fullName=n,i=r.__sourceDesc||l.__sourceDesc),Object.assign(l,r)),l.__sourceDesc=i,i&&(l.description=i),l.hideInDataBrowser=!!t}else l=r,l.fullName=n,i.variables[a]=l,this.data.push(l);this._variables[a]=l,t.hasVariable(l)||(t.idCache[l.id]=o,t.data.push(l)),o&&t.categories.forEach((e=>{if(e.idCache[a]||(e.idCache[a]=!0,e.data.push(l)),s){let t=e.popularityCache||={},i=t[a]||0;s>i&&(t[a]=s)}}))}_prepareVariable(e,t){let i=e;return i.id=t?e.id:e.id.toUpperCase(),i.units=function(e){return"string"!=typeof e?null:"text"===e?"OTHER":e.toUpperCase()}(e.units),i.filteringTags=dt(e.filteringTags,"id"),t?i.isHidden=!0:(i.percentBase=e.percentBase?.toUpperCase()||null,i.percentBaseAlias=e.percentBaseAlias||null,i.averageBase=e.averageBase?.toUpperCase()||null,i.averageBaseAlias=e.averageBaseAlias||null,i.indexBase=e.indexBase||null),i.__sourceDesc=e.description,i.description||(i.description=i.alias),i}getHiddenDCVariable(e,t){if(!t){let i=mt(e);i.dataCollectionId&&(e=i.id,t=i.dataCollectionId)}if(t)return this.hiddenDataCollections.get(t)?.get(e);let i;for(let t of this.hiddenDataCollections.data)if(i=t.get(e),i)break;return i}_isVariableDisallowed(e){return!e.fieldCategory}_isVariableAllowedInCategories(e,t){return!e.hideInDataBrowser}},Wa=class extends Pa{constructor(){super(),this.useSemanticSearch=!0,this._isSynchronised=!1,this.storeModel=new za,this.queryModel=new Oa(this.storeModel)}get semanticSearchEnabled(){return this._enableSemanticSearch}_canApplySemanticSearch(){return this.semanticSearchEnabled&&this.useSemanticSearch}_getDataCollections(e){return mi(this._countryID,this._hierarchyID,e)}getCurrentCountryID(){return this._countryID}getCurrentHierarchyID(){return this._hierarchyID}synchronize(){let e=pi(),t=ui();return(e!==this._countryID||t!==this._hierarchyID)&&(this._countryID=e,this._hierarchyID=t,this.storeModel.clear(),this._isSynchronised=!1,this._resolveCountryIDPromise=this._createSyncPromise(),this._resolveCountryIDPromise.then((()=>{this._isSynchronised=!0})),this._enableSemanticSearch=hi(gi()?.semanticCapabilityLanguages),this.emit("synchronize",{countryID:e,hierarchyID:t})),this._isSynchronised?Ie():this._resolveCountryIDPromise}isSynchronised(){return this._isSynchronised&&this._countryID===pi()&&this._hierarchyID===ui()}async _createSyncPromise(){let e=this._countryID,t=this._hierarchyID;return mi(e,t).then((async i=>{e===this._countryID&&t===this._hierarchyID&&(this.storeModel.hideGlobalVariables=!!e,this.storeModel.processDataCollections(i))}))}composeQueryFilter(e){return e={includeTextVariables:!1,...e},t=>!(!e.includeTextVariables&&"OTHER"===t.units)&&this.queryFilter(t)}async queryAllStandardVariables(e,t){let i={searchString:t||"*"};return this.queryVariables(i,e)}},Ua=class extends wr{constructor(e){super(),this.allowReliabilityState=!0,this.allowLookUpInHiddenVariables=!1,this.hideVariableToggles=!1,this._hs=[],Object.assign(this,e),!this.manager&&(this.manager=new Wa),!this.queryFilter&&(this.queryFilter=this.manager.composeQueryFilter()),!this.favorites&&(this.favorites=new Aa),this._hs.push(this.manager.on("synchronize",(e=>this.emit("synchronize",e))))}get categories(){return this.manager.storeModel.categories}get dataCollections(){return this.manager.storeModel.dataCollections}async synchronize(){this.manager.isSynchronised()||(await this.manager.synchronize(),this.favorites&&(await this.favorites.synchronize(this.manager.getCurrentCountryID(),this.manager.getCurrentHierarchyID()),this.manager.validateFavorites(this.favorites)))}get(e,t){return this.manager.get(e,!1,{preserveFullName:t,lookUpHiddenDCs:this.allowLookUpInHiddenVariables})}getStates(e){let t=this.get(e);return t&&Tt(t,this.allowReliabilityState)}query(e){return this.manager.queryVariables(e,this.queryFilter)}getRefineFilters(e){return this.manager.queryModel.getRefineFilters(e)}getDataCollectionFilter(e){let t=this.categories.get(e)?.dataCollections;if(!t||t.length<2)return null;let i=this.queryFilter,r=t.map((e=>{let t={};return((e,t)=>{for(let r of e)i(r)&&(t[r.id]=!0)})(e.data,t),{id:e.id,name:e.title,cache:t}}));return new ka(r,Bt)}getPopularVariables(e){return this.manager.getPopularVariables(e,this.queryFilter)}calculatorToStatefulName(e){let t=e.getToggleGroup?.();return t?t.value:e.variable.fullName}statefulNameToCalculator(e){let t=this.get(e,!0)||this.get(e,!1);if(!t)return null;let i=Ma.create(t,this.allowReliabilityState);return i.setCalcType(Rt(e)),i}calculatorToVariable(e){let t=e.getToggleGroup?.();if(!t)return e.variable;let i=t.value;return this.get(i,!0)||this.get(i,!1)}variableToCalculator(e){if(e.derivative||e.id.startsWith("REL")){let t=this.manager.derivativeNameToStateful(e.fullName);return this.statefulNameToCalculator(t)}return Ma.create(e,this.allowReliabilityState)}getAliasWithType(e){return this._getFieldWithType(e,"alias")}getDescriptionWithType(e){return this._getFieldWithType(e,"description")}_getFieldWithType(e,t){let i=this.get(e);return Vt(i?.[t]||"",Rt(e))}destroy(){this._hs.forEach((e=>e.remove())),this._hs=null}},ja=class{createCategoryIcon(e,t){let{scale:i,size:r}=t,o=t.class||"";return e.icon?function(e){let t=_a(e),i=t.domNode;return t.domNode=null,t.destroy(),i}({icon:e.icon,class:o,scale:i,size:r}):null}},qa=class{constructor(e){this.iconFactory=new ja,this._countCache={},this._collectedCounts={},this._hasNewVariables=null,this.variables=e||new Ua,this.store=new Ea(e),this.query=new Na(e)}reset(){this._countCache={},this._collectedCounts={},this._lastQueryFilter=null,this._browseFilters=null,this._hasNewVariables=null}getAdditionalBrowseModes(){return[]}getAvailableBrowseFilters(){if(!this._browseFilters){let e=this.variables.getRefineFilters({});this._browseFilters={},e.Source&&(this._browseFilters.Source=!0),e.Dataset&&(this._browseFilters.Dataset=!0),e.Year&&(this._browseFilters.Year=!0)}return this._browseFilters}canShowUserVariables(e){return"favorites"===e&&!!this.variables.favorites&&!this.variables.stateProcessor}hasNewVariables(){if("boolean"==typeof this._hasNewVariables)return this._hasNewVariables;let e=this._provideQueryFilter(),t=this.variables.categories.data;for(let i of t)for(let t of i.data)if(e(t)&&t.newAndNotable)return this._hasNewVariables=!0;return this._hasNewVariables=!1}hasFavorites(){let e=this.variables,t=e.queryFilter,i=!1;return e.favorites?.getItems({converter:r=>{let o=e.get(r);o&&t(o)&&(i=!0)}}),i}get semanticSearchEnabled(){return this.variables.manager.semanticSearchEnabled}get useSemanticSearch(){return this.variables.manager.useSemanticSearch}set useSemanticSearch(e){this.variables.manager.useSemanticSearch=e}getItemTitle(e,t){let i=this.variables.categories.get(t);return i.alias||i.name}getNavigationCategories(e){return this._prepareStandardCategories()}getBrowseItems(e,t){return this._prepareStandardBrowseItems(t)}_prepareStandardCategories(){return this._provideStandardCounts(),this.variables.categories.data.reduce(((e,t,i)=>{let r=this._getKeyForCategory("standard",t.id);return this._countCache[r][0]&&e.push({id:t.id,label:t.alias||t.name,icon:va(t.id),sortIndex:i}),e}),[])}_prepareStandardBrowseItems(e){return"none"===e?this._prepareStandardBrowseCategories():this._prepareStandardBrowseGroups(e)}_prepareStandardBrowseCategories(){return this._provideStandardCounts(),this.variables.categories.data.reduce(((e,t,i)=>{let r=this._getKeyForCategory("standard",t.id),o=this._countCache[r];return o[0]&&e.push({id:t.id,title:t.alias||t.name,icon:va(t.id),variablesNumber:o[0],newVariablesNumber:o[1],sortIndex:i}),e}),[])}_provideStandardCounts(){if(this._collectedCounts.standard)return;let e=this._provideQueryFilter(),t=this.variables.stateProcessor;this.variables.categories.data.forEach((i=>{let r=this._getKeyForCategory("standard",i.id),o=function(e,t,i){let r=0,o=0;for(let s of e)if(t(s)){let e=i?i.countAllowedStates(s):1;r+=e,s.newAndNotable&&(o+=e)}return[r,o]}(i.data,e,t);this._countCache[r]=o})),this._collectedCounts.standard=!0}_prepareStandardBrowseGroups(e){let t=this._provideQueryFilter(),i=this.variables.stateProcessor,r={},o={},s=e=>!o[e.id]&&(o[e.id]=!0,t(e));return this.variables.categories.data.forEach((t=>{let o=function(e,t,i,r){let o={};for(let s of e)if(i(s)){let e=s.filteringTags[t]?.value;if(e){let t=r?r.countAllowedStates(s):1;if(t){let i=o[e]||[0,0];i[0]+=t,s.newAndNotable&&(i[1]+=t),o[e]=i}}}return o}(t.data,e,s,i);!function(e,t){e=e||{};for(let i in t){let r=e[i]||[0,0],o=t[i];r[0]+=o[0],r[1]+=o[1],e[i]=r}}(r,o)})),Ca(r,e)}_getKeyForCategory(e,t){return[e,t].join("/")}_provideQueryFilter(){let e=this.variables.queryFilter;return e!==this._lastQueryFilter&&(this.reset(),this._lastQueryFilter=e),e}},$a=Object.getOwnPropertyDescriptor,Qa=class extends kr{constructor(e){super(e),this.class="browser-breadcrumb ge-flex-row"}update(e){or(this.domNode),hr(this.domNode,e.length>1),e.forEach(((t,i)=>{t.query?this._addAsLink(t.label,(()=>{this.onBreadcrumbClick(t.query)})):this._addAsLabel(t.label),i!==e.length-1&&this._addArrow()}))}_addAsLabel(e){er("div",{textContent:e,class:"breadcrumb-label heading"},this.domNode)}_addAsLink(e,t){wo({text:e,class:"breadcrumb-link",onClick:t},this.domNode)}_addArrow(){this._addAsLabel(">")}};Qa=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?$a(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Qa);var Ya=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,Ja=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?Xa(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&Ya(t,i,s),s},Ka=class extends kr{constructor(e){super(e),this._templateString='<calcite-chip class="esriGECalcite esriGECalciteChip"></calcite-chip>'}get appearance(){return this.domNode.appearance}set appearance(e){this._appearance=e||"solid",this.domNode&&(this.domNode.appearance=this._appearance)}get closed(){return this._closed}set closed(e){this._closed=e||!1,this.domNode&&(this.domNode.closed=this.closed)}get closeOnDelete(){return this._closeOnDelete}set closeOnDelete(e){this._closeOnDelete=e||!1,this.domNode&&(this.domNode.closeOnDelete=this.closeOnDelete)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e||!1,this.domNode&&(this.domNode.disabled=this._disabled)}get icon(){return this._icon}set icon(e){this._icon=e,this.domNode&&(this.domNode.icon=e)}get iconFlipRtl(){return this.domNode.iconFlipRtl}set iconFlipRtl(e){this._iconFlipRtl=e||!1,this.domNode&&(this.domNode.iconFlipRtl=this._iconFlipRtl)}get kind(){return this._kind}set kind(e){this._kind=e||"neutral",this.domNode&&(this.domNode.kind=this._kind)}get label(){return this._label}set label(e){this._label=e,this.domNode&&(this.domNode.label=e)}get messageOverrides(){return this.domNode.messageOverrides}set messageOverrides(e){this._messageOverrides=e,this.domNode&&(this.domNode.messageOverrides=this._messageOverrides)}get scale(){return this._scale}set scale(e){this._scale=e||"m",this.domNode&&(this.domNode.scale=this._scale)}get selected(){return this.domNode.selected}set selected(e){this._selected=e||!1,this.domNode&&(this.domNode.selected=this._selected)}get value(){return this.domNode.value}set value(e){this._value=e,this.domNode&&(this.domNode.value=this._value)}get text(){return this.domNode.innerHTML}set text(e){this._text=e,this.domNode&&this._updateText()}get image(){return this._image}set image(e){this._image=e,this.domNode&&this._updateImage()}get actions(){return this._actions}set actions(e){this._actions=e,this.domNode&&this._updateText()}postCreate(){this._setProperties(),this._updateText(),this._updateImage(),this._registerEventListeners()}_setProperties(){this.appearance=this._appearance,this.domNode.closable=this.closable,this.closed=this.closed,this.closeOnDelete=this.closeOnDelete,this.disabled=this._disabled,this.icon=this._icon,this.iconFlipRtl=this._iconFlipRtl,this.kind=this._kind,this.label=this._label,this.messageOverrides=this._messageOverrides,this.scale=this.scale,this.selected=this._selected,this.value=this._value,this.text=this._text,this.image=this._image,this.actions=this._actions,this._applyLabel()}_applyLabel(){this.label||(this.label=this._text)}_updateText(){if(ar(".chipContentContainer",this.domNode)?.[0]?.remove(),!this._text)return;let e=er("div",{class:"esriGEFlexRow chipContentContainer"},this.domNode);this._addTruncation(e),this._tryAddActions(e)}_updateImage(){ar("[slot='image']",this.domNode)?.[0]?.remove(),this.image&&this.addImage(this.image)}_addTruncation(e){return er("div",{class:"esriGETrimWithEllipsis",innerHTML:this._text},e)}_tryAddActions(e){this._actions?.forEach((t=>{t.action=new mo({class:"esriGESpaceBeforeBig",icon:t.icon,appearance:"transparent",padding:"0",onClick:()=>t.onClick()}).placeAt(e),t.tooltip&&t.action.setTooltip(t.tooltip)}))}addImage(e){e.slot="image",this.domNode.append(e)}setBackgroundColor(e){this._setStyle("--calcite-chip-background-color",e)}setBorderColor(e){this._setStyle("--calcite-chip-border-color",e)}setCornerRadius(e){this._setStyle("--calcite-chip-corner-radius",e)}setTextColor(e){this._setStyle("--calcite-chip-text-color",e)}setIconColor(e){this._setStyle("--calcite-chip-icon-color",e)}setCloseIconColor(e){this._setStyle("--calcite-chip-close-icon-color",e)}setSelectIconColor(e){this._setStyle("--calcite-chip-select-icon-color",e)}setSelectIconPressedColor(e){this._setStyle("--calcite-chip-select-icon-color-pressed",e)}_setStyle(e,t){!function(e,t,i){e.style.setProperty(t,i)}(this.domNode,e,t)}_registerEventListeners(){this.addHandles([wi(this.domNode,"calciteChipClose",(()=>this.onClose?.())),wi(this.domNode,"calciteChipSelect",(()=>this.onSelect?.()))])}componentOnReady(){return this.domNode.componentOnReady()}setFocus(){this.domNode.setFocus()}};Ja([u({constructOnly:!0})],Ka.prototype,"closable",2),Ka=Ja([p()],Ka);var Za=class{constructor(e){Object.assign(this,e)}createPresentation(e,t,i){if(e.hidden)return null;let r=document.createElement("calcite-tab-title");return r.tab=e[i.idProperty]+"",r.innerHTML=e[i.labelProperty]||"",r.selected=t,r.iconStart=e.iconStart,r.iconEnd=e.iconEnd,r.disabled=!1===e.enabled,Kr(r,".container",!0),r}},en=Object.getOwnPropertyDescriptor,tn=class extends Ho{constructor(e){super(e),this._templateString="<calcite-tab-nav class='esriGECalcite'></calcite-tab-nav>",this.itemRenderer=new Za,this.tooltipPlacement="top",this._itemNodes=[]}postCreate(){super.postCreate(),this.domNode.style.setProperty("--calcite-spacing-xl",this.tabsGap?this.tabsGap+"px":"1.25rem"),wi(this.domNode,"calciteTabsActivate",(e=>{let t=this.value,i=e.target.item;if(!i)return;this._value=i[this.idProperty],this._updateSelection();let r={type:"change",value:this.value,previousValue:t,selectedIndex:this.getSelectedIndex(),selectedItem:i};this.onChangeAny?.(r),this._value!==t&&this._onChange(r)}))}getItemNode(e){return this._itemNodes.find((t=>t.item===e))}_updateUI(e){e?this._buildItemNodes():this._updateSelection()?.click()}_buildItemNodes(){this.domNode.innerHTML="",this._itemNodes.length=0;let e=this.getSelectedItem();this.items.forEach((t=>{let i=this.itemRenderer.createPresentation(t,t===e,this);i&&(i.item=t,this.domNode.appendChild(i),t.tooltip&&io(i,t.tooltip,{placement:this.tooltipPlacement,...t.tooltipParams}),this.itemNodePostProcessor?.(i),this._itemNodes.push(i),this._fixIconsSize(i),this._fixOutlineSize(i))}))}_fixIconsSize(e){(e.iconStart||e.iconEnd)&&Pr(e,"tab-navigator-icon-scale",`calcite-icon { ${so("s")} }`)}_fixOutlineSize(e){Pr(e,"tab-navigator-selected-ouline-size",":host([selected]) .selected-indicator, :host([selected]:hover) .selected-indicator { block-size: 2px;}")}_updateSelection(){let e,t=this.getSelectedItem()?.[this.idProperty];return this._itemNodes.forEach((i=>{let r=i.tab===t;i.selected=r,r&&(e=i)})),e}};tn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?en(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],tn);var rn=Object.defineProperty,on=Object.getOwnPropertyDescriptor,sn=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?on(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&rn(t,i,s),s},an=class extends oo{constructor(e){super(e),this._templateString='<calcite-input class="esriGECalcite esriGECalciteInput"></calcite-input>',this._alignment="start",this._scale="m",this._label="",this._disabled=!1,this._value="",this._loading=!1,this._placeHolder="",this._autofocus=!1,this._defaultTooltipPlacement="top"}get alignment(){return this.domNode.alignment}set alignment(e){this._alignment=e,this.domNode&&(this.domNode.alignment=e)}get scale(){return this.domNode.scale}set scale(e){this._scale=e,e&&this.domNode&&(this.domNode.scale=e)}get ariaLabel(){return this.domNode.label}set ariaLabel(e){this._label=e,this.domNode&&(this.domNode.label=this.domNode.ariaLabel=e)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}get value(){return this.trim?this.domNode.value.trim():this.domNode.value}set value(e){this.trim&&"string"==typeof e&&(e=e.trim()),this._value=e,this.domNode&&(this.domNode.value=e,this.updateClearButton())}get icon(){return this.domNode.icon}set icon(e){this._icon=e,this.domNode&&(this.domNode.icon=e)}get loading(){return this.domNode.loading}set loading(e){this._loading=e,this.domNode.loading=e}get placeHolder(){return this._placeHolder}set placeHolder(e){this._placeHolder=e,this.domNode&&(this.domNode.placeholder=e)}get autofocus(){return this._autofocus}set autofocus(e){this._autofocus=e,this.domNode&&(this.domNode.autofocus=e)}get width(){return this._width}set width(e){this._width=e,this._updateSize()}get height(){return this._height}set height(e){this._height=e,this._updateSize()}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e,this._updateSize()}get suffixText(){return this._suffixText}set suffixText(e){this._suffixText=e,this.domNode&&(this.domNode.suffixText=e)}postCreate(){this.domNode.type=this.type,this.domNode.readOnly=this.readOnly,this.disabled=this._disabled,this.scale=this._scale,this.ariaLabel=this._label,this.icon=this._icon,this.alignment=this._alignment,this.value=this._value,this.placeHolder=this._placeHolder,this.autofocus=this._autofocus,this.loading=this._loading,this.domNode.clearable=this.clearable,this.suffixText=this._suffixText,this._updateSize(),wi(this.domNode,"calciteInputInput",(()=>{this.onChange?.({value:this.value}),this.updateClearButton()})),wi(this.domNode,"calciteInputChange",(()=>{this.trim&&(this.domNode.value=this.value)})),wi(this.domNode,"click",(e=>{this.onClick?.(e)}));let e=!1;wi(this.domNode,"keydown",(t=>{e=!0,this.onKeyDown?.(t),"Enter"===t.key&&this.onEnter?.(t),"Escape"===t.key&&this.onEsc?.(t)})),wi(this.domNode,"mousedown",(()=>e=!1)),wi(this.domNode,"keyup",(e=>{this.onKeyUp?.(e),"Enter"===e.key&&this.onEnterKeyUp?.(e)})),wi(this.domNode,"focus",(()=>{this.onFocus?.(),e&&this.onFocusByKeyboard?.()})),wi(this.domNode,"blur",(()=>{this.onBlur?.()})),!this.resizable&&"textarea"===this.type&&Pr(this.domNode,"input-textarea","textarea {\n          resize: none !important;\n         }\n         .resize-icon-wrapper {\n          display: none !important;\n         }\n        ")}_updateSize(){this.domNode&&Pr(this.domNode,"input-size",`textarea, input {\n        ${this._width?`width: ${this._width}px !important;`:""}\n        ${this._textAlign?`text-align: ${this._textAlign} !important;`:""}\n        ${this._height?`height: ${this._height}px !important;`:""}\n       }`)}updateClearButton(){!this.clearable||"textarea"===this.type||(Pr(this.domNode,"input-clear-button",`.clear-button {\n        ${this.clearIconScale||this.clearButtonSize?so(this.clearIconScale,this.clearButtonSize):""}\n       }\n      `),this.domNode.value&&Ar(this.domNode,".clear-button",{stopWaitingFlag:()=>!this.domNode.value}).then((e=>{e.__isUpdated||(wi(e,"click",(()=>this.onClear?.())),e.__isUpdated=!0)})),this.clearButtonUpdated(!!this.domNode.value))}clearButtonUpdated(e){}};sn([u({constructOnly:!0})],an.prototype,"trim",2),sn([u({constructOnly:!0})],an.prototype,"clearable",2),sn([u({constructOnly:!0})],an.prototype,"clearIconScale",2),sn([u({constructOnly:!0})],an.prototype,"resizable",2),sn([u({constructOnly:!0,value:"text"})],an.prototype,"type",2),sn([u({constructOnly:!0})],an.prototype,"readOnly",2),an=sn([p()],an);var nn=0;function ln(e,t){let i=function(e){let t=e.id||"GEAriaLabelID_"+nn++;return e.id=t,t}(t);(Array.isArray(e)?e:[e]).forEach((e=>{e.setAttribute("aria-labelledby",i)}))}var dn={s:24,m:32,l:44};function cn(e,t){return function(e,t,i){let{height:r,ariaLabelledBy:o,lineHeight:s,lineCount:a,paddingInline:n,paddingBlock:l,textboxClass:d,containerClass:c,...h}=e||{};!1!==h.trim&&(h.trim=!0),!1!==h.clearable&&(h.clearable=!0),h.clearable&&(h.value=h.value||"");let p,u=er("div",{class:"ge-text-box-container"+(c?" "+c:"")},t),g=n,m=h.scale||"m";p=r||dn[m],"number"!=typeof g&&(g=5);let b=new an(i?{scale:m,...h,type:"textarea"}:{scale:m,clearButtonSize:p,clearIconScale:m,...h});return d&&Li(b.domNode,d),b.placeAt(u),o&&ln(b.domNode,o),Pr(b.domNode,"input-library",`\n      input {\n        block-size: ${p}px !important;\n        ${b.icon?"":`padding-inline: ${g}px !important;`}\n        \n        \n        ${h.textAlign?`text-align: ${h.textAlign} !important;`:""}\n      }\n    `),b}(e,t)}function hn(e){return function(e,t){let{tooltip:i,tooltipParams:r,size:o,scale:s,...a}=e;s||="s",void 0===o&&"s"===s&&(o=20);let n=yo({appearance:"transparent",kind:"neutral",scale:s,...a},t);if(i&&setTimeout((()=>n.setTooltip(vo(i,n.domNode),r))),"number"==typeof o){let e=o+"px";Pr(n.domNode,"button-library",`\n        button {\n          inline-size: ${e} !important;\n          min-block-size: ${e} !important;\n          block-size: ${e} !important;\n        }\n      `)}return n}({iconStart:"search",iconScale:"m",scale:"m",appearance:"solid",kind:"brand",size:null,ariaLabel:pn(),...e})}function pn(){return Ze("widgets").calcite.buttons.search}function un(e,t){let{searchButton:i,tooltip:r,tooltipParams:o,...s}=e||{},a=cn(s,t);!i&&(i=hn());let n=s.onEnter;return n&&(i.onClick=()=>n()),function(e,t,i){let{minWidth:r,tooltip:o}=i||{};!o&&(e.slot="action"),e.domNode.style.height="",Li(e.domNode,{s:"actionInTextBox",m:"actionInTallTextBox",l:"actionInTallLargeTextBox"}[e.scale]),Pr(e.domNode,"input-library-add-action",`button { min-width: ${r||26}px !important; }`),e.placeAt(o?t.domNode.parentElement:t.domNode),o&&(e.setTooltip(o,i.tooltipParams||{placement:"top-start"}),Li(t.domNode.parentElement,"esriGEFlexRow"),Li(t.domNode,"esriGEFlexSpacer"))}(i,a,{minWidth:32,tooltip:r,tooltipParams:o}),a}function gn(e,t){let i="es-es"===rt();return function(e,t){return new Intl.DateTimeFormat(rt(),t).format(e)}(function(e){return e?e instanceof Date?e:new Date(e):null}(e),{year:i?"2-digit":"numeric",day:i?"numeric":"2-digit",month:i?"numeric":"2-digit"})}var mn=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,_n=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?bn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&mn(t,i,s),s},fn=class extends kr{constructor(e){super(e),this._templateString='<calcite-avatar class="esriGECalcite"></calcite-icon>'}postCreate(){this.domNode.fullName=this.fullName,this.domNode.scale=this.scale||"m",this.domNode.thumbnail=this.thumbnail,this.domNode.userId=this.userId,this.domNode.username=this.username,this.backgroundColor&&Pr(this.domNode,"avatar-bg",`.background { background-color: ${this.backgroundColor} !important; }`)}};_n([u({constructOnly:!0})],fn.prototype,"fullName",2),_n([u({constructOnly:!0})],fn.prototype,"scale",2),_n([u({constructOnly:!0})],fn.prototype,"thumbnail",2),_n([u({constructOnly:!0})],fn.prototype,"userId",2),_n([u({constructOnly:!0})],fn.prototype,"username",2),fn=_n([p()],fn);var vn=Object.getOwnPropertyDescriptor,yn=class extends kr{constructor(e){super(e),this._templateString='<calcite-card class="esriGECalcite esriCardCalcite"></calcite-card>'}get selectable(){return this.domNode.selectable}set selectable(e){this._selectable=e,this.domNode&&(this.domNode.selectable=e)}get selected(){return this.domNode.selected}set selected(e){this._selected=e,this.domNode&&(this.domNode.selected=e)}get loading(){return this.domNode.loading}set loading(e){this._loading=e,this.domNode&&(this.domNode.loading=e)}get thumbnailPosition(){return this.domNode.thumbnailPosition}set thumbnailPosition(e){this._thumbnailPosition=e||"block-start",this.domNode&&(this.domNode.thumbnailPosition=this._thumbnailPosition)}postCreate(){this.selectable=this._selectable,this.selected=this._selected,this.loading=this._loading,this.thumbnailPosition=this._thumbnailPosition,wi(this.domNode,"calciteCardSelect",(()=>this.onSelected?.())),Pr(this.domNode,"header-size",".header-text-container { box-sizing: border-box !important; }")}setTitle(e){this._title?.remove(),this._title=this._addNode(e,"title")}setSubtitle(e){this._subtitle?.remove(),this._subtitle=this._addNode(e,"subtitle")}setContent(e){this._content?.remove(),this._content=this._addNode(e,null)}setThumbnail(e){this._thumbnail?.remove(),this._thumbnail=this._addNode(e,"thumbnail")}setFooterStart(e){this._footerStart?.remove(),this._footerStart=this._addNode(e,"footer-start")}setFooterEnd(e){this._footerEnd?.remove(),this._footerEnd=this._addNode(e,"footer-end")}_addNode(e,t){let i="string"==typeof e?er("div",{innerHTML:e}):e;return t&&(i.slot=t),this.domNode.append(i),i}};yn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?vn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],yn);var wn=Object.getOwnPropertyDescriptor,xn=class extends kr{constructor(e){super(e),this._templateString='\n    <calcite-inline-editable class="esriGECalcite esriEditableLabelCalcite">\n      <div data-attach-point="_inputDiv"></div>\n    </calcite-inline-editable>\n  ',this._scale="m",this._disabled=!1}get scale(){return this.domNode.scale}set scale(e){e&&this.domNode&&this.domNode?this.domNode.scale=e:this._scale=e}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e,this.domNode.style.cursor=e?"":"pointer")}get placeHolder(){return this._placeHolder}set placeHolder(e){this._placeHolder=e,this.input&&(this.input.placeHolder=e)}get value(){return this.input.value}set value(e){this._value=e,this.input&&(this.input.value=e)}get width(){return this._width}set width(e){this._width=e,this.input&&(this.input.width=e)}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e,this.input&&(this.input.textAlign=e)}postCreate(){let e,t;this.input=new an({onFocus:()=>{e=this.value,t=!1,this.onFocus?.()},onKeyDown:i=>{i.key===Xo.Enter&&(e=this.value,t=!0,this.onChange?.({value:this.value}),this.input.domNode.blur())},onBlur:()=>{this.onBlur?.(),t||(this.value=e,this.onCancel?.()),t=!1}}).placeAt(this._inputDiv,"replace"),this.scale=this._scale,this.disabled=this._disabled,this.placeHolder=this._placeHolder,this.value=this._value,this.width=this._width,this.textAlign=this._textAlign,Pr(this.domNode,"editable-label-default",".controls-wrapper {\n          width: 26px !important;\n       }\n     ")}};xn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?wn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],xn);var Cn=Object.defineProperty,Sn=Object.getOwnPropertyDescriptor,Nn=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?Sn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&Cn(t,i,s),s},En=class extends kr{constructor(e){super(e),this._templateString='\n  <div class="esriGECalcite esriGEPageNavigatorCalcite esriGECenter esriGEFlexCenter esriGENonSelectable">\n    <div class="esriGEFlexRow esriGECenter esriGEFlexCenter" data-attach-point="_compactBlock">\n      <div class="esriGESpaceAfter20" data-attach-point="_prevPageButtonDiv"></div>\n      <div class="esriGEClickable" data-attach-point="_currentPageLabelDiv"></div>\n      <div class="esriGESpaceBefore20" data-attach-point="_nextPageButtonDiv"></div>\n    </div>\n    <div class="esriGEFlexRow esriGECenter expandedBlock esriGEFlexCenter" data-attach-point="_expandedBlock"></div>\n  </div>\n  ',this.hideForSinglePage=!0,this.showArrows=!0,this.expanded=!1,this._currentPageIndex=0}postCreate(){this.expanded?(lr(this._compactBlock),this._pagination=document.createElement("calcite-pagination"),Li(this._pagination,"esriGECalcite"),this._pagination.style.width="100%",this._pagination.style.justifyContent="start",this._pagination.pageSize=1,wi(this._pagination,"calcitePaginationChange",(()=>{this._showPageAt(this._pagination.startItem-1)})),this._expandedBlock.appendChild(this._pagination)):(lr(this._expandedBlock),this._editableLabel=new xn({width:120,textAlign:"end",onFocus:()=>{this._editableLabel.value=this._currentPageIndex+1+""},onChange:e=>{let t=+e.value;isNaN(t)||(t=Math.min(this.getNumPages(),Math.max(1,t)),this._showPageAt(t-1)),this._updatePageNavigator()},onCancel:()=>{this._updatePageNavigator()}}).placeAt(this._currentPageLabelDiv),this.showArrows&&(this._prevPageButton=new mo({icon:"chevron-left",onClick:()=>this._showPrevPage()}).placeAt(this._prevPageButtonDiv),this._nextPageButton=new mo({icon:"chevron-right",onClick:()=>this._showNextPage()}).placeAt(this._nextPageButtonDiv)),hr([this._prevPageButtonDiv,this._nextPageButtonDiv],this.showArrows)),this._updatePageNavigator()}_updatePageNavigator(){Bo(this,"_doUpdatePageNavigator")}_doUpdatePageNavigator(){let e=this.getNumPages();hr(this.domNode,e>1||!this.hideForSinglePage),this.expanded?(this._pagination.totalItems=this.getNumPages(),this._pagination.startItem=this._currentPageIndex+1):(this._editableLabel.value=De(Ze("widgets").PageNavigator.currentPageOutOfN,{current:this._currentPageIndex+1,total:e}),this.showArrows&&(this._prevPageButton.disabled=0===this._currentPageIndex,this._nextPageButton.disabled=this._currentPageIndex===e-1))}_showPrevPage(){0!==this._currentPageIndex&&this.setCurrentPageIndex(this._currentPageIndex-1,!0)}_showNextPage(){this._currentPageIndex!==this.getNumPages()-1&&this.setCurrentPageIndex(this._currentPageIndex+1,!0)}_showPageAt(e){e<0||e>this.getNumPages()-1||e===this._currentPageIndex||this.setCurrentPageIndex(e,!0)}getCurrentPageIndex(){return this._currentPageIndex}getNumPages(){throw new Error("Must be implemented to dynamically get the number of pages.")}setCurrentPageIndex(e,t){this._currentPageIndex=e,this._updatePageNavigator(),t&&this.onPageChanged(this._currentPageIndex)}reset(){this.setCurrentPageIndex(0)}setLabelColor(e){this._editableLabel.domNode.style.color=e}onPageChanged(e){}};function kn(e,t){let i=e?.states;if(t&&i){let r=Math.max(i.names.findIndex((e=>e===t)),0),o=i.ids[r];if(o!==e.value)return e.value=o,!0}return!1}function In(e,t){let i=Ze("DataBrowserNew").dataBrowser;return"number"==typeof t&&t!==e?De(i.refineNumber,{num:jt(e,0),total:jt(t,0)}):De(i.variablesNumber,{num:jt(e,0)})}function Tn(e){return De(Ze("DataBrowserNew").dataBrowser.variablesView.newItemsLabel,{count:jt(e,0)})}Nn([u({constructOnly:!0})],En.prototype,"hideForSinglePage",2),Nn([u({constructOnly:!0})],En.prototype,"showArrows",2),Nn([u({constructOnly:!0})],En.prototype,"expanded",2),En=Nn([p()],En);var Mn=Object.getOwnPropertyDescriptor,Gn=class extends Uo{createPresentation(e,t,i){let r=super.createPresentation(e,t,i);return Li(r,"hasBottomBorder"),r}createLabel(e){let t=er("div",{class:"ge-flex-row category-list-row"});if(e.icon){ir(this.iconFactory.createCategoryIcon(e,{class:"ge-margin-inline-4",scale:"s",size:16}),t)}else An(e.title,{scale:"s"}).placeAt(t);let i=er("div",{class:"list-row-title ge-margin-inline-4",textContent:e.title},t);if(e.newVariablesNumber&&new Ka({class:"browser-chip-new lightBlue ge-margin-inline-start-8",scale:"s",text:Tn(e.newVariablesNumber)}).placeAt(i),e.modified&&(Li(i,"esriGETrimWithEllipsis"),er("div",{class:"list-row-date ge-margin-inline-4",textContent:gn(e.modified)},t)),ir(er("div",{class:"list-row-variables ge-margin-inline-4",textContent:In(e.variablesNumber)}),t),e.itemInfo){let i,r=er("div",{class:"more-details-container"},t);if(tr(r),e.itemInfo.author){i=Co({styleProps:{roundButton:!0}},An(e.itemInfo.author,{scale:"s"}).domNode,r).domNode}else i=wo({text:Ze("DataBrowserNew").dataBrowser.browseView.moreDetails},r).domNode;let o=io(i,(()=>Pn(e.itemInfo)),{placement:"leading"});wi(i,"click",(()=>o.toggle()))}return t}};function An(e,t){let i=e.split(/\s/),r=i.length;r>2&&(i.length=2,e=i.join(" "));let o=new fn({username:r>1?null:e,fullName:r>1?e:null,...t});return Pr(o.domNode,"background-color",".background {\n      background-color: var(--calcite-color-foreground-3) !important;\n    }"),o}function Pn(e,t){let i=Ze("DataBrowserNew").dataBrowser.browseView,r=er("div",{class:"info-container"});return e?.author&&Ln(i.authorLabel,e.author,r),t&&Ln(i.titleLabel,t,r),e?.summary&&Ln(i.summaryLabel,e.summary,r),e?.description&&Ln(i.descriptionLabel,e.description,r),r}function Ln(e,t,i){er("div",{class:"info-title"+(i.children.length?" ge-margin-block-start-8":""),textContent:e},i),er("div",{class:"ge-flex-row ge-margin-block-start-4",textContent:t},i)}var Vn=class extends kr{constructor(e){super(e),this._templateString='<div class="browser-category-view ge-flex-column"></div>',this.nls=Ze("DataBrowserNew").dataBrowser.browseView,this._currentPage=0,this._pageSize=20,this.items=[]}postCreate(){this._cardsContainer=er("div",{class:"category-cards-container ge-flex-spacer"},this.domNode),this._pageNavigator=new En({getNumPages:()=>Math.ceil(this.items.length/this._pageSize),expanded:!0,onPageChanged:e=>{this.setCurrentPage(e),this._renderCards()}}).placeAt(this.domNode);let e=new Gn;e.iconFactory=this.iconFactory,this._list=new Qo({idProperty:"id",labelProperty:"title",class:"category-list-view",itemRenderer:e,onChange:e=>{this._list.value=null,this.onItemSelected(e.selectedItem)}}).placeAt(this.domNode),this.addHandles(this._list)}update(e,t){t&&(this.viewMode=t.mode,this._largeCards=t.largeCards),this.items=e,this._update()}changeMode(e){this.viewMode!==e&&(this.viewMode=e,this._update())}setCurrentPage(e){this.items.length<e*this._pageSize&&(e=Math.floor(this.items.length/this._pageSize)),this._pageNavigator.setCurrentPageIndex(e),this._currentPage=e}_update(){hr([this._cardsContainer,this._pageNavigator.domNode],"card"===this.viewMode),hr(this._list.domNode,"list"===this.viewMode),"card"===this.viewMode?(this._list.items=[],this.setCurrentPage(0)):(or(this._cardsContainer),this._list.items=this.items),this.resize()}_renderCards(){or(this._cardsContainer);let e=this._currentPage*this._pageSize,t=this._pageSize,i=this._largeCards;for(let r=e;r<e+t&&r<this.items.length;r++){let e=this.items[r],t=new yn({class:"category-card",selectable:!1});Co({class:"category-card-button ge-margin-inline-4 ge-margin-block-4"+(i?"  large-card-button":""),onClick:()=>this.onItemSelected(e)},t.domNode,this._cardsContainer);let o=er("div",{class:"card-thumbnail ge-flex-row-top"});if(e.icon){ir(this.iconFactory.createCategoryIcon(e,{class:"ge-margin-inline-start-8 ge-margin-block-start-8",scale:"l",size:32}),o),(i&&e.itemInfo?.author||e.newVariablesNumber)&&(er("div",{class:"ge-flex-spacer"},o),i?An(e.itemInfo.author,{class:"ge-margin-inline-end-8 ge-margin-block-start-8"}).placeAt(o):new Ka({class:"browser-chip-new lightBlue ge-margin-inline-end-8 ge-margin-block-start-8",scale:"s",text:Tn(e.newVariablesNumber)}).placeAt(o))}else An(e.title,{class:"ge-margin-inline-start-8 ge-margin-block-start-8"}).placeAt(o);t.setThumbnail(o);let s=er("div",{class:"card-title "+(i?"ge-flex-row-top":"ge-flex-row")}),a=er("div",{textContent:e.title},s);if(i&&Li(a,"text-two-line"),t.setTitle(s),i){let i=er("div",{class:"card-subtitle"});er("div",{class:"card-description text-two-line",textContent:e.itemInfo?.summary?De(this.nls.summaryInline,{text:e.itemInfo.summary}):e.itemInfo?.description?De(this.nls.descriptionInline,{text:e.itemInfo.description}):this.nls.noDescription},i);let r=er("div",{class:"more-details-container"},i);tr(r);let o=wo({class:"more-details-anchor",text:this.nls.moreDetails},r).domNode,s=er("div",{class:"more-details-popup"});to({content:s,showOnHover:!0,onBeforeOpen:()=>{or(s),ir(Pn(e.itemInfo,e.title),s)},onClose:()=>{or(s)},anchor:o,placement:"trailing"}),t.setSubtitle(i)}t.setContent(In(e.variablesNumber))}}resize(){if(this.items&&mr(this.domNode))if("card"===this.viewMode){or(this._cardsContainer);let e=Ji(this._cardsContainer),t=this._largeCards?{w:208,h:196}:{w:176,h:132},i=Math.max(Math.floor(e.h/t.h),1),r=Math.max(Math.floor(e.w/t.w),1);this._pageSize=r*i,this.setCurrentPage(this._currentPage),this._renderCards()}else{lr(this._list.domNode);let e=Ji(this.domNode).w;this._list.domNode.style.width=e+"px",dr(this._list.domNode)}}onExploreItemClicked(e){}gt_getFirstItem(){return("card"===this.viewMode?this._cardsContainer.children:this._list.domNode.children)[0]}};Vn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Mn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Vn);var Hn=class{constructor(e){this.width="auto",Object.assign(this,e)}createPresentation(e,t,i){if(e.hidden)return null;let r=new uo({text:e[i.labelProperty]||" ",iconStart:e.iconStart,iconEnd:e.iconEnd,appearance:"transparent",kind:"neutral",scale:"s",width:this.width,disabled:!1===e.enabled,onClick:()=>{this.onClick(e)}});r.domNode.style.margin="2px";let o=r.domNode;return this.selectItemNode(o,t),e.tooltip&&io(o,e.tooltip,{placeTo:i.domNode,...e.tooltipParams}),o}selectItemNode(e,t){e.appearance=t?"solid":"transparent"}},zn=class{constructor(e){Object.assign(this,e)}createPresentation(e,t,i){if(e.hidden)return null;let r=document.createElement("calcite-segmented-control-item");return r.value=e[i.idProperty]+"",r.innerHTML=e[i.labelProperty]||" ",r.iconStart=e.iconStart,r.iconEnd=e.iconEnd,r.tabIndex=r.checked?0:-1,Kr(r,"",!0),Pr(r,"item-renderer",`calcite-icon {\n          ${e[i.labelProperty]?"":"margin: 0 !important;"}\n       }\n\n       /* Fix for: https://github.com/Esri/calcite-components/issues/5721 */\n       label {\n          margin: 2px !important;\n          ${"l"===i.domNode.scale?"":`padding: ${"m"===i.domNode.scale?"5px 10px":"s"===i.domNode.scale?"2px 7px":"auto"} !important;`};\n       }`),r.checked=t,e.tooltip&&io(r,e.tooltip,{placeTo:i.domNode,...e.tooltipParams}),r}},Wn=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,jn=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?Un(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&Wn(t,i,s),s};var qn=class extends Ho{constructor(e){super(e),this._templateString="<calcite-segmented-control class='esriGECalcite'></calcite-segmented-control>",this.scale="m",this.width="auto",this.layout="horizontal",this._disabled=!1,this._itemNodes=[],this.itemRenderer=e?.useButtons?new Hn({width:e?.width,onClick:e=>{let t=this.value;this.setSelectedItem(e),this._value=e[this.idProperty],this._onChange({type:"change",value:this.value,previousValue:t,selectedIndex:this.getSelectedIndex(),selectedItem:e})}}):new zn}get appearance(){return this.domNode.appearance}set appearance(e){this._appearance=e||"solid",this.domNode&&(this.domNode.appearance=e)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}postCreate(){super.postCreate(),this.domNode.scale=this.scale,this.domNode.width=this.width,this.domNode.layout=this.layout,this.appearance=this._appearance,this.disabled=this._disabled,!this.useButtons&&wi(this.domNode,"calciteSegmentedControlChange",(()=>{let e=this.value,t=this._itemNodes.find((e=>e.checked))?.item;t&&(this._value=t[this.idProperty],this._value!==e&&this._onChange({type:"change",value:this.value,previousValue:e,selectedIndex:this.getSelectedIndex(),selectedItem:t}))}))}getItemNode(e){return this._itemNodes.find((t=>t.item===e))}_updateUI(e){e?this._buildItemNodes():this._updateSelection()}_buildItemNodes(){this._itemNodes.length=0,this.domNode.innerHTML="";let e=this.getSelectedItem();this.items.forEach((t=>{let i=this.itemRenderer.createPresentation(t,t===e,this);i&&(i.item=t,this.useButtons&&this._updateNodeSelection(i,e),this.domNode.appendChild(i),this._itemNodes.push(i))}))}_updateSelection(){let e=this.getSelectedItem();this._itemNodes.forEach((t=>{this._updateNodeSelection(t,e)}))}_updateNodeSelection(e,t){!function(e){return void 0!==e.checked}(e)?this.itemRenderer.selectItemNode(e,e.item===t):e.checked=e.item===t}};jn([u({constructOnly:!0})],qn.prototype,"scale",2),jn([u({constructOnly:!0})],qn.prototype,"width",2),jn([u({constructOnly:!0})],qn.prototype,"layout",2),qn=jn([p()],qn);var $n=Object.getOwnPropertyDescriptor,Qn=class extends kr{constructor(e){super(e),this._templateString='<calcite-label class="esriGECalcite esriGECalciteLabel"></calcite-label>'}get alignment(){return this.domNode.alignment}set alignment(e){this._alignment=e||"start",this.domNode&&(this.domNode.alignment=this._alignment)}get scale(){return this.domNode.scale}set scale(e){this._scale=e||"m",e&&this.domNode&&(this.domNode.scale=this._scale)}get for(){return this.domNode.for}set for(e){this._for=e,this.domNode&&(this.domNode.for=e)}get forNode(){return this._forNode}set forNode(e){e&&(this._forNode=e)}get layout(){return this.domNode.layout}set layout(e){this._layout=e||"inline",this.domNode&&(this.domNode.layout=this._layout)}get text(){return this.domNode.innerHTML}set text(e){this._text=e||"",this.domNode&&(this.domNode.innerHTML=this._text)}postCreate(){this.alignment=this._alignment,this.for=this._for,this.layout=this._layout,this.scale=this._scale,this.text=this._text,this.forNode&&(this.domNode.id||=n(),this.forNode.setAttribute("aria-labelledBy",this.domNode.id))}};function Yn(e,t){let i=function(e){return e.layout=e.layout||"default",new Qn(e)}({text:e.text,class:"forSelect",forNode:t.openButton.domNode}).placeAt(t.domNode,"before");return t.openButton.ariaLabel=e.text,i}Qn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?$n(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Qn);var Xn=class{constructor(e,t){let i,r;if(this.autoToggle=!0,this.trimLabel=!1,this._scale="m",this._checked=!1,e instanceof HTMLElement?(i=e,r=t):(i=t,r=e),r)for(let e in r)this[e]=r[e];this.domNode=new Qn({class:"esriGECalcite esriGECalciteTriStateItem esriGEFlexRow"+(this.class?" "+this.class:"")}).domNode,this.domNode.style.cursor="pointer",this.checkbox=er("calcite-checkbox",null,this.domNode),Kr(this.checkbox,".toggle"),this.labelInner=er("div",null,this.domNode);let o=this.labelText||i instanceof HTMLLabelElement&&i.innerHTML||"";this.labelInner.innerHTML=o,i instanceof HTMLLabelElement?(ir(this.domNode,i,"after"),i.classList.forEach((e=>{Li(this.domNode,e)})),i.remove()):i instanceof HTMLElement&&ir(this.domNode,i),this.trimLabel&&(this.domNode.style.overflow="hidden",Li(this.labelInner,"esriGETrimWithEllipsis")),this.checked=this._checked,this.disabled=!!this._disabled,this.ariaLabel=this._ariaLabel||this.labelText,this.scale=this._scale,wi(this.checkbox,"calciteCheckboxChange",(e=>{this.autoToggle?this._checked=this.checkbox.checked:this.checked=this._checked;let t=e;t.checked=this.checked,t.shiftKey=Ko(),this.onClick(t)}))}onClick(e){}get scale(){return this.checkbox.scale}set scale(e){this._scale=e,this.checkbox&&(this.checkbox.scale=e)}get checked(){return this._checked}set checked(e){this._checked=e,this.checkbox&&(this.checkbox.indeterminate="mixed"===e,this.checkbox.checked=!!e)}get disabled(){return this.checkbox.disabled}set disabled(e){this._disabled=e,this.checkbox&&(this.checkbox.disabled=e),this.domNode&&(e?this.domNode.setAttribute("disabled",""):this.domNode.removeAttribute("disabled"),this.domNode.style.cursor=e?"default":"pointer")}get ariaLabel(){return this.checkbox.label}set ariaLabel(e){this._ariaLabel=e,this.checkbox&&(this.checkbox.label=e)}placeAt(e,t){return e&&ir(this.domNode,e,t),this}toggle(){return this.checked=!this._checked}updateLabel(e){this.labelInner.innerHTML=e,this.ariaLabel=e}setFocus(){return this.checkbox.setFocus()}destroy(){this.domNode?.remove(),this.domNode=null}},Jn=Object.getOwnPropertyDescriptor,Kn=class extends kr{constructor(e,t){super(e,t),this._templateString=`\n  <div class="ge-padding-16">\n    <label data-attach-point="_similarCheckLabel">${Ze("DataBrowserNew").dataBrowser.findRelatedVariables}</label>\n  </div>`}postCreate(){this._similarCheck=new Xn(this._similarCheckLabel),this._similarCheck.onClick=()=>{this.navigationModel.useSemanticSearch=this._similarCheck.checked},this.update()}update(){this._similarCheck.checked=this.navigationModel.useSemanticSearch}};Kn=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Jn(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Kn);var Zn,el;function tl(e,t,i,r){let o=er("div",{class:"ge-flex-row ge-margin-inline-4 ge-padding-inline-start-8 dropdown-border"},r),s=new na({openButtonParams:{appearance:"transparent"},...t,onChange:e=>i(e.value)}).placeAt(o);return Yn({text:e},s),s}function il(e,t){let i=Ze("DataBrowserNew").dataBrowser,r=function(){let e=Ze("widgets").sortDropDown;return[{value:"newest",label:e.sortByDateNewest},{value:"oldest",label:e.sortDateOldest},{value:"alphabetical",label:e.sortByTitleAlphabetical},{value:"unalphabetical",label:e.sortByTitleUnalphabetical}]}();return r.push({value:"author",label:i.browseView.sortByAuthorAsc},{value:"authorDesc",label:i.browseView.sortByAuthorDesc},{value:"popularity",label:i.variablesView.popularity}),tl(i.browseView.sortBy,{value:"newest",items:r},t,e)}var rl,ol=class extends Uo{createLabel(e){let t=er("div",{class:"ge-flex-column"});return er("div",{class:"ge-margin-block-end-4 item-label",innerHTML:e.label},t),er("div",{class:"esriBATextDim",innerHTML:e.description},t),t}};function sl(e){let{navigationModel:t,onSearch:i,container:r}=e,o=Ze("DataBrowserNew").dataBrowser;if(!rl){let e=o.browseView;rl=[{label:e.allVariables,value:"all",description:e.allVariablesDescription},{label:e.standardVariables,value:"standard",description:e.standardVariablesDescription},{label:e.ownVariables,value:"own",description:e.ownVariablesDescription},{label:e.sharedVariables,value:"shared",description:e.sharedVariablesDescription}]}let s=De(t.semanticSearchEnabled?o.searchHint:o.searchHintDisabledSimilarCheck,{age:"age",poverty:"poverty",healthAndWellness:"health and wellness"}),a=o.searchPlaceholder,n=xo({scale:"m",text:pn(),appearance:"solid"}),l=un({searchButton:n,placeHolder:a,scale:"m",icon:"magnifying-glass",tooltip:s,tooltipParams:{placement:"top"},onEnter:()=>{let e=l.value;e&&i(e)},onChange:()=>l.hideTooltip()},r);l.searchButton=n,l.clearButtonUpdated=e=>{let t=l.gearAction;if(t){let i="m"===l.scale?32:44,r=e?i:0;t.domNode.style.marginInlineStart=2-i-r+"px",t.domNode.style.marginInlineEnd=r+2+"px"}};let d=()=>{l._closeTimerId&&clearTimeout(l._closeTimerId),l._closeTimerId=null};l.hideTooltip=()=>{l.domNode&&Ys(l.domNode),d()},l.showNoResultsTooltip=e=>{d();let t=De(o.noResults,{seachKey:e});$s(l.domNode,t,{position:["above","below"],ignoreMousePosition:!0}),l._closeTimerId=setTimeout(l.hideTooltip,5e3)};let c=function(e,t){return bo({icon:"gear",ariaLabel:Ze("widgets").calcite.buttons.settings,...e},t)}({padding:"4px",appearance:"solid",tooltip:!0,tooltipParams:{placement:"bottom"}});hr(c.domNode,t.semanticSearchEnabled),c.placeAt(l.domNode.parentElement,1),l.gearAction=c;let h=new Kn({navigationModel:t});l.addHandles(h),l.addHandles(to({content:h,anchor:c,placement:"bottom-end",onBeforeOpen:()=>h.update()}));{let e=new na({openButtonParams:{appearance:"solid",kind:"neutral",class:"search-mode-button"},value:"all",items:rl,class:"search-mode-select",itemRenderer:new ol});l.addHandles(e),e.placeAt(l.domNode.parentElement,"first"),l.searchModeSelect=e}return l}var al=Object.getOwnPropertyDescriptor,nl=class extends kr{constructor(e){super(e),this._templateString='\n  <div class="browser-main-view">\n    <h1 data-attach-point="_searchHeader" class="heading-font search-heading ge-margin-block-end-8 ge-margin-inline-start-8"></h1>\n    <div data-attach-point="_searchTextboxContainer" class="ge-margin-inline-start-8 ge-margin-inline-end-4"></div>\n  </div>',this.nls=Ze("DataBrowserNew").dataBrowser,this._categoryViews={}}postCreate(){this._searchHeader.textContent=pn(),this._searchTextBox=sl({navigationModel:this.navigationModel,container:this._searchTextboxContainer,onSearch:async e=>{let t="all"===this._searchTextBox.searchModeSelect.value?null:"*";!await this.onSearch(e,t)&&this._searchTextBox.showNoResultsTooltip(e)}}),this.addHandles(this._searchTextBox),this.updateSearchBoxHeight(!1),this._createQuickAccessChips();let e=er("div",{class:"ge-flex-row ge-margin-block-start-12"},this.domNode);if(this.supportedModes.length>1){let t,i=e=>{this._updateCategoriesVisibility(e),this.onBrowseModeChanged(e,this._groupFilterShown?this._groupFilterSelect.value:"none")},r=this._searchTextBox.searchModeSelect,o=this.supportedModes.indexOf("own"),s=this.supportedModes.indexOf("shared");if(o<0&&s<0)lr(r.domNode);else{if(o<0||s<0){let e=this.supportedModes[1];r.items=r.items.filter((t=>"all"===t.value||"standard"===t.value||t.value===e))}r.onChange=({value:e})=>{"all"===e&&(e="standard"),this._browseNavigator.value!==e&&(this._browseNavigator.value=e,this._browseSelect.value=e,i(e))},t=e=>{let t="other"===e?"all":e;"all"!==r.value&&(r.value=t),i(e)}}let a=this.supportedModes.map((e=>({label:"other"===e?this.nls.variablesView.otherVariables:this.nls.browseView[e+"Variables"],value:e})));this._browseNavigator=new tn({class:"ge-margin-inline-start-8",items:a,tabsGap:20,onChange:({value:e})=>{this._browseSelect.value=e,t?.(e)}}).placeAt(e),this.addHandles(this._browseNavigator),this._browseSelect=new na({class:"ge-margin-inline-start-8",items:a.slice(),onChange:({value:e})=>{this._browseNavigator.value=e,t?.(e)}}).placeAt(e),this.addHandles(this._browseSelect),lr(this._browseSelect.domNode)}else lr(this._searchTextBox.searchModeSelect.domNode),er("h1",{class:"heading-font ge-margin-inline-start-8",textContent:this.standardVariablesTitle||this.nls.browseView.standardVariables},e);er("div",{class:"ge-flex-spacer"},e),this._viewModeBar=function(e,t){let i=Ze("DataBrowserNew").dataBrowser.browseView;return new qn({class:"view-mode-button-bar lightGrey ge-margin-inline-4",items:[{value:"card",iconStart:"grid",tooltip:i.cardView,tooltipParams:{placement:"top-start"}},{value:"list",iconStart:"list-bullet",tooltip:i.listView,tooltipParams:{placement:"top-start"}}],value:"card",onChange:e=>t(e.value)}).placeAt(e)}(e,(e=>{this._changeViewMode(e),this.onViewModeChanged(e)})),this.addHandles(this._viewModeBar),this._groupFilterSelect=function(e,t){let i=Ze("DataBrowserNew").dataBrowser.browseView;return Zn||(Zn=[{label:i.category,value:"none"},{label:i.dataset,value:"Dataset"},{label:i.year,value:"Year"},{label:i.source,value:"Source"}],el=[{label:i.category,value:"none"},{label:i.author,value:"Source"}]),tl(i.browseBy,{value:"none",items:Zn},t,e)}(e,(e=>this.onGroupFilterChanged(e))),this.addHandles(this._groupFilterSelect),this._sortSelect=il(e,(e=>{this._currentSorting=e;let t=this.getCurrentSorting("title"),i=this._getCurrentCategoryView(),r=i.items;Po(r,t),i.update(r),"none"===this._groupFilterSelect.value&&this.onSortingChanged()})),this.addHandles(this._sortSelect),this.supportedModes.forEach((e=>{let t=this._categoryViews[e]=this._createCategoryView();this.addHandles(t),hr(t.domNode,"standard"===e)}))}_createQuickAccessChips(){let e=er("div",{class:"explore-chips ge-flex-row ge-flex-no-shrink"},this.domNode);this.navigateWithShortcuts&&this._createQuickAccessChip("allVariables",this.nls.allVariables,e),this._createQuickAccessChip("popular",this.nls.popular,e),this._newVariablesChip=this._createQuickAccessChip("newAndNoteworthy",this.nls.newAndNoteworthy,e),this.navigateWithShortcuts&&this.navigationModel.canShowUserVariables("favorites")&&(this._favoritesChip=this._createQuickAccessChip("favorites",this.nls.favorites,e)),this.shortcuts.forEach((({id:t,label:i})=>this._createQuickAccessChip(t,i,e,!0)))}_updateChipsVisibility(){hr(this._newVariablesChip,this.navigationModel.hasNewVariables()),this._favoritesChip&&hr(this._favoritesChip,this.navigationModel.hasFavorites())}_createQuickAccessChip(e,t,i,r){let o=new Ka({scale:"m",kind:"neutral",text:t});return Li(o.domNode,"browser-chip-clickable"),Co({kind:"neutral",appearance:"solid",styleProps:{roundButton:!0,noBorder:!0},onClick:()=>{this.onQuickAccessItemClicked(e,r)}},o.domNode,i).domNode}_changeViewMode(e){for(let t in this._categoryViews)this._categoryViews[t].changeMode(e)}_createCategoryView(){return new Vn({class:"ge-margin-block-start-8 ge-flex-spacer",viewMode:this._viewModeBar.value,iconFactory:this.navigationModel.iconFactory,onItemSelected:e=>{let t=this._groupFilterShown?this._groupFilterSelect.value:"none",i="none"!==t?{tag:t,value:e.id}:null;this.onItemSelected(e,i)},onExploreItemClicked:e=>this.onQuickAccessItemClicked(e)}).placeAt(this.domNode)}update(e,t,i,r,o,s){if(this._updateChipsVisibility(),o&&(o.searchString&&(this._searchTextBox.value=o.searchString),this.supportedModes.length>1&&(this._searchTextBox.searchModeSelect.value="*"===o.categoryId?e:"all")),t!==this._viewModeBar.value&&(this._viewModeBar.value=t,this._changeViewMode(t)),this._browseNavigator&&(this._browseNavigator.value=e,this._browseSelect.value=e),!s){this._updateCategoriesVisibility(e,r,i);let o=("own"===e||"shared"===e)&&"none"===r;this._categoryViews[e].update(i,{mode:this._forceCategoryMode||t,largeCards:o})}}getCurrentSorting(e){switch(this._currentSorting){case"alphabetical":case"author":return{attribute:e};case"unalphabetical":case"authorDesc":return{attribute:e,descending:!0};case"newest":return{attribute:"modified",descending:!0};case"oldest":return{attribute:"modified"};case"popularity":return{attribute:"sortIndex"}}}_updateCategoriesVisibility(e,t,i){if(this._groupFilterShown="own"!==e&&"other"!==e,hr(this._groupFilterSelect.domNode.parentElement,this._groupFilterShown),this._groupFilterShown&&(function(e,t,i){let r=e.value,o="standard"===t?Zn:el;e.items=o.filter((e=>"none"===e.value||i[e.value])),e.value="standard"===t||"Source"===r?r:"none"}(this._groupFilterSelect,e,this.navigationModel.getAvailableBrowseFilters()),t&&(this._groupFilterSelect.value=t)),this.supportedModes.length>1)for(let t in this._categoryViews)hr(this._categoryViews[t].domNode,t===e);if(this._updateSortOptions(e),i&&"other"!==e){Po(i,this.getCurrentSorting("title"))}}_updateSortOptions(e){if("other"===e)return void lr(this._sortSelect.domNode.parentElement);dr(this._sortSelect.domNode.parentElement);let t=function(e,t,i){let r="standard"===t,o="own"===t||"Source"!==i,s=r&&"none"===i,a=s?"popularity":e.value;return e.items=e.items.map((e=>{if(r){let t="alphabetical"===e.value||"unalphabetical"===e.value||s&&"popularity"===e.value;e.hidden=!t}else{let t="author"===e.value||"authorDesc"===e.value;e.hidden="popularity"===e.value||(o?t:!t)}return e.hidden&&e.value===a&&(a=null),e})),e.value=a||(r?"alphabetical":o?"newest":"author"),s}(this._sortSelect,e,this._groupFilterSelect.value);this._currentSorting=this._sortSelect.value,t&&this.onSortingChanged()}_getCurrentCategoryView(){return this._categoryViews[this.getCurrentMode()]}getCurrentMode(){return this._browseNavigator?.value||"standard"}updateSearchBoxHeight(e){!function(e,t){let i="l"===t?20:16,r="l"===t?44:32;e.scale=t,Pr(e.domNode,"input-library",`input { padding-inline-end: ${r+2}px !important; block-size: ${r}px !important; }\n    calcite-icon { block-size: ${i}px !important; inline-size: ${i}px !important; }`),e.clearButtonSize=r,e.updateClearButton(),e.gearAction.padding=(r-20)/2-4+"px",e.gearAction.domNode.style.marginInlineStart=2-r+"px",e.gearAction.domNode.style.marginInlineEnd="2px",e.searchButton.domNode.style.height=r+"px",e.searchModeSelect&&(e.searchModeSelect.openButton.domNode.style.height=r-2+"px")}(this._searchTextBox,e?"l":"m")}resize(){hr(this._searchTextBox.gearAction.domNode,this.navigationModel.semanticSearchEnabled);let e=this._getCurrentCategoryView();if(this._browseNavigator){lr([this._browseNavigator.domNode,this._browseSelect.domNode,e.domNode]);let t=Ji(this.domNode).w,i=ll*this.supportedModes.length+dl;this._browseSelectShown=t&&t<i,this._browseNode=this._browseSelectShown?this._browseSelect.domNode:this._browseNavigator.domNode,dr([this._browseNode,e.domNode])}e.resize();let t,i=Ji(e.domNode).h,r=this._forceCategoryMode,o=this._viewModeBar.value,s=this.supportedModes.length>1?hl:cl,a=i&&i<s;hr(this._viewModeBar.domNode,!a),a?(this._forceCategoryMode="list","list"!==o&&(t="list")):(this._forceCategoryMode=null,r&&"list"!==o&&(t="card")),t&&this._changeViewMode(t)}gt_getSearchTextboxContainer(){return this._searchTextboxContainer}gt_getBrowseContainer(){return this._browseNode}gt_getGroupFilterContainer(){return this._groupFilterSelect.domNode.parentElement}gt_getFirstItem(){return this._getCurrentCategoryView().gt_getFirstItem()}gt_selectFirstItem(){let e=this._getCurrentCategoryView();e.onItemSelected(e.items[0])}gt_setGroupFilterShown(e){this._groupFilterShown&&(e?this._groupFilterSelect.openPopup():this._groupFilterSelect.closePopup())}gt_setBrowseSelectShown(e){this._browseSelectShown&&(e?this._browseSelect.openPopup():this._browseSelect.closePopup())}};nl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?al(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],nl);var ll=125,dl=490,cl=166,hl=230,pl=class extends wr{constructor(e,t){super(),this.idProperty="id",this.autoIdentify=!0,t?.idProperty&&(this.idProperty=t.idProperty),t&&void 0!==t.autoIdentify&&(this.autoIdentify=t.autoIdentify),this.root={label:t?.rootLabel,deepness:-1,selectCount:0,leafCount:0,children:e||[]},this._hash={},this.idProperty&&this.autoIdentify&&(this._autoId=1),this._initializeNode(this.root,0),this.data=this.root.children}_initializeNode(e,t){if(e.selected=!!e.selected,!e.children)return"number"!=typeof e.leafCount&&(e.leafCount=1),void(e.selectCount=e.selected?e.leafCount:0);e.selectCount=0,e.leafCount=0,e.children.forEach((i=>{this._registerNode(i),i.parent=e,i.deepness=t,this._initializeNode(i,t+1),e.selectCount+=i.selectCount,e.leafCount+=i.leafCount})),e.selectCount?e.selectCount===e.leafCount&&(e.selected=!0):e.selected=!1}isOwned(e,t=!1){return!t&&e===this.root||this.get(this.getIdentity(e))===e}_registerNode(e){this._autoId&&void 0===e[this.idProperty]&&(e[this.idProperty]=this._autoId++),this.idProperty&&(this._hash[e[this.idProperty]]=e)}_unregisterNode(e){this.isOwned(e,!0)&&delete this._hash[e[this.idProperty]]}clear(){this.root.children.length&&(this.root.children.forEach((e=>{this._unbindNode(e)})),this.data=this.root.children=[])}_unbindNode(e){e.children&&e.children.forEach((e=>{delete e.parent,this._unbindNode(e)})),this._unregisterNode(e),e.parent&&(this._incrementCounts(e.parent,-e.selectCount,-e.leafCount),delete e.parent)}removeNodes(e,t=!1){e?.slice().forEach((e=>{if(!this.isOwned(e,!0))return;let t=e.parent,i=t.children.indexOf(e);i>=0&&t.children.splice(i,1),this._unbindNode(e)})),!t&&this.emit("updated")}addNodes(e,t,i){if(t){if(!this.isOwned(t)||!t.children)return!1}else t=this.root;let r=t.deepness+1,o=0,s=0;return e.forEach((e=>{this.isOwned(e)||(t.children.push(e),this._registerNode(e),e.parent=t,e.deepness=r,this._initializeNode(e,r+1),o+=e.selectCount,s+=e.leafCount)})),this._incrementCounts(t,o,s),!i&&this.emit("updated"),!0}select(e,t){return this.changeSelect(e,!0,t)}deselect(e){this.changeSelect(e,!1)}changeSelect(e,t,i){if(i=i||this.root.leafCount,!e)return!1;let r=((t=!!t)?e.leafCount:0)-e.selectCount,o=r<0||this.root.selectCount+r<=i;return e.children?(o&&(e.selected=t),e.children.forEach((e=>{this.changeSelect(e,t,i)})),o):(o&&(e.selected=t,r&&this._incrementCounts(e,r)),o)}_incrementCounts(e,t,i){e.selectCount+=t,i&&(e.leafCount+=i),e.selectCount?e.selectCount===e.leafCount&&(e.selected=!0):e.selected=!1,e.parent&&this._incrementCounts(e.parent,t,i)}getSelectionState(e){return!!this.isOwned(e)&&(e.selectCount&&e.selectCount!==e.leafCount?"mixed":e.selected=!!e.selectCount)}getSelectedNodes(e){return this.getDescendingNodes(this.root,!0,e)}getDescendingNodes(e,t,i){if(!this.isOwned(e))return[];let r=[];return this._collectNodes(e.children,r,t,i),r}_collectNodes(e,t,i,r){e.forEach((e=>{let o=null==i?e.leafCount:i?e.selectCount:e.leafCount-e.selectCount;o&&(!e.children||!r&&o===e.leafCount?t.push(e):this._collectNodes(e.children,t,i,r))}))}inspectChildren(e,t,i){let r=(e=e||this.root).children;return r&&i&&(r=r.slice(),r.sort(i)),r.every((e=>{let r=t(e);return null!==r&&(!1===r||!e.children||this.inspectChildren(e,t,i))}))}updateExpand(e,t){e?.children&&e.expanded!==t&&(e.expanded=t)}get(e){let t="string"==typeof e||"number"==typeof e?e:e?.[this.idProperty];return this._hash[t]}getIdentity(e){return this.idProperty?e[this.idProperty]:null}mayHaveChildren(e){return!!e.children}},ul=Object.defineProperty,gl=Object.getOwnPropertyDescriptor,ml=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?gl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&ul(t,i,s),s},bl=class extends kr{constructor(e){super(e),this._templateString='<calcite-block class="esriGECalcite esriGECalciteBlock"></calcite-block>',this.noMargin=!0,this._open=!1,this._collapsible=!0,this._disabled=!1}get heading(){return this.domNode.heading}set heading(e){this._heading=e,this.domNode&&(this.domNode.heading=e)}get headingLevel(){return this.domNode.headingLevel}set headingLevel(e){this._headingLevel=e,this.domNode&&(this.domNode.headingLevel=e)}get description(){return this.domNode.description}set description(e){this._description=e,this.domNode&&(this.domNode.description=e)}get open(){return this.domNode.open}set open(e){this._open=e,this.domNode&&(this.domNode.open=e)}get collapsible(){return this.domNode.collapsible}set collapsible(e){this._collapsible=e,this.domNode&&(this.domNode.collapsible=e)}get disabled(){return this.domNode.disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}postCreate(){this.noMargin?this.domNode.style.margin="0":this.domNode.style.marginBlockEnd="0",this.heading=this._heading,this.headingLevel=this._headingLevel||2,this.description=this._description,this.open=this._open,this.domNode.collapsible=this._collapsible,this.disabled=this._disabled,wi(this.domNode,"calciteBlockOpen",(()=>{this.onToggled?.()})),wi(this.domNode,"calciteBlockClose",(()=>{this.onToggled?.()})),this.onToggled&&Ar(this.domNode).then((()=>this.onToggled()))}async addToDescription(e){this.domNode.querySelector(".description")?.remove();let t=(await _i((()=>Ar(this.domNode)),100)).querySelector("#header .title");t&&(e.classList.add("description"),er("slot",{name:"description"},t),e.slot="description",this.domNode.append(e))}addActionStart(e){this.hasAction(e)||(e.domNode.slot="icon",e.domNode.id="block-action-start",this.domNode.append(e.domNode))}async addActionEnd(e){this.hasAction(e)||(e.domNode.slot="control",e.domNode.id="block-action-end",this.domNode.append(e.domNode))}hasAction(e){return e&&this.domNode.contains(e.domNode)}removeAction(e){e&&this.domNode.contains(e.domNode)&&this.domNode.removeChild(e.domNode)}};ml([u({constructOnly:!0})],bl.prototype,"noMargin",2),bl=ml([p()],bl);var _l=class{constructor(e){this._cache={},Object.assign(this,e)}createPresentation(e){if(!1===e.visible)return null;let t=document.createElement("calcite-tree-item");Kr(t,"",!0),t.expanded=e.expanded,Li(t,"selectableTreeListItem"),e.iconStart&&(t.iconStart=e.iconStart,Pr(t,"icon-start","\n          .node-container .icon-start {\n            margin-inline-start: 0 !important;\n            margin-inline-end: 0.75rem;\n          }\n        "));let i={item:e,itemNode:t};return this._cache[e[this.widget.tree.idProperty]]=i,this._createItemContent(e,t,i),this._createItemChildren(e,t),t}_createItemContent(e,t,i){if("checkboxes"===this.widget.selectionMode){er("div",{class:"itemSpacer",innerHTML:"&nbsp;"},t);let r=(new Xn).placeAt(t);r.onClick=()=>{this.executeSelectionClick(e)},i.checkbox=r,er("div",{class:"itemSpacer",innerHTML:"&nbsp;"},t)}this.widget.rowRenderer?this.widget.rowRenderer(e,i):er("span",{textContent:e[this.widget.labelProperty]},t)}_createItemChildren(e,t){if(!e.children?.length)return;let i=document.createElement("calcite-tree");Kr(i,"",!0),i.slot="children",t.appendChild(i),e.children.forEach((e=>{let t=this.createPresentation(e);t&&i.appendChild(t)}))}getAllRows(){return Object.values(this._cache)}getItemRow(e){return this._cache[e?.[this.widget.tree.idProperty]]}getItemRowByNode(e){for(let t in this._cache){let i=this._cache[t];if(i.itemNode===e)return i}return null}setExpanded(e,t){this.widget.tree.updateExpand(e,t);let i=this._cache[e[this.widget.tree.idProperty]];i&&(i.itemNode.expanded=t)}updateSelection(e){let t=this._cache[e[this.widget.tree.idProperty]];if(!t?.checkbox)return;let i=this.widget.tree.getSelectionState(e);t.checkbox.checked=i}executeSelectionClick(e){let t=this.widget.tree,i=this.widget.getSelectedState(!0),r=this._cache[e[this.widget.tree.idProperty]],o=e.parent.children;if(Ko()&&this._lastClickedItem&&o.includes(this._lastClickedItem)){let i=o.indexOf(this._lastClickedItem),r=o.indexOf(e),s=Math.min(i,r),a=Math.max(i,r);for(let e=s;e<=a;e++){let i=o[e];i!==this._lastClickedItem&&t.changeSelect(i,!t.getSelectionState(i))}}else t.changeSelect(e,!t.getSelectionState(e));this._lastClickedItem=e,this.widget._onCheckboxClicked(i,r.itemNode)}},fl=Object.defineProperty,vl=Object.getOwnPropertyDescriptor,yl=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?vl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&fl(t,i,s),s},wl=class extends kr{constructor(e){super(e),this._templateString="<calcite-tree class='esriGECalcite esriGECalciteSelectableTreeList'></calcite-tree>",this.labelProperty="label",this.selectionMode="checkboxes"}get tree(){return this._tree}set tree(e){this._setTree(e)}postCreate(){this.domNode.selectionMode=["checkboxes","none"].includes(this.selectionMode)?"none":"single-persist",this.itemRenderer=this.itemRenderer||new _l,this.itemRenderer.widget=this,wi(this.domNode,"calciteInternalTreeItemSelect",(e=>{let t=e.target,i=this.itemRenderer.getItemRowByNode(t);this.onRowClicked({...i})})),"single-persist"===this.selectionMode&&wi(this.domNode,"calciteTreeSelect",(()=>{let e=this.getSelectedRow();e&&this.onRowSelected(e)})),Kr(this.domNode,"",!0)}_setTree(e){this._tree=e,this._needRebuild=!0,this._updateUI_delayed()}refresh(e){this._needRebuild=!0,e?this._updateUI():this._updateUI_delayed()}_updateUI_delayed(){Bo(this,"_updateUI_private")}_updateUI_private(){this._updateUI()}_updateUI(){this._needRebuild&&(this._needRebuild=!1,this.domNode.innerHTML="",this.tree.root.children.forEach((e=>{let t=this.itemRenderer.createPresentation(e);t&&this.domNode.appendChild(t)})),"checkboxes"===this.selectionMode?this._refreshCheckboxes():this.selectSingleRow(this.getSelectedRow()?.item))}isExpanded(e){return this.tree.get(e)?.expanded}setExpanded(e,t){let i=this.tree.get(e);i&&this.itemRenderer.setExpanded(i,t)}toggleExpand(e){this.setExpanded(e,!this.isExpanded(e))}getExpandedState(){let e={};return this.tree?.inspectChildren(null,(t=>(t.children?.length&&(e[t[this.tree.idProperty]]=!!t.expanded),!0))),e}setExpandedState(e){for(let t in e)this.setExpanded(t,!!e[t])}emulateManualSelectionToggle(e){this.itemRenderer.executeSelectionClick(e)}isItemSelected(e){return e?.selected}getSelectedItems(e){return this.tree?.getSelectedNodes(e)||[]}getSelectedState(e){let t={};return this.tree?.getSelectedNodes(e).forEach((e=>{t[e[this.tree.idProperty]]=!0})),t}setSelectedState(e){if(this.tree.changeSelect(this.tree.root,!1),e)for(let t in e){let i=this.tree.get(t);i&&this.tree.changeSelect(i,!!e[t])}this._refreshCheckboxes()}setItemSelected(e,t,i=!1){this.tree.changeSelect(e,t),!i&&this._refreshCheckboxes()}setItemsSelected(e,t,i=!1){e.forEach((e=>this.tree.changeSelect(e,t))),!i&&this._refreshCheckboxes()}_onCheckboxClicked(e,t){this._refreshCheckboxes();let i=this.getSelectedState(!0),r=[];for(let t in i)i[t]&&!e[t]&&r.push(this.tree.get(t));let o=[];for(let t in e)e[t]&&!i[t]&&o.push(this.tree.get(t));this.onSelectionChanged({selectedItems:r,unselectedItems:o,clickNode:t})}_refreshCheckboxes(){this.tree.inspectChildren(this.tree.root,(e=>{this.itemRenderer.updateSelection(e)}))}onSelectionChanged(e){}getSelectedRow(){let e=this.itemRenderer.getAllRows().find((e=>e.itemNode.selected));return e&&{...e}}getRow(e){let t=this.itemRenderer.getAllRows().find((t=>t.item[this.tree.idProperty]===e));return t&&{...t}}selectSingleRow(e){for(let t of this.itemRenderer.getAllRows())t.itemNode.selected=e===t.item}onRowClicked(e){}onRowSelected(e){}gt_collapseAll(){this.tree.inspectChildren(this.tree.root,(e=>(this.setExpanded(e,!1),!0)))}};yl([u({constructOnly:!0})],wl.prototype,"selectionMode",2),wl=yl([p()],wl);var xl=Object.getOwnPropertyDescriptor,Cl=class extends kr{constructor(e){super(e),this._templateString='\n  <div class="browser-navigation-panel">\n    <div data-attach-point="exploreBlockContainer"></div>\n    <div data-attach-point="categoriesBlockContainer"></div>\n  </div>'}postCreate(){this._exploreTree=new pl,this._exploreTreeList=this._createTree({tree:this._exploreTree,onRowSelected:e=>{this.onExploreItemClick(e.item.id)}},this.exploreBlockContainer),this.addHandles(this._exploreTreeList);let e=new bl({heading:Ze("DataBrowserNew").dataBrowser.categories,headingLevel:2,open:!0,noMargin:!1}).placeAt(this.categoriesBlockContainer,"replace");this.addHandles(e),Pr(e.domNode,"block-no-padding","section { padding: 0 !important; }"),this._categoriesTree=new pl,this._categoriesTreeList=this._createTree({tree:this._categoriesTree,onRowSelected:e=>{this.onCategoryItemClick(e.item.id)}},e.domNode),this.addHandles(this._categoriesTreeList)}_createTree(e,t){return new wl({...e,selectionMode:"single-persist",rowRenderer:(e,t)=>{let i=er("div",{class:"navigation-tree-row ge-flex-row"},t.itemNode),r=this.iconFactory.createCategoryIcon(e,{class:"ge-margin-inline-end-8",scale:"s",size:16});r&&ir(r,i),er("div",{textContent:e.label},i)}}).placeAt(t)}updateCategories(e,t){this._categoriesTree.clear(),this._categoriesTree.addNodes(t),this._categoriesTreeList.refresh(!0)}updateExploreItems(e){this._exploreTree.clear(),this._exploreTree.addNodes(e),this._exploreTreeList.refresh(!0)}update(e){switch(e.navigate){case"explore":this._selectExploreNode(e.itemId),this._updateCategoriesTree(null);break;case"categories":this._selectExploreNode(null),this._updateCategoriesTree(e.itemId);break;case"none":this._selectExploreNode(null),this._updateCategoriesTree(null)}}_selectExploreNode(e){let t=this._exploreTree.get(e);this._exploreTreeList.selectSingleRow(t)}_updateCategoriesTree(e){let t=this._categoriesTree.get(e);this._categoriesTreeList.selectSingleRow(t)}};Cl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?xl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Cl);var Sl=class{constructor(e){this.paginationInitDelay=200,Object.assign(this,e)}reset(){this._pages=null,this._index=0,this.moveNextButton.domNode.remove(),this.movePrevButton.domNode.remove(),Di(this.container,this.paginationClass),or(this.container),this._resolveWait(!1)}async init(e){this._containerBox=Ji(this.container),this._containerBox.w&&this._containerBox.h&&(await _i(),await this._waitForItemsRendered()&&(await _i(this.paginationInitDelay),this._waitDfd&&(this._resolveWait(!1),this.container.scrollHeight>1.5*this._containerBox.h&&this._paginate(e))))}_waitForItemsRendered(){return this._resolveWait(!1),this._waitDfd=Ee(),this._initInterval=setInterval((()=>{let e=this.container.children;for(let t=0;t<e.length;t++)if(!e[t].clientWidth)return;this._resolveWait(!0)}),20),this._waitDfd.promise}_resolveWait(e){this._waitDfd&&(this._waitDfd.resolve(e),e||(clearInterval(this._initInterval),this._waitDfd=null))}_paginate(e){let t=this._containerBox.w-this.paginationGap-this.buttonsWidth,i=0,r=[];this._pages=[r];let o=this.container.children,s=o.length-1,a=0;for(let n=0;n<=s;n++){let l=o[n],d=l.clientWidth;lr(l),i+=d+(i?this.gap:0),(i>t||1!==this._pages.length&&n!==s&&i>t-this.buttonsWidth)&&(r=[],i=d,this._pages.push(r)),r.push(l),n===e&&(a=this._pages.length-1)}Li(this.container,this.paginationClass),er("div",{class:"ge-flex-spacer"},this.container),this.movePrevButton.placeAt(this.container),this.movePrevButton.onClick=()=>this._showPage(this._index-1),this.moveNextButton.placeAt(this.container),this.moveNextButton.onClick=()=>this._showPage(this._index+1),this._index=-1,this._showPage(a)}_showPage(e){(this._index<0?null:this._pages[this._index])?.forEach((e=>lr(e))),hr(this.movePrevButton.domNode,0!==e),hr(this.moveNextButton.domNode,e!==this._pages.length-1),this._index=e,this._pages[e].forEach(((e,t)=>{!t&&(e.style.marginInlineStart="0"),dr(e)}))}},Nl=Object.getOwnPropertyDescriptor,El=class extends kr{constructor(e){super(e),this._templateString='<calcite-slider class="esriGECalcite esriGECalciteSlider"></calcite-slider>',this.intermediateChanges=!0,this._rangeColor="var(--calcite-color-brand)",this._snap=!0,this._labelHandles=!0,this._updateLabels=()=>{this.labelFormatter&&Ar(this.domNode).then((()=>{let e=this.domNode.shadowRoot.querySelectorAll(".handle__label.handle__label--minValue"),t=this.domNode.shadowRoot.querySelectorAll(".handle__label.handle__label--value");e.length?(e.forEach((e=>e.innerHTML=this.labelFormatter(this.lowerValue,!0))),t.forEach((e=>e.innerHTML=this.labelFormatter(this.upperValue,!1)))):t.length&&t.forEach((e=>e.innerHTML=this.labelFormatter(this.value,!1))),e.forEach((e=>e.style.whiteSpace="nowrap")),t.forEach((e=>e.style.whiteSpace="nowrap"))}))}}set rangeColor(e){this._rangeColor=e,this.domNode&&this.updateRangePrimaryColor(this._rangeColor)}get min(){return this._min}set min(e){this._min=e,this.domNode&&(this.domNode.min=e)}get max(){return this._max}set max(e){this._max=e,this.domNode&&(this.domNode.max=e)}get value(){return this.domNode&&(this._value=this.domNode.value),this._value}set value(e){isNaN(e)||(this._value=e,this.domNode&&(this.domNode.value=this._value),this._updateLabels(),this.onSetValue?.())}get lowerValue(){return this.domNode&&(this._lowerValue=this.domNode.minValue),this._lowerValue}set lowerValue(e){isNaN(e)||(this._lowerValue=e,this.domNode&&(this.domNode.minValue=this._lowerValue),this.onSetValue?.())}get upperValue(){return this.domNode&&(this._upperValue=this.domNode.maxValue),this._upperValue}set upperValue(e){isNaN(e)||(this._upperValue=e,this.domNode&&(this.domNode.maxValue=this._upperValue),this.onSetValue?.())}get snap(){return this._snap}set snap(e){this._snap=e,this.domNode&&(this.domNode.snap=e)}get step(){return this._step}set step(e){this._step=e,this.domNode&&(this.domNode.step=e)}get labelHandles(){return this._labelHandles}set labelHandles(e){this._labelHandles=e,this.domNode&&(this.domNode.labelHandles=e)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.domNode&&(this.domNode.disabled=e)}set mirrored(e){this._mirrored=e,this.domNode&&(this.domNode.mirrored=e)}get precise(){return this._precise}set precise(e){this._precise=e,this.domNode&&(this.domNode.precise=e)}get ticks(){return this._ticks}set ticks(e){this._ticks=e,this.domNode&&(this.domNode.ticks=e)}get histogram(){return this._histogram}set histogram(e){this._histogram=e,this.domNode&&(this.domNode.histogram=e)}get histogramStops(){return this._histogramStops}set histogramStops(e){this._histogramStops=e,this.domNode&&(this.domNode.histogramStops=e)}get shadowRootReady(){return Ar(this.domNode,".container")}get thumbArialLabels(){return this._thumbArialLabels}set thumbArialLabels(e){!e?.length||Array.isArray(e)&&!e[0]&&!e[1]||(this._thumbArialLabels=e,this.domNode&&Ar(this.domNode).then((t=>{this.withSecondHandle&&Array.isArray(e)&&2===e.length?(t.querySelector(".thumb.thumb--minValue").setAttribute("aria-label",e[0]),t.querySelector(".thumb.thumb--value").setAttribute("aria-label",e[1])):"string"==typeof e&&t.querySelector(".thumb.thumb--value").setAttribute("aria-label",e)})))}postCreate(){this.rangeColor=this._rangeColor,this.max=this._max,this.min=this._min,this.withSecondHandle?(this.lowerValue=this._lowerValue,this.upperValue=this._upperValue):this.value=this._value,this.disabled=this._disabled,this.snap=this._snap,this.labelHandles=this._labelHandles,this.step=this._step||(this._snap?1:.01),this.precise=this._precise,this.ticks=this._ticks,this.histogram=this._histogram,this.histogramStops=this._histogramStops,this.mirrored=this._mirrored,this.thumbArialLabels=this._thumbArialLabels;let e=()=>{null!==this.maxLowerValue&&this.lowerValue>this.maxLowerValue&&(this.lowerValue=this.maxLowerValue),null!==this.minUpperValue&&this.upperValue<this.minUpperValue&&(this.upperValue=this.minUpperValue)};wi(this.domNode,"calciteSliderInput",(()=>{e(),this._updateLabels(),this.intermediateChanges&&this.onChange?.()})),wi(this.domNode,"calciteSliderChange",(()=>{!this.intermediateChanges&&this.onChange?.()})),wi(this.domNode,"press",(e=>{this.onThumbPress?.(),e.stopPropagation(),xi(document.body,"release",(()=>{this.onThumbRelease?.()}))})),this.updateRangePrimaryColor(),this._updateLabels()}updateRangePrimaryColor(e){Ar(this.domNode).then((()=>{let t=this.domNode.shadowRoot.querySelectorAll(".track__range"),i=this.domNode.shadowRoot.querySelector(".graph")?.shadowRoot.querySelectorAll(".graph-path--highlight"),r=e||"var(--calcite-color-brand)";t.forEach((e=>{e.style.backgroundColor=r})),i?.forEach((e=>{e.style.fill=r,e.style.opacity="0.5"}))}))}_updateRangeSecondaryColor(e){Ar(this.domNode).then((()=>{let t=this.domNode.shadowRoot.querySelectorAll(".track"),i=this.domNode.shadowRoot.querySelector(".graph")?.shadowRoot.querySelectorAll(".graph-path"),r=e||"var(--calcite-color-brand)";t.forEach((e=>{e.style.backgroundColor=r})),i?.forEach((e=>{e.style.fill=r,e.style.opacity="0.5"}))}))}reverseAppearance(e){this.updateRangePrimaryColor(e?this._rangeColor:"var(--calcite-color-border-2)"),this._updateRangeSecondaryColor(e?"var(--calcite-color-border-2)":this._rangeColor)}};El=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Nl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],El);var kl=Object.getOwnPropertyDescriptor;function Il(e){let t=new an({height:32,onEnter:()=>{t.domNode.blur()},onBlur:()=>e.onEnter()}).placeAt(e.node);wi(t.domNode,["click","release"],(()=>{t.domNode.setFocus()}));return{getValue:()=>t.value,setValue:e=>{t.value=e,setTimeout((()=>{t.domNode&&(t.domNode.clientWidth<t.domNode.scrollWidth?t.domNode.setAttribute("title",e):t.domNode.removeAttribute("title"))}))},destroy:()=>t.destroy()}}var Tl=class extends kr{constructor(e){super(e),this._templateString='\n  <div class="esriGECalcite esriGECalciteNumericalSlider esriGENonSelectable">\n    <div data-attach-point="_divLabel" class="slider_label"></div>\n    <div class="slider_content">\n      <div class="slider_minValueTextBox" data-attach-point="_divMinValue"></div>\n      <div class="slider_container" data-attach-point="_container">\n        <div class="esriGEAbsoluteStretched slider_statisticsContainer" data-attach-point="_statisticsContainer"></div>\n        <div class="slider_sliderContainer" data-attach-point="_sliderContainer">\n          <div class="slider_hLineDiv" data-attach-point="_hLineDiv"></div>\n        </div>\n      </div>\n      <div class="slider_maxValueTextBox" data-attach-point="_divMaxValue"></div>\n    </div>\n  </div>\n  ',this.decimals=0,this.minValue=0,this.maxValue=0,this.lowerValue=0,this.upperValue=0,this.maxNumStatBlocks=20,this.minNumStatBlocks=10,this.minNumDataForStatistics=2,this.sliderWidth=150,this.textboxWidth=65,this.sliderHeight=30,this.timeIntervalLength=0,this.sliderStep=null,this.sliderSnap=!0,this.intermediateChanges=!0,this.textBoxFactory=Il,e&&this.setData(e)}postCreate(){this.labelText?this._divLabel.innerHTML=this.labelText:lr(this._divLabel),vi()&&Li(this.domNode,"isMobile"),Ui(this._container,{width:this.sliderWidth+"px",height:this.sliderHeight+"px",marginLeft:"5px",marginRight:"5px"}),this._createMinTextBox(),this._createMaxTextBox(),this._updateTextBoxes(),this._createSlider(),this._updateBottomLabels()}_createSlider(){this._slider=new El({intermediateChanges:this.intermediateChanges,withSecondHandle:!0,labelHandles:!1,lowerValue:this.lowerValue,upperValue:this.upperValue,thumbArialLabels:this.minThumbAriaLabel&&this.maxThumbAriaLabel&&[this.minThumbAriaLabel,this.maxThumbAriaLabel],maxLowerValue:this.maxLowerValue,minUpperValue:this.minUpperValue,min:this.minValue,max:this.maxValue,snap:this.sliderSnap,step:this.sliderStep??10**-this.decimals,onChange:()=>{this.lowerValue=this._slider.lowerValue,this.upperValue=this._slider.upperValue,this._updateTextBoxes(),this._updateOutliersColor(),this._updateBottomLabels(),this._doEmitChangeEvent()}}).placeAt(this._sliderContainer)}_createMinTextBox(){this._tbxMinValue=this.textBoxFactory({isMin:!0,node:this._divMinValue,onEnter:()=>this._onChangeMinValue()}),Ui(this._divMinValue,{width:this.textboxWidth+"px"})}_createMaxTextBox(){this._tbxMaxValue=this.textBoxFactory({isMin:!1,node:this._divMaxValue,onEnter:()=>this._onChangeMaxValue()}),Ui(this._divMaxValue,{width:this.textboxWidth+"px"})}_updateThumbTooltip(e,t,i){}_validateLowerValue(e){return Math.min(Math.min(this.upperValue,Math.max(this.minValue,e)),"number"==typeof this.maxLowerValue?this.maxLowerValue:1/0)}_validateUpperValue(e){return Math.max(Math.max(this.lowerValue,Math.min(this.maxValue,e)),"number"==typeof this.minUpperValue?this.minUpperValue:-1/0)}setData(e){"number"!=typeof e.minValue&&e.dataArray&&(e.minValue=Math.min.apply(null,e.dataArray)),"number"!=typeof e.maxValue&&e.dataArray&&(e.maxValue=Math.max.apply(null,e.dataArray)),"number"!=typeof e.lowerValue&&"number"==typeof e.minValue&&(e.lowerValue=e.minValue),"number"!=typeof e.upperValue&&"number"==typeof e.maxValue&&(e.upperValue=e.maxValue);for(let t in e)this[t]=e[t];this._slider&&("number"==typeof e.minValue&&(this._slider.min=e.minValue),"number"==typeof e.maxValue&&(this._slider.max=e.maxValue))}setValue(e,t=!1){let i="rtl"===document.dir?1:0,r="rtl"===document.dir?0:1,o=this.lowerValue,s=this.upperValue;return e[i]>this.upperValue?(this.upperValue=this._validateUpperValue(e[r]),this.lowerValue=this._validateLowerValue(e[i])):(this.lowerValue=this._validateLowerValue(e[i]),this.upperValue=this._validateUpperValue(e[r])),this._updateTextBoxes(),this._updateThumbs(),this._updateOutliersColor(),this._updateBottomLabels(),(o!==this.lowerValue||s!==this.upperValue)&&(t&&this._doEmitChangeEvent(),!0)}_updateTextBoxes(){this._tbxMinValue.setValue(this.numberToText(this.lowerValue,!0)),this._tbxMaxValue.setValue(this.numberToText(this.upperValue,!1))}_updateThumbs(){this._slider.lowerValue=this.lowerValue,this._slider.upperValue=this.upperValue}_onChangeMinValue(){let e=this.textToNumber(this._tbxMinValue.getValue(),!0);isNaN(e)||(e=Math.min(this.maxValue,Math.max(this.minValue,e)),this.setValue([e,e<=this.upperValue?this.upperValue:e])&&this._emitChangeEvent()),this._updateTextBoxes(),this._updateOutliersColor(),this._updateBottomLabels()}_onChangeMaxValue(){let e=this.textToNumber(this._tbxMaxValue.getValue(),!1);isNaN(e)||(e=Math.min(this.maxValue,Math.max(this.minValue,e)),this.setValue([e>=this.lowerValue?this.lowerValue:e,e])&&this._emitChangeEvent()),this._updateTextBoxes(),this._updateOutliersColor(),this._updateBottomLabels()}_emitChangeEvent(){Bo(this,"_doEmitChangeEvent",this.timeIntervalLength)}_doEmitChangeEvent(){this.onChange({lowerValue:this.lowerValue,upperValue:this.upperValue})}setStatistics(e){if(Li(this.domNode,"hasHistogram"),(e=e.filter((e=>e>=this.minValue&&e<=this.maxValue))).length<this.minNumDataForStatistics)return;e.sort(((e,t)=>e-t));let t=1/0;for(let i=0;i<e.length;i++){if(0===i)continue;let r=Math.abs(e[i]-e[i-1]);r>0&&(t=Math.min(r))}let i=isFinite(t)?Math.max(Math.round((this.maxValue-this.minValue)/t)+1,this.minNumStatBlocks):1e6,r=Math.min(this.maxNumStatBlocks,i),o=(this.maxValue-this.minValue)/r,s=this.minValue+o,a=[0],n=Math.max(1,Ut(this.maxValue));e.forEach((e=>{if(Wt(e,n)<=Wt(s,n))a[a.length-1]++;else{for(;Wt(e,n)>Wt(s,n);)s+=o,a.push(0);a[a.length-1]++}})),this.setCounts(a)}setCounts(e){Li(this.domNode,"hasHistogram");let t=0;e.forEach((e=>t=Math.max(t,e))),or(this._statisticsContainer);let i=(this.sliderWidth-10)/e.length,r=this.sliderHeight-10;e.forEach(((e,o)=>{let s=er("div",{class:"slider_statisticsContainerBlock"},this._statisticsContainer);s.style.width=i-1+"px";let a=e>0?(r-2)*e/t+2:0;s.style.height=a+"px",s.style[Ti()?"left":"right"]=i*o+"px",s.style.top=r-a+"px"})),this._counts=e,this._updateOutliersColor()}_updateOutliersColor(){if(!this._counts||!this.outliersColor)return;let e=this._counts,t=this.minValue,i=(this.maxValue-t)/e.length;e.forEach(((e,r)=>{let o=this._statisticsContainer.children[r],s=t+i*r,a=s+(t+i*(r+1)-s)/2;o.style.backgroundColor=a<this.lowerValue||a>this.upperValue?this.outliersColor:""}))}_updateBottomLabels(){if(!this.bottomLabelFormatter)return;sr(this._lowerBottomLabel),sr(this._upperBottomLabel);let e=this.bottomLabelFormatter(this.lowerValue,!0),t=this.bottomLabelFormatter(this.upperValue,!1);if(e){this._lowerBottomLabel=er("div",{class:"bottomLabel"},this._hLineDiv),this._lowerBottomLabel.style.left="0px";let t=this.sliderWidth*(this.lowerValue-this.minValue)/(this.maxValue-this.minValue)-5,i=er("div",{class:"bottomLabelLine"},this._lowerBottomLabel);i.style.width=t+"px",i.style.opacity=e.showLine?"":"0.001";let r=er("div",{class:"bottomLabelLabel",innerHTML:e.text},this._lowerBottomLabel);r.style.left="0px",r.style.width=t+"px"}if(t){this._upperBottomLabel=er("div",{class:"bottomLabel"},this._hLineDiv),this._upperBottomLabel.style.right="0px";let e=this.sliderWidth*(this.maxValue-this.upperValue)/(this.maxValue-this.minValue)-5,i=er("div",{class:"bottomLabelLine"},this._upperBottomLabel);i.style.right="0px",i.style.width=e+"px",i.style.opacity=t.showLine?"":"0.001";let r=er("div",{class:"bottomLabelLabel",innerHTML:t.text},this._upperBottomLabel);r.style.right="0px",r.style.width=e+"px"}}numberToText(e,t){return jt(e,this.decimals)}textToNumber(e,t){return Yt(e)}round(e){return this.textToNumber(this.numberToText(e,!1),!1)}onChange(e){}destroy(){this._tbxMinValue.destroy(),this._tbxMaxValue.destroy()}};Tl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?kl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Tl);var Ml=Object.getOwnPropertyDescriptor,Gl=class extends kr{constructor(){super(...arguments),this._templateString='<div class="ge-refine-list">\n    <div class="ge-flex-row ge-margin-block-4" data-attach-point="_divTitle"></div>\n    <div class="ge-margin-inline-start-20" data-attach-point="_divItems"></div>\n  </div>',this.nls=Ze("widgets").refineList,this._checkboxes={},this._enumCount=0}get filter(){return this._filter}set filter(e){this._filter=e,this._started&&(this._store=null,this._enumCount=0,this._rootCheckbox=null,this._checkboxes={},this._filterCount=null,or(this._divTitle),or(this._divItems),this._renderFilter())}get selected(){return this._selected}set selected(e){this._selected=e,this._store&&(this._store.changeSelect(this._store.root,e),this._started&&this._updateFilter())}postCreate(){this._renderFilter(),this._started=!0,this.filter=this._filter,this.selected=this._selected}_renderFilter(){if(!this.filter)return;this._store=new pl(this.filter.enumItems);let e=this._store.root;this._renderLabel(this._divTitle,e,this.filter.label),this.filter.showMatchCount&&(this._filterCount=er("div",{class:"ge-margin-inline-start-4 ge-flex-row"},this._divTitle),this._updateMatchCount());let t=e.children;this._enumCount=t.length,this.filter.showLimit&&this.filter.showLimit<this._enumCount&&(this._enumCount=this.filter.showLimit);for(let e=0;e<this._enumCount;e++)this._renderItem(t[e],this._divItems);this._enumCount!==t.length&&this._addMoreLink(null,this._divItems)}_renderItem(e,t){let i=er("div",{class:"ge-flex-row ge-margin-block-4 refine-list-item"},t);e.leafCount?(this._renderLabel(i,e,e.value),this._addCountOnlyDiv(i,e,e.leafCount)):lr(i)}_addCountOnlyDiv(e,t,i){let r=er("div",{class:"ge-margin-inline-start-4 ge-flex-row"},e);wo({text:`(${i})`,onClick:()=>this._selectOnly(t)}).placeAt(r),wo({class:"ge-margin-inline-start-4 select-only",text:this.nls.only,onClick:()=>this._selectOnly(t)}).placeAt(r)}_addMoreLink(e,t){let i=er("div",{class:"esriGESpaceBefore20"},t);wo({text:this.nls.more,onClick:this._showMoreItems.bind(this,e,t)}).placeAt(i)}_showMoreItems(e,t){let i=e||this;e=e||this._store.root;let r=(t=t||this._divItems).lastChild;t.removeChild(r);let o=e.children,s=o.length;for(let e=i._enumCount;e<s;e++)this._renderItem(o[e],t);i._enumCount=s,s!==o.length&&ir(r,t)}_renderLabel(e,t,i){let r=new Xn({labelText:i,trimLabel:!0}).placeAt(e);r.onClick=this._onItemClick.bind(this,t),r.item=t,-1===t.deepness?this._rootCheckbox=r:this._checkboxes[t.id]=r,r.checked=this._store.getSelectionState(t),io(r.domNode,t.tooltip)}_onItemClick(e,t){this._store.changeSelect(e,t.checked),this._updateFilter()}_selectOnly(e){this._store.changeSelect(this._store.root,!1),this._rootCheckbox.checked=!1,this._store.changeSelect(e,!0),this.onSelectOnly({item:e}),this._updateFilter()}_updateFilter(){this._rootCheckbox.checked=this._store.getSelectionState(this._store.root),this._updateMatchCount();for(let e in this._checkboxes){let t=this._checkboxes[e];t.checked=this._store.getSelectionState(t.item)}this.onChange()}_updateMatchCount(){this._filterCount&&(Fi(this._divTitle,"ge-filter-active",!0!==this._rootCheckbox.checked),this._filterCount.innerHTML="("+this.formatMatchCount(this._store.root.selectCount)+")")}formatMatchCount(e){return jt(e,0)}onChange(){}onSelectOnly(e){}};Gl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Ml(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Gl);var Al=Object.getOwnPropertyDescriptor,Pl=class extends Gl{get filter(){return this._filter}set filter(e){this._filter=e,this._started&&(this._store=null,this._rootCheckbox=null,this._checkboxes=null,or(this._divTitle),or(this._divItems),this._renderFilter())}_renderFilter(){if(!this.filter)return;this._store=this.filter.dataTree,this._renderLabel(this._divTitle,this._store.root,this.filter.label),this.filter.showMatchCount&&(this._filterCount=er("div",{class:"ge-magin-inline-start-4 ge-flex-row"},this._divTitle),this._updateMatchCount()),this._checkboxes={};let e=this._store.root;for(let t of e.children)this._renderItem(t,this._divItems)}_renderItem(e,t){let i=er("div",{class:"esriGEFlexRow esriGERowMedium refine-list-item"},t),r=e.children;if(r){let o=new mo({icon:"chevron-right",appearance:"transparent",scale:"s",iconScale:"s",padding:"1px",onClick:()=>{e._expanded=!e._expanded,this._changeExpand(e,a,o)}}).placeAt(i),s=r.length;e._enumCount?s=Math.min(s,e._enumCount):(e._expanded=!!e._expanded,this.filter.showLimit&&this.filter.showLimit<s&&(s=this.filter.showLimit));let a=er("div",{class:"ge-margin-inline-start-40"},t);for(let e=0;e<s;e++)this._renderItem(r[e],a);e._enumCount=s,e._enumCount!==r.length&&this._addMoreLink(e,a),this._changeExpand(e,a,o)}this._renderLabel(i,e,e.value||e.name||""),this._addCountOnlyDiv(i,e,void 0!==e.dataCount?e.dataCount:e.leafCount)}_changeExpand(e,t,i){let r=e._expanded;i.icon=r?"chevron-down":"chevron-right",hr(t,r)}formatMatchCount(){return this.filter.updateSelection(),jt(this.filter.matchCount,0)}};Pl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Al(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Pl);var Ll=Object.getOwnPropertyDescriptor;function Dl(e,t){return e===t?e+"":De(Ze("DataBrowserNew").dataBrowser.variablesView.filters.matchCount,{match:e,total:t})}var Bl=class extends kr{constructor(e){super(e),this.showPopupTitle=!1,this.nls=Ze("DataBrowserNew").dataBrowser.variablesView.filters,this._templateString='\n  <div class="ge-flex-row ge-variable-filter-bar">\n    <div class="ge-margin-inline-8" data-attach-point="_filtersLabel"></div> \n    <div class="ge-flex-row" data-attach-point="_filtersContainer"></div>    \n    <div data-attach-point="_resetLink"></div>\n  </div>',this._refineWidgets=[],this._popupHandles=[]}postCreate(){this._filtersLabel.innerHTML=this.nls.filterBy,ir(wo({text:this.nls.resetFilters,onClick:()=>this.onReset()}).domNode,this._resetLink,"replace")}renderRefineFilters(e){or(this._filtersContainer),this._clearContent(),hr([this._filtersLabel,this._resetLink],e.length>0);let t=Ji(this.domNode).w;if(0===e.length||!t)return;let i=(e,t,i)=>{let r=this.showPopupTitle;this._popupHandles.push(to({anchor:e,content:t,title:r?i:null,closable:r,onBeforeOpen:()=>{let i=this.getViewBox(),o=Qi(e.domNode),s=i.h-(o.t-i.t)-o.h-10;t.style.maxHeight=s-(r?43:0)+"px"}}))},r=t-Qi(this._filtersLabel).w-Qi(this._resetLink).w,o=Math.max(Math.floor(.75*r/150),1);e.length>o?o--:o=e.length;for(let t=0;t<o;t++){let r=e[t],o=xo({class:"ge-margin-inline-end-8",text:r.label,iconEnd:"chevron-down",kind:"neutral",style:{height:"28px",minWidth:"66px"}},this._filtersContainer),s=o.domNode;s.role="select",Fi(s,"active",r.isActive()),this._filterItems[r.bitIndex]={filter:r,anchorNode:s},i(o,this._prepareContentBlock(r),De(this.nls.filterPopupTitle,{label:r.label}))}if(o<e.length){let t=xo({iconStart:"filter",class:"ge-margin-inline-end-8",text:this.nls.moreFilters,kind:"neutral"},this._filtersContainer),r=t.domNode;r.role="select";let s=[],a=er("div",{class:"more-filters-popup"});for(let t=o;t<e.length;t++){let i=e[t];s.push(i.bitIndex),this._filterItems[i.bitIndex]={filter:i,anchorNode:r,groupIds:s},ir(this._prepareContentBlock(e[t]),a)}i(t,a,this.nls.moreFilters)}}_prepareContentBlock(e){let t=er("div",{class:"filter-popup-content"});return function(e){return!!e.isKeywordFilter}(e)?this._renderKeywordFilter(e,t):e.isRangeFilter?this._renderRangeFilter(e,t):this._renderEnumFilter(e,t),t}_renderRefineFilterLabel(e,t){let i=er("div",{class:"ge-flex-row  ge-padding-block-8"},t),r=er("div",{textContent:e.label},i);if(e.showMatchCount){let t=er("div",{class:"ge-margin-inline-start-8"},i);e.updateMatchCount=()=>{Fi(i,"ge-filter-active",e.isActive()),e.calculateMatchCount?.(),t.innerHTML=`(${Dl(e.matchCount,e.totalCount)})`},e.updateMatchCount()}return r}_renderKeywordFilter(e,t){let i=this._renderRefineFilterLabel(e,t),r=this._register(cn({value:e.searchString,placeHolder:this.nls.keywordPrompt,trim:!0,ariaLabelledBy:i,onClear:()=>{e.matchCount=e.totalCount},onChange:t=>{e.update(t.value),Bo(this,"applyFilter",300,!0,[e])}}));Li(r.domNode.parentElement,"ge-padding-block-8"),ir(r.domNode.parentNode,t)}_renderEnumFilter(e,t){let i=e.dataTree?e:null,r=this._register(i?new Pl:new Gl);r.onChange=()=>this.applyFilter(e),i?r.formatMatchCount=()=>(i.updateSelection(),Dl(e.matchCount,e.totalCount)):e.calculateMatchCount?r.formatMatchCount=()=>(e.calculateMatchCount(),Dl(e.matchCount,e.totalCount)):r.formatMatchCount=t=>Dl(t,e.totalCount),r.filter=e,r.placeAt(t),this._filterItems[e.bitIndex].refineList=r}_renderRangeFilter(e,t){this._renderRefineFilterLabel(e,t);let i=e.range.min,r=e.range.max,o=(e.rangeMax-e.rangeMin)/100,s={sliderWidth:50,sliderStep:o<=1?1:Math.round(o),numberToText:(t,i)=>jt(t,0)+(t===e.rangeMax?"+":""),textToNumber:(e,t)=>Yt(e.replace("+",""))},a=this._register(new Tl(s));a.setData({minValue:e.rangeMin,maxValue:e.rangeMax,lowerValue:i,upperValue:r}),a.setValue(Ti()?[i,r]:[r,i]),a.onChange=t=>{e.updateRange({min:t.lowerValue,max:t.upperValue}),Bo(this,"applyFilter",300,!0,[e])},a.placeAt(er("div",{class:"range-filter-container ge-margin-block-end-16 ge-margin-inline-8"},t))}updateFilterList(e){let t=this._filterItems[e.bitIndex].refineList;t&&(t.filter=e,this.applyFilter(e))}applyFilter(e){let t=this._filterItems[e.bitIndex];Fi(t.anchorNode,"active",t.groupIds?t.groupIds.some((e=>this._filterItems[e].filter.isActive())):e.isActive()),this.onFilterApplied(e),e.updateMatchCount?.()}destroy(){this._clearContent(),super.destroy()}_register(e){return this._refineWidgets.push(e),e}_clearContent(){for(let e of this._popupHandles)e.remove();this._popupHandles.length=0,this._filterItems={};for(let e of this._refineWidgets)e.destroy();this._refineWidgets.length=0}};Bl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Ll(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Bl);var Rl,Fl=class{start(e,t){if(this.finish(),this._deferred=Ee(),this._oldNode=t,e.length&&e[0].node){this._targets=e,this._timeoutH=setTimeout((()=>this.finish()),2e3),this._animationendH=xi(e[0].node,"animationend",(()=>this.finish()));for(let t=0;t<e.length;t++){let i=e[t];Li(i.node,i.classes),Li(i.node,"Anim_Common")}}else this.finish();return this._deferred.promise}finish(){if(this._targets){for(let e=0;e<this._targets.length;e++){let t=this._targets[e];t.node&&(Di(t.node,t.classes),Di(t.node,"Anim_Common"))}this._targets=null}this._oldNode&&(sr(this._oldNode),this._oldNode=null),this._deferred?.resolve(),this._deferred=null,this._timeoutH&&clearTimeout(this._timeoutH),this._timeoutH=null,this._animationendH?.remove(),this._animationendH=null}},Vl=class{constructor(e){this._ltr=Ti(),this._flySurfaceNode=e,this._items=[]}fly(e,t,i,r){r=r||e.cloneNode(!0),i||(i=["top",this._ltr?"left":"right"]);let o,s,a=e.getBoundingClientRect(),n=this._flySurfaceNode.getBoundingClientRect();Li(r,"Anim_FlyingObj");for(let e=0;e<i.length;e++){let t=i[e],l=a[t]-n[t];("right"===t||"bottom"===t)&&(l=-l),("left"===t&&!this._ltr||"right"===t&&this._ltr)&&(o=t,s=l),r.style[t]=l+"px"}return this._flySurfaceNode.appendChild(r),o&&(s+=a.width-r.getBoundingClientRect().width,r.style[o]=s+"px"),this.start([{node:r,classes:[t]}],r),r}start(e,t){let i=new Fl;return this._items.push(i),this._progress=this._progress||Ee(),i.start(e,t).then((()=>this._onItemFinished(i)))}finish(){let e=this._items;for(;e.length>0;)e.pop().finish()}getPromise(){return this._progress?.promise}_onItemFinished(e){let t=this._items.indexOf(e);t>=0&&(this._items.splice(t,1),0===this._items.length&&this._progress&&(this._progress.resolve(),this._progress=null))}},Ol=class{constructor(e){this._pooled={},this._shown={},this._shownArray={},this._idProperty=e.idProperty,this._types=e.types,this.clear()}poolWidgets(e,t){this._types.forEach((i=>{let r;if(e){let t=e[this._idProperty];r=this._shown[i][t],r&&delete this._shown[i][t]}else if(t?.type===i){let e=this._shownArray[i].findIndex((e=>e===t.w));e>=0&&(r=t.w,this._shownArray[i].splice(e,1))}r?.domNode&&(r.domNode.remove(),this._pooled[i].push(r))}))}poolAllWidgets(){this._types.forEach((e=>{let t=this._shown[e];for(let i in t){let r=t[i];r.domNode&&(r.domNode.remove(),this._pooled[e].push(r))}this._shown[e]={};let i=this._shownArray[e];for(let t of i)t.domNode&&(t.domNode.remove(),this._pooled[e].push(t));this._shownArray[e]=[]}))}get(e,t,i){let r=this._pooled[e].pop()||t();return this._trackWidget(e,r,i),r}_trackWidget(e,t,i){i?this._shown[e][i[this._idProperty]]=t:this._shownArray[e].push(t)}clear(){this._types.forEach((e=>{this._pooled[e]=[],this._shown[e]={},this._shownArray[e]=[]}))}};function Hl(e,t){e.innerHTML="",function(e,t,i,r){let o=0;t.forEach((t=>{let s="string"==typeof t.selector?e[t.selector]:t.selector(e);if(s){let e=r({label:t.label,value:s,isHtml:t.isHtml},!o);e&&(ir(e,i),o++)}}))}(t,function(){if(Rl)return Rl;let e=Ze("DataBrowserNew").variableInfo;return Rl=[{id:"description",label:e.name,selector:e=>function(e){return e.description||e.alias}(e)},{id:"vintage",label:e.vintage,selector:"vintage"},{id:"id",label:e.variable,selector:e=>gt(e)?e.id:null},{id:"units",label:e.units,selector:t=>{let i=function(e){return Et?"TADULTBASE"===e.percentBase?"adults":"THHBASE"===e.percentBase?"households":null:null}(t);return"adults"===i?e.adults:"households"===i?e.households:null}},{id:"averageBase",label:e.averageBase,selector:e=>zl(e,"average")},{id:"percentBase",label:e.percentBase,selector:e=>zl(e,"percent")},{id:"indexType",label:e.indexType,selector:t=>t.indexBase&&e[t.indexType+"Index"]},{id:"source",label:e.source,selector:e=>{let t=e.filteringTags.Source?.value,i=ht(t);return i&&(t=`${pt(i.sourceId)}: ${i.value}`),t}},{id:"sourceInfo",label:e.sourceInfo,selector:"sourceInfo"},{id:"definition",label:e.definition,selector:"definition",isHtml:!0}],Rl}(),e,Wl)}function zl(e,t){let i=e[t+"Base"],r=e[t+"BaseAlias"];return i?r?`${i}: ${r}`:i:null}function Wl(e,t){let i=er("div",{class:"variable-info-row"+(t?" isFirst":"")});if(er("div",{class:"variable-header",innerHTML:e.label},i),e.isHtml){let t=er("div",{class:"value-scroller esriBAAddWebkitScrollbar"},i);er("div",{innerHTML:e.value},t)}else er("div",{textContent:e.value},i);return i}var Ul=Object.getOwnPropertyDescriptor,jl=class extends kr{constructor(){super(...arguments),this.class="ge-variable-info"}set variable(e){Hl(this.domNode,e)}};jl=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Ul(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],jl);var ql=Object.getOwnPropertyDescriptor,$l=class extends qn{constructor(e){super(e)}postCreate(){Li(this.domNode,"lightGrey"),this.states&&this.setStates(this.states),super.postCreate()}setStates(e){this.states=e,this.items=e.ids.map(((e,t)=>({value:e,label:this.states.labels[t]})))}getStateName(e){let t=this.findItem({value:e||this.value});return this.states.names?.[this.items.indexOf(t)]||null}_onChange(e){let t=e;t.name=this.getStateName(),t.state=this.value,this.onChange(t)}onChange(e){}};$l=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?ql(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],$l);var Ql=class{constructor(e){this._lastPromise=null,this._isFinished=!0,this._isDestroyed=!1,this._lastDfd=null,this._lastResult=null,e?.onStarted&&(this.onStarted=e.onStarted),e?.onFinished&&(this.onFinished=e.onFinished)}add(e,t){if(t=t||{},this._isDestroyed)return null;this._lastDfd||(this.onStarted(),this._lastDfd=Ee()),this._isFinished=!1;this._lastPromise=ke(this._lastPromise).then((()=>{let i=()=>{if(this._isDestroyed)return null;try{return"function"==typeof e?e():e}catch(e){return Promise.reject(e)}},r=bi(t.delayBefore)?()=>_i(i,t.delayBefore):i;return(bi(t.delayAfter)?()=>ke(r()).then((e=>_i((()=>e),t.delayAfter))):r)()}));let i=this._lastPromise;return ke(i).then((e=>{i===this._lastPromise&&this._tryFinalize(e)}),this._lastDfd.reject),this.getPromise()}_tryFinalize(e){this._isDestroyed||this._isFinished||(this._isFinished=!0,this._lastResult=e,this._lastDfd.resolve(e),this._lastDfd=null,this.onFinished(e))}getPromise(){return ke(this._isDestroyed?null:this._lastDfd?.promise||this._lastResult)}isFinished(){return this._isFinished}isDestroyed(){return this._isDestroyed}destroy(e=!1){e&&this._tryFinalize(null),this._isDestroyed=!0}onStarted(){}onFinished(e){}},Yl=class{constructor(){this._queue=new Ql}invoke(e){this._invokeDfd=this._invokeDfd||Ee(),Bo(this,"_doAddToQueue",e.delay,e.clearPreviousTimeout),this._pendingExecuteFunc=e.execFunc,this._pendingOnPreAddCallback=e.onPreAddCallback}cancelInvoke(){Ro(this,"_doAddToQueue"),this._invokeDfd?.resolve(),this._invokeDfd=null}_doAddToQueue(){this._pendingOnPreAddCallback?.(),this._pendingOnPreAddCallback=null,this._queue.add(this._pendingExecuteFunc),this._pendingExecuteFunc=null,this._invokeDfd.resolve(),this._invokeDfd=null}getPromise(){return ke(this._invokeDfd?.promise).then((()=>this._queue?.getPromise()))}destroy(e=!1){Ro(this,"_doAddToQueue"),this._queue.destroy(e),this._queue=null,this._invokeDfd?.resolve(),this._invokeDfd=null}},Xl=class{constructor(e){this.itemClass="",this.itemClassSelected="",this.labelClass="",this.createLabelNode=!1,this.createImageAfterLabel=!1,this.makeLabelFillSpace=!1,this.rowInButton=!1,ds(this,e)}createPresentation(e,t,i,r,o,s){if(e.isSeparator){let t=er("div",{class:"flowList_listSeparator"},i,s);return e.hidden&&lr(t),t}let a=er("div",{class:"listItem "+(this.itemClass||" ")+(e.itemClass||""),style:e.style},i,s);return e.isLink&&Li(a,"esriGELink"),!1===e.enabled&&Li(a,"disabled"),this._createParts(e,a,r,o),this._setTooltip(e,a,r),this.selectPresentation(a,t,e),e.hidden&&lr(a),a}_setTooltip(e,t,i){e.tooltip&&qs(t,e.tooltip)}_createParts(e,t,i,r){let o,s=this.rowInButton?er("div",{class:"esriGEFlexRow"},t):null;this.createImageAfterLabel&&(this._createLabel(e,s||t,i),o=!0),this._createImage(e,s||t,i),!o&&this._createLabel(e,s||t,i),this.rowInButton&&new uo({appearance:"transparent",kind:"neutral",padding:"0",class:"esriGEFlexSpacer esriGEFlexTrim noHover",width:"full",ariaLabel:e.label,alignment:"start",onClick:()=>i.setValueWithEvent(e[i.idProperty])}).placeAt(t).domNode.append(s)}_createImage(e,t,i){let r=this._createImageNode(e,t,i);r&&(e.imageClass&&Li(r,e.imageClass),e.imageUrl&&(r.style.backgroundImage="url("+e.imageUrl+");"))}_createImageNode(e,t,i){return t}_createLabel(e,t,i){if(this.createLabelNode){let r=er("div",{textContent:e[i.labelProperty],class:"esriGETrimWithEllipsis listItemLabel"},t);return e.labelClass&&Li(r,e.labelClass),this.labelClass&&Li(r,this.labelClass),i.autoDetectUrlsInLabels&&this._tryConvertToUrls(r),void(this.makeLabelFillSpace&&(r.style.flexGrow="1"))}e[i.labelProperty]&&(t.textContent=e[i.labelProperty],i.autoDetectUrlsInLabels&&this._tryConvertToUrls(t))}_tryConvertToUrls(e){let t=e.innerHTML.match(Wr),i=t&&t[0];i&&(e.innerHTML=e.innerHTML.replace(i,"<a href='"+function(e){if(e&&(e=function(e){return!e||/^http/i.test(e)?e:"http://"+e}(e)),!e||!/^http:\/\//i.test(e))return e;let t=new h.Url(e);e=e.replace(/^http/i,"https");let i=Re[t.port];return i&&(e=e.replace(":"+t.port,":"+i)),e}(i)+"' target='_blank'>"+i+"</a>"))}selectPresentation(e,t,i){this.rowInButton?t&&Jr(e):Fi(e,"listItemSelected "+this.itemClassSelected,t)}},Jl=Object.defineProperty,Kl=Object.getOwnPropertyDescriptor,Zl=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?Kl(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&Jl(t,i,s),s},ed=class extends kr{constructor(e,t){super(e,t),this._templateString="<div class='esriGEFlowList esriGENonSelectable'></div>",this.idProperty="value",this.labelProperty="label",this.itemRenderer=null,this.itemClass=null,this.itemClassSelected=null,this.keepScrollPosition=!1,this.allowRepetitiveSelection=!0,this.selectOnMouseDown=!1,this.noDragTolerance=0,this.numRowsUnderScroll=2,this.selectionValidator=null,this.allowManualSelection=!0,this.stopMouseEventPropagation=!0,this.hasSelectableItems=!0,this.autoDetectUrlsInLabels=!1,this.storeItemsInInnerDiv=!1,this.itemsDiv=null,this.enableOnDemandOptimization=!1,this.onDemandScrollDelay=0,this.onDemandScrollClearPreviousTimeout=!1,this._addedWrappers=[],this._clickHandles=null,this._valueOnCreation=null,this._isCreated=!1,this._noItemIndex=!1,this._noOddEven=!1,this._scrollQueue=new Yl,this._scrollTopMemo=0,this._lastScrollTop=0}postCreate(){this._clearHandlers(),this._setUpItemRenderer(),Zs(this.domNode),this.enableOnDemandOptimization&&Li(this.domNode,"enableOnDemandOptimization"),this._isCreated=!0,(!this.enableOnDemandOptimization||this.domNode.parentElement)&&this.refresh(),this._valueOnCreation&&(this.value=this._valueOnCreation)}_setUpItemRenderer(){this.itemRenderer||(this.itemRenderer=new Xl),this.itemClass&&(this.itemRenderer.itemClass=this.itemClass),this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)}get value(){return this.selectedItem?.[this.idProperty]}set value(e){this._isCreated?(this._set("value",e),this.items?.some((t=>t[this.idProperty]===e&&(this.selectedItem=t,!0)))):this._valueOnCreation=e}setValueWithEvent(e){let t=this.value;this.value=e,this._onChange({type:"change",value:this.value,previousValue:t,selectedItem:this.selectedItem,selectedIndex:this.selectedIndex})}set items(e){this._setItems(e||[])}_setItems(e){this.keepScrollPosition&&this.memoScroll(),this._set("items",e),this.clear(),this.items?.length&&this._isCreated?this.enableOnDemandOptimization?this._addItems_onDemand():(this._addItems(e,"last"),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo()):this._checkIfStillSelected()}_checkIfStillSelected(){-1===this.selectedIndex&&!this.selectedItem||(!this._addedWrappers||!this._addedWrappers.some((e=>this._isItemSelected(e))))&&(this._set("selectedIndex",-1),this._set("selectedItem",null))}_addItems_onDemand(){this._domNodeScrollH?.remove(),this._measureItemPresentation(),this._presentationSizeInfo&&(this._preloadSpacerAfter.style.height=(this.items.length-1)*this._presentationSizeInfo.h+"px",this.keepScrollPosition&&this.applyScrollFromMemo(),this._loadItemsInView(),this._domNodeScrollH=wi(this.domNode,"scroll",(()=>this._scrollQueue.invoke({execFunc:()=>this._loadItemsInView(),delay:this.onDemandScrollDelay,clearPreviousTimeout:this.onDemandScrollClearPreviousTimeout}))))}_measureItemPresentation(){this._itemsHeightCache={},this._presentationSizeInfo=null,this._doAddLoadedItemsInView([this.items[0]],"last",[this.items[0]]);let e=this._addedWrappers[0]?.itemPresentation;if(!e)return;if(e.clientHeight){let t=Qi(e);this._presentationSizeInfo={w:t.w,h:t.h,itemsPerRow:Math.floor(this.domNode.clientWidth/t.w)||1}}let t=this._getButtonListItemHeight(e);t&&(this._presentationSizeInfo={w:0,h:t,itemsPerRow:1})}_getButtonListItemHeight(e){if(1===e.children.length&&"calcite-button"===e.firstElementChild.localName){let t=Wi(e,"paddingTop")+Wi(e,"paddingBottom"),i=Wi(e.firstChild,"height");return i?i+t:0}return 0}_getFlowListHeight(){return this.domNode.clientHeight||Wi(this.domNode,"maxHeight")}_loadItemsInView(e){if(!this._presentationSizeInfo)return;let t=document.activeElement,i={};this._addedWrappers.forEach((e=>{let t=e.itemRef[this.idProperty];this._itemsHeightCache[t]=this._getItemPresentationHeight(e),i[t]=!0}));let r=[],o=[],s=this.loadAllItems?0:this.domNode.scrollTop,a=this.loadAllItems?1e5:s+this._getFlowListHeight(),n=Math.max(20,this._presentationSizeInfo.h*this.numRowsUnderScroll);s-=n,a+=n;let l=1/0,d=-1/0,c=0,h=0;for(let e=0;e<this.items.length;e++){let t=this.items[e],n=t[this.idProperty];if(!this._isItemVisible(t)){i[n]&&r.push(t);continue}let p=this._itemsHeightCache[n]||this._presentationSizeInfo.h;if(e%this._presentationSizeInfo.itemsPerRow==0&&(c+=p),h!==this._presentationSizeInfo.itemsPerRow){let e=c>=a;(e||c>s)&&(o.push(t),r.push(t),l=Math.min(l,c-p),d=Math.max(d,c)),e&&h++}}let p=[],u=[],g=[];this._addedWrappers=this._addedWrappers.filter((e=>o.includes(e.itemRef)?(u.push(e.itemRef),!0):(g.push(e.itemRef),p.push((()=>{sr(e.itemPresentation),e.destroyPresentation?.(),this.onDestroyItemPresentation(e.itemRef),this._destroyItem(e.itemRef)})),!1)));let m=o.filter((e=>!u.includes(e)));m.length&&(!u.length||o.indexOf(m[0])>o.indexOf(u[0])?this._doAddLoadedItemsInView(m,"last",e?r:o):this._doAddLoadedItemsInView(m.reverse(),"first",e?r:o)),e?e.then((()=>p.forEach((e=>e())))):p.forEach((e=>e())),this._preloadSpacerBefore.style.height=(o.length?l:0)+"px",this._preloadSpacerAfter.style.height=(o.length?c-d:0)+"px",t&&t!==document.activeElement&&mr(t)&&t.offsetParent&&t.offsetTop>t.offsetParent.scrollTop&&Zr(t),this._lastScrollTop=this.domNode.scrollTop}_doAddLoadedItemsInView(e,t,i){this._addItems(e,t)}_isItemVisible(e){return!0}_getItemPresentationHeight(e){return e.itemPresentation.clientHeight||this._getButtonListItemHeight(e.itemPresentation)}_destroyItem(e){}set selectedItem(e){let t=this.queryItem({item:e});t.wrapper?this._setSelectedItem(t.wrapper):t.item&&t.index>=0?(this._set("selectedIndex",t.index),this._set("selectedItem",t.item)):this._setSelectedItem(null)}set selectedIndex(e){let t=this.queryItem({index:e});t.wrapper?this._setSelectedItem(t.wrapper):t.item&&t.index>=0?(this._set("selectedIndex",t.index),this._set("selectedItem",t.item)):this._setSelectedItem(null)}refresh(){this._setItems(this.items)}_addItems(e,t){this._addedWrappers=this._addedWrappers||[],e.forEach((e=>{let i={};i.itemRef=e,i.itemIndex=this.items?.indexOf(i.itemRef),this._addWrapper(i,t)}))}_addWrapper(e,t){let i=this.itemRenderer.createPresentation(e.itemRef,this._isItemSelected(e),this.itemsDiv,this,e,t);i&&(e.itemPresentation=i,this._isItemSelected(e)&&this._setSelectedItem(e),this._addClickHandler(e),this._addedWrappers.push(e),!this._noItemIndex&&Li(i,"listItem_"+e.itemIndex),!this._noOddEven&&Li(i,"listItem_"+(e.itemIndex%2==0?"even":"odd")))}_createPresentationForWrapper(){}_reRenderWrapper(e){if(e?.itemPresentation?.parentElement){let t=e.itemPresentation;this._addWrapper(e,"last"),this._addedWrappers.pop(),e.itemPresentation.remove(),ir(e.itemPresentation,t,"replace")}}_isItemSelected(e){if(!this.hasSelectableItems||!this._isItemClickable(e))return!1;if(e.itemIndex===this.selectedIndex||e.itemRef===this.selectedItem)return!0;if(e.itemRef&&this.selectedItem){let t=e.itemRef[this.idProperty],i=this.selectedItem[this.idProperty];return void 0!==t&&t===i}return!1}_isItemClickable(e){return this.selectionValidator?this.selectionValidator(e):this._selectionValidatorDefault(e)}_selectionValidatorDefault(e){return!!e&&!e.isSeparator&&!1!==e.enabled}_addClickHandler(e){if(!this.allowManualSelection||this.itemRenderer.rowInButton)return;let t,i=()=>{!this.allowRepetitiveSelection&&this._selectedWrapper===e||this._setSelectedItem(e)&&this._dispatchChangeEvent()},r=e.itemPresentation;t=this.selectOnMouseDown||!this.noDragTolerance?wi(r,this.selectOnMouseDown?"press":"click",(e=>{this.stopMouseEventPropagation&&e.stopPropagation(),i()})):Zo(r,i,{tolerance:this.noDragTolerance}),this._clickHandles.push(t)}_setSelectedItem(e){this._selectedWrapper&&(this.itemRenderer.selectPresentation?.(this._selectedWrapper.itemPresentation,!1,this._selectedWrapper.itemRef),this._selectedWrapper=null,this._set("selectedIndex",-1),this._set("selectedItem",null));let t=e?.itemPresentation;return!!(this.hasSelectableItems&&t&&this._isItemClickable(e.itemRef))&&(t&&(this.itemRenderer.selectPresentation?.(t,this.hasSelectableItems,e.itemRef),this._selectedWrapper=e,this._set("selectedIndex",e.itemIndex),this._set("selectedItem",e.itemRef)),!0)}_dispatchChangeEvent(){this._onChange({type:"change",selectedIndex:this.selectedIndex,selectedItem:this.selectedItem,value:this.value})}clear(){this._clear(),this._buildBaseNodes()}_clear(){this._selectedWrapper=null,this._clearWrappers(),this._clearHandlers()}_clearWrappers(){this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach((e=>{e.destroyPresentation?.(),this.onDestroyItemPresentation(e.itemRef)})),this._addedWrappers.length=0}_clearHandlers(){this._clickHandles=this._clickHandles||[],this._clickHandles.forEach((e=>{e.remove()})),this._clickHandles.length=0}_buildBaseNodes(){this.domNode&&(or(this.domNode),this.storeItemsInInnerDiv||this.enableOnDemandOptimization?this._set("itemsDiv",er("div",{class:"esriGEFlowList_innerDiv"},this.domNode)):this._set("itemsDiv",this.domNode),this.enableOnDemandOptimization&&(this._preloadSpacerBefore=er("div",{class:"esriGEFlowList_preloadSpacer"},this.domNode,"first"),this._preloadSpacerAfter=er("div",{class:"esriGEFlowList_preloadSpacer"},this.domNode)))}memoScroll(){this._scrollTopMemo=this.domNode?this.domNode.scrollTop:0}applyScrollFromMemo(e){this.domNode.scrollTop=(e?this._lastScrollTop:this._scrollTopMemo)||0}scrollToItem(e){let t=this.queryItem({item:e}).node;return t&&(this.domNode.scrollTop=t.offsetTop),t}queryItem(e){let t={item:null,node:null,index:-1,wrapper:null};return this._addedWrappers?.some((i=>!!(e.item&&i.itemRef[this.idProperty]===e.item[this.idProperty]||e.node&&i.itemPresentation===e.node||void 0!==e.value&&i.itemRef[this.idProperty]===e.value||void 0!==e.index&&i.itemIndex===e.index)&&(t.item=i.itemRef,t.node=i.itemPresentation,t.index=i.itemIndex,t.wrapper=i,!0))),t.wrapper||this.items?.some(((i,r)=>!!(e.item&&i[this.idProperty]===e.item[this.idProperty]||void 0!==e.value&&i[this.idProperty]===e.value||void 0!==e.index&&r===e.index)&&(t.item=i,t.index=r,!0))),t}isMouseOver(e){return Qr(this.domNode,{event:e})}_onChange(e){this.onChange(e)}onChange(e){}onDestroyItemPresentation(e){}destroy(){this._clear()}};Zl([u()],ed.prototype,"idProperty",2),Zl([u({readOnly:!0})],ed.prototype,"itemsDiv",2),Zl([u({dependsOn:["selectedItem"]})],ed.prototype,"value",1),Zl([u({value:[]})],ed.prototype,"items",1),Zl([u()],ed.prototype,"selectedItem",1),Zl([u({value:-1})],ed.prototype,"selectedIndex",1),ed=Zl([p()],ed);var td=Object.defineProperty,id=Object.getOwnPropertyDescriptor,rd=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?id(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r?o(t,i,s):o(s))||s);return r&&s&&td(t,i,s),s},od=new class{constructor(){this._stack=[]}getAllDialogs(){return this._stack}show(e,t,i){this._isShown(e)||(this._stack.push(e),i=i&&"above-popover"===i?eo:i||900,e.domNode.style.zIndex=i.toString(),ir(e.domNode,t),e.domNode.open=!0,Ar(e.domNode,".header").then((t=>{t?.querySelector(".title")?.addEventListener("mousedown",(()=>{e.domNode.parentNode?.lastChild!==e.domNode&&e.domNode.parentNode?.appendChild(e.domNode)}))})))}hide(e){this._isShown(e)&&(this._stack.splice(this._stack.indexOf(e),1),e.domNode.open=!1,e.domNode.remove())}_isShown(e){return this._stack.includes(e)}getTopZIndex(){return 900}},sd=class extends kr{constructor(e){super(e),this._templateString='\n  <calcite-modal class="esriGECalcite esriGECalciteDialog esriGENonSelectable">\n    <div slot="header" class="ge-flex-row ba-dialog-title" data-attach-point="titleDiv"></div>\n    <div slot="content" class="esriGECalciteDialogContent" data-attach-point="contentDiv"></div>\n    <div slot="primary" class="esriGEFlexRowEnd esriGECalciteDialogButtons" data-attach-point="bottomBar"></div>\n  </calcite-modal>\n  ',this.closeButtonId="close",this.isModal=!0,this._layoutDfd=Ee()}get title(){return this._title}set title(e){this._title=e||"",this.titleDiv&&("string"==typeof this._title?this.titleDiv.innerHTML=this._title:(this.titleDiv.innerHTML="",this.titleDiv.append(e)),hr(this.titleDiv,!!this._title),Ar(this.domNode,".header").then((e=>{e.style.display=this._title?"":"none"})))}get underlayOpacity(){return this._underlayOpacity}set underlayOpacity(e){this._underlayOpacity=e,null==this._underlayOpacityInitial&&(this._underlayOpacityInitial=e),this.domNode&&"number"==typeof this._underlayOpacity&&this.domNode.style.setProperty("--calcite-modal-scrim-background",`rgba(0, 0, 0, ${this._underlayOpacity})`)}get showUnderlay(){return this._showUnderlay}set showUnderlay(e){this._showUnderlay=e,this.domNode&&Pr(this.domNode,"dialog-underlay",this._showUnderlay?null:"\n         .scrim {\n          display: none !important;\n         }\n        ")}postCreate(){this.domNode.closeButtonDisabled=!!this.disableCloseButton,this.domNode.escapeDisabled=this.disableEscape,this.domNode.kind=this.kind,this.domNode.outsideCloseDisabled=!0,this.domNode.focusTrapOptions={allowOutsideClick:this.focusTrapOptions?.allowOutsideClick??!0,...this.focusTrapOptions},this.showUnderlay=this._showUnderlay??this.isModal,this.underlayOpacity=this._underlayOpacity,this.buttons?.length&&this.focusButton&&(this.domNode.setFocus=()=>this._focusOnButton(this.focusButton)),Kr(this.domNode,".header button"),Pr(this.domNode,"dialog-default-modal",`.modal {\n          max-inline-size: none !important;\n          min-inline-size: 300px !important;\n          inline-size: auto !important;\n          ${this.isModal?"block-size: auto !important;":""}\n          ${this.isModal?"":"margin: 0 !important;"}\n       }\n      `),this.isModal||this._makeMoveable(),Ar(this.domNode,".container").then((async()=>{await _i(),await function(e){let t=[];return _r(e,(e=>{if(nr(e))return"skip";(function(e){return e&&/^calcite-/i.test(e.nodeName)})(e)&&t.push(Ar(e))})),Promise.all(t).then((()=>{}))}(this.domNode),this._layoutDfd.resolve()}))}_makeMoveable(){Li(this.domNode,"moveableDialog"),Pr(this.domNode,"dialog-moveable",".container {\n          inset: auto !important;\n          overflow: visible !important;\n          position: relative !important;\n       }\n       .header {\n        cursor: move !important;\n       }\n      "),this.addHandles(function(e){let t,i=e.node;return es({node:i,tolerance:0,onMouseDown:r=>{let o=e.overNode?Qr(e.overNode):!e.isMouseOver||e.isMouseOver();return o=o&&(!e.onMouseDown||e.onMouseDown(r)),o&&(t={x:e.isRelative?Wi(i,"left"):i.offsetLeft,y:e.isRelative?Wi(i,"top"):i.offsetTop}),o},onDragMoved:(r,o,s)=>{t.x=t.x+o,t.y=t.y+s;let a={l:t.x,t:t.y};i.style.left=a.l+"px",i.style.top=a.t+"px";let n=e.onDragMoved?.(r,a,o,s);n&&(i.style.left=n.l+"px",i.style.top=n.t+"px")},onMouseUp:()=>e.onMouseUp?.()})}({node:this.domNode,isMouseOver:()=>Qr(ar(".header",this.domNode.shadowRoot)[0]),onMouseDown:()=>(this.emit("move-start"),!0),onMouseUp:()=>{this.emit("move-end"),this._endDrag()}}))}_buildDialog(){this.title=this._title,this.headerButtons?.length&&(Pr(this.domNode,"dialog-header-buttons",".header .headerButton.close:active,\n         .header .headerButton.close:focus {\n          background-color: transparent !important;\n          color: var(--calcite-color-text-3) !important;\n         }\n        "),Ar(this.domNode,".close").then((e=>{this.headerButtons.forEach((t=>{let i=e.cloneNode(!0);ir(i,e,"before"),Li(i,"headerButton"),i.ariaLabel=t.ariaLabel,i.title=t.ariaLabel,i.children[0].icon=t.iconStart,wi(i,"click",(()=>t.onClick()))}))}))),this._buildContent(),this._buildFooter(),Pr(this.domNode,"dialog-default-content",`.content {\n          max-block-size: calc(100vh - ${this._hasFooter()?120:60}px) !important;\n       }\n      `),wi(this.domNode,"calciteModalClose",(()=>{this._shown&&(this.onButtonClicked(this.closeButtonId),this.hide())}))}_buildContent(){this.contentDiv.innerHTML="","string"==typeof this.content?this.contentDiv.innerHTML="<div style='text-align:center;padding: 30px 50px;'>"+this.content+"</div>":this.contentDiv.appendChild(this.content)}_buildFooter(){if(this.bottomBar.innerHTML="",this.extraBottomItems?.forEach((e=>{ir(e,this.bottomBar)})),this.buttonFactory=this.buttonFactory||(e=>new uo(e)),this.buttons?.forEach((e=>{let t={text:e.text,appearance:e.emphasized?"solid":"outline-fill",ariaLabel:e.ariaLabel||e.text,onClick:()=>{e.onClick?.(),this.onButtonClicked(e.id),!1!==e.autoHide&&this.hide()}};e.kind&&(t.kind=e.kind),e.appearance&&(t.appearance=e.appearance),e._button=this.buttonFactory(t).placeAt(this.bottomBar)})),this.resizable){Li(this.bottomBar,"esriGESpaceAfter20");let e=new mo({class:"dialogResizeButton",icon:"arrow-double-diagonal-2",appearance:"transparent",padding:"3px"}).placeAt(this.bottomBar);this.addHandles(es({node:e.domNode,tolerance:0,onDragMoved:(e,t,i)=>{this.contentDiv.style.width=this.contentDiv.clientWidth+t+"px",this.contentDiv.style.height=this.contentDiv.clientHeight+i+"px",this.onResize()}}))}let e=this._hasFooter();Pr(this.domNode,"dialog-footer",`\n        .footer {\n          ${e?"":"display: none !important;"}\n        }\n        .primary {\n          ${e?"width: 100% !important;":""}\n        }\n        .secondary {\n          ${e?"display: none !important;":""}\n        }\n      `)}_hasFooter(){return!!this.buttons?.length||!!this.extraBottomItems?.length}isShown(){return!this.destroyed&&this.domNode.open&&!!this.domNode.parentElement}show(e){return this._shown=!0,this.setVisible(!1),od.show(this,e?.parentNode||document.body,e?.zIndex),this._disableFocusTrapOnClickOutside(),this._buildDialog(),e?.position&&this.setPosition(e.position),this.emit("show"),this.whenLayoutReady().then((()=>{this.destroyed||(this.domNode.setFocus(),this.setVisible(!0))})),this}setVisible(e){!this.lockVisibility&&this.domNode&&(this.domNode.style.opacity=e?"":"0")}hide(){this._shown&&(this._shown=!1,od.hide(this),this.emit("hide"))}updateButtonText(e,t){this.buttons.find((t=>t.id===e))._button.text=t}getButton(e){return this.buttons.find((t=>t.id===e))?._button}enableButton(e,t){let i=this.getButton(e);i&&(i.disabled=!t)}emphasizeButton(e,t){let i=this.getButton(e);i&&(i.appearance=t?"solid":"outline-fill")}setButtonVisible(e,t){let i=this.getButton(e);i&&(i.domNode.style.display=t?"":"none")}async _focusOnButton(e){let t=this.getButton(e);t?await t.domNode.setFocus():(await this.buttons[0]._button.domNode.setFocus(),setTimeout((()=>{this.buttons[0]._button.domNode.blur()}),100))}whenLayoutReady(){return this._layoutDfd.promise}getPosition(){if(!this.isShown())return Promise.resolve(null);let e=()=>{let e=$i(this.domNode.parentElement),t=$i(this.domNode);return{l:t.x-e.x,t:t.y-e.y}};return this.domNode.clientWidth?Promise.resolve(e()):this.whenLayoutReady().then((()=>e()))}setPosition(e){if(!this.isModal&&e)return this.whenLayoutReady().then((()=>{let t=$i(this.domNode.parentElement),i=$i(this.domNode);if(e.anchorNode){let r=$i(e.anchorNode),o={w:i.w,h:i.h};e.vOffset&&(o.h+=2*e.vOffset);let s,a=10,n=e=>e?r.x-t.x-o.w-a:r.x-t.x+r.w+a;"right"===e.placement?(s=n(!1),s+o.w>t.w&&(s=n(!0))):(s=n(!0),s<0&&(s=n(!1),s=Math.min(s,t.w-o.w)));let l=10,d=e.vAlign||"top",c=r.y-t.y;"middle"===d?c+=r.h/2-o.h/2:"bottom"===d&&(c+=r.h-o.h),c=Math.min(c,t.h-o.h),c=Math.max(l,c),e={l:s,t:c}}"number"==typeof e.l?this.domNode.style.left=e.l+"px":"number"==typeof e.r&&(this.domNode.style.left=t.w-i.w-e.r+"px"),"number"==typeof e.t?this.domNode.style.top=e.t+"px":"number"==typeof e.b&&(this.domNode.style.top=t.h-i.h-e.b+"px"),!e.skipValidation&&this.validatePosition()}))}async center(){this.isModal||(await this.whenLayoutReady(),this.domNode.style.left=(this.domNode.parentElement.clientWidth-this.domNode.clientWidth)/2+"px",this.domNode.style.top=(this.domNode.parentElement.clientHeight-this.domNode.clientHeight)/2+"px")}validatePosition(e){let t=this.domNode.getAttribute("data-previously-shown"),i={},r=$i(this.domNode.parentElement||document.body),o=$i(this.domNode);if(e=e||{minOffset:8},t||e.fromGuidedTour)i.top=Math.min(Math.max(e.minOffset,o.y-r.y),r.h-o.h-e.minOffset),i.left=Math.min(Math.max(e.minOffset,o.x-r.x),r.w-o.w-e.minOffset);else{this.domNode.setAttribute("data-previously-shown","true");let t=od.getAllDialogs().map((e=>$i(e.domNode))).filter((e=>JSON.stringify(e)!==JSON.stringify(o))).sort(((e,t)=>t.x-e.x));for(let s of t)this.checkPositionIsWithinParentAndNoOverlap(o,r,s)||(o.x=s.x+s.w-o.w,o.y=s.y+s.h+e.minOffset),this.checkPositionIsWithinParentAndNoOverlap(o,r,s)||(o.x=s.x-o.w-e.minOffset,o.y=130),this.checkPositionIsWithinParentAndNoOverlap(o,r,s)&&(i={top:o.y,left:o.x})}Ui(this.domNode,{top:i.top+"px",left:i.left+"px"})}checkPositionIsWithinParentAndNoOverlap(e,t,i){if(e.x<t.x||e.y<t.y||e.x+e.w>t.x+t.w||e.y+e.h>t.y+t.h)return!1;let r=e.x+e.w/2,o=e.y+e.h/2;return!(e.x>=i.x&&e.x<=i.x+i.w&&e.y>=i.y&&e.y<=i.y+i.h||e.x+e.w>i.x&&e.x+e.w<i.x+i.w&&e.y>=i.y&&e.y<=i.y+i.h||e.x>i.x&&e.x<i.x+i.w&&e.y+e.h>i.y&&e.y+e.h<i.y+i.h||e.x+e.w>=i.x&&e.x+e.w<i.x+i.w&&e.y+e.h>=i.y&&e.y+e.h<i.y+i.h||r>=i.x&&r<=i.x+i.w&&o>=i.y&&o<=i.y+i.h)}_endDrag(){this._validateEndDrag(),this._dragJustEndedFlag=!0,setTimeout((()=>{this._dragJustEndedFlag=!1}),100)}_validateEndDrag(){this.validatePosition()}isMouseOver(){return Qr(this.domNode)||this._dragJustEndedFlag}disableFocusTrap(){this.domNode.focusTrapDisabled=!0}_disableFocusTrapOnClickOutside(){this.addHandles(wi(document,"mousedown",(()=>{!this.isMouseOver()&&this.isShown()&&this.disableFocusTrap()})))}onButtonClicked(e){}onResize(){}};sd.DialogManager=od,rd([u({constructOnly:!0})],sd.prototype,"content",2),rd([u({constructOnly:!0})],sd.prototype,"headerButtons",2),rd([u({constructOnly:!0})],sd.prototype,"buttons",2),rd([u({constructOnly:!0})],sd.prototype,"closeButtonId",2),rd([u({constructOnly:!0})],sd.prototype,"isModal",2),rd([u({constructOnly:!0})],sd.prototype,"disableCloseButton",2),rd([u({constructOnly:!0})],sd.prototype,"resizable",2),rd([u({constructOnly:!0})],sd.prototype,"disableEscape",2),rd([u({constructOnly:!0})],sd.prototype,"focusTrapOptions",2),rd([u({constructOnly:!0})],sd.prototype,"focusButton",2),rd([u({constructOnly:!0})],sd.prototype,"extraBottomItems",2),rd([u({constructOnly:!0})],sd.prototype,"kind",2),sd=rd([p()],sd);var ad=["calcite-checkbox","calcite-action","calcite-button","calcite-popover","calcite-segmented-control","calcite-input"];function nd(e,t){return ad.some((t=>ar(t,e).some((e=>!(!Qr(e)||"calcite-popover"===t&&!e.open)))))}function ld(e){if(!e.alternateRowColor)return;let t=!1,i=[];e.inspectChildren((e=>(e.isOddVisible=t,t=!t,i.push(e),!!e.expanded))),i.forEach((t=>{let i=e.itemRenderer.getItemBinding(t)?.itemNode;i&&(Di(i,"selectableTree_listItem_even selectableTree_listItem_odd"),Li(i,t.isOddVisible?"selectableTree_listItem_odd":"selectableTree_listItem_even"))}))}var dd=class{constructor(){this._selectedRows={}}isRowSelected(e){return!!this._selectedRows[this._toId(e)]}_toId(e){return"string"==typeof e||"number"==typeof e?e:e?.[this.list.idProperty]}getSelectedItems(){let e=[];return this.list.inspectChildren((t=>{this._selectedRows[t[this.list.idProperty]]&&e.push(t)})),e}updateRowSelectionState(e,t){let i=this._selectedRows[this._toId(e)];i&&(i.item=e,i.itemNode=t,Li(t,this.list.rowSelectionClass))}setRowSelectionSuspended(e){this._selectionSuspended=e}addRowSelectionHandler(e,t){if(this.list.selectableRowFilter&&!this.list.selectableRowFilter(e))return;this._addLabelToBinding(e,this.list.itemRenderer.getItemBinding(e));let i=i=>{setTimeout((()=>{if(!(this._selectionSuspended||"keypress"===i.type&&(i.key!==Xo.Enter&&i.key!==Xo.Space||i.srcElement!==t)||"click"===i.type&&i.srcElement!==t&&i.srcElement===document.activeElement||"ignore"===this.list.rowSelectionPreProcessor?.(e,t))&&(this.list.enableRowSelectionOnCalciteElement||!nd(t))){if((!Jo(i)&&!i.shiftKey||!this.list.enableMultipleRowSelection)&&this._unselectRows(),i.shiftKey&&this.list.enableMultipleRowSelection)if(this._lastSelectedRowInfo?.itemNode&&this._lastSelectedRowInfo.item.parent===e.parent){let t=e.parent.children;this.list.getSortingFunction()&&(t=t.slice(),t.sort(this.list.getSortingFunction()));let i=t.indexOf(this._lastSelectedRowInfo.item),r=t.indexOf(e),o=Math.min(i,r),s=Math.max(i,r);for(let e=o;e<=s;e++){let i=t[e],r=this.list.getItemBinding(i);r&&this._selectRow(r.itemNode,i)}}else this._selectRow(t,e);else Jo(i)&&this.list.enableMultipleRowSelection&&this._lastSelectedRowInfo?.itemNode&&this._lastSelectedRowInfo.item.parent===e.parent&&this._selectedRows[e[this.list.idProperty]]?this._unselectRow(t,e):this._selectRow(t,e);this.onRowSelectionChanged()}}),0)};wi(t,"click",i),wi(t,"keypress",i)}selectRowsForItems(e){this._unselectRows(),e?.forEach((e=>{let t=this.list.getItemBinding(e);t&&this._selectRow(t.itemNode,e)}))}_selectRow(e,t){Li(e,this.list.rowSelectionClass);let i={itemNode:e,item:t};this._selectedRows[t[this.list.idProperty]]=i,this._lastSelectedRowInfo=i,this._outsideHandler=this._outsideHandler||(this.list.keepSelectionWhenClickedOutside?null:wi(document.body,"click",(()=>{!Qr(this.list.domNode)&&!this._selectionSuspended&&(this._unselectRows(),this.onRowSelectionChanged())})))}_unselectRow(e,t){delete this._selectedRows[t[this.list.idProperty]],Di(e,this.list.rowSelectionClass)}_unselectRows(){for(let e in this._selectedRows)Di(this._selectedRows[e].itemNode,this.list.rowSelectionClass);this._selectedRows={},this._outsideHandler?.remove(),this._outsideHandler=null}_addLabelToBinding(e,t){if(this.list.selectableRowFilter&&!this.list.selectableRowFilter(e))return;let{checkbox:i}=t;i&&(i.ariaLabel=e[this.list.labelProperty])}onRowSelectionChanged(){}},cd=class{constructor(e){this._pendingtemsToSyncExpand=[],this.list=e,this._rowSelection=new dd,this._rowSelection.list=e,this._rowSelection.onRowSelectionChanged=()=>this.onRowSelectionChanged(this.getSelectedRows())}provideToggleOnClickAction(e){let{itemNode:t,expandoIcon:i,checkbox:r}=e;wi(t,"release",(()=>{nd(t)||(i?i.onClick():r.onClick(null))}))}clear(){this._lastClickedItem=null}executeSelectionClick(e){let t=this.list.getSelectedState(!0),i=this.list.itemRenderer.getItemBinding(e),r=e.parent.children;if((!this.list.multipleCheckValidator||this.list.multipleCheckValidator(e))&&Ko()&&this._lastClickedItem&&r.includes(this._lastClickedItem)){this.list.getSortingFunction()&&(r=r.slice(),r.sort(this.list.getSortingFunction()));let t=r.indexOf(this._lastClickedItem),i=r.indexOf(e),o=Math.min(t,i),s=Math.max(t,i);for(let e=o;e<=s;e++){let t=r[e];if(t!==this._lastClickedItem&&!this._toggleNodeSelection(t))break}}else this._toggleNodeSelection(e);this._lastClickedItem=e,this.list._onCheckboxClicked(t,i)}_toggleNodeSelection(e){let t,i=this.list.tree,r=void 0===e.indepSelection?!i.getSelectionState(e):!e.indepSelection;if(r&&this.list.checkLimit){let o=this.list.getSelectedItems().length;if(t="function"==typeof this.list.checkLimit?this.list.checkLimit(i,o):this.list.checkLimit,o>=t){if(void 0!==e.indepSelection||!e.children||!1===i.getSelectionState(e))return this._showCheckLimitMessage(),!1;r=!1}}let o=i.changeSelect(e,r,t);return o?void 0!==e.indepSelection&&(e.indepSelection=r):this._showCheckLimitMessage(),o}updateSelection(e){let t=this.list.itemRenderer.getItemBinding(e);if(!t||!t.checkbox)return;let i=this.getItemSelection(e);t.checkbox.checked=i,this.list.highlightSelected&&Fi(t.itemNode,"selectableTree_listItem_selected",!!i)}getItemSelection(e){return e?void 0!==e.indepSelection?e.indepSelection:this.list.tree.getSelectionState(e):void 0}clearLastCheckInfo(){this._lastClickedItem=null}_showCheckLimitMessage(){if(this._hideCheckLimitMessage(),!this.list.checkLimitMessage)return;let e=new sd({title:this.list.checkLimitTitle,content:this.list.checkLimitMessage,kind:"warning",buttons:[{id:"positive",text:Ze("widgets").calcite.buttons.close}]}).show();this._checkLimitHandler=()=>e.hide()}_hideCheckLimitMessage(){this._checkLimitHandler?.(),this._checkLimitHandler=null}isRowSelected(e){return this._rowSelection.isRowSelected(e)}getSelectedRows(){return this._rowSelection.getSelectedItems()}selectRowsForItems(e){this._rowSelection.selectRowsForItems(e)}setRowSelectionSuspended(e){this._rowSelection.setRowSelectionSuspended(e)}onRowSelectionChanged(e){}setExpanded(e,t){!e.children||!e.children.length||(this.list.tree.updateExpand(e,t),!this._pendingtemsToSyncExpand.includes(e)&&this._pendingtemsToSyncExpand.push(e),this._invokeUpdateExpadedState())}_invokeUpdateExpadedState(){Bo(this,"_doUpdateExpadedState")}cancelPendingUpdateExpandedState(){this._pendingtemsToSyncExpand.length=0,Ro(this,"_doUpdateExpadedState")}_doUpdateExpadedState(){let e=this._pendingtemsToSyncExpand.slice();this._pendingtemsToSyncExpand.length=0,this.onExpandChanged(e,(()=>e.forEach((e=>this._handleExpand(e,!1)))))}setExpandedAnimated(e,t){!e.children||!e.children.length||(this.list.tree.updateExpand(e,t),this.onExpandChanged([e],(()=>this._handleExpand(e,!0))))}_handleExpand(e,t){let i,r=this.list.itemRenderer.getItemBinding(e);if(r?.expandoIcon&&(r.expandoIcon.icon=e.expanded?"chevron-down":"chevron-right",r.childrenRoot))return t?(dr(r.childrenRoot),i=as({obj:r.childrenRoot.style,duration:200,properties:{height:{start:e.expanded?0:r.childrenRoot.clientHeight,end:e.expanded?r.childrenRoot.clientHeight:0,units:"px"}},onEnd:()=>{!e.expanded&&lr(r.childrenRoot),r.childrenRoot.style.height=""}}).promise):hr(r.childrenRoot,e.expanded),ld(this.list),i}onExpandChanged(e,t){}},hd=class extends Xl{constructor(){super(...arguments),this._cache={},this._placeSessionId=0}getItemBinding(e){return e&&this._cache[e[this.list.idProperty]]}getItemByNode(e){return e?.__item}clear(){this._cache={}}createPresentation(e,t,i,r,o){if(!1===e.visible||!e.parent)return null;let s=er("div",{class:"selectableTree_listItem deepness_"+e.deepness});s.__item=e;let a,n=!(this.list.hideCheckboxes||!1===e.selectable&&void 0===e.indepSelection),l=this._cache[e[this.list.idProperty]],d=n?l?.checkbox||new Xn:null;d&&(d.disabled=!1===e.enabled,d.placeAt(s)),!1===e.enabled&&(s.style.cursor="default");let c={item:e,itemNode:s,checkbox:d,childrenRoot:l?.childrenRoot};this._cache[e[this.list.idProperty]]=c,this.list.rowLabelRenderer?this.list.rowLabelRenderer(e,c):(er("span",{innerHTML:e[this.list.labelProperty]},s),this.list.toggleOnLabelClick&&this.list.itemController.provideToggleOnClickAction(c)),e.children?.length&&(a=l?.expandoIcon||new mo({class:"esriGESpaceAfterBig expandoIcon",appearance:"transparent",icon:"chevron-right",scale:"s",iconScale:"s",padding:"1px"}),a.onClick=()=>{this.list.itemController.setExpandedAnimated(e,!e.expanded),this.list.onExpandChangedUser(e)},a.placeAt(d?d.domNode:s,d?"before":"first"),a.domNode.style.width="16px",c.expandoIcon=a,this.list.itemController._handleExpand(e,!1)),o.destroyPresentation=()=>{let t=(e.parent&&this._cache[e.parent[this.list.idProperty]])?.childrenRoot;for(;t&&!t.firstChild;){let e=t.parentElement;t.remove(),t=e?.__isChildrenRoot?e:null}};let h=0;if(h="function"==typeof this.list.indent?this.list.indent(!!a,e.deepness):this.list.indent*e.deepness,h){er("div",{class:"esriGEFlexNoShrink"},s,"first").style.width=h+"px"}return this.list.renderCheckboxFirst&&d&&(d.domNode.remove(),ir(d.domNode,s,"first")),this.list.itemController.updateSelection(e),d&&(d.onClick=()=>{this.list.itemController.executeSelectionClick(e)}),this.list.enableRowSelection&&(this.list.itemController._rowSelection.addRowSelectionHandler(e,s),!this.list.isSelectionClassUpdateDisabled&&this.list.itemController._rowSelection.updateRowSelectionState(e,s)),this.list.rowPostRenderer?.(e,c),s}placeVisibleItems(e,t){this._placeSessionId++;let i={},r=[],o=(e,t,o)=>{i[e]||(i[e]=!0,o.__sessionId!==this._placeSessionId&&(o.__sessionId=this._placeSessionId,o.__childIndex=0),r.push({node:t,parent:o,index:o.__childIndex++}))};e.forEach((e=>{let i=e[this.list.idProperty],r=this._cache[i];if(!r)return;let s,a=[],n=e.parent;for(;n;)a.push(n),n=n.parent;a.reverse(),a.forEach((e=>{if(-1===e.deepness)s=t;else{let t=e[this.list.idProperty],i=this._cache[t]=this._cache[t]||{item:e,itemNode:null};i.childrenRoot=i.childrenRoot||this._createChildrenRoot(),o(t+"_cn",i.childrenRoot,s),s=i.childrenRoot}})),o(i,r.itemNode,s)})),r.forEach((e=>{if(e.node.parentNode===e.parent){let t=e.parent.children;for(let i=0,r=t.length;i<r;i++)if(t[i]===e.node){if(i===e.index)return;break}}ir(e.node,e.parent,e.index)}))}_createChildrenRoot(){let e=er("div",{style:"overflow: hidden"});return e.__isChildrenRoot=!0,e}selectPresentation(e,t,i){}},pd=Object.getOwnPropertyDescriptor,ud=class extends ed{constructor(e){super(e),this.keepScrollPosition=!0,this.hasSelectableItems=!1,this.stopMouseEventPropagation=!1,this._noItemIndex=!0,this._noOddEven=!0,this.itemRenderer=new hd,this.indent=40,this.highlightSelected=!0,this.alternateRowColor=!0,this.rowSelectionClass="selectableTree_rowSelected",this._renderQueue=new Ql,this._loadId=0,this.itemController=new cd(this)}get tree(){return this._tree}set tree(e){this._tree=e,this.domNode&&this.refresh()}postCreate(){Li(this.domNode,"esriGESelectableTreeList"),!this.alternateRowColor&&Li(this.domNode,"noOddEven"),this.enableOnDemandOptimization=!0,super.postCreate(),this.itemRenderer.list=this}getRenderPromise(){return this._renderQueue.getPromise()}setRefreshSuspended(e){this._refreshSuspended=e}refresh(){this._refreshSuspended||(Ro(this,"_doRefreshCheckboxes"),this.itemController.cancelPendingUpdateExpandedState(),this._renderQueue.add(Bo(this,"_doRefresh")))}_doRefresh(){this._refreshSuspended||this.destroyed||!this._tree||(this.renderPreProcessor?.(),this._applyTree(),this.renderPostProcessor?.())}_applyTree(){this.idProperty=this._tree.idProperty,this.itemController.onExpandChanged=(e,t)=>{this._loadItemsInView(null,e,t)},this.itemController.onRowSelectionChanged=e=>this.onRowSelectionChanged(e);let e=[];this.inspectChildren((t=>{e.push(t)})),super._setItems(e)}_loadItemsInView(e,t,i){this._loadId++;let r=this._loadId;this._renderQueue.add((()=>{if(r!==this._loadId)return;let e=1===t?.length&&!t[0].expanded,o=Ee();super._loadItemsInView(e?o.promise:null),ld(this);let s=i?.();return Promise.resolve(s).then(o.resolve),s})),this._renderQueue.add((()=>r===this._loadId&&this.onViewUpdated()))}_doAddLoadedItemsInView(e,t,i){super._doAddLoadedItemsInView(e,t,i),this.itemRenderer.placeVisibleItems(i,this.itemsDiv)}_destroyItem(e){e.loadDfd?.reject()}onViewUpdated(){}getItemBinding(e){return this.itemRenderer.getItemBinding(e)}clear(){this.itemRenderer.clear(),this.itemController.clear(),super.clear()}_isItemVisible(e){if(!e.parent)return!1;if(0===e.deepness)return!0;let t=e.parent;for(;t?.deepness>=0;){if(!t.expanded||!1===t.visible)return!1;t=t.parent}return!1!==e.visible&&!!e.parent}emulateManualSelectionToggle(e){this.itemController.executeSelectionClick(e)}getItemSelection(e){return this.itemController.getItemSelection(e)}getSelectedItems(e){let t=this.tree.getSelectedNodes(e),i=this._getIndepSelectedNodes();return t.concat(i)}_getIndepSelectedNodes(){let e=[];return this.inspectChildren((t=>{t.indepSelection&&e.push(t)})),e}getSelectedState(e){if(!this.tree)return null;let t={};this.tree?.getSelectedNodes(e).forEach((e=>{t[e[this.idProperty]]=!0}));return this._getIndepSelectedNodes().forEach((e=>{({})[e[this.idProperty]]=!0})),{normalSelection:t,independentSelection:{}}}setSelectedState(e){if(this.tree){if(this.tree.changeSelect(this.tree.root,!1),this._getIndepSelectedNodes().forEach((e=>{e.indepSelection=void 0})),e){for(let t in e.normalSelection){let i=this.tree.get(t);i&&this.tree.changeSelect(i,!!e.normalSelection[t])}for(let t in e.independentSelection){let i=this.tree.get(t);i&&(i.indepSelection=e.independentSelection[t])}}this.refreshCheckboxes()}}setItemSelected(e,t){void 0!==e.indepSelection?e.indepSelection=t:this.tree.changeSelect(e,!!t),this.refreshCheckboxes()}setItemsSelected(e,t){e.forEach((e=>this.setItemSelected(e,t))),this.refreshCheckboxes()}_onCheckboxClicked(e,t){this.refreshCheckboxes();let i=e?.normalSelection||{},r=this.getSelectedState(!0)?.normalSelection||{},o=[];for(let e in r)r[e]&&!i[e]&&o.push(this.tree.get(e));let s=[];for(let e in i)i[e]&&!r[e]&&s.push(this.tree.get(e));this.onSelectionChanged({normalSelection:{selectedItems:o,unselectedItems:s},toggledItem:t?.item,toggledItemNode:t?.itemNode})}refreshCheckboxes(){Bo(this,"_doRefreshCheckboxes")}_doRefreshCheckboxes(){this.inspectChildren((e=>{this.itemController.updateSelection(e)})),this._onCheckboxesRefreshed()}onSelectionChanged(e){}_onCheckboxesRefreshed(){}isExpanded(e){return this.tree.get(e)?.expanded}setExpanded(e,t){let i=this.tree.get(e);i&&this.itemController.setExpanded(i,t)}toggleExpand(e){this.setExpanded(e,!this.isExpanded(e))}toggleExpandAnimated(e){let t=this.tree.get(e);t&&this.itemController.setExpandedAnimated(t,!t.expanded)}getExpandedState(){let e={};return this.inspectChildren((t=>{t.children?.length&&(e[t[this.idProperty]]=!!t.expanded)})),e}setExpandedState(e){for(let t in e)this.setExpanded(t,!!e[t])}onExpandChangedUser(e){}getSortingFunction(){return null}inspectChildren(e){this.tree?.inspectChildren(null,(t=>!(!1===t.visible||this.defaultQuery&&!this.defaultQuery(t))&&e(t)),this.getSortingFunction())}isRowSelected(e){return this.itemController.isRowSelected(e)}getSelectedRows(){return this.itemController.getSelectedRows()}selectRowsForItems(e){this.itemController.selectRowsForItems(e)}setRowSelectionSuspended(e){this.itemController.setRowSelectionSuspended(e)}onRowSelectionChanged(e){}};ud=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?pd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],ud);var gd=Object.getOwnPropertyDescriptor;var md=class{constructor(e){Object.assign(this,e)}renderNode(e,t,i,r){let o,s=this.parent.model;function a(){Di(document.body,"esriGENonSelectable")}s.dndHandler&&es({node:i,onMouseDown:()=>{let e=r.variableToggle;return!(e&&Qr(e.domNode))},onDragStarted:()=>{let i;return t.children?i=e.getDescendingNodes(t,void 0,!0):(i=this.getSelectedNodes&&this.getSelectedNodes(),i=i?.length?i:[t]),o=i.map((e=>s.store.statefulNameToCalculator(e.group.value))),s.dndHandler.onStart?.(o),Li(document.body,"esriGENonSelectable"),!0},createDnDBox:()=>{let e=er("div",{class:"ge-browser-dnd-box esriGENonSelectable"});return o.forEach((t=>{er("div",{class:"dnd-variable",innerHTML:t.getDescriptionWithType()},e)})),e},onDragMoved:()=>{s.dndHandler.onMove?.(o)},onDragEnded:()=>{a(),s.dndHandler.onEnd?.(o)},onDragCanceled:()=>{a(),s.dndHandler.onCancel?.()}})}},bd=class{constructor(e){Object.assign(this,e),Li(this.parent.domNode,"esriGENonSelectable")}getSelectedCalculators(){return this.getSelectedNodes().map((e=>this.parent.model.store.statefulNameToCalculator(e.group.value)))}getSelectedNodes(){let e=this.parent._treeList,t=e.tree,i=[];return t.data.forEach((t=>{t.children?t.children.forEach((t=>{e.isRowSelected(t)&&i.push(t)})):e.isRowSelected(t)&&i.push(t)})),i}},_d=class extends kr{constructor(e){super(e),this.class="browser-variable-grid ge-flex-spacer",this.sortType="default",this.nls=Ze("DataBrowserNew").dataBrowser.variablesView,this._pool=new Ol({idProperty:"id",types:["star","button","toggle","info"]})}postCreate(){this._treeList=new ud({enableRowSelectionOnCalciteElement:!0,alternateRowColor:!1,indent:28,rowLabelRenderer:(e,t)=>this._renderNode(e,t),onSelectionChanged:e=>this._onSelectionChanged(e),onDestroyItemPresentation:e=>{let t=this._treeList.itemRenderer.getItemBinding(e);t&&(delete t.variableToggle,delete t.favoriteIcon),this._pool.poolWidgets(e)}}).placeAt(this.domNode),this.addHandles(this._treeList),this._variableInfo=new jl,this.addHandles(this._variableInfo),this._rowDnd=new md({parent:this,getSelectedNodes:()=>this._rowSelection.getSelectedNodes()});let e=!!this.model.dndHandler;this._treeList.enableRowSelection=e,this._treeList.enableMultipleRowSelection=e,this._treeList.rowSelectionClass="browser-selected-row",this._treeList.selectableRowFilter=e=>!e.children?.length,this._treeList._onCheckboxesRefreshed=()=>this._updateSelectAll(),this._rowSelection=new bd({parent:this})}setGridWidth(e){this._treeList.domNode.style.width=e+"px"}setVariables(e,{sortType:t,sortMethod:i,forcedStateName:r}={}){if(this.updateExpansionCache(),t){switch(this.sortType=t,t){case"default":this.sortMethod="fieldCategory";break;case"relevance":case"popularity":case"newVariables":this.sortMethod=t;break;case"favorites":case"custom":this.sortMethod="newest";break;default:this.sortMethod=null}this._groupCategories="custom"!==t}else i&&(this.sortMethod=i);this._queryId=this.model.lastQueryId;let o=this.model.prepareVariableTreeData(e,{sortType:this.sortType,sortMethod:this.sortMethod,forcedStateName:r}),s=this._canGroupCategories()&&o.length&&o[0].children;if(s&&(o=o.filter((e=>e.children.length))),this._treeList.tree=new pl(o),s){let e=this.model.expansionCache[this._queryId]=this.model.expansionCache[this._queryId]||{};(1===o.length||"popularity"===this.sortMethod||"newVariables"===this.sortMethod)&&o.forEach((t=>e[t.id]=!0)),this._treeList.setExpandedState(e)}this._updateSelectAll()}_updateSelectAll(){let e=this._treeList.tree,t=this.model.multipleSelectIsAllowed&&e.root.children.length&&!e.root.children[0]?.children?e.getSelectionState(e.root):null;this.onUpdateSelectAll(t)}_canGroupCategories(){return this._groupCategories&&(!this.sortMethod||"fieldCategory"===this.sortMethod||"popularity"===this.sortMethod||"newVariables"===this.sortMethod)}updateExpansionCache(){this._queryId&&this._canGroupCategories()&&(this.model.expansionCache[this._queryId]={...this.model.expansionCache[this._queryId],...this._treeList.getExpandedState()})}refresh(e){e&&this._treeList.applyScrollFromMemo(!0),this._treeList.refresh()}updateToggles(e,t){let i=this.model.myDataCache;for(let r of e){let e=r.id;if(i){let r=i[e].relatedIds;for(let e of r)this._tryUpdateToggle(e,t)}else this._tryUpdateToggle(e,t)}this.model.selectionModel.allowMultipleSelectInGroup&&this.updateSelection(null)}_tryUpdateToggle(e,t){let i=this._treeList.tree.get(e);if((!i.selected||this.model.selectionModel.allowMultipleSelectInGroup)&&kn(i.group,t)){let e=this._treeList.getItemBinding(i)?.variableToggle;e&&(e.value=i.group.value)}}updateSelection(e){let t=e?this.model.store.getVariable(e).id:null,i=this.model.selectionModel,r={};for(let e of this._treeList.tree.data){let o=e.children||[e];for(let e of o){if(t&&e.variable.id!==t){e.selected&&(r[e.id]=!0);continue}let o=e.group.value,s=i.getSelectedStatefulName(o);if(s&&s!==o){e.group.value=s;let t=this._treeList.itemRenderer.getItemBinding(e)?.variableToggle;t&&(t.value=s)}s&&(r[e.id]=!0)}}this._treeList.setSelectedState({normalSelection:r})}_renderNode(e,t){let i=t.itemNode,r=t.checkbox;Li(i,"variable-cell");let o=function(e){return!!e.variable}(e)?this._renderVariableNode(e,i,r,t):this._renderCategoryNode(e,i,r);return this._rowDnd.renderNode(this._treeList.tree,e,i,t),o}_createNewChip(e,t){let i=new Ka({class:"browser-chip-new lightBlue chip-in-button",scale:"s",text:e});this.model.refineModel.newVariablesFilter?(Di(i.domNode,"lightBlue"),Li(i.domNode,"browser-chip-clickable"),Co({class:"lightBlue",appearance:"solid",styleProps:{roundButton:!0,noBorder:!0},onClick:e=>{e.stopPropagation(),this.onNewChipClicked()}},i.domNode,t)):i.placeAt(t)}_renderVariableNode(e,t,i,r){if(this.model.store.showFavorites){let t=this._createFavoriteIcon(e);if(t){ir(t.domNode,i.domNode,"before");let o=e.variable.id;this._updateFavoriteIcon(t,this.model.store.isFavorite(o)),t.onClick=i=>{i.stopPropagation(),!this._toggleFavorite(t,o)&&"favorites"===this.sortType&&this.onRemoveFromView(e)},r.favoriteIcon=t}}let o;if(this.model.multipleSelectIsAllowed?this._addToRoot(this._createSpacer(),t):i.domNode.style.display="none",1!==this.model.selectionLimit||this.model.dndHandler){let i=er("div",{class:"esriGETrimWithEllipsis variable-label",textContent:e.label},t);this.model.selectionLimit&&!this.model.dndHandler&&(o=()=>this._treeList.emulateManualSelectionToggle(e),this._addOnClickAction(i,o))}else{let i=this._pool.get("button",(()=>new uo({class:"variable-label esriGEFlexTrim noHover",padding:"0",kind:"neutral",trim:!0,appearance:"transparent",alignment:"start"})),e);i.text=e.label,i.onClick=()=>this.onVariableSelected(e),i.placeAt(t)}if(e.isNew&&(this._addToRoot(this._createSpacer(),t,o),this._createNewChip(this.nls.newItemLabel,t)),this._tryAddDeprecationMark(e.variable.deprecation,t,o),this._addClickableSpacer(t,o),e.group.states){this._addToRoot(this._createSpacer(),t,o);let i=this._pool.get("toggle",(()=>{let e=new $l({useButtons:!0});return wi(e.domNode,"click",(e=>e.stopPropagation())),e}),e);i.setStates(e.group.states),i.value=e.group.value,i.onChange=()=>this._onVariableToggleChange(e,i),i.placeAt(t),r.variableToggle=i}this._addVariableInfoIcon(e,t,o),1===this.model.selectionLimit&&Li(t,"DataBrowser_Selectable")}_tryAddDeprecationMark(e,t,i){e&&this.model.store.getDeprecationMessage&&(this._addToRoot(this._createSpacer(),t,i),fo({isWarning:!0,tooltip:()=>this.model.store.getDeprecationMessage(e),tooltipParams:{placement:"trailing"}},t))}_addClickableSpacer(e,t){let i=er("div",{class:"variable-label ge-flex-spacer",innerHTML:"&nbsp;"});i.style.minWidth="0",this._addToRoot(i,e,t)}_addToRoot(e,t,i){ir(e,t),this._addOnClickAction(e,i)}_addOnClickAction(e,t){t&&(Li(e,"esriGEClickable"),wi(e,"click",t))}_renderCategoryNode(e,t,i){this.model.multipleSelectIsAllowed?ir(this._createSpacer(),t):i.domNode.style.display="none";let r=er("div",{class:"esriGETrimWithEllipsis variable-label",textContent:e.label},t),o=()=>this._onCategoryExpand(e.id);this._addOnClickAction(r,o),e.newCount&&(this._addToRoot(this._createSpacer(),t,o),this._createNewChip(Tn(e.newCount),t)),this._tryAddDeprecationMark(e.deprecation,t,o),this._addClickableSpacer(t,o)}_createFavoriteIcon(e){return this.model.store.canBeFavorite(e.variable)?this._pool.get("star",(()=>new mo({class:"ge-margin-inline-end-8",icon:"star",scale:"s",iconScale:"s",padding:"0",appearance:"transparent"})),e):null}_addVariableInfoIcon(e,t,i){if(!this.model.showVariableInfo)return;this._addToRoot(this._createSpacer(),t,i);let r=this._pool.get("info",(()=>{let e=fo({class:"infoIcon"});return wi(e.domNode,"click",(e=>e.stopPropagation())),e}),e);this._addToRoot(r.domNode,t),to({anchor:r,showArrow:!0,showOnHover:!0,autoFocus:!1,placement:"leading-start",content:()=>(this._variableInfo.variable=e.variable,this._variableInfo.domNode.remove(),this._variableInfo.domNode)}),"custom"===this.sortType&&(this.model.launchCustomVariable&&(ir(this._createSpacer(),t),_o({ariaLabel:this.nls.editVariableTitle,onClick:()=>this._editCustomVariable(e)},t)),this.model.store.removeCustomVariable&&(ir(this._createSpacer(),t),new mo({icon:"x-circle",appearance:"transparent",scale:"s",padding:"0",ariaLabel:this.nls.deleteVariableTitle,onClick:()=>this._removeCustomVariable(e)}).placeAt(t)))}_editCustomVariable(e){this.model.launchCustomVariable(this.model.lastQuery,e.variable)}async _removeCustomVariable(e){if(await this.model.store.confirmRemoveCustomVariable(this.nls.confirmDelete,De(this.nls.customVariableDelete,[e.label]))){e.selected&&this.model.selectionModel.removeFromSelection(e.group.value);try{await this.model.store.removeCustomVariable(e.variable.id)}catch{}this.onRemoveFromView(e)}}_createSpacer(){return er("div",{class:"variable-spacer",innerHTML:"&nbsp;"})}_onCategoryExpand(e){this._treeList.toggleExpand(e)}_toggleFavorite(e,t){let i=!this.model.store.isFavorite(t);if(this.model.store.updateFavorite(t,i),this._updateFavoriteIcon(e,i),this.model.myDataCache){let e=this.model.myDataCache[t].relatedIds;e.length>1&&e.forEach((e=>{let t=this._treeList.tree.get(e),r=this._treeList.getItemBinding(t)?.favoriteIcon;r&&this._updateFavoriteIcon(r,i)}))}return i}_updateFavoriteIcon(e,t){Fi(e.domNode,"brandColor",t),e.icon=t?"star-f":"star"}_onSelectionChanged(e,t){let i=e.normalSelection,r=this.model.selectionModel;i.unselectedItems.forEach((e=>r.removeFromSelection(e.group.value)));let o=i.selectedItems.slice(),s=o.length,a=!1;if(this.model.selectionLimit>0&&(o.length=Math.max(0,Math.min(o.length,this.model.selectionLimit-r.getSelectionCount())),o.length<s)){a=!0;let e=i.selectedItems.slice(o.length);this._treeList.setItemsSelected(e,!1)}let n=null;if(o.length){for(let e of o){if(!1===r.addToSelection(e.group.value,!0)){a=!1;break}n=n||{},n[e.group.value]=!0}let e=o.filter((e=>!n?.[e.group.value]));e.length&&this._treeList.setItemsSelected(e,!1),n&&r.emitSelectionChanged()}if(n&&this.animateSelection(t||ar(".variable-label",e.toggledItemNode)[0]),n){let t=e.normalSelection.selectedItems.find((e=>n[e.group.value]));this.onVariableSelected(t)}(i.unselectedItems||n)&&this.model.selectionChanged(),!this.model.dndHandler&&a&&this.model.showLimitAlert()}_onVariableToggleChange(e,t){if(e.group.value=t.value,this.model.multipleSelectIsAllowed){let e=this.model.selectionModel.getSelectedStatefulName(t.value);return e&&e!==t.value&&(this.model.selectionModel.addToSelection(t.value),this.model.selectionChanged()),void this.updateSelection(t.value)}this.model.myDataCache&&e.relatedIds.length>1&&e.relatedIds.forEach((t=>{let i=this._treeList.tree.get(t),r=this._treeList.getItemBinding(i)?.variableToggle;r&&(r.value=e.group.value)}))}applySelectAll(e,t){let i=[],r=[];this._treeList.tree.root.children.forEach((e=>{let o=e.selected;t&&!o&&i.push(e),!t&&o&&r.push(e)})),this._onSelectionChanged({normalSelection:{selectedItems:i,unselectedItems:r}},e),this.updateSelection(null)}animateSelection(e){this.model.shoppingCartNode&&(this._flyAnim||(this._flyAnim=new Vl(this.model.shoppingCartNode)),this._flyAnim.fly(e,"ge-browser-select-animation",["top",Ti()?"right":"left"]))}onVariableSelected(e){}onRemoveFromView(e){}onNewChipClicked(){}onUpdateSelectAll(e){}gt_getRowCheckbox(e){return e?this._treeList.itemRenderer.getItemBinding(e)?.checkbox.domNode:this._treeList.itemRenderer.getItemBinding(this.gt_getFirstItem())?.checkbox.domNode}gt_getFirstItem(e){let t=this._treeList.tree.data[0];return t.children?e?t:t.children[0]:t}gt_getFirstRow(e){return this._treeList.itemRenderer.getItemBinding(this.gt_getFirstItem(e))?.itemNode}gt_selectFirstItem(){this._treeList.itemController.executeSelectionClick(this.gt_getFirstItem())}gt_getDataCalculators(){return this._treeList.tree.getDescendingNodes(this._treeList.tree.data[0],void 0,!0).map((e=>this.model.store.statefulNameToCalculator(e.group.value)))}gt_unselectAll(){let e=this._treeList.getSelectedItems();this._treeList.setItemsSelected(e,!1)}};_d=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?gd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],_d);var fd=Object.getOwnPropertyDescriptor,vd=class extends kr{constructor(e){super(e),this._templateString='<div class="browser-variables-view ge-flex-column"></div>',this.nls=Ze("DataBrowserNew").dataBrowser.variablesView}postCreate(){this._subcategoriesContainer=er("div",{class:"subcategory-pagination ge-padding-inline-start-4 ge-flex-no-shrink"},this.domNode),lr(this._subcategoriesContainer),this._subcategoriesPagination=new Sl({paginationClass:"ge-flex-row",gap:8,buttonsWidth:32,paginationGap:4,movePrevButton:this._createPaginationButton(Ti?"chevron-left":"chevron-right"),moveNextButton:this._createPaginationButton(Ti?"chevron-right":"chevron-left"),container:this._subcategoriesContainer}),this._filterBar=new Bl({class:"ge-flex-no-shrink ge-margin-block-start-8 ge-margin-block-end-16 g-margin-inline-start-8",getViewBox:()=>Qi(this.domNode),onFilterApplied:e=>this.updateVariables(e),onReset:()=>this._resetFilters()}).placeAt(this.domNode),this.addHandles(this._filterBar);let e=er("div",{class:"ge-flex-no-shrink ge-flex-row grid-variables-title"},this.domNode);this._selectAll=new Xn({class:"ge-margin-inline-start-8"},e),this._selectAll.onClick=({checked:e})=>this._variablesGrid.applySelectAll(this._variablesCountLabel,e),this._variablesCountLabel=er("div",{class:"ge-flex-spacer variables-count ge-margin-inline-start-8"},e),this._calculationTypeSelect=function(e,t){let i=Ze("DataBrowserNew").dataBrowser.variablesView;return tl(i.calculationType,{value:wt,items:[{label:i.default,value:wt},{label:i.percent,value:xt},{label:i.average,value:Ct},{label:i.reliability,value:Nt},{label:i.index,value:St}]},t,e)}(e,(e=>{this._updateVariableGrid(this.variableModel.refineModel.getFilteredVariables(),{forcedStateName:e})})),this.addHandles(this._calculationTypeSelect),this._variableSortSelect=function(e,t){let i=Ze("DataBrowserNew").dataBrowser,r=i.variablesView;return tl(i.browseView.sortBy,{items:[{value:"newest",label:r.newest},{value:"oldest",label:r.oldest},{value:"alphabetical",label:r.sortByNameAsc},{value:"unalphabetical",label:r.sortByNameDesc},{value:"popularity",label:r.popularity},{value:"relevance",label:r.relevance},{value:"newVariables",label:r.sortByNew},{value:"fieldCategory",label:r.fieldCategory}]},t,e)}(e,(e=>{this._updateVariableGrid(this.variableModel.refineModel.getFilteredVariables(),{sortMethod:e})})),this.addHandles(this._variableSortSelect),this._variablesGrid=new _d({model:this.variableModel,onVariableSelected:e=>{this.variableModel.sendSelectVariableActionTelemetry(e,this._variablesGrid.sortMethod),1===this.variableModel.selectionLimit&&this.onApply(e.group.value)},onRemoveFromView:e=>this._removeVariableFromView(e.variable),onNewChipClicked:()=>{let e=this.variableModel.refineModel.newVariablesFilter,t=e.enumItems;t[0].selected=!0,t[1].selected=!t[1].selected,this._filterBar.updateFilterList(e)},onUpdateSelectAll:e=>{hr(this._selectAll.domNode,null!==e),this._selectAll.checked=null!==e&&e}}).placeAt(this.domNode),this.addHandles(this._variablesGrid)}setVariables(e){e.variables=this.variableModel.store.processVariables(e.variables);let t=this.variableModel.initRefineFilters(e);this._renderRefineFilters();let i=e.sortType;this._updateSortOptions(i),this._variablesGrid.onUpdateSelectAll(null),this._updateVariableGrid(t,{sortType:i})}updateVariables(e){let t=this.variableModel.refineModel.applyRefineFilter(e);this._updateVariableGrid(t)}updateSelection(e){this._variablesGrid.updateSelection(e)}_removeVariableFromView(e){this.variableModel.refineModel.removeVariableFromRefineData(e);let t=this.variableModel.refineModel.getFilteredVariables();this._updateVariableGrid(t)}_resetFilters(){let e=this.variableModel.refineModel.resetFilters();this._renderRefineFilters(!0),this._updateVariableGrid(e)}_updateVariableGrid(e,t){this._updateVariablesCount(e.length),t?.forcedStateName?this._variablesGrid.updateToggles(e,t.forcedStateName):(this._variablesGrid.setVariables(e,t),this._updateCalculationOptions())}_updateVariablesCount(e){this._variablesCountLabel.textContent=In(e,this.variableModel.refineModel.variables.length)}_updateCalculationOptions(){let e=this.variableModel.canShowCalculationStates();hr(this._calculationTypeSelect.domNode.parentElement,e),e&&(this._calculationTypeSelect.items=this._calculationTypeSelect.items.map((e=>(e.hidden=this.variableModel.disableCalculationState(e.value),e))),this._calculationTypeSelect.value=wt)}_updateSortOptions(e){let t="special"!==e&&"saved"!==e;hr(this._variableSortSelect.domNode.parentElement,t),t&&(this._variableSortSelect.items=this._variableSortSelect.items.map((t=>{if("newest"===t.value||"oldest"===t.value)t.hidden="favorites"!==e&&"custom"!==e;else{let i="alphabetical"===t.value||"unalphabetical"===t.value||"fieldCategory"===t.value&&"custom"!==e;t.hidden=!(i||t.value===e)}return t})),this._variableSortSelect.value="default"===e?"fieldCategory":"favorites"===e||"custom"===e?"newest":e)}_renderRefineFilters(e){let t=this.variableModel.refineModel;if(!e){this._subcategoriesPagination.reset(),this._dcChips={};let e=t.dataCollectionFilter;if(hr(this._subcategoriesContainer,!!e),e){let t=e.isActive()?e.enumItems.findIndex((e=>e.selected)):-1;this._subcategoriesPagination.init(t+1),this._addSubcategoryChip(t<0),e.enumItems.forEach(((e,i)=>{this._addSubcategoryChip(i===t,e,"ge-margin-inline-start-8")}))}}this._filterBar.renderRefineFilters(t.refineData)}_createPaginationButton(e){return Co({class:"pagination-button",kind:"inverse",appearance:"outline",styleProps:{roundButton:!0},padding:"2px"},_a({icon:e,size:24,scale:"m"}).domNode,!1)}_addSubcategoryChip(e,t,i){let r=new Ka({scale:"m",kind:e?"inverse":"neutral",text:t?t.value:this.nls.allCategoriesLabel}),o=t?t.id:"*";this._dcChips[o]=r,!e&&Li(r.domNode,"browser-chip-clickable");let s=Co({kind:"neutral",appearance:"solid",class:i=(i?i+" ":"")+"ge-padding-block-4",styleProps:{roundButton:!0,noBorder:!0},onClick:()=>{this._updateDCSelect(o)}},r.domNode,this._subcategoriesContainer);Di(s.domNode,"esriGECalciteButton"),s.domNode.style.visibility="hidden",setTimeout((()=>s.domNode.style.visibility=""),500)}_updateDCSelect(e){let t=this._dcChips[e];if("inverse"===t.kind)return;let i=this.variableModel.refineModel.dataCollectionFilter;if("*"===e)i.enumItems.forEach((e=>{if(e.selected){let t=this._dcChips[e.id];t.kind="neutral",Li(t.domNode,"browser-chip-clickable")}else e.selected=!0}));else{let t="inverse"===this._dcChips["*"].kind,r=t?"*":null;i.enumItems.forEach((i=>{if(i.id===e)i.selected=!0;else{let e=!t&&i.selected;i.selected=!1,e&&(r=i.id)}}));let o=this._dcChips[r];o.kind="neutral",Li(o.domNode,"browser-chip-clickable")}t.kind="inverse",Di(t.domNode,"browser-chip-clickable"),this.updateVariables(i)}resize(e){lr(this._variablesGrid.domNode),this._renderRefineFilters();let t=Ji(this.domNode).w;this._variablesGrid.setGridWidth(t),dr(this._variablesGrid.domNode),this._variablesGrid.refresh(e)}updateExpansionCache(){this._variablesGrid.updateExpansionCache()}onApply(e){}gt_getFilterBar(){return this._filterBar}gt_getCheckbox(){return this._variablesGrid.gt_getRowCheckbox()}gt_getFirstRow(e){return this._variablesGrid.gt_getFirstRow(e)}gt_getDataCalculators(){return this._variablesGrid.gt_getDataCalculators()}gt_unselectItems(){this._variablesGrid.gt_unselectAll()}gt_selectFirstItem(){this._variablesGrid.gt_selectFirstItem()}gt_getVariablesGridNode(){return this._variablesGrid.domNode}};vd=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?fd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],vd);var yd=Object.getOwnPropertyDescriptor,wd=class extends Uo{createLabel(e){let t=er("div",{class:"ge-flex-row ge-flex-spacer listItemLabel"}),i=this.iconFactory.createCategoryIcon(e,{class:"ge-margin-inline-end-8",scale:"s",size:16});return i&&ir(i,t),er("div",{class:e.isCustom?"ba-custom-category-label":"",textContent:e.label},t),t}},xd=class extends kr{constructor(e){super(e),this._templateString='<div class="ge-data-browser">\n    <div data-attach-point="_navigationContainer"></div>\n    <div class="browser-content-container ge-padding-inline-8">\n      <div data-attach-point="_breadcrumbContainer"></div>\n      <div class="browser-view-container" data-attach-point="_viewContainer"></div>\n    </div>\n  </div>',this.nls=Ze("DataBrowserNew").dataBrowser,this.hideBreadcrumb=!1,this._browsed=!1}postCreate(){this.viewModel.onQueryApplied=e=>this._applyResult(e);let e=this.viewModel.variableModel;e.selectionChanged=()=>this.syncShoppingCart(e.selectionModel.getCurrentSelection()),this._shortcuts=this.viewModel.navigationModel.getShortcuts?.()||[];let t=e=>{let t=this._prepareBaseQuery();"explore"===e?t.goBack=!0:(t.explore=e,"standard"!==t.mode&&"allVariables"===e&&!this._navigationSelect&&(t.mode="standard",this._canGoBack=!1)),this.viewModel.queryModel.applyQuery(t)};if(this._compactNavigator=this.useCompactNavigation?.(),this._compactNavigator)if("boolean"!=typeof this._compactNavigator){let e=new wd;e.iconFactory=this.viewModel.navigationModel.iconFactory,this._navigationSelect=new na({openButtonParams:{width:null},requireSelection:!1,renderSelectionAsItem:!0,placeHolder:this.nls.explore,selectedLabelRenderer:e=>this._renderNavigationItem(e),itemRenderer:e,onChange:({value:e})=>t(e)}).placeAt(this._compactNavigator),this.addHandles(this._navigationSelect),lr(this._navigationContainer)}else lr(this._navigationContainer);else this._navigationPanel=new Cl({iconFactory:this.viewModel.navigationModel.iconFactory,onExploreItemClick:e=>t(e),onCategoryItemClick:e=>{let t=this._prepareBaseQuery();t.categoryId=e,this.viewModel.queryModel.applyQuery(t)}}).placeAt(this._navigationContainer),this.addHandles(this._navigationPanel);this._breadcrumb=new Qa({onBreadcrumbClick:e=>this.viewModel.queryModel.applyQuery(e)}),this._breadcrumb.placeAt(this._breadcrumbContainer,"replace"),this.addHandles(this._breadcrumb);let i=this.viewModel.navigationModel.getAdditionalBrowseModes();i.unshift("standard"),this._browseView=new nl({navigationModel:this.viewModel.navigationModel,supportedModes:i,standardVariablesTitle:this.standardVariablesTitle,shortcuts:this._shortcuts.map((({id:e,label:t})=>({id:e,label:t}))),navigateWithShortcuts:!0===this._compactNavigator,onSearch:(t,i)=>this._applySearchQuery(t,i).then((r=>{let o=this.viewModel.navigationModel.semanticSearchEnabled&&this.viewModel.navigationModel.useSemanticSearch;return e.sendSearchActionTelemetry(r?null:{mode:this.viewModel.browseMode,categoryId:i,searchString:t,semanticSearchApplied:o}),r})),onBrowseModeChanged:(e,t)=>{let i=this.viewModel.navigationModel.getBrowseItems(e,t);this._browseView.update(e,this.viewModel.categoryViewMode,i,t),this._updateNavigationPanel({mode:e,navigate:"explore",itemId:"explore"})},onViewModeChanged:e=>{this.viewModel.categoryViewMode=e},onGroupFilterChanged:e=>{let t=this.viewModel.navigationModel.getBrowseItems(this.viewModel.browseMode,e);this._browseView.update(this.viewModel.browseMode,this.viewModel.categoryViewMode,t,e)},onItemSelected:(e,t)=>{this._canGoBack=!0;let i=this._prepareBaseQuery();t?i.browseFilter=t:i.categoryId=e.id,this.viewModel.queryModel.applyQuery(i)},onSortingChanged:()=>{this._updateCategoriesTree(this.viewModel.browseMode)},onQuickAccessItemClicked:(e,t)=>{let i=this._prepareBaseQuery();t?(i.categoryId=e,i.isShortcut=!0):i.explore=e,this.viewModel.queryModel.applyQuery(i)}}),this._browseView.placeAt(this._viewContainer),this.addHandles(this._browseView),this._variablesView=new vd({variableModel:e,onApply:e=>this._onApply([e])}),this._variablesView.placeAt(this._viewContainer),this.addHandles(this._variablesView);let r=this.viewModel.getExploreCategories();this._compactNavigator?this._navigationSelect&&(this._navigationSelect.items=r.map((e=>({value:e.id,label:e.label,icon:e.icon})))):this._navigationPanel.updateExploreItems(r),Zs(this.domNode)}_showProgress(e){return Gr(this.domNode,e)}_applySearchQuery(e,t){let i=this._prepareBaseQuery();return i.searchString=e,i.categoryId=t,this._showProgress(this.viewModel.applyQuery(i))}_prepareBaseQuery(){return{mode:this.viewModel.browseMode}}_applyResult(e){this._breadcrumb.update(this.hideBreadcrumb?[]:e.breadcrumb),this._updateView(e),this._updateNavigationPanel(e.navigation,e.query)}_updateCategoriesTree(e){let t=this.viewModel.navigationModel.getNavigationCategories(e);e===this._browseView.getCurrentMode()&&Po(t,this._browseView.getCurrentSorting("label")),this._compactNavigator?this._navigationSelect&&(this._navigationCategories=t):this._navigationPanel.updateCategories(e,t),this.viewModel.browseMode=e}_updateNavigationPanel(e,t){if(this.viewModel.browseMode!==e.mode&&this._updateCategoriesTree(e.mode),this._compactNavigator){if(this._navigationSelect){let i="categories"===e.navigate?this._navigationCategories.find((t=>t.id===e.itemId)):"none"===e.navigate&&e.itemId?this._shortcuts.find((t=>t.id===e.itemId)):null;this._selectedCategoryItem=i?{value:i.id,label:i.label,icon:i.icon,customIconUrl:i.customIconUrl,isCustom:"none"===e.navigate||"standard"!==e.mode}:null;let r="explore"===e.navigate?e.itemId:null;this._customExplorePrompt=this._selectedCategoryItem||r&&this._navigationSelect.findItem({value:r})?null:r?this.nls[r]:t.searchString?this.nls.browseView.customSearch:this.nls.browseView[e.mode+"Variables"],this._navigationSelect.value=r}}else this._navigationPanel.update(e)}_renderNavigationItem(e){return(e=e||this._selectedCategoryItem)&&this._navigationSelect.itemRenderer.createLabel(e,this._navigationSelect)||this._customExplorePrompt}_updateView(e){let t=e.query.mode,i=!!e.variables;if(hr(this._browseView.domNode,!i),hr(this._variablesView.domNode,i),this.viewModel.queryModel.lastBrowseQuery=e.query,i)this.viewModel.variableModel.lastQuery=e.query,this._variablesView.setVariables(e.variables),this._variablesView.resize();else{let i=e.browse.groupFilter||"none",r=this.viewModel.navigationModel.getBrowseItems(t,i),o=this._searchQuery||(e.browse.searchMode?{mode:t,categoryId:"all"!==e.browse.searchMode?"*":null}:null);this._browseView.update(t,e.browse.viewMode||this.viewModel.categoryViewMode,r,i,o,this._canGoBack&&e.browse.goBack),this._browseView.resize()}this.onUpdated({isVariableView:i,query:e.query})}launch(e,t){this._browsed=!0,e?.searchString&&(this._searchQuery=e,e={mode:e.mode,searchMode:e.categoryId?e.mode:"all"}),this.viewModel.reset(e),!t&&this._tryApplySearch()}_tryApplySearch(){if(this._searchQuery){let e=this._searchQuery;this._searchQuery=null,this.viewModel.applyQuery(e)}}updateSelection(e){let t=this.viewModel.variableModel;"dataBrowser"===e.source||!t.multipleSelectIsAllowed||(t.selectionModel.updateSelection(e.selection),"order"!==e.action&&this.inVariableView()&&this._variablesView.updateSelection(e.newStatefulName),"apply"===e.action&&this._onApply(e.selection))}getCurrentSelection(){return this.viewModel.variableModel.selectionModel.getCurrentSelection()}applyCurrentSelection(){this._onApply(this.getCurrentSelection())}inVariableView(){return this.viewModel.queryModel.lastBrowseQuery===this.viewModel.variableModel.lastQuery}resize(){!this._browsed&&this.launch();let{h:e,w:t}=Ji(this.domNode);this._compactNavigator||Fi(this.domNode,"extra-margin-inline",t>Cd),Fi(this.domNode,"extra-margin-block",e>Sd),this.inVariableView()?this._variablesView.resize(!0):(this._browseView.updateSearchBoxHeight(e>Sd),this._browseView.resize()),this._canGoBack=!1,this._tryApplySearch()}getLastExpansionCache(){return this._variablesView.updateExpansionCache(),{...this.viewModel.variableModel.expansionCache}}_onApply(e){let t=this.viewModel.variableModel.store,i=e.map((e=>t.statefulNameToCalculator(e)));this.onApply({selection:e,calculators:i,query:this.viewModel.queryModel.lastBrowseQuery}),this.viewModel.variableModel.multipleSelectIsAllowed||this.viewModel.variableModel.selectionModel.updateSelection(e,!0)}onApply(e){}syncShoppingCart(e){}onUpdated(e){}};xd=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?yd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],xd);var Cd=1100,Sd=460,Nd=class{constructor(e){this.lastBrowseQuery={mode:"standard"},this.nls=Ze("DataBrowserNew").dataBrowser,this.navigationModel=e}async applyQuery(e){if(e.explore)await this._applyExploreQuery(e);else if(e.browseFilter)await this._applyFilterQuery(e);else{if(e.searchString)return this._applySearchQuery(e);e.categoryId?await this._applyCategoryQuery(e):this._applyMainQuery(e)}return!0}_prepareBreadcrumb(e,...t){let i=[{label:this.nls.explore}];return e&&(i[0].query={mode:e,goBack:!0}),i.push(...t),i}onQueryApplied(e){}async _applyExploreQuery(e){let t,i,r,o,{mode:s,explore:a}=e,n=this.navigationModel.query;switch(a){case"allVariables":t=await n.queryAllVariables(),i="default";break;case"favorites":t=await n.queryAllVariables({favorites:!0}),i="favorites";break;case"popular":{let e=await n.queryPopularVariables();t=e.variables,o=e.popularOrNewGroups}i="popularity";break;case"newAndNoteworthy":{let e=await n.queryNewVariables();t=e.variables,o=e.popularOrNewGroups}i="newVariables";break;case"customVariables":case"savedLists":{let e=await n.queryMyData(a);t=e.variables,"savedLists"===a&&(r=e.myDataFilter)}i="customVariables"===a?"custom":"saved"}this.onQueryApplied({query:e,breadcrumb:this._prepareBreadcrumb(s,{label:this.nls[a]}),navigation:{mode:s,navigate:"explore",itemId:a},variables:{sortType:i,variables:t,myDataFilter:r,popularOrNewGroups:o}})}async _applyFilterQuery(e){let{mode:t,browseFilter:i}=e,r=await this.navigationModel.query.queryVariables(t),o="Source"===i.tag&&"standard"!==t,s=o?this.nls.browseView.author:this.nls.browseView[i.tag.toLowerCase()],a=i.value;o&&(a=ht(a)?.value||a);let n=`${s} \u2014 ${a}`,l=this._prepareBreadcrumb(t,{label:n});l[0].query.browseFilterTag=i.tag,this.onQueryApplied({query:e,breadcrumb:l,navigation:{mode:t,navigate:"none"},variables:{sortType:"default",variables:r,browseFilter:i}})}async _applySearchQuery(e){let{mode:t,categoryId:i,searchString:r}=e,o=this.navigationModel.query,s=i?await o.queryVariables(t,{categoryId:i,searchString:r}):await o.queryAllVariables({searchString:r});if(!s.length)return!1;let a=this._prepareBreadcrumb(t);if(i&&"*"!==i)a.push({label:this.navigationModel.getItemTitle(t,i),query:{mode:t,categoryId:i}},{label:De(this.nls.searchLabel,{searchString:r})});else{let e=a[0].query.searchMode=i?t:"all";a.push({label:De(this.nls[e+"SearchLabel"],{searchString:r})})}return e.semanticSearchApplied=!(!this.navigationModel.semanticSearchEnabled||!this.navigationModel.useSemanticSearch),this.onQueryApplied({query:e,breadcrumb:a,navigation:{mode:t,navigate:"none"},variables:{sortType:s.length>1&&"number"==typeof s[0].score?"relevance":"default",variables:s}}),!0}async _applyCategoryQuery(e){let{mode:t,categoryId:i,isShortcut:r}=e,o=this.navigationModel.getItemTitle(r?"other":t,i),s=await this.navigationModel.query.queryVariables(r?"other":t,{categoryId:i});this.onQueryApplied({query:e,breadcrumb:this._prepareBreadcrumb(t,{label:o}),navigation:{mode:t,navigate:r?"none":"categories",itemId:i},variables:{sortType:r||"other"===t?"special":"standard"===t&&"number"==typeof s[0]?.score?"popularity":"default",variables:s}})}_applyMainQuery(e){let{mode:t,browseFilterTag:i,searchMode:r,viewMode:o,goBack:s}=e;this.onQueryApplied({query:e,breadcrumb:this._prepareBreadcrumb(),navigation:{mode:t,navigate:"explore",itemId:"explore"},browse:{mode:t,goBack:s,searchMode:r,viewMode:o,groupFilter:i}})}},Ed=class{constructor(){this.isRangeFilter=!1,this.bitIndex=0,this.matchCount=0,this.totalCount=0,this.dataTree=null,this._enumFilter=null}initialize(e){let t={};e.enumItems.forEach((e=>{let i=this._processEnumItem(e),r=t[i];r||(r=t[i]={id:i,name:pt(i),children:[],selected:!0,_expanded:!0}),r.children.push(e)}));let i=["standardSource","customSource","layersSource"].reduce(((e,i)=>{let r=t[i];return r&&e.push(r),e}),[]);return this.dataTree=new pl(i),this.updateSelection(),this._enumFilter=e,this.id=e.id,this.label=e.label,this.bitIndex=e.bitIndex,i.length>1}_processEnumItem(e){let t=ht(e.value);return t?(e.value=t.value,t.sourceId):"standardSource"}refresh(){let e=this.dataTree.root.children;this.dataTree.clear(),this.dataTree.addNodes(e,null,!0),this.updateSelection()}updateSelection(){this.matchCount=this.dataTree.root.selectCount,this.totalCount=this.dataTree.root.leafCount}isActive(){return this._enumFilter.isActive()}selectAll(){this.dataTree?.select(this.dataTree.root),this.updateSelection()}match(e,t){return this._enumFilter.match(e,t)}},kd=class{constructor(e){this.isRangeFilter=!1,this.rangeMin=0,this.rangeMax=0,this.totalCount=0,this.bitIndex=0,this.matchCount=0,this._hasMissingVariables=!1,this.id=e.id,this.label=e.aliasname||e.name,"Range"!==e.type?(this._index={},this.enumItems=[],e.enumValues.split(",").forEach(this._provideEnumItem.bind(this)),this._match=this._updateEnum,this.activate=this._activateEnum):(this.isRangeFilter=!0,this.rangeMin=+e.rangeMin,this.rangeMax=+e.rangeMax,this._match=this._updateRange,this.activate=this._activateRange)}_provideEnumItem(e){if(!e)return null;let t=e.toLowerCase(),i=this._index[t];return i||(i={id:t,value:e,selected:!0,leafCount:0},this._index[t]=i,this.enumItems.push(i)),i}_updateEnum(e){let t=this._provideEnumItem(e.value);return t?(t.leafCount++,!0):(this._hasMissingVariables=!0,!1)}_updateRange(e){let t=ct(e.value);return t?(this.range?(this.range.min>t.min&&(this.range.min=t.min),this.range.max<t.max&&(this.range.max=t.max)):this.range=t,!0):(this._hasMissingVariables=!0,!1)}activate(){return!1}_activateEnum(){this._match=this._matchEnum;let e=[],t=0;return this.enumItems.forEach((i=>{i.leafCount?e.push(i):delete this._index[i.id],t+=i.leafCount})),this.enumItems=e,t&&(this.isActive=this._isActiveEnum),0!==t&&(this._hasMissingVariables||this.enumItems.length>1)}_activateRange(){return this._match=this._matchRange,!!this.range&&(this.isActive=this._isActiveRange,!isNaN(this.rangeMin)&&this.range.min>this.rangeMin?this.range.min=this.rangeMin:this.rangeMin=this.range.min,!isNaN(this.rangeMax)&&this.range.max<this.rangeMax?this.range.max=this.rangeMax:this.rangeMax=this.range.max,!0)}isActive(){return!1}_isActiveEnum(){return this.enumItems.some((e=>!e.selected))}_isActiveRange(){return this.rangeMin!==this.range.min||this.rangeMax!==this.range.max}selectAll(){if(this.isActive())if(this.isRangeFilter)this.range.min=this.rangeMin,this.range.max=this.rangeMax;else for(let e of this.enumItems)e.selected=!0}match(e,t){let i=e.filteringTags[this.id];return i?this._match(i,e.strictFilterTag===this.id):!t||void 0}_matchEnum(e){return this._index[e.value.toLowerCase()]?.selected}_matchRange(e,t){let i=ct(e.value,!0);return isFinite(i.max)?!t&&i?.min===i.max&&0!==i.max&&(i.max=Math.max(i.max,this.rangeMax)):i.max=this.rangeMax,i&&this.range&&i.min<=this.range.max&&i.max>=this.range.min}updateRange(e){this.isRangeFilter&&(this.range.min=Math.min(Math.max(e.min,this.rangeMin),this.rangeMax),this.range.max=Math.min(Math.max(e.max,this.rangeMin),this.rangeMax))}};function Id(e,t){return e.leafCount===t.leafCount?Io(e.value,t.value):t.leafCount-e.leafCount}function Td(e,t){let i=/^esri/i.test(e.value),r=/^esri/i.test(t.value);return i&&r?(i=/mri/i.test(e.value),r=/mri/i.test(t.value),i===r?Io(e.value,t.value):i?1:-1):i!==r||(i=/^u\.s\./i.test(e.value),r=/^u\.s\./i.test(t.value),i!==r)?i?-1:1:Id(e,t)}function Md(e,t){return Io(Gd(e.value),Gd(t.value))}function Gd(e){return/^male/i.test(e)?"0":/^female/i.test(e)?"1":/^both/i.test(e)?"2":"3"+e}var Ad=class{constructor(){this.applyShowLimit=!0}initialize(e,t){this.variables=e;let i=this.variables.length,r=0,o=new Va;o.totalCount=i,o.bitIndex=r++,o.selectAll=()=>o.update(""),o.isActive=()=>!!o.searchString,this.keywordFilter=o;let s=[];for(let e in t){let o=new kd(t[e]);o.totalCount=i,o.bitIndex=r++,s.push(o)}this._filterHash={},this._orderHash={};for(let t=0;t<i;t++){let i=e[t],r=i.id;this._orderHash[r]=t,this._filterHash[r]=0;for(let e of s)e.match(i)}this.applyFilter(this.keywordFilter),this.filters=[];for(let e of s)if(e.activate()){if("Source"===e.id){let t=new Ed;if(t.initialize(e)){this.filters.push(t),this.applyFilter(t);continue}}this.filters.push(e),this.applyFilter(e)}return r}getVariableOrder(e){return this._orderHash[e.id]}applyFilter(e){let t=1<<e.bitIndex,i=0,r=!e.isActive();for(let o of this.variables){let s=e.match(o,!0);!0===s&&i++,r||s?this._filterHash[o.id]&=~t:this._filterHash[o.id]|=t}e.matchCount=i}match(e){return!this._filterHash[e.id]}getMatchingVariables(){let e=[];for(let t of this.variables)this.match(t)&&e.push(t);return e}prepareRefineData(){let e=this.filters.slice();if(e.sort(((e,t)=>{if(e===t)return 0;let i=!e.isRangeFilter;return i!==!t.isRangeFilter?i?-1:1:i&&"Year"===e.id?-1:i&&"Year"===t.id?1:Io(e.label,t.label)})),this.myDataFilter){let t=this.myDataFilter.customDataFilter;t&&e.unshift(t),this.myDataFilter.dataTree.root.leafCount&&e.unshift(this.myDataFilter)}return this.topRefineFilters&&e.unshift(...this.topRefineFilters),e.forEach((e=>{e.showMatchCount=!0,e.isRangeFilter||this._prepareEnumValues(e)})),this.keywordFilter.id="*",this.keywordFilter.showMatchCount=!0,e.unshift(this.keywordFilter),e}_prepareEnumValues(e){if(e.id!==this.myDataFilter?.id){if(e.id!==this.myDataFilter?.customDataFilter?.id){switch(e.id){case"Year":case"HistoricalVintage":return void e.enumItems.sort(((e,t)=>Io(e.value,t.value,!0)));case"Gender":return void e.enumItems.sort(Md);case"Source":{let t=e=>{let t=e.length&&e[0].id===e[0].value.toLowerCase()?Td:Id;e.sort(t)};if(e.dataTree)return void(e.dataTree.root.children.reduce(((e,i)=>(t(i.children),Math.max(e,i.children.length))),0)>4&&this.applyShowLimit&&(e.showLimit=3));t(e.enumItems)}break;default:!e.noSort&&e.enumItems.sort(Id)}e.enumItems.length>6&&this.applyShowLimit&&(e.showLimit=5)}}else this.applyShowLimit&&(e.showLimit=5)}resetFilters(e){let t=0;for(let i of e)i.isActive()&&(i.selectAll(),t|=1<<i.bitIndex);let i=~t;for(let e of this.variables)this._filterHash[e.id]&=i}removeVariable(e){let t=e.id,i=this.variables.findIndex((e=>e.id===t));i>=0&&(this.variables.splice(i,1),delete this._filterHash[t],this.keywordFilter&&(this.keywordFilter.isActive()?this.applyFilter(this.keywordFilter):this.keywordFilter.matchCount=this.variables.length,this.keywordFilter.totalCount=this.variables.length))}},Pd=class{constructor(e,t){this.totalCount=0,this.matchCount=0,this.totalCount=e.length,this._variables=e,this._storeOptions=t,this.enumItems=[];let i={};for(let t of e)for(let e in this._getSupportedTypes(t))"area"!==e&&(i[e]||this.enumItems.push(i[e]={id:e,value:ut(e),leafCount:0,selected:!0}),i[e].leafCount++)}calculateMatchCount(){if(this.isActive){let e=0;for(let t of this._variables)this.match(t)&&e++;this.matchCount=e}else this.matchCount=this._variables.length}_getSupportedTypes(e){let t={};if(this._storeOptions&&(this._storeOptions.allowReliabilityState&&this._storeOptions.isACSVariable?.(e)&&(t.reliability=!0),this._storeOptions.hideVariableToggles)){return t[e.statefulName&&this._storeOptions.statefulNameToVariableType?.(e.statefulName)||e.variableType||"count"]=!0,t}return t[e.variableType||"count"]=!0,e.averageBase&&(t.average=!0),e.percentBase&&(t.percent=!0),e.indexBase&&(t.index=!0),t}activate(){return this.enumItems.length>1}isActive(){return this.enumItems.some((e=>!e.selected))}selectAll(){for(let e of this.enumItems)e.selected=!0}match(e){let t=this._getSupportedTypes(e);return this.enumItems.some((e=>e.selected&&t[e.id]))}},Ld=class{constructor(e){this.id="newVariablesFilter",this.isRangeFilter=!1,this.noSort=!0,this.bitIndex=0,this.matchCount=0,this.totalCount=0;let t=Ze("DataBrowserNew").dataBrowser.variablesView;this.label=t.variables,this.enumItems=[{id:"new",value:t.sortByNew,leafCount:0,selected:!0},{id:"old",value:t.otherVariables,leafCount:0,selected:!0}];for(let t of e){let e=t.newAndNotable?0:1;this.enumItems[e].leafCount++}this.totalCount=e.length}activate(){return!(!this.enumItems[0].leafCount||!this.enumItems[1].leafCount)}isActive(){return!this.enumItems[0].selected||!this.enumItems[1].selected}match(e){let t=e.newAndNotable?0:1;return this.enumItems[t].selected}selectAll(){this.enumItems[0].selected=this.enumItems[1].selected=!0}},Dd=class{constructor(e){this._refineModel=new Ad,this.store=e}get myDataFilter(){return this._refineModel.myDataFilter}get variables(){return this._refineModel.variables}get refineData(){return this._refineData}initRefineFilters(e,{filters:t,myDataFilter:i,showVariableTypeFilter:r,dataCollectionFilter:o,browseFilter:s}){this._refineData=null,this._refineModel.myDataFilter=null,this._refineModel.topRefineFilters=[],this._refineModel.applyShowLimit=!1,this.dataCollectionFilter=null,this.variableTypeFilter=null,this.newVariablesFilter=null;let a=Ze("DataBrowserNew").dataBrowser.variablesView;if(s){let{tag:i,value:r}=s;e=e.filter((e=>{let t=e.filteringTags[i]?.value===r;return t&&e.customDataCollection&&(t=e.customDataCollection.isShared),t})),delete t[i]}let n=this._refineModel.initialize(e,t);this._refineModel.keywordFilter.label=a.keywordFilterLabel;let l=new Ld(e);if(l.activate()&&(l.bitIndex=n++,this.newVariablesFilter=l,this._refineModel.filters.push(l),this._refineModel.applyFilter(l)),i&&(i.bitIndex=n++,i.label=a.savedListsFilterLabel,i.id="__savedLists",i.enumItems.forEach((e=>{e.value=a["myData"+e.id]})),this._refineModel.myDataFilter=i,this._refineModel.applyFilter(i)),o&&(o.initialize(e),o.activate()&&(o.bitIndex=n++,o.label=a.dataCollectionFilterLabel,o.id="__dataCollectionFilter",this.dataCollectionFilter=o,this._refineModel.applyFilter(o))),r){let t=new Pd(e,this.store);t.activate()&&(t.bitIndex=n++,t.label=a.variableTypeFilterLabel,t.id="__variableTypeFilter",this.variableTypeFilter=t,this._refineModel.topRefineFilters.push(t),this._refineModel.applyFilter(t))}return this._refineData=this._refineModel.prepareRefineData(),e}applyRefineFilter(e){return this._refineModel.applyFilter(e),this.getFilteredVariables()}removeVariableFromRefineData(e){this._refineModel.removeVariable(e)}getFilteredVariables(){return this._refineModel.getMatchingVariables()}resetFilters(){return this._refineModel.resetFilters(this._refineData),this.getFilteredVariables()}getVariableOrder(e){return this._refineModel.getVariableOrder(e)}},Bd=class{constructor(e){this.allowMultipleSelectInGroup=!1,this._selection=[],this.store=e}updateSelection(e,t){let i=e?.slice()||[];(t||!this._isSameSelection(i)&&this._ensureValidSelection(i))&&(this._selection=i,this._cache=null,this.emitSelectionChanged())}_isSameSelection(e){return this._selection.length===e.length&&this._selection.every(((t,i)=>t===e[i]))}addToSelection(e,t){let i=this.getSelectedStatefulName(e);if(i===e)return null;let r=i?this._selection.findIndex((e=>e===i)):this._selection.length,o=this._selection.slice();if(o[r]=e,this._ensureValidSelection(o)){this._selection=o;let i=this.store.getVariable(e).id;return this._addToCache(i,e),!t&&this.emitSelectionChanged(),!0}return!1}_ensureValidSelection(e){return!this.store.ensureValidSelection||this.store.ensureValidSelection(e)}removeFromSelection(e){let t=this.getSelectedStatefulName(e);if(!t)return!1;let i=this._selection.findIndex((e=>e===t));this._selection.splice(i,1);let r=this.store.getVariable(t).id;if(this.allowMultipleSelectInGroup){let t=this._cache[r];delete t[e],Object.keys(t).length||delete this._cache[r]}else delete this._cache[r];return this.emitSelectionChanged(),!0}getSelectionCount(){return this._selection.length}getSelectedStatefulName(e){if(!this._cache){this._cache={};for(let e of this._selection){let t=this.store.getVariable(e)?.id;t&&this._addToCache(t,e)}}let t=this.store.getVariable(e)?.id,i=t&&this._cache[t];return i&&(this.allowMultipleSelectInGroup?i[e]:Object.keys(i)[0])||null}_addToCache(e,t){let i=this.allowMultipleSelectInGroup&&this._cache[e]||{};i[t]=t,this._cache[e]=i}getCurrentSelection(){return this._selection.slice()}emitSelectionChanged(){this.onSelectionChanged(this.getSelectionCount())}onSelectionChanged(e){}},Rd=class{constructor(e){this.nls=Ze("DataBrowserNew").dataBrowser.variablesView,this.selectionLimit=1,this.showVariableInfo=!0,this.expansionCache={},this.store=e,this.refineModel=new Dd(e),this.selectionModel=new Bd(e)}get multipleSelectIsAllowed(){return this.selectionLimit<0||this.selectionLimit>1}get lastQueryId(){let{mode:e,explore:t,categoryId:i,searchString:r}=this.lastQuery,o=[e];return t&&o.push(`e:${t}`),i&&o.push(`c:${i}`),r&&o.push(`s:${r}`),o.join("/")}initRefineFilters(e){let t="customVariables"===this.lastQuery.explore,i=t?{}:this.store.getRefineFilters(this.lastQuery),r=this.store.getDataCollectionFilter(this.lastQuery),o=this.refineModel.initRefineFilters(e.variables,{filters:i,myDataFilter:e.myDataFilter,showVariableTypeFilter:!t,dataCollectionFilter:r,browseFilter:e.browseFilter});return this._popularOrNewGroups=e.popularOrNewGroups,o}prepareVariableTreeData(e,{sortMethod:t,sortType:i,forcedStateName:r}){let o={},s=this.store.hideVariableToggles,a=e.map(((t,i)=>{let a=this._prepareVariableNode(t,r);s&&(e[i]=a.variable);let n=a.group?.states?.names;if(n)for(let e of n)o[e]=!0;return a}));switch(this._masterToggleStates=Object.keys(o).length>1?o:null,this.myDataCache=null,i){case"special":break;case"popularity":case"newVariables":if(t===i)return this._popularOrNewGroups?this._preparePopularOrNewCategories(a):this._preparePopularCategories(e,a);case"default":case"relevance":case"favorites":if("fieldCategory"===t)break;if("newVariables"===t)return this._prepareNewCategories(a);case"custom":return this._sortVariableNodes(e,a,t);case"saved":return this._prepareSavedCategories(a);default:return a}return this._prepareVariableCategories(a)}_prepareVariableNode(e,t){this.store.hideVariableToggles&&(t=null);let i={id:e.id,label:e.description,variable:e,group:this.getToggleGroup(e,t),isNew:!!e.newAndNotable},r=this.selectionModel.getSelectedStatefulName(i.group.value);return r&&(i.selected=!0,i.group.value=r),this.store.hideVariableToggles&&(e.statefulName?r=e.statefulName:r&&(i.variable={...e,statefulName:r}),r&&(i.label=this.store.getDescriptionWithType(r),i.group.value=r),i.group.states=null),i}_prepareVariableCategories(e){let t={};for(let i of e){let e=i.variable.fieldCategory,r=t[e];r||(r={id:e,label:e,children:[],newCount:0},t[e]=r),i.isNew&&r.newCount++,r.children.push(i)}let i=Object.values(t);return Po(i,{attribute:"label"}),i}_sortVariableNodes(e,t,i){let r;switch(i){case"oldest":t.reverse();case"newest":return t;case"alphabetical":r={attribute:"description"};break;case"unalphabetical":r={attribute:"description",descending:!0};break;default:r={attribute:"score",descending:!0}}return function(e,t,i){let r=e.map(((e,t)=>({value:e,index:t}))),o=Ao(t,i);return r.sort(((e,t)=>o(e.value,t.value))),r.map((e=>e.index))}(e,r).forEach(((e,i)=>t[e].sortIndex=i)),Po(t,{attribute:"sortIndex"}),t}_preparePopularOrNewCategories(e){let t=this._popularOrNewGroups,i=t.map((e=>({id:e.id,label:e.name,children:[],newCount:0})));for(let r of e){let e=Bt(r.variable.id),o=t.findIndex((t=>{let i=t.popularityCache[e];return i&&(r.variable.score=i),i}));r.isNew&&i[o].newCount++,i[o].children.push(r)}return i.filter((e=>!!e.children.length&&(e.children.sort(((e,t)=>t.variable.score-e.variable.score)),!0)))}_preparePopularCategories(e,t){this._sortVariableNodes(e,t,"popularity");let i=[{id:"popularVariables",label:this.nls.popularVariables,children:[],newCount:0},{id:"otherVariables",label:this.nls.otherVariables,children:[],newCount:0}];return t.forEach((e=>{let t=e.variable.score>0?0:1;e.isNew&&i[t].newCount++,i[t].children.push(e)})),i}_prepareNewCategories(e){let t=[{id:"newVariables",label:this.nls.newVariables,children:[],newCount:0},{id:"otherVariables",label:this.nls.otherVariables,children:[],newCount:0}];return e.forEach((e=>{let i=e.isNew?0:1;e.isNew&&t[i].newCount++,t[i].children.push(e)})),t}_prepareSavedCategories(e){let t=this.myDataCache={};for(let i of e)i.relatedIds=[],t[i.variable.id]=i,t[i.variable.fullName]=i;let i=[];return this.refineModel.myDataFilter.enumItems.forEach((e=>{if(!e.cache)return;let r=this.nls["myData"+e.id];(e.children||[e]).forEach((e=>{if(!e.selected)return;let o,s=[],a=0;for(let i in e.cache){let r=t[i];if(r){let t=i+":"+e.id;r.relatedIds.push(t),s.push({...r,id:t}),r.variable.deprecation&&(o=r.variable.deprecation),r.isNew&&a++}}s.length&&i.push({id:e.id,label:r+(e.name?" - "+e.name:""),children:s,newCount:a,deprecation:o?o+"List":null})}))})),i}createSearchActionString(e){return`search-${e.semanticSearchApplied?null===e.categoryId?"server-and-client":"standard"===e.mode?"server":"client":"client"}-${null===e.categoryId?"all":e.mode}-variables${this.refineModel.variables?"":"-no-result"}-${e.searchString.replace(/\s+/g,"-")}`}sendSearchActionTelemetry(e){if(this.store.telemetryModel){let t=e?0:this.refineModel.variables.length,i=e||this.lastQuery;this.store.telemetryModel.sendSearchEvent(i,t)}}sendSelectVariableActionTelemetry(e,t){if(this.store.telemetryModel){let i={count:this.refineModel.variables.length,filtered:this.refineModel.getFilteredVariables().length,lastQuery:this.lastQuery,initialIndex:this.refineModel.getVariableOrder(e.variable)};i.count!==i.filtered&&(i.keyword=this.refineModel.refineData[0].searchString),this.store.telemetryModel.sendSelectEvent(e,t,i)}}canShowCalculationStates(){return!!this._masterToggleStates}disableCalculationState(e){return!this._masterToggleStates?.[e]}getToggleGroup(e,t){let i=this.store.getToggleGroup(e);return t&&kn(i,t),i}showLimitAlert(){this.store.showLimitAlert(this.selectionLimit)}},Fd=class{constructor(e){this.categoryViewMode="card",this.navigationModel=e,this.queryModel=new Nd(e),this.queryModel.onQueryApplied=e=>this.onQueryApplied(e),this.variableModel=new Rd(e.store)}reset(e){this.navigationModel.reset(),this.applyQuery(e||{mode:"standard"})}getExploreCategories(){let e=["explore","allVariables"],t=this.navigationModel;function i(i){t.canShowUserVariables(i)&&e.push(i)}i("favorites"),i("customVariables"),i("savedLists");let r=Ze("DataBrowserNew").dataBrowser;return e.map((e=>({id:e,categoryId:e,icon:xa(e),label:r[e]})))}applyQuery(e){return this.queryModel.applyQuery(e)}onQueryApplied(e){}set selectionLimit(e){this.variableModel.selectionLimit=e}get selectionLimit(){return this.variableModel.selectionLimit}set allowMultipleSelectInGroup(e){this.variableModel.selectionModel.allowMultipleSelectInGroup=e}get allowMultipleSelectInGroup(){return this.variableModel.selectionModel.allowMultipleSelectInGroup}set dndHandler(e){this.variableModel.dndHandler=e}set showVariableInfo(e){this.variableModel.showVariableInfo=e}},Vd=Object.getOwnPropertyDescriptor,Od=class extends xd{constructor(e){e.viewModel||=new Fd(new qa(e.variables)),super(e)}set selection(e){if(!this.viewModel.variableModel.multipleSelectIsAllowed)return;let t=this.variables.manager,i=this.variables.allowReliabilityState,r=this.viewModel.variableModel.selectionModel,o=r.allowMultipleSelectInGroup,s={},a=e.reduce(((e,r)=>{let a=t.derivativeNameToStateful(r,!i),n=Rt(a),l=this.variables.get(a);if(l){a=(Tt(l,i)?n:"")+l.fullName;let t=o?a:l.id;s[t]||(s[t]=!0,e.push(a))}return e}),[]),n=this.viewModel.variableModel.selectionLimit;n>0&&a.length>n&&(a.length=n),r.updateSelection(a)}};Od=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Vd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Od);var Hd=class{constructor(e){this.allowDndWithinContainer=!0,this.horizontalMarkClass="esriGEDndMarkHorizontal esriGEHighlighted",this.verticalMarkClass="esriGEDndMarkVertical esriGEHighlighted",this.dropIntoChildHighlightClass="esriGEHighlighted",this.ghostBoxClass="esriGEDndWidgetGhostBox",this.showDndTooltip=!0,this._scrollStep=10,ds(this,e),this._configureHandlersForDnDContainer()}isDragging(){return this._isDragging}lockDragging(){this._isLocked=!0}unlockDragging(){this._isLocked=!1}_setIsDragging(e){this._isDragging=e}_configureHandlersForDnDContainer(){if(this._mouseDownHandler?.remove(),!this.dndContainer)return;let e;Li(this.dndContainer,"esriGENonSelectable"),this._mouseDownHandler=es({node:this.dndContainer,onMouseDown:t=>{if(this._isDragging||this._isLocked||/^calcite-input$/i.test(t.target.tagName))return!1;e=this._getDnDHoveredChildren(!0);let i=this._getMovableChildren();return!(!e?.length||!i?.length)},onDragStarted:()=>!e||e.some((e=>!e.parentElement))?(e=null,!1):(this._startDnd(e,!0),this.onDndStart(e),!1)})}_getDnDHoveredChildren(e){let t=this._getMovableChildren();if(!t)return null;for(let i=0,r=t.length;i<r;i++){let r=t[i];if(r!==this._highlightMark&&this.isDnDHoverableElement(r)&&(!e||this.isDragEnabled(r))&&(e&&this.draggableElementProperties?this.draggableElementProperties.map((e=>r[e])):[r]).some((e=>this._isMouseOverChild(e))))return e?this._getDnDSelectedChildren(r):[r]}return null}_getDnDSelectedChildren(e){return this.supportSelectedDnd&&this.getSelector().isChildSelected(e)?this.getSelector().getSelectedChildren().filter((e=>this.isDragEnabled(e)&&e!==this._highlightMark)):[e]}_startDnd(e,t){if(this._isDragging)return;this._setIsDragging(!0),this._currentChildren=e,this._currentDnDTarget=null;let i,r=this;function o(){!i&&t&&(i=r._createTooltip(e));let o=r._getDnDHoveredChildren(!1);o?.[0]&&r._tryHighlightElement(o[0]),r._onMouseMove(),r.allowScrolling&&r._tryScrolling()}let s=wi(document.body,["mousemove","touchmove"],o),a=wi(document.body,["mouseup","touchend"],(()=>{this._endDnd(e),l()})),n=wi(document.body,"keyup",(t=>{t.key===Xo.Escape&&(l(),this._onDndCancel(e))})),l=()=>{(async function(){try{let e=er("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});ir(e,document.body),e.select(),e.remove(),await _i("next-frame")}catch{}})(),ia(i),i=null,s.remove(),a.remove(),n.remove(),this._tryHighlightElement(null),this._currentChildren=null,this._currentDnDTarget=null,this._setIsDragging(!1),this._cleanUpDnd()};o()}_cleanUpDnd(){}_createTooltip(e){return this.showDndTooltip&&ta({node:this._renderDnDBox(e),offset:{x:0,y:0},toMouseCursor:!0})}_renderDnDBox(e){let t,i=er("div");return this.wrapperClass&&Li(i,this.wrapperClass),i.style.position="relative",i.style.width="0px",i.style.height="0px",i.style.backgroundColor="transparent",i.style.zIndex="10000",e.forEach(((e,r)=>{let o=er("div",{class:this.ghostBoxClass,innerHTML:"function"==typeof this.renderDraggedItem?this.renderDraggedItem(e):this.renderDraggedItem?e.innerHTML:""}),s=$i(e);o.style.width=s.w+"px",o.style.height=s.h+"px",0===r&&(t=s.y),o.style.left=s.x-$r().clientX+"px",o.style.top=t-$r().clientY+"px",t+=s.h+5,o.style.position="absolute",o.style.cursor="move",ir(o,i)})),i}_getPrevItem(e){let t=this._getChildDnDContainer(e);return t&&t.children[ur(t,e)-1]}_getNextItem(e){let t=this._getChildDnDContainer(e);return t&&t.children[ur(t,e)+1]}_endDnd(e){function t(t){return e.includes(t)}this._currentDnDTarget&&!t(this._currentDnDTarget)?("before"===this._dropPosition&&t(this._getPrevItem(this._currentDnDTarget))||"after"===this._dropPosition&&t(this._getNextItem(this._currentDnDTarget))||(e.some((e=>e.parentNode!==this._getChildDnDContainer(e)))||this.allowDndWithinContainer)&&this._childrenMovePreprocessor(e,this._currentDnDTarget,this._dropPosition)&&(e.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),this._placeChildren(e,this._currentDnDTarget,this._dropPosition)),this._onDndEnd(e)):this._onDndEnd(e)}_placeChildren(e,t,i){this.onDndPreHappen(),"before"===i&&(e=e.slice().reverse());let r=[];e.forEach((e=>{ir(e,t,"into"===i?null:i),r.push({child:e,refChild:t,position:i}),t=e})),this.supportSelectedDnd&&this.getSelector().selectChild(null),this.onDndHappened(r)}_tryHighlightElement(e){if(this._highlightMark&&(sr(this._highlightMark),this._highlightMark=null,this._dropPosition=null),this._highlightedDropIntoChild&&(Di(this._highlightedDropIntoChild,this.dropIntoChildHighlightClass),this._highlightedDropIntoChild=null),!e||e.parentNode!==this._getChildDnDContainer(e))return;let t,i=$i(e),r=$r().clientX,o=$r().clientY;t=this.isDropIntoEnabled(e)?"into":this.isHorizontal?i.x+i.w/2>r?"before":"after":i.y+i.h/2>o?"before":"after",this._dropPosition=t,(e.parentNode!==this._getChildDnDContainer(e)||this.allowDndWithinContainer)&&("into"===t?(this._highlightedDropIntoChild=e,Li(this._highlightedDropIntoChild,this.dropIntoChildHighlightClass)):(this._highlightMark=this._createHighlightMark(e),this._placeDropMarkAroundChild(this._currentChildren?.[0],e,this._dropPosition)));let s=this._currentDnDTarget!==e;this._currentDnDTarget=e,e&&s&&this.onDndOverTargetFound(e)}_createHighlightMark(e){let t=er("div",{class:this.isHorizontal?"esriGEInline "+this.horizontalMarkClass:this.verticalMarkClass});return this.isHorizontal&&(t.style.height=e.offsetHeight+"px"),t}getScrollContainer(){return null}getScrollPosition(){return null}setScrollPosition(e){}_tryScrolling(){let e=$i(this.getScrollContainer()),t=$r();if(t.clientX<=e.x||t.clientX>=e.x+e.w)this._scrollDirection=null;else{let i=.125*e.h,r=e=>this._scrollStep=e>=i?0:Math.ceil((i-e)**.625+1);this._scrollDirection=r(t.clientY-e.y)?"up":r(e.y+e.h-t.clientY)?"down":null}this._scrollDirection?this._scrollDnDHandler||(this._scrollDnDHandler=setTimeout((()=>{if(this._scrollDnDHandler=null,this._scrollDirection){let e=this.getScrollPosition();e.y+="up"===this._scrollDirection?-this._scrollStep:this._scrollStep,this.setScrollPosition(e)}}),10)):this._cleanUpScrolling()}_cleanUpScrolling(){clearInterval(this._scrollDnDHandler),this._scrollDnDHandler=null}isDragEnabled(e){return!0}isDropEnabled(e,t,i){return!0}isDnDHoverableElement(e){return!0}isDropIntoEnabled(e){return!1}_getChildDnDContainer(e){return this.dndContainer}_getMovableChildren(){return this.dndContainer?.children}_isMouseOverChild(e){return Qr(e)}_childrenMovePreprocessor(e,t,i){return e.every((e=>this.isDropEnabled(e,t,i)))}_placeDropMarkAroundChild(e,t,i){this.isDropEnabled(e,t,i)&&ir(this._highlightMark,t,"into"===i?null:i)}_onMouseMove(){this.onMouseMove()}_onDndEnd(e){this._cleanUpScrolling(),this.onDndEnd(e)}_onDndCancel(e){this.onDndCancel(e)}onDndStart(e){}onDndOverTargetFound(e){}onMouseMove(){}onDndPreHappen(){}onDndEnd(e){}onDndHappened(e){}onDndCancel(e){}destroy(){this._mouseDownHandler?.remove(),this._mouseDownHandler=null}},zd=Object.getOwnPropertyDescriptor,Wd=(e,t,i,r)=>{for(var o,s=r>1?void 0:r?zd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s},Ud=class extends Hd{constructor(e,t){super(e),this.ghostBoxClass="esriGEFlowListDndGhostBox",this._list=t,this.allowScrolling=!0,this.getScrollContainer=()=>this._list.domNode,this.getScrollPosition=()=>({y:this._list.domNode.scrollTop}),this.setScrollPosition=e=>this._list.domNode.scrollTop=e.y}_setIsDragging(e){super._setIsDragging(e),Fi(this._list.domNode,"isDnD",e)}_renderDnDBox(e){let t=e[0],i=this._list.queryItem({node:t}).item;if(!i)return null;this._activePresentationWrapper={};let r=this.dndGhostRenderer?this.dndGhostRenderer(i):this._list.itemRenderer.createPresentation(i,!1,null,this._list,this._activePresentationWrapper);r.style.cursor="move";let o=Ji(t);r.style.width=o.w+"px",r.style.height=o.h+"px";let s=er("div",{class:this.ghostBoxClass}),a=$i(t,!0);return s.style.left=a.x-$r().clientX-15+"px",s.style.top=a.y-$r().clientY-Wi(t,"marginTop")+"px",ir(r,s),lr(t),s}_placeChildren(e,t,i){super._placeChildren(e,t,i);let r=e[0],o=this._list.queryItem({node:r}).item,s=this._list.queryItem({node:t}).item,a=this._list.selectedItem;this._list.selectedItem=null;let n=this._list.items,l=function(e,t,i,r){let o=Array.isArray(t)?t:[t];if(o.includes(i))return e.slice();let s=[];for(let t of e)if(!o.includes(t))if(t===i)if("before"===r)s.push(...o),s.push(t);else{if("after"!==r)throw new Error(`Invalid position: ${r}`);s.push(t),s.push(...o)}else s.push(t);return s}(n,o,s,i);o&&s&&l.length===n.length?this._list.items=l:this._list.refresh(),this._list.selectedItem=a}_createHighlightMark(e){let t=er("div",{class:this.isHorizontal?"esriGEFlowListDndMarkHorizontal esriGEHighlightedDark":"esriGEFlowListDndMarkVertical esriGEHighlightedDark"});return t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",t}_cleanUpDnd(){super._cleanUpDnd(),this._activePresentationWrapper?.destroyPresentation?.(),this._activePresentationWrapper=null}_onDndEnd(e){super._onDndEnd(e),dr(e)}_onDndCancel(e){super._onDndCancel(e),dr(e)}};Ud=Wd([p()],Ud);var jd=class extends ed{constructor(e){super(e),this.stopMouseEventPropagation=!1}postCreate(){super.postCreate(),this.dndManager=new Ud({isHorizontal:this.isHorizontal,dndContainer:this.itemsDiv},this),this.addHandles(this.dndManager)}};jd=Wd([p()],jd);var qd=Object.getOwnPropertyDescriptor,$d=class extends kr{constructor(e){super(e),this.class="ge-shopping-cart",this.nls=Ze("DataBrowserNew").dataBrowser,this.showApplyButton=!1,this.showSaveButton=!1,this.showRemoveAllButton=!1,this._pool=new Ol({types:["action","toggle"]})}get isSaveAllowed(){return this.showSaveButton}postCreate(){!this.applyButtonLabel&&(this.applyButtonLabel=this.nls.mapVariables),!this.saveButtonLabel&&(this.saveButtonLabel=this.nls.saveList),!this.removeAllButtonLabel&&(this.removeAllButtonLabel=this.nls.removeAllVariables);let e=er("div",{class:"shopping-cart-inner-container"});er("div",{textContent:this.nls.selectedVariables},e),this._countLabel=er("div",{class:"variable-count",textContent:"0"},e),this._shoppingCartButton=Co({class:"shopping-cart-button",appearance:"solid",kind:"neutral",scale:"m",round:!0,ariaLabel:this.nls.selectedVariables,onClick:()=>{this._popupH.isOpen()?this._popupH.close():this._popupH.open()}},e,this.domNode);let t=this._createContent();this._popupH=to({title:this.nls.selectedVariables,closable:!0,content:t,onBeforeOpen:()=>{this._updateList(),this._setMaxHeight()},closeOnClickOutside:!1,disableOpenOnClick:!0,anchor:this._shoppingCartButton.domNode,placement:"bottom-end"}),this.addHandles(this._popupH),this._updateButton(),this._setUpDnD(),Zs(this.domNode)}_setUpDnD(){let e=this._list;e.dndManager.onDndHappened=([t])=>{let i=e.queryItem({node:t.child}).item,r=e.queryItem({node:t.refChild}).item;this._moveItem(i.index,r.index)}}_setMaxHeight(){let e=this.domNode.querySelector(".buttons-container"),t=e?Qi(e).h:0,{maxHeight:i}=Do({openButton:this._shoppingCartButton.domNode,placement:"bottom-end",allowedMinHeight:43+t+185,popupMargins:{b:10}}),r=Math.floor((i-43-t)/37);this.domNode.querySelector(".shopping-cart-list").style.maxHeight=37*r+"px"}_createContent(){let e=er("div",{class:"shopping-cart-popup"});return this._list=new jd({idProperty:"index",hasSelectableItems:!1,keepScrollPosition:!0,itemRenderer:new Xl({createPresentation:(e,t,i)=>this._renderItem(e,i)})}).placeAt(er("div",{class:"shopping-cart-list"},e)),this.addHandles(this._list),this._footerRequired()&&this._renderFooter(er("div",{class:"buttons-container"},e)),e}_renderItem(e,t){let i=er("div",{class:"ge-flex-row shopping-cart-row"},t);if(_a({class:"row-drag-icon",scale:"m",size:16,icon:"drag"}).placeAt(i),this._addSpacer(i),er("div",{class:"esriGETrimWithEllipsis variable-label",textContent:e.label},i),e.group.states){this._addSpacer(i);let t=this._pool.get("toggle",(()=>{let e=new $l({useButtons:!0});return wi(e.domNode,"click",(e=>e.stopPropagation())),e}),e);t.setStates(e.group.states),t.value=e.group.value,t.onChange=()=>{e.group.value=t.value,this.viewModel.syncSelectionWithItems(this._list.items),this.emit("selection",{source:"shoppingCart",action:"update",selection:this.viewModel.getCurrentSelection(),newStatefulName:t.value})},t.placeAt(i)}return this._renderAdditionalActions(e,i),this._addSpacer(i),this._provideActionIcon({icon:"x-circle",ariaLabel:this.nls.removeVariable},i).onClick=()=>{let t=this._list.items.filter((t=>t.index!==e.index));this.viewModel.syncSelectionWithItems(t),this._updateButton(),this._emitSelection({source:"shoppingCart",action:"update",selection:this.viewModel.getCurrentSelection()})},i}_provideActionIcon({icon:e,ariaLabel:t},i){let r=this._pool.get("action",(()=>bo({icon:e,ariaLabel:t,padding:"2px",tooltip:!0,tooltipParams:{placement:"top-end"}})));return r.icon=e,r.ariaLabel=t,r.domNode.style.visibility="",r.placeAt(i),r}_renderAdditionalActions(e,t){let i=e.index;this._addSpacer(t);let r=this._provideActionIcon({icon:"chevron-up",ariaLabel:this.nls.moveUp},t);r.onClick=()=>this._moveItem(i,i-1),!i&&(r.domNode.style.visibility="hidden"),this._addSpacer(t);let o=this._provideActionIcon({icon:"chevron-down",ariaLabel:this.nls.moveDown},t);o.onClick=()=>this._moveItem(i,i+1),i===this.viewModel.getSelectionCount()-1&&(o.domNode.style.visibility="hidden")}_footerRequired(){return this.showSaveButton||this.showApplyButton||this.showRemoveAllButton}_renderFooter(e){this.showRemoveAllButton&&new uo({class:"ge-margin-inline-4",appearance:"outline",kind:"brand",text:this.removeAllButtonLabel,onClick:()=>{this._popupH.close(),this.updateSelection([],"shoppingCart")}}).placeAt(e),this.showSaveButton&&new uo({class:"ge-margin-inline-4",appearance:"outline",kind:"brand",text:this.saveButtonLabel,onClick:()=>{this._popupH.close(),this.viewModel.syncSelectionWithItems(this._list.items),this.saveSelection()}}).placeAt(e),this.showApplyButton&&new uo({class:"ge-margin-inline-4",appearance:"solid",kind:"brand",text:this.applyButtonLabel,onClick:()=>this.applyShoppingCart()}).placeAt(e)}applyShoppingCart(){this._popupH.close(),this.viewModel.syncSelectionWithItems(this._list.items),this._emitSelection({source:"shoppingCart",action:"apply",selection:this.viewModel.getCurrentSelection()})}_addSpacer(e){return er("div",{class:"variable-spacer"},e)}_updateButton(){let e=this.viewModel.getSelectionCount();this._shoppingCartButton.disabled=!e,Fi(this._shoppingCartButton.domNode,"has-selected-variables",!!e),this._countLabel.textContent=e+"",this._popupH.isOpen()&&(e?this._updateList():this._popupH.close())}_updateList(){this._pool.poolAllWidgets(),this._list.items=this.viewModel.getShoppingCartItems().filter(((e,t,i)=>0!==Object.keys(e).length))}_moveItem(e,t){t!==e&&(this.viewModel.moveItem(e,t),this._emitSelection({source:"shoppingCart",action:"order",selection:this.viewModel.getCurrentSelection()}),this._updateList())}updateSelection(e,t){"dataBrowser"===t&&(e=this.viewModel.store.prepareSelection?.(e)||e),this.viewModel.updateSelection(e),this._updateButton(),this._emitSelection({source:t,action:"update",selection:this.viewModel.getCurrentSelection()}),this.onUpdateSelection()}_emitSelection(e){this.emit("selection",e)}saveSelection(){this.viewModel.getSelectionCount()&&this.onSave({selection:this.viewModel.getCurrentSelection(),calculators:this.viewModel.getSelectedCalculators()})}tryOpenPopup(){return this._shoppingCartButton.disabled?null:(this._popupH.isOpen()||this._popupH.open(),this._popupH)}onSave(e){}onUpdateSelection(){}};$d=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?qd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],$d);var Qd=class{constructor(e){this._selection=[],this.store=e}updateSelection(e){this._selection=e?.slice()||[]}getShoppingCartItems(){let e=this.store,t=this.hideVariableToggles||e.hideVariableToggles;return this._selection.map(((e,i)=>{if(this.store.getShoppingCartItemInfo(e,t)){let{label:r,group:o}=this.store.getShoppingCartItemInfo(e,t);return o.value=e,{label:r,group:o,index:i}}return{}}))}getSelectedCalculators(){return this._selection.map((e=>this.store.statefulNameToCalculator(e)))}getCurrentSelection(){return this._selection.slice()}getSelectionCount(){return this._selection.length}syncSelectionWithItems(e){this._selection=e.map((e=>e.group.value))}moveItem(e,t){let i=this._selection.splice(e,1);this._selection.splice(t,0,i[0])}},Yd=Object.getOwnPropertyDescriptor,Xd=class extends $d{constructor(e){e.viewModel||=new Qd(new Ea(e.variables)),super(e)}};Xd=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Yd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Xd);var Jd=Object.getOwnPropertyDescriptor,Kd=class extends kr{constructor(e,t){super(e,"string"==typeof t?document.getElementById(t):t),this._templateString='<div class="ge-data-browser-panel ge-flex-spacer">\n    <div class="data-browser-header ge-flex-row" data-attach-point="_header"></div>\n    <div data-attach-point="_content"></div>\n    <div class="ge-flex-row-end">\n      <div class="data-browser-footer ge-flex-row-top" style="padding-right: 0px;" data-attach-point="_export"></div>\n      <div class="data-browser-footer ge-flex-row-end" style="padding-left: 5px;" data-attach-point="_footer"></div>\n    </div>\n    </div>',this.countryBox="countries",this.shoppingCart=!0,this.showShoppingCartApplyButton=!0,this.selectionLimit=-1,this.derivativeSelectionMode="single",this.compactView=!1}postCreate(){this._createDataBrowser(),this._createHeader(),this._createFooter()}_createDataBrowser(){this.variables||=new Ua;let e=new qa(this.variables),t=new Fd(e);switch(t.selectionLimit=this.selectionLimit,this.derivativeSelectionMode){case"none":e.store.hideVariableToggles=!0;break;case"multiple":t.variableModel.multipleSelectIsAllowed&&(t.allowMultipleSelectInGroup=!0)}this.dataBrowserBase=new Od({class:"ge-flex-spacer",variables:this.variables,viewModel:t,useCompactNavigation:()=>this.compactView,standardVariablesTitle:Ze("DataBrowserNew").geDataBrowser.variables,onApply:({selection:e})=>{this._onApply(e)},onUpdated:({isVariableView:e})=>{this._countrySelect&&hr(this._countrySelect.domNode,!e)}}).placeAt(this._content,"replace"),this.addHandles(this.dataBrowserBase)}_createHeader(){er("div",{class:"title",innerHTML:this.title||Ze("DataBrowserNew").dataBrowser.dataBrowser},this._header),"none"!==this.countryBox&&this._createCountryBox(),this._createShoppingCart()}_createCountryBox(){let e=er("div",{class:"country-select"},this._header),t="hierarchies"===this.countryBox;this._countrySelect=new ba({class:t?"country-box ge-flex-column-center":"",globalCountryID:"_",allowHierarchies:t,openButtonParams:{scale:"s",style:{height:t?"28px":"32px"}},onChange:()=>this._synchronize(this._countrySelect.value)}).placeAt(e),this.addHandles(this._countrySelect)}_createShoppingCart(){let e=this.dataBrowserBase.viewModel,t=er("div",{class:"shopping-container"},this._header);!this.shoppingCart||!e.variableModel.multipleSelectIsAllowed||(this._shoppingCart=new Xd({variables:this.variables,viewModel:new Qd(this.dataBrowserBase.viewModel.variableModel.store),showApplyButton:this.showShoppingCartApplyButton,applyButtonLabel:this._getApplyButtonLabel()}).placeAt(t),this.addHandles(this._shoppingCart),e.allowMultipleSelectInGroup&&(this._shoppingCart.viewModel.hideVariableToggles=!0),e.variableModel.shoppingCartNode=this._shoppingCart.domNode,this.addHandles(this._shoppingCart.on("selection",(e=>this.dataBrowserBase.updateSelection(e)))),this.dataBrowserBase.syncShoppingCart=e=>this._shoppingCart.updateSelection(e,"dataBrowser"))}_createFooter(){let e=this.dataBrowserBase.viewModel.selectionLimit;!1!==this.onCancel&&(this.cancelButton=xo({text:Ze("widgets").calcite.buttons[e?"cancel":"close"],kind:"brand",appearance:"outline-fill",onClick:()=>this.onCancel&&this.onCancel()},this._footer)),(e<0||e>1)&&(this.applyButton=xo({text:this._getApplyButtonLabel(),kind:"brand",appearance:"solid",disabled:!0,onClick:()=>{this._onApply(this.dataBrowserBase.viewModel.variableModel.selectionModel.getCurrentSelection())}},this._footer),this.dataBrowserBase.viewModel.variableModel.selectionModel.onSelectionChanged=e=>{this.applyButton.disabled=!e})}_getApplyButtonLabel(){return this.applyButtonText||Ze("widgets").calcite.buttons.apply}async launch(){let e=await Gr(this.domNode,(ri||(ri=ni("Geoenrichment/Countries").then((async e=>{let t=e.countries;try{let e=(await ni("Geoenrichment/Regions")).regions;t.push(...e)}catch{}return t}))),ri));this._countries=this._countrySelect?this._countrySelect.setCountries(e):dt(e,"id");let t=this.countryID?{countryID:this.countryID,hierarchyID:"countries"===this.countryBox?null:this.hierarchyID}:{countryID:"_",hierarchyID:""};return this._countrySelect&&(this._countrySelect.value=t),this._synchronize(this._countrySelect?.value||t,this.selection||[])}async _synchronize(e,t){let i=this._countries[e.countryID],r=ga(i?.hierarchies,e.hierarchyID);ci(i,r?.ID),await Gr(this.dataBrowserBase.domNode,this.variables.synchronize()),this.countryID=pi(),this.hierarchyID=ui(),t?this.dataBrowserBase.resize():this.dataBrowserBase.launch(),this.dataBrowserBase.selection=t||[],this._shoppingCart.updateSelection(t||[])}resize(){this._countries&&this.dataBrowserBase.resize()}_onApply(e){let t=this.variables.manager;this.onApply({countryID:this.countryID,hierarchyID:this.hierarchyID,selection:e.map((e=>t.statefulNameToDerivative(e)))})}onApply(e){}};Kd=((e,t,i,r)=>{for(var o,s=r>1?void 0:r?Jd(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=o(s)||s);return s})([p()],Kd);var Zd=On`html{--ge-theme-color: #0079c1;--ge-theme-color-dark: #005e95;--ge-font-size--4: 10px;--ge-font-size--3: 11px;--ge-font-size--2: 12px;--ge-font-size--1: 13px;--ge-font-size: 14px;--ge-font-size-1: 15px;--ge-font-size-2: 16px;--ge-font-size-3: 17px;--ge-font-size-4: 18px;--ge-font-size-5: 19px;--ge-font-size-6: 20px;--ge-font-size-7: 21px;--ge-font-size-8: 22px;--ge-font-size-9: 23px;--ge-font-size-10: 24px;--ge-font-weight-light: 300;--ge-font-weight: 400;--ge-font-weight-medium: 500;--ge-font-weight-demi-bold: 600;--ge-font-weight-bold: 700;--ge-report-player-z-index: 150;--ge-report-player-data-drilling-z-index: 151;--ge-report-player-background: #353535}.Anim_Common{animation-duration:.3s;animation-fill-mode:forwards}.Anim_FlyingObj{position:absolute;z-index:1;margin:0}.Anim_FadeIn{animation-name:Anim_FadeIn}@keyframes Anim_FadeIn{0%{opacity:0}to{opacity:1}}.Anim_FadeOut{animation-name:Anim_FadeOut}@keyframes Anim_FadeOut{0%{opacity:1}to{opacity:0}}.Anim_SlideStart{animation-name:Anim_SlideStart}@keyframes Anim_SlideStart{0%{margin-inline-start:0}to{margin-inline-start:-100%}}.Anim_SlideEnd{animation-name:Anim_SlideEnd}@keyframes Anim_SlideEnd{0%{margin-inline-start:-100%}to{margin-inline-start:0}}.esriGEPaginationArrowLeft{background-repeat:no-repeat;background-size:contain;width:32px;height:70px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e");display:inline-block;cursor:pointer}.esriGEPaginationArrowLeft:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGEPaginationArrowLeft.disabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e");cursor:default}.esriGEPaginationArrowRight{background-repeat:no-repeat;background-size:contain;width:32px;height:70px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e");display:inline-block;cursor:pointer}.esriGEPaginationArrowRight:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGEPaginationArrowRight.disabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e");cursor:default}.esriGEAddButton{background-repeat:no-repeat;background-size:contain;width:16px;height:16px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%236F6F6F'%20d='M15%207v1H8v7H7V8H0V7h7V0h1v7h7z'/%3e%3c/svg%3e");display:inline-block;cursor:pointer}.esriGEAddButton.withHover:hover:not(.disabled){background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%230079c1'%20d='M15%207v1H8v7H7V8H0V7h7V0h1v7h7z'/%3e%3c/svg%3e")}.esriGERoundRemoveButton{background-repeat:no-repeat;background-size:contain;width:16px;height:16px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%236F6F6F'%20d='M7.5.175a7.325%207.325%200%20100%2014.65%207.325%207.325%200%20000-14.65zM7.5%2014A6.508%206.508%200%20011%207.5C1%203.916%203.916%201%207.5%201S14%203.916%2014%207.5%2011.084%2014%207.5%2014zm3.535-9.328L8.207%207.5l2.828%202.828-.706.708L7.5%208.207l-2.828%202.828-.707-.706L6.792%207.5%203.964%204.672l.708-.707L7.5%206.792l2.828-2.828.708.707z'/%3e%3c/svg%3e");display:inline-block;cursor:pointer}.esriGERoundRemoveButton.withHover:hover:not(.disabled){background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%230079c1'%20d='M7.5.175a7.325%207.325%200%20100%2014.65%207.325%207.325%200%20000-14.65zM7.5%2014A6.508%206.508%200%20011%207.5C1%203.916%203.916%201%207.5%201S14%203.916%2014%207.5%2011.084%2014%207.5%2014zm3.535-9.328L8.207%207.5l2.828%202.828-.706.708L7.5%208.207l-2.828%202.828-.707-.706L6.792%207.5%203.964%204.672l.708-.707L7.5%206.792l2.828-2.828.708.707z'/%3e%3c/svg%3e")}.esriGECloseCrossButton{width:16px;height:16px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%236F6F6F'%20d='M8.717%208l5.304%205.303-.707.707L8.01%208.707%202.707%2014.01%202%2013.303%207.303%208%202%202.697l.707-.707L8.01%207.293l5.304-5.303.707.707L8.718%208z'/%3e%3c/svg%3e");background-position:center;background-repeat:no-repeat;background-size:contain;display:inline-block;cursor:pointer}.esriGECloseCrossButton.withHover:hover:not(.disabled){background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%230079c1'%20d='M8.717%208l5.304%205.303-.707.707L8.01%208.707%202.707%2014.01%202%2013.303%207.303%208%202%202.697l.707-.707L8.01%207.293l5.304-5.303.707.707L8.718%208z'/%3e%3c/svg%3e")}.esriGEEditButton{background-repeat:no-repeat;background-size:contain;width:16px;height:16px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%236F6F6F'%20d='M15.732%201.57L14.43.267c-.36-.36-.938-.364-1.329.026l-1.444%201.444-9.773%209.774-1.849%204.004a.343.343%200%2000.06.39.344.344%200%2000.389.059l4.003-1.849%209.773-9.774a.002.002%200%20000-.001l.002.001%201.443-1.444c.39-.39.386-.968.027-1.329zM.6%2015.43l1.495-2.91%201.41%201.41L.6%2015.43zm3.417-1.819l-1.569-1.57%209.774-9.773%201.568%201.57-9.773%209.773zm11.08-10.987l-.942.897-1.66-1.66.94-.899a.5.5%200%2001.707%200l.954.955a.5.5%200%20010%20.707z'/%3e%3c/svg%3e");display:inline-block;cursor:pointer}.esriGEEditButton.withHover:hover:not(.disabled){background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%230079c1'%20d='M15.732%201.57L14.43.267c-.36-.36-.938-.364-1.329.026l-1.444%201.444-9.773%209.774-1.849%204.004a.343.343%200%2000.06.39.344.344%200%2000.389.059l4.003-1.849%209.773-9.774a.002.002%200%20000-.001l.002.001%201.443-1.444c.39-.39.386-.968.027-1.329zM.6%2015.43l1.495-2.91%201.41%201.41L.6%2015.43zm3.417-1.819l-1.569-1.57%209.774-9.773%201.568%201.57-9.773%209.773zm11.08-10.987l-.942.897-1.66-1.66.94-.899a.5.5%200%2001.707%200l.954.955a.5.5%200%20010%20.707z'/%3e%3c/svg%3e")}.esriGEFlowList{text-decoration:inherit;position:relative}.esriGEFlowList.enableOnDemandOptimization{overflow-anchor:none}.esriGEFlowList>.listItem,.esriGEFlowList>.esriGEFlowList_innerDiv>.listItem{padding:3px 5px;display:flex;align-items:center;flex-wrap:nowrap;background-color:transparent}.esriGEFlowList>.listItem:not(.disabled),.esriGEFlowList>.esriGEFlowList_innerDiv>.listItem:not(.disabled){cursor:pointer}.esriGEFlowList>.listItem:not(.disabled):hover,.esriGEFlowList>.esriGEFlowList_innerDiv>.listItem:not(.disabled):hover{background-color:var(--calcite-color-foreground-2)}.esriGEFlowList.isDnD>.listItem:hover,.esriGEFlowList.isDnD>.esriGEFlowList_innerDiv>.listItem:hover{background-color:transparent}.esriGEFlowList.isDnD{pointer-events:none}.esriGEFlowList>.listItemSelected,.esriGEFlowList>.esriGEFlowList_innerDiv>.listItemSelected{background-color:#eee}.esriGEFlowList>.flowList_listSeparator,.esriGEFlowList>.esriGEFlowList_innerDiv>.flowList_listSeparator{border-top:1px solid #aaaaaa;margin-top:5px;margin-bottom:5px;margin-inline:5px;cursor:default;display:block}.esriGEFlowList.esriGEFlowListWhiteBackground{background-color:#fff}.esriGEFlowList.esriGEFlowListSpacedOut>.listItem,.esriGEFlowList.esriGEFlowListSpacedOut>.esriGEFlowList_innerDiv>.listItem{padding:10px}.esriGEFlowList.esriGEFlowListNoHighlight>.listItem,.esriGEFlowList.esriGEFlowListNoHighlight>.listItem:hover,.esriGEFlowList.esriGEFlowListNoHighlight>.listItemSelected,.esriGEFlowList.esriGEFlowListNoHighlight>.esriGEFlowList_innerDiv>.listItem,.esriGEFlowList.esriGEFlowListNoHighlight>.esriGEFlowList_innerDiv>.listItem:hover,.esriGEFlowList.esriGEFlowListNoHighlight>.esriGEFlowList_innerDiv>.listItemSelected{background-color:transparent}.esriGEFlowList>.listItemFocused,.esriGEFlowList>.esriGEFlowList_innerDiv>.listItemFocused{background-color:#d1d1d1}.esriGEFlowListDndGhostBox{z-index:2000;opacity:.7;position:relative}.esriGEFlowList .esriGEFlowListDndMarkHorizontal{display:inline-block;vertical-align:top;pointer-events:none}.esriGEFlowList .esriGEFlowListDndMarkVertical{height:20px;pointer-events:none}.esriGEInfoIcon{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2016%2016'%3e%3cpath%20d='m8.39474,12.52631l-1,0l0,-7l1,0l0,7zm0,-8l-1,0l0,-1l1,0l0,1z'%20fill='%237F8183'%20/%3e%3cpath%20d='m6.39474,11.52631l3,0l0,1l-3,0l0,-1z'%20fill='%237F8183'%20/%3e%3cpath%20d='m7.89474,0.52631c-4.134,0%20-7.5,3.364%20-7.5,7.5s3.365,7.5%207.5,7.5c4.136,0%207.5,-3.364%207.5,-7.5s-3.364,-7.5%20-7.5,-7.5zm0.001,14c-3.585,0%20-6.501,-2.916%20-6.501,-6.5s2.916,-6.5%206.501,-6.5c3.584,0%206.499,2.916%206.499,6.5s-2.915,6.5%20-6.499,6.5z'%20fill='%237F8183'%20/%3e%3c/svg%3e");height:16px;width:16px;background-size:contain;background-repeat:no-repeat;display:inline-block;cursor:pointer}.esriGEImageNavigator{font-size:var(--ge-font-size);position:relative}.esriGEImageNavigator .imageNavigator_imageContainerOuter{position:relative}.esriGEImageNavigator .imageNavigator_imageContainer{height:200px;position:relative}.esriGEImageNavigator .esriGEPagination{position:absolute;inset:0}.esriGEImageNavigator .esriGEPagination_PageAndArrows{bottom:0}.esriGEImageNavigator .esriGEPagination_Bullets,.esriGEImageNavigator .esriGEPagination_TriangleForward,.esriGEImageNavigator .esriGEPagination_TriangleBack{display:none}.esriGEImageNavigator .esriGEPagination_Items{inset-inline:0}.esriGEImageNavigator .imageNavigator_imagePaginationRoot{min-width:200px;height:200px;cursor:pointer;position:relative;overflow:hidden}.esriGEImageNavigator .imageNavigator_prevImageButton{position:absolute;inset-inline-start:10px;top:80px;width:40px;height:40px}.esriGEImageNavigator .imageNavigator_prevImageButton .esriGECalciteAction{width:100%;height:100%}.esriGEImageNavigator .imageNavigator_nextImageButton{position:absolute;inset-inline-end:10px;top:80px;width:40px;height:40px}.esriGEImageNavigator .imageNavigator_nextImageButton .esriGECalciteAction{width:100%;height:100%}.esriGEImageNavigator .imageNavigator_navigatorLabel{text-align:center}.esriGEImageNavigator .imageNavigator_imageNoteContainerDiv{position:absolute;inset-inline:0;bottom:0;height:40px;color:#fff;padding-inline:20px;padding-top:10px;visibility:hidden}.esriGEImageNavigator .imageNavigator_imageNoteBackground{position:absolute;top:-20px;inset-inline-end:0px;bottom:0;inset-inline-start:0;pointer-events:none;visibility:visible}.esriGEImageNavigator:hover .imageNavigator_imageNoteBackground{visibility:visible}.esriGEImageNavigator .imageNavigator_imageNoteLabel{position:relative}.esriGEImageNavigator .imageNavigator_imageNoteButton{position:absolute;inset-inline-start:10px;top:-20px;width:40px;height:20px;--calcite-ui-icon-color: white}.esriGEImageNavigator .noImage{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='200'%20height='110'%3e%3cpath%20d='M40.681%2019.858l81.169-6.388%206.48%2082.345-81.168%206.389z'%20class='cls-1'%20fill='%23fff'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M117.03%2019.043l4.239%2058.848-71.794%205.171-4.239-58.847z'%20class='cls-2'%20fill='%23d6d6d6'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M45.7%2029.265l17.285-1.245%203.88%2053.86-17.285%201.245z'%20class='cls-3'%20fill='%23e7e7e7'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M54.01%2034.826l20.94-1.832%203.748%2042.836-20.94%201.832z'%20class='cls-4'%20fill='%23f4f4f4'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M49.029%2076.996l71.624-5.159.438%206.074-71.624%205.16z'%20class='cls-4'%20fill='%23f4f4f4'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M49.244%2079.98l71.624-5.158.222%203.082-71.624%205.159z'%20class='cls-2'%20fill='%23d6d6d6'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20fill='%23f4f4f4'%20d='M121.85%2013.47l-52.91%203.8-6.53%2072.26%2065.34%205.9-5.9-81.96z'/%3e%3cpath%20fill='%23e7e7e7'%20d='M63.04%2082.59l58.75-4.23-4.31-59.85-48.97%203.53-5.47%2060.55z'/%3e%3cpath%20d='M74.732%203.185l81.09%207.323-7.429%2082.265-81.09-7.323z'%20class='cls-1'%20fill='%23fff'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M150.692%2014.79l-5.306%2058.762-71.688-6.474%205.306-58.761z'%20class='cls-1'%20fill='%23fff'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M74.93%2053.77l71.65%206.96-1.16%2012.54-71.72-6.19%201.23-13.31z'%20class='cls-3'%20fill='%23e7e7e7'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M95.72%2014.61c-2.24-.22-3.5.62-3.65%202.19L88.06%2058l45.76%204.45%204-41.15a2.61%202.61%200%2000-2.12-2.76z'%20class='cls-3'%20fill='%23e7e7e7'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M137.69%2022.66l-.09.87%204.58%2011.3-56.91-5.53L92%2018.47l.06-.58'%20class='cls-1'%20fill='%23fff'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M104.12%2031l2.93-10.97.15-1.63m17.15%2014.56l-.76-11.32.16-1.63'%20class='cls-7'%20fill='none'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M90.2%2018.27a1.87%201.87%200%20012-1.66l26.58%202.58m2.02.2l5.3.51'%20class='cls-7'%20fill='none'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M97.91%2058.908l2.346-24.157%2013.238%201.287-2.347%2024.156z'%20class='cls-4'%20fill='%23f4f4f4'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M111.143%2060.204l2.347-24.156%2013.238%201.286-2.348%2024.157z'%20class='cls-4'%20fill='%23f4f4f4'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M105.318%2037.917l5.295.515-.772%207.942-5.295-.514zm10.58%201.03l5.295.514-.771%207.943-5.295-.515z'%20class='cls-1'%20fill='%23fff'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M139.36%2023.05a1.87%201.87%200%2000-1.68-2l-9.6-.93'%20class='cls-7'%20fill='none'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M74.32%2060.08l71.65%206.96-.59%206.6-71.68-6.56.62-7z'%20class='cls-4'%20fill='%23f4f4f4'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3cpath%20d='M74.05%2062.85l71.65%206.97-.33%203.98-71.67-6.72.35-4.23z'%20class='cls-2'%20fill='%23d6d6d6'%20stroke='%23949494'%20stroke-miterlimit='10'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:center;display:inline-block;background-size:250px 139px;width:250px;height:139px;opacity:.5}.esriGEImageNavigator .esriGEPaginationItemsNodeChildDiv{text-align:center}.esriGEImageNavigator .esriGEPaginationItemsNodeChildDiv>div{text-align:start}.esriGEImageNavigator .esriGEPaginationItemsNode .thumbnailIsUnavailable{display:flex;text-align:center;justify-content:center;align-items:center;padding:20px}.esriGEImageNavigator .imageNavigator_noImagePlaceHolder{text-align:center}.esriGEImageNavigator .imageNavigator_noImagePlaceHolderLabel{text-align:center;font-style:italic;margin-top:15px;color:#aaa}.esriGEImageNavigator .imageNavigator_topToolbar{position:absolute;top:5px;inset-inline-end:5px;z-index:1}.esriGEImageNavigator.hasNoImages .imageNavigator_showAllImagesButton{display:none}.esriGEImageNavigator .imageNavigator_allImagesView .imageThumbnailList{overflow-y:auto}.esriGEImageNavigator .imageNavigator_allImagesView .imageThumbnailListItemRoot{width:150px;height:150px}.esriGEImageNavigator .imageNavigator_allImagesView .imageThumbnailList .noImage{width:150px;height:150px;background-size:180px}.esriGEImageNavigator .imageThumbnailList{background-color:#fff}.esriGEImageNavigator .imageThumbnailListItemRoot{width:50px;height:50px;border:1px solid transparent;display:inline-block;cursor:pointer;position:relative}.esriGEImageNavigator .imageThumbnailListItemRootSelected{border:1px solid rgb(0,145,251)}.esriGEImageNavigator .imageThumbnailList .noImage{width:50px;height:50px}.esriGEImageNavigator .imageNavigator_watermarkPano,.esriGEImageNavigator .imageNavigator_watermark360{width:24px;height:24px;position:absolute;top:10px;inset-inline-start:12px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%3e%3cpath%20d='M20.5%2011A1.5%201.5%200%201019%209.5a1.538%201.538%200%20001.5%201.5zM12%207.1A40.894%2040.894%200%20010%205v14a40.894%2040.894%200%200112-2.1A40.894%2040.894%200%200124%2019V5a40.894%2040.894%200%2001-12%202.1zm11%2010.5l-1-.3-4.5-5.3-2.5%202-3-4-3%203-1-1-6%205.3-1%20.3V6.3A45.815%2045.815%200%200012%208a45.815%2045.815%200%200011-1.7z'%20fill='%23fff'/%3e%3c/svg%3e");background-size:24px;background-repeat:no-repeat}.esriGEImageNavigator .imageNavigator_watermark360{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%3e%3cpath%20d='M29%207c0%201.1-.9%202-2%202s-2-.9-2-2%20.9-2%202-2%202%20.9%202%202zm1%2018.5C30%2023%2023.7%2021%2016%2021S2%2023%202%2025.5c0%202.1%204.7%204%2011%204.5v-1c-6.1-.5-10-2.3-10-3.5C3%2024.1%208.2%2022%2016%2022s13%202.2%2013%203.5c0%201.1-3.1%202.6-8%203.3V27l-4%202.5%204%202.5v-2.2c5.3-.7%209-2.4%209-4.3zm2-6.5l-.9-.3C22.3%2016%207.7%2016.4%200%2019V0c4.5%201.6%2011%202.1%2016%202.1S27.5%201.6%2032%200v19zM31%201.2C26.1%202.4%2021.1%203%2016%203S5.9%202.4%201%201.2v16.4c.3-.1.6-.2.9-.2l8.6-8.1%202%201.5L16%207.4l4%205%203-3%206.9%208c.4.1.8.2%201.1.3V1.2z'%20fill='%23fff'/%3e%3c/svg%3e")}.esriGEImageNavigator.mobile .imageNavigator_prevImageButton{width:50px;height:50px;inset-inline-start:0}.esriGEImageNavigator.mobile .imageNavigator_nextImageButton{width:50px;height:50px;inset-inline-end:0}.esriGEImageNavigator.mobile .imageNavigator_imageContainerOuter .imageNavigator_imageNoteBackground{top:-30px}.esriGEImageNavigator.mobile .imageNavigator_imageContainerOuter .imageNavigator_imageNoteContainerDiv{background-color:transparent}.esriGEImageNavigator.mobile .imageNavigator_imageContainerOuter .imageNavigator_imageNoteButton{position:absolute;top:-30px;width:60px;height:30px}.esriGEPageNavigator{font-size:var(--ge-font-size)}.esriGEPageNavigator .esriGETextBox{line-height:normal}.esriGEPageNavigator .esriGEPaginationArrowLeft,.esriGEPageNavigator .esriGEPaginationArrowRight{width:20px;height:30px}.esriGEPageNavigator .pageNavigator_bulletNode{width:10px;height:10px;border-radius:5px;background-color:#d1d1d1;margin:10px 7px;cursor:pointer}.esriGEPageNavigator .pageNavigator_bulletNode:hover{background-color:#b9b9b9}.esriGEPageNavigator .pageNavigator_bulletNode.bulletNodeCurrentPage,.esriGEPageNavigator .pageNavigator_bulletNode.bulletNodeCurrentPage:hover{background-color:#898989;cursor:default}.esriGEPagination{position:absolute;top:0;bottom:0;inset-inline:0}.esriGEPaginationItemsNodeChildDiv{text-align:start}.esriGEPagination_PageAndArrows{position:absolute;top:0;bottom:30px;inset-inline:0}.esriGEPagination_Triangle{position:absolute;top:50%;width:20px;height:60px;margin-top:-30px;cursor:pointer;background-position:center center;background-repeat:no-repeat}.esriGEPagination_TriangleDisabled{cursor:default!important}.esriGEPagination_TriangleBack{background:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e") no-repeat right center;inset-inline-start:0;margin-inline-start:20px;margin-inline-end:0;background-size:13px}.esriGERtl .esriGEPagination_TriangleBack{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGEPagination_TriangleBack.esriGEPagination_TriangleEnabled:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGERtl .esriGEPagination_TriangleBack.esriGEPagination_TriangleEnabled:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGEPagination_TriangleBack.esriGEPagination_TriangleDisabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGERtl .esriGEPagination_TriangleBack.esriGEPagination_TriangleDisabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGEPagination_TriangleForward{background:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e") no-repeat left center;inset-inline-end:0;margin-inline-start:0;margin-inline-end:20px;background-size:13px}.esriGERtl .esriGEPagination_TriangleForward{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGEPagination_TriangleForward.esriGEPagination_TriangleEnabled:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGERtl .esriGEPagination_TriangleForward.esriGEPagination_TriangleEnabled:hover{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23888'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGEPagination_TriangleForward.esriGEPagination_TriangleDisabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGERtl .esriGEPagination_TriangleForward.esriGEPagination_TriangleDisabled{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23ACACAC'%20stroke-miterlimit='10'%20stroke-opacity='.3'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGEPagination_Items{overflow:hidden;position:absolute;top:0;bottom:0;inset-inline:40px}.esriGEPagination_Bullets{position:absolute;bottom:0;inset-inline:0;height:30px;overflow:hidden;white-space:nowrap;text-align:center}.esriGEPagination_Bullet{display:inline-block;vertical-align:top;width:10px;height:10px;border-radius:5px;background-color:#d1d1d1;margin:10px 7px;cursor:pointer}.touch .esriGEPagination_Bullet{width:16px;height:16px;border-radius:8px;margin:7px 4px}.esriGEPagination_Bullet:hover{background-color:#b9b9b9}.esriGEPagination_BulletCurrent{background-color:#898989!important;cursor:default!important}.esriGEPagination_BulletCurrent:hover{background-color:#898989!important}.esriGEPagination_SlideAnim{position:absolute;white-space:nowrap;width:100%}.esriGEPagination_SlideAnim>div{display:inline-block;width:100%;white-space:normal;vertical-align:top}.esriGEPagination_FadeAnim{position:absolute;width:100%;top:0}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem{padding:3px 5px;display:flex;align-items:center;flex-wrap:nowrap;background-color:transparent}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.selectableTree_listItem_odd{background-color:#f8f8f8}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.selectableTree_listItem_even{background-color:#fff}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem:hover,.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.selectableTree_listItem_odd:hover,.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.selectableTree_listItem_even:hover{background-color:var(--calcite-color-foreground-2)}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem:not(.disabled){cursor:pointer}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem:not(.disabled):hover{background-color:var(--calcite-color-foreground-2)}.esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem_selected{background-color:#eee}.esriGESelectableTreeGrid{position:relative;border:1px solid #D3D3D3;height:0}.esriGESelectableTreeGrid.autoHeight{height:auto}.esriGESelectableTreeGrid .gridHeader{background-color:#f8f8f8;box-sizing:border-box;overflow:hidden}.esriGESelectableTreeGrid .gridHeader .gridRow{position:relative;height:100%;width:100%;display:grid}.esriGESelectableTreeGrid .gridHeader .columnDndMark{inset-inline-start:0;top:0;bottom:0;width:0;position:absolute;outline:1px solid blue}.esriGESelectableTreeGrid .gridCell{padding:5px;box-sizing:border-box;height:100%;min-height:0}.esriGESelectableTreeGrid .esriGESelectableTreeList.esriGEFlowList{overflow-x:auto;overflow-y:auto}.esriGESelectableTreeGrid .esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem{padding:0;cursor:default;display:grid}.esriGESelectableTreeGrid .esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.selectableTree_rowSelected{background-color:gray}.esriGESelectableTreeGrid .esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.esriGESelectableTreeGrid.hasBorder .gridCell{border-inline-end:1px solid #D3D3D3;border-bottom:1px solid #D3D3D3}.esriGEInline{display:inline-block;border:0;padding:0;vertical-align:middle}.esriGEPopup{position:absolute;background-color:transparent;margin:0;border:0;padding:0;-webkit-overflow-scrolling:touch;box-shadow:0 1px 5px #00000040}.esriGEDisabledContent{background-color:#fff;opacity:.6;cursor:default}.esriGEDisabledContent.esriGEDisabledContentTransparent{opacity:.01}.esriGEHidden{display:none!important}.esriGENoVisibility{visibility:hidden!important}.esriGENonSelectable,.ge-non-selectable{user-select:none!important;-webkit-user-select:none!important;-webkit-touch-callout:none!important;cursor:default}.esriGENonInteractable,.esriGENonInteractable div{pointer-events:none!important}.esriGERelative{position:relative}.esriGEAbsoluteStretched,.ge-absolute-stretched{position:absolute;inset:0}.esriGEClickable,.ge-clikcable{cursor:pointer}.esriGELink,.ge-link{cursor:pointer!important;color:var(--calcite-color-text-link)}.esriGELink:hover,.ge-link:hover{text-decoration:underline}.esriGETrimWithEllipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.esriGEOffscreen{position:absolute!important;z-index:-1000!important;opacity:.01;inset-inline-start:0;top:0}.esriGEIcon16{background-repeat:no-repeat;background-size:16px;width:16px;background-position:center;height:16px;cursor:pointer}.esriGEStart,.ge-start{text-align:start}.esriGEFlexStart,.ge-flex-start{justify-content:flex-start}.esriGEEnd,.ge-end{text-align:end}.esriGEFlexEnd,.ge-flex-end{justify-content:flex-end}.esriGECenter,.ge-center{text-align:center}.esriGEFlexCenter,.ge-flex-center{justify-content:center}.esriGEDndMarkHorizontal{border:1px solid gray;width:2px;height:20px;display:inline-block}.esriGEDndMarkVertical{width:100%;min-width:20px;height:44px}.esriGEDndWidgetGhostBox{background-color:gray;border:1px solid gray;z-index:1000000000;opacity:.7}.esriGEHighlighted{background-color:#ccc}.esriGEHighlightedDark{background-color:#aaa}.esriGEUnderlineOnHover:hover{cursor:pointer;text-decoration:underline}.esriGEAppearOnHover{opacity:0}.esriGEAppearOnHoverParent:hover .esriGEAppearOnHover{opacity:1}.esriGEBold,.ge-bold{font-weight:var(--ge-font-weight-bold)}.esriGEDemiBold,.ge-demi-bold{font-weight:var(--ge-font-weight-demi-bold)}.esriGEMedium,.ge-medium{font-weight:var(--ge-font-weight-medium)}.esriGEItalic,.ge-italic{font-style:italic}.esriGESmaller1Text{font-size:var(--ge-font-size--1)}.esriGESmaller2Text{font-size:var(--ge-font-size--2)}.esriGEBigger1Text{font-size:var(--ge-font-size-1)}.esriGEBigger2Text{font-size:var(--ge-font-size-2)}.ge-flex-row{display:flex;align-items:center}.ge-flex-row-end{display:flex;align-items:center;justify-content:flex-end}.ge-flex-row-top{display:flex;align-items:flex-start}.ge-flex-column{display:flex;flex-direction:column}.ge-flex-column-center{display:flex;flex-direction:column;align-items:center}.ge-flex-spacer{flex-grow:1}.ge-flex-no-shrink{flex-shrink:0}.ge-flex-wrap{flex-wrap:wrap}.ge-flex-row-trim{min-width:0;display:flex;align-items:center}.ge-flex-trim{min-width:0}.ge-align-self-stretch{align-self:stretch}.ge-full-width{width:100%}.ge-sticky-end{position:sticky;bottom:0}.ge-zero-font-size{font-size:0}.ge-justify-center{justify-content:center}.ge-justify-between{justify-content:space-between}.ge-justify-around{justify-content:space-around}.ge-justify-end{justify-content:end}.ge-flex-gap-4{gap:4px}.ge-flex-gap-8{gap:8px}.ge-flex-gap-12{gap:12px}.ge-flex-gap-16{gap:16px}.ge-flex-gap-20{gap:20px}.ge-flex-gap-24{gap:24px}.ge-flex-gap-28{gap:28px}.ge-flex-gap-32{gap:32px}.ge-flex-gap-40{gap:40px}.ge-margin-block-4{margin-block:4px}.ge-margin-block-6{margin-block:6px}.ge-margin-block-8{margin-block:8px}.ge-margin-block-12{margin-block:12px}.ge-margin-block-16{margin-block:16px}.ge-margin-block-20{margin-block:20px}.ge-margin-block-start-4{margin-block-start:4px}.ge-margin-block-start-8{margin-block-start:8px}.ge-margin-block-start-12{margin-block-start:12px}.ge-margin-block-start-16{margin-block-start:16px}.ge-margin-block-start-20{margin-block-start:20px}.ge-margin-block-start-24{margin-block-start:24px}.ge-margin-block-start-32{margin-block-start:32px}.ge-margin-block-start-40{margin-block-start:40px}.ge-margin-block-start-60{margin-block-start:60px}.ge-margin-block-end-2{margin-block-end:2px}.ge-margin-block-end-4{margin-block-end:4px}.ge-margin-block-end-8{margin-block-end:8px}.ge-margin-block-end-12{margin-block-end:12px}.ge-margin-block-end-16{margin-block-end:16px}.ge-margin-block-end-20{margin-block-end:20px}.ge-margin-block-end-24{margin-block-end:24px}.ge-margin-block-end-28{margin-block-end:28px}.ge-margin-block-end-32{margin-block-end:32px}.ge-margin-block-end-40{margin-block-end:40px}.ge-margin-block-end-60{margin-block-end:60px}.ge-margin-block-end-80{margin-block-end:80px}.ge-margin-inline-4{margin-inline:4px}.ge-margin-inline-8{margin-inline:8px}.ge-margin-inline-12{margin-inline:12px}.ge-margin-inline-16{margin-inline:16px}.ge-margin-inline-20{margin-inline:20px}.ge-margin-inline-start-4{margin-inline-start:4px}.ge-margin-inline-start-8{margin-inline-start:8px}.ge-margin-inline-start-12{margin-inline-start:12px}.ge-margin-inline-start-16{margin-inline-start:16px}.ge-margin-inline-start-20{margin-inline-start:20px}.ge-margin-inline-start-40{margin-inline-start:40px}.ge-margin-inline-start-60{margin-inline-start:60px}.ge-margin-inline-end-4{margin-inline-end:4px}.ge-margin-inline-end-8{margin-inline-end:8px}.ge-margin-inline-end-12{margin-inline-end:12px}.ge-margin-inline-end-16{margin-inline-end:16px}.ge-margin-inline-end-20{margin-inline-end:20px}.ge-margin-inline-end-40{margin-inline-end:40px}.ge-margin-inline-end-60{margin-inline-end:60px}.ge-padding-4{padding:4px}.ge-padding-8{padding:8px}.ge-padding-12{padding:12px}.ge-padding-16{padding:16px}.ge-padding-20{padding:20px}.ge-padding-block-4{padding-block:4px}.ge-padding-block-8{padding-block:8px}.ge-padding-block-12{padding-block:12px}.ge-padding-block-16{padding-block:16px}.ge-padding-block-20{padding-block:20px}.ge-padding-block-32{padding-block:32px}.ge-padding-block-start-4{padding-block-start:4px}.ge-padding-block-start-8{padding-block-start:8px}.ge-padding-block-start-12{padding-block-start:12px}.ge-padding-block-start-16{padding-block-start:16px}.ge-padding-block-start-20{padding-block-start:20px}.ge-padding-block-start-32{padding-block-start:32px}.ge-padding-block-end-4{padding-block-end:4px}.ge-padding-block-end-8{padding-block-end:8px}.ge-padding-block-end-12{padding-block-end:12px}.ge-padding-block-end-16{padding-block-end:16px}.ge-padding-block-end-20{padding-block-end:20px}.ge-padding-block-end-32{padding-block-end:32px}.ge-padding-inline-4{padding-inline:4px}.ge-padding-inline-8{padding-inline:8px}.ge-padding-inline-12{padding-inline:12px}.ge-padding-inline-16{padding-inline:16px}.ge-padding-inline-20{padding-inline:20px}.ge-padding-inline-32{padding-inline:32px}.ge-padding-inline-start-4{padding-inline-start:4px}.ge-padding-inline-start-8{padding-inline-start:8px}.ge-padding-inline-start-12{padding-inline-start:12px}.ge-padding-inline-start-16{padding-inline-start:16px}.ge-padding-inline-start-20{padding-inline-start:20px}.ge-padding-inline-32{padding-inline-start:32px}.ge-padding-inline-end-4{padding-inline-end:4px}.ge-padding-inline-end-8{padding-inline-end:8px}.ge-padding-inline-end-12{padding-inline-end:12px}.ge-padding-inline-end-16{padding-inline-end:16px}.ge-padding-inline-end-20{padding-inline-end:20px}.ge-padding-inline-end-32{padding-inline-end:32px}.ge-border{border:1px solid var(--calcite-color-border-2)}.ge-border-block{border-block:1px solid var(--calcite-color-border-2)}.ge-border-inline{border-inline:1px solid var(--calcite-color-border-2)}.ge-border-block-start{border-block-start:1px solid var(--calcite-color-border-2)}.ge-border-block-end{border-block-end:1px solid var(--calcite-color-border-2)}.ge-border-inline-start{border-inline-start:1px solid var(--calcite-color-border-2)}.ge-border-inline-end{border-inline-end:1px solid var(--calcite-color-border-2)}.esriGEFlexRow{display:flex;align-items:center}.esriGEFlexRowEnd{display:flex;align-items:center;justify-content:flex-end}.esriGEFlexRowTop{display:flex;align-items:flex-start}.esriGEFlexColumn{display:flex;flex-direction:column}.esriGEFlexSpacer{flex-grow:1}.esriGEFlexNoShrink{flex-shrink:0}.esriGEFlexWrap{flex-wrap:wrap}.esriGEFlexRowTrim{min-width:0;display:flex;align-items:center}.esriGEFlexTrim{min-width:0}.esriGERowHigh{margin-block:10px}.esriGERow1020{margin-block-start:10px;margin-block-end:20px}.esriGERowMedium{margin-block:5px}.esriGERow15{margin-block:15px}.esriGERow20{margin-block:20px}.esriGERow30{margin-block:30px}.esriGEJustifyBetween{justify-content:space-between}.esriGEJustifyAround{justify-content:space-around}.esriGEJustifyEnd{justify-content:end}.esriGESpaceMedium{margin-inline:5px}.esriGESpaceBig{margin-inline:10px}.esriGESpaceBeforeSmall{margin-inline-start:3px}.esriGESpaceBeforeMedium{margin-inline-start:5px}.esriGESpaceBeforeBig{margin-inline-start:10px}.esriGESpaceBefore15{margin-inline-start:15px}.esriGESpaceBefore20{margin-inline-start:20px}.esriGESpaceBefore25{margin-inline-start:25px}.esriGESpaceBefore30{margin-inline-start:30px}.esriGESpaceBefore40{margin-inline-start:40px}.esriGESpaceBefore50{margin-inline-start:50px}.esriGESpaceBefore60{margin-inline-start:60px}.esriGESpaceBefore70{margin-inline-start:70px}.esriGESpaceAfterSmall{margin-inline-end:3px}.esriGESpaceAfterMedium{margin-inline-end:5px}.esriGESpaceAfterBig{margin-inline-end:10px}.esriGESpaceAfter15{margin-inline-end:15px}.esriGESpaceAfter20{margin-inline-end:20px}.esriGESpaceAfter25{margin-inline-end:25px}.esriGESpaceAfter30{margin-inline-end:30px}.esriGESpaceAfter40{margin-inline-end:40px}.esriGESpaceAfter50{margin-inline-end:50px}.esriGESpaceAfter60{margin-inline-end:60px}.esriGESpaceAfter70{margin-inline-end:70px}.esriGEFlexGap5{gap:5px}.esriGEFlexGap10{gap:10px}.esriGEFlexGap15{gap:15px}.esriGEFlexGap20{gap:20px}.esriGEFlexGap30{gap:30px}.esriGEFlexGap40{gap:40px}.esriGEFlexGap50{gap:50px}.esriGESpaceNoFont{font-size:0}.esriGESpaceAboveLow{margin-block-start:3px}.esriGESpaceAboveMedium{margin-block-start:5px}.esriGESpaceAboveHigh{margin-block-start:10px}.esriGESpaceAbove15{margin-block-start:15px}.esriGESpaceAbove20{margin-block-start:20px}.esriGESpaceAbove30{margin-block-start:30px}.esriGESpaceAbove40{margin-block-start:40px}.esriGESpaceAbove50,.esriGESpaceAbove60{margin-block-start:60px}.esriGESpaceAbove70{margin-block-start:70px}.esriGESpaceAbove80{margin-block-start:80px}.esriGESpaceAbove90{margin-block-start:90px}.esriGESpaceAbove100{margin-block-start:100px}.esriGESpaceBelowLow{margin-block-end:3px}.esriGESpaceBelowMedium{margin-block-end:5px}.esriGESpaceBelowHigh{margin-block-end:10px}.esriGESpaceBelow15{margin-block-end:15px}.esriGESpaceBelow20{margin-block-end:20px}.esriGESpaceBelow30{margin-block-end:30px}.esriGESpaceBelow40{margin-block-end:40px}.esriGESpaceBelow50{margin-block-end:50px}.esriGESpaceBelow60{margin-block-end:60px}.esriGESpaceBelow70{margin-block-end:70px}.esriGESpaceBelow80{margin-block-end:80px}.esriGESpaceBelow90{margin-block-end:90px}.esriGESpaceBelow100{margin-block-end:100px}.esriGETextBox{background-color:#fff;color:#4d4d4d;border:1px solid #d3d3d3;position:relative}.esriGETextBox .esriGETextBoxInput,.esriGETextBox .esriGETextBoxArea{border:none;height:23px;min-width:10px;line-height:23px;padding:7px 5px;font-size:inherit;font-family:inherit}.esriGETextBox .esriGETextBoxInput:focus,.esriGETextBox .esriGETextBoxArea:focus{outline:2px solid var(--calcite-color-brand)}.esriGETextBox .esriGETextBoxInput{flex-grow:1}.esriGETextBox .esriGETextBoxArea{flex-grow:1;resize:none;background-color:inherit;color:inherit;font-style:inherit;font-weight:inherit;line-height:inherit}.esriGETextBox .esriGETextBoxPlaceholder{min-width:10px;line-height:23px;padding:7px 5px;font-size:inherit;font-family:inherit;pointer-events:none;overflow:hidden}.esriGETextBox .esriGETextBoxClearButton,.esriGETextBox .esriGETextBoxAdditionalButton{margin-inline-end:5px}.esriGETextBox .esriGETextBoxAdditionalButton{width:16px;height:16px;cursor:pointer}.esriGETextBox.esriGETextBoxError{border-color:#c86a4a}.esriGETooltip{position:absolute;z-index:2000;display:block;inset-inline-start:0;top:-10000px;overflow:visible}.esriGETooltip .esriGETooltipContainer{border:none;background-color:transparent;padding:8px 10px;text-align:start;box-shadow:none;cursor:default;color:#4c4c4c;background-image:none;position:relative}.esriGETooltip:not(.notRestricted) .esriGETooltipContainer{max-width:250px;word-break:break-word}.esriGETooltip .esriGETooltipConnector{position:absolute;opacity:0;width:16px;height:14px}.esriGETooltip.esriGETooltipBelow{padding-top:13px;padding-inline:3px}.esriGETooltip.esriGETooltipBelow .esriGETooltipConnector{top:0;inset-inline-start:3px;background-position:-31px 0;width:16px;height:14px}.esriGETooltip.esriGETooltipAbove{padding-bottom:13px;padding-inline:3px}.esriGETooltip.esriGETooltipAbove .esriGETooltipConnector{bottom:0;inset-inline-start:3px;background-position:-15px 0;width:16px;height:14px}.esriGETooltip.esriGETooltipABRight .esriGETooltipConnector{inset-inline-start:auto;inset-inline-end:3px}.esriGETooltip.esriGETooltipLeft{padding-inline-end:14px}.esriGETooltip.esriGETooltipLeft .esriGETooltipConnector{inset-inline-end:0;background-position:0 0;width:16px;height:14px}.esriGETooltip.esriGETooltipRight{padding-inline-start:14px}.esriGETooltip.esriGETooltipRight .esriGETooltipConnector{inset-inline-start:0;background-position:-48px 0;width:16px;height:14px}.esriGETooltip a{color:var(--calcite-color-text-link)}.esriGEClosableTooltip .esriGETooltipContainer{border:none;background-color:transparent;padding:15px}.esriGEClosableTooltip .esriGEClosableTooltipCloseButton{display:inline-block;position:absolute;top:2px;width:14px;height:14px;background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%3e%3cpath%20fill='%23FFF'%20d='M8.717%208l5.304%205.303-.707.707L8.01%208.707%202.707%2014.01%202%2013.303%207.303%208%202%202.697l.707-.707L8.01%207.293l5.304-5.303.707.707L8.718%208z'/%3e%3c/svg%3e");background-size:14px;cursor:pointer}.esriGEProgress{background-color:#ffffffb3}.esriGEProgressBottomRight{position:absolute;inset-inline-end:30px;bottom:30px;width:50px;height:50px;background-color:transparent}.esriGEWaitingMessageProgressBar{position:absolute;inset-inline-start:0;height:3px;background-color:var(--ge-theme-color)}.esriGEWaitingMessageProgressBar_top{top:0}.esriGEWaitingMessageProgressBar_bottom{bottom:0}.esriGECalciteAccordion.noBorder,.esriGECalciteAccordion.noBorder .esriGECalcite.accordionItem{--calcite-color-border-2: transparent}.esriGECalciteAction.brandColor{--calcite-action-text-color-pressed: var(--calcite-color-brand-hover);--calcite-action-text-color: var(--calcite-color-brand)}.esriGECalciteAction.whiteColor{--calcite-action-text-color-pressed: white;--calcite-action-text-color: white}.esriGECalciteAction.whiteColor[disabled]{--calcite-color-foreground-1: transparent}.esriGECalciteAction.dangerColor{--calcite-action-text-color-pressed: var(--calcite-color-status-danger-hover);--calcite-action-text-color: var(--calcite-color-status-danger)}.esriGECalciteAction.actionIcon{display:inline-block}.esriGECalciteAlert div[slot=title]{font-size:16px}.esriGECalciteButton{--calcite-color-inverse: #d3d3d3;--calcite-color-inverse-hover: #5d5d5d;--calcite-color-inverse-press: #424242;--calcite-color-border-input: var(--calcite-color-border-3)}.esriGECalciteButton.linkColor{--calcite-color-brand: var(--calcite-color-text-link);--calcite-color-brand-hover: var(--calcite-color-text-link)}.esriGECalciteButton.lightBlue{--calcite-color-foreground-3: #c7eaff;--calcite-color-foreground-2: #9fd4f3;--calcite-color-foreground-1: #77bde7}.esriGECalciteButton.white{--calcite-color-foreground-3: white;--calcite-color-foreground-2: white;--calcite-color-foreground-1: white}.esriGECalciteButton.darkOnHover{--calcite-color-foreground-1: var(--calcite-color-text-2) !important;--calcite-color-foreground-2: var(--calcite-color-text-2) !important}.esriGECalciteButton.darkOnHover:hover,.esriGECalciteButton.darkOnHover:focus{--calcite-color-text-1: white !important}.esriGECalciteButton.noHover{--calcite-color-transparent-hover: transparent;--calcite-color-transparent-press: transparent}.esriGECalciteButton.floatingBtn{--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow)}.esriGECalciteButton.floatingBtn:hover{--tw-shadow: 0 4px 20px 0 rgba(0, 0, 0, .08), 0 12px 30px rgba(0, 0, 0, .1);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow)}.esriGECalciteButton.smallerText{--calcite-font-size--1: 13px}calcite-segmented-control.esriGECalcite{--calcite-color-border-input: var(--calcite-color-border-3)}calcite-segmented-control.esriGECalcite.lightGrey calcite-segmented-control-item[checked]{--calcite-color-brand: var(--calcite-color-foreground-3);--calcite-color-text-inverse: var(--calcite-color-text-1)}calcite-segmented-control.esriGECalcite.lightGrey.useButtons{--calcite-color-foreground-2: var(--calcite-color-foreground-3)}.esriGECalcite{--calcite-font-size-0: 1rem;--calcite-font-size--1: 1rem;--calcite-font-size--2: 1rem;--calcite-label-margin-bottom: 0}.esriGECalcite[scale=l],.esriGECalcite[scale=m],.esriGECalcite[scale=s]{line-height:1.2}.esriGECalcite[loading]{--calcite-ui-opacity-disabled: 1}.esriGECalcite,.calcite-mode-light.esriGECalcite,.calcite-mode-dark .calcite-mode-light.esriGECalcite{--calcite-color-border-1: #d3d3d3;--calcite-color-border-2: #d3d3d3;--calcite-color-border-3: #d3d3d3;--calcite-input-border-color: #d3d3d3}.calcite-mode-dark .esriGECalcite,.calcite-mode-dark.esriGECalcite{--calcite-color-border-1: #757575;--calcite-color-border-2: #757575;--calcite-color-border-3: #757575;--calcite-input-border-color: #757575}.esriGECalcite.dangerColor{color:var(--calcite-color-status-danger)}.esriGECalcite.warningColor{color:var(--calcite-color-status-warning)}.esriGECalcite.successColor{color:var(--calcite-color-status-success)}.esriGECalciteCheckList calcite-label{padding:10px}.esriGECalciteCheckList calcite-label:hover{background-color:#eee}.esriGECalciteChip.lightBlue{--calcite-chip-background-color: #c7eaff}.esriGECalciteChip.lighterBlue{--calcite-chip-background-color: rgba(0,122,194,.08)}.esriGECalciteChip.brand{--calcite-chip-background-color: var(--calcite-color-brand);--calcite-chip-text-color: #fff}.esriGECalciteChip.warning{--calcite-chip-background-color: var(--calcite-color-status-warning)}.esriGECalciteChip.redText{--calcite-chip-text-color: var(--calcite-color-status-danger)}.esriGECalciteChip.lightGrey{--calcite-chip-background-color: var(--calcite-color-foreground-3)}.esriGECalciteChip.transparent{--calcite-chip-background-color: transparent}.esriGECalciteChip.noBold{--calcite-font-weight-medium: var(--calcite-font-weight-normal)}.esriGECalciteChip calcite-action{margin-inline-end:-5px}.esriGECalciteChip[kind=brand],.esriGECalciteChip[kind=inverse]{--calcite-chip-close-icon-color: var(--calcite-color-foreground-1)}.esriGECalciteChip[kind=brand] calcite-action,.esriGECalciteChip[kind=inverse] calcite-action{--calcite-icon-color: var(--calcite-color-foreground-1)}.esriGECalciteColorPicker.oldStyle{width:14px;height:14px;padding:3px;background-color:#f0f0f0;border:1px solid var(--calcite-color-border-1);display:inline-block;vertical-align:middle;font-size:0;line-height:0}.esriGECalciteColorPicker.oldStyle.disabled{pointer-events:none;opacity:.5}.esriGECalciteColorPicker.oldStyle .esriGECalciteColorPickerSwatch{width:100%;height:100%;margin:-1px;border:1px solid var(--calcite-color-border-1);cursor:pointer}.esriGECalciteColorPicker.newStyle calcite-button{height:32px}.esriGECalciteColorPicker.newStyle .esriGECalciteColorPickerSwatch{min-width:14px;width:100%;height:14px;box-sizing:border-box}.esriGECalciteColorPicker.newStyle .esriGECalciteColorPickerSwatch.hasBorder{border:1px solid var(--calcite-color-border-1)}.esriGECalciteColorPickerPopup{min-width:292px;background-color:#fff}.esriGECalciteColorPickerPopup calcite-block{margin:0}.esriGECalciteColorPickerPopup .colorsListRectRoot{position:relative;width:24px;height:24px;margin-inline-end:12px}.esriGECalciteColorPickerPopup .colorsListRectRoot calcite-button{width:24px}.esriGECalciteColorPickerPopup .colorsListRectRoot:last-child{margin-inline-end:0px}.esriGECalciteColorPickerPopup .colorsListRectRoot .colorsListRect{border:1px solid #b2b2b2;cursor:pointer;width:20px;height:20px}.esriGECalciteColorPickerPopup .colorsListRectRoot .colorsListRect.selected{outline:2px solid var(--calcite-color-text-link, #00619b)}.esriGECalciteColorPickerPopup .bottomButtons{gap:5px}.esriGECalciteNumberSelect{width:80px;height:23px;position:relative}.esriGECalciteNumberSelect calcite-input{position:absolute;inset-inline-start:0;inset-block:0;inset-inline-end:22px;z-index:1}.esriGECalciteNumberSelect calcite-button{position:absolute;inset:0;width:85px}.esriGECalciteNumberSelect.hasSuffix{width:110px}.esriGECalciteNumberSelect.hasSuffix calcite-button{width:115px}.esriGECalciteInputDatePicker{width:150px;--calcite-color-border-input: var(--calcite-color-border-3)}.esriGENumberSpinnerCalcite.esriGECalcite{--calcite-color-border-input: var(--calcite-color-border-3)}.esriGECalciteDialog{--calcite-modal-title-text-internal: var(--calcite-font-size-1);--calcite-modal-padding-internal: 16px}.esriGECalciteDialog.moveableDialog{position:absolute;inset:0 auto auto;inset-inline-start:0;overflow:visible}.esriGECalciteDialog .esriGECalciteDialogButtons{position:relative;gap:5px}.esriGECalciteDialog .esriGECalciteDialogButtons .dialogResizeButton{position:absolute;inset-inline-end:-36px;bottom:-13px}.esriGECalciteDialog.noInternalPadding{--calcite-modal-content-padding: 0}.esriGECalciteInput.esriGECalcite{--calcite-color-text-1: #4c4c4c;--calcite-color-text-3: #5d5d5d;--calcite-color-border-input: var(--calcite-color-border-3)}.esriGECalciteInput.noBorder{--calcite-input-border-color: transparent}.calcite-mode-dark .esriGECalciteInput.esriGECalcite{--calcite-color-text-1: #ffffff;--calcite-color-text-3: #ffffff}.esriGECalciteList .listItem:not(.hasBottomBorder){--calcite-color-border-3: transparent;box-shadow:none}.esriGECalciteList .listItem[selected] .listItemLabel{font-weight:var(--calcite-font-weight-medium)}.esriGECalciteList .listItem .itemLabel,.esriGECalciteList .listItem .listItemLabel{color:var(--calcite-color-text-1)}.esriGECalciteList .listSeparator{margin:5px 5px 10px;border-top:1px solid var(--calcite-color-border-1);cursor:default}.listItemImage{background-repeat:no-repeat;background-position:center;background-size:contain;width:16px;height:16px}.esriGECalciteLabel.forSelect{position:relative;top:1px}.esriGECalciteNumericalSlider .slider_content{display:flex;align-items:flex-end}.esriGECalciteNumericalSlider .slider_content .slider_container{position:relative;bottom:-7px}.esriGECalciteNumericalSlider .slider_content .slider_minValueTextBox,.esriGECalciteNumericalSlider .slider_content .slider_maxValueTextBox{width:65px;margin-top:3px}.esriGECalciteNumericalSlider .slider_content .slider_minValueTextBox{margin-inline-start:4px;margin-inline-end:1px}.esriGECalciteNumericalSlider .slider_content .slider_maxValueTextBox{margin-inline-start:1px;margin-inline-end:4px}.esriGECalciteNumericalSlider .slider_content .slider_hLineDiv{position:absolute;inset-inline:8px;bottom:15px}.esriGECalciteNumericalSlider .slider_content .slider_hLineDiv .bottomLabel{position:absolute;top:0}.esriGECalciteNumericalSlider .slider_content .slider_hLineDiv .bottomLabel .bottomLabelLine{position:absolute;top:10px;border:1px #767766 solid;border-top:none;height:5px}.esriGECalciteNumericalSlider .slider_content .slider_hLineDiv .bottomLabel .bottomLabelLabel{position:absolute;top:30px;white-space:nowrap;display:flex;justify-content:center;text-align:center}.esriGECalciteNumericalSlider .slider_content .slider_statisticsContainerBlock{position:absolute;background-color:#ccc}.esriGECalciteNumericalSlider .slider_content .slider_statisticsContainer{inset-inline-start:6px;inset-inline-end:5px}.esriGECalciteNumericalSlider .slider_content .slider_sliderContainer{position:absolute;bottom:3px;inset-inline-start:-2px;min-width:unset;width:calc(100% + 5px)}.esriGECalciteNumericalSlider.hasHistogram .slider_content .slider_sliderContainer{bottom:-7px}.esriPanelCalcite{border:1px solid var(--calcite-color-border-2)}.esriGECalcitePagination .pagination_pageAndArrows{position:absolute;top:0;bottom:30px;inset-inline:0}.esriGECalcitePagination .pagination_pageAndArrows .pagination_items{overflow:hidden;position:absolute;top:0;bottom:0;inset-inline:60px}.esriGECalcitePagination .pagination_pageAndArrows .pagination_items .pagination_itemsNode .pagination_itemsNodeChildDiv{text-align:start}.esriGECalcitePagination .pagination_pageAndArrows .pagination_items .pagination_bullets{position:absolute;bottom:0}.esriGECalcitePagination .pagination_pageAndArrows .pagination_triangle{position:absolute;top:50%;width:56px;height:50px;margin-top:-40px}.esriGECalcitePagination .pagination_pageAndArrows .pagination_triangle .esriGECalciteAction{height:100%}.esriGECalcitePagination .pagination_pageAndArrows .pagination_triangleBack{inset-inline-start:0}.esriGECalcitePagination .pagination_pageAndArrows .pagination_triangleForward{inset-inline-end:0}.esriGECalcitePagination .pagination_pager{position:absolute;bottom:0;inset-inline:0;height:30px;overflow:hidden;white-space:nowrap;text-align:center}.esriGECalcitePagination .pagination_pager calcite-pagination{background-color:var(--calcite-color-foreground-1)}.esriGECalcitePagination .pagination_controls{position:absolute;bottom:0;justify-content:center;width:100%;gap:4px}.esriGECalcitePagination .pagination_bullets{inset-inline:0;height:30px;overflow:hidden;white-space:nowrap;gap:10px}.esriGECalcitePagination .pagination_bullets .pagination_bullet{--calcite-color-foreground-1: #d1d1d1;--calcite-color-foreground-2: #b9b9b9}.esriGECalcitePagination .pagination_bullets .pagination_bullet.current{--calcite-color-foreground-1: #898989;--calcite-color-foreground-2: #b9b9b9}.esriGECalcitePagination .pagination_slideAnim{position:absolute;white-space:nowrap;width:100%}.esriGECalcitePagination .pagination_slideAnim>div{display:inline-block;width:100%;white-space:normal;vertical-align:top}.esriGECalcitePagination .pagination_fadeAnim{position:absolute;width:100%;top:0}.esriGECalcitePaginationContinuous .pagination_items{overflow-x:auto;overflow-y:hidden}.esriGECalcitePaginationContinuous .pagination_items>div{flex-shrink:0}.esriGECalcitePaginationContinuous .pagination_triangle{position:absolute;top:50%;width:40px;height:40px;margin-top:-20px}.esriGECalcitePaginationContinuous .pagination_triangle .esriGECalciteAction{height:100%}.esriGECalcitePaginationContinuous .pagination_triangleBack{inset-inline-start:5px}.esriGECalcitePaginationContinuous .pagination_triangleForward{inset-inline-end:5px}.esriGECalcitePopover[open]{visibility:visible!important;pointer-events:all!important}.esriGECalciteSelect{display:inline-block;min-height:32px;--calcite-color-border-input: var(--calcite-color-border-3)}.esriGECalciteSelect calcite-button{height:32px}.esriGECalciteSelect calcite-tooltip calcite-button{height:auto}.esriGECalciteSelect.compact{display:flex;min-height:unset}.esriGECalciteSelectList{overflow-y:auto}.esriGECalciteSlider{min-width:140px}.esriGECalciteSwitchLabel{display:inline-block}.esriGECalciteSwitchLabel[scale=s].esriGECalcite{--calcite-font-size--2: 12px}.esriGECalciteSwitchLabel calcite-switch[disabled]{opacity:1}.esriGECalciteTooltipAsPopup{overflow:hidden;border-radius:.25rem;padding-block:.75rem;padding-inline:1rem;line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.esriGECalciteTooltipAsPopup.restricted{max-width:250px}.esriGECalciteTooltipAsPopup.overrideParent{min-width:250px;text-wrap:wrap}.esriGECalciteTriStateItem{--calcite-input-border-color: #757575}.esriGECalciteTriStateItem calcite-checkbox[disabled]{opacity:1}.esriGECalciteLoaderSmallIndicator{padding:0;--calcite-loader-size: 16px;inline-size:16px;display:inline-block}.esriGECalciteSelectableTreeList{width:100%}.esriGECalciteSelectableTreeList .itemSpacer{width:.5em}.ge-variable-info{max-width:400px;font-size:12px;padding:10px;white-space:normal}.ge-variable-info .variable-info-row{margin-top:6px}.ge-variable-info .variable-info-row.isFirst{margin-top:0}.ge-variable-info .variable-header{font-weight:700}.ge-variable-info .value-scroller{overflow-y:auto;max-height:142px}.ge-variable-info .value-scroller div{overflow:hidden}.ge-shopping-cart .shopping-cart-inner-container{display:flex;padding-inline:8px;padding-block:4px;align-items:baseline}.ge-shopping-cart .shopping-cart-inner-container .variable-count{margin-inline-start:8px;border-radius:50%;background-color:var(--calcite-color-text-2);color:var(--calcite-color-text-inverse);min-width:14px;height:14px;padding:4px}.ge-shopping-cart .shopping-cart-button.has-selected-variables{--calcite-color-text-1: var(--calcite-color-brand)}.ge-shopping-cart .shopping-cart-button.has-selected-variables .variable-count{background-color:var(--calcite-color-brand)}.ge-shopping-cart .shopping-cart-popup{min-width:300px;max-width:650px}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list{overflow-y:auto}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row{padding:4px;height:28px;border-color:var(--calcite-color-border-3);border-bottom-style:solid;border-width:1px;font-size:var(--calcite-font-size-0)!important}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row .variable-label{flex-grow:1}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row>:not(.variable-label){flex-shrink:0}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row .variable-spacer{width:4px}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row .row-drag-icon{opacity:0;cursor:move}.ge-shopping-cart .shopping-cart-popup .shopping-cart-list .shopping-cart-row:hover .row-drag-icon{opacity:1}.ge-shopping-cart .shopping-cart-popup .buttons-container{display:flex;justify-content:flex-end;padding-block:8px;padding-inline:4px}.ge-refine-list .select-only{visibility:hidden}.ge-refine-list calcite-label{padding:4px}.ge-refine-list .refine-list-item:hover .select-only{visibility:visible}.ge-variable-filter-bar{height:32px}.ge-variable-filter-bar .esriGECalciteButton.active{outline:2px solid var(--calcite-color-brand)}.ge-variable-filter-bar .more-filters-popup *:not(:first-child).filter-popup-content{border-top:1px solid #efefef}.ge-variable-filter-bar .filter-popup-content{padding-inline:1rem}.ge-variable-filter-bar .filter-popup-content .ge-filter-active{font-weight:var(--ge-font-weight-bold)}.ge-variable-filter-bar .filter-popup-content .range-filter-container{display:inline}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider{margin-block-start:-28px}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content{flex-wrap:wrap;justify-content:space-between;margin:0!important}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_minValueTextBox{order:1}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_maxValueTextBox{order:2}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_maxValueTextBox,.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_minValueTextBox{margin-inline:0;width:100px!important}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_container{order:0;flex:1 0 100%}.ge-variable-filter-bar .filter-popup-content .range-filter-container .esriGECalciteNumericalSlider .slider_content .slider_container .slider_sliderContainer{inset-inline-start:-6px}.ge-data-browser{overflow-y:hidden;display:flex}.ge-data-browser.extra-margin-inline .browser-content-container{margin-inline:8px}.ge-data-browser.extra-margin-block .browser-content-container .browser-view-container .browser-main-view .search-heading{margin-block-start:16px}.ge-data-browser.extra-margin-block .browser-content-container .browser-view-container .browser-main-view .explore-chips{margin-block-start:16px;margin-block-end:28px}.ge-data-browser .browser-navigation-panel{height:100%;width:250px;overflow:auto;border-inline-end:1px solid var(--calcite-color-border-3)}.ge-data-browser .browser-navigation-panel calcite-block[open]{margin-block-start:8px}.ge-data-browser .browser-navigation-panel .navigation-tree-row{width:100%;color:var(--calcite-color-text-2)}.ge-data-browser .browser-navigation-panel .navigation-tree-row calcite-icon{color:var(--calcite-color-text-3)}.ge-data-browser .browser-navigation-panel .navigation-tree-row .ba-custom-icon{flex-shrink:0;width:16px;height:16px;background-size:contain;background-position:center;background-repeat:no-repeat}.ge-data-browser .browser-content-container{display:flex;flex-direction:column;flex-grow:1}.ge-data-browser .browser-content-container .browser-view-container{flex:1 1 auto;display:flex;overflow:hidden}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view{display:flex;flex-direction:column;width:100%}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .search-heading{margin-block-start:8px}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .search-mode-select{border:1px solid var(--calcite-color-border-3);border-inline-end:none}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .search-mode-select.esriGECalciteSelect{min-height:30px}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .search-mode-select .search-mode-button{position:relative;z-index:1;height:30px}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .search-mode-select .item-label{color:var(--calcite-color-text-1);font-weight:var(--calcite-font-weight-medium)}.ge-data-browser .browser-content-container .browser-view-container .browser-main-view .explore-chips{height:24px;width:100%;padding-inline-start:8px;margin-block-start:12px;gap:8px}.ge-data-browser .browser-breadcrumb{margin-top:4px;align-items:baseline}.ge-data-browser .browser-breadcrumb .breadcrumb-link{--calcite-font-size--2: var(--ge-font-size-4)}.ge-data-browser .browser-breadcrumb .breadcrumb-label{min-height:20px;padding:3px 5px}.ge-data-browser .browser-breadcrumb .breadcrumb-label.heading{font-size:var(--ge-font-size-4)}.ge-data-browser .view-mode-button-bar{height:34px}.ge-data-browser .heading-font{font-size:var(--ge-font-size-4)}.ge-data-browser .browser-category-view{padding:4px;display:flex;flex:1;width:calc(100% - 8px);overflow:hidden}.ge-data-browser .browser-category-view .info-container .info-title{font-weight:var(--ge-font-weight-demi-bold);font-size:var(--ge-font-size-2)}.ge-data-browser .browser-category-view .esriGEPageNavigatorCalcite calcite-pagination.esriGECalcite{width:100%}.ge-data-browser .browser-category-view .category-cards-container{width:100%;display:flex;align-items:flex-start;align-content:flex-start;flex-wrap:wrap;overflow:hidden}.ge-data-browser .browser-category-view .category-cards-container .category-card-button,.ge-data-browser .browser-category-view .category-cards-container .category-card-button .category-card{width:168px;height:124px}.ge-data-browser .browser-category-view .category-cards-container .category-card-button.large-card-button,.ge-data-browser .browser-category-view .category-cards-container .category-card-button.large-card-button .category-card{width:200px;height:188px}.ge-data-browser .browser-category-view .category-cards-container .category-card{--calcite-color-foreground-1: transparent;text-align:start}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-thumbnail{height:40px;width:100%}.ge-data-browser .browser-category-view .category-cards-container .category-card .ba-custom-icon{width:32px;height:32px;background-size:contain;background-position:center;background-repeat:no-repeat}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-title{height:40px;line-height:20px;margin-block:-4px}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-subtitle{margin-top:12px;margin-bottom:-6px;font-size:var(--ge-font-size)}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-subtitle .card-description{height:32px;line-height:16px}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-subtitle .more-details-container{margin-top:2px}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-subtitle .more-details-container .more-details-anchor{margin-inline-start:-5px}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-subtitle .more-details-popup{background-color:#fff;max-width:400px;min-width:200px;padding:8px}.ge-data-browser .browser-category-view .category-cards-container .category-card .text-two-line{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.ge-data-browser .browser-category-view .category-cards-container .category-card .card-description{height:60px}.ge-data-browser .browser-category-view .esriGEPageNavigatorCalcite .expandedBlock{justify-content:normal}.ge-data-browser .browser-category-view .category-list-view{width:100%;overflow:auto}.ge-data-browser .browser-category-view .category-list-view .category-list-row{height:28px}.ge-data-browser .browser-category-view .category-list-view .category-list-row .ba-custom-icon{margin-top:-4px;width:16px;height:16px;background-size:contain;background-position:center;background-repeat:no-repeat}.ge-data-browser .browser-category-view .category-list-view .category-list-row .list-row-title{font-weight:var(--calcite-font-weight-medium);flex:1 1 30%}.ge-data-browser .browser-category-view .category-list-view .category-list-row .list-row-date{flex:1 1 5%}.ge-data-browser .browser-category-view .category-list-view .category-list-row .list-row-variables{flex:1 1 15%}.ge-data-browser .browser-category-view .category-list-view .category-list-row .more-details-container{position:absolute;inset-inline-end:4px}.ge-data-browser .browser-variable-grid .variable-cell{padding-block:3px;height:30px;cursor:default!important}.ge-data-browser .browser-variable-grid .variable-cell>:not(.variable-label){flex-shrink:0}.ge-data-browser .browser-variable-grid .variable-spacer{width:8px}.ge-data-browser .dropdown-border{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.ge-data-browser .browser-variables-view{width:100%}.ge-data-browser .browser-variables-view .subcategory-pagination{height:36px;overflow:auto;margin-block:4px;-ms-overflow-style:none;scrollbar-width:none}.ge-data-browser .browser-variables-view .subcategory-pagination::-webkit-scrollbar{display:none}.ge-data-browser .browser-variables-view .pagination-button{margin-inline:2px}.ge-data-browser .browser-variables-view .variable-cell{border-color:var(--calcite-color-border-3);border-bottom-style:solid;border-width:1px}.ge-data-browser .browser-variables-view .variable-cell .chip-in-button{padding-block-start:3px}.ge-data-browser .browser-variables-view .grid-variables-title{height:42px;background-color:#f6f6f6}.ge-data-browser .browser-variables-view .grid-variables-title .variables-count{margin-block-start:2px}.ge-data-browser .browser-variables-view .browser-variable-grid{overflow:hidden}.ge-data-browser .browser-variables-view .browser-variable-grid .esriGESelectableTreeList{height:100%;overflow-y:auto}.ge-data-browser .browser-chip-clickable{cursor:pointer;--calcite-chip-background-color: transparent}.ge-data-browser .browser-chip-new{block-size:24px!important}.ge-data-browser .esriGESelectableTreeList.esriGEFlowList .selectableTree_listItem.browser-selected-row{background-color:#bbb!important}.ge-browser-dnd-box{opacity:.7}.ge-browser-dnd-box .dnd-variable{padding:3px;max-width:300px;position:relative;inset-inline-start:-50px;inset-block-start:-10px}.ge-browser-select-animation{animation-name:ge-browser-select-animation}.ge-browser-select-animation.Anim_Common{animation-duration:.5s}@keyframes ge-browser-select-animation{60%{opacity:1}to{inset-inline-end:80px;top:20px;opacity:0;transform:scale(.5);transform-origin:right top}}arcgis-geoenrichment-databrowser{width:100%;height:100%}.ge-data-browser-panel{min-width:610px;min-height:320px;max-width:100%;max-height:100%;padding:12px 4px;box-sizing:border-box;display:flex;flex-direction:column}.ge-data-browser-panel .data-browser-header{padding-bottom:8px;padding-inline:8px;height:32px}.ge-data-browser-panel .data-browser-header .title{text-align:start;font-size:var(--ge-font-size-2);font-weight:var(--ge-font-weight-medium);color:var(--calcite-color-brand);width:100%}.ge-data-browser-panel .data-browser-header .country-select{text-align:center;width:100%}.ge-data-browser-panel .data-browser-header .country-select .ge-country-select,.ge-data-browser-panel .data-browser-header .country-select .ge-hierarchy-select{min-width:200px}.ge-data-browser-panel .data-browser-header .country-select .country-box{position:relative;top:-2px;height:28px;overflow-y:visible;z-index:1}.ge-data-browser-panel .data-browser-header .shopping-container{text-align:end;width:100%}.ge-data-browser-panel .data-browser-footer{padding-top:8px;padding-inline:8px;gap:5px}.esriGEReportPlayerNoDataPlaceholder{font-style:italic;display:flex;align-items:center;justify-content:center;padding:20px;color:#aaa;font-size:var(--ge-font-size)}.esriGEReportPlayerErrorMessage{color:red;display:flex;align-items:center;justify-content:center;font-size:var(--ge-font-size);padding:50px;pointer-events:none}.esriGEMapContainer .esri-attribution{display:none!important}.esriGEMapContainer div:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.esriGEMapContainerLegend.esri-legend{max-width:250px;text-align:start;position:relative;cursor:move;font-size:10px}.esriGEMapContainerLegend.esri-legend .esri-legend__service{padding:5px}.esriGEMapContainerLegend.esri-legend .esri-legend__service-label{font-size:10px;word-break:break-word}.esriGEMapContainerLegend.esri-legend .esri-legend__layer-table{margin-bottom:3px}.esriGEMapContainerLegend.esri-legend .esri-legend__layer{margin-left:5px;overflow:visible}.esriGEMapContainerLegend.esri-legend .esri-relationship-ramp--square__table-cell svg{margin:0!important}.sectionDynamicSettings_buttonBar .sectionDynamicSettings_filtersOnIndicator{position:absolute;top:-5px;inset-inline-start:-10px;background-color:#ff9f33;color:#fff;text-align:center;font-size:11px;height:15px;line-height:15px;font-weight:500;white-space:nowrap;border-radius:10px;padding:0 3px;z-index:1000}.esriGEReportPlayer_sectionDynamicSettings,.esriGEReportPlayer_sectionDynamicFilter{background-color:#fff;min-width:300px;padding-bottom:5px}.esriGEReportPlayer_sectionDynamicSettings .sectionDynamicSettings_row,.esriGEReportPlayer_sectionDynamicFilter .sectionDynamicFilter_row{padding:10px}.esriGEReportPlayer_sectionDynamicTableSettings .sectionDynamicTableSettings_label{min-width:80px}.esriGEReportPlayer_sectionDynamicRefineFilters .sectionDynamicRefineFilters_row{height:60px}.esriGEReportPlayer_sectionDynamicRefineFilters .sectionDynamicRefineFilters_row.noLabel{height:40px}.esriGEReportPlayer_sectionDynamicRefineFilters .numericalSlider_label{padding-bottom:5px}.esriGEReportPlayer_sectionDynamicMethodFilter .esriGECalciteInput{min-width:70px}.esriGEReportPlayer_section.hasDynamicSettingsToolbar .esriGEImageNavigator .imageNavigator_showAllImagesButton{top:25px}.esriGEExportDialog{min-width:400px;min-height:100px}.esriGEExportDialog .exportDialog_section{margin-inline:20px}.esriGEExportDialog .reportTitleBlock_label{min-width:60px}@media (max-width: 500px){.esriGEExportDialog{min-width:300px;max-width:50vw}}.esriGEConditionalStylingLegend{text-align:start}.esriGEConditionalStylingLegend.text{padding:5px}.esriGEConditionalStylingLegend .legendRow{white-space:nowrap;position:relative;margin-top:10px;margin-bottom:10px;padding-inline:5px;border-inline-start:3px solid transparent}.esriGEConditionalStylingLegend .symbolImage{background-size:contain;background-repeat:no-repeat;background-position:center;width:20px;height:20px}.esriGEConditionalStylingLegend .symbolChart{padding:5px;width:6px;height:6px;border-radius:10px}.esriGEConditionalStylingLegend .currentValue{border-inline-start:3px solid orange}.esriGEConditionalStylingLegend .previewLabel{padding:5px;min-width:70px;text-align:center}.esriGEConditionalStylingLegend .legendRow>div:first-child{background-repeat:no-repeat;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4gwcChMUPsUFNgAAAgdJREFUeNrt2rEJw0AABEHbqBf1j6pRN25A4OQ28kwoLlz+Qfz7uq7Xk/u+H7+f52lv/3P/eUFAWAgLYSEsEBbC4p8d/sfYF3snFq5ChIWwQFgIC2HB2OF/jH2xd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HBmPdY9sneiYWrEGEhLBAWwkJYMOY9ln2yd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HBmPdY9sneiYWrEGEhLBAWwkJYMOY9ln2yd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HBmPdY9sneiYWrEGEhLBAWwkJYMOY9ln2yd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HBmPdY9sneiYWrEGEhLBAWwkJYMOY9ln2yd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HBmPdY9sneiYWrEGEhLBAWwkJYMOY9ln2yd2LhKkRYCAuEhbAQFox5j2Wf7J1YuAoRFsICYSEshAVj3mPZJ3snFq5ChIWwQFgIC2HB2BddTqwG/vIJ1gAAAABJRU5ErkJggg==);background-size:100px}.esriGEElementToolbar{cursor:pointer;color:#fff;background-color:#000000d9;opacity:0;position:absolute;min-width:100px;padding-inline:5px;font-weight:400;font-style:normal;text-decoration:none}.esriGEElementToolbar:hover,.esriGEElementToolbar:focus{opacity:1}.esriGEReportPlayer_chartContainer svg{touch-action:auto!important}.esriGEReportPlayer_chartContainer .esriGEReportPlayer_chartContainerLevelLineH{position:absolute;border-top:1px solid orange;height:1px;pointer-events:none}.esriGEReportPlayer_chartContainer .esriGEReportPlayer_chartContainerLevelLineV{position:absolute;border-inline-start:1px solid orange;width:1px;pointer-events:none}.esriGEChartContainer_chartTooltip{text-align:start}.esriGEChartContainer_chartTooltip .chartTooltip_title{font-weight:700;display:flex;align-items:center}.esriGEChartContainer_chartTooltip .chartTooltip_row{display:flex;align-items:center;white-space:nowrap}.esriGEChartContainer_chartTooltip .chartTooltip_rowRich{max-width:500px}.esriGEChartContainer_chartTooltip .chartTooltip_current{font-weight:700}.esriGEChartContainer_chartTooltip .chartTooltip_label{margin-inline-end:20px}.esriGEChartContainer_chartTooltip a{color:var(--calcite-color-text-link)}.esriGEReportPlayer_chartContainer .chartContainer_comparisonSelectBlock .esriGEDisabledContent{opacity:.01}.esriGEComparisonList_areaItemRoot{padding-inline-start:20px;padding-inline-end:10px}.esriGEReportPlayer.isShowingAnimation .esriGEElementToolbar,.esriGEReportPlayer.isDrillingData .esriGEElementToolbar{display:none}.esriGEReportPlayer_dataDrillingViewDiv.esriGEReportPlayer{position:absolute;box-shadow:0 0 3px 3px #32323233}.esriGEReportPlayer_dataDrillingViewDiv.esriGEReportPlayer .topToolbar{inset-inline:0px;top:-50px;height:42px;position:absolute;padding-top:10px;justify-content:flex-end}.esriGEReportPlayer_dataDrillingViewDivScreen{background-color:#464646b3}.esriGEReportPlayer_dataDrillingViewDivScreen.mobile{background-color:#464646f2}.esriGEReportPlayer_dataDrillingViewDiv,.esriGEReportPlayer_dataDrillingViewDivScreen{z-index:var(--ge-report-player-data-drilling-z-index)}.esriGEReportPlayer .floatingTableSimpleElement.isImage,.esriGEReportPlayer .floatingTableSimpleElement.isShape,.esriGEReportPlayer .esriGEAdjustableGridSingleCell.isImage,.esriGEReportPlayer .esriGEAdjustableGridSingleCell.isShape{pointer-events:none}.esriGEReportPlayer .floatingTableSimpleElement.isImage.hasConditionalStyling,.esriGEReportPlayer .esriGEAdjustableGridSingleCell.isImage.hasConditionalStyling{pointer-events:initial}.esriGEAdjustableGridCell_cellTooltipContent{text-align:start}.esriGEAdjustableGridCell_cellTooltipContentValue{font-weight:700}.esriGEAdjustableGridCell_cellTooltipContentSeparator{height:1px;border-top:1px solid #b2b2b2}.esriGEAdjustableGrid_cellTooltip_expression{max-width:1000px;max-height:250px;overflow-y:auto;overflow-x:hidden;color:#4c4c4c;font-size:var(--ge-font-size)}.esriGEAdjustableGrid_cellTooltip_expression .esriGEAdjustableGrid_cellTooltip_expressionVariable{border:1px solid #b2b2b2;background-color:#fff;padding:3px;height:20px;min-width:250px;text-align:center;display:table-cell;vertical-align:middle}.esriGEAdjustableGrid_cellTooltip_expression .esriGEAdjustableGrid_cellTooltip_expressionNumber,.esriGEAdjustableGrid_cellTooltip_expression .esriGEAdjustableGrid_cellTooltip_expressionText{border:1px solid #b2b2b2;background-color:#fff;text-align:center;padding:3px;height:20px;line-height:20px;font-size:1em}.esriGEAdjustableGrid_cellTooltip_expression .esriGEAdjustableGrid_cellTooltip_expressionOperator{border:1px solid #b2b2b2;background-color:#a9a9a9;color:#fff;text-align:center;font-weight:700;margin:3px;padding:3px;width:15px;height:20px;line-height:20px;font-size:1.1em}.esriGEAdjustableGrid.hasResizableColumns>.esriGEAdjustableGridCell>.cell_widthSizer{cursor:ew-resize;position:absolute;inset-inline-end:0;top:0;bottom:0;background-color:#64646403;border:none;opacity:0;width:6px;border-inline-end:3px solid gray}.esriGEAdjustableGrid.hasResizableColumns:not(.isBeingResized)>.esriGEAdjustableGridCell:not(.lastInRow):hover>.cell_widthSizer,.esriGEAdjustableGrid.hasResizableColumns>.esriGEAdjustableGridCell.isBeingResized>.cell_widthSizer{opacity:1}.esriGEAdjustableGrid_resizableColumnTooltip{position:absolute;padding:10px;color:#fff;text-align:center;background-color:#000000d9;z-index:1000}.esriGE_dynamicInfographic .OneVarMultiComparison_Row_highlighted{background-color:#0091fb33!important}.esriGEReportPlayer_infographicsPage{position:relative}.esriGEReportPlayer_infographicsPage .infographicPage_infographicRoot{display:inline-block;position:relative;min-width:30px;min-height:30px}.esriGEReportPlayer_infographicsPage .infographicPage_infographicRootSectionNode{position:relative;transform-origin:50% 50%;display:inline-block;border:1px solid #dddddd;overflow:hidden}.esriGEReportPlayer_infographicsPage.scaleSectionsToFit .esriGEPagination .esriGEPagination_PageAndArrows{bottom:0}.esriGEReportPlayerMobile .esriGEReportPlayer_infographicsPage .infographicPage_infographicRoot{margin-top:5px}.esriGEReportPlayerMobile .esriGEReportPlayer_infographicsPage>div>.esriGEPagination>.esriGEPagination_PageAndArrows>.esriGEPagination_Triangle{display:none}.esriGEReportPlayerMobile .esriGEReportPlayer_infographicsPage>div>.esriGEPagination>.esriGEPagination_Bullets{inset-inline-start:auto;inset-inline-end:5px;height:auto;bottom:5px;pointer-events:none}.esriGEReportPlayerMobile .esriGEReportPlayer_infographicsPage>div>.esriGEPagination>.esriGEPagination_Bullets .esriGEPagination_Bullet{width:5px;height:5px;margin:5px}.esriGEComparisonTableInfographic .esriGEAdjustableGrid>.esriGEAdjustableGridCell>.gridCellHighlightScreen{background-color:#0091fb33!important;pointer-events:none}.esriGEPaginatableTableInfographic .esriGEAdjustableGrid>.esriGEAdjustableGridCell>.gridCellHighlightScreen{background-color:#0091fb33!important;pointer-events:none}.esriGEPaginatableTableInfographic .esriGEPaginationItemsNodeChildDiv{text-align:center}.esriGEPaginatableTableInfographic .esriGEPaginationItemsNodeChildDiv>div{text-align:start}.esriGEPaginatableTableInfographic .HFXPagination .pagination_BackButton,.esriGEPaginatableTableInfographic .HFXPagination .pagination_ForwardButton{background-repeat:no-repeat;background-color:#646464bf;border-radius:50%;background-position:center;background-size:10px;cursor:pointer;opacity:0}.esriGEPaginatableTableInfographic .HFXPagination:hover .pagination_BackButton,.esriGEPaginatableTableInfographic .HFXPagination:hover .pagination_ForwardButton,.esriGEPaginatableTableInfographic .HFXPagination:focus-within .pagination_BackButton,.esriGEPaginatableTableInfographic .HFXPagination:focus-within .pagination_ForwardButton,.esriGEPaginatableTableInfographic .HFXPagination:focus .pagination_BackButton,.esriGEPaginatableTableInfographic .HFXPagination:focus .pagination_ForwardButton{opacity:1}.esriGEPaginatableTableInfographic .HFXPagination .pagination_BackButton{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23FFF'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M30%202L3%2035l27%2033'/%3e%3c/svg%3e")}.esriGEPaginatableTableInfographic .HFXPagination .pagination_ForwardButton{background-image:url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='70'%3e%3cpath%20fill='none'%20stroke='%23FFF'%20stroke-miterlimit='10'%20stroke-width='5'%20d='M2%202l27%2033L2%2068'/%3e%3c/svg%3e")}.esriGEPaginatableTableInfographic .HFXPagination .pagination_BackButton.disabled,.esriGEPaginatableTableInfographic .HFXPagination .pagination_ForwardButton.disabled{display:none}.esriGEReportPlayerMobile .HFXPagination .pagination_BackButton,.esriGEReportPlayerMobile .HFXPagination .pagination_ForwardButton{opacity:1}.esriGEReportPlayer{position:relative;min-height:150px}.esriGEReportPlayer.esriGEReportPlayerFullScreen{position:absolute;inset:0;z-index:var(--ge-report-player-z-index)}.esriGEReportPlayer .reportPlayer_sidePageNavigator{position:absolute}.esriGEReportPlayer.playerThemeDark{background-color:var(--ge-report-player-background)}.esriGEReportPlayer.playerThemeLight{background-color:#fff}.esriGEReportPlayer .esriGEReportPlayerWaitingNode{min-width:250px;min-height:150px}.esriGEReportPlayer .esriGEWaitingMessageProgressBar{height:5px}.esriGEReportPlayer.playerThemeDark .esriGEReportPlayerProgress{background-color:#353535cc}.esriGEReportPlayer.playerThemeLight .esriGEReportPlayerProgress{background-color:#fffc}.esriGEReportPlayer .esriGEReportPlayer_pageBreak{display:none}.esriGEReportPlayer.playerThemeDark .esriGEReportPlayerErrorMessage{color:#fff}.esriGEPlayerToolbar{--calcite-icon-color: var(--calcite-color-text-1);--calcite-color-text-2: var(--calcite-color-text-1);--calcite-color-text-3: var(--calcite-color-text-1);height:50px;white-space:nowrap;position:relative;background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1);border-bottom:1px solid var(--calcite-color-border-2)}.esriGEPlayerToolbar calcite-tooltip{white-space:normal}.esriGEPlayerToolbar .spaced{margin-inline:20px}.esriGEPlayerToolbar .spaced .esriGECalciteSelect{max-width:100%}.esriGEPlayerToolbar .esriGEDisabledContent,.esriGEPlayerToolbar .esriGEProgress{background-color:var(--calcite-color-foreground-3)}.esriGEPlayerToolbar .playerToolbar_closeButton{width:24px;height:24px;background-repeat:no-repeat;background-size:24px;background-position:center;cursor:pointer}.esriGEPlayerToolbar .playerToolbar_commandButtonContainer{width:48px}.esriGEPlayerToolbar .esriGECalciteSelect>calcite-button,.esriGEPlayerToolbar .playerToolbar_commandButtonContainer{--calcite-color-text-1: var(--player-toolbar-color);--calcite-color-border-1: var(--player-toolbar-color);--calcite-icon-color: var(--player-toolbar-color)}.calcite-mode-dark.esriGEReportPlayerToolbar_areasSelectList{background-color:var(--calcite-color-foreground-1)}@media (max-width: 1000px){.esriGEPlayerToolbar .spaced{margin-inline:15px}}@media (max-width: 700px){.esriGEPlayerToolbar .spaced{margin-inline:10px}}.esriGEReportPlayer .playerToolbar_outerButton{margin-inline-start:5px}.esriGEReportPlayer .reportPlayer_playerAfterToolbarDiv{position:absolute;top:5px;inset-inline-end:5px}.esriGEReportPlayer .reportPlayer_playerAfterToolbarDiv.playerToolbar_parentHasScroll{inset-inline-end:25px}.esriGEReportPlayer .reportPlayer_playerAfterToolbarDiv.playerToolbar_parentHasScroll.isMobileDevice{inset-inline-end:5px}.esriGEReportPlayerToolbar_areasSelectList .listItem{padding:5px}.esriGEReportPlayerToolbar_areasSelectList .benchmarkIndicator{position:absolute;inset-inline-end:-10px;top:0;border-radius:50%;width:5px;height:5px;background-color:orange}.esriGEReportPlayerToolbar_areasSelectList .areaCard_only{margin:10px 5px;border:1px solid #dddddd}.esriGEReportPlayerToolbar_areasSelectList .areaCard_groupTop{margin:10px 5px 0;border:1px solid #dddddd;border-bottom:none}.esriGEReportPlayerToolbar_areasSelectList .areaCard_groupMiddle{margin:0 5px;border:1px solid #dddddd;border-top:none;border-bottom:none}.esriGEReportPlayerToolbar_areasSelectList .areaCard_groupBottom{margin:0 5px 10px;border:1px solid #dddddd;border-top:none}.esriGEReportPlayerToolbar_comparisonSettings{padding-block:1px;padding-inline-start:10px;padding-inline-end:20px;background-color:var(--calcite-color-foreground-1)}.esriGEReportPlayer_reportContainer{overflow:auto;display:flex;justify-content:center;padding:30px}.esriGEReportPlayer_reportContainer a{text-decoration:none;color:inherit}.esriGEReportPlayer_reportContainerGrid{position:relative;overflow:auto}.esriGEReportPlayer_reportContainerGrid .reportContainerGrid_gridZoomFillerContainer{vertical-align:top;position:relative;overflow:visible}.esriGEReportPlayer_reportContainerGrid .reportContainerGrid_gridZoomFillerContainer .reportContainerGrid_gridContainerWrapper{position:relative;outline:1px solid #b2b2b2}.esriGEReportPlayer_reportContainerGrid .reportContainerGrid_gridZoomScalableContainer{position:absolute;inset-inline-start:0;top:0;overflow:visible}.esriGEReportPlayer_reportContainerGrid a{color:var(--calcite-color-text-link)}.esriGEReportPlayer_reportContainerPagination{position:relative}.esriGEReportPlayer_reportContainerPagination .reportContainerPagination_infographicPageDiv{display:flex;justify-content:center}.esriGEReportPlayer_reportContainerPagination .esriGEPaginationItemsNodeChildDiv{text-align:center}.esriGEReportPlayer_reportContainerPagination .esriGEPaginationItemsNodeChildDiv>div{text-align:start}.esriGEReportPlayer_reportContainerPagination .esriGEPagination.esriGEInfographicsPagePagination>.esriGEPagination_PageAndArrows>.esriGEPagination_Items{inset-inline:60px}.esriGEReportPlayer_reportContainerPagination .esriGEPagination.esriGEInfographicsPagePagination>.esriGEDisabledContent{opacity:.01;position:absolute;inset:0;margin-top:0!important}.esriGEReportPlayer_reportContainerPagination .reportContainerPagination_pageNavigatorDiv{position:absolute;inset-inline:0;bottom:0;height:30px;text-align:center}.esriGEReportPlayer.playerThemeDark .esriGEPageNavigator{color:#fff}.esriGEReportPlayerMobile .esriGEReportPlayer_reportContainerPagination>div>.esriGEReportPlayer_infographicsPage>.esriGEPagination>.esriGEPagination_PageAndArrows>.esriGEPagination_Items{inset-inline:0}.esriGEReportPlayerMobile .esriGEReportPlayer_reportContainerPagination .reportContainerPagination_pageNavigatorDiv{inset-inline-start:auto;inset-inline-end:5px;height:auto;bottom:5px;background-color:gray;padding:3px}.esriGEReportPlayer_reportContainerStack{position:relative;overflow:auto}.esriGEReportPlayer_reportContainerStack .reportContainerStack_zoomFillerContainer{display:inline-block;vertical-align:top;position:relative;overflow:visible}.esriGEReportPlayer_reportContainerStack .reportContainerStack_zoomScalableContainer{position:absolute;inset-inline-start:0;top:0;overflow:visible}.esriGEReportPlayer_reportContainerStackAll{position:relative;overflow:auto}.esriGEReportPlayer_reportContainerStackAll .reportContainerStackAll_toolbarDiv{background-color:#fff;border-bottom:1px solid rgb(148,148,148)}.esriGEReportPlayer_reportContainerStackAll .reportContainerStackAll_zoomFillerContainer{position:relative;overflow:visible}.esriGEReportPlayer_reportContainerStackAll .reportContainerStackAll_zoomScalableContainer{position:absolute;inset-inline-start:0;top:0;overflow:visible}`,ec=class extends Bn{constructor(){super(),this.analysisVariables="",this.applyButtonText="",this.countryId="US",this.hierarchyId="",this.derivativeSelectionMode="single",this.hideApplyButton=!1,this.hideCancelButton=!1,this.hideHierarchies=!1,this.hideShoppingCart=!1,this.locale="en-US",this.selectionLimit=-1,this.showExportButtons=!1,this.customTitle="",this.arcgisDBOnLoadCompleted=Bi(),this.arcgisDBOnCancelClick=Bi(),this.arcgisDBOnApplyClick=Bi()}static{this.properties={analysisVariables:1,applyButtonText:1,compactView:5,countryId:1,hierarchyId:1,dataBrowser:0,derivativeSelectionMode:1,geoenrichmentURL:1,hideApplyButton:5,hideCancelButton:5,hideHierarchies:5,hideShoppingCart:5,locale:1,selectionLimit:9,showExportButtons:5,customTitle:1}}static{this.shadowRootOptions=Dn}static{this.styles=[Zd]}_getSelectedVariables(){return this.dataBrowser.dataBrowserBase.getCurrentSelection()}_convertToVariableDerivativeName(e){let t=[];return e.forEach(((e,i,r)=>{if(e&&e.length>=2)if("/"===e.charAt(1)){let i=e.slice(0,1).toLowerCase(),r="",o="";switch(i){case"n":r=e.slice(2,e.length);break;case"r":-1!==e.indexOf(".ACS")&&(e=e.replace(".ACS",".REL")),r=e.slice(2,e.length);break;default:o="_"+i.toUpperCase(),r=e.slice(2,e.length)+o}t.push(r)}else t.push(e)})),t}_convertFromVariableDerivativeName(e){let t=[];return e.forEach((e=>{if(-1===e.indexOf("_"))t.push(e);else try{let i=e.lastIndexOf("_"),r=e.substring(i+1,e.length),o=e;if(1===r.length)switch(r){case"A":o="a/"+e.substring(0,i);break;case"P":o="p/"+e.substring(0,i);break;case"I":o="i/"+e.substring(0,i);break;case"R":e.charAt(".ACS")&&(e=e.replace(".ACS",".REL"))}t.push(o)}catch{console.error(`Failed to convert ${e} from variable derivative postfix to prefix format`),t.push(e)}})),t}onExportCSVClick(){let e=this._convertToVariableDerivativeName(this._getSelectedVariables());navigator.clipboard.writeText(e),ua({message:"The selected variables have been copied to the clipboard."})}onExportJSONClick(){let e=this._convertToVariableDerivativeName(this._getSelectedVariables()),t={};t.analysisVariables=e,t.useData={},t.useData.sourceCountry=this.el.dataBrowser.countryID,t.useData.hierarchy=this.el.dataBrowser.hierarchyID,navigator.clipboard.writeText(JSON.stringify(t)),ua({message:"The selected variables have been copied to the clipboard."})}onCancelClick(){this.arcgisDBOnCancelClick.emit()}onApplyClick(){this.arcgisDBOnApplyClick.emit(this.getSelectedVariables())}getSelectedVariables(){let e,t,i,r=this.dataBrowser.variables.manager.getCurrentCountryID();null===r&&(r=void 0),void 0!==r&&(e=this.dataBrowser._countrySelect._countrySelect.getSelectedItem().label,t=this.dataBrowser.variables.manager.getCurrentHierarchyID(),null!==t&&(i=this.dataBrowser._countrySelect._countries[r].hierarchies.find((e=>e.ID===t)).alias));let o={countryId:r,countryAlias:e,hierarchyId:t,hierarchyAlias:i},s=this._getSelectedVariables(),a=s.map((e=>this.dataBrowser.variables.getAliasWithType(e)));s=this._convertToVariableDerivativeName(s);let n=[];return s.forEach(((e,t)=>{n.push({value:e,label:a[t]})})),o.selectedValues=n,o}loaded(){(function(e){He=new URL(e,location.href).href,void 0===l.assetsPath&&(l.assetsPath=We(He,we("report-player-dist-build")?"scripts/assets":"esri/assets")),Ue.resolve()})("."),this.locale&&function(e){t(e)}(this.locale),this.geoenrichmentURL&&0!==this.geoenrichmentURL.length&&function(e){ii=e,ri=null,ci(null)}(this.geoenrichmentURL);let e=document.getElementById("data-browser-container");if(e)try{et("DataBrowser").then((()=>{let t=new Kd({title:this.customTitle,countryBox:this.hideHierarchies?"countries":"hierarchies",countryID:this.countryId,hierarchyID:this.hierarchyId,shoppingCart:!this.hideShoppingCart,showShoppingCartApplyButton:!1,selectionLimit:this.selectionLimit,derivativeSelectionMode:this.derivativeSelectionMode,compactView:this.compactView,applyButtonText:this.applyButtonText}).placeAt(e,"replace");this.dataBrowser=t;let i=t.domNode.querySelector('[data-attach-point="_footer"]'),r=t.domNode.querySelector('[data-attach-point="_export"]');if(this.dataBrowser.applyButton.domNode.addEventListener("click",(()=>{this.onApplyClick()})),this.dataBrowser.cancelButton.domNode.addEventListener("click",(()=>{this.onCancelClick()})),t.launch().then((()=>{if(this.hideApplyButton&&void 0!==i&&i.removeChild(this.dataBrowser.applyButton.domNode),this.hideCancelButton&&void 0!==i&&i.removeChild(this.dataBrowser.cancelButton.domNode),this.analysisVariables&&this.analysisVariables.length>0){let e=this.analysisVariables.replaceAll(" ","").split(","),t=this._convertFromVariableDerivativeName(e);e=e.filter((e=>null!==this.dataBrowser.variables.get(e))),t=t.filter((e=>null!==this.dataBrowser.variables.get(e))),this.dataBrowser.dataBrowserBase.syncShoppingCart(t),this.dataBrowser.dataBrowserBase.selection=e}})),this.showExportButtons&&r){xo({text:"Export as CSV",kind:"brand",appearance:"outline",onClick:()=>this.onExportCSVClick(),active:!0},r),xo({text:"Export as JSON",kind:"brand",appearance:"outline",onClick:()=>this.onExportJSONClick(),active:!0},r)}function o(){let e=function(){let e=er("div",{style:"position: fixed; inset: 0"},document.body),t={w:e.clientWidth,h:e.clientHeight};return e.remove(),t}();t.domNode.style.width=.95*e.w+"px",t.domNode.style.height=.95*e.h+"px"}o(),wi(window,"resize",(()=>{o(),t.resize(),t.domNode.style.width="",t.domNode.style.height=""})),this.arcgisDBOnLoadCompleted.emit()})).catch((e=>{}))}catch{}}render(){return Fn`<div id=data-browser-container style="margin-inline-start:5%;background-color:lightgray;min-height:800px;"></div>`}};return Rn("arcgis-geoenrichment-databrowser",ec),ec}),"intl","applications/Components/baUtils","applications/Components/baUtils","config","kernel","request","core/urlUtils","core/accessorSupport/decorators","core/Accessor","Color");