"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-daa7d7"],{5839:(e,n,t)=>{t.d(n,{D:()=>s,S:()=>i,a:()=>E,b:()=>l,c:()=>c,f:()=>R,g:()=>u});const i={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Hindi:"hi",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",Norwegian:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},r=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"],a={"ar-BH":"ar","en-AU":"en","en-CA":"en","en-GB":"en","en-US":"en","es-ES":"es","es-MX":"es","de-CH":"de","de-AT":"de","de-DE":"de","fr-CA":"fr","fr-CH":"fr","fr-FR":"fr","it-CH":"it","it-IT":"it",nb:"no",nn:"no","nn-no":"no",ind:"id",ukr:"uk"},o=[i.Arabic,i.Hebrew],s=i.English;function l(e){return!0===e?"rtl":"ltr"}function u(e=document.documentElement){const n=(t="[lang]",function e(n){let i;return i=void 0===n||n===document||n===window?null:n.closest(t)||e(n.getRootNode().host),i}(e));var t;const r=n?.lang??window.navigator.language,l=Object.values(i),u=s,c=function(e,n){const t=s;let i=e?.toLowerCase();if(void 0!==i&&-1!==i.indexOf("-")){const[e,n]=i.split("-");i=`${e}-${n.toUpperCase()}`}return i?!0===Object.keys(a).includes(i)?n[i]:i:t}(r,a);return{locale:l.includes(c)?c:u,rtl:o.includes(r)}}async function c(e,n){const t=e.tagName.toLowerCase(),{locale:i,rtl:r}=u(e),a=await async function(e){const{path:n,locale:t,baseURL:i}=e;let r={};try{const e=await fetch(`${i}t9n/${n}.t9n.${t}.json`);r=await e.json()}catch(e){const t=await fetch(`${i}t9n/${n}.t9n.${s}.json`);r=await t.json()}return r}({path:t,locale:i,baseURL:n});return{strings:a,dir:l(r),locale:i}}function E(e,n){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const t=window.location.href,i=new URL(t).origin,r=new URL(n).origin;i!==r&&(e=`${r}${e}`)}return e}function R(e,n="en"){let t=n;!0===Object.keys(a).includes(n)&&(t=a[n]);const i=t.toLocaleLowerCase();return!0===r.includes(i)&&(e=e.replace(/^https?:\/\/[^/]+\/en/,(e=>e.replace("en",i)))),e}},42335:(e,n,t)=>{t.d(n,{A:()=>l,E:()=>c,G:()=>E,J:()=>r,M:()=>u,P:()=>R,U:()=>i,a:()=>o,c:()=>a,d:()=>s});const i={IDLE:"idle",VALID:"valid",INVALID:"invalid"},r={RASTER_FUNCTION_TEMPLATE:"RasterFunctionTemplate",RASTER_FUNCTION_VARIABLE:"RasterFunctionVariable",ARGUMENT_ARRAY:"ArgumentArray",RECORD_SET:"RecordSet",ECD_FILE:"ECDFile"},a="ConvertRasterFunctionTemplate",o={MATCH_VARIABLE:"MatchVariable",UNION_DIMENSION:"UnionDimension"},s={name:"Raster",isDataset:!0,isPublic:!1,type:r.RASTER_FUNCTION_VARIABLE},l={RFX_DTEX_COMMON_SELECT:"RFX-DTEX-COMMON-SELECT",RFX_DTE_COMMON_CHECKBOX:"CALCITE-CHECKBOX",RFX_DTE_COMMON_TEXTINPUT:"CALCITE-INPUT-TEXT",RFX_DTE_COMMON_NUMBERINPUT:"CALCITE-INPUT-NUMBER",RFX_DTE_RASTER_INPUT:"RFX-DTE-RASTER-INPUT",RFX_DTE_FEATURE_SELECT:"RFX-DTE-FEATURE-SELECT",RFX_DTE_MULTIPLE_INPUT:"RFX-DTE-MULTIPLE-INPUT",RFX_DTEX_RASTER_VARIABLES_LIST:"RFX-DTEX-RASTER-VARIABLES-LIST",RFX_CTE_RANGED_VALUE_EDITOR:"RFX-CTE-RANGED-VALUE-EDITOR",RFX_CTE_GAMMA_EDITOR:"RFX-CTE-GAMMA-EDITOR",RFX_DTE_COLOR_RAMP_SELECTOR:"RFX-DTE-COLOR-RAMP-SELECTOR",RFX_DTE_EXTENT:"RFX-DTE-EXTENT",RFX_DTE_JSON_FILE_UPLOADER:"RFX-DTE-JSON-FILE-UPLOADER",RFX_DTE_RFT_BROWSER:"RFX-DTE-RFT-BROWSER",RFX_CTE_FACTOR_FUNCTION_EDITOR:"RFX-CTE-FACTOR-FUNCTION-EDITOR",RFX_CTE_NEIGHBORHOOD_VALUES:"RFX-CTE-NEIGHBORHOOD-VALUES",RFX_CTE_SYNCHRONIZE_OUTPUT_UNIT_PICKER:"RFX-CTE-SYNCHRONIZE-OUTPUT-UNIT-PICKER",RFX_CTE_DIMENSIONLESS_EDITOR:"RFX-CTE-DIMENSIONLESS-EDITOR"},u={ANALYSIS:"analysis",EDITOR:"editor"},c={ANALYSIS:"analysis",ITEM:"item"},E={textInput:"text-input",text:"text",raster:"raster-input",number:"number-input",boolean:"check-box",switch:"switch",field:"field-select",color:"color-input",select:"select",icon:"icon"},R={loading:"loading",success:"success",error:"error"}},93442:(e,n,t)=>{t.d(n,{A:()=>d,B:()=>T,a:()=>_,b:()=>N,c:()=>m,d:()=>C,e:()=>I,f:()=>y,g:()=>k,h:()=>h,i:()=>p,j:()=>A,k:()=>F,l:()=>g,m:()=>D,n:()=>w,o:()=>L,p:()=>U,q:()=>X,r:()=>b,s:()=>O,t:()=>x,u:()=>M,v:()=>v,w:()=>P,x:()=>B,y:()=>H,z:()=>J});var i=t(588),r=t(5294),a=t(55448),o=t(2924),s=t(11840),l=t(52373),u=t(33752),c=t(440),E=t(66744),R=t(92991),f=t(42335);function d(e){return!(!e.raster||!e.url?.toLowerCase().includes("/rasterrendering/imageserver"))}function T(e,n){const t=(0,R.x)(e,n,"id");return 1===t?.length&&d(t[0])}function m(e){return r.clone(e)}function _(){return r.clone(f.d)}function O(e){return a.urlToObject(e).path}function N(e){return e?.indexOf("?token=")>0&&(e=e.slice(0,e.indexOf("?token="))),e}function C(e){let n=N(e?.url);"feature"===e.type&&(n=`${n}/${e.layerId??0}`);const t=i.default.findCredential(e.url);return void 0!==t&&(n=`${n}?token=${t.token}`),n}async function I(e,n){let t;try{t=await o.default.fromArcGISServerUrl({url:O(e),properties:n})}catch(e){console.error("error getting layer from url")}return t}function S(e){return e?.map((e=>(!1===e.isSlice&&2===e.values.length&&(e.values=[e.values]),e)))}function y(e){const n={url:C(e),name:e.title};if(!(0,R.i)(e.rasterFunction)){let t=e.rasterFunction.toJSON();t=t.rasterFunctionDefinition??t,(t.thumbnail||t.thumbnailEx)&&(t.thumbnail=t.thumbnailEx=null),n.renderingRule=t}if("imagery"===e.type){const t=e.definitionExpression,i=e.mosaicRule;if((0,R.i)(t))(0,R.i)(i)||(n.mosaicRule=i.toJSON?.());else if(!(0,R.i)(i)){const e=i.clone();e.where=t,n.mosaicRule=e.toJSON()}}if("imagery-tile"===e.type?e.sourceJSON?.hasMultidimensions:e?.hasMultidimensions){const t=l.default.fromJSON(n.mosaicRule),i=e.multidimensionalSubset?.clone();(0,R.q)(e)&&!(0,R.i)(i)&&(n.multidimensionalSubset=S(i.subsetDefinitions)),(0,R.i)(t)||(t.multidimensionalDefinition=(0,R.i)(i)?[]:S(i.subsetDefinitions),n.mosaicRule=t.toJSON())}return n}function h(e,n){if((0,R.i)(e?.url)||(0,R.i)(n))return;const t=O(e.url),i=n.find((n=>n.url===t&&n.title===e.name))?.id;return i}async function p(e){if((0,R.i)(e?.url))return;const n=r.clone(e);let t;n.name||(n.name=function(e){const n=e.split("/");return n[n.length-2]}(n.url));try{if(t=await I(n.url,{title:n.name}),!(0,R.i)(e.mosaicRule)){const n=l.default.fromJSON(e.mosaicRule);t.mosaicRule=n}if(!(0,R.i)(e.renderingRule)){const n=E.default.fromJSON(e.renderingRule);t.rasterFunction=n}}catch(e){console.log("error getting layer from url")}return t}async function A(e){const n=e?.url,t=e?.name;if((0,R.i)(n))return;let i;return i=await I(n),i.name=t,i}function F(e){return e?.toLocaleLowerCase().indexOf("f")>=0}function g(e){const n=e&&(e.extent||e.fullExtent);if((0,R.i)(n))return;const{xmin:t,ymin:i,xmax:r,ymax:a,spatialReference:o}=n,{wkid:s,latestWkid:l,wkt:u}=o,c={xmin:t,ymin:i,xmax:r,ymax:a};return(0,R.i)(s)||(0,R.N)(c,"spatialReference.wkid",s),(0,R.i)(l)||(0,R.N)(c,"spatialReference.latestWkid",l),(0,R.i)(u)||(0,R.N)(c,"spatialReference.wkt",u),c}function D(e){let n=e?.extent.clone();n=n?.shiftCentralMeridian();const{xmin:t,ymin:i,xmax:r,ymax:a,spatialReference:o}=n||{},{wkid:s,latestWkid:l,wkt:u}=o||{},c={xmin:t,ymin:i,xmax:r,ymax:a};return(0,R.i)(s)||(0,R.N)(c,"spatialReference.wkid",s),(0,R.i)(l)||(0,R.N)(c,"spatialReference.latestWkid",l),(0,R.i)(u)||(0,R.N)(c,"spatialReference.wkt",u),c}async function w(e){if((0,R.i)(e))return Promise.resolve(void 0);const n=await e.queryFeatures({returnGeometry:!0,where:"1 = 1"});if((0,R.i)(n))return Promise.resolve(void 0);const t=n.features?.map((e=>e?.geometry));return t}async function L(e){const n=await(e?.generateRasterInfo(e.rasterFunction)),t=n?.keyProperties?.ChangeAnalysisParameters,i=t?.AnalysisType;return"CCDC"===i}function U(e,n){let t=!0;((0,R.p)(e)||(0,R.q)(e))&&!1===e.sourceJSON?.allowAnalysis&&(t=!1);return e.portalItem?.typeKeywords?.includes("Hosted Service")??!1?t=!!e.portalItem.isOrgItem||t:t||void 0===n||(t=e.url?.indexOf(n)>0),t}function X(e){return e.filter((e=>U(e)))}function b(e,n){const t=JSON.stringify(n);return new s.default({url:e,raster:btoa((0,R.y)(t)),persistenceEnabled:!1})}function x(e){return c.createRenderer({layer:e,stretchType:"min-max",dynamicRangeAdjustment:!0,useGamma:!1})}function k(e){const n=[],t=[];return e?.forEach((e=>{"imagery"!==e.type&&"imagery-tile"!==e.type||d(e)?"feature"===e.type&&t.push(e):n.push(e)})),{imageryLayers:n,featureLayers:t}}async function M(e){let n;try{n=await e.load()}catch(e){console.log("error loading layer")}return n}async function v(e){let n;return"object"==typeof e&&"itemId"in e&&!1===(0,R.i)(e.itemId)?n=await async function(e){let n;try{n=await o.default.fromPortalItem({portalItem:new u.default({id:e,portal:R.s?.portal})})}catch(e){console.log("error getting layer from itemId")}return n}(e.itemId):"object"==typeof e&&"url"in e&&!1===(0,R.i)(e.url)&&(n=await I(e.url)),void 0!==n&&(n=await M(n)),void 0!==e.itemName&&void 0!==n&&(n.title=e.itemName),n}async function P(e,n){let t,i=e;const r=h(e,n);if((0,R.i)(r)){const t=await p(e);!1===t.loaded&&await t.load(),i=y(t),n.push(t)}else t=n.find((e=>r===e.id)),t&&(i=y(t));return i}function B(e){return __esri.Field.fromJSON(e?.toJSON())}function H(e){return"function"==typeof e?.toJSON?e.toJSON():e}function J(e){return"function"==typeof e?.toJSON?e.toJSON():e}}}]);