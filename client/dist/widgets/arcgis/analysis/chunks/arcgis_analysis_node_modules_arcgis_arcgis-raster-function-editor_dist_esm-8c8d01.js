"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-8c8d01"],{6597:(e,t,i)=>{i.r(t),i.d(t,{rfx_editor_wrapper:()=>a.R});var a=i(34756);i(83628),i(5294),i(13661),i(18423),i(21255),i(35431),i(5839),i(92991),i(32513),i(44345),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(42335),i(33797),i(23795),i(17902),i(56451),i(15026),i(71802),i(36596),i(38124),i(74670),i(24360),i(48001),i(93442),i(71144)},34756:(e,t,i)=>{i.d(t,{R:()=>m});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),r=i(92991),o=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=i(33797),d=(i(23795),i(17902),i(56451),i(15026)),n=i(38124),c=i(74670);const h="host",p="dialog",f="dialog-heading",m=class{constructor(e){(0,a.r)(this,e),this.rfxEditorWrapperClose=(0,a.c)(this,"rfxEditorWrapperClose"),this.hasBeenOpened=!1,this.initialDocumentOverflowStyle="",this.initState=()=>{r.s.entryPoint=this.entryPoint??o.E.ANALYSIS,r.s.portal=this.portal,r.s.rftId=this.rftItemId??this.portalItem?.id??r.s.rftId,(0,r.i)(this.user)&&!(0,r.i)(this.portal?.user)&&(this.user=this.portal.user),r.s.isViewerUserType=(0,r.M)(this.user)},this.setScale=()=>{this.scale=r.s.entryPoint===o.E.ITEM?l.C.l:l.U.Scale},this.setUIFlags=()=>{r.s.entryPoint===o.E.ITEM?(this.hideCreateNewTemplate=!0,this.hideEditTemplateProperties=!1):(this.hideCreateNewTemplate=!1,this.hideEditTemplateProperties=!0)},this.showReadOnlyAlert=()=>{this.removeReadOnlyAlert();const e=(0,n.c)({modalStrings:{header:this.strings.readOnlyModeTitle,content:this.strings.readOnlyModeMessage}});this.readOnlyAlertElement=e,document.body.appendChild(e)},this.removeReadOnlyAlert=()=>{this.readOnlyAlertElement?.remove(),this.readOnlyAlertElement=void 0},this.canClose=async()=>new Promise((async e=>{void 0!==this.rftItemId?e(await(this.rfxEditorApp?.onPanelClose(this.rftItemId))):e(!0)})),this.handleClose=async()=>{if(!0!==await this.canClose())throw new Error;this.removeReadOnlyAlert(),this.dialogElement.open=!1,this.rfxEditorWrapperClose.emit(),r.s.entryPoint===o.E.ITEM&&!0===this.newItemCreated&&(window.location.href=(0,d.a)(this.portalItem))},this.getDialogHeadingText=()=>this.rfxTemplateName??this.portalItem?.title??this.strings.defaultTemplateName,this.handleRFxTemplateNameChange=e=>{this.rfxTemplateName=e.detail},this.handleRFxTemplateSaved=e=>{const{portalItem:t,template:i}=e.detail;(0,r.i)(t)||(0,r.i)(i)||(t.id!==this.portalItem?.id&&(this.newItemCreated=!0,this.portalItem=t),this.rfxTemplateName=i.name)},this.handleRftItemDetailsLinkClicked=()=>{setTimeout((()=>{this.newItemCreated=!1,this.handleClose()}),1)},this.applyStyleToDialogContainer=e=>{(0,c.n)(e,["shadowRoot","children[0]"],(e=>{const t=document.createElement("style");t.innerHTML="div.container { z-index: 150; }",e.appendChild(t)}))}}onOpenChange(e){this.updateOverflowHiddenClass(e),!0===e&&!0===r.s.isViewerUserType&&this.showReadOnlyAlert(),!1!==this.hasBeenOpened?!0===e&&!1===r.s.isLoadingRFT&&this.rfxEditorApp?.reloadRFTItem():this.hasBeenOpened=!0}async componentWillLoad(){({strings:this.strings}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.initState(),this.setScale(),this.setUIFlags()}updateOverflowHiddenClass(e){!0===e?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()}addOverflowHiddenClass(){this.initialDocumentOverflowStyle=document.body.style.overflow,document.body.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.body.style.setProperty("overflow",this.initialDocumentOverflowStyle)}render(){return(0,a.h)(a.H,{key:"8d15ed53f54cc3634d83e115927a65f9e7fd895f",class:h},(0,a.h)("calcite-dialog",{key:"6ff1d9ce82ee2c9bc441c41a03c6165c89ddeeb3",id:"rfx-editor-dialog",class:p,open:!0===this.open,outsideCloseDisabled:!0,scale:"l",placement:"cover",beforeClose:async()=>this.handleClose(),ref:e=>{this.dialogElement=e,this.applyStyleToDialogContainer(e)}},(0,a.h)("div",{key:"d38d00900bd748cc612a596442d5975b2c67118b",class:f,slot:"header-content"},(0,a.h)("calcite-icon",{key:"7b5328c16c1db7ae14019772528d9f4fd7412491",icon:"function-editor",scale:this.scale,"text-label":"Raster Function Editor"}),this.getDialogHeadingText()),(0,a.h)("rfx-editor-app",{key:`rfx-editor-app-${this.rftItemId}`,mapLayers:this.mapLayers,mapView:this.mapView,portal:r.s.portal,rftItemId:r.s.rftId,scale:this.scale,ref:e=>{this.rfxEditorApp=e},onAnalysisTemplateNameChanged:this.handleRFxTemplateNameChange,onAnalysisTemplateSaved:this.handleRFxTemplateSaved,onRftItemDetailsLinkClicked:this.handleRftItemDetailsLinkClicked},(0,a.h)("rfx-editor-header-actions",{key:"8c35eef42eff314176cd0cf921987cd9f3b8cfd8",slot:"action-bar",templateId:r.s.rftId,hideCreateNewTemplate:this.hideCreateNewTemplate,hideRFxNodeActions:!0===r.s.isViewerUserType,hideEditTemplateProperties:this.hideEditTemplateProperties,scale:(0,l.u)(this.scale),expanded:!1===r.s.isViewerUserType}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}static get watchers(){return{open:["onOpenChange"]}}};m.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.host{height:100%;width:100%}.dialog{--calcite-dialog-content-space:0;z-index:150}.dialog-heading{font-size:var(--calcite-font-size-2);font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-line-height-wrap)}.dialog-heading calcite-icon{padding-left:0.25rem;padding-right:1rem}"}}]);