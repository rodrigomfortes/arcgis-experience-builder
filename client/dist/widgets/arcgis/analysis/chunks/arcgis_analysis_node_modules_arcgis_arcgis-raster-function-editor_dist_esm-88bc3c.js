"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-88bc3c"],{33797:(e,t,i)=>{i.d(t,{C:()=>r,U:()=>s,a:()=>l,u:()=>n});const s={Scale:"s",PopoverTimer:60},r={s:"s",m:"m",l:"l"},l={absolute:"absolute",fixed:"fixed"},n=e=>e===r.s?r.m:r.l},36013:(e,t,i)=>{i.d(t,{R:()=>h});var s=i(83628),r=i(48001),l=i(33797),n=i(92991),a=i(93442);i(23795),i(17902),i(56451),i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const o="inputArgHelpClickHandler",g="pixelType",p="value",h=class{constructor(e){(0,s.r)(this,e),this.rfxArgumentChange=(0,s.c)(this,"rfxArgumentChange"),this.pixelTypeFilters={},this.valueFilters={},this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target,i="number"===this.storeType?Number(t.value):t.value;this.inputArg.value=i,this.value=i,this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs),this.initializeTriggerAttributes(this.widgetArgs)}componentWillLoad(){this.setInitialState()}async componentDidLoad(){await this.applyTriggerAttributeFilters(this.widgetArgs),this.attachTriggerArgsChangeListener(this.widgetArgs),this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,this.inputArg.key=t,i.input=this.hostElement}))}attachTriggerArgsChangeListener({triggerArgs:e}){Object.keys(e).forEach((t=>{const i=e[t].input;i?i.addEventListener("rfxArgumentChange",(()=>{this.applyTriggerAttributeFilters({triggerArgs:e})})):console.error(`input not set on ${e[t].displayName}`)}))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}initializeTriggerAttributes({triggerAttributes:e}){const t=e.trim().split(";");for(const e of t){const[t,i]=e.trim().split(":"),s=i.trim().split(","),r={dependFieldName:s[0],dependFieldValue:s[1].trim().split("|"),filteredValue:s[2].trim().split("|"),isApplied:!1};({[g]:()=>this.pixelTypeFilters[r.dependFieldName]=r,[p]:()=>this.valueFilters[r.dependFieldName]=r})[t]()}}async applyPixelTypeFilters({triggerArg:e,inputWidget:t,triggerArgValue:i}){const s=this.pixelTypeFilters[e];if(s.isApplied=!1,!i)return s.isApplied;const r=await(t?.getSelectedLayer?.());await r.load();const l=await r.generateRasterInfo(r.rasterFunction),n=r.pixelType??l?.pixelType;return(0,a.k)(n)?(s.isApplied=!0,s.isApplied):s.isApplied}async applyValueTypeFilter({triggerArg:e,triggerArgValue:t}){const i=this.valueFilters[e];return i.isApplied=!1,i.dependFieldValue.includes(t.toString())?(i.isApplied=!0,Promise.resolve(i.isApplied)):Promise.resolve(i.isApplied)}async applyTriggerAttributeFilters({triggerArgs:e}){let t,i=!1;const s={[g]:this.applyPixelTypeFilters.bind(this),[p]:this.applyValueTypeFilter.bind(this)};for(const r of Object.keys(e)){const l=e[r].input,a=e[r].value??l?l.value:void 0;if(!0===(0,n.i)(a))continue;let o,h;if(this.pixelTypeFilters.hasOwnProperty(r))h=this.pixelTypeFilters[r],o=g;else{if(!this.valueFilters.hasOwnProperty(r))return void console.error("Trigger Arg is not part of triggerAttributes! check schema.");h=this.valueFilters[r],o=p}if(o in s){!0===await s[o]({inputWidget:l,triggerArg:r,triggerArgValue:a})&&(i=!0,t=h.filteredValue)}else console.error("invalid triggerAttributes! check schema.")}!0===i?this.applyFilterToStore(t):this.resetStore();const r=String(this.value);if(!0!==this.store.some((e=>e.key===r))){const e="number"===this.storeType?Number(this.store[0]?.key):this.store[0]?.key;this.value=e}}applyFilterToStore(e){const t=((e,t)=>e.filter((e=>t.some((t=>e.key===t)))))(this.initialStore,e);this.store=t}resetStore(){this.store=this.initialStore}setInitialState(){const{rfxArgs:e,rasterFunctions:t}=this.widgetArgs,i=t[(0,r.i)(e)],s=i?.rasterFunctionArguments,l=this.inputArg.name;this.value=this.inputArg.value;const a=s?.[l]?.domain;if("list"===a?.type){const e=a.enum;this.store=(0,r.m)(e)}else console.error("Invalid inputArg! Check Schema");this.storeType=typeof this.store?.[0]?.key,this.store?.forEach((e=>{e.key=e.key.toString()})),this.initialStore=(0,r.m)(this.store),(0,n.i)(this.store)&&console.error("Domain list Enum not set! Check Schema")}render(){return(0,s.h)("div",{key:"bc1265b39141d8ccacd30e186ad0ac99becd6475"},(0,s.h)("calcite-label",{key:"72ecf02b9d4917995f81d031b16b26982c09964a",alignment:"start",scale:l.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,s.h)("rfx-label",{key:"c88223e1bb858fcdd384c152f7f09275f1ba164b",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,s.h)("rfx-dtex-common-select",{key:"6565775803bfbf1e5e806525e7805e2694080c00",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.g)(this)}}},87630:(e,t,i)=>{i.r(t),i.d(t,{rfx_cte_filtered_argument_editor:()=>s.R});var s=i(36013);i(83628),i(48001),i(5294),i(24360),i(5839),i(92991),i(32513),i(44345),i(13661),i(18423),i(21255),i(35431),i(93442),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(42335),i(71144),i(33797),i(23795),i(17902),i(56451),i(71802),i(36596)}}]);