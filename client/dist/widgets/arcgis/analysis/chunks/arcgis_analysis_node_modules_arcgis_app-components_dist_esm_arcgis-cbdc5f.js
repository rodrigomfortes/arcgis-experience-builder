/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-cbdc5f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-cbdc5f"],{931:(e,t,n)=>{n.d(t,{l:()=>r});var o=n(93814);const r=async(e,t)=>(await o.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>d,c:()=>a,d:()=>c,e:()=>r,f:()=>o,g:()=>g,i:()=>h,m:()=>i,t:()=>l,u:()=>u});const o=(e,t)=>{let n,o="idle";const r=(...r)=>new Promise((a=>{switch(o){case"flushed":o="idle",n?(clearTimeout(n),a(e(...r))):a(null);break;case"invoked":clearTimeout(n),o="idle",a(e(...r));break;case"cancelled":clearTimeout(n),o="idle",a(null);break;default:n&&clearTimeout(n),o="pending",n=setTimeout((()=>(o="idle",a(e(...r)))),t)}}));return r.flush=function(...e){return o="flushed",r(...e)},r.invoke=function(...e){return o="invoked",r(...e)},r.cancel=function(...e){return o="cancelled",r(...e)},r.getStatus=function(){return o},r};function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function i(e,t){return await Promise.all([e,l(t)]),e}function l(e){return new Promise((t=>setTimeout(t,e)))}const s=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:o}=t(e);return[n,o]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function u(e,t){const n=[],o={};return e.forEach((e=>{const r=t(e);null==o[r]&&(o[r]=e,n.push(e))})),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let o=typeof e;return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const g=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,o)=>e.slice(t*o,t+t*o))),h=(e,t)=>e.includes(t)},50637:(e,t,n)=>{n.d(t,{a:()=>v,b:()=>b,c:()=>g,d:()=>p,f:()=>u,g:()=>h,i:()=>d,p:()=>y,r:()=>f});var o=n(59317),r=n(4429),a=n(931),i=n(87744);const l={},s={},c={};async function u(e,t,n,o){var r,a,i,u;const d=null===(a=null===(r=c[t])||void 0===r?void 0:r[n])||void 0===a?void 0:a.expireAt,g=!!d&&(new Date).getTime()>d;if((null===(i=l[t])||void 0===i?void 0:i[n])&&!g)return l[t][n];s[t]||(s[t]={}),s[t][n]&&!g||(s[t][n]=e());const h=await s[t][n];if(l[t]||(l[t]={}),c[t]||(c[t]={}),l[t][n]=h,o){const{expireAfter:e,getExpireAfterFromResult:r}=o,a=r||e?(new Date).getTime()+(null!==(u=null==r?void 0:r(h))&&void 0!==u?u:e):null;c[t][n]=Object.assign(Object.assign({},c[t][n]),{expireAt:a})}return h}function d(e,t){var n;return null===(n=null==l?void 0:l[e])||void 0===n?void 0:n[t]}const g=(e,t)=>{var n,o;t?(null===(n=l[e])||void 0===n||delete n[t],null===(o=s[e])||void 0===o||delete o[t]):(delete l[e],delete s[e])};function h(e){var t,n,r,a;return null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(r=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===r?void 0:r.token)||(null===(a=null==e?void 0:e.portalUser)||void 0===a?void 0:a.token)||""}function p(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function m(e){var t;const{config:n}=o.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function v(e,t,n={},r){const[i]=await(0,a.l)(["esri/request"]),{api:l}=o.c;e.includes("f=")||t.append("f","json");const s=h();return s&&!t.has("token")&&t.append("token",s),new Promise(((o,a)=>{if(3===l){const l={url:!1===n.addSSL?e:m(e),form:t,timeout:n.timeout||0},s="post"===r?Object.assign({usePost:!0},n):n;i(l,s).then(o,a)}else i(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:r||"auto"})).then((e=>{o(e.data)})).catch((e=>a(e)))}))}async function f(e,t={},n={},r,i){const[l]=await(0,a.l)(["esri/request"]),{api:s,portal:c}=o.c,{customToken:u,addTokenManually:d,addSSL:g,useProxy:h}=n,p=Object.assign({},t);if(e.includes("f=")||!0===(null==i?void 0:i.excludeJson)||(p.f="json"),u)p.token=u;else if(!1!==d){const e=await b(c,s);e&&(p.token=e)}const v=!1===g?e:m(e);if(3===s){const e=Object.assign({url:v,content:p,timeout:n.timeout||0},null==i?void 0:i.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return l(e,"post"===r?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:p,method:r||"auto"},n),{timeout:n.timeout||0,useProxy:h}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await l(v,e)).data}}const w=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var o,a;const i=null!==(o=null==t?void 0:t.pendingStatuses)&&void 0!==o?o:["processing","partial","Pending","InProgress","EXECUTING"],l=null!==(a=null==t?void 0:t.successStatuses)&&void 0!==a?a:["completed","Completed","COMPLETED"];let s=0;const c=async()=>{const o=await f(e,null==t?void 0:t.requestParams,{},n),a=o.status||o.jobStatus;if(i.includes(a))return await(0,r.t)((u=s++,1e3*w[u>-1&&u<w.length-1?u:w.length-1])),c();if(l.includes(a)||"failed"===a)return o;throw o;var u};try{return c()}catch(e){throw console.error(e),e}},b=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,i.i)(e))return h(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,i.i)(e))return;const{token:r}=await u((()=>S(e,null!=t?t:null===o.c||void 0===o.c?void 0:o.c.api)),"platformSelf",null!==(n=p(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return r},S=async(e,t)=>{const n=await(async(e,t)=>{var n,o,r;const l=3===t,[s]=l?await(0,a.l)(["esri/IdentityManager"]):await(0,a.l)(["esri/identity/IdentityManager"]),c=await u((()=>s.getCredential((0,i.g)(e),{oAuthPopupConfirmation:!1})),"credential",p(e.user));return null!==(r=l?null===(n=c._oAuthCred)||void 0===n?void 0:n.appId:null===(o=c.oAuthState)||void 0===o?void 0:o.appId)&&void 0!==r?r:"arcgisonline"})(e,t),o={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return f(`${(0,i.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?o:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:o}})}},50822:(e,t,n)=>{n.d(t,{a:()=>i,b:()=>a,c:()=>c,d:()=>u,e:()=>d,f:()=>g,g:()=>h,i:()=>l,u:()=>s});n(93814);var o=n(87744);function r(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function a(e){var t;return r(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function i(e){var t;return r(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function l(e,t){return e.owner===t.username}function s(e,t){return l(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const o=e.owner,r="admin"===e.itemControl,a=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!l(e,t)&&r&&o.includes("esri_")&&!a.includes(o))return!1;return r}(e,t)}const c=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),u=(e,t)=>`${(0,o.a)(t)}item.html?id=${e}`,d=(e,t)=>`${(0,o.g)(t)}/content/users/${e}`,g=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{}),h=(e,t)=>`${(0,o.a)(t)}content/items/${e}`},64099:(e,t,n)=>{n.d(t,{a:()=>i,g:()=>c});var o=n(15332),r=n(81034),a=n(87849);function i(e){var t,n,a;const i=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==i?void 0:i.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return r.l.has(l)?r.l.get(l):r.l.has(l.slice(0,2))?r.l.get(l.slice(0,2)):"en"}const l={};function s(e,t){const n=`${e}${t}`;return l[n]||(l[n]=function(e,t){return new Promise(((n,o)=>{fetch((0,a.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):o()}),(()=>o()))}))}(e,t)),l[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),a=i(e),l=function(e){var t,n,a;const i=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==i?void 0:i.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return r.l.has(l)?r.l.get(l):r.l.has(l.slice(0,2))?l:"en"}(e);let c;try{c=await s(n,a)}catch(e){console.warn(`no locale for ${n} (${a}) loading default locale en.`),c=await s(n,"en")}return[c,a,l]}},81034:(e,t,n)=>{n.d(t,{C:()=>l,a:()=>s,b:()=>u,f:()=>d,g:()=>i,l:()=>a,s:()=>h});var o=n(931),r=n(15332);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function i(e){return function(e,t,n){const o=(0,r.c)(e,`[${t}]`);return o?o.getAttribute(t):n}(e,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function s(e,t){const{api:n,type:r,places:a}=t||{};if(4===n){const[t]=await(0,o.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:a,style:r,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:r}))}const[i]=await(0,o.l)(["dojo/number"]);return i.format(e,{type:r,places:a,pattern:null==t?void 0:t.pattern})}const c={};function u(e,t){let n=document.documentElement.lang;const o="bs"===n;if(o&&(n="hr"),t){const t=`${n}-full`,o={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,o)),c[t].format(e)}const r={year:"numeric",month:o?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,r)),c[n].format(e)}function d(e,t,n,o){const r=null!=e?e:"en";let a=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(r))&&(a=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(r)&&(a=t.multiple),h(a,Object.assign(Object.assign({},o),{number:n}))}const g=/\$\{([^}]+)\}/g;function h(e,t,n=g){let o=e;try{o=e.replace(n,((e,n)=>function(e,t){const n=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString()))}catch(e){console.error(e)}return o}},85558:(e,t,n)=>{n.r(t),n.d(t,{arcgis_item_category_schema_editor:()=>d});var o=n(87849),r=n(38295),a=n(64099),i=n(56175),l=n(87744),s=n(96295),c=n(51102),u=n(50637);n(59317),n(37762),n(15332),n(81034),n(931),n(93814),n(50822);const d=class{constructor(e){(0,o.r)(this,e),this.workflowCancel=(0,o.c)(this,"workflowCancel",7),this.newSchemaWorkflowComplete=(0,o.c)(this,"newSchemaWorkflowComplete",7),this.deleteAllSchema=(0,o.c)(this,"deleteAllSchema",7),this.getCategorySchema=()=>{const{user:e,portal:t,group:n}=this;return(0,r.g)({user:e,portal:t,group:n})},this.getCategoryAggregation=()=>{const{user:e,portal:t,group:n}=this;return(async(e,t,n)=>{const o=n?`${(0,l.g)(t)}/content/groups/${n.id}/`:`${(0,l.g)(t)}`,r=n?{q:s.H,countFields:"access,contentstatus,groupCategories"}:{q:`orgid:${e.orgId} ${s.H}`,countFields:"categories"};try{const{aggregations:e}=await(0,u.r)(`${o}search`,Object.assign(Object.assign({},r),{countSize:200,num:0,f:"json"}));return{result:n?e.counts.find((({fieldName:e})=>"groupCategories"===e)):e.counts[0]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(e,t,n)},this.updateSchema=e=>{const{portal:t,group:n}=this;return(async({portal:e,group:t,categorySchema:n})=>{try{const o=t?(0,c.a)(e,t):`${(0,l.g)(e)}/portals/${e.id}/`;return await(0,u.r)(`${o}assignCategorySchema`,{categorySchema:JSON.stringify({categorySchema:n})},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})({portal:t,categorySchema:e,group:n})},this.deleteSchema=()=>{const{portal:e,group:t}=this;return(async(e,t)=>{try{const n=t?(0,c.a)(e,t):`${(0,l.g)(e)}/portals/${e.id}/`;return await(0,u.r)(`${n}deleteCategorySchema`,{},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(e,t)},this.updateSchemaFromPath=({path:e,updateInfo:t})=>{const{portal:n,group:o}=this;return(0,r.d)({path:e,portal:n,updateInfo:t,group:o})},this.getStandardSetCategories=()=>{const{portal:e}=this;return(async e=>{try{const[{categorySchema:t},{categorySchema:n},{categorySchema:o}]=await Promise.all([(0,r.a)(e,"LivingAtlas"),(0,r.a)(e,"Inspire"),(0,r.a)(e,"ISO")]);return{result:{LivingAtlas:t,Inspire:n,ISO:o}}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(e)},this.user=void 0,this.portal=void 0,this.config=void 0,this.group=void 0,this.isActive=void 0,this.rootCategoryTitle=void 0}async componentWillLoad(){const e=await(0,a.g)(this.el);this.i18n=e[0]}render(){const{user:e,portal:t,config:n,i18n:r,isActive:a,group:l,getCategorySchema:s,getCategoryAggregation:c,updateSchema:u,deleteSchema:d,updateSchemaFromPath:g,getStandardSetCategories:h}=this,p=Boolean(!(0,i.b)(this.user)||this.group),m=l?r.modalGroupHeader:r.modalHeader,v=l?r.helpTextGroup:r.helpText,f=l?r.helpTextGroupDescription:r.helpTextDescription,w=r.template.templateList.custom[l?"messageGroup":"message"];return(0,o.h)("arcgis-category-schema-editor",{key:"20ad62d2178ba67794066c9b99fe59effecccbfa",user:e,portal:t,config:n,isActive:a,canFetchCategories:p,dialogHeading:m,noticeTitle:v,noticeDescription:f,customTemplateDescriptionText:w,deleteConfirmMessage:r.warning.deleteInUseCategory.message,changeTitleConfirmMessage:r.warning.changeTitleInUseCategory.message,getCategorySchema:s,getCategoryAggregation:c,updateSchema:u,deleteSchema:d,updateSchemaFromPath:g,getStandardSetCategories:h,onWorkflowCancel:e=>{this.workflowCancel.emit(e.detail)},onNewSchemaWorkflowComplete:e=>{this.newSchemaWorkflowComplete.emit(e.detail)},onDeleteAllSchema:()=>{this.deleteAllSchema.emit()}})}get el(){return(0,o.a)(this)}};d.style=".stage{height:100%;--tw-translate-x:0px;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));overflow:hidden;display:flex}.modal{--calcite-dialog-content-space:0;--calcite-dialog-size-x:48rem;--calcite-dialog-size-y:90vh;--calcite-dialog-background-color:var(--calcite-color-background)}.modal--large{--calcite-dialog-size-x:1080px}.template-container{overflow:auto;width:20rem;padding:1rem}.template-title{margin-top:0px;margin-bottom:0px;margin-bottom:1rem;font-size:1.125rem}.template-link{font-size:0.75rem}.inner-container{overflow:auto;box-sizing:border-box;width:100%;padding:2rem}.inner-container--new-category{padding-inline-start:0.5rem;padding:1rem}.help-text{margin-bottom:0.75rem}.confirm-modal{--calcite-modal-width:32rem;--calcite-modal-height:auto}.confirm-modal-content{padding:1rem}"},96295:(e,t,n)=>{n.d(t,{H:()=>o,R:()=>r});const o='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',r="Indoors Map Configuration,Code Attachment"}}]);