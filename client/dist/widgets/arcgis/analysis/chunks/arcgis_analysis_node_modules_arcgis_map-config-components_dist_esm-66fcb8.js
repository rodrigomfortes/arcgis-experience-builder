/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-66fcb8.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-66fcb8"],{5511:(e,t,s)=>{function o(e){const{layer:t,layerOriginUtils:s}=e;e.layerOriginInfo=s.getLayerOriginInfo(t,"web-map")}s.d(t,{g:()=>o})},14528:(e,t,s)=>{function o(e){const t=[];i=e,queueMicrotask((()=>{i===e&&(i=void 0)}));const s=e.componentWillLoad;return e.componentWillLoad=async()=>{await Promise.all(t.map((e=>e()))).then((()=>{})),await(s?.call(e))},{onLoad:e=>t.push(e)}}let i;function r(){return i}s.d(t,{r:()=>r,u:()=>o})},16401:(e,t,s)=>{var o,i;s.d(t,{a:()=>i,g:()=>n,l:()=>o,s:()=>a}),function(e){e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications"}(o||(o={})),function(e){e.FEATURE_REDUCTION_WARNING_DISMISSED="arcgis_feature_reduction_warning_dismissed",e.POPUP_WARNING_DISMISSED="arcgis_popup_warning_dismissed",e.INCOMPATIBLE_VECTOR_SYMBOLS_DISMISSED="arcgis_symbol_styler_incompatible_vector_symbols_dismissed",e.EFFECTS_TIP_DISMISSED="arcgis_effects_tip_dismissed",e.LAYER_VIEW_DEFINITION_DISMISSED="arcgis_layer_view_definition_dismissed",e.LAYER_OVERRIDE_STATUS_TIP_DISMISSED="arcgis_layer_override_status_tip_dismissed",e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed",e.LAYER_VIEW_JOIN_TIP_DISMISSED="arcgis_layer_view_join_tip_dismissed",e.MULTIDIMENSIONAL_INFO_TIP_DISMISSED="arcgis_multidimensional_info_tip_dismissed"}(i||(i={}));const r=e=>{const t=(e=>localStorage.getItem(e))(e);return t?JSON.parse(t):{}},a=(e,t)=>{const s=r(e);s[t.key]=t.value,((e,t)=>{localStorage.setItem(e,t)})(e,JSON.stringify(s))},n=(e,t)=>{const s=r(e);return Object.getOwnPropertyDescriptor(s,t)?s[t]:null}},93698:(e,t,s)=>{s.r(t),s.d(t,{arcgis_layer_override_properties:()=>h,arcgis_layer_override_status:()=>I});var o=s(11254),i=s(5511),r=s(14528),a=s(16401);const n="popover",l="content",c="notice",d="tile",p="tooltip",h=class{constructor(e){(0,o.r)(this,e),this.closeAllPopovers=(0,o.c)(this,"closeAllPopovers",7),this.arcgisPropertiesChange=(0,o.c)(this,"arcgisPropertiesChange",7),this.manager=(0,r.u)(this),this.afterCreatePopover=e=>{this.popoverNode=e},this.afterCreateCloseButton=e=>{this.closeButtonNode=e},this.handleCloseClick=()=>{this.closeAllPopovers.emit()},this.resetToSource=e=>{e.stopPropagation();const{props:t}=this,{layer:s,layerOriginUtils:o}=t;o.clearOverrides(s,"web-map"),this.reRender=!this.reRender,this.arcgisPropertiesChange.emit()},this.disconnectProps=e=>{e.stopPropagation();const{props:t}=this,{layer:s,layerOriginUtils:o}=t;o.disconnectFromSource(s,"web-map"),this.reRender=!this.reRender,this.arcgisPropertiesChange.emit()},this.props=void 0,this.popoverReferenceElement=void 0,this.strings=void 0,this.reRender=!1,this.isOpen=!1}async reposition(){this.popoverNode?.reposition()}async getPopoverRect(){return this.popoverNode?.getBoundingClientRect()}componentDidLoad(){this.popoverNode?.reposition(),this.isOpen=!0,setTimeout((()=>requestAnimationFrame((()=>this.closeButtonNode?.setFocus()))),100)}render(){const{popoverReferenceElement:e,strings:t,props:s}=this,{layer:i}=s,r=e.clientWidth,a=e.clientHeight||e.getBoundingClientRect()?.height||96;return(0,o.h)(o.H,{key:"bf1670e23be2d24cb7f9b4e2cedf32becbd420b4",class:"js-app-flyout"},(0,o.h)("calcite-popover",{key:"bd0ece8df136a16ebb6c42ef45126b0c321e2bdb",placement:"bottom",open:this.isOpen,pointerDisabled:!0,referenceElement:e,offsetDistance:-1*a,offsetSkidding:0,class:n,style:r?{width:`${r+60}px`}:void 0,label:i.isTable?t.manageTableProps:t.manageLayerProps,ref:this.afterCreatePopover,onCalcitePopoverBeforeClose:()=>this.closeAllPopovers.emit()},(0,o.h)("calcite-flow",{key:"695df0cac6a99cf80f37a9ab7192d1ad893c3993",style:r?{width:`${r+58}px`}:void 0},(0,o.h)("calcite-flow-item",{key:"f35ebf9561f2f9b34d600ccd096c3394ce0eb78b",heading:i.isTable?t.manageTableProps:t.manageLayerProps},this.renderCloseButton(),this.renderContent()))))}renderCloseButton(){const{strings:e}=this;return(0,o.h)("calcite-action",{text:e.close,scale:"s",slot:"header-actions-end",onClick:this.handleCloseClick,ref:this.afterCreateCloseButton,icon:"x"})}renderContent(){const{strings:e,props:t}=this,{layer:s}=t;(0,i.g)(t);const{layerOriginInfo:r}=t,a="source"===r.status,n="overridden"===r.status;return(0,o.h)("div",{class:l},(0,o.h)("calcite-notice",{class:c,width:"full",scale:"s",open:!0},(0,o.h)("div",{slot:"title"},"source"===r.status?e.propsFromSource:"overridden"===r.status?e.propsSetInWebmap:e.somePropsSetInWebmap)),(0,o.h)("div",{id:"layer-override-reset"},(0,o.h)("calcite-tile",{heading:e.resetToSource,description:e.discardProps,class:d,disabled:a,onClick:a?void 0:this.resetToSource},a?(0,o.h)("calcite-icon",{scale:"s",slot:"content-start",icon:"reset"}):(0,o.h)("calcite-button",{scale:"s",appearance:"transparent",kind:"neutral",slot:"content-start",iconStart:"reset",label:e.resetToSource,onClick:a?void 0:this.resetToSource}))),(0,o.h)("div",{id:"layer-override-disconnect"},(0,o.h)("calcite-tile",{heading:s.isTable?e.disconnectPropsTable:e.disconnectProps,description:e.setPropsInWebmap,class:d,disabled:n,onClick:n?void 0:this.disconnectProps},n?(0,o.h)("calcite-icon",{scale:"s",slot:"content-start",icon:"unlink"}):(0,o.h)("calcite-button",{scale:"s",appearance:"transparent",kind:"neutral",slot:"content-start",iconStart:"unlink",label:e.disconnectProps,onClick:n?void 0:this.disconnectProps}))),a&&(0,o.h)("calcite-tooltip",{class:p,placement:"top",offsetDistance:-50,overlayPositioning:"fixed",referenceElement:"layer-override-reset"},e.propsCannotBeReset),n&&(0,o.h)("calcite-tooltip",{class:p,placement:"top",offsetDistance:-50,overlayPositioning:"fixed",referenceElement:"layer-override-disconnect"},e.propsCannotBeDisconnected))}get el(){return(0,o.a)(this)}};h.style=".popover{--calcite-popover-z-index:100}.content{padding:0.5rem 0.75rem;background-color:#ffffff;max-height:80vh}.notice{margin-bottom:16px}.tile{cursor:pointer}.tooltip{max-width:80%}";const u="popover",m="content",f="notice",v="filter",g="block-content",b="list-header",I=class{constructor(e){(0,o.r)(this,e),this.closeAllPopovers=(0,o.c)(this,"closeAllPopovers",7),this.arcgisStatusChange=(0,o.c)(this,"arcgisStatusChange",7),this.manager=(0,r.u)(this),this.allItems=[],this.dataTypes=["data","definition-expression","popup","refresh-interval","use-view-time","form-template","floor-info","custom-parameters","charts","attribute-table-template"],this.appearanceTypes=["renderer","labels","scale-range","opacity","feature-reduction","blend-mode","effect","legend-enabled","order-by","display-filter"],this.afterCreatePopover=e=>{this.popoverNode=e},this.afterCreateCloseButton=e=>{this.closeButtonNode=e},this.handleCloseClick=()=>{this.closeAllPopovers.emit()},this.props=void 0,this.popoverReferenceElement=void 0,this.strings=void 0,this.reRender=!1,this.filteredItems=void 0,this.isOpen=!1}async reposition(){this.popoverNode?.reposition()}async getPopoverRect(){return this.popoverNode?.getBoundingClientRect()}async componentWillLoad(){const{strings:e}=this,t=this.props.layerOriginInfo?.status;(0,i.g)(this.props);const s=this.props.layerOriginInfo?.status;t!==s&&this.arcgisStatusChange.emit(),this.allItems=[{value:"data",title:e.status.data},{value:"definition-expression",title:e.status.filter},{value:"popup",title:e.status.popupsAndAttributes},{value:"refresh-interval",title:e.status.refreshInterval},{value:"use-view-time",title:e.status.time},{value:"display-filter",title:e.status.displayFilter},{value:"editing-enabled",title:e.status.editing},{value:"form-template",title:e.status.formTemplate},{value:"floor-info",title:e.status.floorInfo},{value:"custom-parameters",title:e.status.customParameters},{value:"charts",title:e.status.charts},{value:"renderer",title:e.status.style},{value:"labels",title:e.status.labels},{value:"scale-range",title:e.status.visibleRange},{value:"opacity",title:e.status.transparency},{value:"feature-reduction",title:e.status.aggregation},{value:"blend-mode",title:e.status.blending},{value:"effect",title:e.status.effects},{value:"legend-enabled",title:e.status.legend},{value:"order-by",title:e.status.orderBy},{value:"attribute-table-template",title:e.status.table}]}componentDidLoad(){this.popoverNode?.reposition(),this.isOpen=!0,setTimeout((()=>requestAnimationFrame((()=>this.closeButtonNode?.setFocus()))),100)}render(){const{popoverReferenceElement:e,strings:t,props:s}=this,{layer:i,containerPanelNode:r}=s,a=e.clientWidth,n=r?.getBoundingClientRect(),l=e.getBoundingClientRect(),c=n?.height&&l?.top?n?.height-(l?.top-n?.top)-20+"px":void 0,d=e.clientHeight||l?.height||96;return(0,o.h)(o.H,{key:"a09e57b788d268d798528ce7b0644cb741e7e9ae",class:"js-app-flyout"},(0,o.h)("calcite-popover",{key:"8ad75fd9378bd34e922c03ec67f1733bc99e6dd9",placement:"bottom",open:this.isOpen,pointerDisabled:!0,referenceElement:e,offsetDistance:-1*d,offsetSkidding:0,class:u,style:a?{width:`${a+60}px`}:void 0,label:i.isTable?t.tableStatus:t.layerStatus,ref:this.afterCreatePopover,onCalcitePopoverBeforeClose:()=>this.closeAllPopovers.emit()},(0,o.h)("calcite-flow",{key:"db7e118751e349bcdb9813622292038a31c75e8c",style:a?{width:`${a+58}px`,maxHeight:c}:void 0},(0,o.h)("calcite-flow-item",{key:"c10932fe4f0b0c2f2c5d77f8d52cb6b90550ddfc",heading:i.isTable?t.tableStatus:t.layerStatus,ref:e=>{e?.addEventListener("calciteFlowItemScroll",(()=>this.closeInfoPopover()))}},this.renderCloseButton(),this.renderContent()))))}renderCloseButton(){const{strings:e}=this;return(0,o.h)("calcite-action",{text:e.close,scale:"s",slot:"header-actions-end",onClick:this.handleCloseClick,ref:this.afterCreateCloseButton,icon:"x"})}renderContent(){return(0,o.h)("div",{class:m},this.renderInfo(),this.renderSearch(),this.renderDataContent(),this.renderAppearanceContent())}renderInfo(){const{props:e,strings:t}=this,{config:s}=e,{helpBase:i,helpMap:r}=s;return(0,a.g)(a.l.ARCGIS_COMPONENT_NOTIFICATIONS,a.a.LAYER_OVERRIDE_STATUS_TIP_DISMISSED)?(0,o.h)(o.F,null):(0,o.h)("calcite-notice",{class:f,open:!0,closable:!0,scale:"s",width:"auto",onCalciteNoticeClose:()=>{(0,a.s)(a.l.ARCGIS_COMPONENT_NOTIFICATIONS,{key:a.a.LAYER_OVERRIDE_STATUS_TIP_DISMISSED,value:"true"})}},(0,o.h)("div",{slot:"message"},t.tip),r&&i&&(0,o.h)("calcite-link",{slot:"link",title:t.learnMore,target:"_blank",href:`${i}${r[120002913]}`},t.learnMore))}renderSearch(){const{allItems:e,strings:t}=this;return(0,o.h)("calcite-filter",{items:e,messageOverrides:{label:t.status.searchPlaceholder,clear:t.status.clear},placeholder:t.status.searchPlaceholder,class:v,onCalciteFilterChange:e=>{this.filteredItems=e.target.filteredItems,this.dataBlockNode&&(this.dataBlockNode.open=!0,this.appearanceBlockNode&&(this.appearanceBlockNode.open=!0),setTimeout((()=>{this.reposition()}),100))}})}renderDataContent(){const{allItems:e,filteredItems:t,dataTypes:s,strings:i}=this;let r=(t||e).filter((e=>s.includes(e.value))).map((e=>"data"===e.value?[e.title,"source"]:[e.title,this.getOverrideType(e.value)]));r.sort(((e,t)=>e[0].localeCompare(t[0])));const a=r.find((e=>e[0]===i.status.data));a&&(r=r.filter((e=>e[0]!==i.status.data)),r.unshift(a));const n=r.filter((e=>"source"===e[1])),l=r.filter((e=>"webmap"===e[1])),c=n.length>0,d=l.length>0,p=c&&d?i.somePropsSetInWebmap:c?i.propsFromSource:i.propsSetInWebmap;return(0,o.h)("calcite-block",{heading:i.status.dataProps,description:p,collapsible:!0,open:d,onCalciteBlockOpen:()=>{setTimeout((()=>{this.reposition()}),100)},onCalciteBlockClose:()=>{setTimeout((()=>{this.reposition()}),100)},ref:e=>this.dataBlockNode=e},(0,o.h)("div",{class:g},(0,o.h)("calcite-list",{label:i.status.dataProps},d&&(0,o.h)("calcite-label",{class:b,scale:"s"},i.setInWebmap),d&&l.map((([e,t])=>this.renderListItem(e,t))),c&&(0,o.h)("calcite-label",{class:b,scale:"s"},i.setFromSource),c&&n.map((([e,t])=>this.renderListItem(e,t))))))}renderAppearanceContent(){const{allItems:e,filteredItems:t,appearanceTypes:s,strings:i,props:r}=this,{layer:a}=r;if(a.isTable)return(0,o.h)(o.F,null);const n=(t||e).filter((e=>s.includes(e.value))).map((e=>[e.title,this.getOverrideType(e.value)]));n.sort(((e,t)=>e[0].localeCompare(t[0])));const l=n.filter((e=>"source"===e[1])),c=n.filter((e=>"webmap"===e[1])),d=l.length>0,p=c.length>0,h=d&&p?i.somePropsSetInWebmap:d?i.propsFromSource:i.propsSetInWebmap;return(0,o.h)("calcite-block",{heading:i.status.appearanceProps,description:h,collapsible:!0,open:p,onCalciteBlockOpen:()=>{setTimeout((()=>{this.reposition()}),100)},onCalciteBlockClose:()=>{setTimeout((()=>{this.reposition()}),100)},ref:e=>this.appearanceBlockNode=e},(0,o.h)("div",{class:g},(0,o.h)("calcite-list",{label:i.status.appearanceProps},p&&(0,o.h)("div",{class:b},(0,o.h)("calcite-label",{scale:"s"},i.setInWebmap)),p&&c.map((([e,t])=>this.renderListItem(e,t))),d&&(0,o.h)("div",{class:b},(0,o.h)("calcite-label",{scale:"s"},i.setFromSource)),d&&l.map((([e,t])=>this.renderListItem(e,t))))))}renderListItem(e,t){const{strings:s}=this;return(0,o.h)("calcite-list-item",{label:e},(0,o.h)("calcite-action",{slot:"actions-end",text:s.moreInfo,icon:"information",onClick:s=>this.moreInfo(e,t,s)}))}moreInfo(e,t,s){s.stopPropagation();const{popoverReferenceElement:o,strings:i}=this,r=s.currentTarget;this.closeInfoPopover();const a=document.createElement("div");a.innerHTML="source"===t?i.propReflectUpdates.replace("${label}",e):i.propNotConnected.replace("${label}",e),a.style=`width: ${.8*Math.min(Math.max(o?.clientWidth||0,230),300)}px; font-size: var(--calcite-font-size--1); line-height: 1rem; margin: 0.75rem;`;const n=document.createElement("calcite-popover");n.heading="source"===t?i.setFromSource:i.setInWebmap,n.placement="auto",n.offsetSkidding=5,n.closable=!0,n.label=i.moreInfo,n.referenceElement=r,n.className="js-app-flyout",document.body.appendChild(n),n.appendChild(a),n.setAttribute("open","true"),n.reposition(),n.addEventListener("calcitePopoverClose",(()=>{this.closeInfoPopover()})),setTimeout((()=>n.setFocus()),100),setTimeout((()=>{this.documentTabHandler=e=>{"Tab"===e.key&&(e.stopPropagation(),this.closeInfoPopover())},document.addEventListener("keydown",this.documentTabHandler),this.documentClickHandler=()=>this.closeInfoPopover(),document.addEventListener("click",this.documentClickHandler)}),100),this.moreInfoPopoverNode=n}closeInfoPopover(){if(this.moreInfoPopoverNode){const e=this.moreInfoPopoverNode.referenceElement;setTimeout((()=>e?.setFocus()),100),document.body.removeChild(this.moreInfoPopoverNode),this.moreInfoPopoverNode=void 0}this.documentTabHandler&&(document.removeEventListener("keydown",this.documentTabHandler),this.documentTabHandler=void 0),this.documentClickHandler&&(document.removeEventListener("click",this.documentClickHandler),this.documentClickHandler=void 0)}isOverridden(e){const{props:t}=this,{layerOriginInfo:s}=t;return!("overridden"!==s?.propertyGroupOriginInfos?.filter((t=>t.id===e))?.[0]?.status)}getOverrideType(e){return this.isOverridden(e)?"webmap":"source"}get el(){return(0,o.a)(this)}};I.style=".popover{--calcite-popover-z-index:100}.content{max-height:60vh}.notice{margin:8px}.filter{border-width:0px 0px 1px;border-color:var(--calcite-color-border-3);border-style:solid}.block-content{background-color:var(--calcite-color-foreground-2)}.list-header{padding:0.75rem 0.5rem 0.25rem 0.5rem;background-color:var(--calcite-color-foreground-2)}"}}]);