/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-55b0a4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-55b0a4"],{66111:(e,i,t)=>{t.d(i,{A:()=>P,B:()=>V,a:()=>N,b:()=>b,c:()=>_,d:()=>v,e:()=>h,f:()=>S,g:()=>w,h:()=>p,i:()=>m,j:()=>I,k:()=>A,l:()=>L,m:()=>u,n:()=>U,o:()=>x,p:()=>d,q:()=>$,r:()=>O,s:()=>F,t:()=>C,u:()=>G,v:()=>E,w:()=>D,x:()=>M,y:()=>a,z:()=>k});var r=t(83929),o=t(87744),s=t(56175),l=t(59317),n=t(50637);async function a(){return new Promise((async e=>{const{portal:i}=l.c;if(null==i?void 0:i.isPortal){const t=i.helperServices.geocode,r=await function(e){const{config:i,portal:t}=l.c;return new Promise((async(r,o)=>{const s=e.filter((e=>c(e.url,t))).filter((e=>e.isEsriBatchGeocoder))[0];if(s){const e=s.url.split("/servers/")[1].split("/rest/services/")[0],t=`${i.restBaseUrl}/content/items/${e}`;try{r((await(0,n.r)(t)).url)}catch(e){o(e)}}else o("No world geocoder configured")}))}(t);e(r)}else{const t=function(e){const i=null==e?void 0:e.portalHostname;if(-1!==i.indexOf("dev"))return"dev";if(-1!==i.indexOf("qa"))return"qa";return""}(i);e(`https://geocode${t}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function c(e="",i){var t;const r=i.isPortal,o=e.toLowerCase(),s=o.indexOf("/geocodeserver")>-1&&o.indexOf("/rest/services/")>-1,l=r&&o.indexOf(null===(t=i.portalHostname)||void 0===t?void 0:t.toLowerCase())>-1,n=!r&&o.indexOf("utility")&&o.indexOf(".arcgis.com")>-1;return s&&(l||n)}function u(e){return(0,s.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,s.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,i){return!(0,s.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,r.i)(i,e)}const h=e=>!(0,s.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function p(e,i){return!(0,s.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,r.i)(i,e)}const f=async(e,i)=>{var t;return await p(e,i)&&(!i.isPortal||!!i.supports3DTilesServices||!!(null===(t=i.sourceJSON)||void 0===t?void 0:t.supports3DTilesServices))};function g(e){return!(0,s.b)(e)&&!0}function m(e){var i;return!(0,s.b)(e)&&(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishScenes"))}const b=e=>!(0,s.b)(e);function w(e,i,t){var r,o;const s=!!(null===(o=null===(r=i.helperServices)||void 0===r?void 0:r.rasterAnalytics)||void 0===o?void 0:o.url),l=function(e,i,t){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishDynamicImagery"))&&(i.isPortal||y(t))}(e,i,t),n=i.isPortal?l:l||function(e,i,t){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishTiledImagery"))&&!i.isPortal&&y(t)}(e,i,t);return s&&n}function y(e){return null==e?void 0:e.some((e=>{var i;return null===(i=e.entitlements)||void 0===i?void 0:i.some((e=>"image"===e.toLowerCase()))}))}async function S(e){var i;const{userLicensedItems:t}=await(0,n.r)(`${null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl}/community/self?returnUserLicensedItems=true`);return t}function I(e,i){var t,r;const l=null===(t=i.helperServices)||void 0===t?void 0:t.geocode.some((({url:e})=>c(e,i))),n=null!==(r=null==e?void 0:e.privileges)&&void 0!==r?r:[];return!(0,s.b)(e)&&l&&(!i.isPortal||!(0,o.i)(i)&&n.includes("portal:user:viewOrgItems")&&n.includes("portal:user:createItem"))}const A=e=>!(0,s.b)(e);function P(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function k(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function T(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((i=>{var t;return null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes(i)}))}function L(e,i,t){var r,o,l;return!(0,s.d)(t)&&((null==i?void 0:i.isPortal)?!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:registerDataStores")):T(e)&&("1"===(null===(o=null==e?void 0:e.sourceJSON)||void 0===o?void 0:o.level)||"2"===(null===(l=null==e?void 0:e.sourceJSON)||void 0===l?void 0:l.level)))}const U=(e,i,t)=>!i.isPortal&&!(0,s.b)(e)&&!(0,s.d)(t)&&T(e);function x(e){return!(0,s.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const C=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function _(e,i,t){return!i.isPortal&&await v(e,i)&&await async function(e,i,t){return!(0,s.b)(e)&&!!i.supportsHostedServices&&u(e)&&(await p(e,i)||await v(e,i)||m(e)||g(e)||w(e,i,t))}(e,i,t)}async function N(e,i,t){switch(i){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,t);case"Tile Package":return p(e,t);case"3DTiles Package":return f(e,t);case"Vector Tile Package":return g(e);case"Scene Package":return m(e);case"Service Definition":return async function(e,i){return await v(e,i)&&await p(e,i)}(e,t);default:return!0}}function O(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageCredits"))}function G(e,i){var t,r,o;return(0,s.f)(e)||O(e)||!!((null!==(t=null==e?void 0:e.assignedCredits)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.assignedCredits)>-1&&(null===(o=null==i?void 0:i.portalProperties)||void 0===o?void 0:o.showCreditsOnProfile))}const D=e=>!1;function V(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))}function F(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))}function $(e){return(0,s.e)(e)||F(e)&&function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewItems"))}(e)&&(function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:reassignItems"))}(e))}function M(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const E=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},89165:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_locator_select:()=>h});var r=t(87849),o=t(59317),s=t(72257),l=t(66111),n=t(32710),a=t(3826),c=t(95878),u=t(87744),d=t(63054);t(37762),t(86562),t(15332),t(83929),t(50637),t(931),t(93814),t(56175),t(50822),t(76246),t(24869),t(15912),t(50020),t(75294),t(38295),t(51102),t(43555);const v=["locator-view","locator"],h=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.handleAuthSwitchChange=e=>{this.storeAuth=e.detail},this.handleNewUrl=async e=>{const{type:i,url:t}=e;this.type=i,this.locatorUrl=t,this.isSecured=null,this.error=null,t&&(this.allowStoredAuth=!1,this.storeAuth=!1,this.loading=!0,await this.getServiceInfo(!1),this.loading=!1)},this.selectedLocatorType="locator-view",this.locatorUrl="",this.type=void 0,this.loading=!1,this.error=null,this.canPublishLocatorView=!0,this.allowStoredAuth=!1,this.storeAuth=!1,this.isSecured=null,this.serviceInfo=null,this.itemType=void 0}async componentWillLoad(){var e;const i=c.u.i18n;this.i18n=i.locatorSelect,this.urlTypeI18n=i.urlType,this.urlI18n=i.url,this.allowStoredAuth=a.a.allowStoredAuth,this.storeAuth=a.a.storeAuth,this.isSecured=a.a.isSecured,this.itemType=a.a.type;const{user:t,portal:r}=o.c;this.canPublishLocatorView=(0,l.j)(t,r),this.selectedLocatorType=null!==(e=a.a.locatorType)&&void 0!==e?e:"locator-view",this.canPublishLocatorView||(this.selectedLocatorType="locator"),"locator"===this.selectedLocatorType&&(this.locatorUrl=a.a.url)}async handleNext(){const{selectedLocatorType:e,urlI18n:i,locatorUrl:t,allowStoredAuth:r}=this;if(a.a.locatorType=e,"locator-view"===e){const e=await(0,l.y)();a.a.newItemMode="create",a.a.type="Geocoding Service",a.a.typeKeywords=["Geocoding filter"],a.a.thumbnailURL="https://static.arcgis.com/images/desktopapp.png",a.a.createAsServiceProxy=!0,a.a.url=e}else{if(!t)return this.inputRef.focusMainInput(),void(this.error=i.invalidUrl);const{portal:e}=o.c,{error:s,result:l}=(0,d.e)((0,d.h)(t,e.allSSL),e.isPortal);if(s)return void(this.error=i[s.code]);if("Geocoding Service"!==l)return void(this.error=i.invalidUrl);if(a.a.url=t,a.a.type="Geocoding Service",a.a.newItemMode="url",a.a.allowStoredAuth=r,a.a.storeAuth=this.storeAuth,a.a.isSecured=this.isSecured,a.a.serviceInfo=this.serviceInfo,this.storeAuth&&(a.a.checkAuth=!0),this.allowStoredAuth&&!this.storeAuth){this.loading=!0;const e=await this.getServiceInfo(!0);if(this.loading=!1,!e)return}}this.allowStoredAuth&&this.storeAuth?this.newItemUpdatePage.emit("auth"):this.newItemUpdatePage.emit("itemProperties")}async getServiceInfo(e=!1){const{urlTypeI18n:i,locatorUrl:t,type:r}=this,{error:o,result:l}=await(0,n.w)({url:t,customParameters:a.a.customParameters,type:r,checkAuth:e,storeAuth:a.a.storeAuth});if(o||!l)return"does not point to a GIS server"===(null==o?void 0:o.message)?this.error=i.serviceNotGIS:"serviceNotExist"===(null==o?void 0:o.code)?this.error=i.serviceNotExist:"unsupportedWFSVersion"===(null==o?void 0:o.code)?this.error=i.unsupportedWFSVersion:this.error=i[null==o?void 0:o.code]||i.serviceNotExist,!1;const{tags:c,title:d,isSecured:v,allowStoredAuth:h,serviceInfo:p}=l;return this.allowStoredAuth=h,this.isSecured=v,this.serviceInfo=p,c&&(s.i.tags=c),a.a.initialTitle=(null==d?void 0:d.replace(u.s,""))||"",!0}render(){const{error:e,i18n:i,urlTypeI18n:t,loading:s,selectedLocatorType:l,locatorUrl:n,canPublishLocatorView:c,isSecured:u,allowStoredAuth:d,itemType:h}=this,{config:{helpBase:p,helpMap:f}}=o.c;return(0,r.h)("div",{key:"6ce84b6c309a83c85ea42c97aeb6afa50622e5c0"},c&&(0,r.h)(r.F,{key:"53290d5c0c422494db6181e7bdd3632057006535"},(0,r.h)("arcgis-new-item-description",{key:"19f0c124c17eed74819fb1d0a5039ac76fba98ca",header:i.heading}),(0,r.h)("calcite-tile-select-group",{key:"c8a8037d4d629a3892deaa726715a5131063766f",layout:"vertical",class:"tile-select"},v.map((e=>(0,r.h)("calcite-tile-select",{checked:l===e,heading:i.options[e].title,description:i.options[e].description,name:"tile-layer-type","input-enabled":!0,width:"full",type:"radio",value:e,onCalciteTileSelectChange:()=>this.selectedLocatorType=e}))))),"locator"===l&&(0,r.h)(r.F,{key:"1d8b689fd29bae40673bddb4bfe1e8160677551e"},(0,r.h)("arcgis-new-item-description",{key:"b719fcba5870cd0133e5b4575f822d8e407b9f8e",header:i.url.heading,content:i.url.description}),(0,r.h)("arcgis-new-item-url",{key:"6e5d5651d8c57507429ad5703ec961f63e97d2a1",url:n,inputTitle:" ",placeholder:"https://myserver.com/arcgis/rest/services/folder/service/GeocodeServer",onNewItemUrlChange:e=>this.handleNewUrl(e.detail),ref:e=>this.inputRef=e}),(0,r.h)("div",{key:"b050988eb54d3b690239037c656bf7b251b40b59",class:"custom-parameter-container"},(0,r.h)("arcgis-new-item-custom-parameters",{key:"f747d4ea5c099a14e470e77436d2434814d8bee6",itemType:h})),d&&!!u&&(0,r.h)("arcgis-new-item-switch-card",{key:"01b5c5c981c419fd5da504c17f3bba54ec8f5141",onSwitchChange:this.handleAuthSwitchChange,header:t.storeAuth,headerLink:{text:t.learnMore,href:`${p}${f[120000597]}`},defaultChecked:a.a.storeAuth})),(0,r.h)("arcgis-new-item-loader",{key:"2a50c8384ca77f6ad85c9213b49a21f334cb7064",active:s,text:t.getServiceInfo}),(0,r.h)("arcgis-new-item-alert",{key:"1757e4fb556e40298e699925aade2ebd4f24a211",active:!!e,description:e,onAlertDismiss:()=>this.error=null}))}get el(){return(0,r.a)(this)}};h.style=".tile-select:not(:last-child){margin-bottom:1.5rem}.custom-parameter-container{margin-top:1.5rem}"}}]);