"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-6fa0a2"],{56160:(e,t,i)=>{i.d(t,{R:()=>C});var r=i(83628),o=i(5839),a=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),c=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),n=i(33797),s=(i(23795),i(17902),i(56451),i(95069)),l=(i(71802),i(32513),i(36596),i(19956));const d={BINARY:"factorFunctionBinary",LINEAR:"factorFunctionLinear",SYM_LINEAR:"factorFunctionSymLinear",INVERSE_LINEAR:"factorFunctionInvLinear",SYM_INVERSE_LINEAR:"factorFunctionSymInvLinear",COS:"factorFunctionCos",SEC:"factorFunctionSec",COS_SEC:"factorFunctionCosSec",SEC_COS:"factorFunctionSecCos",HIKING_TIME:"factorFunctionHikingTime",BIDIR_HIKING_TIME:"factorFunctionBidirectoinalHikingTime"},h={BINARY:"factorFunctionBinary",FORWARD:"factorFunctionForward",LINEAR:"factorFunctionLinear",INVERSE_LINEAR:"factorFunctionInvLinear"},u={zeroFactor:"factorFunctionZeroFactor",cutAngle:"factorFunctionCutAngle",sideValue:"factorFunctionSideFactor",slope:"factorFunctionSlope",lowCutAngle:"factorFunctionLowCutAngle",highCutAngle:"factorFunctionHighCutAngle",power:"localPower",cosPower:"factorFunctionCosPower",secPower:"factorFunctionSecPower",table:"factorFunctionTablePath"},g={BINARY:{zeroFactor:1,lowCutAngle:-30,highCutAngle:30},LINEAR:{zeroFactor:1,lowCutAngle:-90,highCutAngle:90,slope:1/90},SYM_LINEAR:{zeroFactor:1,lowCutAngle:-90,highCutAngle:90,slope:1/90},INVERSE_LINEAR:{zeroFactor:1,lowCutAngle:-45,highCutAngle:45,slope:-.022222222222222223},SYM_INVERSE_LINEAR:{zeroFactor:1,lowCutAngle:-45,highCutAngle:45,slope:-.022222222222222223},COS:{lowCutAngle:-90,highCutAngle:90,power:1},SEC:{lowCutAngle:-90,highCutAngle:90,power:1},COS_SEC:{lowCutAngle:-90,highCutAngle:90,cosPower:1,secPower:1},SEC_COS:{lowCutAngle:-90,highCutAngle:90,cosPower:1,secPower:1},HIKING_TIME:{lowCutAngle:-70,highCutAngle:70},BIDIR_HIKING_TIME:{lowCutAngle:-70,highCutAngle:70}},f={BINARY:{zeroFactor:1,cutAngle:45},FORWARD:{zeroFactor:.5,sideValue:1},LINEAR:{zeroFactor:.5,cutAngle:181,slope:1/90},INVERSE_LINEAR:{zeroFactor:2,cutAngle:180,slope:-.011111111111111112}},p={zeroFactor:{numberType:l.N.FLOAT,min:0,excludeMinValue:!0},cutAngle:{numberType:l.N.FLOAT,min:0,excludeMinValue:!0,max:181},sideValue:{numberType:l.N.FLOAT,min:0,excludeMinValue:!0},cosPower:{numberType:l.N.FLOAT,min:0,excludeMinValue:!0},highCutAngle:{numberType:l.N.FLOAT,min:0,max:90},lowCutAngle:{numberType:l.N.FLOAT,min:-90,max:0},secPower:{numberType:l.N.FLOAT,min:0,excludeMinValue:!0}},A="inputArgHelpClickHandler",F="rfx-factor-function-editor",m={container:`${F}__container`,select:`${F}__select`,text:`${F}__text`},C=class{constructor(e){(0,r.r)(this,e),this.rfxArgumentChange=(0,r.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.factorFunctionMode=null,this.verticalFactorTypes=d,this.horizontalFactorTypes=h,this.factorFunctionTypeModifiers=u,this.verticalFactorModifiers=g,this.horizotalFactorModifiers=f,this.gridSchema={gridLayout:{},gridOptions:[],hasBorder:!1,hasHeader:!1,canAdd:!1,hasIdColumn:!1,canRemove:!1,isStacked:!0},this.store=[],this.factorFunctionType=null,this.gridStore=[],this.handleFactorFunctionTypeChange=e=>{e.stopPropagation();const t=e.target.value;this.factorFunctionType=t;const i=this.createDataObjects(this.factorFunctionType);this.gridStore=i},this.updateGridValue=e=>{const{detail:{gridOptions:t}}=e;if((0,a.i)(t))return;const i=this.gridStore;i.forEach(((e,i)=>(e.factorModifierValue=t[i].factorModifierValue,e))),this.gridStore=[...i]}}async checkValidity(){return await this.factorGridElement.checkValidity()}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,o.c)(this.hostElement,(0,r.a)("."))),this.setupInitialState()}componentWillRender(){this.initGrid(),this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement})),Object.keys(t).forEach((e=>{const i=t[e];this.triggerArg=i,this.factorFunctionMode=e.indexOf("vertical")>=0?"VERTICAL":e.indexOf("horizontal")>=0?"HORIZONTAL":null,i?.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.handleTriggerArgChange(e)}))}))}setupInitialState(){this.store=this.getFactorFunctionTypesStore();const e=this.inputArg?.value,{factorFunctionType:t,gridData:i}=this.parseWidgetValue(e);this.factorFunctionType=t??this.store[0]?.key;const r=this.createDataObjects(this.factorFunctionType);(0,a.i)(i)||r.forEach(((e,t)=>(e.factorModifierValue=i[t],e))),this.gridStore=r}createDataObjects(e){const t=this.getFactorFunctionTypeModifier(e),i=[];return t?(Object.keys(t).forEach(((e,r)=>{i.push({id:r+1,factorModifier:this.strings[this.factorFunctionTypeModifiers[e]],factorModifierValue:(0,s.f)(t[e],3),factorModifierValueRule:p[e]})})),i):i}initGrid(){const e={factorModifier:{uiType:c.G.text},factorModifierValue:{uiType:c.G.number}},t=this.gridStore;this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(A,e)}handleTriggerArgChange(e){(0,a.i)(e)&&this.setWidgetValue()}getFactorFunctionTypesStore(){let e;switch(this.factorFunctionMode){case"VERTICAL":e=this.verticalFactorTypes;break;case"HORIZONTAL":e=this.horizontalFactorTypes}return Object.keys(e).map((t=>({key:t,label:this.strings[e[t]]})))}getFactorFunctionTypeModifier(e){let t;switch(this.factorFunctionMode){case"VERTICAL":t=this.verticalFactorModifiers[e];break;case"HORIZONTAL":t=this.horizotalFactorModifiers[e]}return t}parseWidgetValue(e){if((0,a.i)(e))return{gridData:void 0,factorFunctionType:void 0};const t=e.split(" "),i=t[0];return{gridData:t.splice(1),factorFunctionType:i}}setWidgetValue(){const e=`${this.factorFunctionType} ${this.gridStore.map((e=>e.factorModifierValue)).join(" ")}`,t=!(0,a.i)(this.triggerArg?.input?.value)?e:void 0;this.value=t}render(){return(0,r.h)("div",{key:"8c1c013174942bc44a5a2e263019ed25755e3763"},(0,r.h)("calcite-label",{key:"f752e9b49e898e2f07eadb5ff8a8b3c9274c5afb",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,r.h)("rfx-label",{key:"f5c44968c57bfd5056519736a97ed9e446ed2d3d",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(A)()}),(0,r.h)("div",{key:"3e031e4f35c56a7411ddedbdd965327c2ee59c7f",class:m.container},(0,r.h)("div",{key:"ed410a530d276c8ef1af2b39bc70bc09f1947ffa",class:m.select},(0,r.h)("div",{key:"6afbfa9fc778b80f5f5e59c1e2e38048f9ef8036",class:m.text},this.strings.type),(0,r.h)("rfx-dtex-common-select",{key:"2ba496ecc2cce7ad217fd4e8fd06282f9cc18e6a",mode:this.widgetArgs.mode,options:this.store,value:this.factorFunctionType,onRfxArgumentChange:this.handleFactorFunctionTypeChange})),(0,r.h)("rfx-grid",{key:"1eeb9c98eef5e8dca34524b719dc1af802ba3fdd",hasHeader:this.gridSchema.hasHeader,canAdd:this.gridSchema.canAdd,hasIdColumn:this.gridSchema.hasIdColumn,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,canRemove:this.gridSchema.canRemove,isStacked:this.gridSchema.isStacked,onRfxGridOptionChange:this.updateGridValue,ref:e=>this.factorGridElement=e}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.g)(this)}};C.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}:host{height:100%;margin-bottom:var(--rfx-half-spacing)}.rfx-factor-function-editor__container{border:1px var(--calcite-color-border-1) solid;border-radius:var(--calcite-border-radius);padding:var(--rfx-half-spacing);margin-bottom:var(--rfx-half-spacing)}.rfx-factor-function-editor__select{padding:var(--rfx-quarter-spacing) var(--rfx-quarter-spacing) 0 var(--rfx-quarter-spacing)}.rfx-factor-function-editor__text{padding:0.5em 0 0.5em 0}"}}]);