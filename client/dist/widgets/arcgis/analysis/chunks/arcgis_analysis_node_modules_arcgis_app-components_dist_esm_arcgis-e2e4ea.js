/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e2e4ea.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e2e4ea"],{931:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(93814);const o=async(e,t)=>(await i.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>c,c:()=>a,d:()=>u,e:()=>o,f:()=>i,g:()=>f,i:()=>p,m:()=>l,t:()=>r,u:()=>d});const i=(e,t)=>{let n,i="idle";const o=(...o)=>new Promise((a=>{switch(i){case"flushed":i="idle",n?(clearTimeout(n),a(e(...o))):a(null);break;case"invoked":clearTimeout(n),i="idle",a(e(...o));break;case"cancelled":clearTimeout(n),i="idle",a(null);break;default:n&&clearTimeout(n),i="pending",n=setTimeout((()=>(i="idle",a(e(...o)))),t)}}));return o.flush=function(...e){return i="flushed",o(...e)},o.invoke=function(...e){return i="invoked",o(...e)},o.cancel=function(...e){return i="cancelled",o(...e)},o.getStatus=function(){return i},o};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function l(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const s=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:i}=t(e);return[n,i]}))),u=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function d(e,t){const n=[],i={};return e.forEach((e=>{const o=t(e);null==i[o]&&(i[o]=e,n.push(e))})),n}function c(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,i)=>e.slice(t*i,t+t*i))),p=(e,t)=>e.includes(t)},4628:(e,t,n)=>{n.d(t,{a:()=>r,b:()=>s,h:()=>u});var i=n(24869),o=n(43555),a=n(3826),l=n(45768);const r=e=>{const{title:t,fileName:n,extension:o}=(0,i.s)(e);return a.a.initialTitle=t,a.a.file=e,a.a.fileName=n,a.a.newItemMode="file",a.a.extension=o,o},s=e=>{const t=(0,l.f)(e)[0],{type:n,nextStep:i}=t;return a.a.type=n,{nextStep:i,type:n}},u=async(e,t)=>{try{e&&!t&&await(0,o.d)(e,{permanentDelete:!0})}catch(e){return}}},24869:(e,t,n)=>{n.d(t,{a:()=>a,f:()=>u,g:()=>s,s:()=>l,v:()=>r});var i=n(15912),o=n(46227);function a(e,t){const n=/(?:\.([^.]+))?$/;let i=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),a=i&&n.exec(i)[1]?n.exec(i)[1].toLowerCase():"",l="";if((null==i?void 0:i.indexOf(".rft."))>-1){const[e,t]=i.split(".rft.");a=`rft.${t}`,l=e}return i&&!l&&(l=-1===i.lastIndexOf(".")?i:i.substring(0,i.lastIndexOf("."))),l=l.replace(/\.|-/g,"_"),t&&(l=function(e){return`${e}_${(0,o.g)()}`}(l),i=`${l}.${a}`),{title:l,fileName:i,extension:a}}function l(e,t){return a(e.name,!!t)}function r(e,t){let n=e;const i=e.lastIndexOf("\\");return i>-1&&(n=n.substring(i+1,n.length)),n.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function s(e){return i.a[e]?i.a[e]:i.a[Object.keys(i.a).find((t=>i.a[t].type===e))]}function u(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},45768:(e,t,n)=>{n.d(t,{a:()=>s,f:()=>a,i:()=>r,m:()=>l});var i=n(4429),o=n(15912);function a(e,t){let n;n=t?t.map((e=>e.type)):Object.keys(o.a);let i=[];return n.forEach((t=>{var n;(null===(n=o.a[t].fileExt)||void 0===n?void 0:n.indexOf(e))>=0&&i.push(o.a[t])})),i}function l(e){return e?(0,i.b)(e.flatMap((e=>{var t;return null===(t=o.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const r=e=>e/1024/1024>50,s=e=>e/1024/1024>20},46227:(e,t,n)=>{n.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},50637:(e,t,n)=>{n.d(t,{a:()=>g,b:()=>b,c:()=>f,d:()=>v,f:()=>d,g:()=>p,i:()=>c,p:()=>y,r:()=>m});var i=n(59317),o=n(4429),a=n(931),l=n(87744);const r={},s={},u={};async function d(e,t,n,i){var o,a,l,d;const c=null===(a=null===(o=u[t])||void 0===o?void 0:o[n])||void 0===a?void 0:a.expireAt,f=!!c&&(new Date).getTime()>c;if((null===(l=r[t])||void 0===l?void 0:l[n])&&!f)return r[t][n];s[t]||(s[t]={}),s[t][n]&&!f||(s[t][n]=e());const p=await s[t][n];if(r[t]||(r[t]={}),u[t]||(u[t]={}),r[t][n]=p,i){const{expireAfter:e,getExpireAfterFromResult:o}=i,a=o||e?(new Date).getTime()+(null!==(d=null==o?void 0:o(p))&&void 0!==d?d:e):null;u[t][n]=Object.assign(Object.assign({},u[t][n]),{expireAt:a})}return p}function c(e,t){var n;return null===(n=null==r?void 0:r[e])||void 0===n?void 0:n[t]}const f=(e,t)=>{var n,i;t?(null===(n=r[e])||void 0===n||delete n[t],null===(i=s[e])||void 0===i||delete i[t]):(delete r[e],delete s[e])};function p(e){var t,n,o,a;return null!=e||(e=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===o?void 0:o.token)||(null===(a=null==e?void 0:e.portalUser)||void 0===a?void 0:a.token)||""}function v(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function h(e){var t;const{config:n}=i.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function g(e,t,n={},o){const[l]=await(0,a.l)(["esri/request"]),{api:r}=i.c;e.includes("f=")||t.append("f","json");const s=p();return s&&!t.has("token")&&t.append("token",s),new Promise(((i,a)=>{if(3===r){const r={url:!1===n.addSSL?e:h(e),form:t,timeout:n.timeout||0},s="post"===o?Object.assign({usePost:!0},n):n;l(r,s).then(i,a)}else l(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:o||"auto"})).then((e=>{i(e.data)})).catch((e=>a(e)))}))}async function m(e,t={},n={},o,l){const[r]=await(0,a.l)(["esri/request"]),{api:s,portal:u}=i.c,{customToken:d,addTokenManually:c,addSSL:f,useProxy:p}=n,v=Object.assign({},t);if(e.includes("f=")||!0===(null==l?void 0:l.excludeJson)||(v.f="json"),d)v.token=d;else if(!1!==c){const e=await b(u,s);e&&(v.token=e)}const g=!1===f?e:h(e);if(3===s){const e=Object.assign({url:g,content:v,timeout:n.timeout||0},null==l?void 0:l.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return r(e,"post"===o?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:o||"auto"},n),{timeout:n.timeout||0,useProxy:p}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await r(g,e)).data}}const w=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var i,a;const l=null!==(i=null==t?void 0:t.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],r=null!==(a=null==t?void 0:t.successStatuses)&&void 0!==a?a:["completed","Completed","COMPLETED"];let s=0;const u=async()=>{const i=await m(e,null==t?void 0:t.requestParams,{},n),a=i.status||i.jobStatus;if(l.includes(a))return await(0,o.t)((d=s++,1e3*w[d>-1&&d<w.length-1?d:w.length-1])),u();if(r.includes(a)||"failed"===a)return i;throw i;var d};try{return u()}catch(e){throw console.error(e),e}},b=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,l.i)(e))return p(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,l.i)(e))return;const{token:o}=await d((()=>x(e,null!=t?t:null===i.c||void 0===i.c?void 0:i.c.api)),"platformSelf",null!==(n=v(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return o},x=async(e,t)=>{const n=await(async(e,t)=>{var n,i,o;const r=3===t,[s]=r?await(0,a.l)(["esri/IdentityManager"]):await(0,a.l)(["esri/identity/IdentityManager"]),u=await d((()=>s.getCredential((0,l.g)(e),{oAuthPopupConfirmation:!1})),"credential",v(e.user));return null!==(o=r?null===(n=u._oAuthCred)||void 0===n?void 0:n.appId:null===(i=u.oAuthState)||void 0===i?void 0:i.appId)&&void 0!==o?o:"arcgisonline"})(e,t),i={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,l.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?i:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:i}})}},53016:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_feature_layer_upload:()=>d});var i=n(87849),o=n(59317),a=n(3826),l=n(95878),r=n(15912),s=n(24869),u=n(4628);n(37762),n(43555),n(50020),n(50637),n(931),n(93814),n(87744),n(50822),n(72257),n(86562),n(15332),n(45768);const d=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.newItemSetButtonState=(0,i.c)(this,"newItemSetButtonState",7),this.allowedExtensions=["csv","geojson","zip","gpkg","xls","xlsx"]}componentWillLoad(){this.i18n=l.u.i18n.featureLayerUpload,this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!0}}),this.allowedTypes=[r.a.CSV,r.a["Microsoft Excel"],r.a.Shapefile,r.a.GeoJson,r.a["File Geodatabase"],r.a.GeoPackage]}async fileSelectHandler(e){this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!1}});const t=e.detail.file,{title:n,fileName:i,extension:o}=(0,s.s)(t);if(a.a.initialTitle=n,a.a.file=t,a.a.fileName=i,a.a.newItemMode="file",a.a.extension=o,"zip"===o)return void this.newItemUpdatePage.emit("zipSelect");const{nextStep:l,type:r}=(0,u.b)(o);a.a.type=r,this.newItemUpdatePage.emit(l)}render(){const{i18n:e,allowedExtensions:t,allowedTypes:n}=this,{portal:l,config:r,user:s}=o.c;return(0,i.h)(i.H,{key:"7444a29374085c83395561462d3df45fc4d2490e"},(0,i.h)("arcgis-file-browser",{key:"3929e0e07dc8cc8b251f6ccff36f61ce0a164965",class:"arcgis-file-browser",onCloudDriveConnected:e=>{const t=e.detail;a.a.cloudProvider=t,this.newItemUpdatePage.emit("cloud"),this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!1}})},insideModal:!0,fullHeight:!0,portal:l,config:r,helpText:e.learnMore,helpLink:`${r.helpBase}${r.helpMap[(null==l?void 0:l.isPortal)?"120000902":"120005026"]}`,user:s,allowedExtensions:t,validTypes:n}))}};d.style=".arcgis-file-browser{display:block;height:100%}"}}]);