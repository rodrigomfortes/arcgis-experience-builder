/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-acc22a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-acc22a"],{11916:(e,t,i)=>{i.r(t),i.d(t,{arcgis_map_config_feature_reduction_field:()=>m});var s=i(11254),a=i(69811),n=i(56612),o=i(17840),l=i(28903),r=i(39020),d=i(89268),c=i(24795),h=i(14528);const m=class{constructor(e){(0,s.r)(this,e),this.arcgisChange=(0,s.c)(this,"arcgisChange",7),this.arcgisDelete=(0,s.c)(this,"arcgisDelete",7),this.manager=(0,h.u)(this),this.arcadeExpMap=new Map,this.displayDate=new Date("December 31, 1969 18:00:00"),this.disconnected=!1,this.mapView=void 0,this.layer=void 0,this.portal=void 0,this.strings=void 0,this.aggregateField=void 0,this.open=!1,this.isAutoGeneratedPieChartClusterField=!1}async done(){this.closePopovers()}async componentWillLoad(){const[e,t,i,s]=await Promise.all([(0,a.f)(),(0,a.at)(),(0,a.z)(),(0,a.aD)()]);this.modules={FieldInfo:e,FieldInfoFormat:t,intl:i,fieldUtils:s};const{layer:n,aggregateField:l,modules:r}=this;(0,c.c)(n,l.name)||(0,c.a)(l,n,r),this.arcadeExpMap=(0,o.m)(this.layer.featureReduction.popupTemplate),this.currentFieldInfo=this.getCurrentFieldInfo()}componentDidLoad(){this.flowItemNode=(0,r.f)(this.el,"calcite-flow-item");const{currentFieldInfo:e}=this;l.a.get(e.format?.dateFormat)&&this.setupDateTimeDisplay()}disconnectedCallback(){this.disconnected=!0,clearTimeout(this.fieldAliasHandle),this.closePopovers()}render(){const{layer:e,aggregateField:t,open:i}=this,a=(0,c.c)(e,t.name),n=(t.isAutoGenerated?a.label:t.alias)||t.name;return(0,s.h)(s.H,{key:"52586612a40b55cedd135ac9115576d13737fa84"},(0,s.h)("calcite-block",{key:"ba50cf36b246632b7dd274b6ff73efab0636431d",heading:n,open:i,collapsible:!0,ref:e=>this.blockNode=e,onCalciteBlockOpen:e=>{const t=e.target;this.open=t.open},onCalciteBlockClose:e=>{const t=e.target;this.open=t.open}},this.renderDropdown(),this.renderFieldSelection(),this.renderFieldTypeOptions(),this.renderTypeSelection(),this.renderResultFieldName(),this.renderFieldAlias(),this.renderFormatting()))}renderDropdown(){const{layer:e,aggregateField:t,strings:i,isAutoGeneratedPieChartClusterField:a}=this,n=(0,c.d)(e,t.onStatisticField)??t.onStatisticExpression;return t.isAutoGenerated||a||!n?(0,s.h)(s.F,null):(0,s.h)("div",{slot:"control"},(0,s.h)("calcite-dropdown",{placement:"bottom-end",scale:"s",overlayPositioning:"fixed"},(0,s.h)("calcite-action",{id:"dropdown-action-node",slot:"trigger",text:i.delete,ref:e=>this.dropdownActionNode=e,onMouseOver:()=>this.toggleTooltip(!0),onMouseOut:()=>this.toggleTooltip(!1),onFocus:()=>this.toggleTooltip(!0),onFocusout:()=>this.toggleTooltip(!1)},(0,s.h)("calcite-icon",{scale:"s",icon:"ellipsis"})),(0,s.h)("calcite-dropdown-group",null,(0,s.h)("calcite-dropdown-item",{onClick:e=>{e.stopPropagation(),this.removeField()},onKeyDown:e=>{e.stopPropagation()," "!==e.key&&"Enter"!==e.key||this.removeField()}},i.delete))))}renderFieldSelection(){const{aggregateField:e,strings:t,isAutoGeneratedPieChartClusterField:i}=this;return e.isAutoGenerated||i||!e.onStatisticField&&!e.onStatisticExpression?(0,s.h)(s.F,null):(0,s.h)(s.F,null,(0,s.h)("calcite-label",null,t.fields.field),(0,s.h)("div",{class:"field-selection"},(0,s.h)("calcite-button",{class:"field-selection-button",appearance:"outline-fill",kind:"neutral",width:"full",alignment:"icon-end-space-between",iconEnd:"chevron-down",disabled:e.isAutoGenerated,onClick:()=>this.handleFieldSelect(),ref:e=>this.fieldNode=e},e.onStatisticField||e.onStatisticExpression?.title),(0,s.h)("div",null,"\xa0"),(0,s.h)("calcite-button",{id:"feature-reduction-attribute-switch",appearance:"outline-fill",kind:"neutral",iconStart:"code",label:t.fields.expression,onClick:()=>this.openArcadeEditor(),ref:e=>{e&&(this.arcadeButtonNode=e)}}),(0,s.h)("calcite-tooltip",{referenceElement:"feature-reduction-attribute-switch",overlayPositioning:"fixed"},t.fields.addExpression)))}renderFieldTypeOptions(){const{aggregateField:e,strings:t,layer:i}=this;if(!e.onStatisticExpression)return(0,s.h)(s.F,null);const a=e.onStatisticExpression.returnType;return(0,s.h)("div",{class:"section"},(0,s.h)("calcite-label",null,t.fields.fieldType),(0,s.h)("calcite-segmented-control",{scale:"s",width:"full",onCalciteSegmentedControlChange:a=>{const n=a.target.value,o="number"===n?t.fields.sum:t.fields.mode,l=e.name,r=`${e.onStatisticExpression.title}_${o.toLocaleLowerCase()}`;if(i.featureReduction.fields.find((e=>e.name===r))&&l!==r){const t=i.featureReduction.fields.map((e=>e.name));let s=1;for(;t.includes(`${e.onStatisticExpression.title}_${s}_${o.toLocaleLowerCase()}`);)s++;e.onStatisticExpression.title=`${e.onStatisticExpression.title}_${s}`}e.name=`${e.onStatisticExpression.title}_${o.toLocaleLowerCase()}`,e.alias=e.onStatisticExpression.title,e.onStatisticField=null,e.statisticType="number"===n?"sum":"mode",e.onStatisticExpression.returnType=n,this.replacePopupField(l),this.currentFieldInfo=this.getCurrentFieldInfo(),this.arcgisChange.emit(),(0,s.f)(this.el)}},(0,s.h)("calcite-segmented-control-item",{value:"number",checked:"number"===a},t.fields.number),(0,s.h)("calcite-segmented-control-item",{value:"string",checked:"string"===a},t.fields.string)))}renderTypeSelection(){const{layer:e,aggregateField:t,strings:i,isAutoGeneratedPieChartClusterField:a}=this,n=t.onStatisticField?(0,c.d)(e,t.onStatisticField):t.onStatisticExpression,o=t.onStatisticExpression?"string"===t.onStatisticExpression.returnType:"string"===n?.type,l=t.onStatisticExpression?["date","timestamp-offset"].includes(t.onStatisticExpression.returnType):["date","timestamp-offset"].includes(n?.type);return(0,s.h)("div",{class:"section"},(0,s.h)("calcite-label",null,i.fields.statsType),(0,s.h)("calcite-select",{width:"full",label:i.fields.statsType,disabled:t.isAutoGenerated||a||!n,onCalciteSelectChange:e=>{const s=e?.target,a=s.selectedOption.value,o=t.name;t.name=t.onStatisticExpression?`${t.onStatisticExpression.title}_${a}`:`${n.name}_${a}`,t.onStatisticField&&(t.onStatisticField=n.name),t.alias=t.onStatisticExpression?t.onStatisticExpression.title:`${n.alias||n.name} ${(0,d.h)(a,i).toLowerCase()}`,t.statisticType=a,this.replacePopupField(o),this.arcgisChange.emit()}},!o&&!l&&this.renderTypeOption("sum"),!o&&!l&&this.renderTypeOption("avg"),!o&&!l&&this.renderTypeOption("min"),!o&&!l&&this.renderTypeOption("max"),this.renderTypeOption("mode"),"count"===t.statisticType&&this.renderTypeOption("count")))}renderTypeOption(e){const{layer:t,aggregateField:i,strings:a}=this;return(0,s.h)("calcite-option",{value:e,label:(0,d.h)(e,a),disabled:i.statisticType!==e&&(i.onStatisticField&&(0,c.h)(t,i.onStatisticField,e)||i.onStatisticExpression&&(0,c.e)(t,i.name,i.statisticType,e)),selected:i.statisticType===e})}renderResultFieldName(){const{aggregateField:e,strings:t}=this;return(0,s.h)("div",{class:"section"},(0,s.h)("calcite-label",null,t.fields.resultFieldName),(0,s.h)("calcite-input",{type:"text",disabled:!0,value:e.name,label:t.fields.resultFieldName}))}renderFieldAlias(){const{layer:e,aggregateField:t,strings:i}=this,a=(0,c.c)(e,t.name),n=(t.isAutoGenerated?a.label:t.alias)||t.name;return(0,s.h)("div",{class:"section"},(0,s.h)("calcite-label",null,i.fields.fieldAlias),(0,s.h)("calcite-input",{type:"text",value:n,label:i.fields.fieldAlias,onCalciteInputInput:s=>{if(this.disconnected)return;clearTimeout(this.fieldAliasHandle);const a=s.target;let n=a.value;this.blockNode.heading=n,n?this.updateAlias(n):this.fieldAliasHandle=setTimeout((()=>{const s=(0,c.c)(e,t.name);if(!(t.isAutoGenerated?s.label:t.alias)){const s=(0,c.d)(e,t.onStatisticField);n=`${s.alias||s.name} ${(0,d.h)(t.statisticType,i).toLocaleLowerCase()}`,this.blockNode.heading=n,a.value=n}this.updateAlias(n)}),3e3)}}))}renderFormatting(){const{layer:e,aggregateField:t,modules:i,strings:a}=this,{FieldInfoFormat:n}=i,o=e.featureReduction.popupTemplate,r=(0,c.d)(e,t.onStatisticField);if(t.onStatisticExpression||!r&&"count"!==t.statisticType||"string"===r?.type)return(0,s.h)(s.F,null);const d=o.fieldInfos.find((e=>e.fieldName===t.name));d.format=d.format||new n({dijitSeparator:!0,places:0});const h=["date","timestamp-offset"].includes(r?.type),m=!r||["integer","small-integer","big-integer"].includes(r.type),p=l.a.has(d.format.dateFormat)?l.a.get(d.format.dateFormat):l.a.get("short-date-short-time");return(0,s.h)("div",{class:"format"},(0,s.h)("calcite-label",{scale:"l"},a.fields.formatting),!m&&!h&&this.renderSignificantDigits(d.format),!h&&this.renderThousandSeparator(d.format),h&&this.renderDateFormat(p.dateFormat),h&&this.renderShowTime(p.timeFormat),h&&this.renderTimeFormat(p.timeFormat))}renderSignificantDigits(e){const{strings:t}=this;return(0,s.h)("section",null,(0,s.h)("calcite-label",null,t.fields.significantDigits,(0,s.h)("calcite-select",{label:t.fields.significantDigits,onCalciteSelectChange:t=>{const i=t.target;e.places=Number(i.selectedOption.value)||0,this.arcgisChange.emit()}},(0,s.h)("calcite-option",{value:"0",selected:0===e.places},t.fields.decimalPlaces0),(0,s.h)("calcite-option",{value:"1",selected:1===e.places},t.fields.decimalPlaces1),[2,3,4,5,6,7,8].map((i=>(0,s.h)("calcite-option",{value:`${i}`,selected:e.places===i},t.fields.decimalPlacesN.replace("${num}",`${i}`)))))))}renderThousandSeparator(e){const{strings:t}=this;return(0,s.h)("section",null,(0,s.h)("calcite-label",{layout:"inline-space-between"},t.fields.show1000Separator,(0,s.h)("calcite-switch",{scale:"s",checked:e.digitSeparator,onCalciteSwitchChange:t=>{const i=t?.target;e.digitSeparator=i.checked,this.arcgisChange.emit()}})))}renderDateFormat(e){const{strings:t,modules:i,displayDate:a}=this,{intl:n}=i;return(0,s.h)("calcite-label",null,t.fields.dateFormat,(0,s.h)("calcite-select",{ref:e=>this.dateFormatSelectNode=e,label:t.fields.dateFormat,onCalciteSelectChange:()=>this.changeDateFormat()},l.d.map((t=>(0,s.h)("calcite-option",{value:t,selected:e===t},n.formatDate(a,n.convertDateFormatToIntlOptions(t)))))))}renderShowTime(e){const{strings:t}=this;return(0,s.h)("div",{class:"single-line-label-switch-section",ref:e=>this.showTimeNode=e},(0,s.h)("calcite-label",{class:"single-line-label-switch-label"},t.fields.showTime),(0,s.h)("calcite-switch",{scale:"s",class:"single-line-label-switch-switch",ref:e=>this.showTimeSwitchNode=e,checked:(0,o.i)(e),onCalciteSwitchChange:()=>this.changeDateFormat()}))}renderTimeFormat(e){const{strings:t}=this;return(0,s.h)("calcite-label",{ref:e=>this.timeFormatNode=e},t.fields.timeFormat,(0,s.h)("calcite-select",{label:t.fields.timeFormat,ref:e=>this.timeFormatSelectNode=e,onCalciteSelectChange:()=>this.changeDateFormat()},l.t.map((t=>(0,s.h)("calcite-option",{value:t,selected:e===t},this.getTimeFormatString(t))))))}getCurrentFieldInfo(){const{layer:e,aggregateField:t}=this;return e.featureReduction.popupTemplate.fieldInfos.find((e=>e.fieldName===t.name))}saveFieldInfo(){const{layer:e,aggregateField:t,currentFieldInfo:i,arcadeExpMap:s}=this,a=e.featureReduction?.popupTemplate;if(this.arcadeExpMap.has(i.fieldName)&&a?.expressionInfos&&a.expressionInfos.find(((e,t)=>{`${n.f.expression}${e.name}`===i.fieldName&&(a.expressionInfos[t]=s.get(i.fieldName).clone())})),a?.fieldInfos){const e=a.fieldInfos.findIndex((e=>e.fieldName===this.aggregateField.name));a.fieldInfos[e]=i.clone()}Array.isArray(a?.content)&&a.content.forEach((e=>{"fields"===e.type&&e.fieldInfos&&e.fieldInfos.forEach(((s,a)=>{if(s.fieldName===t.name){const t=i.clone();t.visible=!0,e.fieldInfos[a]=t}}))})),this.arcgisChange.emit()}handleFieldSelect(){const{layer:e,mapView:t,aggregateField:i,fieldPickListSortBy:s,strings:a}=this,n=(0,r.f)(this.el,"calcite-flow-item"),o=n.getBoundingClientRect().width||215;this.arcgisFieldPickList=document.createElement("arcgis-field-pick-list"),this.arcgisFieldPickList.popoverProps={placement:"auto",offsetDistance:-1*(o+10),offsetSkidding:0,pointerDisabled:!0,triggerDisabled:!0,popoverWidth:o+30,refElement:n},this.arcgisFieldPickList.fields=this.createPickListFields(),this.arcgisFieldPickList.layer=e,this.arcgisFieldPickList.mapView=t,this.arcgisFieldPickList.showFieldInfo=!0,this.arcgisFieldPickList.showFieldName=!1,this.arcgisFieldPickList.selectedFields=[i.onStatisticField],this.arcgisFieldPickList.sortBy=s,this.arcgisFieldPickList.addEventListener("arcgisClose",(t=>{t.stopPropagation();const i=t.detail?.selectedFields?.[0];if(n.disabled=!1,this.arcgisFieldPickList&&(document.body.removeChild(this.arcgisFieldPickList),this.arcgisFieldPickList=void 0,setTimeout((()=>{this.fieldNode?.setFocus()}),1)),i){const{aggregateField:t}=this,s=(0,c.d)(e,i),n=(0,c.b)(s);let o=0,l=(0,c.h)(e,s.name,n[o]);for(;o<n.length&&l;)o++,n[o]===t.statisticType&&o++,o<n.length&&(l=(0,c.h)(e,s.name,n[o]));if(l)return;const r=t.name,h=n[o];t.name=`${s.name}_${h}`,t.onStatisticField=s.name,t.onStatisticExpression=null,t.alias=`${s.alias||s.name} ${(0,d.h)(h,a).toLowerCase()}`,t.statisticType=h,this.replacePopupField(r),this.currentFieldInfo=this.getCurrentFieldInfo(),this.arcgisChange.emit()}})),this.arcgisFieldPickList.addEventListener("arcgisSortByChange",(e=>this.fieldPickListSortBy=e.detail)),document.body.appendChild(this.arcgisFieldPickList),this.arcgisFieldPickList.setFocus(),n.disabled=!0}createPickListFields(){const{layer:e,aggregateField:t}=this,{fields:i}=e;return i.filter((e=>["small-integer","big-integer","integer","single","double","long","number","string","date","timestamp-offset"].includes(e.type))).filter((i=>t.onStatisticField===i.name||!(0,c.i)(e,i.name))).map((e=>({name:e.name,alias:e.alias,type:e.type})))}replacePopupField(e){const{layer:t,aggregateField:i,modules:s}=this,{FieldInfo:a}=s,n=t.featureReduction,{popupTemplate:o}=n;o.fieldInfos=o.fieldInfos||[];const l=o.fieldInfos.findIndex((t=>t.fieldName===e)),r=i.onStatisticField?(0,c.d)(t,i.onStatisticField):i.onStatisticExpression;o.fieldInfos.splice(l,1,new a({fieldName:i.name,label:i.alias,isEditable:!1,visible:!0,format:i.onStatisticExpression?"number"===i.onStatisticExpression.returnType?{digitSeparator:!0}:void 0:"string"===r.type?void 0:["date","timestamp-offset"].includes(r.type)?{dateFormat:"short-date-short-time"}:["small-integer","big-integer","integer","long","number"].includes(r.type)?{digitSeparator:!0}:{digitSeparator:!0,places:1}})),o.content?.forEach(((t,i)=>{"fields"===t.type&&t.fieldInfos&&(o.content[i].fieldInfos=o.content[i].fieldInfos?.filter((t=>t.fieldName!==e)))}))}removeField(){const{layer:e,aggregateField:t}=this,i=e.featureReduction,s=i.popupTemplate;let a=s.fieldInfos.findIndex((e=>e.fieldName===t.name));a>=0&&s.fieldInfos.splice(a,1),a=i.fields.findIndex((e=>e.name===t.name)),i.fields.splice(a,1),s.content?.forEach(((e,i)=>{"fields"===e.type&&e.fieldInfos&&(s.content[i].fieldInfos=s.content[i].fieldInfos?.filter((e=>e.fieldName!==t.name)))})),this.arcgisDelete.emit()}async openArcadeEditor(){const{strings:e}=this;if(!this.arcadeEditor){(0,r.f)(this.el,"calcite-flow-item").disabled=!0,this.arcadeEditor=document.createElement("arcgis-map-config-modal-arcade"),this.arcadeEditor.arcadeScript=this.aggregateField.onStatisticExpression?.expression||"",this.arcadeEditor.arcadeProfile=this.getArcadeProfile(),this.arcadeEditor.testData=await this.getArcadeTestData(),this.arcadeEditor.addExistingExpressions=!0,this.arcadeEditor.layer=this.layer,this.arcadeEditor.portal=this.portal,this.arcadeEditor.arcadeTitle=this.aggregateField.onStatisticExpression?.title||e.fields.newExpression,this.arcadeEditor.arcadeTitleEditable=!0,this.arcadeEditor.returnPredictOutputType=!0,this.arcadeEditor.arcadeTitleEditingEnabled=!this.aggregateField.onStatisticExpression?.title,document.body.appendChild(this.arcadeEditor),this.arcadeEditor.addEventListener("arcgisClose",(e=>this.arcadeSetup(e.detail)))}}getArcadeProfile(){const{layer:e}=this;return{id:"labeling",definitions:{$feature:e}}}async getArcadeTestData(){const{layer:e,mapView:t}=this;try{return{profileVariableInstances:{$feature:(await(0,o.l)(e,t)).features[0]},spatialReference:this.mapView.spatialReference,timeZone:this.mapView.timeZone}}catch(e){console.log(e)}}arcadeSetup(e){const{layer:t,aggregateField:i,strings:a}=this;if(e&&"date"!==e.predictOutputType){if(e?.script){const n="number"===e.predictOutputType?a.fields.sum:a.fields.mode,o=i.name,l=`${e.title}_${n.toLocaleLowerCase()}`;if(t.featureReduction.fields.find((e=>e.name===l))&&o!==l){const i=t.featureReduction.fields.map((e=>e.name));let s=1;for(;i.includes(`${e.title}_${s}_${n.toLocaleLowerCase()}`);)s++;e.title=`${e.title}_${s}`}i.name=`${e.title}_${n.toLocaleLowerCase()}`,i.alias=e.title,i.onStatisticField=null,i.statisticType="number"===e.predictOutputType?"sum":"mode",i.onStatisticExpression?(i.onStatisticExpression.expression=e.script,i.onStatisticExpression.title=e.title,i.onStatisticExpression.returnType=e.predictOutputType??"number"):i.onStatisticExpression={expression:e.script,title:e.title,returnType:e.predictOutputType??"number"},this.replacePopupField(o),this.currentFieldInfo=this.getCurrentFieldInfo(),this.arcgisChange.emit(),(0,s.f)(this.el)}this.handleArcadeModalClose()}else this.handleArcadeModalClose()}handleArcadeModalClose(){const{flowItemNode:e}=this;e.disabled=!1,this.arcadeEditor&&(document.body.removeChild(this.arcadeEditor),this.arcadeEditor=void 0),this.arcadeButtonNode?.setFocus()}updateAlias(e){const{layer:t,aggregateField:i}=this,s=(0,c.c)(t,i.name);i.isAutoGenerated?s.label=e:i.alias=e,this.updatePopupAlias(),this.arcgisChange.emit()}updatePopupAlias(){const{layer:e,aggregateField:t}=this,i=e.featureReduction,s=(0,c.c)(e,t.name),a=t.isAutoGenerated?s.label:t.alias;t.isAutoGenerated||(s.label=a),Array.isArray(i.popupTemplate.content)&&i.popupTemplate.content.length&&i.popupTemplate.content.forEach((e=>{if("fields"===e.type&&e.fieldInfos){const i=e.fieldInfos.find((e=>e.fieldName===t.name));i&&(i.label=a)}}))}setupDateTimeDisplay(){const{currentFieldInfo:e}=this,t=l.a.get(e.format.dateFormat);t&&(""===t.timeFormat?(this.showTimeNode.style.display="flex",this.showTimeSwitchNode.checked=!1,this.timeFormatNode.style.display="none"):null===t.timeFormat?(this.showTimeNode.style.display="none",this.showTimeSwitchNode.checked=!1,this.timeFormatNode.style.display="none"):(this.showTimeNode.style.display="flex",this.showTimeSwitchNode.checked=!0,this.timeFormatNode.style.display="block"))}getTimeFormatString(e){const{strings:t}=this;return e===l.t[0]?t.fields.shortTime:e===l.t[1]?t.fields.longTime:e===l.t[2]?t.fields.shortTime24:e===l.t[3]?t.fields.longTime24:t.fields.shortTime24}changeDateFormat(){const{currentFieldInfo:e}=this,t=this.dateFormatSelectNode?.selectedOption?.value,i=this.timeFormatSelectNode?.selectedOption?.value,s=l.a.get(t);""===s.timeFormat?e.format.dateFormat=this.showTimeSwitchNode.checked?`${t}-${i}`:`${t}`:null===s.timeFormat&&(e.format.dateFormat=`${t}`),this.saveFieldInfo(),this.setupDateTimeDisplay()}toggleTooltip(e){e&&!this.tooltipNode?(this.tooltipNode=document.createElement("calcite-tooltip"),this.tooltipNode.open=!0,this.tooltipNode.innerHTML=this.strings.fields.moreOptions,this.tooltipNode.placement="leading-start",this.tooltipNode.overlayPositioning="fixed",this.tooltipNode.referenceElement=this.dropdownActionNode,document.body.append(this.tooltipNode)):e||(this.tooltipNode?.parentElement?.removeChild(this.tooltipNode),this.tooltipNode=void 0)}closePopovers(){this.arcgisFieldPickList&&(document.body.removeChild(this.arcgisFieldPickList),this.arcgisFieldPickList=void 0),this.tooltipNode&&(this.tooltipNode.parentElement?.removeChild(this.tooltipNode),this.tooltipNode=void 0)}get el(){return(0,s.a)(this)}};m.style=".section{padding-top:15px}.format{padding-top:20px}.field-selection{display:flex;width:100%;justify-content:space-between;align-items:stretch;min-width:0}.field-selection-button{width:calc(100% - 32px - var(--calcite-spacing-xs))}.single-line-label-switch-section{display:flex;margin:0;padding:var(--calcite-spacing-sm) 0}.single-line-label-switch-label{display:flex;flex-flow:column nowrap;flex:1 0 0%;overflow:hidden}.single-line-label-switch-switch{flex:0 0 0%;justify-self:flex-end;margin:0}.single-line-label-switch-switch input{display:none}"},24795:(e,t,i)=>{function s(e){return e.fields.filter((e=>["small-integer","big-integer","integer","single","double","long","number","string"].includes(e.type)))}function a(e,t){if(t)return e.fields.find((e=>e.name===t))}function n(e,t,i){const s=e.featureReduction;return!!s.fields?.find((e=>e.onStatisticField===t&&e.statisticType===i))}function o(e,t,i,s){const a=t.substring(0,t.lastIndexOf(`_${i}`)),n=e.featureReduction;return!!n.fields?.find((e=>e.name.substring(0,e.name.lastIndexOf(`_${s}`))===a&&e.statisticType===s))}function l(e,t){return!r(a(e,t)).find((i=>!n(e,t,i)))}function r(e){return["string","date","timestamp-offset"].includes(e.type)?["mode"]:["sum","avg","min","max","mode"]}function d(e,t){return e.featureReduction.popupTemplate.fieldInfos.find((e=>e.fieldName===t))}function c(e,t,i){const{FieldInfo:s}=i,a=t.featureReduction,{popupTemplate:n}=a;n.fieldInfos=n.fieldInfos||[];n.fieldInfos.find((t=>t.fieldName===e.name))||n.fieldInfos.push(new s({fieldName:e.name,label:e.alias,isEditable:!1,visible:!0,format:h(e,t)}))}function h(e,t){const i=e.onStatisticField,s=e.onStatisticExpression,n="sum"===e.statisticType,o="count"===e.statisticType,l=a(t,i),r=o||s&&n||l&&["small-integer","big-integer","integer","long","number"].includes(l.type);return l&&["single","double"].includes(l.type)?{digitSeparator:!0,places:1}:r?{digitSeparator:!0}:void 0}i.d(t,{a:()=>c,b:()=>r,c:()=>d,d:()=>a,e:()=>o,g:()=>s,h:()=>n,i:()=>l})},28903:(e,t,i)=>{i.d(t,{a:()=>n,d:()=>s,t:()=>a});const s=["short-date","long-month-day-year","day-short-month-year","long-date","long-month-year","short-month-year","year"],a=["short-time","long-time","short-time-24","long-time-24"],n=new Map;n.set("short-date",{dateFormat:s[0],timeFormat:""}),n.set("short-date-short-time",{dateFormat:s[0],timeFormat:a[0]}),n.set("short-date-long-time",{dateFormat:s[0],timeFormat:a[1]}),n.set("short-date-short-time-24",{dateFormat:s[0],timeFormat:a[2]}),n.set("short-date-long-time-24",{dateFormat:s[0],timeFormat:a[3]}),n.set("long-month-day-year",{dateFormat:s[1],timeFormat:""}),n.set("long-month-day-year-short-time",{dateFormat:s[1],timeFormat:a[0]}),n.set("long-month-day-year-long-time",{dateFormat:s[1],timeFormat:a[1]}),n.set("long-month-day-year-short-time-24",{dateFormat:s[1],timeFormat:a[2]}),n.set("long-month-day-year-long-time-24",{dateFormat:s[1],timeFormat:a[3]}),n.set("day-short-month-year",{dateFormat:s[2],timeFormat:""}),n.set("day-short-month-year-short-time",{dateFormat:s[2],timeFormat:a[0]}),n.set("day-short-month-year-long-time",{dateFormat:s[2],timeFormat:a[1]}),n.set("day-short-month-year-short-time-24",{dateFormat:s[2],timeFormat:a[2]}),n.set("day-short-month-year-long-time-24",{dateFormat:s[2],timeFormat:a[3]}),n.set("long-date",{dateFormat:s[3],timeFormat:""}),n.set("long-date-short-time",{dateFormat:s[3],timeFormat:a[0]}),n.set("long-date-long-time",{dateFormat:s[3],timeFormat:a[1]}),n.set("long-date-short-time-24",{dateFormat:s[3],timeFormat:a[2]}),n.set("long-date-long-time-24",{dateFormat:s[3],timeFormat:a[3]}),n.set("long-month-year",{dateFormat:s[4],timeFormat:null}),n.set("short-month-year",{dateFormat:s[5],timeFormat:null}),n.set("year",{dateFormat:s[6],timeFormat:null}),n.set("default",{dateFormat:s[0],timeFormat:a[2]})},89268:(e,t,i)=>{i.d(t,{F:()=>d,a:()=>r,b:()=>n,c:()=>o,d:()=>s,e:()=>a,f:()=>l,g:()=>c,h:()=>m,i:()=>h});const s=9,a=90,n=37.5,o=9,l=90,r=37.5;var d;function c(e){const t=e.featureReduction;if(t)return"binning"===t.type?"binning":"cluster"===t.type?function(e){const t=e.featureReduction;return!!t.renderer&&"pie-chart"===t.renderer.type&&!t?.renderer?.authoringInfo?.isAutoGenerated}(e)?"pie-chart":"cluster":void 0}function h(e){const t=e.featureReduction;return!t?.renderer||!!t?.renderer?.authoringInfo?.isAutoGenerated}function m(e,t){switch(e){case"sum":return t.fields.sum;case"avg":return t.fields.mean;case"min":return t.fields.min;case"max":return t.fields.max;case"stddev":return t.fields.stdDev;case"mode":return t.fields.mode;case"var":return t.fields.var;case"count":return t.fields.count;default:return""}}!function(e){e.CLUSTERING="clustering",e.CHART_CLUSTERING="chartClustering",e.BINNING="binning"}(d||(d={}))}}]);