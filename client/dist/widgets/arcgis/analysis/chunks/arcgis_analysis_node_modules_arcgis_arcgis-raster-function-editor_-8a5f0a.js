"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-8a5f0a"],{5839:(e,t,n)=>{n.d(t,{D:()=>r,S:()=>a,a:()=>c,b:()=>d,c:()=>h,f:()=>g,g:()=>l});const a={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Hindi:"hi",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",Norwegian:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},i=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"],s={"ar-BH":"ar","en-AU":"en","en-CA":"en","en-GB":"en","en-US":"en","es-ES":"es","es-MX":"es","de-CH":"de","de-AT":"de","de-DE":"de","fr-CA":"fr","fr-CH":"fr","fr-FR":"fr","it-CH":"it","it-IT":"it",nb:"no",nn:"no","nn-no":"no",ind:"id",ukr:"uk"},o=[a.Arabic,a.Hebrew],r=a.English;function d(e){return!0===e?"rtl":"ltr"}function l(e=document.documentElement){const t=(n="[lang]",function e(t){let a;return a=void 0===t||t===document||t===window?null:t.closest(n)||e(t.getRootNode().host),a}(e));var n;const i=t?.lang??window.navigator.language,d=Object.values(a),l=r,h=function(e,t){const n=r;let a=e?.toLowerCase();if(void 0!==a&&-1!==a.indexOf("-")){const[e,t]=a.split("-");a=`${e}-${t.toUpperCase()}`}return a?!0===Object.keys(s).includes(a)?t[a]:a:n}(i,s);return{locale:d.includes(h)?h:l,rtl:o.includes(i)}}async function h(e,t){const n=e.tagName.toLowerCase(),{locale:a,rtl:i}=l(e),s=await async function(e){const{path:t,locale:n,baseURL:a}=e;let i={};try{const e=await fetch(`${a}t9n/${t}.t9n.${n}.json`);i=await e.json()}catch(e){const n=await fetch(`${a}t9n/${t}.t9n.${r}.json`);i=await n.json()}return i}({path:n,locale:a,baseURL:t});return{strings:s,dir:d(i),locale:a}}function c(e,t){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const n=window.location.href,a=new URL(n).origin,i=new URL(t).origin;a!==i&&(e=`${i}${e}`)}return e}function g(e,t="en"){let n=t;!0===Object.keys(s).includes(t)&&(n=s[t]);const a=n.toLocaleLowerCase();return!0===i.includes(a)&&(e=e.replace(/^https?:\/\/[^/]+\/en/,(e=>e.replace("en",a)))),e}},33797:(e,t,n)=>{n.d(t,{C:()=>i,U:()=>a,a:()=>s,u:()=>o});const a={Scale:"s",PopoverTimer:60},i={s:"s",m:"m",l:"l"},s={absolute:"absolute",fixed:"fixed"},o=e=>e===i.s?i.m:i.l},45994:(e,t,n)=>{n.r(t),n.d(t,{rfx_cte_band_combination_editor:()=>a.R});var a=n(56814);n(83628),n(5294),n(13661),n(18423),n(21255),n(35431),n(5839),n(92991),n(32513),n(44345),n(588),n(55448),n(2924),n(11840),n(52373),n(33752),n(440),n(66744),n(33797),n(23795),n(17902),n(56451),n(71802),n(36596)},56814:(e,t,n)=>{n.d(t,{R:()=>h});var a=n(83628),i=(n(5294),n(13661),n(18423),n(21255),n(35431),n(5839)),s=n(92991),o=(n(588),n(55448),n(2924),n(11840),n(52373),n(33752),n(440),n(66744),n(44345),n(33797));n(23795),n(17902),n(56451),n(71802),n(32513),n(36596);const r="methodHelpClickHandler",d="bandHelpClickHandler",l="combinationHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.helpActionClickEventHandlers=new Map,this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method)},this.onBandChange=e=>{const t=e.target.value,n=this.bandCombinationElement.value?.trim(),a=(0,s.i)(n)?[]:n.indexOf(",")>0?n.split(","):n.split(" ");a.push(t),this._updateBandValues(this._getBandComboFormatedValue(a))},this.onBandCombinationChange=()=>{const e=this._getBandCombinationValue();this._updateBandValues(e)}}connectedCallback(){this.widgetArgs?.rasterArgs&&(this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",(()=>{this.updateRasterArg()})))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,i.c)(this.hostElement,(0,a.a)("."))),this.updateRasterArg(),this.setMethodValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}setMethodValue(){this.method=this.widgetArgs.inputArgs?.Method?.value??this.widgetArgs.rasterFunctionEnums[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Method?.displayName,referenceElement:this.bandCombinationMethodContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_method}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandNames?.displayName,referenceElement:this.bandCombinationBandContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_band}),n=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandWavelengths?.displayName,referenceElement:this.bandCombinationCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_combination});this.helpActionClickEventHandlers.set(r,e),this.helpActionClickEventHandlers.set(d,t),this.helpActionClickEventHandlers.set(l,n)}getMethodOptions(){return this.widgetArgs.rasterFunctionEnums.bandComboMethods.map((e=>({key:e.key.toString(),label:e.label})))}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map((e=>({key:e.label.toString(),label:e.label})))}_getBandCombinationValue(){const e=this.bandCombinationElement.value?.trim();if((0,s.i)(e))return[];const t=e.indexOf(",")>0?e.split(","):e.split(" ");return this._getBandComboFormatedValue(t)}_getBandComboFormatedValue(e){return e.map((e=>{let t;return t=1===this.method?parseFloat(e):2===this.method?parseInt(e,10)-1:e.trim(),t}))}_updateBandValues(e){const t=this.widgetArgs.inputArgs;t&&(0===this.method&&t.BandNames?t.BandNames.value=e:1===this.method&&t.BandWavelengths?t.BandWavelengths.value=e:2===this.method&&t.BandIds&&(t.BandIds.value=e)),this.widgetArgs={...this.widgetArgs,inputArgs:t}}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?await this.updateBandsOnLayerLoad():this.layer.when((async()=>{await this.updateBandsOnLayerLoad(),this._setupValues()})))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[];const n=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),a=n?.keyProperties;if(a?.BandProperties?.forEach(((n,a)=>{e.push({label:String(a+1)}),t.push({label:n.BandName??`Band_${a+1}`})})),!a.BandProperties||a.BandProperties&&!a.BandProperties.length){const a=this._getDefaultBandProperties(n.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelengths:[{label:"200"},{label:"400"},{label:"600"}]}}_getDefaultBandProperties(e){const t=[],n=[];for(let a=1;a<=e;a++)t.push({label:String(a)}),n.push({label:`Band_${a}`});return{bandNames:n,bandIds:t}}getBandCombinationValue(){const e=this.widgetArgs.inputArgs;return 0===this.method&&e.BandNames&&e.BandNames.value&&e.BandNames.value.length?e.BandNames.value.join(" "):1===this.method&&e.BandWavelengths&&e.BandWavelengths.value&&e.BandWavelengths.value.length?e.BandWavelengths.value.join(" "):2===this.method&&e.BandIds&&e.BandIds.value&&e.BandIds.value.length?e.BandIds.value.map((function(e){return+e+1})).join(" "):void 0}render(){const e=this.getMethodOptions(),t=this.getBandCombinationValue(),n=0===this.method?"bandNames":1===this.method?"bandWavelengths":"bandIds",i=this.getBandOptions(n);return(0,a.h)("div",{key:"047e519ab39424a1f6fbaa951a686c6fad579c82"},(0,a.h)("calcite-label",{key:"a50259f6161cf8bbbe17d7890810a56232892192",alignment:"start",scale:o.U.Scale,layout:"default",ref:e=>{this.bandCombinationMethodContainer=e}},(0,a.h)("rfx-label",{key:"e72cd0936d85c2b470d043e7ecaf2abcf351f4ca",label:this.strings.method,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dtex-common-select",{key:"99cc1c3f2137155808e94e35afba612a9c5e8350",mode:this.widgetArgs.mode,options:e,value:this.method.toString(),onRfxArgumentChange:this.onMethodChange})),(0,a.h)("calcite-label",{key:"7e6f25d4aea7d1ba0ea1a144caf3054853140e32",alignment:"start",scale:o.U.Scale,layout:"default",ref:e=>{this.bandCombinationBandContainer=e}},(0,a.h)("rfx-label",{key:"b05c578247b59f5572a12d121bc02c26b3330a93",label:this.strings.band,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(d)()}),(0,a.h)("rfx-dtex-common-select",{key:"49057a33df6a23278789f748f720be49c1edbac2",mode:this.widgetArgs.mode,options:i,onRfxArgumentChange:this.onBandChange,value:void 0})),(0,a.h)("calcite-label",{key:"5e99ac2350c9fdd651f03b2fe8bfc6c868e2592f",alignment:"start",scale:o.U.Scale,layout:"default",ref:e=>{this.bandCombinationCombinationContainer=e}},(0,a.h)("rfx-label",{key:"e5998b9725ec13194cda14ffe07833981af27f8e",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("calcite-input-text",{key:"09043463653d231a3516d48f021c2f6b7b238662",scale:o.U.Scale,dir:this.direction,status:"idle",alignment:"start","prefix-text":"","suffix-text":"",value:t,onCalciteInputTextChange:this.onBandCombinationChange,ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}}}]);