/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-708376.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-708376"],{3826:(e,i,r)=>{r.d(i,{a:()=>n,b:()=>l,c:()=>o,d:()=>t});const t=(0,r(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=t.state,l=t.state,o=t.state},33547:(e,i,r)=>{r.d(i,{a:()=>v,b:()=>c,c:()=>d,e:()=>a,f:()=>p,i:()=>u});var t=r(59317),n=r(3826);const l="create feature layer",o="my content",s=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},a=e=>{const i=t.c.telemetry;null==i||i.stepWorkflow(l,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:l,attribute:s(n.a.addFeatureLayerType),pageName:o})},u=e=>{const i=t.c.telemetry;null==i||i.stepWorkflow(l,`expand ${e} details`,{category:l,attribute:s(n.a.addFeatureLayerType),pageName:o})},c=()=>{const e=t.c.telemetry;null==e||e.stepWorkflow(l,"filter",{category:l,attribute:s(n.a.addFeatureLayerType),pageName:o})},d=e=>{const i=s(e),r=t.c.telemetry;null==r||r.stepWorkflow(l,"from option",{category:l,attribute:i,pageName:o})},v=()=>{const{addFeatureLayerType:e,serviceInfo:i}=n.a,r=i,a=t.c.telemetry;null==a||a.endWorkflow(l,{category:l,attribute:s(e),pageName:o,count:r.layers.length,number:r.tables.length})},p=e=>{var i;null===(i=t.c.telemetry)||void 0===i||i.logError({category:l,error:e})}},50822:(e,i,r)=>{r.d(i,{a:()=>o,b:()=>l,c:()=>u,d:()=>c,e:()=>d,f:()=>v,g:()=>p,i:()=>s,u:()=>a});r(93814);var t=r(87744);function n(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function l(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function o(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function s(e,i){return e.owner===i.username}function a(e,i){return s(e,i)||function(e,i){var r;if(null!=e.isAdmin)return!!e.isAdmin;const t=e.owner,n="admin"===e.itemControl,l=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!s(e,i)&&n&&t.includes("esri_")&&!l.includes(t))return!1;return n}(e,i)}const u=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),c=(e,i)=>`${(0,t.a)(i)}item.html?id=${e}`,d=(e,i)=>`${(0,t.g)(i)}/content/users/${e}`,v=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{}),p=(e,i)=>`${(0,t.a)(i)}content/items/${e}`},56175:(e,i,r)=>{r.d(i,{A:()=>L,B:()=>N,C:()=>p,D:()=>F,a:()=>s,b:()=>l,c:()=>o,d:()=>m,e:()=>y,f:()=>b,g:()=>w,h:()=>S,i:()=>v,j:()=>P,k:()=>O,l:()=>a,m:()=>k,n:()=>c,o:()=>d,p:()=>f,q:()=>G,r:()=>E,s:()=>u,t:()=>C,u:()=>D,v:()=>x,w:()=>_,x:()=>g,y:()=>h,z:()=>T});var t=r(50822);const n=e=>{var i,r,t;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==r?r:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.id};function l(e){return e&&!e.orgId}function o(e,i){return(0,t.u)(e,i)||"update"===e.itemControl||(0,t.c)([e],i)&&b(i)}function s(e,i){const r=(0,t.c)([e],i),n=(0,t.u)(e,i)||b(i)&&r,l=w(i)&&I(i);return!!(n||r&&l)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function v(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function p(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function f(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const m=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},g=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},h=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function b(e){return"org_admin"===n(e)||"account_admin"===n(e)}function y(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function w(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function P(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function S(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function k(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const I=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function _(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function L(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function x(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function O(e,i,r,t){const n=t&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(t.type),l=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!b(i)&&!l||!(null==r?void 0:r.isPortal)&&!n)}function F(e){return!!e&&(!w(e)||w(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const N=({items:e,user:i,portal:r})=>{const n=e[0],l=n.owner;if(r.isPortal&&l!==i.username&&l.includes("esri_")&&!["esri_livingatlas"].includes(l))return!1;const s=(0,t.u)(n,i),a=w(i),u=A(i),c=o(n,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||C(e)||D(e)||!!i.canSharePublic&&T(e)}(i,r)||A(i));return s||c||(0,t.c)(e,i)&&u};function A(e){return x(e)||_(e)||L(e)}const $=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function E(e){return e.some((e=>$.includes(e)))}function G(e){return e.filter((e=>$.includes(e)))}},59285:(e,i,r)=>{r.r(i),r.d(i,{arcgis_new_item_pages_feature_layer_select:()=>v});var t=r(87849),n=r(72257),l=r(3826),o=r(95878),s=r(33547),a=r(59317),u=r(68065),c=r(66111),d=r(83929);r(37762),r(86562),r(15332),r(50637),r(931),r(93814),r(87744),r(56175),r(50822);const v=class{constructor(e){(0,t.r)(this,e),this.newItemUpdatePage=(0,t.c)(this,"newItemUpdatePage",7),this.options={build:{icon:"layer",page:"featureLayerFromScratch"},existing:{icon:"layers",page:"featureLayerFromExisting"},template:{icon:"add-layer",page:"featureLayerFromTemplate"},link:{icon:"link",page:"featureLayerFromURL"},custom:{icon:"layer-connection",page:"featureLayerFromCustomDataProvider"},file:{icon:"upload-to",page:"featureLayerUpload"}},this.selected="build",this.cdfEnabled=void 0,this.openCDPAlert=void 0,this.hasCDPPrivileges=void 0}async componentWillLoad(){const{user:e,portal:i}=a.c;o.u.onlyHosted=!1,l.a.enablePublishing=!1,l.a.newItemMode="featureLayer",l.a.type="Feature Service",n.i.tags=[],n.i.snippet="",l.a.serviceInfo=null,l.a.selectedServiceInfoLayersNames=null;const r=(await(0,d.b)(e,i)).filter((function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()}));if(this.selected=l.a.addFeatureLayerType||"build",this.i18n=o.u.i18n.featureLayerSelect,r){a.c.hostingServer=r,this.cdfEnabled=await(0,u.c)(r),this.hasCDPPrivileges=await this.canPublishCustomDataProvider(e,i);const t=await(0,u.g)(r);this.hasCustomDataProviders=t&&Object.keys(t).length>0}}handleNext(){const e=this.selected;l.a.addFeatureLayerType=e,l.a.enablePublishing=!0,o.u.onlyHosted="file"===e,(0,s.c)(e),this.openCDPAlert="custom"===this.selected&&!this.hasCustomDataProviders,this.openCDPAlert||this.newItemUpdatePage.emit(this.options[this.selected].page)}async canPublishCustomDataProvider(e,i){const r=await(0,c.m)(e),t=await(0,c.d)(e,i);return r&&t}render(){const{i18n:e,options:i}=this,{portal:r,config:{helpBase:n,helpMap:l}}=a.c;return(0,t.h)("div",{key:"17856850f60e753d0eb1d8a61963374554b4ba07"},(0,t.h)("arcgis-new-item-description",{key:"c3321972bb196992191192eacb050d9b20d8af7c",header:e.heading}),(0,t.h)("calcite-tile-select-group",{key:"b5f79869186972dd26fa4e0b6aff2ae726ab1a54",layout:"vertical",class:"tile-select"},Object.keys(i).map((n=>{var l;const{icon:o}=i[n];if(("custom"!==n||this.hasCDPPrivileges&&"Error"!==(null===(l=this.cdfEnabled)||void 0===l?void 0:l.message)&&r.isPortal)&&("data"!==n||a.c.allowedModes.includes("file")))return(0,t.h)("calcite-tile-select",{checked:this.selected===n,heading:e.options[n].title,description:e.options[n].description,icon:o,name:"feature-layer-create-mode","input-enabled":!0,width:"full",type:"radio",value:n,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})}))),(0,t.h)("calcite-alert",{key:"61693f65bf11587f6893679cf2b7c4a3ddeeb0e1",icon:"exclamation-mark-triangle",open:this.openCDPAlert,label:this.i18n.alertTitle,kind:"danger",onCalciteAlertClose:()=>this.openCDPAlert=!1},(0,t.h)("div",{key:"7e66731e930368765d55fb9e06a934dc0e6d32be",slot:"title"},e.alertTitle," "),(0,t.h)("div",{key:"555d41c35900692091b5fc06e62dcf804a814faa",slot:"message"},e.alertDesc),(0,t.h)("calcite-link",{key:"1997efdc404140a645c3e3e6a583f18d8aea6144",slot:"link",href:`${n}${l[120005101]}`},e.learnMore)))}get el(){return(0,t.a)(this)}};v.style=".tile-select{margin-top:1.25rem}"},66111:(e,i,r)=>{r.d(i,{A:()=>I,B:()=>E,a:()=>F,b:()=>b,c:()=>O,d:()=>v,e:()=>p,f:()=>P,g:()=>y,h:()=>f,i:()=>h,j:()=>S,k:()=>k,l:()=>T,m:()=>c,n:()=>_,o:()=>L,p:()=>d,q:()=>U,r:()=>N,s:()=>G,t:()=>x,u:()=>A,v:()=>M,w:()=>$,x:()=>H,y:()=>a,z:()=>C});var t=r(83929),n=r(87744),l=r(56175),o=r(59317),s=r(50637);async function a(){return new Promise((async e=>{const{portal:i}=o.c;if(null==i?void 0:i.isPortal){const r=i.helperServices.geocode,t=await function(e){const{config:i,portal:r}=o.c;return new Promise((async(t,n)=>{const l=e.filter((e=>u(e.url,r))).filter((e=>e.isEsriBatchGeocoder))[0];if(l){const e=l.url.split("/servers/")[1].split("/rest/services/")[0],r=`${i.restBaseUrl}/content/items/${e}`;try{t((await(0,s.r)(r)).url)}catch(e){n(e)}}else n("No world geocoder configured")}))}(r);e(t)}else{const r=function(e){const i=null==e?void 0:e.portalHostname;if(-1!==i.indexOf("dev"))return"dev";if(-1!==i.indexOf("qa"))return"qa";return""}(i);e(`https://geocode${r}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function u(e="",i){var r;const t=i.isPortal,n=e.toLowerCase(),l=n.indexOf("/geocodeserver")>-1&&n.indexOf("/rest/services/")>-1,o=t&&n.indexOf(null===(r=i.portalHostname)||void 0===r?void 0:r.toLowerCase())>-1,s=!t&&n.indexOf("utility")&&n.indexOf(".arcgis.com")>-1;return l&&(o||s)}function c(e){return(0,l.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,l.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,i){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,t.i)(i,e)}const p=e=>!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function f(e,i){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,t.i)(i,e)}const m=async(e,i)=>{var r;return await f(e,i)&&(!i.isPortal||!!i.supports3DTilesServices||!!(null===(r=i.sourceJSON)||void 0===r?void 0:r.supports3DTilesServices))};function g(e){return!(0,l.b)(e)&&!0}function h(e){var i;return!(0,l.b)(e)&&(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishScenes"))}const b=e=>!(0,l.b)(e);function y(e,i,r){var t,n;const l=!!(null===(n=null===(t=i.helperServices)||void 0===t?void 0:t.rasterAnalytics)||void 0===n?void 0:n.url),o=function(e,i,r){var t;return(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishDynamicImagery"))&&(i.isPortal||w(r))}(e,i,r),s=i.isPortal?o:o||function(e,i,r){var t;return(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishTiledImagery"))&&!i.isPortal&&w(r)}(e,i,r);return l&&s}function w(e){return null==e?void 0:e.some((e=>{var i;return null===(i=e.entitlements)||void 0===i?void 0:i.some((e=>"image"===e.toLowerCase()))}))}async function P(e){var i;const{userLicensedItems:r}=await(0,s.r)(`${null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl}/community/self?returnUserLicensedItems=true`);return r}function S(e,i){var r,t;const o=null===(r=i.helperServices)||void 0===r?void 0:r.geocode.some((({url:e})=>u(e,i))),s=null!==(t=null==e?void 0:e.privileges)&&void 0!==t?t:[];return!(0,l.b)(e)&&o&&(!i.isPortal||!(0,n.i)(i)&&s.includes("portal:user:viewOrgItems")&&s.includes("portal:user:createItem"))}const k=e=>!(0,l.b)(e);function I(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function C(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function D(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((i=>{var r;return null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes(i)}))}function T(e,i,r){var t,n,o;return!(0,l.d)(r)&&((null==i?void 0:i.isPortal)?!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:registerDataStores")):D(e)&&("1"===(null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.level)||"2"===(null===(o=null==e?void 0:e.sourceJSON)||void 0===o?void 0:o.level)))}const _=(e,i,r)=>!i.isPortal&&!(0,l.b)(e)&&!(0,l.d)(r)&&D(e);function L(e){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const x=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function O(e,i,r){return!i.isPortal&&await v(e,i)&&await async function(e,i,r){return!(0,l.b)(e)&&!!i.supportsHostedServices&&c(e)&&(await f(e,i)||await v(e,i)||h(e)||g(e)||y(e,i,r))}(e,i,r)}async function F(e,i,r){switch(i){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,r);case"Tile Package":return f(e,r);case"3DTiles Package":return m(e,r);case"Vector Tile Package":return g(e);case"Scene Package":return h(e);case"Service Definition":return async function(e,i){return await v(e,i)&&await f(e,i)}(e,r);default:return!0}}function N(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageCredits"))}function A(e,i){var r,t,n;return(0,l.f)(e)||N(e)||!!((null!==(r=null==e?void 0:e.assignedCredits)&&void 0!==r?r:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.assignedCredits)>-1&&(null===(n=null==i?void 0:i.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const $=e=>!1;function E(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))}function G(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))}function U(e){return(0,l.e)(e)||G(e)&&function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewItems"))}(e)&&(function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:reassignItems"))}(e))}function H(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const M=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},68065:(e,i,r)=>{r.d(i,{c:()=>l,g:()=>n});var t=r(50637);async function n(e){var i;const r=` ${null===(i=e[0])||void 0===i?void 0:i.url}/admin/services/types/customdataproviders`;try{return await(0,t.r)(r,"post")}catch(e){console.warn(e)}}async function l(e){var i;const r=` ${null===(i=e[0])||void 0===i?void 0:i.url}/admin/services/types/customdataproviders/checkcdf`;try{return await(0,t.r)(r,"post")}catch(e){return e}}},72257:(e,i,r)=>{r.d(i,{a:()=>l,g:()=>a,i:()=>o});var t=r(37762),n=r(86562);const l=(0,t.c)({title:"",snippet:"",tags:[],categories:[]}),o=l.state,s=new Map;function a(e){return(0,n.g)({el:e,tag:"arcgis-item-properties",cache:s})}},86562:(e,i,r)=>{r.d(i,{g:()=>n});var t=r(15332);function n(e){const{el:i,tag:r,cache:n}=e,l=(0,t.c)(i,r),o=n.get(l);return o||(l?(n.set(l,l.store),l.store):null)}},95878:(e,i,r)=>{r.d(i,{a:()=>t,u:()=>n});const t=(0,r(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),n=t.state}}]);