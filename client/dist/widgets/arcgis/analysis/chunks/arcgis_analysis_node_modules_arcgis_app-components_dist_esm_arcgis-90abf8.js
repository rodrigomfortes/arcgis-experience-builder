/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-90abf8.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-90abf8"],{10089:(e,i,t)=>{t.d(i,{c:()=>d});var s=t(46227),l=t(43555),r=t(32710),o=t(50637),a=t(59317),n=t(3826),c=function(e){return this instanceof c?(this.v=e,this):new c(e)},u=function(e,i,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,l=t.apply(e,i||[]),r=[];return s={},o("next"),o("throw"),o("return",(function(e){return function(i){return Promise.resolve(i).then(e,u)}})),s[Symbol.asyncIterator]=function(){return this},s;function o(e,i){l[e]&&(s[e]=function(i){return new Promise((function(t,s){r.push([e,i,t,s])>1||a(e,i)}))},i&&(s[e]=i(s[e])))}function a(e,i){try{(t=l[e](i)).value instanceof c?Promise.resolve(t.value.v).then(n,u):d(r[0][2],t)}catch(e){d(r[0][3],e)}var t}function n(e){a("next",e)}function u(e){a("throw",e)}function d(e,i){e(i),r.shift(),r.length&&a(r[0][0],r[0][1])}};function d(e,i,t){return u(this,arguments,(function*(){var u,d,p,v;const{config:h,portal:m,user:f}=t,{item:g}=yield c(function(e,i){const t=`${i.userContentUrl}/items/${e.id}`;return(0,o.r)(t)}(e,f)),y=yield c((0,r.z)(m));yield yield c("publishingService");const b=g.ownerFolder&&"/"!==g.ownerFolder&&"root"!==g.ownerFolder,w=`${i}---${(0,s.g)()}`,{createServiceResponse:I,addToDefinitionResponse:T}=yield c((0,r.A)(Object.assign({name:b?w:i,layers:(null==y?void 0:y.layers)||[],tables:(null==y?void 0:y.tables)||[]},y),{config:h,user:f}));b&&(yield c((0,l.m)(I.itemId,g.ownerFolder)),(null===(d=null===(u=a.c.portal)||void 0===u?void 0:u.sourceJSON)||void 0===d?void 0:d.hasClassificationSchema)&&(n.a.classification.createdUser=a.c.user.username,n.a.classification.createdDate=Date.now()),yield c((0,l.u)(I.itemId,Object.assign({title:i},(null===(v=null===(p=a.c.portal)||void 0===p?void 0:p.sourceJSON)||void 0===v?void 0:v.hasClassificationSchema)?{classification:JSON.stringify(n.a.classification)}:{})))),yield yield c("appendingPhotos");const{statusUrl:S}=yield c(function(e,i,t){var s;const l=i.layers[0],r=`${e.encodedServiceURL}/${null!==(s=l.id)&&void 0!==s?s:0}/append`,a={appendItemId:t.id,appendUploadFormat:"imageCollection",appendAttachmentsInfo:JSON.stringify({ignoreAttachmentsWithoutLocation:!0}),upsert:!1,useGlobalIds:!1,rollbackOnFailure:!0};return(0,o.r)(r,a,{},"post")}(I,T,g));yield c(function(e,i,t){const s=`${t.userContentUrl}/addRelationship`,l={relationshipType:"Service2Data",destinationItemId:i.id,originItemId:e.itemId};return(0,o.r)(s,l,{},"post")}(I,g,f)),yield yield c("checkingStatus"),yield c((0,o.p)(S)),yield yield c(I)}))}},11163:(e,i,t)=>{t.d(i,{D:()=>r,T:()=>a,a:()=>u,b:()=>p,c:()=>v,d:()=>o,e:()=>n,f:()=>s,g:()=>c,p:()=>d,t:()=>l});const s=["standard","custom"],l=["IntegratedMesh","3DObject"],r=l[0],o=["vector","raster","3dTiles"],a=147914382,n=0,c=[{level:0,label:"1:591,657,528",scale:591657527.591555},{level:1,label:"1:295,828,764",scale:295828763.795777},{level:2,label:"1:147,914,382",scale:147914381.897889},{level:3,label:"1:73,957,191",scale:73957190.948944},{level:4,label:"1:36,978,595",scale:36978595.474472},{level:5,label:"1:18,489,298",scale:18489297.737236},{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],u={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},d={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:295828763.795777},{level:1,resolution:39135.75848200009,scale:147914381.897889},{level:2,resolution:19567.87924099992,scale:73957190.948944},{level:3,resolution:9783.93962049996,scale:36978595.474472},{level:4,resolution:4891.96981024998,scale:18489297.737236},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},p={format:"indexedVector",compressionQuality:0,antialiasing:!1},v={format:"PNG32",compressionQuality:0,antialiasing:!0}},13446:(e,i,t)=>{t.d(i,{a:()=>a,r:()=>o});var s=t(72257),l=t(3826),r=t(95878);function o(){l.d.reset(),s.a.reset()}const a=()=>{if(l.a.existingItem||"register"===r.u.workflow)return;l.d.reset();const e=s.i.folder;s.a.reset(),s.i.folder=e}},38511:(e,i,t)=>{t.d(i,{p:()=>s});const s=(0,t(37762).c)({sourceItem:null,i18n:null}).state},60743:(e,i,t)=>{t.d(i,{a:()=>p,c:()=>v,p:()=>m});var s=t(59317),l=t(3826),r=t(95878),o=t(11163),a=t(72411),n=t(8214),c=t(32710),u=t(43555),d=t(50637);async function p(e,i){var t,r,a,n,c;const d=null!==(t=null!=i?i:s.c.user)&&void 0!==t?t:s.c.portal.user,{cloudProviderResource:p,geoJSONResource:v,locationType:h,csvResource:m,existingItem:f}=l.a,{result:g}=await(0,u.a)(e.id),y=[...g.typeKeywords];if((p||v||m)&&y.push("Cloud Drive"),"address"===h&&y.push("showUnmatchedAddresses"),["3DTiles Package","3DTiles Service"].includes(g.type))if("3dTiles"===l.a.tileLayerPublishType)y.push(l.a.tilesLayer3dTilesLayerType);else if(f){const e=[...f.typeKeywords].find((e=>o.t.includes(e)));e&&y.push(e)}return(null===(a=null===(r=s.c.portal)||void 0===r?void 0:r.sourceJSON)||void 0===a?void 0:a.hasClassificationSchema)&&(l.a.classification.createdUser=s.c.user.username,l.a.classification.createdDate=Date.now()),(0,u.u)(e.id,Object.assign({typeKeywords:null==y?void 0:y.join(",")},(null===(c=null===(n=s.c.portal)||void 0===n?void 0:n.sourceJSON)||void 0===c?void 0:c.hasClassificationSchema)?{classification:JSON.stringify(l.a.classification)}:{}),d)}async function v(e){const i=await(0,c.g)(e.id,{success:e.success});if("failed"===i.status)throw new Error(i.statusMessage)}function h(e,i,t){const{selectedFields:s,timezone:r,analyzeResults:o,type:a}=l.a,c=o.publishParameters,u=(0,n.a)();u.fields=Object.keys(s).map((e=>{const i=s[e];var t;return t=i.type,["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeSmallInteger"].includes(t)&&(i.sqlType=function(e){switch(e){case"esriFieldTypeDouble":return"sqlTypeDouble";case"esriFieldTypeInteger":case"esriFieldTypeOID":return"sqlTypeInteger";case"esriFieldTypeString":return"sqlTypeNVarchar";case"esriFieldTypeSingle":return"sqlTypeFloat";case"esriFieldTypeSmallInteger":return"sqlTypeSmallInt";case"esriFieldTypeDate":return"sqlTypeDate";default:return"sqlTypeOther"}}(i.type),delete i.length),i})),u.capabilities="Query",c.capabilities="Query",u.hasStaticData=!0,c.hasStaticData=!0,c.persistErrorRecordsForReview=!0,c.name=e;const d=(null==t?void 0:t.isPortal)?{timezone:r||"UTC"}:{ianaTimeZone:r||Intl.DateTimeFormat().resolvedOptions().timeZone||"GMT"};return i||"GeoJson"===a?u.dateFieldsTimeReference=d:c.dateFieldsTimeReference=d,c}async function m(e,i){var t,s,o,n;const{user:c,portal:u,title:p,itemId:v,extension:m,type:f,dataUrl:g,itemOwnerUrl:y}=e;null!=i||(i=Object.assign({},function(e,i,t,s,r,o){i=(0,a.a)(i);let n="Scene Service"===r?r:t.toLowerCase();"zip"===n&&(n=r);const c="Microsoft Excel"===r,u={name:i,maxRecordCount:2e3},d=("GeoJson"===r||"CSV"===r)&&o,p=l.a.cloudProvider||d?{deleteSourceItemUponCompletion:!0}:{},v=JSON.stringify(u),m=JSON.stringify(Object.assign(Object.assign(Object.assign({},u),{hasStaticData:!0,layerInfo:{capabilities:"Query"}}),"geojson"===n||"json"===n?{fieldTypesVersion:"V2"}:{}));switch(n){case"3tz":return{itemId:e,publishParameters:JSON.stringify({name:i}),filetype:"3DTilesPackage",outputType:"3DTilesService"};case"csv":case"xls":case"xlsx":return Object.assign({itemId:e,filetype:c?"excel":"csv",publishParameters:JSON.stringify(h(i,c,s))},p);case"featurecollection":return{itemId:e,filetype:"featureCollection",publishParameters:m};case"geojson":case"json":return Object.assign({itemId:e,filetype:"geojson",publishParameters:m},p);case"tpk":case"tpkx":return{itemId:e,filetype:"tilePackage",publishParameters:v,buildInitialCache:!0};case"vtpk":return{itemId:e,filetype:"vectortilepackage",publishParameters:v,outputType:"vectorTiles",buildInitialCache:!0};case"spk":case"slpk":return{itemId:e,filetype:"scenepackage",publishParameters:v,outputType:"sceneService",buildInitialCache:!0};case"Scene Service":return{itemId:e,filetype:"featureService",publishParameters:JSON.stringify({name:i,targetSR:{wkid:4326,latestWkid:4326}}),outputType:"sceneService",buildInitialCache:!1};case"sd":return{itemId:e,filetype:"serviceDefinition",buildInitialCache:!1};case"File Geodatabase":return Object.assign({itemId:e,filetype:"fileGeodatabase",publishParameters:m},p);case"Shapefile":return Object.assign({itemId:e,filetype:"shapefile",publishParameters:m},p);case"gpkg":return{itemId:e,filetype:"geoPackage",publishParameters:v};case"Image Collection":return{itemId:e,filetype:"imageCollection",outputType:"image service",publishParameters:v};default:return{itemId:e,publishParameters:v}}}(v,p,m,u,f,g)));const b=`${"append"===r.u.workflow?y:c.userContentUrl}/publish`;try{const e=await(0,d.r)(b,i,{},"post");if(e.services&&e.services.length){if(null===(s=null===(t=e.services[0])||void 0===t?void 0:t.error)||void 0===s?void 0:s.message)throw null===(n=null===(o=e.services[0])||void 0===o?void 0:o.error)||void 0===n?void 0:n.message;return{result:e}}throw this.i18n.errorPublishing}catch(e){return console.error(e),e.includes("Service name")?{error:{code:"serviceNameExists"}}:{error:{code:"unhandledError"}}}}},94526:(e,i,t)=>{t.r(i),t.d(i,{arcgis_publish_item_pages_item_properties:()=>g});var s=t(87849),l=t(38295),r=t(50020),o=t(59317),a=t(56175),n=t(72257),c=t(10089),u=t(60743),d=t(43555),p=t(13446),v=t(15912),h=t(75294),m=t(38511);t(50637),t(931),t(93814),t(87744),t(51102),t(50822),t(37762),t(86562),t(15332),t(32710),t(83929),t(3826),t(76246),t(63054),t(24869),t(95878),t(11163),t(8214),t(66111);var f=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,t=e[Symbol.asyncIterator];return t?t.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(t){i[t]=e[t]&&function(i){return new Promise((function(s,l){(function(e,i,t,s){Promise.resolve(s).then((function(i){e({value:i,done:t})}),i)})(s,l,(i=e[t](i)).done,i.value)}))}}};const g=class{constructor(e){(0,s.r)(this,e),this.workflowCancel=(0,s.c)(this,"workflowCancel",7),this.workflowComplete=(0,s.c)(this,"workflowComplete",7),this.newItemToggleNavigationEnabled=(0,s.c)(this,"newItemToggleNavigationEnabled",7),this.arcgisWorkflowUpdateError=(0,s.c)(this,"arcgisWorkflowUpdateError",7),this.workflowCancelled=!1,this.handleRequest=async()=>{const{categories:e,title:i}=n.i;if(await this.validate()){(null==i?void 0:i.length)>250&&(this.titleRef.title=i.substring(0,250));try{const{publishResponse:i}=await this.publishItem();if(e&&await(0,l.u)({portal:this.portal,itemIds:[i.id],categories:e}),this.workflowCancelled)(null==i?void 0:i.id)&&await(0,d.d)(i.id,{permanentDelete:!0}),this.workflowCancel.emit();else{const e=Object.assign({},i);this.workflowComplete.emit(e)}(0,p.r)()}catch(e){console.error(e),this.errorMessage=this.parseError(e.code),this.arcgisWorkflowUpdateError.emit(this.errorMessage),this.showLoader(!1)}}else this.arcgisWorkflowUpdateError.emit(this.errorMessage)},this.item=void 0,this.portal=void 0,this.user=void 0,this.errorMessage=void 0,this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0}async validate(){var e,i,t;const s=await(null===(e=this.titleRef)||void 0===e?void 0:e.validateTitle());if(s)return this.errorMessage={title:m.p.i18n.error.title,description:s.translatedMessage},this.titleRef.focusMainInput(),!1;const l=await(null===(i=this.itemPropertiesFolderRef)||void 0===i?void 0:i.saveActiveFolder());if(l){if("boolean"==typeof l&&!l)return!1;if("string"==typeof l)return this.errorMessage={title:m.p.i18n.error.title,description:l},!1}const r=await(null===(t=this.summaryRef)||void 0===t?void 0:t.getErrorMessage());return!r||(this.errorMessage={title:m.p.i18n.error.title,description:r.translatedMessage},!1)}async navigateToNextPage(){this.handleRequest()}async componentWillLoad(){var e,i;if(m.p.i18n=m.p.i18n,null!==(e=this.portal)&&void 0!==e||(this.portal=o.c.portal),null!==(i=this.user)&&void 0!==i||(this.user=o.c.user),!this.item)return console.error("No item found"),void this.arcgisWorkflowUpdateError.emit(this.errorMessage);this.folder=await(0,r.b)(this.item,this.user)}async publishItem(){const{id:e,type:i,typeKeywords:t}=this.item,s={success:!0,id:e,folder:null},l="Image Collection"===i&&(null==t?void 0:t.includes("Photo locations"))?await this.publishPhotosWithLocations(s):await this.publishService(e);return await(0,u.a)(l,this.user),{addResponse:s,publishResponse:l}}async publishService(e){var i;const{type:t}=this.item,s=v.a[t].fileExt[0];this.showLoader(!0,{loaderType:"indeterminate",loaderMessage:m.p.i18n.publishingService});const{result:l,error:r}=await(0,u.p)({itemId:e,user:this.user,portal:this.portal,title:n.i.title,extension:s,type:t});if(!r){const e=null===(i=l.services)||void 0===i?void 0:i[0];return{success:!0,id:null==e?void 0:e.serviceItemId,jobId:null==e?void 0:e.jobId,serviceType:null==e?void 0:e.type,serviceUrl:null==e?void 0:e.serviceurl}}console.error("there was an error",r)}async publishPhotosWithLocations(e){var i,t,s,l;const{config:r,user:a,portal:u}=o.c;this.showLoader(!0,{loaderType:"indeterminate",loaderMessage:m.p.i18n.publishingService});const d=(0,c.c)(e,n.i.title,{config:r,user:a,portal:u});try{for(var p,v=!0,h=f(d);!(i=(p=await h.next()).done);v=!0){l=p.value,v=!1;const e=l;if("string"!=typeof e)return{success:!0,id:e.serviceItemId,jobId:null,serviceType:e.type,serviceUrl:e.serviceurl};this.updateLoader("indeterminate",m.p.i18n[e])}}catch(e){t={error:e}}finally{try{v||i||!(s=h.return)||await s.call(h)}finally{if(t)throw t.error}}}showLoader(e,i){i&&this.updateLoader(i.loaderType,i.loaderMessage),e?(this.newItemToggleNavigationEnabled.emit(!1),this.loading=!0):(this.newItemToggleNavigationEnabled.emit(!0),this.loading=!1)}updateLoader(e,i){this.loaderType=e,this.loaderMessage=i}parseError(e){var i,t,s,l;const{i18n:r}=m.p;return{title:null!==(t=null===(i=r.error[e])||void 0===i?void 0:i.title)&&void 0!==t?t:"no error code title",description:null!==(l=null===(s=r.error[e])||void 0===s?void 0:s.description)&&void 0!==l?l:"no error code description"}}render(){if(!this.item)return;const{type:e}=this.item,{user:i}=o.c;return(0,s.h)(s.H,null,(0,s.h)("arcgis-new-item-loader",{type:this.loaderType,value:h.w.uploadProgress,active:this.loading,text:this.loaderMessage}),(0,s.h)("arcgis-item-properties",{onArcgisItemPropertiesChange:()=>this.arcgisWorkflowUpdateError.emit(null)},"Service Definition"!==e&&(0,s.h)("arcgis-title-input",{itemTitle:this.item.title,class:"medium",currentFolder:this.item.ownerFolder,type:e,enablePublishing:!0,ref:e=>{this.titleRef=e}}),(0,s.h)("arcgis-folder-picker",{class:"medium",ref:e=>this.itemPropertiesFolderRef=e,folder:this.folder}),!(0,a.b)(i)&&(0,s.h)("arcgis-categories-picker",{class:"medium"}),(0,s.h)("arcgis-tags-picker",{class:"medium"}),(0,s.h)("arcgis-summary-input",{class:"medium",ref:e=>this.summaryRef=e})))}get el(){return(0,s.a)(this)}};g.style=".layer-description.sc-arcgis-publish-item-pages-item-properties{display:block;margin-bottom:0.75rem}.locator__heading.sc-arcgis-publish-item-pages-item-properties{font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1);line-height:18px;margin-bottom:2px}.locator__description.sc-arcgis-publish-item-pages-item-properties{margin:0px;margin-bottom:1rem;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-1)}.medium.sc-arcgis-publish-item-pages-item-properties{--arcgis-label-font-weight:500}.info-container.sc-arcgis-publish-item-pages-item-properties{margin-bottom:1.5rem}"}}]);