/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-c88821.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-c88821"],{10465:(t,e,i)=>{i.d(e,{D:()=>s,a:()=>d,b:()=>l,c:()=>a,g:()=>T,s:()=>b});class s{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}const n=(t,e,i)=>(0,o(e).subscribe)((e=>{const s=e.some((e=>((t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(t,e.target)));s&&i()})),r={},o=t=>{const e=t.join(","),i=r[e];if(void 0!==i)return i;const s=new Set,n=new MutationObserver((t=>s.forEach((e=>e(t)))));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const o={subscribe:t=>(s.add(t),()=>{s.delete(t),0===s.size&&(n.disconnect(),r[e]=void 0)})};return r[e]=o,o},a=(t,e)=>{let i=t;for(;i;){const t=i.closest?.(e);if(t)return t;const s=i.getRootNode?.();if(s===globalThis.document)return null;i=s.host}return null},l=t=>c(t,"dir","ltr"),c=(t,e,i)=>{const s=a(t,`[${e}]`);return s?.getAttribute(e)??i},h=t=>{let e="";for(let i=0;i<t;i++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},d=()=>[h(2),h(1),h(1),h(1),h(3)].join("-"),g="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),u=new Set(g),p="en",f={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},m={},C=async(t,e)=>{const i=`${e}${t}.json`;try{const t=await fetch(i);if(t.ok)return await t.json()}catch(t){return console.error(t),{}}return t===p?{}:await C(p,e)},T=t=>{const e=c(t,"lang",globalThis.navigator?.language||p);return{lang:e,t9nLocale:N(e)}},N=t=>{const[e,i]=t.split("-"),s=e.toLowerCase();let n=s;return i&&(n=`${s}-${i.toUpperCase()}`),n=f[n]??n,u.has(n)?n:i?N(s):p},b=(t,e,i,s)=>{let r;const o=()=>w(t,e(),s).then((t=>{r?.lang===t.lang&&r.t9nLocale===t.t9nLocale&&r.t9nStrings===t.t9nStrings||i(t),r=t})).catch(console.error);return queueMicrotask(o),n(t,["lang"],o)},w=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:s,t9nLocale:n}=T(t),r=`${e}/${i}/t9n`,o=null===i?{}:await(async(t,e,i="")=>{const s=`${e}/${i}`,n=`${s}${t}.json`;return m[n]??(m[n]=C(t,s)),await m[n]})(n,r,"messages.");return{lang:s,t9nLocale:n,t9nStrings:o}}},39085:(t,e,i)=>{i.r(e),i.d(e,{arcgis_un_ntc_pick_list:()=>l});var s,n=i(11254),r=i(69811),o=i(14528),a=i(84260);i(10465);!function(t){t.DEFAULT="default",t.DESCRIPTION="description",t.TITLE="title",t.TYPE="type"}(s||(s={}));const l=class{constructor(t){(0,n.r)(this,t),this.arcgisChange=(0,n.c)(this,"arcgisChange",7),this.arcgisNtcPickListChange=(0,n.c)(this,"arcgisNtcPickListChange",7),this.arcgisClose=(0,n.c)(this,"arcgisClose",7),this.arcgisNtcPickListDismissed=(0,n.c)(this,"arcgisNtcPickListDismissed",7),this.manager=(0,o.u)(this),this.strings=(0,a.u)({blocking:!0}),this.errorMessage="",this.namedTraceConfigurations=[],this.namedTraceConfigurationInfos=[],this.utilityNetwork=void 0,this.selectedNTCs=[],this.popoverProps=void 0,this.multipleDisabled=!1,this.multiple=!0,this.showFilterLength=10,this.filterPlaceholderText=void 0,this.hideSort=!1,this.showSort=!0,this.sortBy=s.DEFAULT,this.lastSortBy=s.DEFAULT,this.filterNTCs=[]}async componentWillLoad(){console.warn("%cmap-config-components","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",'[arcgis-un-ntc-pick-list] component in @arcgis/map-config-components is deprecated and will be removed soon. Use "arcgis-map-config-un-ntc-picker" instead.'),this.multiple||this.multipleDisabled||(this.multipleDisabled=!0),this.showSort||this.hideSort||(this.hideSort=!0),this.NamedTraceConfiguration=await(0,r.Q)(),this.lastSortBy=this.sortBy||this.lastSortBy;try{if(this.namedTraceConfigurations=await this.utilityNetwork.queryNamedTraceConfigurations({}),!this.namedTraceConfigurations.length)return void(this.errorMessage=this.strings.ntcNoTracesFound);this.namedTraceConfigurations.forEach((t=>{this.namedTraceConfigurationInfos.push({id:t.globalId,creationDate:t.creationDate,creator:t.creator,description:t.description,minStartingPoints:t.minStartingPoints,resultTypes:t.resultTypes,tags:t.tags,title:t.title,type:t.traceType})})),this.utilityNetwork.sharedNamedTraceConfigurations.forEach((t=>{this.selectedNTCs.push(t.globalId)}))}catch(t){this.errorMessage=t.message}}async reposition(){this.popoverNode?.reposition()}render(){const{strings:t,popoverProps:e}=this;return(0,n.h)(n.H,{key:"a505446752877846ae516763520c48d01ce1ba3e",class:"js-app-flyout"},(0,n.h)("calcite-popover",{key:"0426fd4cc162cfce0e6f17fda63fa73a96735358",class:"popover",placement:e.placement||"leading-start",open:!0,pointerDisabled:!0,referenceElement:e.refElement,offsetDistance:e.offsetDistance||-Math.round(e.refElement.getBoundingClientRect().width),offsetSkidding:e.offsetSkidding||25,label:t.headerSelect,ref:t=>this.popoverNode=t},(0,n.h)("calcite-flow",{key:"6c2f4e07328ce48a98ec060d5fa53a3cab07fc21",class:"content",ref:t=>this.flowElement=t,style:{width:`${e.popoverWidth||e.refElement.getBoundingClientRect().width}px`}},(0,n.h)("calcite-flow-item",{key:"0997ab11f1eef97a89b1e4474966e6b6c7189ab9",class:"panel",heading:t.headerSelect,closable:!0,onCalciteFlowItemClose:()=>{this.arcgisNtcPickListDismissed.emit(),this.arcgisClose.emit()}},""===this.errorMessage?this.renderNtcPickList():this.renderErrorLabel()))))}renderNtcPickList(){const{strings:t}=this;return(0,n.h)("calcite-list",{label:t.ntc,selectionMode:this.multipleDisabled?"single":"multiple",ref:t=>this.listNode=t,filterEnabled:this.namedTraceConfigurationInfos.length>=this.showFilterLength,filterPlaceholder:this.filterPlaceholderText??t.filter,onCalciteListFilter:t=>{t.stopPropagation(),this.filterNTCs=this.listNode.filteredItems?.map((t=>t.value))},onCalciteListChange:()=>{const t=this.listNode.selectedItems.map((t=>t.value)),e=this.selectedNTCs.filter((e=>t.includes(e))),i=t.filter((t=>!this.selectedNTCs.includes(t))),s=[...new Set([...e,...i])];this.selectedNTCs=s,this.emitChange()}},this.namedTraceConfigurationInfos.length>=this.showFilterLength&&!this.hideSort&&this.renderSort(),this.renderSelectionButton(),[...this.getSortedList()].map((t=>this.renderCalciteListItem(t))))}renderErrorLabel(){return(0,n.h)("calcite-label",{class:"label"},this.errorMessage)}renderSort(){const{strings:t}=this;return(0,n.h)("calcite-dropdown",{overlayPositioning:"fixed",slot:"filter-actions-end",placement:"bottom-end"},(0,n.h)("calcite-action",{slot:"trigger",text:t.sort,title:t.sort},(0,n.h)("calcite-icon",{scale:"s",icon:"sortDescending",flipRtl:!0})),(0,n.h)("calcite-dropdown-group",null,(0,n.h)("calcite-dropdown-item",{selected:this.lastSortBy===s.DEFAULT,onClick:()=>this.lastSortBy=s.DEFAULT},t.default),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortBy===s.TITLE,onClick:()=>this.lastSortBy=s.TITLE},t.name),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortBy===s.TYPE,onClick:()=>this.lastSortBy=s.TYPE},t.type),(0,n.h)("calcite-dropdown-item",{selected:this.lastSortBy===s.DESCRIPTION,onClick:()=>this.lastSortBy=s.DESCRIPTION},t.description)))}renderSelectionButton(){const{strings:t}=this;return(0,n.h)("div",{class:"selection-button-div"},(0,n.h)("calcite-button",{appearance:"transparent",scale:"s",width:"full",onClick:()=>{this.selectDeselect()?this.selectedNTCs=this.filterNTCs?.length?this.selectedNTCs.filter((t=>!this.filterNTCs.includes(t))):[]:this.selectedNTCs=this.filterNTCs?.length?[...new Set([...this.selectedNTCs,...this.filterNTCs])]:this.namedTraceConfigurationInfos.map((t=>t.id)),this.emitChange()}},this.selectDeselect()?t.deselectAll:t.selectAll))}renderCalciteListItem(t){const{strings:e}=this;return(0,n.h)("calcite-list-item",{key:t.id,label:t.title,description:t.description,value:t.id,selected:this.selectedNTCs.includes(t.id),metadata:{id:t.id,title:t.title}},(0,n.h)("calcite-action",{slot:"actions-end",text:e.info,title:e.info,scale:"s",icon:"information",onClick:e=>{e.stopPropagation();const i=document.createElement("calcite-flow-item");i.heading=t.title,i.description=t.description;const s=document.createElement("arcgis-un-ntc-pick-list-info");s.utilityNetwork=this.utilityNetwork,s.ntcId=t.id,s.strings=this.strings,s.classList.add("content"),i.appendChild(s),this.flowElement.appendChild(i),i.setFocus()}}))}getSortedList(){const t=[...this.namedTraceConfigurationInfos];return this.lastSortBy===s.TITLE?t.sort(((t,e)=>t.title.localeCompare(e.title))):this.lastSortBy===s.DESCRIPTION&&t.sort(((t,e)=>t.description.localeCompare(e.description))),this.lastSortBy===s.TYPE&&t.sort(((t,e)=>t.type.localeCompare(e.type))),t}selectDeselect(){return this.filterNTCs?.length?this.filterContainsAll():this.selectedNTCs.length===this.namedTraceConfigurationInfos.length}filterContainsAll(){return this.filterNTCs.every((t=>this.selectedNTCs.some((e=>e===t))))}emitChange(){const{NamedTraceConfiguration:t}=this;this.utilityNetwork.sharedNamedTraceConfigurations=[],this.selectedNTCs.forEach((e=>{const i=this.namedTraceConfigurations.find((t=>t.globalId===e));this.utilityNetwork.sharedNamedTraceConfigurations.push(new t({globalId:i.globalId,title:i.title}))})),this.arcgisNtcPickListChange.emit(this.utilityNetwork.sharedNamedTraceConfigurations),this.arcgisChange.emit(this.utilityNetwork.sharedNamedTraceConfigurations)}static get assetsDirs(){return["assets"]}get el(){return(0,n.a)(this)}};l.style=".popover{--calcite-popover-z-index:100}.panel{min-height:300px}.label{height:-webkit-fill-available;width:-webkit-fill-available;padding:10px}.selection-button-div{padding:4px 10px}.content{max-height:60vh}"},84260:(t,e,i)=>{i.d(e,{u:()=>o});var s=i(11254),n=i(10465),r=i(14528);function o({propertyName:t="strings",name:e}){let i=(0,r.r)();const o=(0,n.g)(i.el),l=new n.D,c={_lang:o.lang,_t9nLocale:o.t9nLocale};i.manager.onLoad((()=>l.promise));const h=new WeakRef(i);function d(){const t=h.deref();return t||u?.(),t}i=void 0;const g=a((()=>d()?.el)),u=(0,n.s)(g,(()=>(0,s.g)("./assets")),(({t9nLocale:e,t9nStrings:i,lang:s})=>{const n=d();if(!n)return;n[t]={...i,_lang:s,_t9nLocale:e},l.resolve()}),e);return c}const a=t=>new Proxy({},{get(e,i){const s=t();if(!s)return;const n=Reflect.get(s,i,s);return"function"==typeof n?n.bind(s):n}})}}]);