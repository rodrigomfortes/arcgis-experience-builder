"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_p-e9130c"],{7508:(e,a,l)=>{l.d(a,{A:()=>t,a:()=>h,b:()=>o,c:()=>f,d:()=>v,e:()=>A,f:()=>C,g:()=>p,h:()=>g,i:()=>k,j:()=>c,p:()=>s,s:()=>u});var n=l(84121),i=l(34074);const t={Vertical:"vertical",Horizontal:"horizontal"};function r(e,a,l,i){if(!(0,n.i)(e))return e;for(var t=-1,r=(a=(0,n.c)(a,e)).length,o=r-1,s=e;null!=s&&++t<r;){var u=(0,n.t)(a[t]),d=l;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(t!=o){var c=s[u];void 0===(d=void 0)&&(d=(0,n.i)(c)?c:(0,n.b)(a[t+1])?[]:{})}(0,n.a)(s,u,d),s=s[u]}return e}function o(e,a,l){for(var i=-1,t=a.length,o={};++i<t;){var s=a[i],u=(0,n.d)(e,s);l(u,s)&&r(o,(0,n.c)(s,e),u)}return o}var s=(0,n.f)((function(e,a){return null==e?{}:function(e,a){return o(e,a,(function(a,l){return(0,n.h)(e,l)}))}(e,a)}));function u(e,a,l){return null==e?e:r(e,a,l)}function d(e){const a=e.indexOf(".");let l=e,n="";return a>0&&(l=e.substring(0,a),n=e.substring(a+1)),[l,n]}function c(e,a){return e.filter((e=>"esriGPParameterDirectionOutput"!==e.direction))?.map((e=>({...a.find((a=>a.name===e.name)),...e})))}function p(e){const a=new Map;for(const l of e){const e=Array.isArray(l.destination)?l.destination:[l.destination];for(const n of e){const[e]=d(n);a.has(e)?a.get(e).push(l):a.set(e,[l])}}return a}function y(e,a,l){let n={...e};for(const e of l)for(const[l,t]of Object.entries(a)){const a=""===e?l:`${e}.${l}`;a.includes("parameterInfos")?n=(0,i.e)(n,a,t):u(n,a,t)}return n}async function f(e){const{param:a,data:l,rules:n,renderedParameters:t,currentTool:r,modelVariablesById:o}=e,s=a.name;if(void 0===s)return[a,l];let u={...a};for(const e of n){const a=await(0,i.X)({rule:e,data:l,renderedParams:t??{},currentTool:r,modelVariablesById:o});if(void 0===a)continue;const n=(Array.isArray(e.destination)?e.destination:[e.destination]).map(d).filter((([e])=>e===s));"value"in a&&(l[s]=a.value),u=y(u,a,n.map((([,e])=>e))),u.value=l[s]}return[u,l]}function m(e){let a;return e.impedanceAttributeName===e.timeAttributeName?a="time":e.impedanceAttributeName===e.distanceAttributeName&&(a="distance"),a}function h(e){const{param:a,data:l,travelModeInfo:n,straightLineLabel:t}=e,r=a.name;if(void 0===r)return[a,l];const o=l[r],s="defaultValue"in a?a.defaultValue:void 0,u=[],d={},c={};let p;if(void 0!==n){const e=n?.travelModes?.filter((e=>void 0===a.filterTravelModeType||m(e)===a.filterTravelModeType));p=n?.defaultTravelMode??void 0,void 0!==a.filterTravelModeType&&m(p)!==a.filterTravelModeType&&(p=e?.[0]??void 0),((0,i.d)(o)||o===s&&o!==i.Y)&&(l[r]=p),e?.forEach((e=>{const a=m(e);u.push(e.id),d[e.id]=e.name,c[e.id]=function(e,a){let l;switch(e.type.toLowerCase()){case"automobile":const e={time:"driving-time",distance:"driving-distance",other:"car"};l=e[a??"other"]??e.other;break;case"walk":const n={time:"walking-time",distance:"walking-distance",other:"walk"};l=n[a??"other"]??n.other;break;case"truck":const i={time:"trucking-time",distance:"trucking-distance",other:"dashboard"};l=i[a??"other "]??i.other;break;default:const t={time:"edit-attributes",distance:"edit-attributes",other:"dashboard"};l=t[a??"other "]??t.other}return l}(e,a)}))}s!==i.Y&&!0!==a.includeStraightLine||!1!==u.includes(i.Y)||(u.push(i.Y),d[i.Y]=t??i.Y,c[i.Y]="line-straight");let y=s===i.Y?i.Y:p?.id??"";(0,i.d)(o)||(y=o===i.Y?i.Y:o?.id??"");return[{...a,choiceListLabels:d,choiceList:u,choiceListIcons:c,value:y},l]}function v(e){const{param:a,data:l,renderedParameters:n}=e,i=a.name;if(void 0===i)return[a,l];const t=n?.[i],r=void 0===t&&!0===a.visible,o=void 0!==t&&!1===a.visible,s=void 0!==t&&!0===a.visible&&!1===a.readOnly&&void 0===a.value&&void 0!==a.defaultValue;return r||s?(l[i]??(l[i]=a.defaultValue??void 0),a.value=l[i]):o&&(l[i]=void 0,a.value=l[i]),[a,l]}const b=e=>void 0===e.visible||!0===e.visible;function A(e){const{defaultValues:a,user:l,hasAdvancedLicense:n}=e;return a.userSettings={unitSystem:l?.units,hasNAPrivilege:(0,i.W)(l),hasGEPrivilege:(0,i.a)(l),hasAdvancedLicense:n},a}function C(e){let{defaultValues:a}=e;const{toolName:l,toolUIJsonParametersByName:n,travelModeInfo:t}=e;return Object.keys(n??{}).forEach((e=>{const r=n?.[e];if(void 0!==r?.name&&!0===b(r))if(void 0!==t&&void 0!==l&&!0===(0,i.o)(r.name,l))a[r.name]=r.defaultValue,[,a]=h({param:r,data:a,travelModeInfo:t});else if("analysis-gp-composite"===r.componentName&&(0,i.m)(r.UIparameterInfos)){const e=void 0!==r.initialDataType?r.UIparameterInfos.find((e=>e.dataType===r.initialDataType)):r.UIparameterInfos.find((e=>!1!==e.visible));e&&(a[r.name]={dataType:e.dataType,value:e.defaultValue})}else a[r.name]=r.defaultValue;else void 0!==r?.name&&!1===r.visible&&(a[r.name]=void 0)})),a}function g(e){const{defaultValues:a,toolJsonParameters:l,toolUIJsonParametersByName:n}=e;return l?.forEach((e=>{const l=n?.[e.name];"esriGPParameterDirectionOutput"===e.direction||void 0!==a[e.name]||void 0!==l?.visible&&!0!==l?.visible||(a[e.name]=e.defaultValue??void 0)})),a}async function k(e){const{defaultValues:a,toolUIJsonParametersByName:l,rules:n}=e,i=function(e){const a=e?.filter((e=>(e=>{switch(e.ruleType){case"expression":return e.expression?.includes("userSettings");case"equals":return!0===e.valueA?.toString().includes("userSettings")||!0===e.valueB?.toString().includes("userSettings");default:return!1}})(e)&&(e=>"effectParams"in e&&"defaultValue"in e.effectParams)(e)));return a??[]}(n),t=p(i);for(const e of Object.keys(l??{})){const n=l?.[e];if(void 0!==n?.name&&!0===b(n)){const l=t.get(e);if(void 0!==l){const[e]=await f({param:n,data:a,rules:l,renderedParameters:{}});a[n.name]=e.defaultValue}}}return a}},26938:(e,a,l)=>{l.d(a,{A:()=>C,N:()=>h,a:()=>v,p:()=>b,s:()=>A});var n=l(28445),i=l(34074),t=l(35385),r=l(1161);const o=({key:e,onSetRef:a,onValueChange:l,onHelpClick:i,dataType:t,label:o,value:s,required:u,showStringVariables:d,choiceList:c,choiceListLabels:p,choiceListIcons:y,placeholderText:f,modelVariablesByDataType:m,onClearVariableByIdClick:h,showVariableNodesClick:v,...b})=>{let A=t===r.A.GPString;void 0!==m&&!1!==d||(A=!1);const C=void 0!==t?m?.[t]??[]:[];return(0,n.h)("analysis-string-input",{key:e,ref:a,label:o,value:s,required:u,choiceList:c,selectionMode:t===r.A.GPMultiValueString?"multi":"single",choiceListIcons:y,choiceListLabels:p,modelVariables:C,supportsVariables:A,onClearVariableById:h,onShowVariableNodesClick:v,onAnalysisStringInputChange:l,onAnalysisHelpClick:i,placeholderText:f,...b})},s=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,...o})=>{const{dataType:s,...u}=o;return(0,n.h)("analysis-boolean-input",{key:e,ref:a,label:t,value:r,onAnalysisBooleanInputChange:l,onAnalysisHelpClick:i,...u})},u=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,onClearVariableByIdClick:t,showVariableNodesClick:o,showDoubleVariables:s,modelVariablesByDataType:u,dataType:d,label:c,value:p,required:y,choiceList:f,placeholderText:m,...h})=>{const v=f?.map(parseFloat).filter(isFinite),b=d===r.A.GPLong||d===r.A.GPMultiValueLong?"integer":"float",A=d===r.A.GPMultiValueDouble||d===r.A.GPMultiValueLong?"multi":"single";let C=d===r.A.GPDouble;void 0!==u&&!1!==s||(C=!1);const g=void 0!==d?u?.[d]??[]:[];return(0,n.h)("analysis-number-input",{key:e,ref:a,"number-type":b,label:c,value:p,modelVariables:g,selectionMode:A,choiceList:v,supportsVariables:C,required:y,onAnalysisNumberInputChange:l,onAnalysisHelpClick:i,onClearVariableById:t,onShowVariableNodesClick:o,placeholderText:m,...h})},d=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,...o})=>(0,n.h)("analysis-date-input",{key:e,ref:a,label:t,value:r,onAnalysisHelpClick:i,onAnalysisDateInputChange:l,...o}),c=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,required:o,choiceList:s,placeholderText:u,...d})=>{const{dataType:c,...p}=d;return(0,n.h)("analysis-linear-unit-input",{key:e,ref:a,label:t,value:r,required:o,unitChoiceList:s,onAnalysisLinearUnitInputChange:l,onAnalysisHelpClick:i,placeholderText:u,...p})},p=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,required:o,choiceList:s,placeholderText:u,...d})=>{const{dataType:c,...p}=d;return(0,n.h)("analysis-areal-unit-input",{key:e,ref:a,label:t,value:r,required:o,unitChoiceList:s,onAnalysisArealUnitInputChange:l,onAnalysisHelpClick:i,placeholderText:u,...p})},y=({name:e,onSetRef:a,onValueChange:l,onHelpClick:o,countExtent:s,dataType:u,label:d,layerFilterType:c,value:p,required:y,user:f,portalHelpMap:m,mapLayers:h,modelVariables:v,selectedLayers:b,...A})=>{const C=u===r.A.GPMultiValueFeatureRecordSetLayer||u===r.A.GPMultiValueRecordSet,g=u===r.A.GPRecordSet||u===r.A.GPMultiValueRecordSet,k=u===r.A.GPFeatureRecordSetLayer||u===r.A.GPMultiValueFeatureRecordSetLayer;let V=c;return g?V=Array.isArray(c)?c.concat([t.L.Feature_Table]):void 0!==c?[c,t.L.Feature_Table]:[t.L.Feature_Table,t.L.Feature_All]:(0,i.d)(c)&&k&&(V=t.L.Feature_All),(0,n.h)("analysis-layer-input",{key:e,ref:a,label:d,value:p,required:y,user:f,portalHelpMap:m,layerFilterType:V,mapLayers:h,modelVariables:v,selectionMode:C?"multi":"single",selectedLayers:b,countExtent:s,onAnalysisLayerInputChange:l,onAnalysisHelpClick:o,...A})},f=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,dataType:t,label:o,value:s,required:u,layer:d,analysisDataset:c,placeholderText:p,...y})=>(0,n.h)("analysis-field-input",{key:e,ref:a,label:o,value:s,storeAsGPValue:t===r.A.GPField||t===r.A.GPMultiValueField,required:u,selectionMode:t===r.A.GPMultiValueField?"multi":"single",mapLayer:d,analysisDataset:c,onAnalysisFieldInputChange:l,onAnalysisHelpClick:i,placeholderText:p,...y}),m=({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,portal:o,required:s,...u})=>{const{supportsUpload:d,serviceUrl:c}=u;return(0,n.h)("analysis-data-file-input",{key:e,ref:a,label:t,value:r,onAnalysisDataFileInputChange:l,onAnalysisHelpClick:i,portal:o,required:s,hideUpload:!1===d||void 0===c,...u})},h=({name:e,label:a,user:l,portalHelpMap:i,required:t,onHelpClick:r,onSetRef:o,...s})=>(0,n.h)("analysis-unsupported-input",{key:e,label:a,ref:o,user:l,portalHelpMap:i,required:t,onAnalysisHelpClick:r,...s}),v={[r.A.GPString]:o,[r.A.GPMultiValueString]:o,[r.A.GPBoolean]:s,[r.A.GPDouble]:u,[r.A.GPMultiValueDouble]:u,[r.A.GPLong]:u,[r.A.GPMultiValueLong]:u,[r.A.GPDate]:d,[r.A.GPLinearUnit]:c,[r.A.GPArealUnit]:p,[r.A.GPFeatureRecordSetLayer]:y,[r.A.GPRecordSet]:y,[r.A.GPMultiValueFeatureRecordSetLayer]:y,[r.A.GPMultiValueRecordSet]:y,[r.A.GPField]:f,[r.A.GPMultiValueField]:f,[r.A.GPDataFile]:m,[r.A.GPRasterDataLayer]:({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,mapLayers:r,value:o,portal:s,required:u,...d})=>{const{supportsUpload:c,serviceUrl:p}=d;return(0,n.h)("analysis-data-file-input",{browseOption:"layer",hideUpload:!1===c||void 0===p,key:e,label:t,mapLayers:r,onAnalysisDataFileInputChange:l,onAnalysisHelpClick:i,portal:s,ref:a,required:u,value:o,...d})},[r.A.GPSQLExpression]:h,[r.A.GPMultiValueRasterDataLayer]:h,[r.A.GPMultiValueDataFile]:h},b={"analysis-areal-unit-input":p,"analysis-string-input":o,"analysis-date-input":d,"analysis-boolean-input":s,"analysis-number-input":u,"analysis-field-input":f,"analysis-traffic-time-input":({name:e,toolData:a,onSetRef:l,onValueChange:i,onHelpClick:t,label:r,...o})=>{const{value:s,resetTimeZoneValue:u,...d}=o,c=null===s?void 0:s,p=null===a?.timeZoneForTimeOfDay||!0===u?void 0:a?.timeZoneForTimeOfDay;return!0===u&&void 0!==a&&(a.timeZoneForTimeOfDay=void 0),(0,n.h)("analysis-traffic-time-input",{value:{timeOfDay:c,timeZoneForTimeOfDay:p},resetTimeZoneValue:u,key:e,ref:l,label:r,onAnalysisTrafficTimeInputChange:i,onAnalysisHelpClick:t,...d})},"analysis-linear-unit-input":c,"analysis-layer-input":y,"analysis-dataset-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,required:o,analysisDatasets:s,...u})=>(0,n.h)("analysis-dataset-input",{key:e,ref:a,label:t,value:r,required:o,analysisDatasets:s,onAnalysisDatasetInputChange:l,onAnalysisHelpClick:i,...u}),"analysis-summary-fields":({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,layer:r,required:o,...s})=>{const{value:u,...d}=s;return(0,n.h)("analysis-summary-fields",{key:e,ref:a,label:t,required:o,layer:r,value:u,onAnalysisSummaryFieldsChange:l,onAnalysisHelpClick:i,...d})},"analysis-item-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,portal:o,user:s,required:u,...d})=>{if(null==o||void 0===s)throw new Error("Portal and user required for item input");return(0,n.h)("analysis-item-input",{key:e,ref:a,label:t,value:r,onAnalysisItemInputChange:l,onAnalysisHelpClick:i,portal:o,user:s,required:u,...d})},"analysis-folder-input":({name:e,user:a,label:l,value:i,onValueChange:t,onHelpClick:r,onSetRef:o,...s})=>{if(void 0===a)throw new Error("User required for output folder input");return(0,n.h)("analysis-folder-input",{key:e,user:a,value:i,ref:o,onAnalysisFolderInputChange:t,onAnalysisHelpClick:r,label:l,...s})},"analysis-spatial-reference-input":({name:e,onSetRef:a,onValueChange:l,onHelpClick:i,label:t,value:r,required:o,...s})=>(0,n.h)("analysis-spatial-reference-input",{key:e,ref:a,label:t,value:r,required:o,onAnalysisSpatialReferenceInputChange:l,onAnalysisHelpClick:i,...s}),"analysis-slot":e=>(0,n.h)("slot",{name:e.slotName,ref:e.onSetRef}),"analysis-geoenrichment-input":({name:e,toolData:a,onSetRef:l,onValueChange:i,onHelpClick:t,label:r,portal:o,required:s,...u})=>{const{value:d,...c}=u,p={analysisVariables:d??void 0,country:a?.country??void 0,hierarchy:a?.hierarchy??void 0,labels:a?.labels??void 0};return(0,n.h)("analysis-geoenrichment-input",{key:e,ref:l,label:r,value:p,portal:o,onAnalysisGeoenrichmentInputChange:i,onAnalysisHelpClick:t,required:s,...c})},"analysis-query-input":({name:e,onSetRef:a,onValueChange:l,mapLayers:i,value:t,toolData:r,onHelpClick:o,label:s,required:u,portalHelpMap:d,portal:c,...p})=>{let y=t;const{expressions:f,inputLayers:m}=r??{};return"sql"!==p.mode&&void 0!==f&&void 0!==m&&(y={expressions:f,inputLayers:m}),(0,n.h)("analysis-query-input",{key:e,label:s,ref:a,onAnalysisQueryInputChange:l,onAnalysisHelpClick:o,value:y,mapLayers:i,required:u,portalHelpMap:d,portal:c,...p})},"analysis-overwrite":({value:e,portal:a,onSetRef:l,toolData:i,required:t,onValueChange:r,...o})=>(0,n.h)("analysis-overwrite",{portal:a,toolData:i,value:e,ref:l,required:t,onAnalysisOverwriteValueChange:r,...o}),"analysis-workflow-select":({name:e,onSetRef:a,onHelpClick:l,onValueChange:i,label:t,value:r,required:o,...s})=>(0,n.h)("analysis-workflow-select",{key:e,ref:a,label:t,required:o,value:r,onAnalysisWorkflowSelectChange:i,onAnalysisHelpClick:l,...s}),"analysis-data-file-input":m},A=({required:e,parameterType:a,label:l,displayName:n,name:i,filter:r,...o})=>{const{direction:s,componentName:u,defaultValue:d,...c}=o;return{required:e??"esriGPParameterTypeRequired"===a,label:l??n??i,...(0,t.c)(r),...c}},C=e=>{let a;return void 0!==e.componentName?a=b[e.componentName]:void 0!==e.dataType&&(a=v[e.dataType]),a=a??h,(0,n.h)(a,{...A(e)})}}}]);