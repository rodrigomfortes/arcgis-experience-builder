"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_analysis--c59ccd"],{30278:(e,t,a)=>{a.r(t),a.d(t,{analysis_layer_input_actions:()=>s});var i=a(28445),r=a(34074),n=a(35385);a(44345),a(55448),a(18423),a(91813),a(21255),a(588),a(54312),a(34031),a(9316),a(13661),a(43786),a(61320),a(64016),a(56451),a(6550),a(2924),a(5258),a(52373),a(33752),a(53976),a(49403),a(77462),a(23054),a(73645),a(12762),a(82567),a(28927),a(35970),a(5933),a(57295),a(72349),a(89962),a(97703),a(71802),a(32513),a(43284);const s=class{constructor(e){(0,i.r)(this,e),this.analysisLayerInputActionsClick=(0,i.c)(this,"analysisLayerInputActionsClick",7),this.analysisLayerInputActionsClose=(0,i.c)(this,"analysisLayerInputActionsClose",7),this.placement="auto"}async componentWillLoad(){({strings:this.strings}=await(0,r.G)(this.hostElement,(0,i.g)(".")))}emitLayerInputAction(e,t){this.analysisLayerInputActionsClick.emit({action:e,referenceElement:t})}render(){return(0,i.h)(i.H,{key:"2302ed9e68b39bd08d0f51dc4d6569ddd2879949"},(0,i.h)("calcite-popover",{key:"f4900c67d01eb4b76c37d9b745a948b1101ea089",autoClose:!0,referenceElement:this.referenceElement,placement:this.placement??"auto",open:this.open,pointerDisabled:!0,focusTrapDisabled:!0,label:""},!0===this.showSelectFeaturesAction?(0,i.h)("calcite-action",{key:n.a.Select,textEnabled:!0,text:this.strings.selectFeaturesText,icon:"cursor-marquee",onClick:()=>this.emitLayerInputAction(n.a.Select,this.referenceElement)}):null,!0===this.showFilterFeaturesAction?(0,i.h)("calcite-action",{key:n.a.Filter,textEnabled:!0,text:this.strings.filterLayerText,icon:"filter",onClick:()=>this.emitLayerInputAction(n.a.Filter,this.referenceElement)}):null,!0===this.showResetAction?(0,i.h)("calcite-action",{key:n.a.Reset,textEnabled:!0,text:this.strings.resetText,icon:"reset",onClick:()=>this.emitLayerInputAction(n.a.Reset,this.referenceElement)}):null,(0,i.h)("calcite-action",{key:n.a.Remove,textEnabled:!0,text:this.strings.removeLayerText,icon:"x-circle",onClick:()=>this.emitLayerInputAction(n.a.Remove,this.referenceElement)})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,i.a)(this)}};s.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:block}"},35385:(e,t,a)=>{a.d(t,{L:()=>r,S:()=>n,a:()=>s,b:()=>p,c:()=>M,d:()=>S,e:()=>P,f:()=>_,g:()=>F,h:()=>I,i:()=>T,j:()=>b,k:()=>h,l:()=>A,m:()=>f,r:()=>g,v:()=>v});var i=a(34074);const r={Feature_All:"feature",Feature_Extract:"extract",Feature_Point:"feature_point",Feature_MultiPoint:"feature_multiPoint",Feature_Line:"feature_line",Feature_Polygon:"feature_polygon",Feature_Table:"table",Imagery_All:"imagery",Imagery_SingleBand:"imagery_singleBand",Imagery_MultiBand:"imagery_multiBand",Imagery_Integer:"imagery_integer",Imagery_Float:"imagery_float",Imagery_Multidimension:"imagery_multidimension",Imagery_Trend:"imagery_trend",Imagery_Change:"imagery_change"},n={Any:"any",Count:"count",First:"first",Last:"last",Maximum:"max",Mean:"mean",Minimum:"min",StdDev:"stddev",Sum:"sum"},s={Select:"select",Filter:"filter",Reset:"reset",Remove:"remove"},l="invalidIntegerMessage",c="invalidDoubleMessage",o="requiredInputMessage",u="belowMinimumMessage",y="aboveMaximumMessage",d="strictlyMinimumMessage",m="strictlyMaximumMessage";function g(e){void 0!==e&&(e.open=!1,e.remove())}function p(e,t){!1===e.body.contains(t)&&(e.body.appendChild(t),t.open=!0)}function _(e){const{layers:t,layerFilterTypes:a}=e,n=[],s=[];if(void 0!==a){if((Array.isArray(a)?a:[a]).includes(r.Feature_Table))return{validLayers:t,filteredLayers:s};t.forEach((e=>{(0,i.i)(e)?s.push(e):n.push(e)}))}else n.push(...t);return{validLayers:n,filteredLayers:s}}const h=(e,t)=>{const{required:a,isFloatType:r,excludeMinValue:n,excludeMaxValue:s,min:g,max:p}=t;let _;return(0,i.I)(e)?!1!==r||Number.isInteger(e)?null!=g&&(e<g||!0===n&&e<=g)?_=!0===n?d:u:null!=p&&(e>p||!0===s&&e>=p)&&(_=!0===s?m:y):_=l:(0,i.m)(e)?_=!0===r?c:l:!0===a&&(_=o),_};function f(e,t){const a=e.map((e=>`type:"${e}"`)).join(" OR ");return void 0!==t?`${t} (${a})`:`(${a})`}function F(e){const t=Array.isArray(e)?e:[e],a=new Set;return t.forEach((e=>{switch(e){case r.Feature_Extract:case r.Feature_All:case r.Feature_Point:case r.Feature_MultiPoint:case r.Feature_Line:case r.Feature_Polygon:case r.Feature_Table:a.add("Feature Service"),a.add("Map Service");break;case r.Imagery_All:case r.Imagery_SingleBand:case r.Imagery_MultiBand:case r.Imagery_Integer:case r.Imagery_Float:case r.Imagery_Multidimension:case r.Imagery_Trend:case r.Imagery_Change:a.add("Image Service");break;default:a.add("Feature Service"),a.add("Image Service"),a.add("Map Service")}})),f(Array.from(a))}function b(e){const t=Array.isArray(e)?e:[e],a=new Set;let i=!1;return t.forEach((e=>{switch(e){case r.Feature_All:a.add("point"),a.add("multipoint"),a.add("polyline"),a.add("polygon");break;case r.Feature_Point:a.add("point");break;case r.Feature_MultiPoint:a.add("multipoint");break;case r.Feature_Line:a.add("polyline");break;case r.Feature_Polygon:a.add("polygon");break;case r.Feature_Table:a.add("nonspatial");break;case r.Feature_Extract:a.add("point"),a.add("multipoint"),a.add("polyline"),a.add("polygon"),a.add("nonspatial");break;case r.Imagery_All:case r.Imagery_SingleBand:case r.Imagery_MultiBand:case r.Imagery_Integer:case r.Imagery_Float:case r.Imagery_Multidimension:case r.Imagery_Trend:case r.Imagery_Change:i=!0}})),0===a.size||i?void 0:Array.from(a)}function v(e){return"3d"===e?.type}function I(e,t,a){const i=Array.isArray(t)?t:[t],n=void 0===a?'(-typekeywords: "Hosted Service" AND type: "Image Service") OR (servicetags: "allowAnalysis"':`(-typekeywords: "Hosted Service" AND type: "Image Service") OR ((servicetags: "allowAnalysis" OR orgid: ${a}) AND type: "Image Service"`;let s="";const l=[];if(i.forEach((e=>{switch(e){case r.Imagery_SingleBand:l.push("(bandcount: 1)");break;case r.Imagery_MultiBand:l.push("(bandcount: [2 TO 65536])");break;case r.Imagery_Integer:l.push('(NOT (servicetags: "PixelTypeF32" OR servicetags: "PixelTypeF64"))');break;case r.Imagery_Float:l.push('(servicetags: "PixelTypeF32" OR servicetags: "PixelTypeF64")');break;case r.Imagery_Multidimension:l.push('(servicetags: "hasMultidimensions")');break;case r.Imagery_All:case r.Imagery_Trend:case r.Imagery_Change:l.push("i");break;case r.Feature_All:case r.Feature_Point:case r.Feature_MultiPoint:case r.Feature_Line:case r.Feature_Polygon:case r.Feature_Table:case r.Feature_Extract:l.push("f")}})),l.length>0&&!l.every((e=>"f"===e))){const e=l.filter((e=>e.length>1));if(e.length>0){s=`${n} AND (${e.join(" OR ")}))`}else s=`${n})`;s=l.indexOf("f")>-1?`(${s} OR (type: "Feature Service"))`:`(${s})`}return v(e)?`${s} -typekeywords: "Table"`:s}function A(e){return`${e.url}/${e.layerId}`}const k={esriGeometryPoint:r.Feature_Point,esriGeometryPolyline:r.Feature_Line,esriGeometryPolygon:r.Feature_Polygon,esriGeometryMultipoint:r.Feature_MultiPoint};function x(e){switch(e){case"esriFieldTypeSingle":return"single";case"esriFieldTypeDouble":return"double";case"esriFieldTypeGeometry":return"geometry";case"esriFieldTypeInteger":return["long","integer","big-integer"];case"esriFieldTypeSmallInteger":return"small-integer";case"esriFieldTypeString":return"string";case"esriFieldTypeDate":return"date";default:return}}function M(e){const t={};switch(e?.type){case"range":t.min=e.minimum,t.max=e.maximum;break;case"featureClass":void 0!==e.list&&(t.layerFilterType=e.list.map((e=>k[e])).filter((e=>void 0!==e)));break;case"field":void 0!==e.list&&(t.fieldTypes=e.list.flatMap(x).filter((e=>void 0!==e)));break;case"file":t.accept=e.list?.filter((e=>void 0!==e))}return t}function T(e){return new RegExp(/^(http|https|ftp):\/\//i).test(e)}function S(e,t){if(void 0===t||0===t.length)return!0;const a=e.split(".").pop();return void 0!==a&&t.includes(a)}function P(e){return null==e?e:(Array.isArray(e)||(e=[e]),e.includes(r.Feature_Table)?e.filter((e=>e!==r.Feature_Table)):e.includes(r.Feature_All)?(e.push(r.Feature_Polygon,r.Feature_Line,r.Feature_MultiPoint,r.Feature_Point),e.filter((e=>e!==r.Feature_All))):e)}}}]);