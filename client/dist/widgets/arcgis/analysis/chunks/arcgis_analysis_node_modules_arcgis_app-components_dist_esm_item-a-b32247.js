/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-a-b32247.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_item-a-b32247"],{64099:(e,n,r)=>{r.d(n,{a:()=>s,g:()=>c});var t=r(15332),o=r(81034),a=r(87849);function s(e){var n,r,a;const s=null!==(n=(0,t.c)(e,"[lang]"))&&void 0!==n?n:null===(a=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(l)?o.l.get(l):o.l.has(l.slice(0,2))?o.l.get(l.slice(0,2)):"en"}const l={};function i(e,n){const r=`${e}${n}`;return l[r]||(l[r]=function(e,n){return new Promise(((r,t)=>{fetch((0,a.d)(`../arcgis-app-assets/i18n/${e}.i18n.${n}.json`)).then((e=>{e.ok?r(e.json()):t()}),(()=>t()))}))}(e,n)),l[r]}async function c(e,n){const r=n||e.tagName.toLowerCase(),a=s(e),l=function(e){var n,r,a;const s=null!==(n=(0,t.c)(e,"[lang]"))&&void 0!==n?n:null===(a=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===a?void 0:a.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(l)?o.l.get(l):o.l.has(l.slice(0,2))?l:"en"}(e);let c;try{c=await i(r,a)}catch(e){console.warn(`no locale for ${r} (${a}) loading default locale en.`),c=await i(r,"en")}return[c,a,l]}},68194:(e,n,r)=>{r.d(n,{r:()=>a});var t=r(50637),o=r(59317);const a=async(e,n,r={})=>{const{body:a,usePost:s,addTokenManually:l,api:i=(null===o.c||void 0===o.c?void 0:o.c.api),customToken:c}=r,u=new URLSearchParams;a&&Object.entries(a).forEach((([e,n])=>{void 0!==n&&u.append(e,n)}));const d=new URL(e);if(d.searchParams.append("f","json"),c)d.searchParams.append("token",c);else{const e=!1===l?null:await(0,t.b)(n,i);e&&d.searchParams.append("token",e)}const g=await fetch(d.toString(),{body:s?u:void 0,method:s?"POST":"GET"}),m=await g.json(),y=m.error;if(y)throw"string"==typeof y?new Error(y):y;return m}},68616:(e,n,r)=>{r.d(n,{i:()=>t});const t=(e,n)=>"Feature Service"===n&&e.includes("Hosted Service")},80030:(e,n,r)=>{r.d(n,{a:()=>l,b:()=>i,c:()=>g,d:()=>d,g:()=>c,i:()=>m});var t=r(68194),o=r(50822),a=r(87744),s=r(68616);const l=async(e,n)=>{try{return{result:await(0,t.r)(u(e,n),n)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},i=(e,n)=>`${u(e,n)}/data`,c=async(e,n)=>(0,t.r)(i(e,n),n),u=(e,n)=>(0,o.g)(e,(0,a.g)(n)),d=async(e,n,r)=>{try{const o=u(e,n);return await(0,t.r)(o,n,r)}catch(e){console.warn(e)}},g=async(e,n)=>{try{const r=`${u(e,n)}/groups`;return{result:await(0,t.r)(r,n)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},m=async(e,n)=>{let r=!1;return(0,s.i)(e.typeKeywords,e.type)&&(r=await y(e.url,n)),r},y=async(e,n,r=!1)=>{var o,s,l;if(e)try{const l=await(0,t.r)(`${null===(o=(0,a.p)(e))||void 0===o?void 0:o.baseServerUrl}/layers`,n,{addTokenManually:!r});return null===(s=null==l?void 0:l.layers)||void 0===s?void 0:s.reduce(((e,n)=>e||(null==n?void 0:n.capabilities.includes("Editing"))),!1)}catch(r){if(null===(l=null==r?void 0:r.message)||void 0===l?void 0:l.toLowerCase().includes("token required"))return y(e,n,!0)}return!1}},81034:(e,n,r)=>{r.d(n,{C:()=>l,a:()=>i,b:()=>u,f:()=>d,g:()=>s,l:()=>a,s:()=>m});var t=r(931),o=r(15332);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,n,r){const t=(0,o.c)(e,`[${n}]`);return t?t.getAttribute(n):r}(e,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function i(e,n){const{api:r,type:o,places:a}=n||{};if(4===r){const[n]=await(0,t.l)(["esri/intl"]),r=n.convertNumberFormatToIntlOptions({places:a,style:o,digitSeparator:!0});return n.formatNumber(e,Object.assign(Object.assign({},r),{style:o}))}const[s]=await(0,t.l)(["dojo/number"]);return s.format(e,{type:o,places:a,pattern:null==n?void 0:n.pattern})}const c={};function u(e,n){let r=document.documentElement.lang;const t="bs"===r;if(t&&(r="hr"),n){const n=`${r}-full`,t={dateStyle:"full",timeStyle:"long"};return c[n]||(c[n]=new Intl.DateTimeFormat(r,t)),c[n].format(e)}const o={year:"numeric",month:t?"numeric":"short",day:"numeric"};return c[r]||(c[r]=new Intl.DateTimeFormat(r,o)),c[r].format(e)}function d(e,n,r,t){const o=null!=e?e:"en";let a=n.unknown;return(1===r||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o))&&(a=n.single),1!==r&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)&&(a=n.multiple),m(a,Object.assign(Object.assign({},t),{number:r}))}const g=/\$\{([^}]+)\}/g;function m(e,n,r=g){let t=e;try{t=e.replace(r,((e,r)=>function(e,n){const r=e.split(".").reduce(((e,n)=>e[n]),n);return"string"==typeof r||"number"==typeof r?r:e}(r,n).toString()))}catch(e){console.error(e)}return t}},90310:(e,n,r)=>{r.d(n,{a:()=>f,b:()=>d,c:()=>g,d:()=>m,f:()=>u,g:()=>y,l:()=>b});var t=r(50637),o=r(80379),a=r(50822),s=r(931),l=r(87744),i=r(83929),c=r(68194);const u=async(e,n,r)=>{const{owningSystemUrl:o}=await(0,t.f)((async()=>(0,i.g)(e)),"portalInfo",e.id);return(await Promise.all(n.map((async e=>{try{const{owningSystemUrl:n}=await(0,i.a)(e,r);return{owningSystemUrl:n,url:e}}catch(n){return console.error(n),{owningSystemUrl:null,url:e}}})))).filter((({owningSystemUrl:e})=>e===o)).map((({url:e})=>e))},d=async(e,n)=>{var r;try{return{result:await(0,c.r)(e,n,{addTokenManually:!1})}}catch(e){const n="token required";return(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.toLowerCase().includes(n))?{error:{code:"tokenRequired"}}:(console.error(e),{error:{code:"unhandledError"}})}};async function g(e,n,r){var o;const{relationshipType:a,direction:s}=r,i=`${(0,l.g)(n)}content/items/${e}/relatedItems`,c=await(0,t.r)(i,{relationshipType:a,direction:s,includeRecycleBin:!0});return(null===(o=null==c?void 0:c.relatedItems)||void 0===o?void 0:o.length)&&(c.relatedItems=c.relatedItems.filter((n=>(null==n?void 0:n.id)!==e))),c}const m=async(e,n,r)=>{const o=!!r,a=(0,l.g)(n),s=o?`${a}/content/groups/${r.id}/search`:`${a}/search`;try{return{result:(await(0,t.r)(s,{filter:`id:(${e.join(" OR ")})`,num:100})).results}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},y=async(e,n,r)=>{try{const o=[],a=[],s=[];await Promise.all(e.map((async e=>{const{result:l,error:c}=await(0,t.f)((()=>d(e,n)),"itemMetadata",`${e}--no-token`);if("tokenRequired"!==(null==c?void 0:c.code))if(h(l))o.push(w(l,e));else try{const n=await(0,i.a)(e,r);s.push(Object.assign(Object.assign({},l),{owningSystemUrl:n.owningSystemUrl}))}catch(c){console.warn(c)}else a.push(e)})));const l=await u(n,a,r),g=(await Promise.all(l.map((async e=>({response:await(0,c.r)(e,n,{addTokenManually:!0}),owningSystemUrl:(await(0,i.a)(e,r)).owningSystemUrl,url:e}))))).reduce(((e,{response:n,url:r,owningSystemUrl:t})=>h(n)?(o.push(w(n,r)),e):[...e,Object.assign(Object.assign({},n),{owningSystemUrl:t})]),[]),m=await Promise.all([...s,...g].map((async({serviceItemId:e,owningSystemUrl:n})=>{if(!e)return null;const{result:r}=await p({itemId:e,owningSystemUrl:n});return{item:r,owningSystemUrl:n}}))),{result:v}=o.length<=0?{result:[]}:await y(o,n,r);return{result:[...m.filter((e=>!!e)),...v]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},h=e=>!!(null==e?void 0:e.sources),w=(e,n)=>{var r;const t=null===(r=Object.values(e.sources)[0])||void 0===r?void 0:r.url;return t?t.includes("..")?(0,l.t)({url:n,path:t}):t:null},v=e=>`${e}/sharing/rest`,p=async({itemId:e,owningSystemUrl:n,requestOptions:r})=>{try{const o=(0,a.g)(e,v(n));return{result:await(0,t.r)(o,{},Object.assign(Object.assign({},r),{addTokenManually:!1}))}}catch(e){return console.error(e),(0,o.a)(e)&&e.message.toLocaleLowerCase().includes("invalid token")?{error:{code:"invalidToken"}}:{error:{code:"unhandledError"}}}},f=async({itemId:e,owningSystemUrl:n,requestOptions:r})=>{try{const o=`${(0,a.g)(e,v(n))}/data`;return{result:await(0,t.r)(o,{},Object.assign(Object.assign({},r),{addTokenManually:!1}))}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},b=async(e,n)=>{try{const[r]=await(0,s.l)(["esri/portal/PortalItem"]),t=new r({id:e,portal:n});return await t.load(),{result:t}}catch(e){return console.error("Fail to reload item",e),{error:{code:"unhandledError"}}}}}}]);