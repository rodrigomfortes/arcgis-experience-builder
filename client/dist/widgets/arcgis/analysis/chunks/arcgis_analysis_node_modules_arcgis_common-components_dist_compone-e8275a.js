/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_compone-e8275a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_compone-e8275a"],{45138:(e,t,s)=>{s.d(t,{u:()=>h});var i=s(50217);const a=(e,{host:t,key:s,isReactive:a},r)=>{const n=t,o=n[s]!==e.exports,l=n[s]!==r,c=r!==e.exports;o&&!l&&c&&(n[s]=e.exports);if(t===e.component){if(a){const t=e.component.manager;l&&t.W(e,n[s]),e.onUpdate((i=>{if(i.has(s)){const i=n[s];i!==e.exports&&t.W(e,i)}}))}e.O=a?void 0:s}const u=e.component.constructor.elementProperties.get(s)?.readOnly;e.watchExports((()=>{n[s]!==e.exports&&(u?(0,i.h)((()=>{n[s]=e.exports})):n[s]=e.exports)}))};s(4395);var r=s(91021);const n=e=>l(void 0,e);class o extends i.C{constructor(e,t){super(e);const s=this.exports;try{(0,i.s)(this.component);const e=t(this.component,this),a=this.exports!==s;if((0,i.i)(e)){a||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this.P.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else a&&void 0===e||(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this.P.reject(e),console.error(e)}}catchUpLifecycle(){}}const l=(c=o,(...e)=>{const t=(0,i.e)(),s=new c(...e),r=s.exports;(0,i.d)(t.at(-1));const n=s.component.manager;n.W(s,r),s.watchExports(n.W.bind(n,s)),(0,i.o)(s);const o=[s.component,...t].reverse();return(0,i.t)(o,(e=>void 0===e?void 0:a(s,e,r)),r)});var c;i.C;const u=(e,t)=>{if(!t)return e;const s={...e};return Object.entries(t).forEach((([t,i])=>{s[t]="object"==typeof i?u(e[t],i):i??e[t]})),s};var d=s(6364);const h=(p=d.g,(e={})=>n(((t,s)=>{const i=(0,r.kn)(t.el),a={_lang:i.lang,_t9nLocale:i.t9nLocale,_loading:!0},n=t;s.onLifecycle((()=>(0,r.hd)(t.el,(()=>p("./assets")),(({t9nLocale:e,t9nStrings:i,lang:a})=>{const r={...i,_lang:a,_t9nLocale:e,_loading:!1};s.exports=r;const l=i.componentLabel;"string"==typeof l&&"label"in t&&null==t.label&&(t.label??=l),o(n.messageOverrides)}),e.name)));const o=e=>{const t=s.exports,i=t._original??t,a=u(i,e);e&&(a._original=i),s.exports=a};return"messageOverrides"in n&&s.onUpdate((e=>{e.has("messageOverrides")&&o(n.messageOverrides)})),e.blocking?(s.setProvisionalExports(a,!1),s.ready):a})));var p},47640:(e,t,s)=>{s.d(t,{YZ:()=>r});var i=s(50738);const a=Symbol();class r{get taskComplete(){return this.t||(1===this.i?this.t=new Promise(((e,t)=>{this.o=e,this.h=t})):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(e,t,s){this.p=0,this.i=0,(this._=e).addController(this);const i="object"==typeof t?t:{task:t,args:s};this.v=i.task,this.j=i.args,this.m=i.argsEqual??n,this.k=i.onComplete,this.A=i.onError,this.autoRun=i.autoRun??!0,"initialValue"in i&&(this.u=i.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const e=this.j();if(!Array.isArray(e))throw Error("The args function must return an array");return e}async S(){const e=this.T(),t=this.O;this.O=e,e===t||void 0===e||void 0!==t&&this.m(t,e)||await this.run(e)}async run(e){let t,s;e??=this.T(),this.O=e,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask((()=>this._.requestUpdate())):this._.requestUpdate();const i=++this.p;this.q=new AbortController;let r=!1;try{t=await this.v(e,{signal:this.q.signal})}catch(e){r=!0,s=e}if(this.p===i){if(t===a)this.i=0;else{if(!1===r){try{this.k?.(t)}catch{}this.i=2,this.o?.(t)}else{try{this.A?.(s)}catch{}this.i=3,this.h?.(s)}this.u=t,this.l=s}this._.requestUpdate()}}abort(e){1===this.i&&this.q?.abort(e)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(e){switch(this.i){case 0:return e.initial?.();case 1:return e.pending?.();case 2:return e.complete?.(this.value);case 3:return e.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const n=(e,t)=>e===t||e.length===t.length&&e.every(((e,s)=>!(0,i.Ec)(e,t[s])))},55197:(e,t,s)=>{s.r(t),s.d(t,{ArcgisCommonFieldInfo:()=>I});var i=s(6364),a=s(85282),r=s(59836),n=s(70757),o=s(61833),l=s(47640),c=s(12762),u=s(54312),d=s(52797),h=s(5294),p=s(24457),m=s(72349),y=s(34031),v=s(45138),f=s(55088),g=(e=>(e.MISSING="missing",e.IN_PROGRESS="inProgress",e.SUCCESS="success",e.FAILED="failed",e))(g||{}),S=(e=>(e.DATE="date",e.DATE_ONLY="date-only",e.GUID="guid",e.NUMBER="number",e.OID="oid",e.STRING="string",e.TIME_ONLY="time-only",e.TIMESTAMP_OFFSET="timestamp-offset",e.UNKNOWN="unknown",e))(S||{});function w(e){return null!=e}function _(e){const{layer:t,fieldName:s}=e;let i,a;"popupTemplate"in t&&(a=t.popupTemplate);const r=a?a.fieldInfos:[];return("imagery-tile"===t.type||"wcs"===t.type||"imagery"===t.type&&t.rasterFields.length?t.rasterFields:t.fields)?.filter((e=>e.name===s)).forEach((t=>{const a=r?r.filter((e=>e.fieldName===t.name)):null,n=a?.length?a[0].label:null;/^raster.(item|service)pixelvalue/iu.test(s)&&(t.type="double");const o={layerField:t,label:n||t.alias||t.name};o.codedValues=function(e,t){const{layer:s}=t;if("subtype-sublayer"===s.type&&s.subtypeField===e){const e=s.parent?.subtypes?.find((e=>e.code===s.subtypeCode));if(e)return[{code:e.code,name:e.name}]}if("feature"!==s.type&&"imagery"!==s.type)return;const i="feature"===s.type?s.typeIdField:void 0,a="feature"===s.type?s.types:void 0;let r;const n=s.fields.find((t=>t.name===e)),o=n.domain;return"feature"===s.type&&i&&a?(i===e?r=a.map((e=>({code:e.id,name:e.name}))):(r=[],a.forEach((t=>{if(t.domains[e]&&"inherited"!==t.domains[e].type)t.domains[e].codedValues&&t.domains[e].codedValues.forEach((async e=>{let t=!1;r.forEach((s=>{s.code===e.code&&(t=!0,`, ${s.name},`.includes(`, ${e.name},`)||(s.name+=`, ${e.name}`))})),t||r.push(h.clone(e))}));else{const e=o;e?.codedValues&&e.codedValues.forEach((async e=>{let t=!1;r.forEach((s=>{s.code===e.code&&(t=!0,`, ${s.name},`.includes(`, ${e.name},`)||(s.name+=`, ${e.name}`))})),t||r.push(h.clone(e))}))}}))),!r.length&&o?.codedValues&&(r=h.clone(o.codedValues))):o?.codedValues&&(r=n.domain.codedValues),r?.length?r:null}(s,e),function(e){switch(e.layerField.type){case"string":e.simpleFieldType=S.STRING;break;case"date":e.simpleFieldType=S.DATE;break;case"timestamp-offset":e.simpleFieldType=S.TIMESTAMP_OFFSET;break;case"date-only":e.simpleFieldType=S.DATE_ONLY;break;case"time-only":e.simpleFieldType=S.TIME_ONLY;break;case"oid":e.simpleFieldType=S.OID;break;case"guid":case"global-id":e.simpleFieldType=S.GUID;break;case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":e.simpleFieldType=S.NUMBER}}(o),o.simpleFieldType&&(i=o)})),i}async function $(e){e.statisticsStatus=g.IN_PROGRESS;const{layer:t,view:s}=e;if("imagery-tile"===t.type||"wcs"===t.type||"stream"===t.type||"voxel"===t.type)throw new Error("could not get feature count");try{return await async function(e,t){if("feature"===e.type&&!e.url)return await async function(e){const t=e.createQuery();t.outFields=["*"];const s=await e.queryFeatures(t);if(s.features.length)return s.features.length;throw new Error("could not get feature count")}(e);if("feature"===e.type||"csv"===e.type||"scene"===e.type||"wfs"===e.type||"geojson"===e.type)return await e.queryFeatureCount();if(t&&("stream"===e.type||"ogc-feature"===e.type))return await async function(e,t){return await(await t.whenLayerView(e)).queryFeatureCount()}(e,t)}(t,s)}catch{return}}async function T(e){const{layer:t}=e;if(["imagery","imagery-tile","stream","ogc-feature"].includes(t.type))throw new Error("cannot get feature from service");const s=new y.default({where:"1=1",outFields:["*"],returnGeometry:!1});return await t.queryFeatures(s)}const F=f.AH`:host{height:100%}.container{padding:var(--calcite-spacing-xs);background-color:var(--calcite-color-foreground-1)}.title{font-weight:700;padding:5px 0}.missing,.data{color:#a9a9a9}.count{white-space:nowrap}.section{padding:var(--calcite-spacing-xs) 0}.statistics-row{border-top:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:var(--calcite-spacing-xs) 0;display:flex;justify-content:space-between}.statistics-row-top-values{border-top:var(--calcite-border-width-sm) solid var(--calctie-color-border-2);padding:20px 0 var(--calcite-spacing-xs) 0;display:flex;justify-content:space-between}`;class I extends o.WF{constructor(){super(...arguments),this._messages=(0,v.u)({blocking:!0}),this._propWatcherTask=new l.YZ(this,{task:async([e,t])=>{if(!w(e)||!w(t))throw console.error("Required properties are missing."),new Error;await this.processProps()},args:()=>[this.layer,this.fieldName]}),this.oneFeatureResponseStatus=g.MISSING,this.statisticsStatus=g.MISSING,this.uniqueValuesStatus=g.MISSING,this.hideStatistics=!1,this.arcgisComplete=(0,o.lh)()}static{this.properties={oneFeatureResponseStatus:16,oneFeatureResponse:16,statisticsStatus:16,statistics:16,uniqueValuesStatus:16,uniqueValues:16,view:0,layer:0,fieldName:1,hideStatistics:5}}static{this.styles=F}async processProps(){const{view:e,layer:t,fieldName:s,hideStatistics:i}=this;if(!t||!s)return;let a;if("esri.layers.support.Sublayer"===t.declaredClass){const s=t;e&&await u.whenOnce((()=>!e.updating)),a=await s.createFeatureLayer(),await(a?.load())}var r;this.props={view:e,layer:a??t,fieldName:s,hideStatistics:i},this.props.fieldInfo=_(this.props),"scene"===t.type&&c.default.request.interceptors?.push({urls:`${r=t,"scene"===r.type?r.associatedLayer?.url:r.url}/${t.layerId}`,before(e){e.requestOptions.authMode="no-prompt"}}),this.oneFeatureResponseStatus=g.IN_PROGRESS;try{const e=await async function(e){const{view:t,layer:s}=e;if("imagery"===s.type||"imagery-tile"===s.type||"wcs"===s.type)throw new Error("could not get feature");if("feature"===s.type&&!s.url||"wfs"===s.type){const e=s.createQuery();e.start=0,e.num=5,e.outFields=["*"];const t=await s.queryFeatures(e);if(t.features.length)return t;throw new Error("could not get feature")}{if(!t)return await T(e);let i;if("subtype-sublayer"===s.type||"sublayer"===s.type){let e=s.parent;for(;["subtype-group","map-image"].includes(e.type);)e=e.parent;i=await t.whenLayerView(e)}else i=await t.whenLayerView(s);if(i.availableFields.length===s.fields.length||["stream","ogc-feature"].includes(s.type)&&i.availableFields.length>0){const t=s.createQuery();t.start=0,t.num=5,t.outFields=["*"];const a=await i.queryFeatures(t);return a.features?.length?a:await T(e)}return await T(e)}}(this.props);this.oneFeatureResponse=e,this.oneFeatureResponseStatus=g.SUCCESS}catch{this.oneFeatureResponseStatus=g.FAILED}if("stream"===t.type)return this.uniqueValuesStatus=g.FAILED,void(this.statisticsStatus=g.FAILED);if(i)this.uniqueValuesStatus=g.FAILED;else{this.uniqueValuesStatus=g.IN_PROGRESS;try{const e=await async function(e){const{layer:t,view:s,fieldName:i}=e;if("imagery-tile"===t.type||"wcs"===t.type||"voxel"===t.type)throw new Error("could not get unique values for ImageryLayer/ImageryTileLayer/WCSLayer/VoxelLayer");"feature"===t.type&&!t.url&&(t.outFields=["*"]);try{return await(0,m.default)({layer:t,view:s,field:i})}catch{throw new Error("could not get unique values")}}(this.props);this.uniqueValues=e,this.uniqueValuesStatus=e?.uniqueValueInfos?.length?g.SUCCESS:g.FAILED}catch{this.uniqueValuesStatus=g.FAILED}}if(i)this.statisticsStatus=g.FAILED;else{this.statisticsStatus=g.IN_PROGRESS;try{const e=await async function(e){const{layer:t,view:s,fieldName:i,fieldInfo:a}=e;if("imagery-tile"===t.type||"wcs"===t.type||"voxel"===t.type)throw new Error("could not get statistics for ImageryLayer/ImageryTileLayer/WCSLayer/VoxelLayer");if(!a||"oid"===a.layerField.type||"guid"===a.layerField.type||"global-id"===a.layerField.type)return{totalCount:await $(e),nullcount:0};try{const a=await(0,p.default)({layer:t,view:s,field:i,outStatisticTypes:{exclude:["median"]}});if(!w(a.count))throw new Error("could not get statistics");const r="sourceJSON"in t&&t.sourceJSON.maxRecordCount===a.count;if(w(a.nullcount)&&!r)return{...a,totalCount:a.count+a.nullcount};{const t=await $(e);return{...a,totalCount:t}}}catch{throw new Error("could not get statistics")}}(this.props);if(!w(e.totalCount)&&w(e.count)&&this.uniqueValuesStatus===g.SUCCESS){const t=this.uniqueValues.uniqueValueInfos;for(let s=0;s<t.length;s++){const i=t[s];if(null===i.value){e.totalCount=i.count+e.count;break}}e.totalCount??=e.count}this.statistics=e,this.statisticsStatus=g.SUCCESS}catch{this.statisticsStatus=g.FAILED}}}_getFieldTypeLabel(e){const{_messages:t}=this,s=t.fieldTypes;switch(e){case"big-integer":return s.bigInteger;case"date":return s.date;case"date-only":return s.dateOnly;case"double":return s.double;case"global-id":return s.globalId;case"guid":return s.guid;case"integer":return s.integer;case"long":return s.long;case"oid":return s.oid;case"single":return s.single;case"small-integer":return s.smallInteger;case"string":default:return s.string;case"time-only":return s.timeOnly;case"timestamp-offset":return s.timestampOffset}}_getStatisticsType(e){switch(e.layerField.type){case"big-integer":case"double":case"integer":case"single":case"small-integer":if(e.codedValues)return S.STRING;switch(e.layerField.valueType){case"binary":case"description":case"location-or-place-name":case"name-or-title":case"ordered-or-ranked":case"type-or-category":return S.STRING;default:return S.NUMBER}case"date":return S.DATE;case"date-only":return S.DATE_ONLY;case"string":return S.STRING;case"time-only":return S.TIME_ONLY;case"timestamp-offset":return S.TIMESTAMP_OFFSET;default:return S.STRING}}_getFieldValueTypeCamelCase(e){switch(e.layerField.valueType){case"count-or-amount":return"countOrAmount";case"date-and-time":return"dateAndTime";case"location-or-place-name":return"locationOrPlaceName";case"name-or-title":return"nameOrTitle";case"ordered-or-ranked":return"orderedOrRanked";case"percentage-or-ratio":return"percentageOrRatio";case"type-or-category":return"typeOrCategory";case"unique-identifier":return"uniqueIdentifier";default:return e.layerField.valueType}}_getDisplayString(e){const{props:t}=this,{fieldInfo:s}=t;switch(s.simpleFieldType){case S.DATE:return this._getDateString(e);case S.DATE_ONLY:return this._getDateOnlyString(e);case S.GUID:return this._getGuidString(e);case S.NUMBER:return this._getNumberString(e);case S.TIME_ONLY:return this._getTimeOnlyString(e);case S.TIMESTAMP_OFFSET:return this._getTimestampOffsetString(e);default:return`${e}`}}_getDateString(e){const{view:t}=this.props;return t&&"unknown"===t.timeZone?d.formatDate(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:"utc",timeZoneName:"shortOffset"}):d.formatDate(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:t?.timeZone||"system"})}_getTimestampOffsetString(e){const{view:t}=this.props;return"string"==typeof e?t&&"unknown"===t.timeZone?d.formatTimestamp(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:"utc",timeZoneName:"shortOffset"}):d.formatTimestamp(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:t?.timeZone||"system"}):this._getDateString(e)}_getDateOnlyString(e){return d.formatDateOnly(e,d.convertDateFormatToIntlOptions("short-date"))}_getTimeOnlyString(e){return"string"==typeof e?d.formatTimeOnly(e,d.convertDateFormatToIntlOptions("short-date-long-time")):d.formatDate(e,{...d.convertDateFormatToIntlOptions("long-time"),timeZone:"utc"})}_getGuidString(e){return e.startsWith("{")?e:`{${e}}`}_getNumberString(e){return d.formatNumber(e)}_printNumValue(e){return w(e)?this._getNumberString(Math.round(100*e)/100):"--"}_setCompleteRef(){this.arcgisComplete.emit()}render(){return this._propWatcherTask.render({complete:()=>{const{props:e}=this,{fieldInfo:t}=e;if(t)return a.qy`<div class="container">${this.renderFieldType()}${this.renderFieldAlias()}${this.renderFieldDescription()}${this.renderFieldValueType()}${this.renderFieldSampleValue()}${this.renderFieldFormat()}${this.renderFieldStatistics()}</div>`}})}renderFieldType(){const{_messages:e,props:t}=this,{fieldInfo:s}=t,i=this._getFieldTypeLabel(s.layerField.type);return a.qy`<div class="section"><div class="title">${e.fieldType}</div><div>${i}</div></div>`}renderFieldAlias(){const{_messages:e,props:t}=this,{fieldInfo:s}=t;return a.qy`<div class="section"><div class="title">${e.fieldAlias}</div><div>${s.label}</div></div>`}renderFieldDescription(){const{_messages:e,props:t}=this,{layer:s}=t;if("feature"!==s.type)return;const{fieldInfo:i}=t,r=i.layerField.description;return a.qy`<div class="section"><div class="title">${e.fieldDescription}</div><div class=${(0,o.CP)({missing:!r})}>${r||e.fieldDescriptionNotSet}</div></div>`}renderFieldValueType(){const{_messages:e,props:t}=this,{layer:s}=t;if("feature"!==s.type)return;const{fieldInfo:i}=t,r=this._getFieldValueTypeCamelCase(i);return a.qy`<div class="section"><div class="title">${e.fieldValueType}</div><div class=${(0,o.CP)(r?"":"missing")}>${r?e.fieldValueTypes[r]:e.fieldValueTypeNotSet}</div></div>`}renderFieldSampleValue(){const{oneFeatureResponse:e,oneFeatureResponseStatus:t,statisticsStatus:s,statistics:i,uniqueValuesStatus:r,uniqueValues:n,_messages:l,props:c}=this,{layer:u,fieldName:d,fieldInfo:h}=c,{statistics:p}=l;let m;if(["imagery-tile","voxel"].includes(u.type)||"stream"!==u.type&&[S.STRING,S.OID,S.GUID].includes(this._getStatisticsType(h))&&r!==g.FAILED)return;t===g.SUCCESS?e.features.forEach((e=>{(void 0===m||null===m&&null!==e.attributes[d])&&(m=e.attributes[d])})):s===g.SUCCESS?m=i.min:r===g.SUCCESS&&(m=n.uniqueValueInfos?.[0]?.value||n.uniqueValueInfos?.[1]?.value);const y=h.codedValues;return w(m)&&(m=y?y.find((e=>m===e.code))?.name||m:this._getDisplayString(m)),a.qy`<div class="section"><div class="title">${l.fieldSampleValue}</div><div class=${(0,o.CP)(t===g.FAILED&&s===g.FAILED&&r===g.FAILED||!w(m)?"missing":"")}>${t===g.SUCCESS||s===g.SUCCESS||r===g.SUCCESS?m?.toString()??p.allNulls:t===g.FAILED&&s===g.FAILED&&r===g.FAILED?l.fieldSampleNotAvailable:l.fieldSampleRetrieving}</div></div>`}renderFieldFormat(){const{_messages:e,props:t}=this,{fieldName:s,fieldInfo:i,layer:r}=t;if(!["double","long","single"].includes(i.layerField.type))return;const n="popupTemplate"in r?r.popupTemplate:void 0;if(n?.fieldInfos){const t=n.fieldInfos?.filter((e=>e.fieldName===s));if(t?.length){const s=t[0];if(w(s?.format?.places)){const t=s.format.places;return a.qy`<div class="section"><div class="title">${e.fieldDecimalPlaces}</div><div>${e.fieldNumDecimalPlaces.replace("${number}",t.toString())}</div></div>`}}}return a.qy`<div class="section"><div class="title">${e.fieldDecimalPlaces}</div><div class="missing">${e.fieldDecimalPlacesNotAvailable}</div></div>`}renderFieldStatistics(){const{statisticsStatus:e,uniqueValuesStatus:t,hideStatistics:s,_messages:i,props:o}=this,{layer:l,fieldInfo:c}=o;if(s)this.arcgisComplete.emit();else{if(!["stream","imagery-tile","voxel"].includes(l.type)&&!["long"].includes(c.layerField.type))return a.qy`<div class="section"><div class="title">${i.fieldStatistics}</div>${e&&e!==g.MISSING&&e!==g.IN_PROGRESS?e===g.FAILED&&t!==g.SUCCESS?this.renderNoStatistics():(0,r.D)("field-info-statistics-content",a.qy`<div ${(0,n.K)(this._setCompleteRef)}>${this.renderStatistics()}</div>`):(0,r.D)("field-info-statistics-content",a.qy`<div class="missing">${i.fieldStatisticsRetrieving}</div>`)}</div>`;this.arcgisComplete.emit()}}renderNoStatistics(){const{_messages:e}=this;return(0,r.D)("field-info-statistics-content",a.qy`<div class="missing" ${(0,n.K)(this._setCompleteRef)}>${e.fieldStatisticsNotAvailable}</div>`)}renderStatistics(){const{props:e}=this,{fieldInfo:t}=e;switch(this._getStatisticsType(t)){case S.NUMBER:return this.renderNumberStatistics();case S.GUID:case S.OID:case S.STRING:return this.renderStringStatistics();case S.DATE:case S.DATE_ONLY:case S.TIME_ONLY:case S.TIMESTAMP_OFFSET:return this.renderDateStatistics();default:return}}renderNumberStatistics(){const{statistics:e,_messages:t}=this;if(!e)return this.renderNoStatistics();const{statistics:s}=t;return a.qy`<div><div class="statistics-row"><div>${s.numberOfValues}</div><div class="data">${this._printNumValue(e.totalCount)}</div></div>${w(e.sum)?a.qy`<div class="statistics-row"><div>${s.sumOfValues}</div><div class="data">${this._printNumValue(e.sum)}</div></div>`:null}${w(e.min)?a.qy`<div class="statistics-row"><div>${s.minimum}</div><div class="data">${this._printNumValue(e.min)}</div></div>`:null}${w(e.max)?a.qy`<div class="statistics-row"><div>${s.maximum}</div><div class="data">${this._printNumValue(e.max)}</div></div>`:null}${w(e.avg)?a.qy`<div class="statistics-row"><div>${s.average}</div><div class="data">${this._printNumValue(e.avg)}</div></div>`:null}${w(e.stddev)?a.qy`<div class="statistics-row"><div>${s.standardDeviation}</div><div class="data">${this._printNumValue(e.stddev)}</div></div>`:null}${this.renderNullValues()}</div>`}renderStringStatistics(){const{statistics:e,uniqueValuesStatus:t,_messages:s}=this,{statistics:i}=s;return a.qy`<div><div class="statistics-row"><div>${i.numberOfValues}</div>${t!==g.SUCCESS?a.qy`<div class="missing">--</div>`:a.qy`<div class="data">${this._printNumValue(e?.totalCount)}</div>`}</div>${this.renderNullValues()}${this.renderTopValues()}</div>`}renderDateStatistics(){const{statistics:e,view:t,props:s,_messages:i}=this,{fieldInfo:r}=s;if(!e)return this.renderNoStatistics();const{statistics:n}=i,o=e.max-e.min,l=Math.floor(o/31536e6);let c=Math.floor((o-31536e6*l)/2628e6),u=Math.ceil((o-2628e6*c)/864e5);u>=30&&(c+=1,u=0);let d=1===l?n.timeSpanOptions.year:l>1?n.timeSpanOptions.years.replace("${years}",l.toString()):"";d+=l>0&&(c>0||u>0)?", ":"",d+=1===c?n.timeSpanOptions.month:c>1?n.timeSpanOptions.months.replace("${months}",c.toString()):"",d+=c>0&&u>0?", ":"",d+=1===u?n.timeSpanOptions.day:u>1?n.timeSpanOptions.days.replace("${days}",u.toString()):"";const h=r.simpleFieldType!==S.TIMESTAMP_OFFSET||!t||"unknown"!==t.timeZone,p=r.simpleFieldType===S.TIME_ONLY;return a.qy`<div><div class="statistics-row"><div>${n.numberOfValues}</div><div class="data">${this._printNumValue(e?.totalCount)}</div></div>${h&&w(e.min)?a.qy`<div class="statistics-row"><div>${p?n.minimumTime:n.minimumDate}</div><div class="data">${this._getDisplayString(e.min)}</div></div>`:null}${h&&w(e.max)?a.qy`<div class="statistics-row"><div>${p?n.maximumTime:n.maximumDate}</div><div class="data">${this._getDisplayString(e.max)}</div></div>`:null}${h&&w(e.avg)?a.qy`<div class="statistics-row"><div>${p?n.averageTime:n.averageDate}</div><div class="data">${this._getDisplayString(e.avg)}</div></div>`:null}${h&&!p&&w(e.min)&&w(e.max)&&o>0?a.qy`<div class="statistics-row"><div>${n.timespan}</div><div class="data">${d}</div></div>`:null}${this.renderNullValues()}</div>`}renderTopValues(){const{uniqueValues:e,uniqueValuesStatus:t,_messages:s,props:i}=this,{fieldInfo:r}=i,{statistics:n}=s;if(e?.uniqueValueInfos?.length){const t=e.uniqueValueInfos;t.sort(((e,t)=>e.count<t.count?1:e.count>t.count?-1:0));const s=r.codedValues,i=t.filter((e=>null!==e.value)).filter(((e,t)=>e&&t<10)).map((e=>{let t=e.value;return s?s.forEach((e=>{t===e.code&&(t=e.name)})):t=this._getDisplayString(t),a.qy`<div class="statistics-row"><div class="data">${`${t}`}</div><div class="count">${this._printNumValue(e.count)}</div></div>`}));return i.length?a.qy`<div><div class="statistics-row-top-values"><div>${t.length>10?n.topTenValues:n.topValues}</div><div>${n.count}</div></div>${i}</div>`:void 0}return a.qy`<div><div class="statistics-row-top-values"><div>${n.topValues}</div><div>${n.count}</div></div><div class="statistics-row"><div class="missing">${t===g.FAILED?s.fieldUniqueValuesNotAvailable:s.fieldSampleRetrieving}</div></div></div>`}renderNullValues(){const{statistics:e,uniqueValues:t,_messages:s}=this,{statistics:i}=s;let r=e?.nullcount;if(!w(r)&&t){const e=t.uniqueValueInfos;for(let t=0;t<e.length;t++){const s=e[t];if(null===s.value){r=s.count;break}}}return a.qy`<div class="statistics-row"><div>${i.numberOfNulls}</div>${w(r)?a.qy`<div class="data">${Number.parseInt(r).toLocaleString()}</div>`:a.qy`<div class="missing">--</div>`}</div>`}}(0,i.c)("arcgis-common-field-info",I)},59836:(e,t,s)=>{s.d(t,{D:()=>n});var i=s(85282),a=s(34670),r=s(42466);const n=(0,a.u$)(class extends a.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,s]){return t!==this.key&&((0,r.mY)(e),this.key=t),s}})},70757:(e,t,s)=>{s.d(t,{_:()=>p,K:()=>v});var i=s(85282),a=s(42466),r=s(34670);const n=(e,t)=>{const s=e._$AN;if(void 0===s)return!1;for(const e of s)e._$AO?.(t,!1),n(e,t);return!0},o=e=>{let t,s;do{if(void 0===(t=e._$AM))break;s=t._$AN,s.delete(e),e=t}while(0===s?.size)},l=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(void 0===s)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),d(t)}};function c(e){void 0!==this._$AN?(o(this),this._$AM=e,l(this)):this._$AM=e}function u(e,t=!1,s=0){const i=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(t)if(Array.isArray(i))for(let e=s;e<i.length;e++)n(i[e],!1),o(i[e]);else null!=i&&(n(i,!1),o(i));else n(this,e)}const d=e=>{e.type==r.OA.CHILD&&(e._$AP??=u,e._$AQ??=c)};class h extends r.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),l(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(n(this,e),o(this))}setValue(e){if((0,a.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const p=()=>new m;class m{}const y=new WeakMap,v=(0,r.u$)(class extends h{render(e){return i.s6}update(e,[t]){const s=t!==this.G;return s&&void 0!==this.G&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),i.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let s=y.get(t);void 0===s&&(s=new WeakMap,y.set(t,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?y.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})}}]);