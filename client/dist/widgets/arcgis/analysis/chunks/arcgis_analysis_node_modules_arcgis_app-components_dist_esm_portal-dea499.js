/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_portal-dea499.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_portal-dea499"],{931:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(93814);const o=async(e,t)=>(await r.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>d,c:()=>i,d:()=>u,e:()=>o,f:()=>r,g:()=>v,i:()=>f,m:()=>l,t:()=>s,u:()=>c});const r=(e,t)=>{let n,r="idle";const o=(...o)=>new Promise((i=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),i(e(...o))):i(null);break;case"invoked":clearTimeout(n),r="idle",i(e(...o));break;case"cancelled":clearTimeout(n),r="idle",i(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout((()=>(r="idle",i(e(...o)))),t)}}));return o.flush=function(...e){return r="flushed",o(...e)},o.invoke=function(...e){return r="invoked",o(...e)},o.cancel=function(...e){return r="cancelled",o(...e)},o.getStatus=function(){return r},o};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function l(e,t){return await Promise.all([e,s(t)]),e}function s(e){return new Promise((t=>setTimeout(t,e)))}const a=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:r}=t(e);return[n,r]}))),u=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function c(e,t){const n=[],r={};return e.forEach((e=>{const o=t(e);null==r[o]&&(r[o]=e,n.push(e))})),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const v=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,r)=>e.slice(t*r,t+t*r))),f=(e,t)=>e.includes(t)},50637:(e,t,n)=>{n.d(t,{a:()=>m,b:()=>b,c:()=>v,d:()=>p,f:()=>c,g:()=>f,i:()=>d,p:()=>w,r:()=>h});var r=n(59317),o=n(4429),i=n(931),l=n(87744);const s={},a={},u={};async function c(e,t,n,r){var o,i,l,c;const d=null===(i=null===(o=u[t])||void 0===o?void 0:o[n])||void 0===i?void 0:i.expireAt,v=!!d&&(new Date).getTime()>d;if((null===(l=s[t])||void 0===l?void 0:l[n])&&!v)return s[t][n];a[t]||(a[t]={}),a[t][n]&&!v||(a[t][n]=e());const f=await a[t][n];if(s[t]||(s[t]={}),u[t]||(u[t]={}),s[t][n]=f,r){const{expireAfter:e,getExpireAfterFromResult:o}=r,i=o||e?(new Date).getTime()+(null!==(c=null==o?void 0:o(f))&&void 0!==c?c:e):null;u[t][n]=Object.assign(Object.assign({},u[t][n]),{expireAt:i})}return f}function d(e,t){var n;return null===(n=null==s?void 0:s[e])||void 0===n?void 0:n[t]}const v=(e,t)=>{var n,r;t?(null===(n=s[e])||void 0===n||delete n[t],null===(r=a[e])||void 0===r||delete r[t]):(delete s[e],delete a[e])};function f(e){var t,n,o,i;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===o?void 0:o.token)||(null===(i=null==e?void 0:e.portalUser)||void 0===i?void 0:i.token)||""}function p(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function g(e){var t;const{config:n}=r.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function m(e,t,n={},o){const[l]=await(0,i.l)(["esri/request"]),{api:s}=r.c;e.includes("f=")||t.append("f","json");const a=f();return a&&!t.has("token")&&t.append("token",a),new Promise(((r,i)=>{if(3===s){const s={url:!1===n.addSSL?e:g(e),form:t,timeout:n.timeout||0},a="post"===o?Object.assign({usePost:!0},n):n;l(s,a).then(r,i)}else l(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:o||"auto"})).then((e=>{r(e.data)})).catch((e=>i(e)))}))}async function h(e,t={},n={},o,l){const[s]=await(0,i.l)(["esri/request"]),{api:a,portal:u}=r.c,{customToken:c,addTokenManually:d,addSSL:v,useProxy:f}=n,p=Object.assign({},t);if(e.includes("f=")||!0===(null==l?void 0:l.excludeJson)||(p.f="json"),c)p.token=c;else if(!1!==d){const e=await b(u,a);e&&(p.token=e)}const m=!1===v?e:g(e);if(3===a){const e=Object.assign({url:m,content:p,timeout:n.timeout||0},null==l?void 0:l.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return s(e,"post"===o?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:p,method:o||"auto"},n),{timeout:n.timeout||0,useProxy:f}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(m,e)).data}}const y=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const w=async(e,t,n)=>{var r,i;const l=null!==(r=null==t?void 0:t.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(i=null==t?void 0:t.successStatuses)&&void 0!==i?i:["completed","Completed","COMPLETED"];let a=0;const u=async()=>{const r=await h(e,null==t?void 0:t.requestParams,{},n),i=r.status||r.jobStatus;if(l.includes(i))return await(0,o.t)((c=a++,1e3*y[c>-1&&c<y.length-1?c:y.length-1])),u();if(s.includes(i)||"failed"===i)return r;throw r;var c};try{return u()}catch(e){throw console.error(e),e}},b=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,l.i)(e))return f(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,l.i)(e))return;const{token:o}=await c((()=>P(e,null!=t?t:null===r.c||void 0===r.c?void 0:r.c.api)),"platformSelf",null!==(n=p(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return o},P=async(e,t)=>{const n=await(async(e,t)=>{var n,r,o;const s=3===t,[a]=s?await(0,i.l)(["esri/IdentityManager"]):await(0,i.l)(["esri/identity/IdentityManager"]),u=await c((()=>a.getCredential((0,l.g)(e),{oAuthPopupConfirmation:!1})),"credential",p(e.user));return null!==(o=s?null===(n=u._oAuthCred)||void 0===n?void 0:n.appId:null===(r=u.oAuthState)||void 0===r?void 0:r.appId)&&void 0!==o?o:"arcgisonline"})(e,t),r={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return h(`${(0,l.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?r:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})}},83929:(e,t,n)=>{n.d(t,{a:()=>v,b:()=>c,c:()=>s,d:()=>a,e:()=>f,f:()=>h,g:()=>d,h:()=>l,i:()=>p,j:()=>i,q:()=>u});var r=n(50637),o=n(87744);function i(e){var t;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(t=e.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))}function l(e){var t,n;return e.isPortal?"modern"===(null===(n=e.portalProperties)||void 0===n?void 0:n.homePage)||function(e){var t;return e.isPortal&&"modernOnly"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)}(e):"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){const t=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=t}(e)}async function s(e){try{return{result:await(0,r.f)((()=>(0,r.r)(`${(0,o.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function a(e){return(0,r.f)((()=>(0,r.r)(`${(0,o.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function u(e={},t){return(0,r.r)(`${(0,o.g)(t)}/community/groups`,e)}const c=async(e,t)=>{var n;if(!e)return[];const i=`${(0,o.a)(null!==(n=t.restUrl)&&void 0!==n?n:t.portalUrl)}portals/self/servers`,l=await(0,r.f)((()=>(0,r.r)(i)),"selfServers",t.id);return null==l?void 0:l.servers},d=e=>v((0,o.d)(e)),v=(e,t)=>{var n;const i=t?`?${(0,o.b)(null!=t?t:{})}`:"",l=`${(0,o.a)(null!==(n=(0,o.c)(e))&&void 0!==n?n:e)}info${i}`;return(0,r.f)((()=>(0,r.r)(l,{},{addTokenManually:!1})),"portalInfo",l)};async function f(e,t){return!e.isPortal||await p(e,t)}async function p(e,t){if(!t||!e)return!1;if(!e.isPortal)return!0;const{result:n,error:o}=await(0,r.f)((()=>g(e,t)),"isPortalBackedBySDS",e.id);return!o&&n}const g=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await m(t,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},m=async(e,t)=>{var n;return(null!==(n=await c(e,t))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]};async function h(e){const t=(0,o.g)(e);if(!t)return;const n=`${t}portals/self/settings`;return(0,r.f)((()=>(0,r.r)(n)),"portalSettings",t)}}}]);