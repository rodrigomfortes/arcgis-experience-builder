/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-96d103.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-96d103"],{931:(e,t,i)=>{i.d(t,{l:()=>o});var s=i(93814);const o=async(e,t)=>(await s.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>h,c:()=>r,d:()=>c,e:()=>o,f:()=>s,g:()=>u,i:()=>v,m:()=>l,t:()=>a,u:()=>d});const s=(e,t)=>{let i,s="idle";const o=(...o)=>new Promise((r=>{switch(s){case"flushed":s="idle",i?(clearTimeout(i),r(e(...o))):r(null);break;case"invoked":clearTimeout(i),s="idle",r(e(...o));break;case"cancelled":clearTimeout(i),s="idle",r(null);break;default:i&&clearTimeout(i),s="pending",i=setTimeout((()=>(s="idle",r(e(...o)))),t)}}));return o.flush=function(...e){return s="flushed",o(...e)},o.invoke=function(...e){return s="invoked",o(...e)},o.cancel=function(...e){return s="cancelled",o(...e)},o.getStatus=function(){return s},o};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){return null!=e}async function l(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const n=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:s}=t(e);return[i,s]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function d(e,t){const i=[],s={};return e.forEach((e=>{const o=t(e);null==s[o]&&(s[o]=e,i.push(e))})),i}function h(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let s=typeof e;return s in t?!t[s].hasOwnProperty(e)&&(t[s][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,s)=>e.slice(t*s,t+t*s))),v=(e,t)=>e.includes(t)},22407:(e,t,i)=>{i.d(t,{a:()=>l,g:()=>r});var s=i(4429),o=i(80729);function r(e,t){if(function(e,t){return null==t?void 0:t.some((t=>t.title===e))}(e,t))return{error:"folderAlreadyExists"};if(!e||0===e.trim().length)return{error:"noName"};const i=(0,o.a)(e);return(null==i?void 0:i.length)>0?{error:"invalidCharacters",invalidCharacters:(0,s.b)(i)}:null}function l(e){const{folderId:t,currentUsername:i,selectedFolderId:s}=e;switch(t){case"all":return"folders";case i:return"home";case"recycle":return"recycle-bin";default:return t===s?"folder-open":"folder"}}},24869:(e,t,i)=>{i.d(t,{a:()=>r,f:()=>c,g:()=>n,s:()=>l,v:()=>a});var s=i(15912),o=i(46227);function r(e,t){const i=/(?:\.([^.]+))?$/;let s=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),r=s&&i.exec(s)[1]?i.exec(s)[1].toLowerCase():"",l="";if((null==s?void 0:s.indexOf(".rft."))>-1){const[e,t]=s.split(".rft.");r=`rft.${t}`,l=e}return s&&!l&&(l=-1===s.lastIndexOf(".")?s:s.substring(0,s.lastIndexOf("."))),l=l.replace(/\.|-/g,"_"),t&&(l=function(e){return`${e}_${(0,o.g)()}`}(l),s=`${l}.${r}`),{title:l,fileName:s,extension:r}}function l(e,t){return r(e.name,!!t)}function a(e,t){let i=e;const s=e.lastIndexOf("\\");return s>-1&&(i=i.substring(s+1,i.length)),i.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function n(e){return s.a[e]?s.a[e]:s.a[Object.keys(s.a).find((t=>s.a[t].type===e))]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},46227:(e,t,i)=>{i.d(t,{g:()=>s});const s=()=>[2,1,1,1,3].map((e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},50637:(e,t,i)=>{i.d(t,{a:()=>p,b:()=>y,c:()=>u,d:()=>g,f:()=>d,g:()=>v,i:()=>h,p:()=>w,r:()=>f});var s=i(59317),o=i(4429),r=i(931),l=i(87744);const a={},n={},c={};async function d(e,t,i,s){var o,r,l,d;const h=null===(r=null===(o=c[t])||void 0===o?void 0:o[i])||void 0===r?void 0:r.expireAt,u=!!h&&(new Date).getTime()>h;if((null===(l=a[t])||void 0===l?void 0:l[i])&&!u)return a[t][i];n[t]||(n[t]={}),n[t][i]&&!u||(n[t][i]=e());const v=await n[t][i];if(a[t]||(a[t]={}),c[t]||(c[t]={}),a[t][i]=v,s){const{expireAfter:e,getExpireAfterFromResult:o}=s,r=o||e?(new Date).getTime()+(null!==(d=null==o?void 0:o(v))&&void 0!==d?d:e):null;c[t][i]=Object.assign(Object.assign({},c[t][i]),{expireAt:r})}return v}function h(e,t){var i;return null===(i=null==a?void 0:a[e])||void 0===i?void 0:i[t]}const u=(e,t)=>{var i,s;t?(null===(i=a[e])||void 0===i||delete i[t],null===(s=n[e])||void 0===s||delete s[t]):(delete a[e],delete n[e])};function v(e){var t,i,o,r;return null!=e||(e=null===s.c||void 0===s.c?void 0:s.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(i=null==e?void 0:e.user)||void 0===i?void 0:i.credential)||void 0===o?void 0:o.token)||(null===(r=null==e?void 0:e.portalUser)||void 0===r?void 0:r.token)||""}function g(e){var t,i;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id}function m(e){var t;const{config:i}=s.c;return"https:"===window.location.protocol||!0===(null===(t=null==i?void 0:i.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function p(e,t,i={},o){const[l]=await(0,r.l)(["esri/request"]),{api:a}=s.c;e.includes("f=")||t.append("f","json");const n=v();return n&&!t.has("token")&&t.append("token",n),new Promise(((s,r)=>{if(3===a){const a={url:!1===i.addSSL?e:m(e),form:t,timeout:i.timeout||0},n="post"===o?Object.assign({usePost:!0},i):i;l(a,n).then(s,r)}else l(e,Object.assign(Object.assign({body:t},i),{timeout:i.timeout||0,method:o||"auto"})).then((e=>{s(e.data)})).catch((e=>r(e)))}))}async function f(e,t={},i={},o,l){const[a]=await(0,r.l)(["esri/request"]),{api:n,portal:c}=s.c,{customToken:d,addTokenManually:h,addSSL:u,useProxy:v}=i,g=Object.assign({},t);if(e.includes("f=")||!0===(null==l?void 0:l.excludeJson)||(g.f="json"),d)g.token=d;else if(!1!==h){const e=await y(c,n);e&&(g.token=e)}const p=!1===u?e:m(e);if(3===n){const e=Object.assign({url:p,content:g,timeout:i.timeout||0},null==l?void 0:l.v3Request);i.withCredentials&&(e.withCredentials=i.withCredentials);return a(e,"post"===o?Object.assign({usePost:!0},i):i)}{const e=Object.assign(Object.assign(Object.assign({query:g,method:o||"auto"},i),{timeout:i.timeout||0,useProxy:v}),(null==i?void 0:i.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(p,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const w=async(e,t,i)=>{var s,r;const l=null!==(s=null==t?void 0:t.pendingStatuses)&&void 0!==s?s:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(r=null==t?void 0:t.successStatuses)&&void 0!==r?r:["completed","Completed","COMPLETED"];let n=0;const c=async()=>{const s=await f(e,null==t?void 0:t.requestParams,{},i),r=s.status||s.jobStatus;if(l.includes(r))return await(0,o.t)((d=n++,1e3*b[d>-1&&d<b.length-1?d:b.length-1])),c();if(a.includes(r)||"failed"===r)return s;throw s;var d};try{return c()}catch(e){throw console.error(e),e}},y=async(e,t)=>{var i;if(!(null==e?void 0:e.isPortal)||!(0,l.i)(e))return v(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,l.i)(e))return;const{token:o}=await d((()=>F(e,null!=t?t:null===s.c||void 0===s.c?void 0:s.c.api)),"platformSelf",null!==(i=g(e.user))&&void 0!==i?i:e.id,{getExpireAfterFromResult:e=>e.expires_in});return o},F=async(e,t)=>{const i=await(async(e,t)=>{var i,s,o;const a=3===t,[n]=a?await(0,r.l)(["esri/IdentityManager"]):await(0,r.l)(["esri/identity/IdentityManager"]),c=await d((()=>n.getCredential((0,l.g)(e),{oAuthPopupConfirmation:!1})),"credential",g(e.user));return null!==(o=a?null===(i=c._oAuthCred)||void 0===i?void 0:i.appId:null===(s=c.oAuthState)||void 0===s?void 0:s.appId)&&void 0!==o?o:"arcgisonline"})(e,t),s={"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return f(`${(0,l.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?s:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:s}})}},64099:(e,t,i)=>{i.d(t,{a:()=>l,g:()=>c});var s=i(15332),o=i(81034),r=i(87849);function l(e){var t,i,r;const l=null!==(t=(0,s.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(a)?o.l.get(a):o.l.has(a.slice(0,2))?o.l.get(a.slice(0,2)):"en"}const a={};function n(e,t){const i=`${e}${t}`;return a[i]||(a[i]=function(e,t){return new Promise(((i,s)=>{fetch((0,r.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?i(e.json()):s()}),(()=>s()))}))}(e,t)),a[i]}async function c(e,t){const i=t||e.tagName.toLowerCase(),r=l(e),a=function(e){var t,i,r;const l=null!==(t=(0,s.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(a)?o.l.get(a):o.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await n(i,r)}catch(e){console.warn(`no locale for ${i} (${r}) loading default locale en.`),c=await n(i,"en")}return[c,r,a]}},80729:(e,t,i)=>{i.d(t,{a:()=>o,g:()=>s});const s=e=>e.match(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F700}-\u{1F77F}]|[\u{1F780}-\u{1F7FF}]|[\u{1F800}-\u{1F8FF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu),o=e=>{const t=r(e);if(t)return t;const i=s(e);return i||null},r=e=>e.match(/[<>\/]/g)},81034:(e,t,i)=>{i.d(t,{C:()=>a,a:()=>n,b:()=>d,f:()=>h,g:()=>l,l:()=>r,s:()=>v});var s=i(931),o=i(15332);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,t,i){const s=(0,o.c)(e,`[${t}]`);return s?s.getAttribute(t):i}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function n(e,t){const{api:i,type:o,places:r}=t||{};if(4===i){const[t]=await(0,s.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:r,style:o,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:o}))}const[l]=await(0,s.l)(["dojo/number"]);return l.format(e,{type:o,places:r,pattern:null==t?void 0:t.pattern})}const c={};function d(e,t){let i=document.documentElement.lang;const s="bs"===i;if(s&&(i="hr"),t){const t=`${i}-full`,s={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(i,s)),c[t].format(e)}const o={year:"numeric",month:s?"numeric":"short",day:"numeric"};return c[i]||(c[i]=new Intl.DateTimeFormat(i,o)),c[i].format(e)}function h(e,t,i,s){const o=null!=e?e:"en";let r=t.unknown;return(1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o))&&(r=t.single),1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)&&(r=t.multiple),v(r,Object.assign(Object.assign({},s),{number:i}))}const u=/\$\{([^}]+)\}/g;function v(e,t,i=u){let s=e;try{s=e.replace(i,((e,i)=>function(e,t){const i=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof i||"number"==typeof i?i:e}(i,t).toString()))}catch(e){console.error(e)}return s}},93718:(e,t,i)=>{i.r(t),i.d(t,{arcgis_categories_picker:()=>F,arcgis_folder_picker:()=>x,arcgis_item_properties:()=>T,arcgis_summary_input:()=>k,arcgis_tags_picker:()=>P,arcgis_title_input:()=>L});var s=i(87849),o=i(37362),r=i(59317),l=i(4429),a=i(64099),n=i(38295),c=i(72257),d=i(81034),h=i(56175),u=i(22407),v=i(50020),g=i(37762),m=i(43555),p=i(80729),f=i(87744),b=i(50637),w=i(72411),y=i(24869);i(15332),i(51102),i(86562),i(931),i(93814),i(50822),i(3826),i(95878),i(15912);const F=class{constructor(e){(0,s.r)(this,e),this.arcgisCategoriesPickerChange=(0,s.c)(this,"arcgisCategoriesPickerChange",7),this.renderCombobox=()=>{const{i18n:e,scale:t,schema:i,label:o}=this;return(0,s.h)("calcite-combobox",{label:null!=o?o:e.categories,maxItems:5,selectionMode:"ancestors",placeholder:e.assignCategories,scale:t,ref:e=>this.combobox=e,overlayPositioning:this.overlayPositioning},this.renderNestedCategories(i))},this.api=void 0,this.portal=void 0,this.scale=void 0,this.label=void 0,this.hideLabel=void 0,this.overlayPositioning=void 0,this.categories=[],this.schema=[],this.rootCategoryPath=o.U}async componentWillLoad(){var e,t,i,s,o,l,n,d;const h=await(0,a.g)(this.el);this.i18n=h[0],this.store=(0,c.g)(this.el),null!==(e=this.portal)&&void 0!==e||(this.portal=r.c.portal),null!==(t=this.scale)&&void 0!==t||(this.scale=r.c.scale),null!==(i=this.api)&&void 0!==i||(this.api=r.c.api),this.categories.length>0?this.updateCategories():this.categories=(null===(o=null===(s=this.store)||void 0===s?void 0:s.state)||void 0===o?void 0:o.categories.length)>0?null===(n=null===(l=this.store)||void 0===l?void 0:l.state)||void 0===n?void 0:n.categories:c.i.categories,null===(d=this.store)||void 0===d||d.on("reset",(()=>{var e,t;this.categories=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.categories}))}async componentDidLoad(){var e,t,i;const{portal:s,schema:r}=this;if(s&&!(null==r?void 0:r.length))if(s.categories)this.schema=null===(e=s.categories[0])||void 0===e?void 0:e.categories;else{const e=await(0,n.f)(s);this.schema=null===(i=null===(t=e.categorySchema)||void 0===t?void 0:t[0])||void 0===i?void 0:i.categories,this.rootCategoryPath=(0,o.a)(e.categorySchema)}}updateCategories(){this.arcgisCategoriesPickerChange.emit(this.categories)}categoriesPickerChangeHandler(e){var t;e.stopPropagation();const i=(null===(t=this.combobox)||void 0===t?void 0:t.value)||[],s=Array.isArray(i)?i:[i];(0,l.d)(s,this.categories)||(this.categories=s)}renderNestedCategories(e,t){return e.map((e=>{const i=t?`${t}/${e.title}`:`${this.rootCategoryPath}/${e.title}`;return(0,s.h)("calcite-combobox-item",{key:i,value:i,textLabel:e.title,selected:this.categories.some((e=>e===i||e.toLocaleLowerCase()===i.toLocaleLowerCase()||e.toLocaleLowerCase().includes(`${i.toLocaleLowerCase()}/`)))},e.categories&&this.renderNestedCategories(e.categories,i))}))}render(){const{i18n:e,scale:t,schema:i,hideLabel:o,label:r,renderCombobox:l}=this;return o?l():!!i&&(0,s.h)("calcite-label",{scale:t},(0,s.h)("p",{class:"label"},null!=r?r:e.categories),l())}get el(){return(0,s.a)(this)}static get watchers(){return{categories:["updateCategories"]}}};F.style=".label{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight, 400)}";const x=class{constructor(e){(0,s.r)(this,e),this.arcgisFolderPickerChange=(0,s.c)(this,"arcgisFolderPickerChange",7),this.arcgisFolderPickerLoad=(0,s.c)(this,"arcgisFolderPickerLoad",7),this.canCreateNewFolder=!1,this.capComboboxTagWidth=()=>{var e,t;const{comboboxElement:i,overlayPositioning:s}=this;if("fixed"!==s)return;const o=null!==(e=null==i?void 0:i.offsetWidth)&&void 0!==e?e:0,r=null===(t=i.shadowRoot)||void 0===t?void 0:t.querySelector(".list-container");r&&(r.style.maxWidth=`${o}px`)},this.isTitleValid=e=>{var t;const i=(0,u.g)(e,this.folders);if(!i)return!0;const s=this.i18n.error;if("invalidCharacters"===i.error){const e=i.invalidCharacters;this.errorString=(0,d.f)(this.lang,s.invalidCharacters,e.length,{invalidCharacters:e.join(", ")})}else this.errorString=(null!==(t=s[i.error])&&void 0!==t?t:this.newItemI18n.cloud.error.generic.message).replace("${folder}",e);return this.showError=!0,!1},this.handleCreateNewFolderFromCreateLink=async()=>{this.showError=!1,await this.createNewFolder(this.filterText),this.listElement.filterText="",this.emptyFilterList=!1},this.renderItem=e=>{const{id:t,username:i,title:o}=e,{internalSelectedFolder:r}=this,l=t===(null==r?void 0:r.id),a=(0,u.a)({folderId:t,currentUsername:i,selectedFolderId:null==r?void 0:r.id});return this.alwaysOpen?(0,s.h)("calcite-list-item",{key:t,value:t,selected:l,class:"list-item",label:o,onCalciteListItemSelect:()=>this.handleNewFolderId(e.id)},(0,s.h)("calcite-icon",{slot:"content-start",scale:"s",icon:a})):(0,s.h)("calcite-combobox-item",{key:t,"data-id":t,value:t,heading:o,selected:l,icon:a})},this.api=void 0,this.portal=void 0,this.user=void 0,this.scale=void 0,this.label=void 0,this.folder=void 0,this.selectedFolder=void 0,this.folders=[],this.alwaysOpen=void 0,this.disabled=!1,this.overlayPositioning=void 0,this.disallowFolderCreation=!1,this.internalSelectedFolder=void 0,this.newFolderActive=!1,this.emptyFilterList=!1,this.filterText=void 0,this.newFolderInput=void 0,this.createFolderText=void 0,this.showError=!1,this.errorString=void 0,this.newFolderInputElement=void 0,this.loading=!1,this.homeFolder=void 0}async componentWillLoad(){var e,t,i,s,o,l,n,d,u,v,g,m,p,f,b,w,y,F,x;const[C,T]=await Promise.all([(0,a.g)(this.el),(0,a.g)(this.el,"arcgis-new-item")]);this.i18n=C[0],this.lang=C[1],this.store=(0,c.g)(this.el),this.newItemI18n=T[0],null!==(e=this.portal)&&void 0!==e||(this.portal=r.c.portal),null!==(t=this.user)&&void 0!==t||(this.user=r.c.user),null!==(i=this.scale)&&void 0!==i||(this.scale=r.c.scale),null!==(s=this.api)&&void 0!==s||(this.api=r.c.api);const k=null!==(l=null===(o=this.selectedFolder)||void 0===o?void 0:o.id)&&void 0!==l?l:null===(n=this.folder)||void 0===n?void 0:n.id;null!==(d=this.internalSelectedFolder)&&void 0!==d||(this.internalSelectedFolder=null!==(p=null!==(m=null!==(u=this.folders.find((e=>e.id===k)))&&void 0!==u?u:null===(g=null===(v=this.store)||void 0===v?void 0:v.state)||void 0===g?void 0:g.folder)&&void 0!==m?m:r.c.initialFolder)&&void 0!==p?p:null===(f=this.folders)||void 0===f?void 0:f[0]),this.createFolderText=this.i18n.createNewFolder,this.canCreateNewFolder=!this.disallowFolderCreation&&((0,h.e)(null===(b=this.portal)||void 0===b?void 0:b.user)||this.user&&(null===(y=null===(w=this.portal)||void 0===w?void 0:w.user)||void 0===y?void 0:y.username)===(null===(F=this.user)||void 0===F?void 0:F.username)),null===(x=this.store)||void 0===x||x.on("reset",(()=>{var e,t,i,s,o;this.internalSelectedFolder=null!==(s=null!==(i=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.folder)&&void 0!==i?i:r.c.initialFolder)&&void 0!==s?s:null===(o=this.folders)||void 0===o?void 0:o[0]}))}async componentDidLoad(){this.folders.length||await this.loadFolders(this.user),this.capComboboxTagWidth()}async handleUserChange(e,t){t&&e.username!==t.username&&(await this.loadFolders(e),this.internalSelectedFolder=this.getHomeFolder())}handleFolderChange(){this.selectedFolder||(this.arcgisFolderPickerChange.emit(this.internalSelectedFolder),this.folder=this.internalSelectedFolder)}handleSelectedFolderChange(){this.internalSelectedFolder=this.folders.find((e=>{var t;return e.id===(null===(t=this.selectedFolder)||void 0===t?void 0:t.id)}))}async loadFolders(e){var t,i,s,o,r,l;this.loading=!0,this.folders=await(0,v.a)(e),this.arcgisFolderPickerLoad.emit([...this.folders]);const a=null!==(o=null!==(i=null===(t=this.selectedFolder)||void 0===t?void 0:t.id)&&void 0!==i?i:null===(s=this.internalSelectedFolder)||void 0===s?void 0:s.id)&&void 0!==o?o:null===(r=this.folder)||void 0===r?void 0:r.id;this.internalSelectedFolder=null!==(l=this.folders.find((e=>e.id===a)))&&void 0!==l?l:this.getHomeFolder(),this.loading=!1}getHomeFolder(){return this.folders.find((e=>e.title===e.id))}setNewFolderActive(){var e;null===(e=this.newFolderInputElement)||void 0===e||e.setFocus(),this.newFolderInputElement||(this.showError=!1,this.newFolderInput="")}checkForEmptySuggestions(e){var t,i;e.stopPropagation();const s=this.comboboxElement.shadowRoot.querySelector("input").value,{i18n:o}=this;this.emptyFilterList=(null===(t=this.comboboxElement.filteredItems)||void 0===t?void 0:t.length)<=1&&""!==s.trim(),this.createFolderText=this.emptyFilterList?o.noFoldersFoundCreate.replace("${folder}",s):o.createNewFolder,this.filterText=s,null===(i=this.createItem)||void 0===i||i.removeAttribute("hidden")}handleComboboxChange(e){if("create-folder"===e)return this.showError=!1,void(this.emptyFilterList?this.createNewFolder(this.filterText,!0):this.newFolderActive=!0);this.handleNewFolderId(e)}handleNewFolderId(e){var t,i;const s=null!==(i=null!==(t=this.folders.find((t=>t.id===e)))&&void 0!==t?t:this.internalSelectedFolder)&&void 0!==i?i:this.homeFolder;this.selectedFolder?this.arcgisFolderPickerChange.emit(s):this.internalSelectedFolder=s}closeNewFolderInput(e){e.stopPropagation(),this.newFolderActive=!1}async saveActiveFolder(){if(!this.newFolderActive)return!0;try{await this.createNewFolder(this.newFolderInput)}catch(e){return this.errorString}return!this.showError}async setFocus(){this.comboboxElement&&(this.comboboxElement.setFocus(),this.comboboxElement.open=!0)}async createNewFolder(e,t){var i,s,o,a;const n=(null==e?void 0:e.trim())||"";if(this.showError=!1,!this.isTitleValid(n)){if(t){this.internalSelectedFolder=this.folders[0],await(0,l.t)(100);const e=null===(i=this.el.shadowRoot)||void 0===i?void 0:i.querySelector(`calcite-combobox-item[data-id="${null===(s=this.internalSelectedFolder)||void 0===s?void 0:s.id}"]`);e&&(this.createItem&&(this.createItem.selected=!1),e.selected=!0)}throw new Error}try{const{result:e}=await(0,v.c)(n,this.user);this.internalSelectedFolder=null==e?void 0:e.folder,this.folders=[this.internalSelectedFolder,...this.folders],r.c.folders=this.folders,this.newFolderActive=!1,this.showError=!1,await(0,l.t)(100);const t=null===(o=this.el.shadowRoot)||void 0===o?void 0:o.querySelector(`calcite-combobox-item[data-id="${null===(a=this.internalSelectedFolder)||void 0===a?void 0:a.id}"]`);t&&(this.createItem&&(this.createItem.selected=!1),t.selected=!0)}catch(e){throw this.errorString=e.message,this.showError=!0,e}}renderError(){const{scale:e}=this;return(0,s.h)("calcite-input-message",{status:"invalid",hidden:!this.showError,icon:this.showError,scale:e},this.errorString)}renderNewFolder(){const{i18n:e,scale:t}=this;return(0,s.h)("calcite-inline-editable",{controls:!0,"editing-enabled":!0,afterConfirm:async()=>{var e;try{await this.createNewFolder(this.newFolderInput),this.newFolderActive=!1}catch(t){throw null===(e=this.newFolderInputElement)||void 0===e||e.setFocus(),t}},scale:t},(0,s.h)("label",{slot:"label",htmlFor:"folderNameInput"},e.enterFolder),(0,s.h)("calcite-input",{id:"folderNameInput",placeholder:e.enterFolder,value:this.newFolderInput,maxLength:250,scale:t,onCalciteInputInput:e=>this.newFolderInput=e.target.value,onKeyDown:async e=>{var t;switch(e.stopPropagation(),this.showError=!1,e.key){case"Enter":try{await this.createNewFolder(this.newFolderInput),this.newFolderActive=!1}catch(e){null===(t=this.newFolderInputElement)||void 0===t||t.setFocus()}break;case"Escape":this.newFolderActive=!1,this.showError=!1}},ref:e=>this.newFolderInputElement=e,status:this.showError?"invalid":"idle"}))}renderCombobox(){var e;const{i18n:t,scale:i,overlayPositioning:o}=this;return(0,s.h)("calcite-label",{scale:i,class:"input-height"},(0,s.h)("p",{class:"label"},null!==(e=this.label)&&void 0!==e?e:t.folder),(0,s.h)("div",null,this.newFolderActive?this.renderNewFolder():(0,s.h)("div",{class:"combobox-wrapper"},this.loading&&(0,s.h)("calcite-progress",{type:"indeterminate",class:"progress"}),(0,s.h)("calcite-combobox",{label:t.folder,selectionMode:"single-persist",maxItems:5,placeholder:this.loading?t.loading:t.searchFolders,scale:i,overlayPositioning:o,ref:e=>this.comboboxElement=e,disabled:this.loading||this.disabled,clearDisabled:!0,onCalciteComboboxChange:e=>{e.stopPropagation();const t=e.target.selectedItems[0].value;this.handleComboboxChange(t),this.selectedFolder&&(e.target.value=this.selectedFolder.id)},onCalciteComboboxBeforeClose:()=>{var e;this.comboboxElement&&!(null===(e=this.comboboxElement.selectedItems)||void 0===e?void 0:e.length)&&(this.comboboxElement.value=this.internalSelectedFolder.id)}},!this.loading&&(0,s.h)(s.F,null,this.user&&this.canCreateNewFolder&&(0,s.h)("calcite-combobox-item",{class:"create-folder",value:"create-folder",heading:this.createFolderText,selected:!1,icon:"folder-plus",filterDisabled:!0,key:"create",ref:e=>{this.createItem=e}}),this.folders.map(this.renderItem))))),this.renderError())}renderList(){const{i18n:e}=this;return(0,s.h)(s.F,null,(0,s.h)("calcite-list",{label:e.folders,class:"list",selectionMode:"single-persist",selectionAppearance:"border",ref:e=>this.listElement=e,filterPlaceholder:this.loading?e.loading:e.searchFolders,onCalciteListFilter:t=>{var i;const s=t.target;this.emptyFilterList=(null===(i=s.filteredItems)||void 0===i?void 0:i.length)<1,this.createFolderText=e.create.replace("${folder}",s.filterText),this.filterText=s.filterText},onCalciteListChange:e=>{this.selectedFolder&&e.target.filteredItems.forEach((e=>{e.selected=e.value===this.selectedFolder.id}))},filterEnabled:!0},this.emptyFilterList&&(0,s.h)("div",{class:"no-folders-found"},e.noFoldersFound,this.user&&(0,s.h)("calcite-link",{class:"create-link",onClick:this.handleCreateNewFolderFromCreateLink,onKeyDown:e=>{"Enter"===e.key&&this.handleCreateNewFolderFromCreateLink()}},this.createFolderText)),this.folders.map(this.renderItem)),this.user&&this.canCreateNewFolder&&(0,s.h)("div",{class:"below"},this.newFolderActive?this.renderNewFolder():(0,s.h)("calcite-button",{iconStart:"folder-plus",appearance:"transparent",onClick:()=>{this.showError=!1,this.newFolderActive=!0}},e.createNewFolder),this.renderError()))}render(){return(0,s.h)(s.H,{key:"fac87438c213da8cbc6de38059283d39263fecac"},this.alwaysOpen?this.renderList():this.renderCombobox())}get el(){return(0,s.a)(this)}static get watchers(){return{user:["handleUserChange"],internalSelectedFolder:["handleFolderChange"],selectedFolder:["handleSelectedFolderChange"],newFolderInputElement:["setNewFolderActive"]}}};var C;x.style=".label{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight, 400)}.create-folder{--calcite-color-text-1:var(--calcite-color-text-link);--calcite-color-text-3:var(--calcite-color-text-link)}.create-link{margin-left:0.25rem;margin-right:0.25rem}.combobox-wrapper{position:relative}.progress{position:absolute;top:0px;z-index:1}.below{margin-top:1.25rem}.list{max-height:15rem;overflow:auto;--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.list-item{min-width:0px;max-width:100%;text-overflow:ellipsis}.no-folders-found{padding-top:0.5rem;padding-bottom:0.5rem;padding-left:3.5rem;padding-right:3.5rem;font-size:0.75rem;color:var(--calcite-color-text-1)}",function(e){e.arcgisTitleInputChange="title",e.arcgisFolderPickerChange="folder",e.arcgisSummaryInputChange="snippet",e.arcgisTagsPickerChange="tags",e.arcgisCategoriesPickerChange="categories"}(C||(C={}));const T=class{constructor(e){(0,s.r)(this,e),this.arcgisItemPropertiesChange=(0,s.c)(this,"arcgisItemPropertiesChange",7),this.portal=void 0,this.user=void 0,this.api=void 0,this.config=void 0,this.itemId=void 0,this.type=void 0,this.scale=void 0,this.resetStoreOnUnmount=!0,this.store=(0,g.c)({title:"",snippet:"",tags:[],categories:[]})}async resetItemPropertiesStore(){this.store.reset(),c.a.reset()}handleItemPropertiesChange(e){const{detail:t,type:i}=e;this.store.state[C[i]]=t,c.i[C[i]]=t,this.arcgisItemPropertiesChange.emit(Object.assign({},this.store.state))}async componentWillLoad(){var e,t;this.portal&&(r.c.portal=this.portal),this.user&&(r.c.user=this.user),this.api&&(r.c.api=this.api),this.config&&(r.c.config=this.config),this.itemId&&({result:this.store.state.item}=await(0,m.a)(this.itemId,this.portal)),this.type&&(this.store.state.type=null!==(e=this.type)&&void 0!==e?e:null===(t=this.store.state.item)||void 0===t?void 0:t.type),this.scale&&(r.c.scale=this.scale)}render(){return(0,s.h)(s.H,{key:"2b73e716779a42fdb482eb07af80720e1e5edd39"},(0,s.h)("slot",{key:"a1af21c66a6ffade849ddb2bc469991a730d2ae0"}))}disconnectedCallback(){this.resetStoreOnUnmount&&this.resetItemPropertiesStore()}get el(){return(0,s.a)(this)}},k=class{constructor(e){(0,s.r)(this,e),this.arcgisSummaryInputChange=(0,s.c)(this,"arcgisSummaryInputChange",7),this.updateLiveRegion=(0,l.f)((e=>{this.liveRegionText=this.getCharactersText(e)}),1500),this.scale=void 0,this.label=void 0,this.summary=void 0,this.maxLength=2048,this.rows=2,this.minHeight=void 0,this.maxHeight=void 0,this.placeholder=void 0,this.trimInput=!0,this.liveRegionText=void 0,this.valid=!0,this.isTextSelected=!1}async focusMainInput(){var e,t;null===(t=(e=this.mainInputRef).setFocus)||void 0===t||t.call(e)}async getErrorMessage(){return this.valid?null:{code:"summaryInvalid",translatedMessage:this.i18n.invalid}}async componentWillLoad(){var e,t;const i=await(0,a.g)(this.el);this.i18n=i[0],this.store=(0,c.g)(this.el),null!==(e=this.scale)&&void 0!==e||(this.scale=r.c.scale),null!==(t=this.summary)&&void 0!==t||(this.summary=this.store.state.snippet),this.placeholder=this.placeholder||this.i18n.addSummary,this.liveRegionText=this.getCharactersText(this.summary),this.store.on("reset",(()=>{this.summary=this.store.state.snippet}))}componentDidRender(){var e;const{rows:t,minHeight:i,maxHeight:s}=this,o=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelector("calcite-text-area");o&&(o.style.minHeight=`${i}px`,o.style.maxHeight=`${s}px`,o.rows=t)}getCharactersText(e){return this.i18n.charactersLeft.replace("${num}",""+(this.maxLength-e.length))}validate(){this.valid=!/>|</.test(this.summary)}trimInputToMaxLength(e){return e.substring(0,this.maxLength)}getHighlightedText(){const e=window.getSelection().toString();this.isTextSelected=e.length>0&&this.summary.length===this.maxLength}render(){const{i18n:e,summary:t,label:i,maxLength:o,scale:r,liveRegionText:l,valid:a,placeholder:n,trimInput:c}=this;return(0,s.h)("div",{key:"600b315da00755ff5e3e0903c3c8f721bba90cd1",class:`container-${r}`},(0,s.h)("calcite-label",{key:"e721482ce71bf35d1170ee63fd82ad0439b10684",scale:r,class:"label"},(0,s.h)("p",{key:"4016064221f20d6219a98bfbdc1fc47551ef5c70",class:"label-text"},null!=i?i:e.summary),(0,s.h)("calcite-text-area",{key:"59761f5dec5b917773304b8e0d034f91a2e289a3",ref:e=>this.mainInputRef=e,id:"summary-input",resize:"vertical",placeholder:n,value:t,maxLength:o,scale:r,status:a?"idle":"invalid",onKeyDown:e=>{!c||this.summary.length!==o||this.isTextSelected||"Space"!==e.code&&("Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowUp"===e.key||"ArrowRight"===e.key||"ArrowDown"===e.key||"Tab"===e.key||e.ctrlKey||e.metaKey)||e.preventDefault()},onMouseUp:()=>{this.getHighlightedText()},onCalciteTextAreaInput:e=>{e.stopPropagation();const t=e.target;let i=t.value;c&&i.length>o&&(i=this.trimInputToMaxLength(t.value)),this.summary=i,this.arcgisSummaryInputChange.emit(this.summary),this.updateLiveRegion(i),this.validate()}}),(0,s.h)("calcite-input-message",{key:"f3f327ecb554760568ff323d0415b7b9efca10b0",hidden:a,icon:!0,scale:r,status:a?"idle":"invalid"},e.invalid),(0,s.h)("span",{key:"7d2deb8cae9db1afaf8cfe33a72fb02bf27338f1",class:"screen-readers-only","aria-live":"polite"},l)))}get el(){return(0,s.a)(this)}};function I(e){return null==e?void 0:e.includes("Photo locations")}k.style=":host{--arcgis-label-margin-bottom:1rem}.container-s{margin-bottom:0.5rem}.container-m{margin-bottom:0.75rem}.container-l{margin-bottom:1rem}.label{--calcite-label-margin-bottom:0}.label-text{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight, 400)}calcite-input{--calcite-color-border-1:var(--calcite-color-border-input)}.count{font-size:0.75rem;color:var(--calcite-color-text-1);opacity:0.75}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}";async function S({portal:e,user:t,title:i,itemType:s,typeKeywords:o,folder:r,extension:a,enablePublishing:n=!1,update:c=!1}){if(!t||!e)return{code:"missingUserOrPortal"};if(!i||i.trim().length<=0)return{code:"titleRequired"};const d=(0,p.g)(null!=i?i:"");if(d)return{code:"titleInvalid",details:d};if("Data Store"===s&&(/[\s.@~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g.test(i)||i.length>90))return{code:"dataStoreTitleInvalid"};if(!n&&(/<|>/gi.test(i)||i.length>250))return{code:"titleInvalid"};if(n&&(/[.@~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g.test(i)||i.length>90))return{code:"serviceNameInvalid"};if((0,l.i)(["WFS","Scene Service"],s)&&i.match(/^\d/))return{code:"titleStartsWithNumber"};const h="Image Collection"===s&&!I(o),u=n?function(e,t){switch(e){case"Image Collection":return I(t)?"Feature Service":"Image Service";case"CSV":case"Microsoft Excel":case"GeoJson":case"Shapefile":case"File Geodatabase":case"GeoPackage":case"Service Definition":case"Feature Collection":return"Feature Service";case"Tile Package":return"Map Service";case"Vector Tile Package":return"Vector Tile Service";case"Scene Package":return"Scene Service";case"3DTiles Package":return"3DTiles Service"}return e}(s,o):h?"Image Service":s,{itemURLList:v}=await(0,m.j)(i,u,r,a,t,e)||{};if(v&&!c)return{code:"itemExists",itemUrl:v[0]};const g=function(e){switch(e){case"Feature Service":case"Map Service":return e;case"OGCFeatureServer":return"OGCFeatureService";case"WCS":return"WCS";case"Tile Package":case"Tile Layer":return"Map Service";case"Scene Package":return"Scene Service";case"Vector Tile Package":case"Vector Tile Service":return"Vector Tile Service";case"Image Collection":return"Image Service";case"WFS":return"WFS";default:return null}}(u);if(n&&g){const t=await(0,b.r)(`${(0,f.g)(e)}portals/${e.id}/isServiceNameAvailable`,{name:i.replace(/\s/g,"_"),type:g});if(!(null==t?void 0:t.available))return{code:"titleInUseService",layerName:i,inRecycleBin:!!t.inRecycleBin}}return null}async function E(e){null!=e||(e=r.c.user);const t=e.url+"/tags";try{return(await(0,b.r)(t)).tags}catch(e){console.error(e)}}const P=class{constructor(e){(0,s.r)(this,e),this.arcgisTagsPickerChange=(0,s.c)(this,"arcgisTagsPickerChange",7),this.isTag=e=>void 0!==e.tag&&void 0!==e.count,this.controlledTags=[],this.mapItemValue=e=>e.map((e=>e.value)),this.handleKeydown=e=>{var t;if(","===e.key){const i=e.target,s=null===(t=null==i?void 0:i.shadowRoot)||void 0===t?void 0:t.querySelector("input");if(null==s?void 0:s.value){e.preventDefault();const t=s.value.trim(),o=i.querySelector(`calcite-combobox-item[text-label="${t}"]`);if(o)o.selected=!0;else{const e=document.createElement("calcite-combobox-item");e.value=t,e.textLabel=t,e.selected=!0,null==i||i.appendChild(e)}s.value="";const r=new InputEvent("input",{data:""});s.dispatchEvent(r)}}},this.api=void 0,this.user=void 0,this.scale=void 0,this.activeTags=[],this.knownTags=[],this.label=void 0,this.placeholder=void 0,this.hideLabel=void 0,this.doNotFetchTags=void 0}async componentWillLoad(){var e,t,i,s,o,l,n,d,h,u;const v=await(0,a.g)(this.el);this.i18n=v[0],this.store=(0,c.g)(this.el),null!==(e=this.user)&&void 0!==e||(this.user=r.c.user),null!==(t=this.scale)&&void 0!==t||(this.scale=r.c.scale),null!==(i=this.api)&&void 0!==i||(this.api=r.c.api),this.activeTags.length>0?(this.activeTags=(0,w.f)(this.activeTags),this.arcgisTagsPickerChange.emit(this.activeTags)):this.activeTags=(0,w.f)((null===(o=null===(s=this.store)||void 0===s?void 0:s.state)||void 0===o?void 0:o.tags.length)>0?null===(n=null===(l=this.store)||void 0===l?void 0:l.state)||void 0===n?void 0:n.tags:c.i.tags),this.knownTags=(0,w.f)([...null!==(d=this.knownTags)&&void 0!==d?d:[],...null!==(h=this.activeTags)&&void 0!==h?h:[]]),null===(u=this.store)||void 0===u||u.on("reset",(()=>{var e,t;this.activeTags=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.tags}))}async componentDidLoad(){var e,t,i;const{user:s,doNotFetchTags:o}=this;if(!o&&s){const o=null!==(e=s.contentTags)&&void 0!==e?e:s.tags;!(null==o?void 0:o.length)||(null==o?void 0:o.length)>0&&!this.isTag(o[0])?this.knownTags=[...this.knownTags,...(await E(s)).map((e=>e.tag))]:this.knownTags=[...this.knownTags,...o.map((e=>e.tag))],this.knownTags=(0,w.f)([...null!==(t=this.activeTags)&&void 0!==t?t:[],...null!==(i=this.knownTags)&&void 0!==i?i:[]])}}itemPropertiesTagsChangeHandler(e){var t;e.stopPropagation();const i=(null===(t=this.combobox)||void 0===t?void 0:t.value)||[],s=Array.isArray(i)?i:[i];this.arcgisTagsPickerChange.emit((0,w.f)(s));const o=Array.from(this.combobox.children),r=this.combobox.selectedItems;o.forEach((e=>{this.controlledTags.includes(e.value)||e.remove()})),this.knownTags=this.mapItemValue(o),this.activeTags=this.mapItemValue(r)}renderFormattedTags(){const{i18n:e,scale:t,handleKeydown:i,placeholder:o}=this;this.knownTags.forEach((e=>{this.controlledTags.includes(e)||this.controlledTags.push(e)}));const r=this.knownTags.map((e=>{var t;return(0,s.h)("calcite-combobox-item",{key:e,value:e,textLabel:e.length>36?`${e.slice(0,36)}...`:e,selected:(null===(t=this.activeTags)||void 0===t?void 0:t.indexOf(e))>=0})}));return(0,s.h)("calcite-combobox",{label:e.tags,maxItems:5,"allow-custom-values":!0,placeholder:null!=o?o:e.addTags,scale:t,onKeyDown:i,ref:e=>this.combobox=e},r)}async setFocus(){var e;null===(e=this.combobox)||void 0===e||e.setFocus()}render(){const{i18n:e,scale:t,hideLabel:i,label:o}=this;return(0,s.h)("calcite-label",{key:"1e156a29e9407c28c3d477e908462d1d729aa860",scale:t},(0,s.h)("p",{key:"50865da1ff8771e63d4c01986c0f1a0734eff87d",class:{label:!0,"screen-reader-only":i}},null!=o?o:e.tags),this.renderFormattedTags())}get el(){return(0,s.a)(this)}};P.style=".label{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight, 400)}.screen-reader-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}";const L=class{constructor(e){(0,s.r)(this,e),this.arcgisTitleInputChange=(0,s.c)(this,"arcgisTitleInputChange",7),this.arcgisTitleInputValidation=(0,s.c)(this,"arcgisTitleInputValidation",7),this.debouncedInput=(0,l.f)((()=>this.handleTitleValidation()),400),this.api=void 0,this.portal=void 0,this.user=void 0,this.scale=void 0,this.label=void 0,this.itemTitle=void 0,this.currentFolder=void 0,this.type=void 0,this.typeKeywords=void 0,this.update=!1,this.enablePublishing=void 0,this.readOnly=!1,this.titleError=void 0}async focusMainInput(){var e,t;null===(t=(e=this.mainInputRef).setFocus)||void 0===t||t.call(e)}async validateTitle(){return this.debouncedInput.invoke()}async handleTitleValidation(){const{type:e,itemTitle:t,typeKeywords:i,enablePublishing:s,portal:o,user:r,update:l}=this,{extension:a}=(0,y.a)(t);if(e)return this.titleError=await S({portal:o,user:r,title:t,itemType:e,typeKeywords:i,folder:this.currentFolder,extension:a,enablePublishing:s,update:l}),this.arcgisTitleInputValidation.emit({valid:!this.titleError}),this.getErrorMessage();console.error("No item type found. Skipping title validation")}getErrorMessage(){const{lang:e,itemTitle:t,titleError:i,i18n:s}=this;if(t||(this.titleError={code:"titleRequired",translatedMessage:this.i18n.validation.titleRequired}),i)if(i.details&&"titleInvalid"===i.code){const t=i.details;i.translatedMessage=(0,d.f)(e,this.i18n.validation.invalidCharacters,t.length,{invalidCharacters:t.join(", ")})}else"titleInUseService"===i.code&&i.inRecycleBin?i.translatedMessage=s.validation.itemInRecycleBin.replace("${name}",t):s.validation[this.titleError.code]&&(i.translatedMessage=s.validation[this.titleError.code].replace("${name}",t));return i}async componentWillLoad(){var e,t,i,s,o,l,n;const d=await(0,a.g)(this.el);this.i18n=d[0],this.lang=d[1],this.store=(0,c.g)(this.el),null!==(e=this.portal)&&void 0!==e||(this.portal=r.c.portal),null!==(t=this.user)&&void 0!==t||(this.user=r.c.user),null!==(i=this.scale)&&void 0!==i||(this.scale=r.c.scale),null!==(s=this.api)&&void 0!==s||(this.api=r.c.api),null!==(o=this.type)&&void 0!==o||(this.type=this.store.state.type),null!==(l=this.itemTitle)&&void 0!==l||(this.itemTitle=this.store.state.title),null!==(n=this.currentFolder)&&void 0!==n||(this.currentFolder=this.store.state.folder),this.itemTitle&&this.handleTitleValidation(),this.store.state.title=this.itemTitle,this.store.on("reset",(()=>{this.itemTitle=this.store.state.title}))}render(){var e;const{i18n:t,itemTitle:i,scale:o,readOnly:r}=this,{translatedMessage:l,code:a}=this.titleError||{},n=!l;return(0,s.h)("calcite-label",{key:"6c7f39e65b8bdcb5e9dc928c668e1d97cedfaecf",scale:o},(0,s.h)("p",{key:"150558755bb6c82b01a236b39adf98463d0285aa",class:"label"},null!==(e=this.label)&&void 0!==e?e:t.title),(0,s.h)("calcite-input",{key:"86d34922056fb28c85955aed13d6bd417a881838",id:"item-properties-title",readOnly:r,disabled:r,placeholder:t.addTitle,value:i,scale:o,onInput:this.debouncedInput,max:250,ref:e=>this.mainInputRef=e,status:n?"idle":"invalid",onCalciteInputInput:e=>{e.stopPropagation(),this.itemTitle=e.target.value,this.arcgisTitleInputChange.emit(this.itemTitle)}}),(0,s.h)("calcite-input-message",{key:"e5759da380030428085d632d6ce7e876080c3a6d",icon:!0,hidden:n,status:n?"idle":"invalid"},l||t[a]||t.title))}get el(){return(0,s.a)(this)}static get watchers(){return{currentFolder:["handleTitleValidation"]}}};L.style=".label{margin-top:0px;margin-bottom:0px;font-weight:var(--arcgis-label-font-weight, 400)}calcite-input{--calcite-color-border-1:var(--calcite-color-border-input)}"}}]);