/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8dcdbb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8dcdbb"],{931:(e,t,n)=>{n.d(t,{l:()=>l});var i=n(93814);const l=async(e,t)=>(await i.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>d,c:()=>o,d:()=>c,e:()=>l,f:()=>i,g:()=>h,i:()=>v,m:()=>s,t:()=>r,u:()=>u});const i=(e,t)=>{let n,i="idle";const l=(...l)=>new Promise((o=>{switch(i){case"flushed":i="idle",n?(clearTimeout(n),o(e(...l))):o(null);break;case"invoked":clearTimeout(n),i="idle",o(e(...l));break;case"cancelled":clearTimeout(n),i="idle",o(null);break;default:n&&clearTimeout(n),i="pending",n=setTimeout((()=>(i="idle",o(e(...l)))),t)}}));return l.flush=function(...e){return i="flushed",l(...e)},l.invoke=function(...e){return i="invoked",l(...e)},l.cancel=function(...e){return i="cancelled",l(...e)},l.getStatus=function(){return i},l};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function s(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const a=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:i}=t(e);return[n,i]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function u(e,t){const n=[],i={};return e.forEach((e=>{const l=t(e);null==i[l]&&(i[l]=e,n.push(e))})),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,i)=>e.slice(t*i,t+t*i))),v=(e,t)=>e.includes(t)},27072:(e,t,n)=>{n.r(t),n.d(t,{arcgis_delete_folder:()=>h});var i=n(87849),l=n(59317),o=n(81034),s=n(64099),r=n(96295),a=n(87744),c=n(50637);n(37762),n(931),n(93814),n(15332);const u=async(e,t)=>(0,c.r)(`${e.userContentUrl}/${t.id}`);async function d(e,t,n,i){try{const l=`${(0,a.g)(e)}search`;return{result:(await(0,c.r)(l,{q:`owner:${t.username} ownerfolder:${n.id} ${i||""}`,num:1})).total}}catch(e){return{result:0}}}const h=class{constructor(e){(0,i.r)(this,e),this.arcgisDeleteFolderClose=(0,i.c)(this,"arcgisDeleteFolderClose",7),this.arcgisDeleteFolderSuccess=(0,i.c)(this,"arcgisDeleteFolderSuccess",7),this.arcgisDeleteFolderFail=(0,i.c)(this,"arcgisDeleteFolderFail",7),this.updateItems=async()=>{var e;const t=await u(null!==(e=this.user)&&void 0!==e?e:l.c.user,this.folder);this.items=t.items},this.renderMessage=()=>{var e;const{i18n:t,folder:n,mode:l,folderTotal:s,portal:r,lang:a,items:c}=this,{text:u,description:d}=(null===(e=null==r?void 0:r.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled)?(()=>{let e="",i="";switch(l){case"UNPROTECTED":e=t.message.recycleAll.replace("${title}",n.title);break;case"UNRECYCLABLE":case"UNRECYCLABLE_UNPROTECTED":e=t.message.canBeEmptied.replace("${title}",n.title);break;case"PROTECTED_UNRECYCLABLE":case"PROTECTED_UNPROTECTED":case"PROTECTED_UNRECYCLABLE_UNPROTECTED":e=t.message.mustBeEmpty.replace("${title}",n.title),i=t.message.aFewCannotBeDeleted;break;case"PROTECTED":e=t.message.cannotBeDeleted.replace("${title}",n.title)}return{text:e,description:i}})():(()=>{let e="";if("PROTECTED"===l)e=t.message.cannotBeDeleted.replace("${title}",n.title);else e=(0,o.f)(a,t.disabledMessage,s||(null==c?void 0:c.length)||0,{label:n.title});return{text:e,description:null}})();return(0,i.h)(i.F,null,u&&(0,i.h)("p",{innerHTML:u}),d&&(0,i.h)("p",null,d))},this.handlePostDeleteItems=async()=>{var e;0===(await u(null!==(e=this.user)&&void 0!==e?e:l.c.user,this.folder)).total?await this.handleDeleteFolder():this.arcgisDeleteFolderFail.emit(this.i18n.deleteProtectedItemsInFolder)},this.handleDeleteFolder=async()=>{var e;(await(async(e,t,n)=>{const i=`${(null!=n?n:t.user).userContentUrl}/${e.id}/delete`;return await(0,c.r)(i,{},{},"post")})(this.folder,this.portal,null!==(e=this.user)&&void 0!==e?e:l.c.user)).success&&this.arcgisDeleteFolderSuccess.emit(this.i18n.success.replace("${title}",this.folder.title))},this.portal=void 0,this.user=void 0,this.folder=void 0,this.active=!0,this.mode=void 0,this.items=void 0}async componentWillLoad(){var e,t;const n=await(0,s.g)(this.el);this.i18n=n[0],this.lang=n[1];const i=null!==(e=this.user)&&void 0!==e?e:l.c.user,o=null!==(t=this.portal)&&void 0!==t?t:l.c.portal;this.isEmpty=(await async function(e,t,n){return{result:0===(await d(e,t,n)).result}}(o,i,this.folder)).result,this.folderTotal=(await async function(e,t,n){return{result:(await d(e,t,n,r.H)).result}}(o,i,this.folder)).result,this.updateItems()}render(){var e;const{portal:t,user:n,active:l,i18n:o,folder:s,items:r,mode:a,isEmpty:c}=this;if(s)return c?(0,i.h)("calcite-modal",{widthScale:"s",open:l,kind:"danger",onCalciteModalClose:()=>this.arcgisDeleteFolderClose.emit()},(0,i.h)("div",{slot:"header"},o.deleteFolder),(0,i.h)("div",{slot:"content",innerHTML:o.message.empty.replace("${title}",s.title)}),(0,i.h)("calcite-button",{slot:"secondary",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},width:"full"},o.cancel),(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",kind:"danger","data-id":"nextButton",onClick:async()=>{await this.handleDeleteFolder(),this.active=!1},width:"full"},o.delete)):(0,i.h)("arcgis-delete-items",{items:r,portal:t,user:n,active:l,showSelectedItemsCount:!1,primaryBucket:"protectedItems",allowPermanentlyDeleteDeselect:!1,showConfirmDeleteMessage:"PROTECTED"===a&&(null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled),closeOnConfirm:!1,onArcgisDeleteItemsModeChange:e=>{this.mode=e.detail},onArcgisDeleteItemsClose:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},onArcgisDeleteItemsDelete:async()=>{await this.handlePostDeleteItems(),this.active=!1}},(0,i.h)("div",{slot:"header"},o.deleteFolder),(0,i.h)("div",{slot:"message"},this.renderMessage()))}get el(){return(0,i.a)(this)}}},50637:(e,t,n)=>{n.d(t,{a:()=>g,b:()=>b,c:()=>h,d:()=>p,f:()=>u,g:()=>v,i:()=>d,p:()=>y,r:()=>f});var i=n(59317),l=n(4429),o=n(931),s=n(87744);const r={},a={},c={};async function u(e,t,n,i){var l,o,s,u;const d=null===(o=null===(l=c[t])||void 0===l?void 0:l[n])||void 0===o?void 0:o.expireAt,h=!!d&&(new Date).getTime()>d;if((null===(s=r[t])||void 0===s?void 0:s[n])&&!h)return r[t][n];a[t]||(a[t]={}),a[t][n]&&!h||(a[t][n]=e());const v=await a[t][n];if(r[t]||(r[t]={}),c[t]||(c[t]={}),r[t][n]=v,i){const{expireAfter:e,getExpireAfterFromResult:l}=i,o=l||e?(new Date).getTime()+(null!==(u=null==l?void 0:l(v))&&void 0!==u?u:e):null;c[t][n]=Object.assign(Object.assign({},c[t][n]),{expireAt:o})}return v}function d(e,t){var n;return null===(n=null==r?void 0:r[e])||void 0===n?void 0:n[t]}const h=(e,t)=>{var n,i;t?(null===(n=r[e])||void 0===n||delete n[t],null===(i=a[e])||void 0===i||delete i[t]):(delete r[e],delete a[e])};function v(e){var t,n,l,o;return null!=e||(e=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(l=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===l?void 0:l.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}function p(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function m(e){var t;const{config:n}=i.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function g(e,t,n={},l){const[s]=await(0,o.l)(["esri/request"]),{api:r}=i.c;e.includes("f=")||t.append("f","json");const a=v();return a&&!t.has("token")&&t.append("token",a),new Promise(((i,o)=>{if(3===r){const r={url:!1===n.addSSL?e:m(e),form:t,timeout:n.timeout||0},a="post"===l?Object.assign({usePost:!0},n):n;s(r,a).then(i,o)}else s(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:l||"auto"})).then((e=>{i(e.data)})).catch((e=>o(e)))}))}async function f(e,t={},n={},l,s){const[r]=await(0,o.l)(["esri/request"]),{api:a,portal:c}=i.c,{customToken:u,addTokenManually:d,addSSL:h,useProxy:v}=n,p=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(p.f="json"),u)p.token=u;else if(!1!==d){const e=await b(c,a);e&&(p.token=e)}const g=!1===h?e:m(e);if(3===a){const e=Object.assign({url:g,content:p,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return r(e,"post"===l?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:p,method:l||"auto"},n),{timeout:n.timeout||0,useProxy:v}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await r(g,e)).data}}const w=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var i,o;const s=null!==(i=null==t?void 0:t.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],r=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let a=0;const c=async()=>{const i=await f(e,null==t?void 0:t.requestParams,{},n),o=i.status||i.jobStatus;if(s.includes(o))return await(0,l.t)((u=a++,1e3*w[u>-1&&u<w.length-1?u:w.length-1])),c();if(r.includes(o)||"failed"===o)return i;throw i;var u};try{return c()}catch(e){throw console.error(e),e}},b=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return v(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:l}=await u((()=>C(e,null!=t?t:null===i.c||void 0===i.c?void 0:i.c.api)),"platformSelf",null!==(n=p(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return l},C=async(e,t)=>{const n=await(async(e,t)=>{var n,i,l;const r=3===t,[a]=r?await(0,o.l)(["esri/IdentityManager"]):await(0,o.l)(["esri/identity/IdentityManager"]),c=await u((()=>a.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1})),"credential",p(e.user));return null!==(l=r?null===(n=c._oAuthCred)||void 0===n?void 0:n.appId:null===(i=c.oAuthState)||void 0===i?void 0:i.appId)&&void 0!==l?l:"arcgisonline"})(e,t),i={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return f(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?i:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:i}})}},64099:(e,t,n)=>{n.d(t,{a:()=>s,g:()=>c});var i=n(15332),l=n(81034),o=n(87849);function s(e){var t,n,o;const s=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,r=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(r)?l.l.get(r):l.l.has(r.slice(0,2))?l.l.get(r.slice(0,2)):"en"}const r={};function a(e,t){const n=`${e}${t}`;return r[n]||(r[n]=function(e,t){return new Promise(((n,i)=>{fetch((0,o.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):i()}),(()=>i()))}))}(e,t)),r[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),o=s(e),r=function(e){var t,n,o;const s=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,r=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(r)?l.l.get(r):l.l.has(r.slice(0,2))?r:"en"}(e);let c;try{c=await a(n,o)}catch(e){console.warn(`no locale for ${n} (${o}) loading default locale en.`),c=await a(n,"en")}return[c,o,r]}},81034:(e,t,n)=>{n.d(t,{C:()=>r,a:()=>a,b:()=>u,f:()=>d,g:()=>s,l:()=>o,s:()=>v});var i=n(931),l=n(15332);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,n){const i=(0,l.c)(e,`[${t}]`);return i?i.getAttribute(t):n}(e,"dir","ltr")}const r={rtl:"arcgis--rtl"};async function a(e,t){const{api:n,type:l,places:o}=t||{};if(4===n){const[t]=await(0,i.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:o,style:l,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:l}))}const[s]=await(0,i.l)(["dojo/number"]);return s.format(e,{type:l,places:o,pattern:null==t?void 0:t.pattern})}const c={};function u(e,t){let n=document.documentElement.lang;const i="bs"===n;if(i&&(n="hr"),t){const t=`${n}-full`,i={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,i)),c[t].format(e)}const l={year:"numeric",month:i?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,l)),c[n].format(e)}function d(e,t,n,i){const l=null!=e?e:"en";let o=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(l))&&(o=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(l)&&(o=t.multiple),v(o,Object.assign(Object.assign({},i),{number:n}))}const h=/\$\{([^}]+)\}/g;function v(e,t,n=h){let i=e;try{i=e.replace(n,((e,n)=>function(e,t){const n=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString()))}catch(e){console.error(e)}return i}},96295:(e,t,n)=>{n.d(t,{H:()=>i,R:()=>l});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',l="Indoors Map Configuration,Code Attachment"}}]);