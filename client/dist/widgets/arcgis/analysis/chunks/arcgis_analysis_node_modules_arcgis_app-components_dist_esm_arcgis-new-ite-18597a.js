/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-18597a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-18597a"],{13446:(e,t,i)=>{i.d(t,{a:()=>l,r:()=>r});var a=i(72257),n=i(3826),o=i(95878);function r(){n.d.reset(),a.a.reset()}const l=()=>{if(n.a.existingItem||"register"===o.u.workflow)return;n.d.reset();const e=a.i.folder;a.a.reset(),a.i.folder=e}},20699:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>u,c:()=>d,l:()=>p});var a=i(59317),n=i(72257),o=i(3826),r=i(95878);const l="new item",s="my content";function c(){const e=a.c.telemetry;null==e||e.startWorkflow("new item upload",{eventType:"workflow",category:"new item upload",details:o.a.type,pageName:s})}function d(){const{type:e,applicationType:t,customParameters:i,selectedLayerIdTracker:n}=o.a,c=a.c.telemetry,d=r.u.telemetryDetails;null==c||c.endWorkflow("new item upload",{details:e,pageName:s});const p={eventType:"other",pageName:s,category:l,label:l,details:d};"url"===d?(p.attribute=e,(null==i?void 0:i.length)>0&&(p.action="customParams"),"WMS"===e&&(p.count=null==n?void 0:n.count)):t&&(p.attribute=t),null==c||c.logEvent(p)}const p=()=>{const{telemetry:e}=a.c;null==e||e.logEvent({eventType:"other",pageName:"my content",category:"content page drag drop",label:"content"}),r.u.telemetryDetails="drag drop"};function u(){var e,t;const i=a.c.telemetry,{title:r,folder:l,categories:c,tags:d,snippet:p}=n.i,{initialTitle:u,initialFolders:m}=o.a,h=!l||l.title===l.id,g=!!m.map((e=>null==e?void 0:e.id)).find((e=>e===(null==l?void 0:l.id))),f={eventType:"other",pageName:s,category:"new item item info",label:r===u?"default title":"title changed",action:(null==p?void 0:p.length)>0?"summary":"no summary",count:null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0,number:null!==(t=null==c?void 0:c.length)&&void 0!==t?t:0};f.details=g?h?"root folder":"custom folder":"new folder",null==i||i.logEvent(f)}},51562:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_developer_credentials_generate_token_check:()=>g});var a=i(87849),n=i(95878),o=i(3826),r=i(72257),l=i(59317),s=i(20699),c=i(38295),d=i(43555),p=i(4429),u=i(13446),m=i(32710),h=i(87744);i(37762),i(86562),i(15332),i(50637),i(931),i(93814),i(51102),i(56175),i(50822),i(50020),i(15912),i(83929),i(76246),i(63054),i(24869),i(75294);const g=class{constructor(e){(0,a.r)(this,e),this.workflowComplete=(0,a.c)(this,"workflowComplete",7),this.workflowCancel=(0,a.c)(this,"workflowCancel",7),this.workflowCancelled=!1,this.handleRequest=async()=>{const{newItemMode:e,developerCredentialsType:t,apiToken1ExpirationDate:i}=o.a,{categories:a}=r.i,{portal:n}=l.c,{selectedOption:m}=this;let h,g;this.isLoading=!0;try{(0,s.a)(),({addResponse:h,publishResponse:g}=await this.handleAddItem());const r=[null==h?void 0:h.id,null==g?void 0:g.id].filter((e=>e));if(a&&await(0,c.u)({portal:n,itemIds:r,categories:a}),await(0,d.u)(null==h?void 0:h.id,{apiToken1ExpirationDate:i}),this.workflowCancelled)(null==g?void 0:g.id)&&await(0,d.d)(g.id,{permanentDelete:!0}),h.id&&await(0,d.d)(h.id,{permanentDelete:!0}),this.workflowCancel.emit();else{let i;(0,s.c)(),l.c.telemetry&&await(0,p.t)(750),i=Object.assign({id:null==h?void 0:h.id,item:Object.assign({},o.a),response:h,newItemMode:e,generateToken:"generateAPIKeyOption"===m,developerCredentialsType:t},g),this.workflowComplete.emit(i)}(0,u.r)()}catch(e){console.error(e),this.isLoading=!1,this.error=e}},this.error=void 0,this.isLoading=!1,this.selectedOption="generateAPIKeyOption"}async handleNext(){this.handleRequest()}componentWillLoad(){this.i18n=n.u.i18n.developerCredentialsGenerateTokenCheck}async handleAddItem(){let e;return e=await this.addDeveloperCredentialApplication(),{addResponse:e,publishResponse:undefined}}async addDeveloperCredentialApplication(){const{developerCredentialsRedirectUrls:e,applicationEnvironment:t,apiKeyReferrerUrls:i,developerCredentialsType:a,developerPrivileges:n,isPersonalAPIToken:r}=o.a;try{return(0,m.h)(o.a,(0,h.g)(l.c.portal),"oauth"===a?{appType:t,httpReferrers:i,redirect_uris:e,privileges:n}:Object.assign({httpReferrers:i,privileges:n},r&&{isPersonalAPIToken:r}))}catch(e){return console.error(e),this.isLoading=!1,void(this.error=e)}}render(){const{i18n:e,selectedOption:t,isLoading:i}=this,{breadcrumbs:r}=o.a,l=n.u.i18n.developerCredentialsSummary;return(0,a.h)(a.H,{key:"fcc8899c284828d6ab4968ce9d69c11bf61f0177"},(0,a.h)("arcgis-new-item-breadcrumbs",{key:"a7c0914be52440f96248c6b172d3e6bd9672d887",breadcrumbs:r}),(0,a.h)("arcgis-new-item-loader",{key:"23b93f0d82b3c2ec72b6f9e3e68800f9eebf58ef",active:i,text:e.registering}),(0,a.h)("p",{key:"567113e9ef1e211889793c88f62ffed3e033cd09",class:"title section"},e.generateAPIKey),(0,a.h)("div",{key:"38a50324bc62a7ab436617581c73ec3d401a8f31",class:"description section"},(0,a.h)("p",{key:"7b944b5256f6afa151fd348a42ae5a580770affb"},e.readyToGenerateAPIKey),(0,a.h)("p",{key:"f3ae6a45abb07675c4b77b078eb8429cb152db90"},e.readyToGenerateAPIKeyNotice)),(0,a.h)("div",{key:"911affec277cb63ff3ae3403e72ee99e3c008032",class:"options section"},["generateAPIKeyOption","goToItemDetailsOption"].map((i=>(0,a.h)("calcite-label",{layout:"inline"},(0,a.h)("calcite-radio-button",{checked:t===i,value:i,onCalciteRadioButtonChange:e=>this.selectedOption=e.target.value}),e.options[i])))),(0,a.h)("arcgis-new-item-alert",{key:"5c973f9180d8a13b79a6ec11250c27071b77282e",heading:l.errorTitle,description:l.errorDescription,active:!!this.error,onAlertDismiss:()=>this.error=null}))}};g.style=".title{margin-top:0px;font-weight:700}.description{font-size:1rem}.options{margin-top:0.75rem}.section{margin-bottom:0.75rem}"}}]);