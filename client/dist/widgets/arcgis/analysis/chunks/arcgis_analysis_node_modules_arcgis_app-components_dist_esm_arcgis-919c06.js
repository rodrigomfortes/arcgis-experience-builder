/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06"],{13446:(e,i,n)=>{n.d(i,{a:()=>s,r:()=>o});var l=n(72257),r=n(3826),t=n(95878);function o(){r.d.reset(),l.a.reset()}const s=()=>{if(r.a.existingItem||"register"===t.u.workflow)return;r.d.reset();const e=l.i.folder;l.a.reset(),l.i.folder=e}},24869:(e,i,n)=>{n.d(i,{a:()=>t,f:()=>a,g:()=>u,s:()=>o,v:()=>s});var l=n(15912),r=n(46227);function t(e,i){const n=/(?:\.([^.]+))?$/;let l=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),t=l&&n.exec(l)[1]?n.exec(l)[1].toLowerCase():"",o="";if((null==l?void 0:l.indexOf(".rft."))>-1){const[e,i]=l.split(".rft.");t=`rft.${i}`,o=e}return l&&!o&&(o=-1===l.lastIndexOf(".")?l:l.substring(0,l.lastIndexOf("."))),o=o.replace(/\.|-/g,"_"),i&&(o=function(e){return`${e}_${(0,r.g)()}`}(o),l=`${o}.${t}`),{title:o,fileName:l,extension:t}}function o(e,i){return t(e.name,!!i)}function s(e,i){let n=e;const l=e.lastIndexOf("\\");return l>-1&&(n=n.substring(l+1,n.length)),n.replace(/\ /g,"_")===i.replace(/\ /g,"_")}function u(e){return l.a[e]?l.a[e]:l.a[Object.keys(l.a).find((i=>l.a[i].type===e))]}function a(e){if(!e)return"0 B";const i=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,i))} ${["B","KB","MB","GB","TB"][i]}`}},33901:(e,i,n)=>{n.d(i,{r:()=>r});const l={fileName:/\$\{fileName\}/g,fileType:/\$\{type\}/g,typeList:/\$\{typeList\}/g,missingFields:/\$\{\missingFields\}/g},r=(e,i,n)=>{const r=new RegExp(l[n]);return null==e?void 0:e.replace(r,i)}},45768:(e,i,n)=>{n.d(i,{a:()=>u,f:()=>t,i:()=>s,m:()=>o});var l=n(4429),r=n(15912);function t(e,i){let n;n=i?i.map((e=>e.type)):Object.keys(r.a);let l=[];return n.forEach((i=>{var n;(null===(n=r.a[i].fileExt)||void 0===n?void 0:n.indexOf(e))>=0&&l.push(r.a[i])})),l}function o(e){return e?(0,l.b)(e.flatMap((e=>{var i;return null===(i=r.a[e])||void 0===i?void 0:i.fileExt})).filter((e=>!!e))):null}const s=e=>e/1024/1024>50,u=e=>e/1024/1024>20},46227:(e,i,n)=>{n.d(i,{g:()=>l});const l=()=>[2,1,1,1,3].map((e=>{let i="";for(let n=0;n<e;n++)i+=(65536*(1+Math.random())|0).toString(16).substring(1);return i})).join("-")},56175:(e,i,n)=>{n.d(i,{A:()=>O,B:()=>G,C:()=>p,D:()=>F,a:()=>s,b:()=>t,c:()=>o,d:()=>m,e:()=>w,f:()=>b,g:()=>y,h:()=>I,i:()=>v,j:()=>P,k:()=>$,l:()=>u,m:()=>S,n:()=>c,o:()=>d,p:()=>f,q:()=>L,r:()=>N,s:()=>a,t:()=>x,u:()=>k,v:()=>C,w:()=>_,x:()=>g,y:()=>h,z:()=>D});var l=n(50822);const r=e=>{var i,n,l;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==n?n:null===(l=null==e?void 0:e.sourceJSON)||void 0===l?void 0:l.id};function t(e){return e&&!e.orgId}function o(e,i){return(0,l.u)(e,i)||"update"===e.itemControl||(0,l.c)([e],i)&&b(i)}function s(e,i){const n=(0,l.c)([e],i),r=(0,l.u)(e,i)||b(i)&&n,t=y(i)&&T(i);return!!(r||n&&t)}const u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function v(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function p(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function f(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const m=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},g=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},h=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function b(e){return"org_admin"===r(e)||"account_admin"===r(e)}function w(e){return["org_admin","account_admin"].includes(r(e))&&!(null==e?void 0:e.roleId)}function y(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function P(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function I(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function S(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const T=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function x(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function _(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function $(e,i,n,l){const r=l&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(l.type),t=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!b(i)&&!t||!(null==n?void 0:n.isPortal)&&!r)}function F(e){return!!e&&(!y(e)||y(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const G=({items:e,user:i,portal:n})=>{const r=e[0],t=r.owner;if(n.isPortal&&t!==i.username&&t.includes("esri_")&&!["esri_livingatlas"].includes(t))return!1;const s=(0,l.u)(r,i),u=y(i),a=M(i),c=o(r,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!u&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||x(e)||k(e)||!!i.canSharePublic&&D(e)}(i,n)||M(i));return s||c||(0,l.c)(e,i)&&a};function M(e){return C(e)||_(e)||O(e)}const E=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function N(e){return e.some((e=>E.includes(e)))}function L(e){return e.filter((e=>E.includes(e)))}},63259:(e,i,n)=>{n.r(i),n.d(i,{arcgis_new_item_pages_home:()=>m});var l=n(87849),r=n(59317),t=n(24869),o=n(56175),s=n(43555),u=n(3826),a=n(95878),c=n(13446),d=n(15912),v=n(33901),p=n(45768),f=n(66111);n(37762),n(50822),n(93814),n(87744),n(50020),n(50637),n(931),n(72257),n(86562),n(15332),n(83929);const m=class{constructor(e){(0,l.r)(this,e),this.newItemUpdatePage=(0,l.c)(this,"newItemUpdatePage",7),this.allowedFileTypes=null,this.fileSelectHandler=async(e,i)=>{const{user:n,portal:l,config:{helpMap:o,helpBase:s},telemetry:c}=r.c,d=i?"your device":"drag drop",v={eventType:"new item click",pageName:"my content",category:"new item",label:d};null==c||c.logEvent(v),a.u.telemetryDetails=d,a.u.onlyHosted=!1;const{title:m,fileName:g,extension:h}=(0,t.s)(e);u.a.initialTitle=m,u.a.file=e,u.a.fileName=g,u.a.newItemMode="file",u.a.extension=h,u.a.selectedFields=void 0;const b=(0,p.f)(h),w="map"===a.u.workflow;if(1===b.length){const i=b[0].type;if("GeoJson"===i&&w&&!await(0,f.a)(n,i,l)&&(0,p.i)(e.size))return void(this.error={description:a.u.i18n.publishSelect.bigGeoJsonHintPublicAccount,linkText:a.u.i18n.common.learnMore,link:`${s}${o[120003923]}`});u.a.type=i,["Microsoft Excel","CSV","GeoJson"].includes(i)&&(u.a.id=null,u.a.analyzeResults=null,u.a.selectedFields=null,"GeoJson"!==i&&(u.a.selectedSheet=null)),u.a.tileLayerPublishType="3DTiles Package"===i?"3dTiles":void 0;const t=b[0].nextStep,c=["CSV","Microsoft Excel"];w&&!await(0,f.a)(n,i,l)&&c.includes(i)||"3DTiles Package"===i?(u.a.enablePublishing=!1,this.newItemUpdatePage.emit("publishSelect")):!await(0,f.a)(n,i,l)||!r.c.allowPublish&&"publishSelect"===t?(u.a.enablePublishing=!1,this.newItemUpdatePage.emit("itemProperties")):this.newItemUpdatePage.emit(t)}else"zip"===h&&(this.newItemUpdatePage.emit("zipSelect"),u.a.applicationFile=null)},this.managedFocus=!0,this.error=void 0}async componentWillLoad(){(0,c.a)();const{allowedItemTypes:e,user:i,portal:n}=r.c;if(e){const e=["CSV","GeoJson","KML"],l=[];await Promise.all(r.c.allowedItemTypes.map((async r=>{(!(0,d.i)(r)||e.includes(r))&&i&&(e.includes(r)||!(0,o.b)(i)&&await(0,f.a)(i,r,n))&&l.push(r)}))),this.allowedFileTypes=l;const t=a.u.i18n;this.browserHelpText=(0,v.r)(t.common.supportFileTypes,this.allowedFileTypes.map((e=>{var i;return null!==(i=t.itemTypeInfo.lowercaseDisplayName[e])&&void 0!==i?i:e})).join(", "),"typeList")}"map"!==a.u.workflow||u.a.existingItem||this.removeExistingFile()}onTransitionComplete(){var e;null===(e=this.fileBrowserRef)||void 0===e||e.focusMainInput()}async removeExistingFile(){const e=u.a.id;e&&(u.a.id=null,await(0,s.d)(e,{permanentDelete:!0}))}render(){const e="map"===a.u.workflow,{allowedFileTypes:i,error:n,fileSelectHandler:t}=this,{portal:o,config:s,user:c,userLicensedItems:d}=r.c;return(0,l.h)(l.H,{key:"b2fad9bbb17c2cd28f86ab3ec0ad485593f9a629"},r.c.allowedModes.includes("file")&&(0,l.h)("arcgis-file-browser",{key:"c31338b237677d3e86963987e243c4b8a45be0c1",ref:e=>this.fileBrowserRef=e,class:{"full-height":e},allowedExtensions:i?(0,p.m)(i):void 0,helpText:this.browserHelpText,fullHeight:e,portal:o,config:s,user:c,userLicensedItems:d,onCloudDriveConnected:e=>{var i;const n=e.detail,l={eventType:"new item click",pageName:"my content",category:"new item",label:n};null===(i=r.c.telemetry)||void 0===i||i.logEvent(l),a.u.telemetryDetails=n,u.a.cloudProvider=n,this.newItemUpdatePage.emit("cloud")},onFileSelect:({detail:{file:e,source:i}})=>{t(e,"local-device"===i)}}),!e&&(0,l.h)("arcgis-new-item-create-layers-list",{key:"b84da6be217e458ce500d0749e468e29c31d0872"}),(0,l.h)("arcgis-new-item-alert",{key:"622ed37af696d53e03e272961dc12b54a0ae8086",description:null==n?void 0:n.description,link:{href:null==n?void 0:n.link,title:null==n?void 0:n.linkText},active:!!n,onAlertDismiss:()=>this.error=null}))}}},66111:(e,i,n)=>{n.d(i,{A:()=>T,B:()=>N,a:()=>F,b:()=>b,c:()=>$,d:()=>v,e:()=>p,f:()=>P,g:()=>w,h:()=>f,i:()=>h,j:()=>I,k:()=>S,l:()=>D,m:()=>c,n:()=>_,o:()=>O,p:()=>d,q:()=>U,r:()=>G,s:()=>L,t:()=>C,u:()=>M,v:()=>H,w:()=>E,x:()=>B,y:()=>u,z:()=>x});var l=n(83929),r=n(87744),t=n(56175),o=n(59317),s=n(50637);async function u(){return new Promise((async e=>{const{portal:i}=o.c;if(null==i?void 0:i.isPortal){const n=i.helperServices.geocode,l=await function(e){const{config:i,portal:n}=o.c;return new Promise((async(l,r)=>{const t=e.filter((e=>a(e.url,n))).filter((e=>e.isEsriBatchGeocoder))[0];if(t){const e=t.url.split("/servers/")[1].split("/rest/services/")[0],n=`${i.restBaseUrl}/content/items/${e}`;try{l((await(0,s.r)(n)).url)}catch(e){r(e)}}else r("No world geocoder configured")}))}(n);e(l)}else{const n=function(e){const i=null==e?void 0:e.portalHostname;if(-1!==i.indexOf("dev"))return"dev";if(-1!==i.indexOf("qa"))return"qa";return""}(i);e(`https://geocode${n}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function a(e="",i){var n;const l=i.isPortal,r=e.toLowerCase(),t=r.indexOf("/geocodeserver")>-1&&r.indexOf("/rest/services/")>-1,o=l&&r.indexOf(null===(n=i.portalHostname)||void 0===n?void 0:n.toLowerCase())>-1,s=!l&&r.indexOf("utility")&&r.indexOf(".arcgis.com")>-1;return t&&(o||s)}function c(e){return(0,t.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,t.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,i){return!(0,t.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,l.i)(i,e)}const p=e=>!(0,t.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function f(e,i){return!(0,t.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,l.i)(i,e)}const m=async(e,i)=>{var n;return await f(e,i)&&(!i.isPortal||!!i.supports3DTilesServices||!!(null===(n=i.sourceJSON)||void 0===n?void 0:n.supports3DTilesServices))};function g(e){return!(0,t.b)(e)&&!0}function h(e){var i;return!(0,t.b)(e)&&(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishScenes"))}const b=e=>!(0,t.b)(e);function w(e,i,n){var l,r;const t=!!(null===(r=null===(l=i.helperServices)||void 0===l?void 0:l.rasterAnalytics)||void 0===r?void 0:r.url),o=function(e,i,n){var l;return(null===(l=null==e?void 0:e.privileges)||void 0===l?void 0:l.includes("portal:publisher:publishDynamicImagery"))&&(i.isPortal||y(n))}(e,i,n),s=i.isPortal?o:o||function(e,i,n){var l;return(null===(l=null==e?void 0:e.privileges)||void 0===l?void 0:l.includes("portal:publisher:publishTiledImagery"))&&!i.isPortal&&y(n)}(e,i,n);return t&&s}function y(e){return null==e?void 0:e.some((e=>{var i;return null===(i=e.entitlements)||void 0===i?void 0:i.some((e=>"image"===e.toLowerCase()))}))}async function P(e){var i;const{userLicensedItems:n}=await(0,s.r)(`${null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl}/community/self?returnUserLicensedItems=true`);return n}function I(e,i){var n,l;const o=null===(n=i.helperServices)||void 0===n?void 0:n.geocode.some((({url:e})=>a(e,i))),s=null!==(l=null==e?void 0:e.privileges)&&void 0!==l?l:[];return!(0,t.b)(e)&&o&&(!i.isPortal||!(0,r.i)(i)&&s.includes("portal:user:viewOrgItems")&&s.includes("portal:user:createItem"))}const S=e=>!(0,t.b)(e);function T(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function x(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function k(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((i=>{var n;return null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes(i)}))}function D(e,i,n){var l,r,o;return!(0,t.d)(n)&&((null==i?void 0:i.isPortal)?!!(null===(l=null==e?void 0:e.privileges)||void 0===l?void 0:l.includes("portal:publisher:registerDataStores")):k(e)&&("1"===(null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.level)||"2"===(null===(o=null==e?void 0:e.sourceJSON)||void 0===o?void 0:o.level)))}const _=(e,i,n)=>!i.isPortal&&!(0,t.b)(e)&&!(0,t.d)(n)&&k(e);function O(e){return!(0,t.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const C=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function $(e,i,n){return!i.isPortal&&await v(e,i)&&await async function(e,i,n){return!(0,t.b)(e)&&!!i.supportsHostedServices&&c(e)&&(await f(e,i)||await v(e,i)||h(e)||g(e)||w(e,i,n))}(e,i,n)}async function F(e,i,n){switch(i){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,n);case"Tile Package":return f(e,n);case"3DTiles Package":return m(e,n);case"Vector Tile Package":return g(e);case"Scene Package":return h(e);case"Service Definition":return async function(e,i){return await v(e,i)&&await f(e,i)}(e,n);default:return!0}}function G(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageCredits"))}function M(e,i){var n,l,r;return(0,t.f)(e)||G(e)||!!((null!==(n=null==e?void 0:e.assignedCredits)&&void 0!==n?n:null===(l=null==e?void 0:e.sourceJSON)||void 0===l?void 0:l.assignedCredits)>-1&&(null===(r=null==i?void 0:i.portalProperties)||void 0===r?void 0:r.showCreditsOnProfile))}const E=e=>!1;function N(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))}function L(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))}function U(e){return(0,t.e)(e)||L(e)&&function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewItems"))}(e)&&(function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:reassignItems"))}(e))}function B(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const H=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")}}]);