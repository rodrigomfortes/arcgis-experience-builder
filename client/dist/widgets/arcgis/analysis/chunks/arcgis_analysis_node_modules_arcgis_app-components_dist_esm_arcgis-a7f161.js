/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161"],{3826:(e,i,t)=>{t.d(i,{a:()=>n,b:()=>a,c:()=>l,d:()=>o});const o=(0,t(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=o.state,a=o.state,l=o.state},33483:(e,i,t)=>{t.d(i,{a:()=>a,g:()=>l});var o=t(50637),n=t(87744);const a=async e=>{try{return{result:await(0,o.r)(`${(0,n.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},l=async(e,i)=>await(0,o.f)((()=>a(e)),"subscriptionType",(0,o.d)(i))},44069:(e,i,t)=>{t.d(i,{A:()=>n,a:()=>a,b:()=>l,c:()=>s,d:()=>r,u:()=>o});const o=["esriFieldTypeOID","esriFieldTypeGlobalID"],n={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},a={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},l={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},r=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],s=["zip","csv","xls","xlsx"]},45768:(e,i,t)=>{t.d(i,{a:()=>s,f:()=>a,i:()=>r,m:()=>l});var o=t(4429),n=t(15912);function a(e,i){let t;t=i?i.map((e=>e.type)):Object.keys(n.a);let o=[];return t.forEach((i=>{var t;(null===(t=n.a[i].fileExt)||void 0===t?void 0:t.indexOf(e))>=0&&o.push(n.a[i])})),o}function l(e){return e?(0,o.b)(e.flatMap((e=>{var i;return null===(i=n.a[e])||void 0===i?void 0:i.fileExt})).filter((e=>!!e))):null}const r=e=>e/1024/1024>50,s=e=>e/1024/1024>20},50822:(e,i,t)=>{t.d(i,{a:()=>l,b:()=>a,c:()=>d,d:()=>c,e:()=>u,f:()=>p,g:()=>h,i:()=>r,u:()=>s});t(93814);var o=t(87744);function n(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function a(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function l(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function r(e,i){return e.owner===i.username}function s(e,i){return r(e,i)||function(e,i){var t;if(null!=e.isAdmin)return!!e.isAdmin;const o=e.owner,n="admin"===e.itemControl,a=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!r(e,i)&&n&&o.includes("esri_")&&!a.includes(o))return!1;return n}(e,i)}const d=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),c=(e,i)=>`${(0,o.a)(i)}item.html?id=${e}`,u=(e,i)=>`${(0,o.g)(i)}/content/users/${e}`,p=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{}),h=(e,i)=>`${(0,o.a)(i)}content/items/${e}`},52308:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_csv_location_fields:()=>v});var o=t(87849),n=t(33483),a=t(59317),l=t(81034),r=t(56175),s=t(86075),d=t(3826),c=t(95878),u=t(8214),p=t(45768),h=t(66111),y=t(52763);t(50637),t(931),t(93814),t(87744),t(37762),t(15332),t(50822),t(44069),t(15912),t(83929);const v=class{constructor(e){(0,o.r)(this,e),this.newItemUpdatePage=(0,o.c)(this,"newItemUpdatePage",7),this.workflowComplete=(0,o.c)(this,"workflowComplete",7),this.newItemToggleNavigationEnabled=(0,o.c)(this,"newItemToggleNavigationEnabled",7),this.newItemDisableCloseButtons=(0,o.c)(this,"newItemDisableCloseButtons",7),this.userHasAssignedCredits=!1,this.orgIsRestricted=!1,this.showTotalCredits=!1,this.isAppendWorkflow=!1,this.logCSVLocationFieldsChanges=()=>{const e=a.c.telemetry,i={eventType:"other",pageName:"my content",category:"new item csv location settings",label:this.currentLocationType};"address place names"===this.currentLocationType&&(this.displayEnrichLayerSettings?i.action="GeometryOnly"===this.selectedCandidateFieldsType?"enrich with some fields":"enrich with all fields":i.action="enrich with no fields",i.facetValue="Multiple"===this.selectedLocationFieldSelectionType?"multi":"single line address",i.details=this.initialLocator===d.a.geocodeServiceUrl?"default locator":"locator changed",i.attribute=this.initialRegion===d.a.sourceCountry?"default region":"region changed"),null==e||e.logEvent(i)},this.selectedLocationType="none",this.advancedExpanded=!1,this.selectedCandidateFieldsType="GeometryOnly",this.displayEnrichLayerSettings=!1,this.selectedLocationFieldSelectionType="Single",this.error=void 0,this.i18n=void 0}async handleNext(){var e;if((this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits())return this.error=this.i18n.errors.insufficientCredits,void(null===(e=this.estimate)||void 0===e||e.scrollIntoView());const i=this.validateFields();if(i)this.error=i;else{if(this.error=null,this.isAppendWorkflow&&("add"===d.a.addAppendSelectOption||"upsert"===d.a.addAppendSelectOption)&&"none"===d.a.locationType&&"esriGeometryPoint"===d.a.sourceDataLayer.geometryType)return void(this.error=this.i18n.errors.noLocationTypeForAppend);const e=d.a.analyzeResults,i=(0,u.e)(this.selectedLocationFieldSelectionType,this.isAppendWorkflow);if(d.a.analyzeResults=Object.assign(Object.assign({},e),{publishParameters:i}),this.isAppendWorkflow){const{name:e}=d.a.dataLayer;d.a.dataLayer=i,d.a.dataLayer.name=e}this.logCSVLocationFieldsChanges();let t="itemProperties";if(this.isAddToMapTerminalPage())this.workflowComplete.emit({type:d.a.type,url:encodeURI(d.a.url),customParameters:d.a.customParameters,results:{analyzeResults:d.a.analyzeResults,fields:d.a.selectedFields}});else{if(this.isAppendWorkflow){const e=(0,y.a)(d.a.type,d.a.dataLayer,d.a.sourceDataLayer);t="add"!==d.a.addAppendSelectOption||(e||d.a.backupLayerFields.some((e=>"esriFieldTypeDate"===e.type)))&&!this.isEnterprise?"appendKeyPairSelect":"appendMatchFields"}this.newItemUpdatePage.emit(t)}}}hasInsufficientCredits(){return"address"===this.selectedLocationType&&(0,u.i)(d.a.geocodeServiceUrl)&&d.a.geocodeCost&&d.a.geocodeCost.transactionCreditCost>d.a.geocodeCost.availableCredits}showUnrestrictedOrgCreditsNotice(){return!(this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits()}isAddToMapTerminalPage(){return"map"===c.u.workflow&&"url"===d.a.newItemMode&&!d.a.enablePublishing}async analyze(){var e;const{file:i,url:t,existingItem:o,id:n,cloudProviderResource:l,type:r}=d.a,{portal:c,user:u,config:h,lang:y}=a.c;return(0,s.a)({analyzeArgs:(o||l||(0,p.a)(null!==(e=null==i?void 0:i.size)&&void 0!==e?e:0))&&n?{type:"item",itemid:n}:i?{type:"file",file:i}:{type:"url",sourceUrl:t},itemArgs:{itemType:r},configArgs:{portal:c,user:u,config:h,lang:y}})}async componentWillLoad(){var e,i,t,o,l,p;const{analyzeResults:y,type:v,selectedSheet:g,standardizedFieldNames:m,enablePublishing:f,cloudProviderResource:T,geocodeServiceUrl:b}=d.a,{portal:F,user:w,lang:S}=a.c,C=(0,u.a)();this.isAppendWorkflow="append"===c.u.workflow;const{result:L}=await(0,n.g)(F,w);a.c.subscriptionInfo=L;const k=(0,r.i)(L);this.isDev=k,this.isLocationPlatform=(0,r.d)(L),this.orgIsRestricted="restricted"===(null==L?void 0:L.state),this.isEnterprise=F.isPortal;const x=this.isAppendWorkflow&&F.isPortal,O=null!==(i=4===a.c.api?null===(e=null==w?void 0:w.sourceJSON)||void 0===e?void 0:e.assignedCredits:null==w?void 0:w.assignedCredits)&&void 0!==i?i:0;this.userHasAssignedCredits=O>0,this.i18n=c.u.i18n.csvLocationFields,this.isAddToMapTerminalPage()&&(c.u.nextText="addToMap");let I=x?["coordinates","none"]:["coordinates","address","none","mgrs","usng"];const P=(0,h.o)(w)&&((0,h.t)(w)||!this.isLocationPlatform)&&d.a.geocodeServers&&("map"!==c.u.workflow||f);this.showTotalCredits=(0,h.u)(w,F);const{selectedLocationFieldSelectionType:A}=d.a;this.selectedLocationFieldSelectionType=null!=A?A:"Single";const G="map"===c.u.workflow&&!f;this.locationTypes=I.map((e=>({optionTitle:this.i18n.locationTypes[e].title,description:(this.isLocationPlatform||k)&&"address"===e?this.i18n.locationTypes.address.descriptionDeveloper:this.i18n.locationTypes[e].description.replace("${type}","googlesheets"===(null==T?void 0:T.cloudFileType)?"Google Sheet":v),value:e,badge:"address"!==e||a.c.portal.isPortal||k||r.d?null:{label:this.i18n.consumesCredits,icon:"credits"},icon:"none"===e?"table":"layer-points"}))).filter((({value:e})=>("address"!==e||P)&&("coordinates"===e||!G)));const z=null==y?void 0:y.publishParameters;if(z){const e="Microsoft Excel"===v?null!==(o=null===(t=null==z?void 0:z.layers)||void 0===t?void 0:t[g])&&void 0!==o?o:null===(l=null==z?void 0:z.layers)||void 0===l?void 0:l[0]:null==y?void 0:y.publishParameters;if((e.latitudeFieldName||e.longitudeFieldName)&&(this.selectedLocationType="coordinates",d.a.locationType="coordinates",d.a.coordinateFieldType="LatitudeAndLongitude"),"coordinates"===z.locationType&&z.coordinateFieldType)switch(d.a.locationType="coordinates",z.coordinateFieldType){case"MGRS":this.selectedLocationType="mgrs",d.a.coordinateFieldType="MGRS";break;case"USNG":this.selectedLocationType="usng",d.a.coordinateFieldType="USNG";break;default:this.selectedLocationType="coordinates",d.a.coordinateFieldType="LatitudeAndLongitude"}else"address"===e.locationType&&P&&(this.selectedLocationType="address",d.a.locationType="address");null!==(p=d.a.locationType)&&void 0!==p||(d.a.locationType="none")}if(1===this.locationTypes.length){const e=this.locationTypes[0].value;this.selectedLocationType=e,d.a.locationType="mgrs"===e||"usng"===e?"coordinates":e}P||"address"!==this.selectedLocationType||(this.selectedLocationType="coordinates",d.a.locationType="coordinates"),"address"!==this.selectedLocationType||C.addressFields||(d.a.locationType="address"),m||await(0,s.s)({geocodeServiceUrl:b,locationType:d.a.locationType,lang:S}),x&&(this.selectedLocationType="coordinates",d.a.locationType="coordinates"),this.initialLocator=d.a.geocodeServiceUrl,this.initialRegion=d.a.sourceCountry,this.setLocationTypeTelemetry(this.selectedLocationType)}validateFields(){const{standardizedFieldNames:e,selectedFields:i,backupLayerFields:t}=d.a,o=this.isAppendWorkflow?t:Object.values(i),n=!o.find((({locationType:i})=>{const t=(null==i?void 0:i.toLowerCase())===this.selectedLocationType.toLowerCase(),o=!!(null==e?void 0:e[i]);return t||o}));switch(this.selectedLocationType){case"usng":case"mgrs":if(n)return this.i18n.errors.noFieldSelected;break;case"address":if("Single"===this.selectedLocationFieldSelectionType&&n)return this.i18n.errors.noFieldSelected;if("Multiple"===this.selectedLocationFieldSelectionType){if(!o.find((e=>e.locationType&&"unknown"!==e.locationType)))return this.i18n.errors.noFieldSelected}break;case"coordinates":if(o.filter((({locationType:e})=>"latitude"===e||"longitude"===e)).length<2)return this.i18n.errors.coordinate}}async updateLocationType(e,i){if(this.selectedLocationType=e,"none"===e)return d.a.locationType="none",void(this.currentLocationType="none");switch(e){case"mgrs":d.a.coordinateFieldType="MGRS",d.a.locationType="coordinates";break;case"coordinates":d.a.coordinateFieldType="LatitudeAndLongitude",d.a.locationType="coordinates";break;case"usng":d.a.coordinateFieldType="USNG",d.a.locationType="coordinates";break;case"address":d.a.locationType="address"}i&&await this.analyze(),this.setLocationTypeTelemetry(e)}setLocationTypeTelemetry(e){switch(e){case"mgrs":this.currentLocationType="mgrs coordinates";break;case"coordinates":this.currentLocationType="lat lon";break;case"usng":this.currentLocationType="usng coordinates";break;case"address":this.currentLocationType="address place names";break;case"none":this.currentLocationType="none"}}async updateGeocodeServer(e){d.a.geocodeServiceUrl=e,await this.analyze()}async updateRegion(e){d.a.sourceCountry=e,await this.analyze()}handleEnrichLayerSwitchChange(e){const i=e.target.checked;this.displayEnrichLayerSettings=i,this.updateCandidateFields(i?"Minimal":"GeometryOnly")}updateCandidateFields(e){this.selectedCandidateFieldsType=e,d.a.candidateFieldsType=e}renderLocationFields(){const{standardizedFieldNames:e}=d.a,i={address:e,coordinates:{latitude:this.i18n.latitude,longitude:this.i18n.longitude},mgrs:{mgrs:"MGRS"},usng:{usng:"USNG"}}[this.selectedLocationType];if("Single"===this.selectedLocationFieldSelectionType&&"address"===this.selectedLocationType&&i){const e=Object.keys(i)[0];return(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},i[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,i[e])))}return i&&Object.keys(i).map((e=>(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},i[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,i[e])))))}updateFieldLocationType(e,i){(this.isAppendWorkflow?d.a.backupLayerFields:Object.values(d.a.selectedFields)).forEach((t=>{t.name===e?t.locationType=i:t.locationType===i&&(t.locationType="unknown")}))}handleLocationFieldSelectionChange(e){this.selectedLocationFieldSelectionType=e,d.a.selectedLocationFieldSelectionType=e}renderFieldSelect(e,i){const t=this.isAppendWorkflow?d.a.backupLayerFields:d.a.selectedFields,n=Object.keys(t).map((e=>t[e])),a=!n.some((i=>i.locationType===e));return(0,o.h)("calcite-select",{label:i,role:"cell",onCalciteSelectChange:i=>this.updateFieldLocationType(i.currentTarget.selectedOption.value,e)},(0,o.h)("calcite-option",{value:"unknown",selected:a},this.i18n.unknown),n.map((i=>(0,o.h)("calcite-option",{value:i.name,selected:i.locationType===e},i.alias||i.name))))}render(){var e,i,t,n,r;const{geocodeServiceUrl:s,geocodeServers:p,geocodeCost:h,sourceCountry:y,countryCodes:v,backupLayerFields:g}=d.a,{isDev:m,isLocationPlatform:f}=this;if(!g)return;const{config:T}=a.c,b=null!==(i=null===(e=(0,u.a)())||void 0===e?void 0:e.estimatedRecordCount)&&void 0!==i?i:0,{helpMap:F,helpBase:w}=T,S=(0,l.g)(this.el);return(0,o.h)("div",{class:"wrapper"},(0,o.h)("arcgis-select",{class:"label--top",selectedOption:this.selectedLocationType,options:this.locationTypes,label:this.i18n.locationSettings,labelDescription:this.i18n.locationSettingsDescription,onArcgisOptionChange:e=>this.updateLocationType(e.detail,!0)}),"none"!==this.selectedLocationType&&(0,o.h)("div",null,"address"===this.selectedLocationType&&(0,o.h)("div",{class:"advanced"},(0,o.h)("button",{class:"advanced__toggle","aria-expanded":this.advancedExpanded.toString(),"aria-controls":"advanced__content",onClick:()=>this.advancedExpanded=!this.advancedExpanded},(0,o.h)("calcite-icon",{icon:"chevron-up",scale:"s",class:{advanced__icon:!0,[l.C.rtl]:"rtl"===S,"advanced__icon--open":this.advancedExpanded}}),this.i18n.advancedSettings),this.advancedExpanded&&(0,o.h)("div",{class:"advanced__content",id:"advanced__content"},(0,o.h)("div",{class:"two-up"},(0,o.h)("calcite-label",{class:"column"},this.i18n.locator,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateGeocodeServer(e.currentTarget.selectedOption.value)},null==p?void 0:p.map((e=>(0,o.h)("calcite-option",{value:e.url,selected:e.url===s},e.name))))),(0,o.h)("calcite-label",{class:"column"},this.i18n.region,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateRegion(e.currentTarget.selectedOption.value)},null==v?void 0:v.map((e=>(0,o.h)("calcite-option",{value:e.value,selected:e.value.toLowerCase()===y.toLowerCase()},this.i18n.countryCodes[e.value.toUpperCase()]||e.label)))))),!a.c.portal.isPortal&&!this.isAppendWorkflow&&(0,o.h)("div",{class:"enrich-layer-container"},(0,o.h)("calcite-label",{layout:"inline-space-between"},(0,o.h)("span",{class:"enrich-title"},this.i18n.enrich,(0,o.h)("arcgis-information",{label:null===(t=c.u.i18n)||void 0===t?void 0:t.moreInfo,placement:"top-start",paddedContent:!0,onClick:e=>{var i,t;e.stopPropagation(),null===(t=(i=e.target).togglePopover)||void 0===t||t.call(i)}},(0,o.h)("p",{class:"enrich-description"},this.i18n.enrichLayerDescription),(0,o.h)("calcite-link",{target:"_blank",href:`${w}${F[120002541]}`},this.i18n.enrichLayerLink))),(0,o.h)("calcite-switch",{checked:this.displayEnrichLayerSettings,onCalciteSwitchChange:this.handleEnrichLayerSwitchChange.bind(this)})),this.displayEnrichLayerSettings?(0,o.h)("calcite-radio-button-group",{layout:"vertical",name:"enrich-group",onCalciteRadioButtonGroupChange:e=>this.updateCandidateFields(e.currentTarget.selectedItem.value)},["Minimal","AllFields"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedCandidateFieldsType===e,value:e}),(0,o.h)("span",{class:"enrich-radio-text"},this.i18n.candidateFieldsTypes[e].description))))):null))),(0,o.h)("h3",{class:"header"},this.i18n.locationFields," ",(0,o.h)("span",{class:"asterisk"},"*")),"address"===this.selectedLocationType?(0,o.h)("calcite-radio-button-group",{name:"location-field-selection-group",layout:"vertical",onCalciteRadioButtonGroupChange:e=>this.handleLocationFieldSelectionChange(e.currentTarget.selectedItem.value)},["Single","Multiple"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedLocationFieldSelectionType===e,value:e}),this.i18n["Single"===e?"locationFieldSingle":"locationFieldMultiple"])))):null,(0,o.h)("div",{role:"table",class:"table"},(0,o.h)("div",{class:"row row--header",role:"row"},(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.locationType),(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.field)),this.renderLocationFields())),"address"===this.selectedLocationType&&h&&!a.c.portal.isPortal&&(0,u.i)(s)&&(0,o.h)(o.F,null,m?(0,o.h)("div",null,(0,o.h)("calcite-notice",{scale:"m",width:"full",open:!0,icon:"information"},(0,o.h)("div",{slot:"message"},this.i18n.recordCount.replace("${num}",`${b}`)))):f?null:(0,o.h)("arcgis-credit-estimate",{transactionCreditCost:h.transactionCreditCost,availableCredits:h.availableCredits,showTotal:this.showTotalCredits,class:"credit-estimate",api:a.c.api,ref:e=>this.estimate=e}),this.showUnrestrictedOrgCreditsNotice()&&(0,o.h)("calcite-notice",{class:"notice",kind:"brand",icon:"information",open:!0},(0,o.h)("div",{slot:"title"},this.i18n.unrestrictedOrgCredits.title),(0,o.h)("div",{slot:"message"},this.i18n.unrestrictedOrgCredits.description))),(0,o.h)("arcgis-new-item-alert",{heading:null===(n=this.error)||void 0===n?void 0:n.title,description:null===(r=this.error)||void 0===r?void 0:r.description,active:!!this.error,onAlertDismiss:()=>this.error=null}))}get el(){return(0,o.a)(this)}};v.style=".wrapper{padding-bottom:2rem}.table{margin-bottom:1.5rem}.row{display:flex;align-items:center;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;box-shadow:0px -1px 0px #eaeaea}.row--header{box-shadow:none}.cell{box-sizing:border-box;width:50%;padding:0.5rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1)}.cell--header{font-weight:400}.advanced{margin-top:1rem;margin-bottom:2rem;background-color:var(--calcite-color-foreground-2)}.advanced__toggle{margin:0px;box-sizing:border-box;display:flex;width:100%;cursor:pointer;align-items:center;border-radius:0;border-style:none;padding:1.25rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-2);background-color:transparent;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.advanced__toggle:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.advanced__icon{margin-inline-end:1rem;transform:rotate(90deg);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.arcgis--rtl{transform:rotate(-90deg)}.advanced__icon--open{transform:rotate(180deg)}.advanced__content{padding-left:1.25rem;padding-right:1.25rem;padding-top:0.5rem;padding-bottom:0.5rem}.two-up{margin-bottom:0.75rem;display:flex;justify-content:space-between}.column{width:calc(50% - 6px)}.header{margin:0px;margin-bottom:0.5rem;padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.description{margin:0px;margin-bottom:1.5rem;padding:0px;font-size:1rem;color:var(--calcite-color-text-3)}.enrich-layer-container{background-color:var(--calcite-color-foreground-1);border:1px solid var(--calcite-color-border-input);padding:15px 15px 0px 15px}.enrich-switch{display:flex;justify-content:space-between}.enrich-title{display:flex;color:var(--calcite-color-text-1)}.enrich-radio-text{color:var(--calcite-color-text-3)}.radio{margin-bottom:0.75rem}.asterisk{color:var(--calcite-color-status-danger)}.notice{margin-top:0.5rem}.loader-overlay{overflow:hidden}.enrich-description{margin-bottom:0.75rem;margin-top:0px}"},52763:(e,i,t)=>{t.d(i,{a:()=>c,c:()=>s,g:()=>d,h:()=>u});var o=t(3826),n=t(8214),a=t(15912),l=t(95878),r=function(e,i){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)i.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]])}return t};function s(e,i){var t;const o=(null==e?void 0:e.type)||null,n=(null==i?void 0:i.type)||null;return n&&(n===o||(null===(t={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeDate","esriFieldTypeGUID","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeBigInteger"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDateOnly:["esriFieldTypeDateOnly"],esriFieldTypeTimeOnly:["esriFieldTypeTimeOnly"],esriFieldTypeTimestampOffset:["esriFieldTypeTimestampOffset"],esriFieldTypeBigInteger:["esriFieldTypeBigInteger"]}[o])||void 0===t?void 0:t.includes(n)))}function d(e){var i;const{timezone:t,analyzeResults:s,type:d,fieldMappings:c,dataLayer:u,id:p,portal:h,uidPair:y,addAppendSelectOption:v,sourceDataLayer:g,attachmentsEnabled:m,insertAttachmentsEnabled:f,featureAttachmentOption:T}=e;let b,F;const{publishParameters:w}=s,S=r(s,["publishParameters"]),C="upsert"===v||"update"===v,L=function(e){const i=e.filter((e=>e.source!==`<${l.u.i18n.appendKeyValuePair.noneField}>`)),t=i.map((({source:e,name:i})=>({source:e,name:i})));return t}(c),k=function(e){const i=e.map((e=>e.name));return i}(L),x={dateFieldsTimeReference:Object.assign(Object.assign({},(null==h?void 0:h.isPortal)?{timezone:t||"UTC"}:{ianaTimeZone:t||"GMT"}),{respectsDaylightSaving:!0})},O={sourceTableName:u.name,fieldMappings:(null==L?void 0:L.length)?JSON.stringify(L):null,upsert:C,skipInserts:"update"===v,skipUpdates:!1,useGlobalIds:C&&"esriFieldTypeGlobalID"===(null==y?void 0:y.type),updateGeometry:!C||"attributeAndGeometry"===o.a.addAppendSelectUpdateTypeOption,appendFields:k.length?JSON.stringify(k):null,appendItemId:p,appendUploadFormat:a.a[o.a.type].appendUploadFormat,rollbackOnFailure:!0};"Table"===g.type&&(w.locationType="none");const I=r(w,["layers"]);if("CSV"===d)w.layerInfo.dateFieldsTimeReference=x.dateFieldsTimeReference,F=Object.assign(Object.assign(Object.assign({},x),w),S);else if("Microsoft Excel"===d){const e=function(e,i){const t=Object.assign({},e);t.locationType=(null==i?void 0:i.locationType)||e.locationType,"address"===t.locationType?(t.addressFields=i.addressFields,t.sourceCountry=i.sourceCountry):"coordinates"===t.locationType&&(t.coordinateFieldType=i.coordinateFieldType,"LatitudeAndLongitude"===t.coordinateFieldType?(t.latitudeFieldName=i.latitudeFieldName,t.longitudeFieldName=i.longitudeFieldName):t.coordinateFieldName=i.coordinateFieldName);return t}((0,n.a)({},!0),I);e.dateFieldsTimeReference=x.dateFieldsTimeReference,I.name=u.name,F=Object.assign(Object.assign(Object.assign(Object.assign({},x),{layers:[e]}),I),S)}else F=Object.assign(Object.assign(Object.assign({},x),w),S);return b=Object.assign(Object.assign(Object.assign({},O),{appendSourceInfo:JSON.stringify(F)}),m&&function({insertAttachmentsEnabled:e}){return e?{skipAttachmentInserts:!1,skipAttachmentUpdates:!0,skipAttachmentDeletes:!0}:{skipAttachmentInserts:!0,skipAttachmentUpdates:!0,skipAttachmentDeletes:!0}}({appendType:v,insertAttachmentsEnabled:f,featureAttachmentOption:T})),"add"===v?b.upsertMatchingField=g.objectIdField||(null===(i=g.uniqueField)||void 0===i?void 0:i.name):C&&(null==y?void 0:y.isUniqueIndex)&&(b.upsertMatchingField=null==y?void 0:y.name),b}function c(e,i,t){return"File Geodatabase"===e&&t.hasAttachments&&i.hasAttachments}function u(e,i){const t=i.appendErrorMessages;let o=l.u.i18n.error,n=t.appendError;switch(e.code){case"invalidUniqueIdentifier":o=t.invalidUniqueIdentifier.title,n=t.invalidUniqueIdentifier.description;break;case"cannotAddNullData":o=t.cannotAddNullData.title,n=t.cannotAddNullData.description;break;case"exceededMaxFieldLength":o=t.exceededMaxFieldLength.title,n=t.exceededMaxFieldLength.description;break;case"invalidFieldType":o=t.invalidFieldType.title,n=t.invalidFieldType.description}return{title:o,description:n}}},56175:(e,i,t)=>{t.d(i,{A:()=>I,B:()=>z,C:()=>h,D:()=>G,a:()=>r,b:()=>a,c:()=>l,d:()=>v,e:()=>T,f:()=>f,g:()=>b,h:()=>w,i:()=>p,j:()=>F,k:()=>A,l:()=>s,m:()=>S,n:()=>c,o:()=>u,p:()=>y,q:()=>U,r:()=>N,s:()=>d,t:()=>L,u:()=>k,v:()=>P,w:()=>O,x:()=>g,y:()=>m,z:()=>x});var o=t(50822);const n=e=>{var i,t,o;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==t?t:null===(o=null==e?void 0:e.sourceJSON)||void 0===o?void 0:o.id};function a(e){return e&&!e.orgId}function l(e,i){return(0,o.u)(e,i)||"update"===e.itemControl||(0,o.c)([e],i)&&f(i)}function r(e,i){const t=(0,o.c)([e],i),n=(0,o.u)(e,i)||f(i)&&t,a=b(i)&&C(i);return!!(n||t&&a)}const s=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function p(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function h(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function y(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const v=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},g=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},m=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function f(e){return"org_admin"===n(e)||"account_admin"===n(e)}function T(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function b(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function F(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function w(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function S(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const C=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function L(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function x(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function A(e,i,t,o){const n=o&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(o.type),a=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!f(i)&&!a||!(null==t?void 0:t.isPortal)&&!n)}function G(e){return!!e&&(!b(e)||b(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const z=({items:e,user:i,portal:t})=>{const n=e[0],a=n.owner;if(t.isPortal&&a!==i.username&&a.includes("esri_")&&!["esri_livingatlas"].includes(a))return!1;const r=(0,o.u)(n,i),s=b(i),d=D(i),c=l(n,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!s&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||L(e)||k(e)||!!i.canSharePublic&&x(e)}(i,t)||D(i));return r||c||(0,o.c)(e,i)&&d};function D(e){return P(e)||O(e)||I(e)}const j=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function N(e){return e.some((e=>j.includes(e)))}function U(e){return e.filter((e=>j.includes(e)))}},81034:(e,i,t)=>{t.d(i,{C:()=>r,a:()=>s,b:()=>c,f:()=>u,g:()=>l,l:()=>a,s:()=>h});var o=t(931),n=t(15332);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,i,t){const o=(0,n.c)(e,`[${i}]`);return o?o.getAttribute(i):t}(e,"dir","ltr")}const r={rtl:"arcgis--rtl"};async function s(e,i){const{api:t,type:n,places:a}=i||{};if(4===t){const[i]=await(0,o.l)(["esri/intl"]),t=i.convertNumberFormatToIntlOptions({places:a,style:n,digitSeparator:!0});return i.formatNumber(e,Object.assign(Object.assign({},t),{style:n}))}const[l]=await(0,o.l)(["dojo/number"]);return l.format(e,{type:n,places:a,pattern:null==i?void 0:i.pattern})}const d={};function c(e,i){let t=document.documentElement.lang;const o="bs"===t;if(o&&(t="hr"),i){const i=`${t}-full`,o={dateStyle:"full",timeStyle:"long"};return d[i]||(d[i]=new Intl.DateTimeFormat(t,o)),d[i].format(e)}const n={year:"numeric",month:o?"numeric":"short",day:"numeric"};return d[t]||(d[t]=new Intl.DateTimeFormat(t,n)),d[t].format(e)}function u(e,i,t,o){const n=null!=e?e:"en";let a=i.unknown;return(1===t||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(n))&&(a=i.single),1!==t&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(n)&&(a=i.multiple),h(a,Object.assign(Object.assign({},o),{number:t}))}const p=/\$\{([^}]+)\}/g;function h(e,i,t=p){let o=e;try{o=e.replace(t,((e,t)=>function(e,i){const t=e.split(".").reduce(((e,i)=>e[i]),i);return"string"==typeof t||"number"==typeof t?t:e}(t,i).toString()))}catch(e){console.error(e)}return o}},84135:(e,i,t)=>{function o(e){return null!=e}t.d(i,{i:()=>o})},86075:(e,i,t)=>{t.d(i,{a:()=>p,g:()=>u,s:()=>h});var o=t(84135),n=t(3826),a=t(44069),l=t(8214),r=t(66111),s=t(87744),d=t(50637);function c(e,i,t,o){var n,a,l,r;const s=null!==(n=i.latitudeFieldName)&&void 0!==n?n:t.latitudeFieldName,d=null!==(a=i.longitudeFieldName)&&void 0!==a?a:t.longitudeFieldName,c=null!==(l=i.coordinateFieldName)&&void 0!==l?l:t.coordinateFieldName,u=null!==(r=i.coordinateFieldType)&&void 0!==r?r:t.coordinateFieldType;return o[e.name]?o[e.name]:e.name===c?null==u?void 0:u.toLowerCase():e.name===s?"latitude":e.name===d?"longitude":e.locationType||"unknown"}const u=(e,i)=>{if(!i)return e;const{layers:t,tables:o}=i;return"Map Service"===e&&!(null==t?void 0:t.length)&&(null==o?void 0:o.length)?"Feature Service":e};async function p({analyzeArgs:e,configArgs:i,itemArgs:t,initialize:u}){var p,v,g,m;const{config:f,lang:T,portal:b,user:F}=i,{itemType:w,ignoreV2FieldTypesVersion:S}=t;if(u&&(0,r.o)(F)){const e=(0,l.b)(null!==(v=null===(p=b.helperServices)||void 0===p?void 0:p.geocode)&&void 0!==v?v:[],F,b.isPortal);if(e&&(n.a.allowGeocode=e.allowGeocode,n.a.isAgoWorldGeocodeServer=e.isAgoWorldGeocodeServer,n.a.isServiceProxyAgoWorldGeocodeServer=e.isServiceProxyAgoWorldGeocodeServer,n.a.isWorldGeocodeServer=e.isWorldGeocodeServer,n.a.geocodeServers=e.geocodeServers,n.a.geocodeServiceUrl=e.geocodeServiceUrl),n.a.geocodeServers){n.a.sourceCountry=(0,l.d)(F.region,b.ipCntryCode);try{n.a.countryCodes=await async function(e,i,t){const o=(0,l.f)(e,t);let n;if(null==o?void 0:o.itemId){const e=`${i}/content/items/${o.itemId}`,t=await(0,d.r)(e),a=t.proxyFilter&&JSON.parse(t.proxyFilter).sourceCountry;a&&(n=a.split(",").map((e=>e.toLowerCase())),n.push("world"))}return Object.keys(l.c).map((e=>({label:l.c[e],value:e}))).filter((({value:e})=>!n||n.includes(e.toLowerCase()))).sort(((e,i)=>e.label<i.label?-1:e.label>i.label?1:0))}(n.a.geocodeServiceUrl,f.restBaseUrl,n.a.geocodeServers),n.a.standardizedFieldNames=await y(n.a.geocodeServiceUrl,T)}catch(e){return console.error("Geocoder unavailable",e),{error:{code:"unavailableGeocoder"}}}}}const{locationType:C,isWorldGeocodeServer:L,geocodeServiceUrl:k,geocodeServers:x,isServiceProxyAgoWorldGeocodeServer:O,sourceCountry:I,analyzeResults:P,analyzedLocationTypes:A}=n.a,G=`${f.restBaseUrl}content/features/analyze`,{isPortal:z}=b;let D,j=!1;"item"===(null==e?void 0:e.type)&&"append"===e.workflow?(D=a.a[w],j=!0):D="Microsoft Excel"===w?"excel":w.toLowerCase();const N="file"===(null==e?void 0:e.type)&&e.analyze3DData;let U={filetype:D};switch(null==e?void 0:e.type){case"url":U.sourceUrl=e.sourceUrl;break;case"item":U.itemid=e.itemid;break;case"file":U=new FormData,U.append("file",e.file),U.append("filetype",N&&"File Geodatabase"===t.itemType?"fileGeodatabase":D);break;case"text":U.text=e.text}if(!N)if(z&&k||!z){const e={enableGlobalGeocoding:!0,sourceLocale:T,locationType:C,returnEstimatedRowCount:!0,returnSize:!0};if(S||(e.fieldTypesVersion="V2"),(z||!z&&(null==x?void 0:x.length))&&(e.geocodeServiceUrl=encodeURI(k)),P||z){const i="address"===C?"addressTypes":"locationTypes";-1===A.indexOf(i)&&A.push(i),e.locationType=C||"coordinates"}(!b.isPortal&&L||b.isPortal&&O)&&(e.sourceCountryHint=P?"":I.toLowerCase(),e.sourceCountry=P?I.toLowerCase():"");const i=JSON.stringify(e);U instanceof FormData?U.append("analyzeParameters",i):U.analyzeParameters=i}else S||(U instanceof FormData?U.append("analyzeParameters",JSON.stringify({fieldTypesVersion:"V2"})):U.analyzeParameters=JSON.stringify({fieldTypesVersion:"V2"}));try{const e=await(U instanceof FormData?(0,d.a)(G,U,{},"post"):(0,d.r)(G,U,{},"post"));if(N){if(!function(e){var i;const t=null==e?void 0:e.publishParameters,o=null===(i=null==t?void 0:t.layers)||void 0===i?void 0:i[0],n=null==o?void 0:o.infoFor3D,a="esriGeometryMultiPatch"===(null==o?void 0:o.geometryType);return n&&a}(e))return{error:{code:"invalid3DObjectFeatureClass"}}}else!async function({response:e,analyzeSelectedLayer:i,initialize:t,geocodeServiceUrl:a,lang:r,portal:u,itemType:p}){var y,v,g,m,f,T;const b=n.a,F=u.isPortal,w="Microsoft Excel"===p,S=w?null!==(v=null===(y=e.publishParameters.layers)||void 0===y?void 0:y[b.selectedSheet])&&void 0!==v?v:null===(g=e.publishParameters.layers)||void 0===g?void 0:g[0]:e.publishParameters;let C;if(!F&&b.isWorldGeocodeServer||F&&b.isServiceProxyAgoWorldGeocodeServer){const e=(0,o.i)(S.sourceCountry);C=b.sourceCountry||S.sourceCountry||"world",C="wo"===C?"world":C,n.a.isWorldGeocodeServer=e,n.a.sourceCountry=C}b.allowGeocode||"address"!==S.locationType||(n.a.locationType="none");!function(e){var i,t,o,a,l,r;const{selectedSheet:s}=n.a,{publishParameters:d}=e,u=null!==(a=null!==(t=null===(i=d.layers)||void 0===i?void 0:i[s])&&void 0!==t?t:null===(o=d.layers)||void 0===o?void 0:o[0])&&void 0!==a?a:d.layerInfo;if(!u)return e;const p=null!==(r=null!==(l=u.addressFields)&&void 0!==l?l:d.addressFields)&&void 0!==r?r:{},h=Object.keys(p).reduce(((e,i)=>Object.assign(Object.assign({},e),{[p[i]]:i})),{});u.fields=u.fields.map((e=>Object.assign(Object.assign({},e),{locationType:c(e,u,d,h)}))),n.a.selectedFields&&(n.a.selectedFields=Object.keys(n.a.selectedFields).reduce(((e,i)=>{const t=n.a.selectedFields[i];return e[i]=Object.assign(Object.assign({},t),{locationType:c(t,u,d,h)}),e}),{}))}(e);const L=function(e){return function(e,i){var t,o,n,a;const{selectedFields:l,type:r,selectedSheet:s}=i;if(!l)return e;const d=e.publishParameters;let c=null==d?void 0:d.layerInfo;switch(r){case"Microsoft Excel":c=null!==(o=null===(t=null==d?void 0:d.layers)||void 0===t?void 0:t[s])&&void 0!==o?o:null===(n=null==d?void 0:d.layers)||void 0===n?void 0:n[0];break;case"GeoJson":c=null===(a=null==d?void 0:d.layers)||void 0===a?void 0:a[0]}return c.fields=c.fields.reduce(((e,i)=>{const t=l[i.name];return t&&(i.alias=t.alias,e.push(i)),e}),[]),e}(e,n.a)}(e);n.a.analyzeResults=L,(null===(m=null==L?void 0:L.publishParameters)||void 0===m?void 0:m.layers)&&(n.a.excelLayers=null===(f=null==L?void 0:L.publishParameters)||void 0===f?void 0:f.layers);const k=(0,l.a)(e,i);t?n.a.backupLayerFields=JSON.parse(JSON.stringify(k.fields)):S.standardizedFieldNames?n.a.standardizedFieldNames=S.standardizedFieldNames:h({lang:r,geocodeServiceUrl:a,locationType:n.a.locationType});"address"===n.a.locationType||"address"===k.locationType||"address"===(null===(T=null==e?void 0:e.publishParameters)||void 0===T?void 0:T.locationType)?n.a.geocodeCost=await(x=k.estimatedRecordCount,(0,d.r)(`${(0,s.g)()}portals/self/cost`,{geocodeCount:x})):n.a.geocodeCost=null;var x}({response:e,initialize:u,analyzeSelectedLayer:j,geocodeServiceUrl:k,lang:T,portal:b,itemType:w});return{}}catch(e){console.error(e);const i=(null==e?void 0:e.message)||e||"";switch(!0){case i.includes("specify data to be analyzed"):return{error:{code:"emptyFile"}};case i.includes("duplicate field names are not allowed"):return{error:{code:"duplicateFieldNames"}};case i.toLowerCase().includes("timeout"):return{error:{code:"timeout"}};case i.toLowerCase().includes("unable to analyze"):if(null===(m=null===(g=null==e?void 0:e.details)||void 0===g?void 0:g.messages[0])||void 0===m?void 0:m.toLowerCase().includes("file exceeds the max size allowed of 10mb."))return{error:{code:"exceedsFileSize"}};case i.toLowerCase().includes("error in analyzing filegeodatabase"):return{error:{code:"invalidFileGeodatabase"}}}return{error:{code:"unhandledError"}}}}async function h({lang:e,geocodeServiceUrl:i,locationType:t}){"address"===t&&(n.a.standardizedFieldNames=await y(i,e))}async function y(e,i){return(await(0,d.r)(e,{},{addTokenManually:!1})).addressFields.reduce(((e,t)=>{var o;return"unknown"!==t.name&&(e[t.name]=(null===(o=null==t?void 0:t.localizedNames)||void 0===o?void 0:o[`${i}`])||t.alias||t.name),e}),{})}},95878:(e,i,t)=>{t.d(i,{a:()=>o,u:()=>n});const o=(0,t(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),n=o.state}}]);