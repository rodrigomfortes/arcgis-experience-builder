/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a81e49.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a81e49"],{57067:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_data_store_select_database:()=>o});var r=t(87849),a=t(3826),n=t(62296),s=t(95878),l=t(59317);t(37762),t(87744),t(68194),t(50637),t(931),t(93814),t(28748),t(63054),t(76246),t(15912),t(32710),t(83929),t(24869),t(72257),t(86562),t(15332),t(50020),t(50822),t(75294),t(38295),t(51102),t(56175),t(43555);const o=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.missingHostingServer=!1,this.handlePublisherFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetPublisherFile(),this.importingPublisherFile=!0,(0,n.h)(t,r,this.hostingServer.adminUrl||"").then((e=>{this.publisherFileName=e.result.itemName,this.publisherFileProps=e.result.connectionStringProps,this.publisherConnectionString=e.result.connectionString,this.importingPublisherFile=!1}))},this.handleServerFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetServerFile(),this.importingServerFile=!0,(0,n.h)(t,r,this.hostingServer.adminUrl||"").then((e=>{this.serverFileName=e.result.itemName,this.serverFileProps=e.result.connectionStringProps,this.serverConnectionString=e.result.connectionString,this.importingServerFile=!1}))},this.error=null,this.allowedExtensions=["sde"],this.serverDatabaseOption=null,this.publisherFiles=void 0,this.publisherFileName=void 0,this.serverFiles=void 0,this.serverFileName=void 0,this.publisherConnectionString="",this.serverConnectionString="",this.importingPublisherFile=!1,this.importingServerFile=!1,this.hostingServer=void 0,this.publisherFileProps=void 0,this.serverFileProps=void 0}async componentWillLoad(){this.i18n=s.u.i18n.dataStoreSelectDatabase,this.hostingServer=a.a.hostingServer,this.hostingServer||(this.missingHostingServer=!0),this.publisherConnectionString=a.a.publisherConnectionString,this.publisherFileName=a.a.publisherFileName,this.publisherFileProps=a.a.publisherFileProps,this.serverDatabaseOption=a.a.serverDatabaseOption||null,this.serverConnectionString=a.a.serverConnectionString,this.serverFileName=a.a.serverFileName,this.serverFileProps=a.a.serverFileProps}validFileInputs(){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;return e?!("newConnection"===t&&!i)||(this.error="invalidServerConnectionFile",!1):(this.error="invalidPublisherConnectionFile",!1)}handleNext(){if(this.validFileInputs()){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;a.a.publisherConnectionString=e,a.a.publisherFileName=this.publisherFileName,a.a.publisherFileProps=this.publisherFileProps,a.a.serverDatabaseOption=t,"newConnection"===t?(a.a.serverConnectionString=i,a.a.serverFileName=this.serverFileName,a.a.serverFileProps=this.serverFileProps):(a.a.serverConnectionString=null,a.a.serverFileName=null,a.a.serverFileProps=null),this.newItemUpdatePage.emit("dataStoreSelectServerList")}}propIsNotPassword(e){return["ENCRYPTED_PASSWORD_UTF8","ENCRYPTED_PASSWORD"].indexOf(e.key)<=-1}resetPublisherFile(){this.publisherFiles=null,this.publisherFileProps=null,this.publisherConnectionString=null,this.publisherFileName=null}resetServerFile(){this.serverFiles=null,this.serverFileProps=null,this.serverConnectionString=null,this.serverFileName=null}renderErrorItem(){var e,i;const{i18n:t,error:a}=this;return(0,r.h)("arcgis-new-item-alert",{heading:null===(e=t.errors[a])||void 0===e?void 0:e.heading,description:null===(i=t.errors[a])||void 0===i?void 0:i.description,active:null!==a,onAlertDismiss:()=>{this.error=null}})}render(){const{i18n:e,missingHostingServer:i,allowedExtensions:t,publisherFileProps:a,serverFileProps:n,importingPublisherFile:s,importingServerFile:o,serverFileName:c,publisherFileName:d}=this,{config:b}=l.c;return(0,r.h)("div",{key:"a51b141fdf1402104b70b233df429aecbf1de016"},(0,r.h)("arcgis-new-item-description",{key:"49d97b2e4e9d164cf031ac830f58dad8092eb9c1",header:i?e.errors.hostingServerError:e.heading}),!i&&(0,r.h)("div",{key:"d0040dc490b1a70cd8ec446e7dd4a552fa6735b5"},(0,r.h)("div",{key:"e8a6b122dbd24343be1f8d2d338eb8ce7e24f021",class:"input-label"},(0,r.h)("calcite-label",{key:"7a5e286b0b21da7cb09ed1f8a32aff8179f3884f"},e.publisherDatabaseConnection," ",e.sdeFile,!s&&!a&&(0,r.h)("arcgis-drag-and-drop",{key:"9356c26483e24ae2db5ab0a48154fb68c8609ee7",files:this.publisherFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:b,onArcgisDropSuccess:this.handlePublisherFileDropEvent},(0,r.h)("div",{key:"3cf9d0aa9f5896dbfe5810c9fa70370c1b61c01e",class:"file-input"},(0,r.h)("input",{key:"9c01b2d0b7c048c4788434b28038fb4a62a28071",class:"hidden-file-input",onChange:e=>{this.publisherFiles=Object.assign({},e.target.files)},ref:e=>this.publisherInputElement=e,accept:null==t?void 0:t.map((e=>`.${e}`)).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{key:"45f023d0ee0b44c3f51192178846591806f8dfb7",width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{key:"09f1259bc9599564ec260831e039eaa78ec96c27",d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{key:"401dfa6edec726d5749b33c8f54e8d113ede56aa","fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{key:"196688e712263faa9ecd06ec2dd01392937a8651",class:"text-container"},(0,r.h)("h3",{key:"e2983dec526ca3206cc34ba952e14b61ce7b191b",class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{key:"374af728ec4ae8dc8bd1f45cfc6f64357931fa1e",class:"file-browser-button",onClick:()=>{var e;return null===(e=this.publisherInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{key:"09686f9d1d06058faec01677f29c104fd6a6f6b3",class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{key:"e85552fb161b4331cb373d7bdbbb45fbd201f0a9",icon:"desktop"})),(0,r.h)("span",{key:"337430e071929f793507d92fe6f77c4da083c871",class:"file-browser-button__text"},e.selectFile)))),s&&(0,r.h)("div",{key:"7148e6886bb7a7f2846021de43b30a062f6a05b4",class:"loader-container"},(0,r.h)("calcite-loader",{key:"27096f792ed7e052cb56d9b9362c980b0335194a",inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),a&&(0,r.h)("div",{key:"58884dc758a18365895dfe8c08b37a0398c1189e"},(0,r.h)("table",{key:"549a70cd8067c33a5c89e2fb3ef138f3dc5745c1",class:"database-connection-table"},(0,r.h)("thead",{key:"946a1a7a18005db5f669981e09290a8ee7108e31"},(0,r.h)("tr",{key:"ed52a18aaf5cb9d73f8b120b30f457b63efe9a08"},(0,r.h)("th",{key:"e96582de19df369ed50b547c99f9dd059d944296",colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{key:"b86c81ad694aec8c15c64049b2d5076497bab008",class:"server-file-name"},d)))),(0,r.h)("tbody",{key:"af4a46172eac8275b2c39db763dc4bb7a72b5a09"},a.map((e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value)))))),(0,r.h)("div",{key:"2280faf83a357fedfb8f82b7aa3ae6ef53d4e240",class:"change-file"},(0,r.h)("span",{key:"06926d682ad8ed0e1c7f5f1f4e5d165a6f6ec1e8",class:"change-file-btn",onClick:()=>{this.resetPublisherFile()}},e.chooseDifferentFile))))),(0,r.h)("div",{key:"08845b0ad6935ac6f0dd05be9ce9ea12e8fe4152",class:"input-label"},(0,r.h)("calcite-label",{key:"df82c75d70c8d8348d6250d6cbfe6ff865b483a5"},e.serverDatabaseConnection," ",e.sdeFile)),(0,r.h)("calcite-tile-select-group",{layout:"vertical",key:"server-database-connection-select",class:"server-database-connection-select"},(0,r.h)("calcite-tile-select",{class:"tile-select",key:"publisher-database-connection-select",checked:null===this.serverDatabaseOption,description:e.sameAsPublisher,name:"same-as-publisher-database-connection","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverDatabaseOption=null}}),(0,r.h)("calcite-tile-select",{class:"tile-select",key:"new-server-database-connection-select",checked:"newConnection"===this.serverDatabaseOption,description:e.newConnection,name:"new-server-database-connection","input-enabled":!0,width:"full",type:"radio",value:"newConnection",onCalciteTileSelectChange:()=>{this.serverDatabaseOption="newConnection"}})),"newConnection"===this.serverDatabaseOption&&(0,r.h)("calcite-label",{key:"fe4c975c126bf039afadfd5e224acd84e55c5f1f"},!o&&!n&&(0,r.h)("arcgis-drag-and-drop",{key:"8193cb5eee33481df1421109ef399f7ab44f9139",files:this.serverFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:b,onArcgisDropSuccess:this.handleServerFileDropEvent},(0,r.h)("div",{key:"a0e84be5bc981db548dbe813ee2348f8503b6fa4",class:"file-input"},(0,r.h)("input",{key:"0602795f7838339e4bb3c73fbe72a86471019fd6",class:"hidden-file-input",onChange:e=>{this.serverFiles=Object.assign({},e.target.files)},ref:e=>this.serverInputElement=e,accept:null==t?void 0:t.map((e=>`.${e}`)).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{key:"58f4ff41e6fd4291e4fff64011957a56b4468334",width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{key:"7c78e45e1a1e75243f2e881ed7609eafedb7ec2b",d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{key:"1646c9b2dabe7ea1b8c6f7a922b55bf176336bf4","fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{key:"7866a756625396985dd7cac9b7d0c72c5f67bd0f",class:"text-container"},(0,r.h)("h3",{key:"e366612657459306eb6c58abd4d427a03704a3ea",class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{key:"50a0fda20af2c1b283858833304a31a24d433843",class:"file-browser-button",onClick:()=>{var e;return null===(e=this.serverInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{key:"34f1588641f1d77926ace9e623ecb45b959e70c6",class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{key:"5b75bcb47bf3fb88c565f3def8e9be382ad8c7c8",icon:"desktop"})),(0,r.h)("span",{key:"ddf86a49f617299bc7f872a0fe8192dfc837cb7f",class:"file-browser-button__text"},e.selectFile)))),o&&(0,r.h)("div",{key:"53ec706c6d8c178fc4521f8a8277519121b87bd4",class:"loader-container"},(0,r.h)("calcite-loader",{key:"8512276661e8f696a93c9e3ed694c6b925ef85e3",inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),n&&(0,r.h)("div",{key:"efde3c105cb8a2adb1bcf59c9c60770c0774ef43"},(0,r.h)("table",{key:"5de8d122ba07e6da726e6c525eb565f99ec2a237",class:"database-connection-table"},(0,r.h)("thead",{key:"0fdf1ab8c788173b8503a9b2d935b8659479af1d"},(0,r.h)("tr",{key:"64e54a7a96cfa539d3dfb967b1dab61c31c89048"},(0,r.h)("th",{key:"c31fde44bb14151e5d353389343aa05810560544",colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{key:"fe12d5b81e38aff954b090dbf5157b27fc054080",class:"server-file-name"},c)))),(0,r.h)("tbody",{key:"902667f602a496cbaa890cca2658f7cb2a068b49"},n.map((e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value)))))),(0,r.h)("div",{key:"58aa217e26cca153fdb3bef1faee26b962ed8cfa",class:"change-file"},(0,r.h)("span",{key:"cf94f820ffb220531cafa9259e922d01113ddcf6",class:"change-file-btn",onClick:()=>{this.resetServerFile()}},e.chooseDifferentFile)))),this.renderErrorItem()))}};o.style=".input-label{margin-top:1.25rem}.hidden-file-input{display:none}.device-select{margin-top:0.5rem;margin-bottom:0.5rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.server-database-connection-select{padding-bottom:0.5rem}.tile-select{margin-bottom:0.125rem}.server-file-name{font-weight:700}.file-input{margin-bottom:2rem;box-sizing:border-box;width:100%;border-width:2px;border-style:dashed;border-color:var(--calcite-color-border-1);background-color:var(--calcite-color-background);padding-top:2rem;padding-bottom:2rem;text-align:center}.file-browser-button{margin-top:0px;margin-bottom:0px;margin-left:0.75rem;margin-right:0.75rem;box-sizing:border-box;display:inline-flex;width:auto;cursor:pointer;align-items:center;border-radius:0;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-1);border:1px solid var(--calcite-color-border-1);background-color:white;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.file-browser-button:hover{border-color:var(--calcite-color-brand)}.file-browser-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.file-browser-button__icon{background-color:#f8f8f8;color:var(--calcite-color-text-link);box-sizing:border-box;display:flex;height:2rem;width:2rem;align-items:center;justify-content:center;padding:0.25rem}.file-browser-button__icon svg{width:100%}.file-browser-button__text{padding:0.5rem}.change-file{padding-top:0.5rem}.change-file-btn{cursor:pointer;color:#0079c1}.database-connection-table{width:100%;border-collapse:collapse;text-align:left}.database-connection-table tr{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1)}.database-connection-table td{padding:0.5rem;font-size:0.875rem;font-weight:300;border-left:1px solid #ccc;border-right:1px solid #ccc}.database-connection-table th{padding:0.5rem;font-size:1rem;font-weight:300;background-color:#efefef}tbody tr:nth-child(even){background-color:var(--calcite-color-background)}.text-container{margin-top:2rem;margin-bottom:2rem}.loader-container{display:flex}"}}]);