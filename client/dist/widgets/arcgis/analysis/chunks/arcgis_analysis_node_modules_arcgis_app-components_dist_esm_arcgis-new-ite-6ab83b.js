/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-6ab83b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-6ab83b"],{79238:(e,t,a)=>{a.d(t,{a:()=>r,e:()=>n,f:()=>i});const r={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},n={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},i={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},90250:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_feature_layer_from_scratch:()=>f});var r=a(87849),n=a(90079),i=a(59317),l=a(4429),s=a(46227),o=a(3826),c=a(95878),d=a(99654),y=a(33547),p=a(79238);a(37762),a(87744),a(72257),a(86562),a(15332),a(31544),a(50637),a(931),a(93814),a(50822),a(32710),a(83929),a(76246),a(63054),a(15912),a(24869),a(50020),a(75294),a(38295),a(51102),a(56175),a(43555);const f=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.layerNameInputRefs={},this.nameFieldChangedByUser={},this.getDuplicateLayerNameId=()=>{const{layerInfos:e}=this,t={};for(let a=0;a<e.length;a++){const{name:r,id:n}=e[a];if(t[r])return n;t[r]=!0}return null},this.getDefaultName=e=>{const{layerInfos:t}=this,a=t.reduce(((t,a)=>{const r=(n=a.name,parseInt(n.split("_")[1]));var n;return!a.name.startsWith(e)||isNaN(r)?t:t<=r?r+1:t}),1);return`${e}_${a}`},this.addLayer=()=>{const{i18n:e,layerInfos:t,getDefaultName:a,layerNameInputRefs:r}=this,n=e.layer,i=(0,s.g)(),o=a(n);this.layerInfos=[...t,{id:i,type:"point",name:o}],(0,l.t)(100).then((()=>{var e;null===(e=r[i])||void 0===e||e.setFocus()}))},this.deleteLayer=(e,t)=>{const{layerNameInputRefs:a,layerInfos:r,nameFieldChangedByUser:n}=this;1!==r.length&&(this.layerInfos=function(e,t){const a=[...e];return a.splice(t,1),a}(r,t),delete a[e],delete n[e])},this.changeLayerName=(e,t)=>{const{layerInfos:a,nameFieldChangedByUser:r}=this,n=a[e];n.name=t,r[n.id]=!0},this.changeLayerType=(e,t,a)=>{const{layerInfos:r,nameFieldChangedByUser:n,i18n:i,getDefaultName:l}=this,s=Object.assign({},r[e]);n[s.id]||("table"===t&&"table"!==a?s.name=l(i.layer):"table"!==t&&"table"===a&&(s.name=l(i.table))),s.type=a,this.layerInfos=[...r.slice(0,e),s,...r.slice(e+1)]},this.setAlertMessage=e=>{this.alertInfo=this.i18n.error[e]},this.alertInfo=void 0,this.layerInfos=[],this.layerPreference={captureGPS:!1,enableZDefaults:!1,enableMDefaults:!1}}async componentWillLoad(){this.addCreateI18n=c.u.i18n,this.i18n=this.addCreateI18n.featureLayerFromScratch;const{layerPreference:e,newLayerInfos:t}=(0,d.a)();this.layerPreference=e,t.length<=0?this.addLayer():this.layerInfos=[...t]}async handleNext(){var e,t,a;const{layerInfos:r,layerNameInputRefs:n,setAlertMessage:l,getDuplicateLayerNameId:s,newItemUpdatePage:c,layerPreference:p}=this,{portal:f}=i.c,m=null===(e=r.find((e=>!e.name.trim())))||void 0===e?void 0:e.id;if(m)return(0,y.f)("Missing layer name"),null===(t=n[m])||void 0===t||t.setFocus(),void l("emptyName");const u=s();if(u)return(0,y.f)("Layer names must be unique"),null===(a=n[u])||void 0===a||a.setFocus(),void l("duplicateTitle");1===this.layerInfos.length&&(o.a.initialTitle=this.layerInfos[0].name),(0,d.b)(this.layerInfos,p,f),c.emit("itemProperties")}render(){const{i18n:e,alertInfo:t,addCreateI18n:a,addLayer:i,layerInfos:l,layerNameInputRefs:s,deleteLayer:o,layerPreference:c,changeLayerName:d,changeLayerType:f}=this;return(0,r.h)(r.H,{key:"2d8d1ebdc2b65e4dcedf928ca913fc3ba734c1fe"},(0,r.h)("arcgis-new-item-description",{key:"c406e9cc40ec47a2fefa04e8366b90369578bebe",header:e.header}),(0,r.h)("div",{key:"3575ce2431fe5ec0e58e95564db431541f9246e4",class:"add-new-container"},(0,r.h)("div",{key:"20d5f85907d32f4ebc89f23690f620f938a014c5",class:"layer-container"},l.map((({id:e,name:t,type:i},c)=>{const y=l[c];return(0,r.h)("li",{class:"info-card",key:e,value:e},(0,r.h)("calcite-input",{value:t,class:"layer-name-input",label:a.featureLayerFromScratch.label,placeholder:a.featureLayer.placeholders[i],onCalciteInputInput:e=>{const t=e.target;d(c,t.value)},ref:t=>s[e]=t}),(0,r.h)("calcite-combobox",{label:a.featureLayer.type[y.type],class:"layer-type",selectionMode:"single",clearDisabled:!0,onCalciteComboboxChange:e=>{const t=e.target;f(c,y.type,t.selectedItems[0].value)}},n.f.filter((e=>"multipatch"!==e)).map((e=>(0,r.h)("calcite-combobox-item",{textLabel:a.featureLayer.type[e],icon:p.a[e],selected:y.type===e,value:e})))),l.length>1&&(0,r.h)("calcite-button",{appearance:"transparent",kind:"danger",scale:"m",href:"","icon-start":"trash",onClick:()=>o(e,c)}))}))),(0,r.h)("calcite-button",{key:"1a324c4ee66108726b0ff0ecb141009b2ceef3de",appearance:"transparent",scale:"m","icon-start":"plus",class:"add-layer",onClick:i},e.add)),(0,r.h)("arcgis-new-item-layer-preference",{key:"baf2bb03015e2547176cc51e51ef6527c1ae5ec9",i18n:e,defaultPreference:c,onLayerPreferenceChange:e=>{const{layerPreference:t}=this,a=e.detail;!t.captureGPS&&a.captureGPS&&(0,y.e)("captureGPS"),!t.enableZDefaults&&a.enableZDefaults&&(0,y.e)("enableZDefaults"),!t.enableMDefaults&&a.enableMDefaults&&(0,y.e)("enableMDefaults"),this.layerPreference=e.detail}}),(0,r.h)("arcgis-new-item-alert",{key:"6404897f17b17c509340150f097b3cc435149ede",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,r.a)(this)}};f.style="p{margin-top:0px;margin-bottom:0px}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0px}.add-new-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;padding-bottom:2.5rem;background-color:var(--calcite-color-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;flex-grow:1;align-items:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);border-color:var(--calcite-color-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0px}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;margin-inline-end:1rem;flex-basis:100%}.layer-type:last-child{margin-inline-end:0px}"}}]);