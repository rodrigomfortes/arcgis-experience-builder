/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-9bd841.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-9bd841"],{10465:(e,t,i)=>{i.d(t,{D:()=>n,a:()=>h,b:()=>d,c:()=>l,g:()=>b,s:()=>k});class n{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const s=(e,t,i)=>(0,r(t).subscribe)((t=>{const n=t.some((t=>((e,t)=>{let i=e;for(;i;){if(i===t)return!0;if(!i.parentNode)return!1;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(e,t.target)));n&&i()})),o={},r=e=>{const t=e.join(","),i=o[t];if(void 0!==i)return i;const n=new Set,s=new MutationObserver((e=>n.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const r={subscribe:e=>(n.add(e),()=>{n.delete(e),0===n.size&&(s.disconnect(),o[t]=void 0)})};return o[t]=r,r},l=(e,t)=>{let i=e;for(;i;){const e=i.closest?.(t);if(e)return e;const n=i.getRootNode?.();if(n===globalThis.document)return null;i=n.host}return null},d=e=>a(e,"dir","ltr"),a=(e,t,i)=>{const n=l(e,`[${t}]`);return n?.getAttribute(t)??i},c=e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},h=()=>[c(2),c(1),c(1),c(1),c(3)].join("-"),g="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),u=new Set(g),f="en",p={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},m={},y=async(e,t)=>{const i=`${t}${e}.json`;try{const e=await fetch(i);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===f?{}:await y(f,t)},b=e=>{const t=a(e,"lang",globalThis.navigator?.language||f);return{lang:t,t9nLocale:F(t)}},F=e=>{const[t,i]=e.split("-"),n=t.toLowerCase();let s=n;return i&&(s=`${n}-${i.toUpperCase()}`),s=p[s]??s,u.has(s)?s:i?F(n):f},k=(e,t,i,n)=>{let o;const r=()=>L(e,t(),n).then((e=>{o?.lang===e.lang&&o.t9nLocale===e.t9nLocale&&o.t9nStrings===e.t9nStrings||i(e),o=e})).catch(console.error);return queueMicrotask(r),s(e,["lang"],r)},L=async(e,t,i=e.localName.split("-").slice(1).join("-"))=>{const{lang:n,t9nLocale:s}=b(e),o=`${t}/${i}/t9n`,r=null===i?{}:await(async(e,t,i="")=>{const n=`${t}/${i}`,s=`${n}${e}.json`;return m[s]??(m[s]=y(e,n)),await m[s]})(s,o,"messages.");return{lang:n,t9nLocale:s,t9nStrings:r}}},14528:(e,t,i)=>{function n(e){const t=[];s=e,queueMicrotask((()=>{s===e&&(s=void 0)}));const i=e.componentWillLoad;return e.componentWillLoad=async()=>{await Promise.all(t.map((e=>e()))).then((()=>{})),await(i?.call(e))},{onLoad:e=>t.push(e)}}let s;function o(){return s}i.d(t,{r:()=>o,u:()=>n})},51432:(e,t,i)=>{i.r(t),i.d(t,{arcgis_map_config_display_order:()=>d});var n,s,o=i(11254),r=i(14528),l=i(84260);i(10465);!function(e){e.Ascending="sort-ascending-arrow",e.Descending="sort-descending-arrow"}(n||(n={})),function(e){e.AscendingDate="sortLeastRecent",e.AscendingNumber="smallToLarge",e.DescendingDate="sortMostRecent",e.DescendingNumber="largeToSmall"}(s||(s={}));const d=class{constructor(e){(0,o.r)(this,e),this.arcgisChange=(0,o.c)(this,"arcgisChange",7),this.manager=(0,r.u)(this),this.infoString="",this.strings=(0,l.u)({blocking:!0}),this.fieldPickListChanges=e=>{e.stopPropagation();const t=e.detail?.selectedFields?.[0];t&&t!==this.selectedField.name&&(this.selectedField=t!==this.getRendererFieldName()?this.toPickListFieldInfo(this.findField(t)):this.getRendererFieldInfo()),this.onHideFieldPickList()},this.view=void 0,this.layer=void 0,this.closedOnLoad=!1,this.disabled=!1,this.placement="auto",this.fieldTypes=["integer","small-integer","big-integer","single","double","long","date"],this.ascending=!1,this.selectedField=void 0}async componentWillLoad(){const{layer:e,pickListFields:t}=this,{type:i}=e;this.infoString="catalog"===i?this.strings.orderByTooltipCatalogLayer:this.strings.orderByTooltip;const n=t||this.createPickListFields();if("catalog"!==i&&this.isRendererOrder())this.selectedField=this.getRendererFieldInfo();else{const{orderBy:t}=e,i=Array.isArray(t)?t[0]:t;this.ascending="ascending"===i?.order,this.orderByField=i?.field||this.findOIDField(n)?.name||n[0].name;const s=this.orderByField;this.selectedField=this.toPickListFieldInfo(this.findField(s))}}async componentDidLoad(){this.tooltipNode&&this.sortActionNode&&(this.tooltipNode.referenceElement=this.sortActionNode)}disconnectedCallback(){this.destroyFieldsPickList()}async done(){this.disableContainer(!1),this.destroyFieldsPickList()}render(){const{strings:e,closedOnLoad:t,disabled:i,layer:n}=this,{type:s}=n,r="catalog"===s?e.headingCatalogLayer:e.heading;return(0,o.h)(o.H,{key:"7edf9f7d948ae2f550c764f33cb7c100dc453b75"},(0,o.h)("calcite-block",{key:"6fa393cdca6e782abdafd99e317e5716d3bab51c",heading:r,collapsible:!0,disabled:i,expanded:!t&&!i},(0,o.h)("p",{key:"eb4ac020810bddfbf4df6666351c6bc8e8db7c44",class:"information"},this.infoString),this.renderFieldSelectionButton()),(0,o.h)("calcite-tooltip",{key:"21bea5d5764a651a87bd75e87fe6d70a8415183f","reference-element":this.sortActionNode,placement:"auto",overlayPositioning:"fixed",ref:e=>{e&&(this.tooltipNode=e)}},this.getSortDirectionTooltip()))}renderFieldSelectionButton(){const{selectedField:e,strings:t}=this,i=this.createPickListFields();return(0,o.h)(o.F,null,(0,o.h)("calcite-label",{class:"button-label"},t.orderBy," "),(0,o.h)("div",{class:"field-selection"},(0,o.h)("calcite-button",{class:"field-selection-button",key:"selected-field-button",appearance:"outline-fill",kind:"neutral",width:"full",alignment:"icon-end-space-between",disabled:i.length<=1,iconEnd:"chevron-down",onClick:e=>this.onShowFieldPickList(e),ref:e=>{e&&(this.fieldSelectionNode=e)}},e?.alias||i[0].alias),(0,o.h)("calcite-action",{class:"sort-button",appearance:"transparent",icon:this.getSortDirectionIcon(),iconFlipRtl:!0,onClick:e=>this.onToggleSortDirection(e),onMouseOver:()=>this.onShowTooltip(!0),onMouseOut:()=>this.onShowTooltip(!1),text:this.infoString,disabled:"oid"===e.type||"renderer"===e.type,ref:e=>{e&&(this.sortActionNode=e)}})))}onChange(){const e=this.getValue(),t="renderer"===e;if(this.layer.orderBy=t?void 0:e,"feature"===this.layer.type){this.layer.renderer.orderByClassesEnabled=t||void 0}this.arcgisChange.emit()}async onShowFieldPickList(e){e.stopPropagation(),this.disableContainer(!0),this.fieldPickList?this.destroyFieldsPickList():this.createFieldPickList()}async onHideFieldPickList(){this.disableContainer(!1),this.destroyFieldsPickList(),await(this.fieldSelectionNode?.setFocus()),this.onChange()}onToggleSortDirection(e){e.stopPropagation(),this.ascending=!this.ascending,this.onChange()}onShowTooltip(e){this.tooltipNode&&(this.tooltipNode.open=e)}createFieldPickList(){const{layer:e,pickListFields:t,view:i,strings:n}=this,s=t||this.createPickListFields(),o=this.fieldSelectionNode;this.fieldSelectionNode?.scrollIntoView();const r=this.createPopoverProps(o),l=this.selectedField||(this.isRendererOrder()?this.getRendererFieldInfo():s[0]);this.fieldPickList=document.createElement("arcgis-field-pick-list");const d=this.fieldPickList;return d.heading=n.orderBy,d.multiple=!1,d.showFieldInfo=!1,d.showFieldName=!0,d.mapView=i,d.layer=e,d.fields=s,d.selectedFields=[l.name],d.popoverProps=r,d.addEventListener("arcgisClose",this.fieldPickListChanges),document.body.appendChild(d),d}destroyFieldsPickList(){this.fieldPickList&&(document.body.removeChild(this.fieldPickList),this.fieldPickList=void 0)}createPopoverProps(e){return{placement:this.placement||"auto",offsetDistance:5,offsetSkidding:0,pointerDisabled:!0,triggerDisabled:!0,popoverWidth:this.getPopoverWidth(),refElement:e}}createPickListFields(){let{pickListFields:e}=this;if(!e){const{layer:t,fieldTypes:i}=this,n=t.fields;this.pickListFields=n.filter((e=>i.includes(e?.type))).map((e=>this.toPickListFieldInfo(e))),e=this.pickListFields;const s=this.getOIDField();if(s){const t=this.toPickListFieldInfo(s);e.unshift(t)}if(this.hasTypesOrPredominanceRenderer()){const t=this.getRendererFieldInfo();e.unshift(t)}}return e}toPickListFieldInfo(e){return{name:e.name,hideFieldName:"oid"===e.type,alias:this.getFieldAlias(e),type:e.type}}getPopoverWidth(){return this.el.getBoundingClientRect().width+30||280}getFieldAlias(e){const{strings:t}=this;if("oid"===e.type)return t.defaultDataOrder;{const t=this.findFieldInfoFromPopup(e);return t?.label||e.alias||e.name}}findFieldInfoFromPopup(e){const{popupTemplate:t}=this.layer,i=t?.fieldInfos;return(i||[]).find((t=>t.fieldName===e.name))}getOIDField(){const{layer:e}=this;return e.fields.find((t=>t.name===e.objectIdField||"oid"===t.type))}findOIDField(e){const{layer:t}=this;return e.find((e=>e.name===t.objectIdField||"oid"===e.type))}findField(e){const{layer:t}=this,i=t.fields;return i.find((t=>t.name===e))||i[0]}getSortDirectionIcon(){return this.ascending?n.Ascending:n.Descending}getSortDirectionTooltip(){const{ascending:e,selectedField:t,strings:i}=this,n=t?.type;let o="sortLeastRecent";return o="date"===n?e?s.AscendingDate:s.DescendingDate:e?s.AscendingNumber:s.DescendingNumber,i[o]}hasTypesOrPredominanceRenderer(){const{layer:e}=this,{renderer:t}=e;return!!t&&("unique-value"===t?.type&&(!t?.authoringInfo?.type||"predominance"===t?.authoringInfo?.type))}isRendererOrder(){const{layer:e}=this,{renderer:t}=e;return!!t&&(this.hasTypesOrPredominanceRenderer()&&!0===t?.orderByClassesEnabled)}getRendererFieldName(){const{layer:e}=this,{renderer:t}=e;return t&&this.hasTypesOrPredominanceRenderer()&&(t.field||t.valueExpressionTitle)||null}getRendererFieldInfo(){return{name:this.getRendererFieldName(),alias:this.strings.styleOrder,type:"renderer"}}disableContainer(e){const t=this.el.closest("calcite-flow-item");t&&(t.disabled=e)}getValue(){const{selectedField:e}=this;return"oid"===e.type?null:"renderer"===e.type?"renderer":[{order:this.ascending?"ascending":"descending",field:this.selectedField.name}]}static get assetsDirs(){return["assets"]}get el(){return(0,o.a)(this)}};d.style=".button-label{--calcite-label-margin-bottom:2px}.field-selection{display:flex;gap:0.5rem}.field-selection-button{min-width:0px;align-self:center}.infoPopover{width:340px;font-size:12px}.information{margin:0 0 1em 0}"},84260:(e,t,i)=>{i.d(t,{u:()=>r});var n=i(11254),s=i(10465),o=i(14528);function r({propertyName:e="strings",name:t}){let i=(0,o.r)();const r=(0,s.g)(i.el),d=new s.D,a={_lang:r.lang,_t9nLocale:r.t9nLocale};i.manager.onLoad((()=>d.promise));const c=new WeakRef(i);function h(){const e=c.deref();return e||u?.(),e}i=void 0;const g=l((()=>h()?.el)),u=(0,s.s)(g,(()=>(0,n.g)("./assets")),(({t9nLocale:t,t9nStrings:i,lang:n})=>{const s=h();if(!s)return;s[e]={...i,_lang:n,_t9nLocale:t},d.resolve()}),t);return a}const l=e=>new Proxy({},{get(t,i){const n=e();if(!n)return;const s=Reflect.get(n,i,n);return"function"==typeof s?s.bind(n):s}})}}]);