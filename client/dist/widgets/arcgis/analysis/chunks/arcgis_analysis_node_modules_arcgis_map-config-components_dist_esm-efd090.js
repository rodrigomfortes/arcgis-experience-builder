/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-efd090.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-efd090"],{4573:(t,e,i)=>{function s(t,e,i){window.localStorage.setItem(t,i?JSON.stringify(e):e)}function o(t){window.localStorage.removeItem(t)}function r(t,e){const i=window.localStorage.getItem(t);return i&&e?JSON.parse(i):i}function n(t,e,i){window.sessionStorage.setItem(t,i?JSON.stringify(e):e)}function l(t,e){const i=window.sessionStorage.getItem(t);return i&&e?JSON.parse(i):i}i.d(e,{a:()=>l,b:()=>n,g:()=>r,r:()=>o,s:()=>s})},10465:(t,e,i)=>{i.d(e,{D:()=>s,a:()=>d,b:()=>a,c:()=>l,g:()=>S,s:()=>v});class s{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}const o=(t,e,i)=>(0,n(e).subscribe)((e=>{const s=e.some((e=>((t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(t,e.target)));s&&i()})),r={},n=t=>{const e=t.join(","),i=r[e];if(void 0!==i)return i;const s=new Set,o=new MutationObserver((t=>s.forEach((e=>e(t)))));globalThis.document&&o.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:t=>(s.add(t),()=>{s.delete(t),0===s.size&&(o.disconnect(),r[e]=void 0)})};return r[e]=n,n},l=(t,e)=>{let i=t;for(;i;){const t=i.closest?.(e);if(t)return t;const s=i.getRootNode?.();if(s===globalThis.document)return null;i=s.host}return null},a=t=>c(t,"dir","ltr"),c=(t,e,i)=>{const s=l(t,`[${e}]`);return s?.getAttribute(e)??i},m=t=>{let e="";for(let i=0;i<t;i++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},d=()=>[m(2),m(1),m(1),m(1),m(3)].join("-"),h="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),u=new Set(h),y="en",p={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},b={},g=async(t,e)=>{const i=`${e}${t}.json`;try{const t=await fetch(i);if(t.ok)return await t.json()}catch(t){return console.error(t),{}}return t===y?{}:await g(y,e)},S=t=>{const e=c(t,"lang",globalThis.navigator?.language||y);return{lang:e,t9nLocale:f(e)}},f=t=>{const[e,i]=t.split("-"),s=e.toLowerCase();let o=s;return i&&(o=`${s}-${i.toUpperCase()}`),o=p[o]??o,u.has(o)?o:i?f(s):y},v=(t,e,i,s)=>{let r;const n=()=>w(t,e(),s).then((t=>{r?.lang===t.lang&&r.t9nLocale===t.t9nLocale&&r.t9nStrings===t.t9nStrings||i(t),r=t})).catch(console.error);return queueMicrotask(n),o(t,["lang"],n)},w=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:s,t9nLocale:o}=S(t),r=`${e}/${i}/t9n`,n=null===i?{}:await(async(t,e,i="")=>{const s=`${e}/${i}`,o=`${s}${t}.json`;return b[o]??(b[o]=g(t,s)),await b[o]})(o,r,"messages.");return{lang:s,t9nLocale:o,t9nStrings:n}}},10588:(t,e,i)=>{i.d(e,{a:()=>h,b:()=>n,c:()=>d,d:()=>l,e:()=>r,f:()=>m,g:()=>o,h:()=>c,i:()=>u,j:()=>a});var s=i(69811);function o(t){return"cim"===t.type&&t.data.symbol?"CIMLineSymbol"===t.data.symbol.type?"line":"CIMPolygonSymbol"===t.data.symbol.type?"polygon":"point":"simple-marker"===t.type||"picture-marker"===t.type?"point":"simple-line"===t.type?"line":"polygon"}const r={loaded:!1,async load(){this.loaded||(this.intl=await(0,s.z)(),this.EsriColor=await(0,s.ab)(),this.Portal=await(0,s.ac)(),this.CIMSymbol=await(0,s.a8)(),this.WebStyleSymbol=await(0,s.ad)(),this.devEnvironmentUtils=await(0,s.ae)(),this.promiseUtils=await(0,s.af)(),this.urlUtils=await(0,s.ag)(),this.PortalItem=await(0,s.m)(),this.previewSymbol2D=await(0,s.ah)(),this.gfxUtils=await(0,s.ai)(),this.jsonUtils=await(0,s.aj)(),this.styleUtils=await(0,s.ak)(),this.svgUtils=await(0,s.al)(),this.symbolUtils=await(0,s.a4)(),this.cimSymbolUtils=await(0,s.am)(),this.webStyleSymbolUtils=await(0,s.an)(),this.colorRamps=await(0,s.ao)(),this.esriLang=await(0,s.o)(),this.loaded=!0)}};function n(t){return"cim"===t?.type}function l(t){return"simple-marker"===t?.type}function a(t){return"picture-marker"===t?.type}function c(t){return"simple-line"===t?.type}function m(t){return"simple-fill"===t?.type}function d(t){return!!t.data.symbol&&"CIMPointSymbol"===t.data.symbol.type}function h(t){return!!t.data.symbol&&"CIMLineSymbol"===t.data.symbol.type}function u(t){return!!t.data.symbol&&"CIMPolygonSymbol"===t.data.symbol.type}},12416:(t,e,i)=>{i.r(e),i.d(e,{arcgis_symbol_picker:()=>vt});var s=i(11254),o=i(37059),r=i(10588),n=i(69811),l=i(4573),a=i(14528),c=i(10465),m=i(84260);function d(t){return{authMode:"public"===t.access?"anonymous":"auto"}}const h=[{name:"Circle",type:"esriSMS",style:"esriSMSCircle",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Square",type:"esriSMS",style:"esriSMSSquare",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Diamond",type:"esriSMS",style:"esriSMSDiamond",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Triangle",type:"esriSMS",style:"esriSMSTriangle",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}}],u=[{type:"esriSLS",color:[0,0,0,255],width:.75,style:"esriSLSSolid"}],y=[{type:"esriSFS",color:[0,0,0,64],outline:{type:"esriSLS",color:[0,0,0,255],width:.75,style:"esriSLSSolid"},style:"esriSFSSolid"}];function p(t){return[{title:t.symbolSources.circle,name:"Circle",primitive:"circle"},{title:t.symbolSources.square,name:"Square",primitive:"square"},{title:t.symbolSources.cross,name:"Cross",primitive:"cross"},{title:t.symbolSources.x,name:"X",primitive:"x"},{title:t.symbolSources.kite,name:"Kite",primitive:"kite"},{title:t.symbolSources.triangle,name:"Triangle",primitive:"triangle"}].map((t=>({dimensionality:"flat",name:t.name,title:t.title,type:"PointSymbol3D",symbolLayers:[{type:"Icon",resource:{primitive:t.primitive},material:{color:r.e?.gfxUtils?.defaultThematicColor},outline:{color:[0,0,0]}}]})))}function b(t){return[{title:t.symbolSources.sphere,name:"Sphere",primitive:"sphere"},{title:t.symbolSources.tallCylinder,name:"Tall_Cylinder",primitive:"cylinder",mixins:{width:5,height:10,depth:5}},{title:t.symbolSources.cylinder,name:"Cylinder",primitive:"cylinder"},{title:t.symbolSources.tallCube,name:"Tall_Cube",primitive:"cube",mixins:{width:5,height:10,depth:5,anchor:"bottom"}},{title:t.symbolSources.cube,name:"Cube",primitive:"cube"},{title:t.symbolSources.tallCone,name:"Tall_Cone",primitive:"cone",mixins:{width:5,height:10,depth:5}},{title:t.symbolSources.cone,name:"Cone",primitive:"cone"},{title:t.symbolSources.invertedCone,name:"Inverted_Cone",primitive:"invertedCone"},{title:t.symbolSources.diamond,name:"Diamond",primitive:"diamond"},{title:t.symbolSources.tetrahedron,name:"Tetrahedron",primitive:"tetrahedron"}].map((t=>({dimensionality:"volumetric",name:t.name,title:t.title,type:"PointSymbol3D",symbolLayers:[{type:"Object",resource:{primitive:t.primitive},...t.mixins}]})))}async function g(t,e,i,s){try{await r.e.symbolUtils.renderPreviewHTML(e,{node:t,...i})}catch(e){t.appendChild(S(s))}return t}function S(t){const e=document.createElement("span");return e.setAttribute("alt",""),e.innerHTML=t,e}function f(t="2d"){return{async getEsriSymbol(e){const{data:i,parentData:s,portalItem:n}=e,l=await async function(t,e,i,s){const o=function(t){for(const e of t.typeKeywords)if(/^Esri.*Style$/u.test(e)&&"Esri Style"!==e)return e;return}(i);let n=null;o||(n=`${i.itemUrl}/data`);const l={data:t,baseUrl:i.itemUrl,styleName:o,styleUrl:n},{portal:a}=i;return await r.e.webStyleSymbolUtils.fetchSymbolFromStyle(l,e,{portal:a},s,r.e.styleUtils.symbolUrlFromStyleItem,d(i))}(s,i.name,n,s.cimVersion&&"2d"===t?"cimRef":"webRef");return"point-3d"===l.type&&l.symbolLayers.forEach((t=>{if(t.material?.color)if("icon"===t.type){const e=null!=t.material?t.material:{};e.color=r.e.gfxUtils.defaultThematicColor.clone(),t.material=e}else if("object"===t.type){const e=null!=t.material?t.material:{};e.color=e.color||(0,o.c)([255,255,255]),t.material=e}})),l},getThumbnail:async t=>await async function(t){const e=t.data;let i=e.thumbnail?.href;const s=e.thumbnail?.imageData,o=e.title||t.strings?.symbolSources.noTitle,n=document.createElement("div"),l=!!e.cimRef,a=function(t){const e=t.formats?.includes("web3d"),i=t.formatInfos?.some((t=>"gltf"===t.type||"gltf_basisu"===t.type));return e||i}(e),c={size:a&&"volumetric"===e.dimensionality?42:24,disableUpsampling:!1};if(l&&!a){const e=await t.getEsriSymbol();if(!(0,r.i)(e))return(0,r.a)(e)&&delete c.size,await g(n,e,c,o)}if(r.e.devEnvironmentUtils?.isDevEnvironment(globalThis.location.hostname)&&(i=r.e.devEnvironmentUtils.adjustStaticAGOUrl(i)),!i&&!s)return n.appendChild(S(o)),n;const m=new(0,r.e.WebStyleSymbol)({name:e.name,styleUrl:`${t.portalItem.itemUrl}/data`,thumbnail:{url:s?`data:image/jpeg;base64, ${s}`:r.e.urlUtils.makeAbsolute(i,t.portalItem.itemUrl)}});return await g(n,m,c,o)}(t)}}const v={getEsriSymbol:async t=>(await(0,n.aj)()).fromJSON(t.data),async getThumbnail(t){const e=await t.getEsriSymbol(),i={size:"line"===(0,r.g)(e)?{width:24}:24};return await r.e.symbolUtils.renderPreviewHTML(e,i)}},w={getEsriSymbol:async t=>r.e.jsonUtils.fromJSON(t.data),async getThumbnail(t){const e=await t.getEsriSymbol();return await r.e.symbolUtils.renderPreviewHTML(e,{size:38})}},I=Function.prototype;class _{constructor({data:t,parentData:e,portalItem:i,strategy:s,strings:o}){this.data=t,this.parentData=e,this.portalItem=i,this.strategy=s,this.strings=o}async getEsriSymbol(){if(!this._symbol){const t=this._symbolRequest||(this._symbolRequest=this.strategy?.getEsriSymbol(this));this._symbol=await t}return this._symbol.clone()}async getThumbnail(t){if(this._thumbnail)return t.appendChild(this._thumbnail),I;const e=this._thumbnailRequest||(this._thumbnailRequest=this.strategy?.getThumbnail(this));return this._thumbnail=await e,()=>this._thumbnail&&t.appendChild(this._thumbnail)}}class k{constructor({portalItem:t,strings:e,symbolType:i}){this.symbolType="2d",this.portalItem=t,this.strings=e,i&&(this.symbolType=i)}get data(){return this._data}get id(){return this.portalItem?.id}get keywords(){return this.portalItem?.typeKeywords||[]}get name(){return this.portalItem?.name}get title(){return this.portalItem?.title}async fetchData(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();return this._data||(this._data=await this.portalItem.fetchData("json",{...t,...d(this.portalItem)})),this._data}}class C extends k{constructor(){super(...arguments),this.type="symbol-set"}async getItems(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();if(!this._items){const e=await this.fetchData(t);this._items=e.map((t=>new _({data:t,parentData:e,portalItem:this.portalItem,strategy:v,strings:this.strings})))}return this._items}}class E extends k{constructor(){super(...arguments),this.type="web-style"}async getItems(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();if(!this._items){const e=await this.fetchData(t);this._items=e.items.map((t=>new _({data:t,parentData:e,portalItem:this.portalItem,strategy:f(this.symbolType),strings:this.strings})))}return this._items}}class U{constructor({strings:t}){this.id="",this.keywords=[],this.name="Basic",this.type="symbol-set",this.title=t.symbolSources.basic}async getItems(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();return this._items||(this._items=this.data.map((t=>new _({data:t,strategy:v,strings:this.strings})))),this._items}}const x="basic-symbol-set:point",T="basic-symbol-set:line",A="basic-symbol-set:polygon";class F extends U{constructor(){super(...arguments),this.data=h,this.id=x,this.keywords=["Point"]}}class L extends U{constructor(){super(...arguments),this.data=u,this.id=T,this.keywords=["Line"]}}class N extends U{constructor(){super(...arguments),this.data=y,this.id=A,this.keywords=["Polygon"]}}class M{constructor({strings:t}){this.keywords=["3d"],this.id="basic-web-style:flat",this.name="Basic",this.type="web-style",this.data={items:p(t)},this.title=t.symbolSources.basic}async getItems(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();return this._items||(this._items=this.data.items.map((t=>new _({data:t,strategy:v,strings:this.strings})))),this._items}}class O{constructor({strings:t}){this.id="basic-web-style:volumetric",this.keywords=["3d","volumetric"],this.name="Basic",this.type="web-style",this.data={items:b(t)},this.title=t.symbolSources.basic}async getItems(t){if(r.e.promiseUtils.isAborted(t))throw r.e.promiseUtils.createAbortError();return this._items||(this._items=this.data.items.map((t=>new _({data:t,parentData:this.data,strategy:w,strings:this.strings})))),this._items}}const D="marker-item",P="calcite-mode-dark",R=({item:t,index:e,observer:i})=>{const o=t.data.title?(0,s.h)("calcite-tooltip",{"reference-element":t.data.name},t.data.title):null;return(0,s.h)("span",{class:`${D} ${P}`,ref:s=>{if(!s)return;const o=s;o.item||(o.item=t,o.index=e,i.observe(s))},id:t.data.name,slot:"thumbnail"},o)};async function q(t,e,i){return i?[]:await async function(t){return await V({portal:t,queries:{group:t.symbolSetsGroupQuery,item:'type:"Symbol Set" AND (typekeywords:"by value" AND typekeywords:"marker")'}}).then(z)}(t).then((t=>t.map((t=>new C({portalItem:t,strings:e})))))}async function j(t,e,i){return await async function(t,e){const i="2d"===e?t.stylesGroupQuery2d:t.stylesGroupQuery3d;if(!i)return[];return await V({portal:t,queries:{group:i,item:'type:"Style"'}}).then(z)}(t,e).then((t=>t.map((t=>new E({portalItem:t,symbolType:e,strings:i})))))}async function G(t,e,i,s){return s?.length?await async function(t,e){let i="",s="";return e.forEach((t=>{i+=`${s}id:${t}`,s=" OR "})),await V({portal:t,queries:{item:i}})}(t,s).then((t=>t.map((t=>new E({portalItem:t,symbolType:e,strings:i}))))):[]}function $(t,e){return"flat"===t?new M({strings:e}):new O({strings:e})}function J(t,e){const i={strings:t};return"line"===e?new L(i):"polygon"===e?new N(i):new F(i)}async function V(t){const e=t.portal,i=t.queries.group,s=t.queries.item;if(i){const{results:t}=await e.queryGroups({query:i,disableExtraQuery:!0});if(0===t.length)return[];const[o]=t;return(await o.queryItems({query:s,disableExtraQuery:!0,num:100,sortField:o.sortField})).results}return(await e.queryItems({query:s,disableExtraQuery:!0,num:100})).results}function z(t){const e=[];return t.forEach((t=>{var i;i="default",t.typeKeywords.includes(i)?e.unshift(t):e.push(t)})),e}const H="pointSymbol",Q="lineSymbol",B="polygonSymbol",K=t=>!!t.portal;async function W(t,e){return await Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}async function X(t,e,i,s,o,n){const l=rt(i),a="2d"===o?function(t,e){function i(i){if(e.includes("all"))return!0;const{data:s}=i,{dimensionality:o,type:r}=s;if("volumetric"===o)return!1;if("point"===t){if(e.includes("picture")&&"esriPMS"===r)return!0;if(e.includes("simple")&&"esriSMS"===r)return!0}if("line"===t&&e.includes("simple")&&"esriSLS"===r)return!0;if("polygon"===t&&e.includes("simple")&&"esriSFS"===r)return!0;const{formats:n}=s;return!(!ot(e)||!ot(n))}return async function(s,o){const n="point"===t?r.c:"line"===t?r.a:r.i;if(!i(s))return!1;const l=e.includes("cim:picture"),a=e.includes("cim:vector"),c=l&&a||!l&&!a,m=Z(o)&&!et(o)&&!it(o),d=et(o)&&!Z(o)&&!it(o),h=it(o)&&!Z(o)&&!et(o),u="line"===t?Q:"polygon"===t?B:H;if((m||d||h)&&c||"web-style"!==o.type||s.data.itemType===u)return!0;const y=await s.getEsriSymbol();return!(0,r.b)(y)||n(y)}}(s,l):(c=l,async function(t){if(c.includes("all")||c.includes("3d"))return!0;const{data:{dimensionality:e}}=t;return c.includes("3d:flat")&&"flat"===e||c.includes("3d:volumetric")&&"volumetric"===e});var c;return await W(e,(async e=>n?await n(e,t,a):await a(e,t)))}const Y={point:"Point",line:"Line",polygon:"Polygon"};function Z({keywords:t}){return t.includes(Y.point)||t.includes("pointSymbol")}function tt({keywords:t}){return t.includes("marker")}function et({keywords:t}){return t.includes(Y.line)||t.includes("lineSymbol")}function it({keywords:t}){return t.includes(Y.polygon)||t.includes("polygonSymbol")}async function st(t,e,i,s,o){const r=rt(e),n="2d"===s?function(t,e){return async i=>{const s=i.keywords.includes("3d"),o=i.keywords.includes("Dictionary"),r="point"===t?Z(i)||tt(i):"line"===t?et(i):it(i),n=Z(i)||tt(i)||et(i)||it(i);if(s||o||!r&&n)return!1;if(e.includes("all"))return!0;function l(){return"point"===t?x:"line"===t?T:A}const a=l();return!(!e.includes("picture")||i.id===a||"symbol-set"!==i.type)||(!(!e.includes("simple")||i.id!==a)||!(!ot(e)||"web-style"!==i.type))}}(i,r):function(t){const e={EsriThematicShapesStyle:!0};return async i=>{if(i.keywords.every((t=>!e[t]))&&"web-style"===i.type&&(t.includes("all")||t.includes("3d")))return!0;if(function(t){return"portalItem"in t}(i)){const e=await i.fetchData(),[s]=e.items,{dimensionality:o}=s;return t.includes("3d:flat")&&"flat"===o||t.includes("3d:volumetric")&&"volumetric"===o}return t.includes("3d:flat")&&"basic-web-style:flat"===i.id||t.includes("3d:volumetric")&&"basic-web-style:volumetric"===i.id}}(r);return await W(t,(async t=>o?await o(t,n):await n(t)))}function ot(t){return Array.isArray(t)&&t.some((t=>t.includes("cim")))}function rt(t="all"){const e=Array.isArray(t)?t:[t],i=e.find((t=>"cim"===t&&e.find((t=>t.includes("cim:")))));return i?e.filter((t=>!t.includes("cim:"))):e}async function nt(t,e,i,s,o,r,n){const l={};e&&await e(t,l),await t.load();const a=await("2d"===o?async function(t,e,i,s){const o=t.symbolSetsGroupQuery;t.symbolSetsGroupQuery='owner:esri AND title:"Map Viewer Beta Symbols"';const[r,n,l]=await Promise.all([q(t,e,s),j(t,"2d",e),G(t,"2d",e,i)]),a=t=>t.keywords.every((t=>"Basic"!==t)),c=s?[...r.filter(a),...n.filter(a),...l.filter(a)]:[J(e,"point"),J(e,"line"),J(e,"polygon"),...r.filter(a),...n.filter(a),...l.filter(a)];return t.symbolSetsGroupQuery=o,c}(t,s,r,n):async function(t,e){const[i]=await Promise.all([j(t,"3d",e)]),s=t=>t.keywords.every((t=>"Basic"!==t)),o=[$("flat",e),$("volumetric",e),...i.filter(s)];return o}(t,s));return i&&await i(t,l),a}const lt="arcgis-symbol-styler-storage-styles",at="arcgis-symbol-picker__container",ct="incompatible-symbols-notice",mt="empty-category-content",dt="marker-source-select",ht="marker-selection",ut="scroller",yt="item-palette",pt="file-upload",bt="categories",gt="categories-center-action",St="symbol-div",ft="empty-filter",vt=class{constructor(t){(0,s.r)(this,t),this.arcgisActiveSymbolChange=(0,s.c)(this,"arcgisActiveSymbolChange",7),this.arcgisActiveSymbolItemChange=(0,s.c)(this,"arcgisActiveSymbolItemChange",7),this.arcgisActiveSourceIdChange=(0,s.c)(this,"arcgisActiveSourceIdChange",7),this.arcgisSymbolSourcesChange=(0,s.c)(this,"arcgisSymbolSourcesChange",7),this.arcgisActiveSourceItemsChange=(0,s.c)(this,"arcgisActiveSourceItemsChange",7),this.manager=(0,a.u)(this),this.allCustomFileInfos=[],this.customSymbolsStorageId="arcgis-symbol-picker-custom-symbols",this.actionEls=[],this._onSymbolSourceChange=t=>{const e=t.currentTarget,{selectedItems:i}=e,s=i.find((t=>t.getAttribute("data-value")!==this._activeSourceId));this._activeSourceId=s?.getAttribute("data-value")||this._activeSourceId,e.querySelectorAll("calcite-dropdown-item").forEach((t=>{t!==s&&(t.selected=!1)})),t.stopPropagation(),this.displayEmptyFilterMsg=!1},this.symbol=void 0,this.portal=void 0,this.symbolFilter=void 0,this.activeSourceId=void 0,this.activeSymbolItem=void 0,this.hideHeader=!1,this.symbolType="2d",this.customSymbolItemFilter=void 0,this.customSymbolSourceFilter=void 0,this.itemsPerRow=4,this.symbolSources=void 0,this.activeSymbolItems=void 0,this.hideSvgUploadSymbols=!1,this.hideClassicSymbols=!1,this.strings=(0,m.u)({blocking:!0}),this._activeSourceId=void 0,this._symbolSources=void 0,this._activeSymbolItems=void 0,this.customSymbolError=void 0,this.isGridView=!0,this.displayEmptyFilterMsg=!1,this._activeSymbolFetch=void 0}async handleActiveSourceItemIdChanges(){if(this._activeSourceId)if("custom-symbol-set"===this._activeSourceId)this._setupCustomSymbols();else{const t=this._symbolSources?.find((({id:t})=>t===this._activeSourceId));t&&await this._fetchAndSetUpSymbolItems(t)}}get editGeometry(){return(0,r.g)(this.symbol)}async handleFileUploadChange({detail:t}){const e=t,i=e.cim&&JSON.stringify(e.cim.toJSON());if(e.dataURL&&e.dataURL.length>2e5)return void(this.customSymbolError="too-large");if(e.cim&&i&&i.length>2e5)return void(this.customSymbolError="too-large");this.customSymbolError=void 0;const s=this.allCustomFileInfos.find((t=>e.dataURL&&t.dataURL&&t.dataURL===e.dataURL&&t.fileName===e.fileName||e.cim&&t.cim&&t.fileName===e.fileName&&i===JSON.stringify(t.cim.toJSON())));try{let t;if(s)t=this._activeSymbolItems?.find((t=>t.data.name===s.fileName));else{const i=[...this.allCustomFileInfos,e];(0,l.s)(this.customSymbolsStorageId,i.map((t=>t.dataURL?t:{...t,cim:JSON.stringify(t.cim?.toJSON())})),!0),this.allCustomFileInfos=i,this._setupCustomSymbols(),t=this._activeSymbolItems?.[this._activeSymbolItems.length-1]}this.activeSymbolItem=t,this.arcgisActiveSymbolItemChange.emit(this.activeSymbolItem);const i=await(this.activeSymbolItem?.getEsriSymbol());this.arcgisActiveSymbolChange.emit(i),setTimeout((()=>requestAnimationFrame((()=>{this.itemPaletteNode?.setFocus(),this.updateListSelection()}))),1)}catch(t){this.customSymbolError="storage-full"}}handleInvalidFile(){this.customSymbolError="invalid-file"}handleFileUploadError(){this.customSymbolError="error"}async getStyleItemIds(){return this._symbolSources.filter((t=>"web-style"===t.type)).map((t=>t.id))}_renderSymbolSourceOptions(t,e){const{strings:i,savedStyleIds:o}=this,r=t.filter((t=>"symbol-set"===t.type&&!o?.includes(t.id))),n=t.filter((t=>"web-style"===t.type&&!o?.includes(t.id))),l=t.filter((t=>o?.includes(t.id)));l.sort(((t,e)=>t.title.localeCompare(e.title)));const a=this.symbolFilter?Array.isArray(this.symbolFilter)?this.symbolFilter:[this.symbolFilter]:void 0,c=!("point"!==this.editGeometry||a&&!a.find((t=>"custom"===t||"picture"===t))&&!o?.length),m="3d"!==this.symbolType&&(c||this.savedStyleIds?.length)&&(0,s.h)("calcite-dropdown-group",{groupTitle:i.addedStyles,selectionMode:"multiple",key:"custom"},this._renderSourceDropdownItem(l,e),c&&(!a||!!a.find((t=>"custom"===t)))&&(0,s.h)("calcite-dropdown-item",{key:"custom","data-value":"custom-symbol-set",selected:"custom-symbol-set"===e},i.customSymbols)),d=r.length&&(0,s.h)("calcite-dropdown-group",{groupTitle:i.classicSymbols,selectionMode:"multiple",key:"classic"},this._renderSourceDropdownItem(r,e)),h=n.length&&(0,s.h)("calcite-dropdown-group",{groupTitle:r.length?i.newSymbols:i.symbols,selectionMode:"multiple",key:"webstyles"},this._renderSourceDropdownItem(n,e));return m?d?h?[d,h,m]:[d,m]:[h,m]:d&&h?[d,h]:(0,s.h)("calcite-dropdown-group",{key:"one-group"},this._renderSourceDropdownItem([...r,...n],e))}_renderSourceDropdownItem(t,e){return t.map((t=>(0,s.h)("calcite-dropdown-item",{key:t.id,"data-value":t.id,selected:t.id===e},t.title)))}_setupCustomSymbols(){const t=this.allCustomFileInfos.map((t=>{let e=24,i=24;if(t.width>t.height?i=Math.round(e/t.width*t.height):t.width<t.height&&(e=Math.round(i/t.height*t.width)),t.dataURL){const s=t.fileName.split(".")[1].toLowerCase();return new _({data:{angle:0,contentType:"png"===s?"image/png":"gif"===s?"image/gif":"image/jpeg",height:i,imageData:t.dataURL.split(",")[1],name:t.fileName,type:"esriPMS",url:void 0,width:e,xoffset:0,yoffset:0},parentData:null,portalItem:void 0,strategy:v,strings:this.strings})}return new _({data:{symbol:t.cim,name:t.fileName},parentData:{cimVersion:"2.6.0"},portalItem:void 0,strategy:{getEsriSymbol:async t=>t.data.symbol,async getThumbnail(t){const e=g(document.createElement("div"),t.data.symbol,{size:24,disableUpsampling:!1},t.data.title);return await e}},strings:this.strings})}));this.setUpSymbolIntersectionObserver(),this.customSymbolError=void 0,this._activeSymbolFetch=null,this._activeSymbolItems=t,this.arcgisActiveSourceIdChange.emit("custom-symbol-set"),this.arcgisActiveSourceItemsChange.emit(t.map((t=>new _({...t}))))}async _fetchAndSetUpSymbolItems(t){this._activeSymbolFetch&&this._activeSymbolFetch.controller.abort();const e=new AbortController,i=e.signal;this._activeSymbolFetch={controller:e,id:t.id};const s=!this._activeSymbolItems&&this.activeSymbolItems||await t.getItems(e);if(i?.aborted)return;const o=await X(t,s,this.symbolFilter,this.editGeometry,this.symbolType,this.customSymbolItemFilter);i?.aborted||(this.setUpSymbolIntersectionObserver(),this.customSymbolError=void 0,this._activeSymbolFetch=null,this._activeSymbolItems=o,this.arcgisActiveSourceIdChange.emit(this._activeSourceId),this.arcgisActiveSourceItemsChange.emit(o.map((t=>new _({...t})))))}tearDownSymbolIntersectionObserver(){this._symbolIntersectionObserver?.disconnect(),this._symbolIntersectionObserver=void 0}setUpSymbolIntersectionObserver(){this.tearDownSymbolIntersectionObserver();let t=0;const e={};this._symbolIntersectionObserver=new IntersectionObserver(((i,s)=>{function o(){t++,e[t]&&(e[t](),delete e[t],o())}i.forEach((i=>{if(!i.isIntersecting)return;const r=i.target;r.item.getThumbnail(r).then((i=>{r.index===t?(i(),o()):e[r.index]=i})),r.item.getEsriSymbol(),s.unobserve(r)}))}))}async _fetchSources(){this._sourcesFetchController&&this._sourcesFetchController.abort(),this._sourcesFetchController=new AbortController;const t=this._sourcesFetchController.signal,e=this.portal,i=K(e)?e.portal:e,s=K(e)?e.before:null,o=K(e)?e.after:null,n=i?this.symbolSources||await nt(i,s,o,this.strings,this.symbolType,this.savedStyleIds,this.hideClassicSymbols):[];if(t?.aborted)return;this._symbolSources=await st(n,this.symbolFilter,(0,r.g)(this.symbol),this.symbolType,this.customSymbolSourceFilter);const l=this._symbolSources.filter((t=>this.savedStyleIds?.includes(t.id)));if(l.length!==this.savedStyleIds?.length){const t=l.map((t=>t.id)),e=this.savedStyleIds?.filter((e=>!t.includes(e)));this.savedStyleIds=t,this.removeStyleIds(e)}if(this.arcgisSymbolSourcesChange.emit(this._symbolSources),!this._activeSourceId){let t=this.activeSourceId;if(t){this._symbolSources.find((t=>t.id===this.activeSourceId))||(t=void 0)}this._activeSourceId=t||this._symbolSources[0].id}}_getCustomSymbolsFromStorage(){if("3d"===this.symbolType||"point"!==this.editGeometry)return;const t=(0,l.g)(this.customSymbolsStorageId,!0);t&&(this.allCustomFileInfos=t.map((t=>t.dataURL?t:{...t,cim:r.e.CIMSymbol?.fromJSON(JSON.parse(t.cim))})))}_renderSourceSelection(){const{strings:t}=this,e=this._symbolSources;if(!e)return(0,s.h)("div",null);const i=this._symbolSources?.find((t=>t.id===this._activeSourceId)),o="custom-symbol-set"===this._activeSourceId?t.customSymbols:i?.title,r=1===e.length,n=(0,s.h)("calcite-dropdown",{class:{[dt]:!0},hidden:r,maxItems:7,onCalciteDropdownSelect:this._onSymbolSourceChange,overlayPositioning:"fixed"},(0,s.h)("calcite-button",{alignment:"space-between",appearance:"outline-fill",kind:"neutral",iconEnd:"chevron-down",scale:"m",slot:"trigger",width:"full"},o),this._renderSymbolSourceOptions(e,this._activeSourceId));return(0,s.h)("div",{class:"section",key:"header"},(0,s.h)("calcite-label",{class:"section"},this.hideHeader?null:this.strings.category,(0,s.h)("div",{class:bt},n,(0,s.h)("calcite-action",{id:"symbol-picker-grid",active:this.isGridView,appearance:"transparent",icon:"grid",scale:"s",class:gt,text:this.strings.gridView,onClick:()=>{this.isGridView=!0,(0,s.f)(this.el)}}),(0,s.h)("calcite-tooltip",{"reference-element":"symbol-picker-grid",overlayPositioning:"fixed"},this.strings.gridView),(0,s.h)("calcite-action",{id:"symbol-picker-list",active:!this.isGridView,appearance:"transparent",icon:"list",iconFlipRtl:!0,scale:"s",text:this.strings.listView,onClick:()=>{this.isGridView=!1,(0,s.f)(this.el)}}),(0,s.h)("calcite-tooltip",{"reference-element":"symbol-picker-list",overlayPositioning:"fixed"},this.strings.listView))))}_renderItemSelection(){const{portal:t,strings:e}=this,i=this._activeSymbolFetch,o=K(t)?t.portal:t,r=(0,s.h)("div",{class:"remove-button"},(0,s.h)("calcite-button",{appearance:"transparent",kind:"danger",width:"full",onClick:()=>this.removeStyle()},e.removeStyle));return(0,s.h)("div",{class:{[ut]:!0,[ht]:this.isGridView},key:"gallery"},i?(0,s.h)("calcite-loader",{label:""}):0===this._activeSymbolItems?.length&&"custom-symbol-set"===this._activeSourceId?(0,s.h)("arcgis-symbol-picker-file-upload",{portal:o,hideSvgUploadSymbols:this.hideSvgUploadSymbols}):this._activeSymbolItems&&this._activeSymbolItems.length>0?(0,s.h)("div",{class:yt,key:this._activeSymbolItems?.length},this.isGridView?this._renderGridView():this._renderListView(),"custom-symbol-set"===this._activeSourceId&&(0,s.h)("arcgis-symbol-picker-file-upload",{class:pt,portal:o,hideSvgUploadSymbols:this.hideSvgUploadSymbols}),this.displayEmptyFilterMsg&&(0,s.h)("div",{class:ft},this.strings.noFilterSymbolsAvailable),this._activeSourceId&&this.savedStyleIds?.includes(this._activeSourceId)&&r):(0,s.h)("div",null,(0,s.h)("div",{class:mt},this.strings.noSymbolsAvailable),this._activeSourceId&&this.savedStyleIds?.includes(this._activeSourceId)&&r))}_renderGridView(){return(0,s.h)("arcgis-item-palette",{key:this._activeSourceId,items:this._activeSymbolItems?.map(((t,e)=>({item:t,index:e,observer:this._symbolIntersectionObserver}))),ItemRenderer:R,itemsPerRow:this.itemsPerRow,selected:({item:t})=>t?.data===this.activeSymbolItem?.data,onArcgisItemSelect:async t=>{const{detail:{item:e}}=t;this.customSymbolError=void 0,this.arcgisActiveSymbolItemChange.emit(e),this.activeSymbolItem=e;const i=await e.getEsriSymbol();this.arcgisActiveSymbolChange.emit(i),t.stopPropagation()},ref:t=>this.itemPaletteNode=t})}_renderListView(){const{strings:t}=this,e="rtl"===(0,c.b)(this.el);return(0,s.h)("calcite-list",{label:t.symbols,key:this._activeSourceId,filterEnabled:this._activeSymbolItems&&this._activeSymbolItems.length>10,filterPlaceholder:t.filterPlaceholder,onCalciteListFilter:t=>{const e=t.target;this.displayEmptyFilterMsg=!!e.filterText&&0===e.filteredItems.length}},this._activeSymbolItems?.map(((t,i)=>(0,s.h)("calcite-list-item",{key:i,label:t.data.title||t.data.name,value:i,selected:this.activeSymbolItem?.data.name===t.data.name,metadata:t.data.tags?.toString(),onCalciteListItemSelect:async t=>{const e=t.target,i=this._activeSymbolItems?.[e.value];this.customSymbolError=void 0,this.arcgisActiveSymbolItemChange.emit(i),this.activeSymbolItem=i;const s=await(i?.getEsriSymbol());this.arcgisActiveSymbolChange.emit(s),t.stopPropagation()}},(0,s.h)("div",{slot:"actions-start",class:St,key:t.data.name,ref:e=>{e&&(t.getThumbnail(e).then((t=>t())),t.getEsriSymbol())}}),"custom-symbol-set"===this._activeSourceId&&(0,s.h)("calcite-action",{slot:"actions-end",appearance:"transparent",text:this.strings.removeSymbol,ref:t=>{t&&(this.actionEls[i]=t)},onClick:()=>{this.removeCustomSymbol(i),(0,s.f)(this.el)},onMouseOver:()=>this.addTooltip({referenceElement:this.actionEls[i],placement:e?"right-start":"left-start",innerHTML:this.strings.removeSymbol}),onMouseOut:()=>this.removeTooltip()},(0,s.h)("calcite-icon",{scale:"s",icon:"x"}))))))}updateListSelection(){this.el.querySelectorAll("CALCITE-LIST-ITEM").forEach((t=>{t.selected=t.value===this.activeSymbolItem?.data.name,t.selected&&t.setFocus()}))}removeCustomSymbol(t){this.allCustomFileInfos.splice(t,1),(0,l.s)(this.customSymbolsStorageId,this.allCustomFileInfos.map((t=>t.dataURL?t:{...t,cim:JSON.stringify(t.cim?.toJSON())})),!0),this._setupCustomSymbols(),this.activeSymbolItem=void 0}addTooltip(t){this.removeTooltip(),this.tooltipEl=document.createElement("calcite-tooltip"),this.tooltipEl.placement=t.placement||"auto",this.tooltipEl.referenceElement=t.referenceElement,this.tooltipEl.overlayPositioning="fixed",this.tooltipEl.innerHTML=t.innerHTML,this.tooltipEl.open=!0,this.el.parentElement?.appendChild(this.tooltipEl)}removeTooltip(){this.tooltipEl?.parentNode&&(this.tooltipEl.parentNode.removeChild(this.tooltipEl),this.tooltipEl=void 0)}removeStyle(){this.savedStyleIds=this.savedStyleIds?.filter((t=>t!==this._activeSourceId)),this._activeSourceId&&this.removeStyleIds([this._activeSourceId]),this._activeSourceId=this.savedStyleIds?.[0]||this._symbolSources?.[0].id}removeStyleIds(t){const e=(0,l.g)(lt,!0)||{};let i=e.point||[];i=i.filter((e=>!t?.includes(e))),e.point=i.length?i:void 0;let s=e.lline||[];s=s.filter((e=>!t?.includes(e))),e.line=s.length?s:void 0;let o=e.polygon||[];o=o.filter((e=>!t?.includes(e))),e.polygon=o.length?o:void 0,JSON.stringify(e)===JSON.stringify({})?(0,l.r)(lt):(0,l.s)(lt,e,!0),this._fetchSources()}async componentWillLoad(){console.warn("%cmap-config-components","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",'[arcgis-symbol-picker] component in @arcgis/map-config-components is deprecated and will be removed soon. Use "arcgis-map-config-symbol-picker" instead.'),await r.e.load();const t=(0,r.g)(this.symbol),e=(0,l.g)(lt,!0)||{};this.savedStyleIds=e?.[t]||[]}componentDidLoad(){this._symbolSources||this._fetchSources(),this._getCustomSymbolsFromStorage()}connectedCallback(){this.setUpSymbolIntersectionObserver(),this._activeSymbolFetch?.controller.abort(),this._sourcesFetchController?.abort()}disconnectedCallback(){this.tearDownSymbolIntersectionObserver()}render(){const t=this._symbolSources,e=this._activeSymbolFetch;if(!t||e)return(0,s.h)("div",{class:at},(0,s.h)("calcite-loader",{label:""}));const i=this._symbolSources?.find((t=>t.id===this._activeSourceId)),o=i?.keywords.includes("Adobe");let r;return o&&(r=this.strings.adobeCopyright.replace("${year}","2024")),(0,s.h)("div",{class:at},this._renderSourceSelection(),this._renderItemSelection(),o?(0,s.h)("calcite-notice",{open:!0,kind:"danger",key:"copyright",scale:"s"},(0,s.h)("div",{slot:"message",innerHTML:r})):null,this.customSymbolError?(0,s.h)("calcite-notice",{open:!0,class:ct,closable:!0,icon:"exclamation-mark-circle",kind:"danger",key:"large-symbol",onCalciteNoticeClose:()=>this.customSymbolError=void 0,scale:"s"},(0,s.h)("div",{slot:"message"},"too-large"===this.customSymbolError?this.strings.customSymbolErrors.tooLarge:"invalid-file"===this.customSymbolError?this.strings.customSymbolErrors.invalidFile:"storage-full"===this.customSymbolError?this.strings.customSymbolErrors.outOfSpace:"error"===this.customSymbolError?this.strings.customSymbolErrors.error:void 0)):null)}static get assetsDirs(){return["assets"]}get el(){return(0,s.a)(this)}static get watchers(){return{_activeSourceId:["handleActiveSourceItemIdChanges"]}}};vt.style='.sc-arcgis-symbol-picker-h, .arcgis-symbol-picker__container.sc-arcgis-symbol-picker {\n  display: flex;\n  flex: 1 1 auto;\n  flex-flow: column nowrap;\n  align-items: stretch;\n}\n\n.categories.sc-arcgis-symbol-picker {\n  display: flex;\n  align-content: normal;\n}\n\n.categories-center-action.sc-arcgis-symbol-picker {\n  padding: 0 5px;\n}\n\n.marker-selection.sc-arcgis-symbol-picker {\n  padding: 8px;\n}\n\n.symbol-div.sc-arcgis-symbol-picker {\n  padding: 0 8px;\n}\n\n.marker-source-select.sc-arcgis-symbol-picker {\n  width: calc(100% - 74px);\n  display: block;\n}\n\n.marker-source-select[hidden].sc-arcgis-symbol-picker + .marker-selection.sc-arcgis-symbol-picker {\n  border-top: 1px solid lightgray;\n  background-color: var(--calcite-color-foreground-1);\n}\n\n.empty-category-content.sc-arcgis-symbol-picker {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.empty-filter.sc-arcgis-symbol-picker {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n}\n\n.incompatible-symbols-notice.sc-arcgis-symbol-picker {\n  margin: 8px 0;\n}\n\n.marker-item.sc-arcgis-symbol-picker {\n  [slot="thumbnail"] > div {\n    margin: 8px 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n\n.item-palette.sc-arcgis-symbol-picker {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-upload.sc-arcgis-symbol-picker {\n  margin-top: 20px;\n  width: auto;\n}\n\n.remove-button.sc-arcgis-symbol-picker {\n  padding: 10px 0;\n}\n\n.scroller.sc-arcgis-symbol-picker {\n  max-height: var(--scroller-max-height, min(100vh - 380px, 320px));\n  overflow-y: auto;\n  min-width: 200px;\n  overflow-x: hidden;\n  display: flex;\n  justify-content: center;\n}'},37059:(t,e,i)=>{i.d(e,{c:()=>r});var s=i(69811);const o=[0,0,0,0];async function r(t,e=!1){const i=t?o:void 0,r=await(0,s.ab)();return e?r.fromJSON(i):new r(i)}},84260:(t,e,i)=>{i.d(e,{u:()=>n});var s=i(11254),o=i(10465),r=i(14528);function n({propertyName:t="strings",name:e}){let i=(0,r.r)();const n=(0,o.g)(i.el),a=new o.D,c={_lang:n.lang,_t9nLocale:n.t9nLocale};i.manager.onLoad((()=>a.promise));const m=new WeakRef(i);function d(){const t=m.deref();return t||u?.(),t}i=void 0;const h=l((()=>d()?.el)),u=(0,o.s)(h,(()=>(0,s.g)("./assets")),(({t9nLocale:e,t9nStrings:i,lang:s})=>{const o=d();if(!o)return;o[t]={...i,_lang:s,_t9nLocale:e},a.resolve()}),e);return c}const l=t=>new Proxy({},{get(e,i){const s=t();if(!s)return;const o=Reflect.get(s,i,s);return"function"==typeof o?o.bind(s):o}})}}]);