/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c611e1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c611e1"],{931:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(93814);const o=async(e,t)=>(await r.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>d,c:()=>i,d:()=>c,e:()=>o,f:()=>r,g:()=>g,i:()=>h,m:()=>a,t:()=>s,u:()=>u});const r=(e,t)=>{let n,r="idle";const o=(...o)=>new Promise((i=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),i(e(...o))):i(null);break;case"invoked":clearTimeout(n),r="idle",i(e(...o));break;case"cancelled":clearTimeout(n),r="idle",i(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout((()=>(r="idle",i(e(...o)))),t)}}));return o.flush=function(...e){return r="flushed",o(...e)},o.invoke=function(...e){return r="invoked",o(...e)},o.cancel=function(...e){return r="cancelled",o(...e)},o.getStatus=function(){return r},o};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function a(e,t){return await Promise.all([e,s(t)]),e}function s(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:r}=t(e);return[n,r]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function u(e,t){const n=[],r={};return e.forEach((e=>{const o=t(e);null==r[o]&&(r[o]=e,n.push(e))})),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const g=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,r)=>e.slice(t*r,t+t*r))),h=(e,t)=>e.includes(t)},29797:(e,t,n)=>{n.r(t),n.d(t,{arcgis_member_category_schema_editor:()=>g});var r=n(87849),o=n(38295),i=n(87744),a=n(50637),s=n(37362),l=n(64099),c=n(56175);n(59317),n(37762),n(51102),n(931),n(93814),n(15332),n(81034),n(50822);const u=async({path:e,portal:t,updateInfo:n})=>{try{const r=(await d({category:e,portal:t,num:1})).total;if(0===r)return console.warn(`No items found with category ${e} when updating schema`),{};const o=100,l=Math.ceil(r/o),c=[];for(let r=0;r<l;r++)c.push(d({category:e,portal:t,start:r*o,num:o}).then((({results:t})=>{const r={};return t.forEach((t=>{const o="change-title"===n.type?t.categories.map((t=>{const r=(0,s.g)(e,n.newTitle);return t===e?r:t.replace(`${e}/`,`${r}/`)})):t.categories.filter((t=>!t.startsWith(e)));r[t.username]=o})),r})));const u=await Promise.all(c);let g={};return u.forEach((e=>{g=Object.assign(Object.assign({},g),e)})),await Promise.all(Object.keys(g).map((e=>async function({categories:e,username:t,portal:n}){try{const r=`${(0,i.g)(n)}community/users/${t}/update`;return{result:await(0,a.r)(r,{categories:JSON.stringify(e)},{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}({categories:g[e],username:e,portal:t})))),{}}catch(t){return console.error(`Error ${n.type} items schema from path ${e}:`,t),{error:{code:"unhandledError"}}}};const d=({category:e,portal:t,start:n,num:r})=>{const o={start:n,num:r,categories:JSON.stringify([e])};return(0,a.r)(`${(0,i.g)(t)}portals/${t.id}/users/search`,o)},g=class{constructor(e){(0,r.r)(this,e),this.workflowCancel=(0,r.c)(this,"workflowCancel",7),this.newSchemaWorkflowComplete=(0,r.c)(this,"newSchemaWorkflowComplete",7),this.deleteAllSchema=(0,r.c)(this,"deleteAllSchema",7),this.arcgisMemberCategoryEditorRowWarningClick=(0,r.c)(this,"arcgisMemberCategoryEditorRowWarningClick",7),this.getCategorySchema=()=>{const{portal:e,user:t}=this;return(0,o.e)({portal:e,user:t})},this.getCategoryAggregation=()=>{const{portal:e}=this;return(async e=>{const t=`${(0,i.g)(e)}/portals/${e.id}/users/`,n={q:`orgid:${e.id}`,countFields:"categories"};try{const{aggregations:e}=await(0,a.r)(`${t}search`,Object.assign(Object.assign({},n),{countSize:200,num:0,f:"json"}));return{result:e.counts[0]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(e)},this.getDisabledWarning=e=>{const{defaultMemberCategories:t,i18n:n}=this;if(t.some((t=>{const n=t.toLowerCase();return n===e||n.includes(`${e}/`)})))return n.defaultCategoryWarning},this.updateSchema=e=>{const{portal:t}=this;return(async({categorySchema:e,portal:t})=>{try{const n=`${(0,i.g)(t)}portals/${t.id}/assignMemberCategorySchema`;return await(0,a.r)(n,{memberCategorySchema:JSON.stringify({memberCategorySchema:e})},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})({categorySchema:e,portal:t})},this.deleteSchema=()=>{const{portal:e}=this;return(async e=>{try{const t=`${(0,i.g)(e)}/portals/${e.id}/deleteMemberCategorySchema`;return await(0,a.r)(t,{},{},"post"),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(e)},this.updateSchemaFromPath=({path:e,updateInfo:t})=>{const{portal:n}=this;return u({path:e,updateInfo:t,portal:n})},this.user=void 0,this.portal=void 0,this.config=void 0,this.defaultMemberCategories=[],this.isActive=void 0}handleRowWarningClick(){this.arcgisMemberCategoryEditorRowWarningClick.emit()}async componentWillLoad(){const e=await(0,l.g)(this.el);this.i18n=e[0]}render(){const{user:e,portal:t,config:n,i18n:o,isActive:i,getDisabledWarning:a,getCategorySchema:s,getCategoryAggregation:l,updateSchema:u,deleteSchema:d,updateSchemaFromPath:g}=this,h=!(0,c.b)(e);return(0,r.h)("arcgis-category-schema-editor",{key:"788ce15af0a21ab55be68218dcf8ff4d6692a65c",user:e,portal:t,config:n,isActive:i,canFetchCategories:h,dialogHeading:o.dialogHeading,noticeTitle:o.noticeTitle,noticeDescription:o.noticeDescription,deleteConfirmMessage:o.warning.deleteInUseCategory.message,changeTitleConfirmMessage:o.warning.changeTitleInUseCategory.message,getDisabledWarning:a,getCategorySchema:s,getCategoryAggregation:l,updateSchema:u,deleteSchema:d,updateSchemaFromPath:g,alwaysShowInfoNotice:!0,onWorkflowCancel:e=>{this.workflowCancel.emit(e.detail)},onNewSchemaWorkflowComplete:e=>{this.newSchemaWorkflowComplete.emit(e.detail)},onDeleteAllSchema:()=>{this.deleteAllSchema.emit()}})}get el(){return(0,r.a)(this)}}},50637:(e,t,n)=>{n.d(t,{a:()=>f,b:()=>b,c:()=>g,d:()=>m,f:()=>u,g:()=>h,i:()=>d,p:()=>y,r:()=>v});var r=n(59317),o=n(4429),i=n(931),a=n(87744);const s={},l={},c={};async function u(e,t,n,r){var o,i,a,u;const d=null===(i=null===(o=c[t])||void 0===o?void 0:o[n])||void 0===i?void 0:i.expireAt,g=!!d&&(new Date).getTime()>d;if((null===(a=s[t])||void 0===a?void 0:a[n])&&!g)return s[t][n];l[t]||(l[t]={}),l[t][n]&&!g||(l[t][n]=e());const h=await l[t][n];if(s[t]||(s[t]={}),c[t]||(c[t]={}),s[t][n]=h,r){const{expireAfter:e,getExpireAfterFromResult:o}=r,i=o||e?(new Date).getTime()+(null!==(u=null==o?void 0:o(h))&&void 0!==u?u:e):null;c[t][n]=Object.assign(Object.assign({},c[t][n]),{expireAt:i})}return h}function d(e,t){var n;return null===(n=null==s?void 0:s[e])||void 0===n?void 0:n[t]}const g=(e,t)=>{var n,r;t?(null===(n=s[e])||void 0===n||delete n[t],null===(r=l[e])||void 0===r||delete r[t]):(delete s[e],delete l[e])};function h(e){var t,n,o,i;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===o?void 0:o.token)||(null===(i=null==e?void 0:e.portalUser)||void 0===i?void 0:i.token)||""}function m(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function p(e){var t;const{config:n}=r.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function f(e,t,n={},o){const[a]=await(0,i.l)(["esri/request"]),{api:s}=r.c;e.includes("f=")||t.append("f","json");const l=h();return l&&!t.has("token")&&t.append("token",l),new Promise(((r,i)=>{if(3===s){const s={url:!1===n.addSSL?e:p(e),form:t,timeout:n.timeout||0},l="post"===o?Object.assign({usePost:!0},n):n;a(s,l).then(r,i)}else a(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:o||"auto"})).then((e=>{r(e.data)})).catch((e=>i(e)))}))}async function v(e,t={},n={},o,a){const[s]=await(0,i.l)(["esri/request"]),{api:l,portal:c}=r.c,{customToken:u,addTokenManually:d,addSSL:g,useProxy:h}=n,m=Object.assign({},t);if(e.includes("f=")||!0===(null==a?void 0:a.excludeJson)||(m.f="json"),u)m.token=u;else if(!1!==d){const e=await b(c,l);e&&(m.token=e)}const f=!1===g?e:p(e);if(3===l){const e=Object.assign({url:f,content:m,timeout:n.timeout||0},null==a?void 0:a.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return s(e,"post"===o?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:m,method:o||"auto"},n),{timeout:n.timeout||0,useProxy:h}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(f,e)).data}}const w=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var r,i;const a=null!==(r=null==t?void 0:t.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(i=null==t?void 0:t.successStatuses)&&void 0!==i?i:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const r=await v(e,null==t?void 0:t.requestParams,{},n),i=r.status||r.jobStatus;if(a.includes(i))return await(0,o.t)((u=l++,1e3*w[u>-1&&u<w.length-1?u:w.length-1])),c();if(s.includes(i)||"failed"===i)return r;throw r;var u};try{return c()}catch(e){throw console.error(e),e}},b=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,a.i)(e))return h(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,a.i)(e))return;const{token:o}=await u((()=>C(e,null!=t?t:null===r.c||void 0===r.c?void 0:r.c.api)),"platformSelf",null!==(n=m(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return o},C=async(e,t)=>{const n=await(async(e,t)=>{var n,r,o;const s=3===t,[l]=s?await(0,i.l)(["esri/IdentityManager"]):await(0,i.l)(["esri/identity/IdentityManager"]),c=await u((()=>l.getCredential((0,a.g)(e),{oAuthPopupConfirmation:!1})),"credential",m(e.user));return null!==(o=s?null===(n=c._oAuthCred)||void 0===n?void 0:n.appId:null===(r=c.oAuthState)||void 0===r?void 0:r.appId)&&void 0!==o?o:"arcgisonline"})(e,t),r={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return v(`${(0,a.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?r:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})}},50822:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>i,c:()=>c,d:()=>u,e:()=>d,f:()=>g,g:()=>h,i:()=>s,u:()=>l});n(93814);var r=n(87744);function o(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function i(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function a(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function s(e,t){return e.owner===t.username}function l(e,t){return s(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,o="admin"===e.itemControl,i=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!s(e,t)&&o&&r.includes("esri_")&&!i.includes(r))return!1;return o}(e,t)}const c=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),u=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,d=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,g=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{}),h=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},64099:(e,t,n)=>{n.d(t,{a:()=>a,g:()=>c});var r=n(15332),o=n(81034),i=n(87849);function a(e){var t,n,i;const a=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(i=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===i?void 0:i.documentElement,s=((null==a?void 0:a.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(s)?o.l.get(s):o.l.has(s.slice(0,2))?o.l.get(s.slice(0,2)):"en"}const s={};function l(e,t){const n=`${e}${t}`;return s[n]||(s[n]=function(e,t){return new Promise(((n,r)=>{fetch((0,i.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):r()}),(()=>r()))}))}(e,t)),s[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),i=a(e),s=function(e){var t,n,i;const a=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(i=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===i?void 0:i.documentElement,s=((null==a?void 0:a.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(s)?o.l.get(s):o.l.has(s.slice(0,2))?s:"en"}(e);let c;try{c=await l(n,i)}catch(e){console.warn(`no locale for ${n} (${i}) loading default locale en.`),c=await l(n,"en")}return[c,i,s]}},81034:(e,t,n)=>{n.d(t,{C:()=>s,a:()=>l,b:()=>u,f:()=>d,g:()=>a,l:()=>i,s:()=>h});var r=n(931),o=n(15332);const i=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function a(e){return function(e,t,n){const r=(0,o.c)(e,`[${t}]`);return r?r.getAttribute(t):n}(e,"dir","ltr")}const s={rtl:"arcgis--rtl"};async function l(e,t){const{api:n,type:o,places:i}=t||{};if(4===n){const[t]=await(0,r.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:i,style:o,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:o}))}const[a]=await(0,r.l)(["dojo/number"]);return a.format(e,{type:o,places:i,pattern:null==t?void 0:t.pattern})}const c={};function u(e,t){let n=document.documentElement.lang;const r="bs"===n;if(r&&(n="hr"),t){const t=`${n}-full`,r={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,r)),c[t].format(e)}const o={year:"numeric",month:r?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,o)),c[n].format(e)}function d(e,t,n,r){const o=null!=e?e:"en";let i=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o))&&(i=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)&&(i=t.multiple),h(i,Object.assign(Object.assign({},r),{number:n}))}const g=/\$\{([^}]+)\}/g;function h(e,t,n=g){let r=e;try{r=e.replace(n,((e,n)=>function(e,t){const n=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString()))}catch(e){console.error(e)}return r}}}]);