/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-08ca20.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-08ca20"],{3764:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_data_store_databricks_credentials:()=>h});var i=a(87849),c=a(59317),n=a(62296),s=a(47172),r=a(3826),o=a(95878),l=a(28748);a(37762),a(87744),a(68194),a(50637),a(931),a(93814),a(32710),a(83929),a(76246),a(63054),a(15912),a(24869),a(72257),a(86562),a(15332),a(50020),a(50822),a(75294),a(38295),a(51102),a(56175),a(43555);const h=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.allowedAuthenticationTypes=["oAuthMachineToMachine","personalAccessToken"],this.handleAuthenticationTypeChange=e=>{const t=e.target.selectedOption.value;this.authenticationType!==t&&("oAuthMachineToMachine"===this.authenticationType?(this.clientId=void 0,this.secret=void 0):"personalAccessToken"===this.authenticationType&&(this.token=void 0),this.authenticationType=t)},this.authenticationType="oAuthMachineToMachine",this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0,this.server=void 0,this.clientId=void 0,this.secret=void 0,this.token=void 0,this.httpPath=void 0,this.catalog=void 0,this.emptyRequiredFields=new Set,this.error=void 0}async handleNext(){r.a.authenticationType=this.authenticationType,r.a.databricksServer=this.server,r.a.httpPath=this.httpPath,r.a.catalog=this.catalog,"oAuthMachineToMachine"===this.authenticationType?(r.a.clientId=this.clientId,r.a.secret=this.secret):r.a.token=this.token,this.emptyRequiredFields=this.checkValidFields(),this.emptyRequiredFields.size>0?this.handleError({code:"unhandledError"}):await this.validateConnection()}async componentWillLoad(){this.i18n=o.u.i18n.dataStoreDatabaseCredentials,this.populateFields()}checkValidFields(){const{server:e,httpPath:t,clientId:a,secret:i,token:c}=this,n=Object.assign({server:e,httpPath:t},"oAuthMachineToMachine"===this.authenticationType?{clientId:a,secret:i}:{token:c});return new Set(Object.entries(n).filter((([e,t])=>!t||""===t.trim())).map((([e])=>e)))}populateFields(){var e;this.server=r.a.databricksServer,null!==(e=this.authenticationType)&&void 0!==e||(this.authenticationType=r.a.authenticationType),this.httpPath=r.a.httpPath,this.catalog=r.a.catalog,"oAuthMachineToMachine"===this.authenticationType?(this.clientId=r.a.clientId,this.secret=r.a.secret):this.token=r.a.token}async validateConnection(){const{authenticationType:e,server:t,httpPath:a,catalog:i,clientId:o,secret:h,token:d}=this,{orgId:u}=c.c.user;this.loading=!0,this.loaderMessage=this.i18n.validating;const p=(0,l.j)({authenticationType:e,server:t,httpPath:a,catalog:i,clientId:o,secret:h,token:d}),{result:b,error:f}=await(0,n.v)(u,c.c.portal,p);"success"===(null==b?void 0:b.status)?(r.a.connectionProperties=p.info.connectionProperties,r.a.typeKeywords=[...r.a.typeKeywords,"CDW","databricks"],r.a.initialTitle=(0,s.f)("databricks"),this.newItemUpdatePage.emit("itemProperties")):this.handleError(f)}handleError(e){this.loading=!1;let t=this.i18n.errors.validationFailedTitle,a=this.i18n.errors.invalidConnection;switch(e.code){case"invalidCredentials":case"unauthorizedCredentials":a=this.i18n.errors[e.code]}this.error={title:t,description:a,details:e.details}}render(){var e;const{i18n:t,authenticationType:a,server:c,httpPath:n,catalog:s,clientId:r,secret:l,token:h,error:d}=this;return(0,i.h)("div",{key:"56cf6c49ed63031b1fbcaf41310ca685f0182843"},(0,i.h)("arcgis-new-item-loader",{key:"2c5fce9760cc7a8121b8ca0f3968cf3b43dfac37",type:this.loaderType,active:this.loading,text:this.loaderMessage}),(0,i.h)("arcgis-new-item-description",{key:"1b00f1dbf37ad02751453bed9cc8a70b78139e08",header:t.dataStoreConnection,content:t.databricks}),(0,i.h)("div",{key:"b03a34f62c09106f51b0337a802954706358e829",class:"configure-form"},(0,i.h)("calcite-label",{key:"f8c9d29c80b46eaadbbfb44eaeb44ea3251cc518"},t.server,(0,i.h)("calcite-input",{key:"e86519b7d9842a424160938c8a39c89ac920ae5b",placeholder:"server_name.com",value:c,onCalciteInputInput:e=>this.server=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("server")&&(0,i.h)("calcite-input-message",{key:"b7da1ec177ffafb089ac41bfdfa235e164d27c29",icon:"exclamation-mark-triangle",status:"invalid"},t.errors.noServer)),(0,i.h)("calcite-label",{key:"b882117a802a8076a07647c787f672defd572353"},t.authenticationType,(0,i.h)("calcite-select",{key:"1c20c7ad5b4395f9d2343c40a56d2bca1f4228d8",value:a,label:t.authenticationType,onCalciteSelectChange:this.handleAuthenticationTypeChange},this.allowedAuthenticationTypes.map((e=>(0,i.h)("calcite-option",{value:e,key:e},t[e]))))),"oAuthMachineToMachine"===a&&(0,i.h)("div",{key:"8b847ac88fd0e5fc6765ef8fc914e37586f4e333"},(0,i.h)("calcite-label",{key:"6ac4c1abb4c123d7304c94a7c2972c65b9080416"},t.clientId,(0,i.h)("calcite-input",{key:"86fa0402237ef83df75b8a2d592fa625008642f8",value:r,onCalciteInputInput:e=>this.clientId=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("clientId")&&(0,i.h)("calcite-input-message",{key:"0b71e091ccd443f58ebfd83892091ab90a25c14b",icon:"exclamation-mark-triangle",status:"invalid"},t.errors.noClientId)),(0,i.h)("calcite-label",{key:"88ae07f344234d5f19e951950c1b873bfa7cab53"},t.secret,(0,i.h)("calcite-input",{key:"60bbc4390e7fd0de19bfb12e7728da2f2598a482",type:"password",value:l,onCalciteInputInput:e=>this.secret=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("secret")&&(0,i.h)("calcite-input-message",{key:"ab9202ff6e431acdf6899e48d2cb1edaa61ef1df",icon:"exclamation-mark-triangle",status:"invalid"},t.errors.noSecret))),"personalAccessToken"===a&&(0,i.h)("calcite-label",{key:"c45b1795f86e6efe4e90499b8a922ab4f4106dff"},t.token,(0,i.h)("calcite-input",{key:"368aa82d26e5128557eb006be83db0c0468f58e7",type:"password",value:h,onCalciteInputInput:e=>this.token=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("token")&&(0,i.h)("calcite-input-message",{key:"a7634014bb91161e86065552a4192ee3f28ecb33",icon:"exclamation-mark-triangle",status:"invalid"},t.errors.noToken)),(0,i.h)("calcite-label",{key:"e206f5d1bc4194f3a53d98fd4a92831195b97c54"},t.httpPath,(0,i.h)("calcite-input",{key:"48bb5c2ad4f65fc6aa8e7e71d43b9b4592bc1c60",value:n,onCalciteInputInput:e=>this.httpPath=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("httpPath")&&(0,i.h)("calcite-input-message",{key:"f7687c62ed3a71911b62a82403d8dbe3b7f340fe",icon:"exclamation-mark-triangle",status:"invalid"},t.errors.noHttpPath)),(0,i.h)("calcite-label",{key:"2dc4f992987c83c95d12a3818158ee81eadacefa"},t.catalog,(0,i.h)("calcite-input",{key:"382c536d0cbc4415392c3895095374f4a4b6566b",value:s,placeholder:null===(e=null===o.u||void 0===o.u?void 0:o.u.i18n)||void 0===e?void 0:e.singleLayerSelect.default,onCalciteInputInput:e=>this.catalog=e.target.value.trim(),required:!0}))),(0,i.h)("arcgis-new-item-alert",{key:"c45c2210620f3e01a93151c1fe994fd0d24de7e0",heading:null==d?void 0:d.title,description:null==d?void 0:d.description,details:null==d?void 0:d.details,detailsPopoverLabel:t.errorDetails,active:!!d,onAlertDismiss:()=>this.error=void 0}))}};h.style=".configure-form{margin-top:1.5rem}calcite-label{--calcite-label-margin-bottom:1.25rem}"},47172:(e,t,a)=>{a.d(t,{f:()=>i});const i=(e,t)=>{let a;const i=null!=t?t:"";switch(e){case"amazon":a=`AmazonS3_${i}`;break;case"azure":a=`Microsoft_Azure_Storage_${i}`;break;case"bigquery":a=`BigQuery_${i}`;break;case"databricks":a=i?`Databricks_${i}`:"Databricks";break;case"snowflake":a=`Snowflake_${i}`}return a.replace(/ /g,"_").replace(/-/g,"_")}}}]);