/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-32073e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-32073e"],{3826:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>c,c:()=>o,d:()=>i});const i=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=i.state,c=i.state,o=i.state},37762:(e,t,a)=>{a.d(t,{c:()=>r});var i=a(87849);const s=e=>!("isConnected"in e)||e.isConnected,c=((e,t)=>{let a;return(...i)=>{a&&clearTimeout(a),a=setTimeout((()=>{a=0,e(...i)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))}),2e3),o=e=>"function"==typeof e?e():e,n=(e,t)=>{const a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)},r=(e,t)=>{const a=((e,t=(e,t)=>e!==t)=>{const a=o(e);let i=new Map(Object.entries(null!=a?a:{}));const s={dispose:[],get:[],set:[],reset:[]},c=()=>{var t;i=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),s.reset.forEach((e=>e()))},r=e=>(s.get.forEach((t=>t(e))),i.get(e)),h=(e,a)=>{const c=i.get(e);t(a,c,e)&&(i.set(e,a),s.set.forEach((t=>t(e,a,c))))},d="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,t)=>r(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,a)=>(h(t,a),!0)}),l=(e,t)=>(s[e].push(t),()=>{n(s[e],t)});return{state:d,get:r,set:h,on:l,onChange:(t,a)=>{const i=l("set",((e,i)=>{e===t&&a(i)})),s=l("reset",(()=>a(o(e)[t])));return()=>{i(),s()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(l("set",t.set)),t.get&&e.push(l("get",t.get)),t.reset&&e.push(l("reset",t.reset)),t.dispose&&e.push(l("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{s.dispose.forEach((e=>e())),c()},reset:c,forceUpdate:e=>{const t=i.get(e);s.set.forEach((a=>a(e,t,t)))}}})(e,t);return a.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const a=(0,i.g)();a&&((e,t,a)=>{const i=e.get(t);i?i.includes(a)||i.push(a):e.set(t,[a])})(e,t,a)},set:t=>{const a=e.get(t);a&&e.set(t,a.filter(i.f)),c(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),c(e)}}})()),a}},86194:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_service_connection:()=>r});var i=a(87849),s=a(3826),c=a(95878);a(37762);const o="example.com",n="Authorization",r=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.allowedAuthenticationSchemes=["token","basic"],this.allowedOptions=new Set(["host"]),this.parameterLocations=["header","query"],this.handleAuthenticationSchemeChange=e=>{const t=e.target.selectedOption.value;this.authenticationScheme!==t&&("token"===this.authenticationScheme?(this.username=void 0,this.password=void 0):"basic"===this.authenticationScheme&&(this.parameterName=void 0,this.parameterLocation="header",this.token=void 0,this.tokenPrefix=void 0),this.authenticationScheme=t)},this.authenticationScheme="token",this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0,this.host=void 0,this.username=void 0,this.password=void 0,this.parameterLocation="header",this.parameterName=void 0,this.tokenPrefix=void 0,this.token=void 0,this.emptyRequiredFields=new Set,this.error=void 0}async handleNext(){s.a.host=this.host,s.a.authenticationScheme=this.authenticationScheme,"basic"===this.authenticationScheme?(s.a.username=this.username,s.a.password=this.password):(s.a.parameterLocation=this.parameterLocation,s.a.parameterName=this.parameterName,s.a.tokenPrefix=this.tokenPrefix,s.a.token=this.token),this.emptyRequiredFields=this.checkValidFields(),this.emptyRequiredFields.size>0?this.handleError({code:"unhandledError"}):(s.a.initialTitle=`${this.i18n.title}_${this.host}`,this.newItemUpdatePage.emit("itemProperties"))}async componentWillLoad(){this.i18n=c.u.i18n.serviceConnection,this.populateFields(),this.populateOptions()}checkValidFields(){const{host:e,username:t,password:a,parameterName:i,parameterLocation:s,token:c}=this,o=Object.assign({host:e},"token"===this.authenticationScheme?{parameterName:i,parameterLocation:s,token:c}:{username:t,password:a});return new Set(Object.entries(o).filter((([e,t])=>!t||""===t.trim())).map((([e])=>e)))}populateFields(){var e,t;this.host=s.a.host,this.authenticationScheme=null!==(e=s.a.authenticationScheme)&&void 0!==e?e:"token","basic"===this.authenticationScheme?(this.username=s.a.username,this.password=s.a.password):(this.parameterLocation=null!==(t=s.a.parameterLocation)&&void 0!==t?t:"header",this.parameterName=s.a.parameterName,this.tokenPrefix=s.a.tokenPrefix,this.token=s.a.token)}populateOptions(){const{initialPageOptions:e}=s.a;e&&Object.entries(e).forEach((([e,t])=>{const a=e;this.allowedOptions.has(a)?this[a]=t:console.warn(`${e} is not an allowed service connection option.`)}))}handleError(e){this.loading=!1;let t=this.i18n.errors.validationFailedTitle,a=this.i18n.errors.invalidConnection;this.error={title:t,description:a,details:e.details}}getPreview(){var e;let t;const a="*".repeat(16);if("basic"===this.authenticationScheme)t=`${n}: Basic ${a}`;else if("token"===this.authenticationScheme){const i=this.host?this.host:o,s="query"===this.parameterLocation?"key":n,c=(null===(e=this.parameterName)||void 0===e?void 0:e.length)>0?this.parameterName:s,r=this.token?"*".repeat(this.token.length):a,h=`${this.tokenPrefix||""}${r}`;if("query"===this.parameterLocation){t=`https://${i}?${encodeURIComponent(c).replace(/%20/g,"+")}=${encodeURIComponent(h).replace(/%20/g,"+")}`}else t=`${c}: ${h}`}return t}render(){const{i18n:e,authenticationScheme:t,host:a,username:s,password:c,parameterName:r,parameterLocation:h,token:d,tokenPrefix:l,error:p}=this;return(0,i.h)("div",{key:"dd2b19ef66233913aa907a569dc1a0899fefabbe"},(0,i.h)("arcgis-new-item-loader",{key:"9f8ec8b3e98f31b234bdc09e21c6c56ef0e57f92",type:this.loaderType,active:this.loading,text:this.loaderMessage}),(0,i.h)("div",{key:"c85867b1c357cc7e6b1786b7a635a9fabaa0057c",class:"configure-form"},(0,i.h)("calcite-label",{key:"18db94f467e067d7aea8bff91fa1dd2bd54ada62"},e.host,(0,i.h)("calcite-input",{key:"4bec12902cf395d11b072d0a415ded113327370c",placeholder:o,prefixText:"https://",value:a,onCalciteInputInput:e=>this.host=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("host")&&(0,i.h)("calcite-input-message",{key:"6afdf68795c16bce73c29a71f727c09bf580574b",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noHost)),(0,i.h)("calcite-label",{key:"0091a40bbb5cf6b8c91d6dbedb24b689d23fde1f"},e.authenticationScheme,(0,i.h)("calcite-select",{key:"e8a27acfe6e74047eecb9f5a9ba3a2911245dfc0",value:t,label:e.authenticationScheme,onCalciteSelectChange:this.handleAuthenticationSchemeChange},this.allowedAuthenticationSchemes.map((t=>(0,i.h)("calcite-option",{value:t,key:t},"token"===t?e.apiKey:e[t]))))),"basic"===t&&(0,i.h)("div",{key:"fbcb896b0278e14052e77bd55ada66b3c535a85d"},(0,i.h)("calcite-label",{key:"f316474aeb4042caaf712b2e9f21eb689cb05dff"},e.username,(0,i.h)("calcite-input",{key:"4f44e45866738941eae90cc2c70d270287bc660f",value:s,onCalciteInputInput:e=>this.username=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("username")&&(0,i.h)("calcite-input-message",{key:"1751e2afbf96347c0285b0ccda87a7fc08c20f00",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noUsername)),(0,i.h)("calcite-label",{key:"878fd87e2afb82a72c6aa89c1129949a0619b738"},e.password,(0,i.h)("calcite-input",{key:"f354fca481280328cc5e40b89de2ffe1ceabe747",type:"password",value:c,onCalciteInputInput:e=>this.password=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("password")&&(0,i.h)("calcite-input-message",{key:"d21853be971edae7484004eef063790882e1ad48",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noPassword))),"token"===t&&(0,i.h)("div",{key:"21dd71fc62a133710ae4eb6c786f3541bb00b784"},(0,i.h)("calcite-label",{key:"5bd0619ad18e6a2f7d31a5dc5fe5dcb3b37f22ab"},e.parameterLocation,(0,i.h)("calcite-select",{key:"b94e19f3252d117231fda2831adb0a3a3cc38cf3",value:h,label:e.parameterLocation,onCalciteSelectChange:e=>this.parameterLocation=e.target.selectedOption.value},this.parameterLocations.map((t=>(0,i.h)("calcite-option",{value:t,key:t},e[t]))))),(0,i.h)("calcite-label",{key:"0713bf7cb8013148943fa45ad814b4c4bbbdcce8"},e.parameterName,(0,i.h)("calcite-input",{key:"8acd4f9096805eb9a2a04df688ef91c97cacdfdf",placeholder:"query"===h?"key":n,value:r,onCalciteInputInput:e=>this.parameterName=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("parameterName")&&(0,i.h)("calcite-input-message",{key:"5e4011fe4caa1b652ab47d17b80566bd5e88106e",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noParameterName)),(0,i.h)("calcite-label",{key:"c601c65a9e1025aac1836d3ccfa75f0e9cecdf8b"},e.token,(0,i.h)("calcite-input",{key:"d96a234354c7eb33ec3099af8f7832004bd9c40b",type:"password",value:d,onCalciteInputInput:e=>this.token=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("token")&&(0,i.h)("calcite-input-message",{key:"3a8c42f9fa0167b1e831bca281f53952cff7354e",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noToken)),(0,i.h)("calcite-label",{key:"5c835e4c8d08188979857b66d78bd6118df8df90"},e.tokenPrefix,(0,i.h)("calcite-input",{key:"7ad6a004b439dcf20a5c4d8a968839f841e8cd0e",value:l,onCalciteInputInput:e=>this.tokenPrefix=e.target.value}))),(0,i.h)("calcite-label",{key:"de0ccfee5ed06fae12645fdeae4baada2c60f25c"},"token"===this.authenticationScheme&&"query"===this.parameterLocation?e.requestPreview:e.headerPreview,(0,i.h)("div",{key:"6ef8552a48a0df046a767ef2bc21192abca9d97d",class:"preview"},(0,i.h)("code",{key:"65a565384d85a7311e66ba8928d3e392a809e0c1"},(0,i.h)("span",{key:"2a01a6bd0894bcb8e5d146d787c7f2293e0d106b",dir:"ltr"},this.getPreview()))))),(0,i.h)("arcgis-new-item-alert",{key:"75a190a235f719914123be1bf63aaa11b97212ad",heading:null==p?void 0:p.title,description:null==p?void 0:p.description,details:null==p?void 0:p.details,detailsPopoverLabel:e.errorDetails,active:!!p,onAlertDismiss:()=>this.error=void 0}))}};r.style=".configure-form{margin-top:1.5rem}.preview{display:flex;align-items:center;background-color:var(--calcite-color-foreground-2);border-inline-start:var(--calcite-border-width-lg) solid var(--calcite-color-border-1);padding:var(--calcite-spacing-md) var(--calcite-spacing-lg);min-height:1rem}.preview code{width:100%;white-space:pre-wrap;overflow-wrap:break-word;font-family:Consolas, Andale Mono, Lucida Console, Monaco, monospace}calcite-label{--calcite-label-margin-bottom:1.25rem}"},95878:(e,t,a)=>{a.d(t,{a:()=>i,u:()=>s});const i=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=i.state}}]);