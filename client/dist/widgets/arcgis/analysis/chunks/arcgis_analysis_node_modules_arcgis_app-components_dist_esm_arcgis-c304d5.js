/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c304d5.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c304d5"],{931:(e,t,i)=>{i.d(t,{l:()=>s});var n=i(93814);const s=async(e,t)=>(await n.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>h,c:()=>a,d:()=>l,e:()=>s,f:()=>n,g:()=>p,i:()=>u,m:()=>o,t:()=>r,u:()=>d});const n=(e,t)=>{let i,n="idle";const s=(...s)=>new Promise((a=>{switch(n){case"flushed":n="idle",i?(clearTimeout(i),a(e(...s))):a(null);break;case"invoked":clearTimeout(i),n="idle",a(e(...s));break;case"cancelled":clearTimeout(i),n="idle",a(null);break;default:i&&clearTimeout(i),n="pending",i=setTimeout((()=>(n="idle",a(e(...s)))),t)}}));return s.flush=function(...e){return n="flushed",s(...e)},s.invoke=function(...e){return n="invoked",s(...e)},s.cancel=function(...e){return n="cancelled",s(...e)},s.getStatus=function(){return n},s};function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function o(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:n}=t(e);return[i,n]}))),l=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function d(e,t){const i=[],n={};return e.forEach((e=>{const s=t(e);null==n[s]&&(n[s]=e,i.push(e))})),i}function h(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,n)=>e.slice(t*n,t+t*n))),u=(e,t)=>e.includes(t)},50637:(e,t,i)=>{i.d(t,{a:()=>g,b:()=>k,c:()=>p,d:()=>v,f:()=>d,g:()=>u,i:()=>h,p:()=>w,r:()=>f});var n=i(59317),s=i(4429),a=i(931),o=i(87744);const r={},c={},l={};async function d(e,t,i,n){var s,a,o,d;const h=null===(a=null===(s=l[t])||void 0===s?void 0:s[i])||void 0===a?void 0:a.expireAt,p=!!h&&(new Date).getTime()>h;if((null===(o=r[t])||void 0===o?void 0:o[i])&&!p)return r[t][i];c[t]||(c[t]={}),c[t][i]&&!p||(c[t][i]=e());const u=await c[t][i];if(r[t]||(r[t]={}),l[t]||(l[t]={}),r[t][i]=u,n){const{expireAfter:e,getExpireAfterFromResult:s}=n,a=s||e?(new Date).getTime()+(null!==(d=null==s?void 0:s(u))&&void 0!==d?d:e):null;l[t][i]=Object.assign(Object.assign({},l[t][i]),{expireAt:a})}return u}function h(e,t){var i;return null===(i=null==r?void 0:r[e])||void 0===i?void 0:i[t]}const p=(e,t)=>{var i,n;t?(null===(i=r[e])||void 0===i||delete i[t],null===(n=c[e])||void 0===n||delete n[t]):(delete r[e],delete c[e])};function u(e){var t,i,s,a;return null!=e||(e=null===n.c||void 0===n.c?void 0:n.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(s=null===(i=null==e?void 0:e.user)||void 0===i?void 0:i.credential)||void 0===s?void 0:s.token)||(null===(a=null==e?void 0:e.portalUser)||void 0===a?void 0:a.token)||""}function v(e){var t,i;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id}function b(e){var t;const{config:i}=n.c;return"https:"===window.location.protocol||!0===(null===(t=null==i?void 0:i.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function g(e,t,i={},s){const[o]=await(0,a.l)(["esri/request"]),{api:r}=n.c;e.includes("f=")||t.append("f","json");const c=u();return c&&!t.has("token")&&t.append("token",c),new Promise(((n,a)=>{if(3===r){const r={url:!1===i.addSSL?e:b(e),form:t,timeout:i.timeout||0},c="post"===s?Object.assign({usePost:!0},i):i;o(r,c).then(n,a)}else o(e,Object.assign(Object.assign({body:t},i),{timeout:i.timeout||0,method:s||"auto"})).then((e=>{n(e.data)})).catch((e=>a(e)))}))}async function f(e,t={},i={},s,o){const[r]=await(0,a.l)(["esri/request"]),{api:c,portal:l}=n.c,{customToken:d,addTokenManually:h,addSSL:p,useProxy:u}=i,v=Object.assign({},t);if(e.includes("f=")||!0===(null==o?void 0:o.excludeJson)||(v.f="json"),d)v.token=d;else if(!1!==h){const e=await k(l,c);e&&(v.token=e)}const g=!1===p?e:b(e);if(3===c){const e=Object.assign({url:g,content:v,timeout:i.timeout||0},null==o?void 0:o.v3Request);i.withCredentials&&(e.withCredentials=i.withCredentials);return r(e,"post"===s?Object.assign({usePost:!0},i):i)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:s||"auto"},i),{timeout:i.timeout||0,useProxy:u}),(null==i?void 0:i.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await r(g,e)).data}}const m=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const w=async(e,t,i)=>{var n,a;const o=null!==(n=null==t?void 0:t.pendingStatuses)&&void 0!==n?n:["processing","partial","Pending","InProgress","EXECUTING"],r=null!==(a=null==t?void 0:t.successStatuses)&&void 0!==a?a:["completed","Completed","COMPLETED"];let c=0;const l=async()=>{const n=await f(e,null==t?void 0:t.requestParams,{},i),a=n.status||n.jobStatus;if(o.includes(a))return await(0,s.t)((d=c++,1e3*m[d>-1&&d<m.length-1?d:m.length-1])),l();if(r.includes(a)||"failed"===a)return n;throw n;var d};try{return l()}catch(e){throw console.error(e),e}},k=async(e,t)=>{var i;if(!(null==e?void 0:e.isPortal)||!(0,o.i)(e))return u(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,o.i)(e))return;const{token:s}=await d((()=>y(e,null!=t?t:null===n.c||void 0===n.c?void 0:n.c.api)),"platformSelf",null!==(i=v(e.user))&&void 0!==i?i:e.id,{getExpireAfterFromResult:e=>e.expires_in});return s},y=async(e,t)=>{const i=await(async(e,t)=>{var i,n,s;const r=3===t,[c]=r?await(0,a.l)(["esri/IdentityManager"]):await(0,a.l)(["esri/identity/IdentityManager"]),l=await d((()=>c.getCredential((0,o.g)(e),{oAuthPopupConfirmation:!1})),"credential",v(e.user));return null!==(s=r?null===(i=l._oAuthCred)||void 0===i?void 0:i.appId:null===(n=l.oAuthState)||void 0===n?void 0:n.appId)&&void 0!==s?s:"arcgisonline"})(e,t),n={"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return f(`${(0,o.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?n:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},64099:(e,t,i)=>{i.d(t,{a:()=>o,g:()=>l});var n=i(15332),s=i(81034),a=i(87849);function o(e){var t,i,a;const o=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===a?void 0:a.documentElement,r=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(r)?s.l.get(r):s.l.has(r.slice(0,2))?s.l.get(r.slice(0,2)):"en"}const r={};function c(e,t){const i=`${e}${t}`;return r[i]||(r[i]=function(e,t){return new Promise(((i,n)=>{fetch((0,a.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?i(e.json()):n()}),(()=>n()))}))}(e,t)),r[i]}async function l(e,t){const i=t||e.tagName.toLowerCase(),a=o(e),r=function(e){var t,i,a;const o=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(a=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===a?void 0:a.documentElement,r=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(r)?s.l.get(r):s.l.has(r.slice(0,2))?r:"en"}(e);let l;try{l=await c(i,a)}catch(e){console.warn(`no locale for ${i} (${a}) loading default locale en.`),l=await c(i,"en")}return[l,a,r]}},68194:(e,t,i)=>{i.d(t,{r:()=>a});var n=i(50637),s=i(59317);const a=async(e,t,i={})=>{const{body:a,usePost:o,addTokenManually:r,api:c=(null===s.c||void 0===s.c?void 0:s.c.api),customToken:l}=i,d=new URLSearchParams;a&&Object.entries(a).forEach((([e,t])=>{void 0!==t&&d.append(e,t)}));const h=new URL(e);if(h.searchParams.append("f","json"),l)h.searchParams.append("token",l);else{const e=!1===r?null:await(0,n.b)(t,c);e&&h.searchParams.append("token",e)}const p=await fetch(h.toString(),{body:o?d:void 0,method:o?"POST":"GET"}),u=await p.json(),v=u.error;if(v)throw"string"==typeof v?new Error(v):v;return u}},80386:(e,t,i)=>{i.r(t),i.d(t,{arcgis_custom_login_editor:()=>v,arcgis_custom_login_editor_authentication:()=>b,arcgis_custom_login_editor_persona:()=>g,arcgis_custom_login_editor_selection:()=>f});var n=i(87849),s=i(64099),a=i(68194),o=i(87744),r=i(15332),c=i(4429);i(81034),i(931),i(93814),i(50637),i(59317),i(37762);async function l(e){try{return{result:await(0,a.r)(`${(0,o.g)(e)}portals/self/signinSettings`,e)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}async function d(e){try{return{result:await(0,a.r)(`${(0,o.g)(e)}portals/self/socialProviders`,e)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}async function h(e){try{return{result:await(0,a.r)(`${(0,o.g)(e)}portals/self/oidc`,e)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}async function p(e,t){try{return{result:await(0,a.r)(`${(0,o.g)(e)}portals/self/idp${t?"/federated":""}`,e)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}function u(e){const t=(0,r.a)(e).replace(/[<>]/g,"");return 0===t.trim().length?"":t}const v=class{constructor(e){(0,n.r)(this,e),this.personaCreated=(0,n.c)(this,"personaCreated",7),this.personaEditorClose=(0,n.c)(this,"personaEditorClose",7),this.steps={SELECTION:1,DESCRIPTION:2,AUTHENTICATION:3},this.personas=[],this.preventClose=!0,this.portal=void 0,this.previewUrl=void 0,this.clientId=void 0,this.personaId=void 0,this.activeStep=this.steps.SELECTION,this.totalSteps=3,this.previousStepLabel=void 0,this.nextStepLabel=void 0,this.activePersona=void 0,this.dialogOpen=!0,this.alertOpen=!1,this.abandonDialogOpen=!1,this.alertMessage=""}async componentWillLoad(){const e=await(0,s.g)(this.el);this.numberFormatter=new Intl.NumberFormat(e[2]),this.i18n=e[0],this.nextStepLabel=this.i18n.buttons.next,this.signinOptions=await async function(e){var t,i,n,s;const a=null!==(t=e.sourceJSON)&&void 0!==t?t:e,[o,r,c,u]=await Promise.all([l(e),d(e),h(e),p(e)]),{logins:v,social:b}=(null===(i=o.result)||void 0===i?void 0:i.signinOptionsOrder)||{logins:["arcgis","saml","oidc_","social"],social:["github","facebook","google","apple"]},g=(null===(s=null===(n=r.result)||void 0===n?void 0:n.config)||void 0===s?void 0:s.providers)||[],f=v.filter((t=>{var i,n,s,o,r;return t.startsWith("oidc")?a.canSignInOIDC&&(null===(s=null===(n=null===(i=c.result)||void 0===i?void 0:i.oidcProviders)||void 0===n?void 0:n[0])||void 0===s?void 0:s.id)===t.split("_")[1]:t.startsWith("saml_")?a.canSignInIDP&&(null===(o=u.result)||void 0===o?void 0:o.id)&&t.split("_")[1]===e.id:"saml"===t?a.canSignInIDP&&Boolean(null===(r=u.result)||void 0===r?void 0:r.id):"social"===t?a.canSignInSocial&&Boolean(g.length):"arcgis"!==t||a.canSignInArcGIS})),m=f.indexOf("saml");m>-1&&(f[m]="saml_"+e.id);const w=b.filter((e=>g.includes(e)));return Object.assign(Object.assign({},o.result),{signinOptionsOrder:{logins:f,social:w}})}(this.portal);const{personas:t}=await async function(e,t){let i=[],n=[];const{result:s}=await l(e);if(null==s?void 0:s.customOrgLoginPersonas)try{const e=JSON.parse(s.customOrgLoginPersonas);i=e.signInPersonas||[],n=e.signInPersonaIdsInUse||[]}catch(e){console.error("Error parsing 'customOrgLoginPersonas':",e)}if(t){const s=`${(0,o.g)(e)}oauth2/apps/${t}`;try{const{customAppLoginPersonas:t}=await(0,a.r)(s,e,{usePost:!0});if(i=i.map((e=>(e.fromOrg=!0,e))),!t)return{personas:i,personasInUse:n};{const e=JSON.parse(t);if(e.signInPersonas)return{personas:i.concat(e.signInPersonas),personasInUse:e.signInPersonaIdsInUse||[]}}}catch(e){console.error(e)}}return{personas:i,personasInUse:n}}(this.portal,this.clientId);this.personas=t,this.activePersona=this.personaId?this.findPersona():this.createNewPersona(),this.personaId&&(this.activeStep=this.steps.DESCRIPTION,this.totalSteps="refId"in this.activePersona?2:3,this.nextStepLabel="refId"in this.activePersona?this.i18n.buttons.editCategory:this.i18n.buttons.next)}handlePersonaUpdated(e){var t;const{persona:i,type:n}=e.detail;switch(n&&(this.totalSteps="byRef"===n?2:3),n){case"new":this.activePersona=this.createNewPersona();break;case"default":this.activePersona=this.createDefaultPersona();break;case"byRef":this.activePersona=this.createRefPersona(i);break;default:this.activePersona=Object.assign(Object.assign({},i),{id:this.activePersona.id})}null===(t=this.frameEl.contentWindow)||void 0===t||t.postMessage({type:"update",persona:this.activePersona,target:this.clientId?"app":"org",step:this.activeStep},"*")}finishPersonaEditor(e=!1){!e&&this.personaCreated.emit(this.activePersona),this.dialogOpen=!1,this.personaEditorClose.emit()}getNextId(){return`${this.clientId||this.portal.id}_${Date.now().toString(36)}`}createDefaultPersona(){return{id:this.getNextId(),label:"",description:"",signInOptions:this.signinOptions.signinOptionsOrder.logins.map((e=>Object.assign({provider:e,label:this.i18n.authenticationMethods[e.split("_")[0]].label},"social"===e&&{type:[...this.signinOptions.signinOptionsOrder.social]}))),showCreateAccountLink:this.signinOptions.enableArcGISAutoSignups,showNotAMemberLink:!0}}createRefPersona(e){return{id:this.getNextId(),label:e.label,description:e.description,refId:e.id}}createNewPersona(){return{id:this.getNextId(),label:"",description:""}}findPersona(){const e=this.personas.find((e=>e.id===this.personaId));return e||(console.error(`Persona with id ${this.personaId} not found`),this.personaId=void 0,this.createDefaultPersona())}formatProgress(){let e=this.activeStep,t=this.totalSteps;if(this.personaId){if("refId"in this.activePersona)return"";e-=1,t-=1}return`${this.numberFormatter.format(e)}/${this.numberFormatter.format(t)}`}advanceEditor(){if(this.activeStep===this.steps.DESCRIPTION&&0===this.activePersona.label.length)return this.alertOpen=!0,void(this.alertMessage=this.i18n.errors.nameRequired);const e=this.activePersona.signInOptions;if(this.activeStep===this.steps.AUTHENTICATION){let t=!0;if(e&&0!==(null==e?void 0:e.length)?e.some((e=>{var t,i;return"social"===e.provider&&(!((null===(t=e.type)||void 0===t?void 0:t.length)>0)||(null===(i=e.type)||void 0===i?void 0:i.some((e=>!this.signinOptions.signinOptionsOrder.social.includes(e)))))}))&&(this.alertMessage=this.i18n.errors.socialProviderRequired,t=!1):(this.alertMessage=this.i18n.errors.authenticationMethodsRequired,t=!1),!t)return void(this.alertOpen=!0)}if(this.activeStep===this.steps.AUTHENTICATION&&"signInOptions"in this.activePersona){const e=this.activePersona.signInOptions.filter((e=>!e.label||0===e.label.length)).map((e=>this.i18n.authenticationMethods[e.provider.split("_")[0]].required));if(e.length>0)return this.alertMessage=e.join("<br>"),void(this.alertOpen=!0)}if(this.activeStep===this.totalSteps)return this.preventClose=!1,void this.finishPersonaEditor();this.activeStep++,this.setLabels(),this.handlePersonaUpdated(new CustomEvent("personaUpdated",{detail:{persona:this.activePersona}}))}reverseEditor(){this.activeStep>this.steps.SELECTION&&this.activeStep--,this.handlePersonaUpdated(new CustomEvent("personaUpdated",{detail:{persona:this.activePersona}})),this.setLabels()}setLabels(){const{buttons:e}=this.i18n,t=[e.next,this.personaId?e.editCategory:e.createCategory],i=[void 0,e.back];this.totalSteps>2&&(t.unshift(e.next),i.push(e.back)),this.nextStepLabel=t[this.activeStep-1],this.previousStepLabel=this.activeStep===this.steps.DESCRIPTION&&this.personaId?void 0:i[this.activeStep-1]}async initializePreview(){var e;await(0,c.t)(150),null===(e=this.frameEl.contentWindow)||void 0===e||e.postMessage({type:"initialize"},"*"),this.personaId&&this.activePersona&&this.handlePersonaUpdated(new CustomEvent("personaUpdated",{detail:{persona:this.activePersona}}))}renderStepContent(){switch(this.activeStep){case this.steps.SELECTION:return(0,n.h)("arcgis-custom-login-editor-selection",{personas:this.personas,persona:this.activePersona});case this.steps.DESCRIPTION:return(0,n.h)("arcgis-custom-login-editor-persona",{persona:this.activePersona,numberFormatter:this.numberFormatter});case this.steps.AUTHENTICATION:return(0,n.h)("arcgis-custom-login-editor-authentication",{authenticationOptions:this.signinOptions.signinOptionsOrder,persona:this.activePersona,preventCreateAccount:!this.signinOptions.enableArcGISAutoSignups,preventSwitchAccount:this.signinOptions.hideCrossOrgSigninLink,numberFormatter:this.numberFormatter})}}render(){const{heading:e,steps:t}=this.i18n;return(0,n.h)(n.F,{key:"c9d6eb5b62c8c125ea7dfae545d098bfeaef0660"},(0,n.h)("calcite-dialog",{key:"91f79308e24dc6ecbcd92bd24664ea8165a72993",open:this.dialogOpen,modal:!0,placement:"cover",heading:e,headingLevel:3,onCalciteDialogBeforeClose:e=>{e.target.open=this.preventClose,this.abandonDialogOpen=this.preventClose}},this.previousStepLabel&&(0,n.h)("calcite-button",{key:"7cc5dc1e4b8e8d2e6c06018e02f0b76e9b853202",slot:"footer-start",kind:"neutral",onClick:()=>{this.reverseEditor()}},this.previousStepLabel),this.activeStep===this.totalSteps&&!this.personaId&&(0,n.h)("calcite-label",{key:"093bb745c01ccd32f36da1cb503a947b38d739d3",layout:"inline",slot:"footer-end",class:"visibility-label"},(0,n.h)("calcite-checkbox",{key:"aac7450527f8e919bb263b0ccb1b8b34041002ef",checked:!0,onCalciteCheckboxChange:e=>{this.activePersona.visible=e.target.checked,this.handlePersonaUpdated(new CustomEvent("personaUpdated",{detail:{persona:this.activePersona}}))}}),this.i18n.showOnTriage),this.nextStepLabel&&(0,n.h)("calcite-button",{key:"4806b8b802452ffc48bec1eff51dbb55e94a8758",slot:"footer-end",onClick:()=>{this.advanceEditor()}},this.nextStepLabel),(0,n.h)("calcite-alert",{key:"1b6c101ad990d3fd3d69d6879782a4f86b3d1ea9",open:this.alertOpen,onCalciteAlertClose:()=>{this.alertOpen=!1},kind:"danger",label:this.i18n.errorLabel,icon:"exclamation-mark-triangle",slot:"alerts"},(0,n.h)("p",{key:"f21657e90618d2d9b96aa4422ad9df84340a1ac9",slot:"message",innerHTML:this.alertMessage})),(0,n.h)("div",{key:"de570691ea1d04aeb96df010e12f5019d3c62c52",class:"editor-content"},(0,n.h)("div",{key:"2d99f3a992dc599b4eccc016b0a53c73dc9ea82a",class:"editor-panel"},(0,n.h)("header",{key:"106dd2daa578d1cddd92851fa86b1c440b44bff4",class:"editor-header"},(0,n.h)("h3",{key:"abfa93fb3e3317761ebbfd398fdc2c5a1d61560e",class:"editor-header-heading"},t[this.activeStep].title),(0,n.h)("p",{key:"d1da4214240e2b1991f0afcc28a9a537fb50b262",class:"editor-header-progress"},this.formatProgress())),(0,n.h)("p",{key:"599e90c8e62b9c3378b717e6f045295157938c64",class:"editor-step-description"},t[this.activeStep].description),(0,n.h)("div",{key:"fa4a9e85fb57856db4ce7c40d2db7c9cbac01e84",class:"editor-step-content"},this.renderStepContent())),(0,n.h)("div",{key:"3a907baafeb962914d170d80781c2d67c0675d59",class:"editor-preview"},(0,n.h)("calcite-notice",{key:"2f76140d663ea1ef123c85c4ecdf6e4c277ceaad",class:"editor-preview-notice",kind:"info",width:"full",open:!0},(0,n.h)("p",{key:"218fb86a529e6d3c00ef3439a41a6ae58c632c1f",slot:"title",class:"notice-title"},this.i18n.preview)),(0,n.h)("iframe",{key:"97a92bc857e05c2a5dc5a0c47cbb658f9a86fd17",class:"editor-preview-content",src:this.previewUrl,ref:e=>{this.frameEl=e},width:"100%",height:"100%",onLoad:()=>{this.initializePreview()}}),"refId"in this.activePersona&&this.activeStep===this.steps.DESCRIPTION&&(0,n.h)("calcite-notice",{key:"244ea9bf4089b83f1f742d1716a3ea2efce5c601",class:"editor-preview-restriction",kind:"info",icon:!0,open:!0},(0,n.h)("div",{key:"7661becf54511409a14870aba768cdd959698797",slot:"message"},this.i18n.restrictions))))),(0,n.h)("calcite-dialog",{key:"859ec5daaf2dfebf571e8a49f93ba6ae1e6f3537",modal:!0,heading:this.i18n.confirmLeave.title,headingLevel:4,width:"s",open:this.abandonDialogOpen,onCalciteDialogClose:()=>{this.abandonDialogOpen=!1}},(0,n.h)("p",{key:"c564a05248e3447e390a5b03b42ccab178756f9b"},this.i18n.confirmLeave.message),(0,n.h)("calcite-button",{key:"6a3979bafdb0089ba6bd6b2694d8d956d69060d2",slot:"footer-end",kind:"neutral",onClick:()=>{this.preventClose=!1,this.abandonDialogOpen=!1,this.finishPersonaEditor(!0)}},this.i18n.confirmLeave.leave),(0,n.h)("calcite-button",{key:"f594b93d514ee2d877e0ddf334374b74088161d6",slot:"footer-end",onClick:()=>{this.abandonDialogOpen=!1}},this.i18n.confirmLeave.remain)))}get el(){return(0,n.a)(this)}};v.style=".editor-content{display:flex;height:88vh;width:100%;overflow-y:hidden}.editor-preview{display:none;width:100%;flex-direction:column;overflow-x:hidden}@media (min-width: 864px){.editor-preview{display:flex}}.editor-preview-content{height:100%}.editor-preview-notice{--calcite-notice-background-color:var(--calcite-color-foreground-3)}.editor-preview-restriction{position:sticky;bottom:0.5rem;width:80%}.editor-panel{overflow-y:auto;padding-left:1.25rem;padding-right:1.25rem}@media (min-width: 864px){.editor-panel{width:500px;flex:none}}.editor-header{display:flex;align-items:center;justify-content:space-between}.editor-header-heading{font-size:1rem;font-weight:500}.editor-header-progress{font-size:0.75rem}.editor-step-description{border-width:0px;border-style:solid;border-top-color:var(--calcite-color-border-3);border-bottom-color:var(--calcite-color-border-3);padding-top:1.25rem;padding-bottom:1.25rem;font-size:0.875rem;border-block-width:1px}.editor-step-content{padding-top:1.25rem;padding-bottom:1.25rem}.notice-title{text-align:center}.visibility-label{margin-inline-end:0.5rem;align-self:flex-end}p{margin:0px}";const b=class{constructor(e){(0,n.r)(this,e),this.personaUpdated=(0,n.c)(this,"personaUpdated",7),this.MAX_NAME_LENGTH=60,this.persona=void 0,this.authenticationOptions=void 0,this.preventCreateAccount=void 0,this.preventSwitchAccount=void 0,this.numberFormatter=void 0,this.activeOptions={arcgis:!1,saml:!1,oidc:!1,social:!1},this.activeSocials={},this.arcgisLabel=void 0,this.samlLabel=void 0,this.oidcLabel=void 0,this.socialLabel=void 0,this.showCreateLink=!1,this.showSwitchLink=!1,this.authOptions=void 0}async componentWillLoad(){var e,t,i;if(this.authOptions={logins:this.authenticationOptions.logins.map((e=>e.split("_")[0])),social:[...this.authenticationOptions.social]},this.activeSocials=this.authenticationOptions.social.reduce(((e,t)=>(e[t]=!1,e)),{}),this.persona&&"signInOptions"in this.persona){const{signInOptions:n}=this.persona,s=n.map((e=>e.provider.split("_")[0])),a=(null===(e=n.find((e=>"social"===e.provider)))||void 0===e?void 0:e.type)||[],o=[...new Set(s.concat(this.authOptions.logins))],r=[...new Set(a.concat(this.authOptions.social))];this.authOptions={logins:o,social:r},n.forEach((({provider:e,type:t,label:i})=>{const n=e.split("_")[0];"social"===n&&t.forEach((e=>{this.activeSocials[e]=!0})),this.activeOptions[n]=!0,this[`${n}Label`]=i})),this.showCreateLink=null!==(t=this.persona.showCreateAccountLink)&&void 0!==t&&t,this.showSwitchLink=null!==(i=this.persona.showNotAMemberLink)&&void 0!==i&&i}const n=await(0,s.g)(this.el,"arcgis-custom-login-editor");this.i18n=n[0]}updatePersona(){const e=Object.assign(Object.assign({},this.persona),{showCreateAccountLink:this.showCreateLink,showNotAMemberLink:this.showSwitchLink,signInOptions:this.authOptions.logins.filter((e=>this.activeOptions[e])).map((e=>{const t={provider:e,label:this[`${e}Label`]};return"social"===e&&(t.type=this.authOptions.social.filter((e=>this.activeSocials[e]))),"oidc"!==e&&"saml"!==e||(t.provider=this.authenticationOptions.logins.find((t=>t.startsWith(e)))),t}))});this.personaUpdated.emit({persona:e})}handleAuthMethodsReorder(e){const{dragEl:t,newIndex:i,oldIndex:n}=e.detail,s=[...this.authOptions.logins];s.splice(n,1),s.splice(i,0,t.getAttribute("data-value")),this.authOptions=Object.assign(Object.assign({},this.authOptions),{logins:s}),this.updatePersona()}handleSocialMethodsReorder(e){const{dragEl:t,newIndex:i,oldIndex:n}=e.detail,s=[...this.authOptions.social];s.splice(n,1),s.splice(i,0,t.value),this.authOptions=Object.assign(Object.assign({},this.authOptions),{social:s}),this.updatePersona()}charsEntered(e){var t;const i=this[`${e}Label`];return null!==(t=null==i?void 0:i.length)&&void 0!==t?t:0}renderBlock(e){const t=this.i18n.authenticationMethods[e],i=-1===this.authenticationOptions.logins.findIndex((t=>t.startsWith(e)));return(0,n.h)("calcite-block",{open:!0,heading:t.label,headingLevel:4,description:t.description,"data-value":e,key:e},(0,n.h)("calcite-switch",{slot:"actions-end",checked:this.activeOptions[e],disabled:i&&!this.activeOptions[e],onCalciteSwitchChange:t=>{this.activeOptions=Object.assign(Object.assign({},this.activeOptions),{[e]:t.target.checked}),this.updatePersona()}}),i&&(0,n.h)("calcite-notice",{kind:"warning",scale:"s",icon:!0,open:!0,class:"method-notice"},(0,n.h)("div",{slot:"message"},this.i18n.loginNotAvailable)),"social"===e&&this.activeOptions.social&&(0,n.h)("calcite-list",{dragEnabled:!0,selectionMode:"none",label:this.i18n.socialProviders,onCalciteListOrderChange:this.handleSocialMethodsReorder.bind(this)},this.authOptions.social.map((e=>(0,n.h)("calcite-list-item",{label:t[e],value:e,key:e},(0,n.h)("calcite-switch",{slot:"actions-end",onCalciteSwitchChange:t=>{this.activeSocials=Object.assign(Object.assign({},this.activeSocials),{[e]:t.target.checked}),this.updatePersona()},checked:this.activeSocials[e]}))))),(0,n.h)("div",{class:{"method-label":!0,hide:!this.activeOptions[e]}},(0,n.h)("calcite-label",null,this.i18n.name,(0,n.h)("calcite-input-text",{placeholder:this.i18n.enterTitle,maxLength:this.MAX_NAME_LENGTH,value:this[`${e}Label`],onCalciteInputTextInput:t=>{this[`${e}Label`]=t.target.value,this.updatePersona()},onCalciteInputTextChange:t=>{this[`${e}Label`]=u(t.target.value),this.updatePersona()}}),(0,n.h)("calcite-input-message",{scale:"l"},(0,n.h)("div",null,(0,n.h)("span",{class:"count"},this.numberFormatter.format(this.charsEntered(e))),"/",this.numberFormatter.format(this.MAX_NAME_LENGTH))))))}render(){const{createAccount:e,switchOrganization:t}=this.i18n;return(0,n.h)(n.H,{key:"5cf85bc633a896fb94d64d3c5dc018b9ad37dbaa"},(0,n.h)("calcite-block-group",{key:"6014021b4e533f987244de89621a96a2d06bf13c",dragEnabled:!0,label:this.i18n.authenticationProviders,onCalciteBlockGroupOrderChange:this.handleAuthMethodsReorder.bind(this)},this.authOptions.logins.map((e=>this.renderBlock(e)))),(0,n.h)("calcite-block-group",{key:"d4959faca038aa66921ebd945b605007bdb81128",label:"options"},(0,n.h)("calcite-block",{key:"5d6d6cf032d5c332bb1f75b3bcf47256c8ac67b8",open:!0,heading:e.label,headingLevel:4,description:e.description,class:{hide:this.preventCreateAccount}},(0,n.h)("calcite-switch",{key:"abcf6441bfc3d7d3d55522b6649944e33d78b94e",slot:"actions-end",checked:this.showCreateLink,onCalciteSwitchChange:e=>{this.showCreateLink=e.target.checked,this.updatePersona()}})),(0,n.h)("calcite-block",{key:"fd2ae568d2a20026874ba13da5488fe8775134ce",open:!0,heading:t.label,headingLevel:4,description:t.description,class:{hide:this.preventSwitchAccount}},(0,n.h)("calcite-switch",{key:"cd9b24ac3a2d27503fcecdbefdb02256cc4e67fe",slot:"actions-end",checked:this.showSwitchLink,onCalciteSwitchChange:e=>{this.showSwitchLink=e.target.checked,this.updatePersona()}}))))}get el(){return(0,n.a)(this)}};b.style="calcite-input-message{--calcite-color-text-1:var(--calcite-color-border-input);--calcite-input-message-spacing-value:0;flex-direction:column;align-items:flex-end}calcite-block>calcite-switch{align-content:center}calcite-list-item>calcite-switch{padding-inline-end:0.5rem}.method-label{padding-bottom:0.75rem}.method-notice{margin-top:-1rem;margin-bottom:1rem}.hide{display:none}";const g=class{constructor(e){(0,n.r)(this,e),this.personaUpdated=(0,n.c)(this,"personaUpdated",7),this.personaVisibilityChangeInternal=(0,n.c)(this,"personaVisibilityChangeInternal",7),this.MAX_NAME_LENGTH=60,this.MAX_DESCRIPTION_LENGTH=100,this.WARNING_LENGTH=10,this.persona=void 0,this.numberFormatter=void 0}async componentWillLoad(){const e=await(0,s.g)(this.el,"arcgis-custom-login-editor");this.i18n=e[0]}nameCount(){var e,t,i;return null!==(i=null===(t=null===(e=this.persona)||void 0===e?void 0:e.label)||void 0===t?void 0:t.length)&&void 0!==i?i:0}descriptionCount(){var e,t,i;return null!==(i=null===(t=null===(e=this.persona)||void 0===e?void 0:e.description)||void 0===t?void 0:t.length)&&void 0!==i?i:0}async handleTextInput(e,t){const i=e.target,n=i.value;this.personaUpdated.emit({persona:Object.assign(Object.assign({},this.persona),{[t]:n})}),await(0,c.t)(20),i.setFocus()}handleTextChange(e,t){const i=u(e.target.value);this.personaUpdated.emit({persona:Object.assign(Object.assign({},this.persona),{[t]:i})})}render(){return(0,n.h)(n.H,{key:"4ae5b96e4d68cdac54beba060f74654da7144bf6"},(0,n.h)("calcite-label",{key:"1522d3ca01e82d800cd3510eed2d9d7bff39ad1d"},this.i18n.name,(0,n.h)("calcite-input-text",{key:"0adf718b6efe285018daa72a8a1e9a8ac3bc11f8",placeholder:this.i18n.enterName,value:this.persona.label,maxLength:this.MAX_NAME_LENGTH,onCalciteInputTextInput:e=>{this.handleTextInput(e,"label")},onCalciteInputTextChange:e=>{this.handleTextChange(e,"label")}}),(0,n.h)("calcite-input-message",{key:"00e1abe74118a64911cc5b41613acb9b08565f19",scale:"l",status:this.MAX_NAME_LENGTH-this.nameCount()<this.WARNING_LENGTH?"invalid":"idle"},(0,n.h)("div",{key:"95ae893a58e6c85ea5d8c57e312f7cf98a99ca15"},(0,n.h)("span",{key:"ce5f2ece2ea9af157f8910477f86d4eef4016a2a",class:"count"},this.numberFormatter.format(this.nameCount())),"/",this.numberFormatter.format(this.MAX_NAME_LENGTH)))),(0,n.h)("calcite-label",{key:"c1035aa0f6281ce84a530e2f75fcec4b023c2017",for:"persona-description"},this.i18n.description,(0,n.h)("calcite-input-text",{key:"475b26365d644a19b17519b4707e2d491f3b4158",placeholder:this.i18n.enterDescription,value:this.persona.description,maxLength:this.MAX_DESCRIPTION_LENGTH,onCalciteInputTextInput:e=>{this.handleTextInput(e,"description")},onCalciteInputTextChange:e=>{this.handleTextChange(e,"description")}}),(0,n.h)("calcite-input-message",{key:"ed9ecd6f6d5d6246dc0284a1a206ec0ac85bff31",scale:"l",status:this.MAX_DESCRIPTION_LENGTH-this.descriptionCount()<this.WARNING_LENGTH?"invalid":"idle"},(0,n.h)("div",{key:"87e1b0db17a91e6fcdf8f523840f42ffb8f89873"},(0,n.h)("span",{key:"0018972ed4d1bedf3c5423b5d7d4a28396c5ec72",class:"count"},this.numberFormatter.format(this.descriptionCount())),"/",this.numberFormatter.format(this.MAX_DESCRIPTION_LENGTH))),(0,n.h)("calcite-notice",{key:"0980b1b9e523797294dc7ede9b4862d733adf272",kind:"info",scale:"s",icon:!0,open:!0},(0,n.h)("div",{key:"aa0ac51395714bba3aecc36f9ef701ece48baed4",slot:"message"},this.i18n.showOnTriageDescription))))}get el(){return(0,n.a)(this)}};g.style="calcite-input-message{--calcite-color-text-1:var(--calcite-color-border-input);--calcite-input-message-spacing-value:0;flex-direction:column;align-items:flex-end}calcite-input-message[status=invalid] .count{color:var(--calcite-color-status-danger)}";const f=class{constructor(e){(0,n.r)(this,e),this.personaUpdated=(0,n.c)(this,"personaUpdated",7),this.persona=void 0,this.personas=[]}async componentWillLoad(){const e=await(0,s.g)(this.el,"arcgis-custom-login-editor");this.i18n=e[0]}handlePersonaSelection(e){const t=e.target.selectedItems[0].getAttribute("data-value");if("new"!==t&&"default"!==t){const e=this.personas.find((e=>e.id===t));this.personaUpdated.emit({persona:e,type:e.fromOrg?"byRef":"existing"})}else this.personaUpdated.emit({persona:this.persona,type:t})}getDropdownInfo(){var e;if(this.persona.label)return{label:this.persona.label,value:this.persona.id};if("refId"in this.persona){const t=null===(e=this.personas)||void 0===e?void 0:e.find((e=>e.id===this.persona.refId));return{label:(null==t?void 0:t.label)||"",value:this.persona.id}}return"signInOptions"in this.persona?{label:this.i18n.orgDefaults,value:"default"}:{label:this.i18n.createNew,value:"new"}}render(){const{label:e,value:t}=this.getDropdownInfo();return(0,n.h)(n.H,{key:"e2b4944970f845cb198ffe0944b236a3929a1e77"},(0,n.h)("calcite-label",{key:"7585719db725a15e7b5380c42c0464e55dd8d206"},this.i18n.select,(0,n.h)("calcite-dropdown",{key:"0ec66774a9b3e69098e183e45b73ccb8b15cc3a1",onCalciteDropdownSelect:this.handlePersonaSelection.bind(this)},(0,n.h)("calcite-button",{key:"177477869f558f5f0c3cbade47203d273438da04",slot:"trigger",width:"full",kind:"neutral",appearance:"outline",iconEnd:"chevron-down",alignment:"icon-end-space-between"},e),(0,n.h)("calcite-dropdown-group",{key:"aeddb16c97146262ad5c08ab614ed77a8291c9f0",selectionMode:"single"},(0,n.h)("calcite-dropdown-item",{key:"b83adb0840d3d29996aaf7b57acae9b2d5987a2b","data-value":"new",selected:"new"===t,label:this.i18n.createNew},this.i18n.createNew),(0,n.h)("calcite-dropdown-item",{key:"c0f4c4b973704de0c257dc0828dbcabe1bad27f0","data-value":"default",selected:"default"===t,label:this.i18n.orgDefaults},this.i18n.orgDefaults),this.personas.map((t=>(0,n.h)("calcite-dropdown-item",{"data-value":t.id,key:t.id,iconEnd:t.fromOrg?"information":void 0,selected:e===t.label},t.label)))))),"refId"in this.persona&&(0,n.h)("calcite-notice",{key:"29a7a92c530d425eeef7c257977ef6a10e6e359a",kind:"info",scale:"s",icon:!0,open:!0},(0,n.h)("div",{key:"2a7b88cd3e308e5799fc8cb54cb48ed464d25947",slot:"message"},this.i18n.restrictions)))}get el(){return(0,n.a)(this)}}},81034:(e,t,i)=>{i.d(t,{C:()=>r,a:()=>c,b:()=>d,f:()=>h,g:()=>o,l:()=>a,s:()=>u});var n=i(931),s=i(15332);const a=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,i){const n=(0,s.c)(e,`[${t}]`);return n?n.getAttribute(t):i}(e,"dir","ltr")}const r={rtl:"arcgis--rtl"};async function c(e,t){const{api:i,type:s,places:a}=t||{};if(4===i){const[t]=await(0,n.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:a,style:s,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:s}))}const[o]=await(0,n.l)(["dojo/number"]);return o.format(e,{type:s,places:a,pattern:null==t?void 0:t.pattern})}const l={};function d(e,t){let i=document.documentElement.lang;const n="bs"===i;if(n&&(i="hr"),t){const t=`${i}-full`,n={dateStyle:"full",timeStyle:"long"};return l[t]||(l[t]=new Intl.DateTimeFormat(i,n)),l[t].format(e)}const s={year:"numeric",month:n?"numeric":"short",day:"numeric"};return l[i]||(l[i]=new Intl.DateTimeFormat(i,s)),l[i].format(e)}function h(e,t,i,n){const s=null!=e?e:"en";let a=t.unknown;return(1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(s))&&(a=t.single),1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(s)&&(a=t.multiple),u(a,Object.assign(Object.assign({},n),{number:i}))}const p=/\$\{([^}]+)\}/g;function u(e,t,i=p){let n=e;try{n=e.replace(i,((e,i)=>function(e,t){const i=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof i||"number"==typeof i?i:e}(i,t).toString()))}catch(e){console.error(e)}return n}}}]);