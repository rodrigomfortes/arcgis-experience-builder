/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff"],{3826:(e,i,t)=>{t.d(i,{a:()=>l,b:()=>a,c:()=>r,d:()=>n});const n=(0,t(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),l=n.state,a=n.state,r=n.state},44069:(e,i,t)=>{t.d(i,{A:()=>l,a:()=>a,b:()=>r,c:()=>o,d:()=>s,u:()=>n});const n=["esriFieldTypeOID","esriFieldTypeGlobalID"],l={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},a={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},r={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},s=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],o=["zip","csv","xls","xlsx"]},50822:(e,i,t)=>{t.d(i,{a:()=>r,b:()=>a,c:()=>d,d:()=>c,e:()=>u,f:()=>p,g:()=>v,i:()=>s,u:()=>o});t(93814);var n=t(87744);function l(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function a(e){var i;return l(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function r(e){var i;return l(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function s(e,i){return e.owner===i.username}function o(e,i){return s(e,i)||function(e,i){var t;if(null!=e.isAdmin)return!!e.isAdmin;const n=e.owner,l="admin"===e.itemControl,a=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!s(e,i)&&l&&n.includes("esri_")&&!a.includes(n))return!1;return l}(e,i)}const d=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),c=(e,i)=>`${(0,n.a)(i)}item.html?id=${e}`,u=(e,i)=>`${(0,n.g)(i)}/content/users/${e}`,p=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{}),v=(e,i)=>`${(0,n.a)(i)}content/items/${e}`},51716:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_append_key_pair_select:()=>d});var n=t(87849),l=t(3826),a=t(44069),r=t(95878),s=t(52763),o=t(59317);t(37762),t(8214),t(56175),t(50822),t(93814),t(87744),t(66111),t(83929),t(50637),t(931),t(15912);const d=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.newItemPrevPage=(0,n.c)(this,"newItemPrevPage",7),this.workflowComplete=(0,n.c)(this,"workflowComplete",7),this.handleTimezoneChange=e=>{this.selectedTimezone=e.detail},this.handleKeyPairChange=e=>{this.selectedKeyPair=e.detail},this.i18n=void 0,this.selectedKeyPair=void 0,this.selectedTimezone=void 0,this.oidFieldSelected=!1,this.insertAttachmentsEnabled=!1,this.featureAttachmentOption=null,this.error=void 0}handleNext(){if("add"!==l.a.addAppendSelectOption){if(Object.values(this.selectedKeyPair).includes(this.noneString))return void(this.error={title:r.u.i18n.error,message:this.i18n.noKeyPair});l.a.uidPair=this.selectedKeyPair}l.a.timezone=this.selectedTimezone,l.a.insertAttachmentsEnabled=this.insertAttachmentsEnabled,l.a.featureAttachmentOption=this.featureAttachmentOption,this.newItemUpdatePage.emit("appendMatchFields")}async handlePrev(e){var i;(null===(i=l.a.analyzeResults.publishParameters.layers)||void 0===i?void 0:i.length)>1||(e.preventDefault(),l.a.uidPair=null,this.newItemPrevPage.emit())}componentWillLoad(){var e,i;const{originalFileName:t,dataLayer:n,addAppendSelectOption:a}=l.a;this.i18n=r.u.i18n.appendKeyValuePair,this.serviceLayer=l.a.sourceDataLayer,this.selectedTimezone=null!==(e=l.a.timezone)&&void 0!==e?e:(null===(i=null===o.c||void 0===o.c?void 0:o.c.portal)||void 0===i?void 0:i.isPortal)?"UTC":"GMT",this.noneString=`<${r.u.i18n.appendKeyValuePair.noneField}>`,this.timezoneDescription=this.i18n.timezoneDescription.replace("${uploadedFileName}",t),this.canChooseAttachments="overwrite"!==a&&"File Geodatabase"===l.a.type&&this.serviceLayer.hasAttachments&&n.hasAttachments,l.a.attachmentsEnabled=this.canChooseAttachments,this.findKeyPairs()}findKeyPairs(){var e;const i={},t=this.serviceLayer.fields||[],n=this.serviceLayer.indexes||[],r=l.a.backupLayerFields;n.filter((e=>null==e?void 0:e.isUnique)).forEach((e=>{var i;((null===(i=e.fields)||void 0===i?void 0:i.split(","))||[]).forEach((e=>{t.some((i=>i.name.toLowerCase()===e.toLowerCase()&&(i.isUniqueIndex=!0,!0)))}))})),this.serviceUIDFields=t.filter((e=>e.type&&a.u.includes(e.type)||e.isUniqueIndex)).sort(((e,i)=>e.name.localeCompare(i.name))),this.serviceUIDFields.forEach((e=>{const t=[];r.forEach((i=>{(0,s.c)(e,i)&&t.push(i.name)})),i[e.name]={name:e.name,type:e.type,idx:0,isUniqueIndex:null==e?void 0:e.isUniqueIndex,possibleMatches:[this.noneString,...t],disabled:!0}})),this.finalKeyPairs=Object.assign({[this.noneString]:{name:this.noneString,type:"None",possibleMatches:[this.noneString]}},i),this.selectedKeyPair=null!==(e=l.a.uidPair)&&void 0!==e?e:this.finalKeyPairs[this.noneString],l.a.serviceUIDFields=this.serviceUIDFields}render(){const{error:e,i18n:i,timezoneDescription:t,canChooseAttachments:a}=this,{addAppendSelectOption:r,backupLayerFields:s}=l.a,{helpBase:d,helpMap:c}=o.c.config,u="add"===r,p=null==s?void 0:s.some((e=>"esriFieldTypeDate"===e.type)),v=`${d}${c[120004711]}`;return(0,n.h)(n.H,{key:"c14d55e065b2130079a7f63102b4fc5528d93a3d"},!u&&(0,n.h)("div",{key:"dceae10bd5d125bdeda644e345a3d01956d52cb7",class:"section"},(0,n.h)("arcgis-new-item-append-key-value-pair",{key:"54a88858115d5a4f2971e242e21b1b6cde9ebccf",keyPairs:this.finalKeyPairs,onKeyPairChange:this.handleKeyPairChange})),p&&(0,n.h)("div",{key:"fd16310368e753a6801357d1099eb331da69e7d3",class:"section"},(0,n.h)("arcgis-new-item-description",{key:"93b45e1dace32ed69ef5397be549ddd7180b0753",header:i.selectTimeZone,content:i.timeZone}),(0,n.h)("div",{key:"0e89634bf207127b71f9168f5aeae0631b7d4f71",class:"timezone-wrapper"},(0,n.h)("arcgis-new-item-timezone-dropdown",{key:"5ce2bc070efb59428daf00ded25650d95da674ec",class:"timezone",onTimezoneChange:this.handleTimezoneChange,defaultTimezone:this.selectedTimezone,subTitle:t}))),a&&(0,n.h)("div",{key:"2bfed65048efed3b36414860dc598232782a3c75",class:"section"},(0,n.h)("div",{key:"4f081d8d6dc62f048715f8beea79594264df6a0e",class:"header"},i.attachmentOptions),(0,n.h)("calcite-label",{key:"258f49fe040aa7c7fdf1d2a61307eb9f843ae0f1"},i.chooseAttachments,(0,n.h)("div",{key:"526068cf6c8aed9805a3919bfdc413390095fe7c",class:"attachments-toggle"},i.includeAttachments,(0,n.h)("calcite-switch",{key:"cd2679c15082c02dac9228d7bda41d73cdec1852",onCalciteSwitchChange:e=>{this.insertAttachmentsEnabled=e.target.checked}})))),(0,n.h)("arcgis-new-item-alert",{key:"dfde046df156870e06c7324f050eb39710bba949",active:"esriFieldTypeOID"===this.selectedKeyPair.type,kind:"warning",heading:i.learnMoreUIDTitle,link:{href:v,title:i.learnMoreUIDLink}}),(0,n.h)("arcgis-new-item-alert",{key:"63677288f1283e558ad28825371fbee65aba3150",heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,kind:"danger",onAlertDismiss:()=>this.error=null}))}get el(){return(0,n.a)(this)}};d.style=".timezone-wrapper{background-color:var(--calcite-color-background)}.timezone{margin-bottom:0.75rem;display:block}.header{padding-bottom:0.5rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.attachments-toggle{display:flex;justify-content:space-between;background-color:var(--calcite-color-foreground-1);padding:0.5rem;border:1px solid var(--calcite-ui-border-input)}.section{margin-bottom:1.5rem}"},52763:(e,i,t)=>{t.d(i,{a:()=>c,c:()=>o,g:()=>d,h:()=>u});var n=t(3826),l=t(8214),a=t(15912),r=t(95878),s=function(e,i){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&i.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(t[n[l]]=e[n[l]])}return t};function o(e,i){var t;const n=(null==e?void 0:e.type)||null,l=(null==i?void 0:i.type)||null;return l&&(l===n||(null===(t={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeDate","esriFieldTypeGUID","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeBigInteger"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDateOnly:["esriFieldTypeDateOnly"],esriFieldTypeTimeOnly:["esriFieldTypeTimeOnly"],esriFieldTypeTimestampOffset:["esriFieldTypeTimestampOffset"],esriFieldTypeBigInteger:["esriFieldTypeBigInteger"]}[n])||void 0===t?void 0:t.includes(l)))}function d(e){var i;const{timezone:t,analyzeResults:o,type:d,fieldMappings:c,dataLayer:u,id:p,portal:v,uidPair:m,addAppendSelectOption:h,sourceDataLayer:g,attachmentsEnabled:y,insertAttachmentsEnabled:f,featureAttachmentOption:b}=e;let T,F;const{publishParameters:I}=o,O=s(o,["publishParameters"]),P="upsert"===h||"update"===h,k=function(e){const i=e.filter((e=>e.source!==`<${r.u.i18n.appendKeyValuePair.noneField}>`)),t=i.map((({source:e,name:i})=>({source:e,name:i})));return t}(c),S=function(e){const i=e.map((e=>e.name));return i}(k),w={dateFieldsTimeReference:Object.assign(Object.assign({},(null==v?void 0:v.isPortal)?{timezone:t||"UTC"}:{ianaTimeZone:t||"GMT"}),{respectsDaylightSaving:!0})},D={sourceTableName:u.name,fieldMappings:(null==k?void 0:k.length)?JSON.stringify(k):null,upsert:P,skipInserts:"update"===h,skipUpdates:!1,useGlobalIds:P&&"esriFieldTypeGlobalID"===(null==m?void 0:m.type),updateGeometry:!P||"attributeAndGeometry"===n.a.addAppendSelectUpdateTypeOption,appendFields:S.length?JSON.stringify(S):null,appendItemId:p,appendUploadFormat:a.a[n.a.type].appendUploadFormat,rollbackOnFailure:!0};"Table"===g.type&&(I.locationType="none");const A=s(I,["layers"]);if("CSV"===d)I.layerInfo.dateFieldsTimeReference=w.dateFieldsTimeReference,F=Object.assign(Object.assign(Object.assign({},w),I),O);else if("Microsoft Excel"===d){const e=function(e,i){const t=Object.assign({},e);t.locationType=(null==i?void 0:i.locationType)||e.locationType,"address"===t.locationType?(t.addressFields=i.addressFields,t.sourceCountry=i.sourceCountry):"coordinates"===t.locationType&&(t.coordinateFieldType=i.coordinateFieldType,"LatitudeAndLongitude"===t.coordinateFieldType?(t.latitudeFieldName=i.latitudeFieldName,t.longitudeFieldName=i.longitudeFieldName):t.coordinateFieldName=i.coordinateFieldName);return t}((0,l.a)({},!0),A);e.dateFieldsTimeReference=w.dateFieldsTimeReference,A.name=u.name,F=Object.assign(Object.assign(Object.assign(Object.assign({},w),{layers:[e]}),A),O)}else F=Object.assign(Object.assign(Object.assign({},w),I),O);return T=Object.assign(Object.assign(Object.assign({},D),{appendSourceInfo:JSON.stringify(F)}),y&&function({insertAttachmentsEnabled:e}){return e?{skipAttachmentInserts:!1,skipAttachmentUpdates:!0,skipAttachmentDeletes:!0}:{skipAttachmentInserts:!0,skipAttachmentUpdates:!0,skipAttachmentDeletes:!0}}({appendType:h,insertAttachmentsEnabled:f,featureAttachmentOption:b})),"add"===h?T.upsertMatchingField=g.objectIdField||(null===(i=g.uniqueField)||void 0===i?void 0:i.name):P&&(null==m?void 0:m.isUniqueIndex)&&(T.upsertMatchingField=null==m?void 0:m.name),T}function c(e,i,t){return"File Geodatabase"===e&&t.hasAttachments&&i.hasAttachments}function u(e,i){const t=i.appendErrorMessages;let n=r.u.i18n.error,l=t.appendError;switch(e.code){case"invalidUniqueIdentifier":n=t.invalidUniqueIdentifier.title,l=t.invalidUniqueIdentifier.description;break;case"cannotAddNullData":n=t.cannotAddNullData.title,l=t.cannotAddNullData.description;break;case"exceededMaxFieldLength":n=t.exceededMaxFieldLength.title,l=t.exceededMaxFieldLength.description;break;case"invalidFieldType":n=t.invalidFieldType.title,l=t.invalidFieldType.description}return{title:n,description:l}}},56175:(e,i,t)=>{t.d(i,{A:()=>A,B:()=>j,C:()=>v,D:()=>U,a:()=>s,b:()=>a,c:()=>r,d:()=>h,e:()=>b,f:()=>f,g:()=>T,h:()=>I,i:()=>p,j:()=>F,k:()=>C,l:()=>o,m:()=>O,n:()=>c,o:()=>u,p:()=>m,q:()=>E,r:()=>G,s:()=>d,t:()=>k,u:()=>S,v:()=>x,w:()=>D,x:()=>g,y:()=>y,z:()=>w});var n=t(50822);const l=e=>{var i,t,n;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id};function a(e){return e&&!e.orgId}function r(e,i){return(0,n.u)(e,i)||"update"===e.itemControl||(0,n.c)([e],i)&&f(i)}function s(e,i){const t=(0,n.c)([e],i),l=(0,n.u)(e,i)||f(i)&&t,a=T(i)&&P(i);return!!(l||t&&a)}const o=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function p(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function v(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const h=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},g=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},y=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function f(e){return"org_admin"===l(e)||"account_admin"===l(e)}function b(e){return["org_admin","account_admin"].includes(l(e))&&!(null==e?void 0:e.roleId)}function T(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function F(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function I(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function O(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const P=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function A(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function x(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function C(e,i,t,n){const l=n&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(n.type),a=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!f(i)&&!a||!(null==t?void 0:t.isPortal)&&!l)}function U(e){return!!e&&(!T(e)||T(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const j=({items:e,user:i,portal:t})=>{const l=e[0],a=l.owner;if(t.isPortal&&a!==i.username&&a.includes("esri_")&&!["esri_livingatlas"].includes(a))return!1;const s=(0,n.u)(l,i),o=T(i),d=_(i),c=r(l,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!o&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||k(e)||S(e)||!!i.canSharePublic&&w(e)}(i,t)||_(i));return s||c||(0,n.c)(e,i)&&d};function _(e){return x(e)||D(e)||A(e)}const z=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function G(e){return e.some((e=>z.includes(e)))}function E(e){return e.filter((e=>z.includes(e)))}},95878:(e,i,t)=>{t.d(i,{a:()=>n,u:()=>l});const n=(0,t(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),l=n.state}}]);