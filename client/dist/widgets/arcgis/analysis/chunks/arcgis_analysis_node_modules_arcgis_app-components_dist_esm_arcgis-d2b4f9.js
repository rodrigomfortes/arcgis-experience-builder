/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d2b4f9.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d2b4f9"],{931:(e,t,n)=>{n.d(t,{l:()=>i});var o=n(93814);const i=async(e,t)=>(await o.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>u,c:()=>r,d:()=>c,e:()=>i,f:()=>o,g:()=>h,i:()=>p,m:()=>s,t:()=>a,u:()=>d});const o=(e,t)=>{let n,o="idle";const i=(...i)=>new Promise((r=>{switch(o){case"flushed":o="idle",n?(clearTimeout(n),r(e(...i))):r(null);break;case"invoked":clearTimeout(n),o="idle",r(e(...i));break;case"cancelled":clearTimeout(n),o="idle",r(null);break;default:n&&clearTimeout(n),o="pending",n=setTimeout((()=>(o="idle",r(e(...i)))),t)}}));return i.flush=function(...e){return o="flushed",i(...e)},i.invoke=function(...e){return o="invoked",i(...e)},i.cancel=function(...e){return o="cancelled",i(...e)},i.getStatus=function(){return o},i};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){return null!=e}async function s(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:o}=t(e);return[n,o]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function d(e,t){const n=[],o={};return e.forEach((e=>{const i=t(e);null==o[i]&&(o[i]=e,n.push(e))})),n}function u(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let o=typeof e;return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,o)=>e.slice(t*o,t+t*o))),p=(e,t)=>e.includes(t)},23860:(e,t,n)=>{n.r(t),n.d(t,{arcgis_layers_and_tables_summary_popup:()=>u});var o=n(87849),i=n(64099),r=n(37762),s=n(59317),a=n(29369),l=n(4429),c=n(19617);n(15332),n(81034),n(931),n(93814),n(87744),n(50637),n(63054),n(76246),n(15912);const d=(0,r.c)({}).state,u=class{constructor(e){(0,o.r)(this,e),this.handleClick=async()=>{var e,t;const{layers:n,item:o}=this;null===(e=this.button)||void 0===e||e.focus(),n||(this.loading=!0),d[o.id]||(d[o.id]=this.fetchServiceInfo());const i=await d[o.id];i.error&&(this.error=this.i18n.error,"serviceNotExist"===i.error.code&&(this.error.message=this.i18n.error.noServiceMessage)),i.result?this.sublayers=(0,c.s)(null===(t=i.result)||void 0===t?void 0:t.sublayers,n):this.sublayers=n,this.loading=!1},this.handleWindowClick=({target:e})=>{this.el.contains(e)||(this.popoverNode.open=!1)},this.handleKeyPress=({key:e})=>{switch(e){case"Esc":case"Escape":this.popoverNode&&(this.popoverNode.open=!1)}},this.api=4,this.config=void 0,this.user=void 0,this.item=void 0,this.portal=void 0,this.layers=void 0,this.searchTerm=void 0,this.border=void 0,this.tooltip=void 0,this.telemetry=void 0,this.button=void 0,this.loading=!0,this.error=void 0,this.sublayers=void 0}async componentWillLoad(){const e=await(0,i.g)(this.el);this.i18n=e[0],s.c.api=this.api,s.c.portal=this.portal,s.c.config=this.config,s.c.user=this.user,this.layers||(this.loading=!0)}async fetchServiceInfo(){const{item:e,portal:t,layers:n}=this;return await(0,l.m)((0,c.f)({item:e,portal:t,layers:n,isSecure:!1}),500)}render(){const{i18n:e,portal:t,user:n,item:i,handleClick:r,handleKeyPress:s,loading:c,searchTerm:d,error:u,tooltip:h,telemetry:p}=this,v=this.sublayers||this.layers;return(0,o.h)(o.H,{key:"9c186c2a3d3a8c4c2ff33133d044387fcfce1061",onFocusout:e=>{e.relatedTarget&&!this.el.contains(e.relatedTarget)&&(this.popoverNode.open=!1)}},(0,o.h)("calcite-popover-manager",{key:"218395bebbb6b61939a653131ffd075aaee7eea9",autoClose:!0},(0,o.h)("button",Object.assign({key:"a7bcf8912de0f34cecf44899a374dbf817f9eaec",class:{button:!0,"button--border":this.border},ref:e=>this.button=e,onClick:r,onTouchStart:r,onKeyPress:s},h?{title:h}:{}),(0,o.h)("span",{key:"9457c376598fd431966012e83ad3117a17314e50",class:"button-text"},(0,o.h)("slot",{key:"4877828a3be1511e43cb3635ede7e49bbf610476"}),(0,o.h)("calcite-icon",{key:"e4f5e9b22015ce165626b730d3644a20e90d5b5b",icon:"caret-down",scale:"s",class:"button--icon"}))),(0,o.h)("calcite-popover",{key:"433e2a187a5d15163c785c9fe0ba22a3e3808468",ref:e=>this.popoverNode=e,label:e.layersAndTables,pointerDisabled:!0,referenceElement:this.button,closable:!0,class:"popover",placement:"bottom",overlayPositioning:"fixed",heading:e.layersAndTables,onCalcitePopoverOpen:()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"click",pageName:(0,a.g)(),pageUrl:window.location.href}),window.addEventListener("click",this.handleWindowClick)},onCalcitePopoverClose:(0,l.f)((()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"close",pageName:(0,a.g)(),pageUrl:window.location.href}),window.removeEventListener("click",this.handleWindowClick)}),200)},(0,o.h)("div",{key:"872867eb21d4ffac4643ef1cf429f6f57aa081d4",class:"popover-content"},c?(0,o.h)("div",{class:"skeleton"},(0,o.h)("div",{class:"skeleton-content"},(0,o.h)("div",{class:"skeleton-left"}),(0,o.h)("div",{class:"skeleton-main"},(0,o.h)("div",{class:"skeleton-title"}),(0,o.h)("div",{class:"skeleton-subtitle"})),(0,o.h)("div",{class:"skeleton-right"}))):(0,o.h)("arcgis-layers-and-tables-summary",{portal:t,user:n,item:i,layers:v,showMatched:d&&!!this.layers,error:u,loading:!this.sublayers,telemetry:p,onLayersAndTablesFocusEnd:()=>{this.popoverNode.open=!1}})))))}get el(){return(0,o.a)(this)}};u.style=":host{max-width:100%}arcgis-layers-and-tables-summary:not(.hydrated){visibility:hidden}.popover-content{width:380px;min-height:6rem;background-color:var(--calcite-color-background)}.skeleton{margin:1rem;margin-bottom:3rem}@keyframes pulse{50%{opacity:.5}}.skeleton{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;padding:0.5rem;border:1px solid var(--calcite-color-border-2)}.skeleton-content{display:flex}.skeleton-left,.skeleton-right{height:1rem;width:1rem;background-color:var(--calcite-color-border-3)}.skeleton-main{margin-left:1rem;margin-right:1rem;flex:1 1 0%}.skeleton-title{height:1rem;background-color:var(--calcite-color-border-2)}.skeleton-subtitle{margin-top:0.25rem;height:1rem;background-color:var(--calcite-color-border-3)}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.button{max-width:100%;cursor:pointer;border-style:none;padding:0px;outline:2px solid transparent;outline-offset:2px;transition-property:all;color:inherit;background:transparent;font-family:inherit;font-size:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:4px}.button--border{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border:1px solid var(--calcite-color-foreground-3)}.button--border:focus{outline-offset:0}.button-text{pointer-events:none;display:flex}.button--icon{margin-inline-start:0.25rem;vertical-align:-3px}"},29369:(e,t,n)=>{function o(){const{hash:e,pathname:t}=window.location;if(t.includes("group.html"))return"group page";if(t.includes("search.html"))return"search result page";switch(e){case"#favorites":return"favorites";case"#groups":return"my groups content";case"#organization":return"my org content";case"#livingAtlas":return"living atlas";default:return"my content"}}n.d(t,{g:()=>o})},50637:(e,t,n)=>{n.d(t,{a:()=>g,b:()=>w,c:()=>h,d:()=>v,f:()=>d,g:()=>p,i:()=>u,p:()=>y,r:()=>m});var o=n(59317),i=n(4429),r=n(931),s=n(87744);const a={},l={},c={};async function d(e,t,n,o){var i,r,s,d;const u=null===(r=null===(i=c[t])||void 0===i?void 0:i[n])||void 0===r?void 0:r.expireAt,h=!!u&&(new Date).getTime()>u;if((null===(s=a[t])||void 0===s?void 0:s[n])&&!h)return a[t][n];l[t]||(l[t]={}),l[t][n]&&!h||(l[t][n]=e());const p=await l[t][n];if(a[t]||(a[t]={}),c[t]||(c[t]={}),a[t][n]=p,o){const{expireAfter:e,getExpireAfterFromResult:i}=o,r=i||e?(new Date).getTime()+(null!==(d=null==i?void 0:i(p))&&void 0!==d?d:e):null;c[t][n]=Object.assign(Object.assign({},c[t][n]),{expireAt:r})}return p}function u(e,t){var n;return null===(n=null==a?void 0:a[e])||void 0===n?void 0:n[t]}const h=(e,t)=>{var n,o;t?(null===(n=a[e])||void 0===n||delete n[t],null===(o=l[e])||void 0===o||delete o[t]):(delete a[e],delete l[e])};function p(e){var t,n,i,r;return null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===i?void 0:i.token)||(null===(r=null==e?void 0:e.portalUser)||void 0===r?void 0:r.token)||""}function v(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function f(e){var t;const{config:n}=o.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function g(e,t,n={},i){const[s]=await(0,r.l)(["esri/request"]),{api:a}=o.c;e.includes("f=")||t.append("f","json");const l=p();return l&&!t.has("token")&&t.append("token",l),new Promise(((o,r)=>{if(3===a){const a={url:!1===n.addSSL?e:f(e),form:t,timeout:n.timeout||0},l="post"===i?Object.assign({usePost:!0},n):n;s(a,l).then(o,r)}else s(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:i||"auto"})).then((e=>{o(e.data)})).catch((e=>r(e)))}))}async function m(e,t={},n={},i,s){const[a]=await(0,r.l)(["esri/request"]),{api:l,portal:c}=o.c,{customToken:d,addTokenManually:u,addSSL:h,useProxy:p}=n,v=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(v.f="json"),d)v.token=d;else if(!1!==u){const e=await w(c,l);e&&(v.token=e)}const g=!1===h?e:f(e);if(3===l){const e=Object.assign({url:g,content:v,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return a(e,"post"===i?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:i||"auto"},n),{timeout:n.timeout||0,useProxy:p}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(g,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var o,r;const s=null!==(o=null==t?void 0:t.pendingStatuses)&&void 0!==o?o:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(r=null==t?void 0:t.successStatuses)&&void 0!==r?r:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const o=await m(e,null==t?void 0:t.requestParams,{},n),r=o.status||o.jobStatus;if(s.includes(r))return await(0,i.t)((d=l++,1e3*b[d>-1&&d<b.length-1?d:b.length-1])),c();if(a.includes(r)||"failed"===r)return o;throw o;var d};try{return c()}catch(e){throw console.error(e),e}},w=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return p(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:i}=await d((()=>k(e,null!=t?t:null===o.c||void 0===o.c?void 0:o.c.api)),"platformSelf",null!==(n=v(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return i},k=async(e,t)=>{const n=await(async(e,t)=>{var n,o,i;const a=3===t,[l]=a?await(0,r.l)(["esri/IdentityManager"]):await(0,r.l)(["esri/identity/IdentityManager"]),c=await d((()=>l.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1})),"credential",v(e.user));return null!==(i=a?null===(n=c._oAuthCred)||void 0===n?void 0:n.appId:null===(o=c.oAuthState)||void 0===o?void 0:o.appId)&&void 0!==i?i:"arcgisonline"})(e,t),o={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?o:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:o}})}},64099:(e,t,n)=>{n.d(t,{a:()=>s,g:()=>c});var o=n(15332),i=n(81034),r=n(87849);function s(e){var t,n,r;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?i.l.get(a.slice(0,2)):"en"}const a={};function l(e,t){const n=`${e}${t}`;return a[n]||(a[n]=function(e,t){return new Promise(((n,o)=>{fetch((0,r.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):o()}),(()=>o()))}))}(e,t)),a[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),r=s(e),a=function(e){var t,n,r;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await l(n,r)}catch(e){console.warn(`no locale for ${n} (${r}) loading default locale en.`),c=await l(n,"en")}return[c,r,a]}},81034:(e,t,n)=>{n.d(t,{C:()=>a,a:()=>l,b:()=>d,f:()=>u,g:()=>s,l:()=>r,s:()=>p});var o=n(931),i=n(15332);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,n){const o=(0,i.c)(e,`[${t}]`);return o?o.getAttribute(t):n}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function l(e,t){const{api:n,type:i,places:r}=t||{};if(4===n){const[t]=await(0,o.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:r,style:i,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:i}))}const[s]=await(0,o.l)(["dojo/number"]);return s.format(e,{type:i,places:r,pattern:null==t?void 0:t.pattern})}const c={};function d(e,t){let n=document.documentElement.lang;const o="bs"===n;if(o&&(n="hr"),t){const t=`${n}-full`,o={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,o)),c[t].format(e)}const i={year:"numeric",month:o?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,i)),c[n].format(e)}function u(e,t,n,o){const i=null!=e?e:"en";let r=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(i))&&(r=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(i)&&(r=t.multiple),p(r,Object.assign(Object.assign({},o),{number:n}))}const h=/\$\{([^}]+)\}/g;function p(e,t,n=h){let o=e;try{o=e.replace(n,((e,n)=>function(e,t){const n=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString()))}catch(e){console.error(e)}return o}}}]);