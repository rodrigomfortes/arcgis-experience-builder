/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5664ad.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5664ad"],{59317:(e,t,i)=>{i.d(t,{c:()=>o,o:()=>s});const r=(0,i(37762).c)({portal:null,user:null,api:4,scale:"m"}),o=r.state,s=r.onChange},62239:(e,t,i)=>{i.r(t),i.d(t,{arcgis_member_browser_table_row:()=>a});var r=i(87849),o=i(59317),s=i(81034),l=i(23966),n=i(2058);i(37762),i(931),i(93814),i(15332),i(74174),i(5157);const a=class{constructor(e){var t;(0,r.r)(this,e),this.arcgisMemberBrowserColumnUpdate=(0,r.c)(this,"arcgisMemberBrowserColumnUpdate",7),this.arcgisMemberCardSelect=(0,r.c)(this,"arcgisMemberCardSelect",7),this.arcgisMemberBrowserCardPreview=(0,r.c)(this,"arcgisMemberBrowserCardPreview",7),this.arcgisMemberBrowserActionsOpen=(0,r.c)(this,"arcgisMemberBrowserActionsOpen",7),this.arcgisMemberBrowserInternalUIAction=(0,r.c)(this,"arcgisMemberBrowserInternalUIAction",7),this.arcgisMemberBrowserCredsLinkClick=(0,r.c)(this,"arcgisMemberBrowserCredsLinkClick",7),this.arcgisMemberBrowserUserTypeLinkClick=(0,r.c)(this,"arcgisMemberBrowserUserTypeLinkClick",7),this.arcgisMemberBrowserRoleChange=(0,r.c)(this,"arcgisMemberBrowserRoleChange",7),this.arcgisMemberBrowserAdminContactsLinkClick=(0,r.c)(this,"arcgisMemberBrowserAdminContactsLinkClick",7),this.columnRefs={},this.creditsText="",this.member=void 0,this.portal=void 0,this.index=void 0,this.user=void 0,this.disabled=void 0,this.baseUrl=null===(t=null===o.c||void 0===o.c?void 0:o.c.config)||void 0===t?void 0:t.baseUrl,this.actions=[],this.showDisabledState=!1,this.showCreditsLink=!1,this.showUserTypeLink=!1,this.showRoleSelect=!1,this.disableRoleSelect=!1,this.hasMouse=void 0,this.mouseOverColumn=void 0}async componentWillLoad(){var e,t,i,r,o,s;this.store=(0,l.g)(this.el),this.i18n=Object.assign(Object.assign({},(null===(i=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.i18n)||void 0===i?void 0:i.tableRow)||{}),(null===(s=null===(o=null===(r=this.store)||void 0===r?void 0:r.state)||void 0===o?void 0:o.i18n)||void 0===s?void 0:s.listCard)||{})}async componentWillRender(){const{member:e,i18n:t}=this;if(void 0===e.availableCredits)return;if(-1===e.availableCredits)return void(this.creditsText=t.noLimit);const i=await(0,s.a)(e.availableCredits===e.assignedCredits?e.availableCredits:Math.floor(e.availableCredits),{api:4}),r=await(0,s.a)(e.assignedCredits,{api:4}),o=t.creditsNumber.replace("${remain}",`${i}`).replace("${total}",`${r}`);this.creditsText=o}async canFocusColumn(e){var t;const i=(this.store.state.columns||[]).filter((e=>(0,n.g)(e,this.store.state.width))),r=this.getColumnNumber(e),o=i[r];return!!(null===(t=this.columnRefs[o])||void 0===t?void 0:t.method)||r<0}async focusColumn(e){var t;let i=e;if("multiple"===this.store.state.selection){if(0===e)return void(null===(t=this.checkbox)||void 0===t||t.setFocus());i=e-1}const r=(this.store.state.columns||[]).filter((e=>(0,n.g)(e,this.store.state.width))),{el:o,method:s}=this.columnRefs[r[i]]||{};o[s]()}getColumnNumber(e){return"multiple"===this.store.state.selection?e-1:e}onClick(e){return{onClick:()=>{e()},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e()}}}emitInternalAction(e){this.arcgisMemberBrowserInternalUIAction.emit({category:"card action",action:e})}renderTitle(e){var t,i,o,s;const{member:l}=this,n=null!==(i=null===(t=this.store.state.activeFocus)||void 0===t?void 0:t[1])&&void 0!==i?i:0,a=(null!==(s=null===(o=this.store.state.activeFocus)||void 0===o?void 0:o[0])&&void 0!==s?s:0)===this.index,c=n<2;return(0,r.h)("div",{class:"checkbox-wrap",onMouseOver:()=>{this.mouseOverColumn=0},key:"title"},(0,r.h)("div",{role:"gridcell",class:{"cell cell--end-2 cell--hoverable":!0,"cell--disabled":l.disabled&&this.showDisabledState},onClick:()=>{if(this.checkbox){const e=!this.checkbox.checked;this.checkbox.checked=e,this.arcgisMemberCardSelect.emit({member:l,selected:e})}}},(0,r.h)("calcite-checkbox",Object.assign({},a&&c||this.hasMouse&&0===this.mouseOverColumn?{}:{inert:!0},{class:"checkbox",checked:e,disabled:this.disabled,ref:e=>{this.checkbox=e},onClick:e=>{e.stopPropagation(),this.store.state.activeFocus=[this.index,0]},onCalciteCheckboxChange:()=>{this.arcgisMemberCardSelect.emit({member:l,selected:!e})},value:l.username}),(0,r.h)("span",{class:"screen-readers-only"},l.fullName))),(0,r.h)("div",Object.assign({onMouseOver:()=>{this.mouseOverColumn=0},role:"gridcell",class:{"cell cell--narrow cell--start-2 cell--end-2 checkbox__title title":!0,"cell--hoverable":!0,"cell--hoverable--active":this.store.state.preview===l.username,"cell--disabled":l.disabled&&this.showDisabledState},id:`row-${l.username}`,tabindex:1===n&&a?0:-1},this.onClick((()=>{this.arcgisMemberBrowserCardPreview.emit(l),this.store.state.activeFocus=[this.index,1]})),{ref:e=>{this.columnRefs.name={el:e,method:"focus"}}}),(0,r.h)("span",{class:"cell--clamp"},(0,r.h)("arcgis-user-popup",{fullName:this.member.fullName,user:this.member,showUsername:!0,underline:!0,api:4,portal:this.portal,baseUrl:this.baseUrl,scale:"m",class:"user-popup",wrap:!0,ref:e=>{this.columnRefs.name={el:e,method:"setFocus"}},onArcgisUserPopupInternalUIAction:e=>{var t;this.emitInternalAction(null===(t=e.detail)||void 0===t?void 0:t.action)},tabIndex:-1}))))}renderGroupRole(){const{memberType:e}=this.member;return"admin"===e?this.i18n.groupManager:"owner"===e?this.i18n.owner:this.i18n.member}renderAffiliation(){var e,t,i;const{portal:o}=this;let s="";const l=null===(e=this.store.state.partnerCollaborations)||void 0===e?void 0:e.find((e=>this.member.orgId&&e.to.orgId===this.member.orgId)),n=null===(t=this.store.state.collaborationCoordinators)||void 0===t?void 0:t.some((e=>e.username===this.member.username));s=this.member.orgId===o.id?this.i18n.myOrg:l?l.to.name:this.i18n.other;const a=`collab-coord-icon-${this.member.username}`;return(0,r.h)("div",{class:"affiliation-wrapper"},s,n&&"org"!==(null===(i=this.store.state.group)||void 0===i?void 0:i.membershipAccess)?(0,r.h)(r.F,null," ",(0,r.h)("calcite-icon",{id:a,class:"affiliation-icon",icon:"collaboration-user",scale:"s"}),(0,r.h)("calcite-tooltip",{referenceElement:a},(0,r.h)("span",null,this.i18n.coordinator))):null)}renderCredits(){return(0,r.h)("div",null,this.showCreditsLink?(0,r.h)("calcite-button",{class:"credits-button",appearance:"transparent",onClick:()=>{this.arcgisMemberBrowserCredsLinkClick.emit()},title:this.creditsText},this.creditsText):this.creditsText)}renderMFA(){if(this.member.mfaEnabled)return(0,r.h)("calcite-icon",{icon:"check",scale:"s",style:{"--calcite-icon-color":"var(--calcite-ui-success"}})}renderUserType(){var e;const t=null===(e=this.store.state.userTypes)||void 0===e?void 0:e.find((e=>e.id===this.member.userLicenseTypeId));return(0,r.h)("div",null,this.showUserTypeLink?(0,r.h)("calcite-button",{appearance:"transparent",onClick:()=>{this.arcgisMemberBrowserUserTypeLinkClick.emit()}},null==t?void 0:t.name):null==t?void 0:t.name)}renderLastLogin(){const{member:e,i18n:t}=this,i=e.disabled&&this.showDisabledState;if([0,-1,1e3].includes(e.lastLogin)){const o=`mb-row-last-login-${e.id}`;return(0,r.h)("div",null,(0,r.h)("div",{id:o},t.never),!i&&(0,r.h)("calcite-tooltip",{referenceElement:o},(0,r.h)("div",null,(0,s.s)(this.i18n.neverSignedInTooltip,{date:(0,s.b)(e.created)}))))}const o=new Date,l=new Date;l.setDate(l.getDate()-1);const n=new Date(e.lastLogin).toDateString();return o.toDateString()===n?t.today:l.toDateString()===n?t.yesterday:(0,s.b)(e.lastLogin)}renderRole(){const{portal:e,user:t,member:i,showRoleSelect:o,disableRoleSelect:s}=this;return(0,r.h)("arcgis-member-browser-role-column",{portal:e,user:t,member:i,showRoleSelect:o,disableRoleSelect:s,onArcgisRoleColumnRoleChange:e=>{this.arcgisMemberBrowserRoleChange.emit(e.detail)},onArcgisRoleColumnContactsLinkClick:()=>{this.arcgisMemberBrowserAdminContactsLinkClick.emit()}})}renderColumn(e,t,i){var o,l,a,c;const{member:d,portal:h,baseUrl:m}=this,u=null!==(l=null===(o=this.store.state.activeFocus)||void 0===o?void 0:o[1])&&void 0!==l?l:0,{header:b}=n.C[e],p=(null!==(c=null===(a=this.store.state.activeFocus)||void 0===a?void 0:a[0])&&void 0!==c?c:0)===this.index,v=t===this.getColumnNumber(u);if("name"===e&&"multiple"===this.store.state.selection)return this.renderTitle(i);const g=["owner"].includes(e);return(0,r.h)("div",{key:e,tabIndex:v&&p?0:-1,role:"gridcell",class:{cell:!0,"cell--overflow":g,"cell--start-2":!b,"cell--end-2":!b,"cell--hoverable":"name"===e,"cell--hoverable--active":"name"===e&&this.store.state.preview===d.username,"cell--disabled":d.disabled&&this.showDisabledState},ref:t=>{this.columnRefs[e]={el:t,method:"focus"}},onClick:()=>{setTimeout((()=>{const i="multiple"===this.store.state.selection?t+1:t;v&&p||(this.store.state.activeFocus=[this.index,i]),"name"===e&&this.arcgisMemberBrowserCardPreview.emit(d)}),100)},onMouseOver:()=>{this.mouseOverColumn=t}},(0,r.h)("span",{class:{"cell--clamp":"name"===e,"no-overflow":"credits"===e}},"name"===e&&(0,r.h)("arcgis-user-popup",{username:this.member.username,fullName:this.member.fullName,showUsername:!0,underline:!0,api:4,portal:h,baseUrl:m,scale:"m",class:"user-popup",wrap:!0,ref:e=>{this.columnRefs.name={el:e,method:"setFocus"}},onArcgisUserPopupInternalUIAction:e=>{var t;this.emitInternalAction(null===(t=e.detail)||void 0===t?void 0:t.action)},tabIndex:-1}),"membertype"===e&&this.renderGroupRole(),"affiliation"===e&&this.renderAffiliation(),"joined"===e&&(0,s.b)(d.joined),"mfaenabled"===e&&this.renderMFA(),"credits"===e&&this.renderCredits(),"lastlogin"===e&&this.renderLastLogin(),"usertype"===e&&this.renderUserType(),"role"===e&&this.renderRole(),"actions"===e&&(0,r.h)("span",null,this.actions.length>0&&(0,r.h)("button",{tabIndex:v&&p?0:-1,class:"button button--transparent","aria-label":this.i18n.moreOptions,"aria-haspopup":"true",slot:"trigger",ref:e=>{this.columnRefs.actions={el:e,method:"focus"}},onClick:e=>{this.arcgisMemberBrowserActionsOpen.emit({el:e.target,actions:this.actions})}},(0,r.h)("calcite-icon",{icon:"ellipsis",scale:"s",class:"button__icon"})))))}render(){var e,t;const{member:i,store:o,i18n:s}=this;if(!i||!o||!s)return;const l=(this.store.state.columns||[]).filter((e=>(0,n.g)(e,this.store.state.width))),a=null===(e=this.store)||void 0===e?void 0:e.state.selection,c=["single","multiple"].includes(a),d=(null===(t=this.store)||void 0===t?void 0:t.state.selectedMembers)||[],h=c&&d.some((e=>e.username===i.username));return(0,r.h)(r.H,Object.assign({},h?{"data-selected":!0}:{},{onMouseOver:()=>{this.hasMouse=!0},onMouseOut:()=>{this.hasMouse=!1}}),(0,r.h)("div",Object.assign({class:{row:!0,"row--selected":h,"row--first":0===this.index,"row--disabled":this.disabled},role:"row"},h?{ariaSelected:!0}:{},{"aria-labelledby":`row-${i.username}`}),l.map(((e,t)=>this.renderColumn(e,t,h)))))}get el(){return(0,r.a)(this)}};a.style=":host{display:block;--member-browser-table-row-active-background:var(--calcite-color-foreground-1)}@media (forced-colors: active){calcite-checkbox{border:1px solid var(--calcite-color-border-1)}}.row{display:grid;background-color:var(--calcite-color-foreground-1);grid-template-columns:var(--member-browser-table-columns);border:1px solid var(--calcite-color-foreground-1);border-top:1px solid var(--calcite-color-border-2);margin-top:-1px}.row--first{border-top-color:var(--calcite-color-foreground-1)}.row--selected{position:relative;border-color:var(--calcite-color-brand);background-color:var(--member-browser-table-row-active-background)}.row--disabled{pointer-events:none;opacity:0.5}.row--selected-last{border-top-color:var(--member-browser-table-row-active-background)}.cell{display:flex;align-items:center;justify-content:flex-start;padding-top:0.5rem;padding-bottom:0.5rem;padding-inline-start:0.75rem;padding-inline-end:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-1);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;outline-color:transparent;line-height:1.35}.cell:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.cell--clamp{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.cell--start-2{padding-inline-start:0.5rem}.cell--end-2{padding-inline-end:0.5rem}.cell--overflow{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow-wrap:break-word}.cell--hoverable{background-color:transparent;transition-property:all;transition-duration:150ms}.cell--hoverable:hover,.cell--hoverable--active{cursor:pointer;background-color:var(--calcite-color-foreground-2);text-decoration-line:underline;text-underline-offset:2px;transition:background-color text-decoration 200ms linear}.cell--disabled{background-color:var(--calcite-color-foreground-2);opacity:0.5}.checkbox-wrap{display:flex}.checkbox__title{flex:1 1 0%}.title{word-break:break-all}.user-popup{width:100%}.item-type{display:flex}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.button{border:1px solid var(--calcite-color-foreground-3);font-family:inherit;box-sizing:border-box;display:flex;max-width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.button--transparent{border:1px solid transparent;background:transparent;padding-left:0.5rem;padding-right:0.5rem}.button--transparent:hover{background-color:var(--calcite-color-foreground-2);box-shadow:none}.button__icon{pointer-events:none}.affiliation-wrapper{display:flex;align-items:center}.affiliation-icon{margin-inline-start:0.5rem}.role-select-container{display:flex}.role-info{visibility:hidden;margin-inline-end:1rem}.role-info--visible{visibility:visible}.role-info-container{width:20rem;padding:1rem}.role-info-heading{font-size:1rem;font-weight:500}.role-info-content{margin-bottom:0px}.no-overflow{overflow:hidden}.credits-button{max-width:100%}"}}]);