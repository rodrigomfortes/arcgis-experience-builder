/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-file-up-87792c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-file-up-87792c"],{64099:(e,t,i)=>{i.d(t,{a:()=>o,g:()=>c});var a=i(15332),s=i(81034),n=i(87849);function o(e){var t,i,n;const o=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===n?void 0:n.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(l)?s.l.get(l):s.l.has(l.slice(0,2))?s.l.get(l.slice(0,2)):"en"}const l={};function r(e,t){const i=`${e}${t}`;return l[i]||(l[i]=function(e,t){return new Promise(((i,a)=>{fetch((0,n.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?i(e.json()):a()}),(()=>a()))}))}(e,t)),l[i]}async function c(e,t){const i=t||e.tagName.toLowerCase(),n=o(e),l=function(e){var t,i,n;const o=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===n?void 0:n.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(l)?s.l.get(l):s.l.has(l.slice(0,2))?l:"en"}(e);let c;try{c=await r(i,n)}catch(e){console.warn(`no locale for ${i} (${n}) loading default locale en.`),c=await r(i,"en")}return[c,n,l]}},81034:(e,t,i)=>{i.d(t,{C:()=>l,a:()=>r,b:()=>d,f:()=>h,g:()=>o,l:()=>n,s:()=>p});var a=i(931),s=i(15332);const n=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,i){const a=(0,s.c)(e,`[${t}]`);return a?a.getAttribute(t):i}(e,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function r(e,t){const{api:i,type:s,places:n}=t||{};if(4===i){const[t]=await(0,a.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:n,style:s,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:s}))}const[o]=await(0,a.l)(["dojo/number"]);return o.format(e,{type:s,places:n,pattern:null==t?void 0:t.pattern})}const c={};function d(e,t){let i=document.documentElement.lang;const a="bs"===i;if(a&&(i="hr"),t){const t=`${i}-full`,a={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(i,a)),c[t].format(e)}const s={year:"numeric",month:a?"numeric":"short",day:"numeric"};return c[i]||(c[i]=new Intl.DateTimeFormat(i,s)),c[i].format(e)}function h(e,t,i,a){const s=null!=e?e:"en";let n=t.unknown;return(1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(s))&&(n=t.single),1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(s)&&(n=t.multiple),p(n,Object.assign(Object.assign({},a),{number:i}))}const u=/\$\{([^}]+)\}/g;function p(e,t,i=u){let a=e;try{a=e.replace(i,((e,i)=>function(e,t){const i=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof i||"number"==typeof i?i:e}(i,t).toString()))}catch(e){console.error(e)}return a}},81914:(e,t,i)=>{i.r(t),i.d(t,{arcgis_file_upload:()=>u});var a=i(87849),s=i(64099),n=i(50020),o=i(24869),l=i(90470),r=i(3826),c=i(59317),d=i(72257),h=i(72411);i(15332),i(81034),i(931),i(93814),i(50637),i(87744),i(50822),i(15912),i(32710),i(83929),i(76246),i(63054),i(75294),i(37762),i(38295),i(51102),i(56175),i(43555),i(95878),i(60743),i(11163),i(8214),i(66111),i(26854),i(31544),i(44069),i(86562);const u=class{constructor(e){(0,a.r)(this,e),this.arcgisFileUploadComplete=(0,a.c)(this,"arcgisFileUploadComplete",7),this.arcgisFileUploadCancel=(0,a.c)(this,"arcgisFileUploadCancel",7),this.allowedExtensions=null,this.workflowCompleted=!1,this.closeDialog=()=>{!this.workflowCompleted&&this.handleCancel(),this.workflowCompleted=!1,this.isActive=!1},this.handleCancel=async()=>{this.arcgisFileUploadCancel.emit()},this.portal=void 0,this.existingItem=void 0,this.user=void 0,this.config=void 0,this.api=3,this.isActive=!0,this.header=void 0,this.loading=!1,this.loaderMessage=void 0,this.loaderType="indeterminate",this.error=void 0}async componentWillLoad(){const{existingItem:e,config:t,api:i}=this,a=e.type,n=await(0,s.g)(this.el);this.i18n=n[0],r.a.existingItem=e,r.a.id=e.id,r.a.typeKeywords=e.typeKeywords,r.a.type=e.type,d.i.tags=(0,h.f)(e.tags),d.i.snippet=e.snippet,c.c.config=t,c.c.api=i,"Vector Tile Service"===a&&(this.allowedExtensions=["json"])}handleWorkflowComplete(){this.workflowCompleted=!0,this.isActive=!1}async fileSelectHandler(e){var t;const{existingItem:i}=this;this.sourceName=(null===(t=i.sourceData)||void 0===t?void 0:t.name)||i.name;const a=e.detail.file,s=i.type,n="Vector Tile Service"===s,{fileName:l,extension:c}=(0,o.s)(a);n&&"json"!==c?this.handleError({code:"invalidExtension"}):n||l===this.sourceName?(this.file=a,r.a.file=a,r.a.extension=c,r.a.fileName=l,"Vector Tile Service"===s?this.handleUpdateStyle():this.handleUpdate()):this.handleError({code:"useSameFileName"})}disconnectedCallback(){this.closeDialog()}determineHeader(e,t){const{i18n:i}=this;switch(e){case"Vector Tile Service":return i.editStyle;case"Vector Tile Package":case"Layer Package":case"Tile Package":return i.updatePackages.replace("${type}",e.toLowerCase()).replace("${hostedLayerName}",t);case"Microsoft Powerpoint":case"Microsoft Word":case"PDF":return i.uploadStaticFiles.replace("${fileName}",t);default:return i.sameFileNameDescription.replace("${fileName}",t)}}async handleUpdate(){const{existingItem:e,portal:t,file:i,i18n:a}=this;this.loading=!0,this.loaderMessage=a.updating;const s=await(0,l.u)(e,(0,n.g)({username:e.owner},t),{file:i,overwrite:!0,keepDescription:!0,fileName:e.name});s.success?this.arcgisFileUploadComplete.emit({success:s.success}):this.handleError({code:"unhandledError"})}async handleUpdateStyle(){const{existingItem:e,portal:t,file:i,i18n:a}=this;this.loading=!0,this.loaderMessage=a.updating;const s=!e.hasOwnProperty("hasResources")||e.hasResources,{result:o,error:r}=s?await(0,l.a)(this.existingItem,(0,n.g)({username:e.owner},t),{file:i}):await(0,l.b)(this.existingItem,(0,n.g)({username:e.owner},t),{file:i});o.success&&this.arcgisFileUploadComplete.emit({success:o.success}),r&&this.handleError({code:r.code})}async handleError(e){const{i18n:t}=this;this.loading=!1;let i=t.errors.errorWhileUpload;switch(e.code){case"invalidExtension":i=t.errors.invalidStyleFileExtension;case"useSameFileName":i=t.errors.sameFileName.replace("${fileName}",this.sourceName);break;case"unhandledError":i=t.errors.errorUpdate}this.error={title:t.error,description:i}}render(){const{loaderType:e,loading:t,loaderMessage:i,error:s,allowedExtensions:n,isActive:o,portal:l,config:r,user:c,existingItem:d,i18n:h}=this,u=this.header||this.determineHeader(d.type,d.name);return(0,a.h)(a.H,{key:"e40f8ce71dd4046f479ca4d0e0c16aa978bf3eea"},(0,a.h)("calcite-dialog",{key:"3978718e8feabbd47033c65b2b5d7433ce244dd4",open:o,modal:!0,heading:h.updateData,onCalciteDialogClose:this.closeDialog},(0,a.h)("arcgis-new-item-loader",{key:"a05c68804125c75fd8ed2b1d19cb16bee570691b",type:e,active:t,text:i}),(0,a.h)("arcgis-new-item-description",{key:"2772fc3325f69daeac2ba88263b1f731ba8ff6e3",header:u}),(0,a.h)("arcgis-file-browser",{key:"1707730d4a7a836fce37218a85148cf2f64d961d",class:"arcgis-file-browser",cloud:!1,insideModal:!0,fullHeight:!0,portal:l,config:r,user:c,allowedExtensions:n}),(0,a.h)("calcite-alert",{key:"63d445fe1a8d8e7b041ead032e9c28eb1e7f3524",icon:"exclamation-mark-triangle",open:!!s,label:null==s?void 0:s.title,kind:"danger",slot:"alerts"},(0,a.h)("div",{key:"5b75488c41e7b3905f2b3fcf02ba63eff6061b9c",slot:"title"},null==s?void 0:s.title),(null==s?void 0:s.description)&&(0,a.h)("div",{key:"a3164e73d059bd97c20b911fb43d8c193f883c97",slot:"message",class:"description"},s.description),(null==s?void 0:s.link)&&(0,a.h)("calcite-link",{key:"d37d8a5c1bde41e3cee48543f784b5bdc53ab6ad",slot:"link",class:"link",href:s.link.href,target:"_blank"},s.link.title)),(0,a.h)("calcite-button",{key:"cb7bd4b5d0bf942ddc6779a53f9968d8fdfd6707",slot:"footer-end",appearance:"outline-fill",onClick:()=>{this.isActive=!1}},h.cancel)))}get el(){return(0,a.a)(this)}}}}]);