/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{931:(e,t,n)=>{n.d(t,{l:()=>i});var r=n(93814);const i=async(e,t)=>(await r.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>d,c:()=>o,d:()=>c,e:()=>i,f:()=>r,g:()=>h,i:()=>p,m:()=>s,t:()=>a,u:()=>u});const r=(e,t)=>{let n,r="idle";const i=(...i)=>new Promise((o=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),o(e(...i))):o(null);break;case"invoked":clearTimeout(n),r="idle",o(e(...i));break;case"cancelled":clearTimeout(n),r="idle",o(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout((()=>(r="idle",o(e(...i)))),t)}}));return i.flush=function(...e){return r="flushed",i(...e)},i.invoke=function(...e){return r="invoked",i(...e)},i.cancel=function(...e){return r="cancelled",i(...e)},i.getStatus=function(){return r},i};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function s(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:r}=t(e);return[n,r]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function u(e,t){const n=[],r={};return e.forEach((e=>{const i=t(e);null==r[i]&&(r[i]=e,n.push(e))})),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,r)=>e.slice(t*r,t+t*r))),p=(e,t)=>e.includes(t)},26854:(e,t,n)=>{n.d(t,{a:()=>l,c:()=>c,g:()=>o,h:()=>i,i:()=>s,r:()=>a});var r=n(15332);function i(e){const t=document.createElement("textarea");return t.innerHTML=e,t.innerText}function o(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function s(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function a(e,t,n){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${n}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function l(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function c(e){return(0,r.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},46227:(e,t,n)=>{n.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map((e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},50637:(e,t,n)=>{n.d(t,{a:()=>f,b:()=>y,c:()=>h,d:()=>v,f:()=>u,g:()=>p,i:()=>d,p:()=>w,r:()=>g});var r=n(59317),i=n(4429),o=n(931),s=n(87744);const a={},l={},c={};async function u(e,t,n,r){var i,o,s,u;const d=null===(o=null===(i=c[t])||void 0===i?void 0:i[n])||void 0===o?void 0:o.expireAt,h=!!d&&(new Date).getTime()>d;if((null===(s=a[t])||void 0===s?void 0:s[n])&&!h)return a[t][n];l[t]||(l[t]={}),l[t][n]&&!h||(l[t][n]=e());const p=await l[t][n];if(a[t]||(a[t]={}),c[t]||(c[t]={}),a[t][n]=p,r){const{expireAfter:e,getExpireAfterFromResult:i}=r,o=i||e?(new Date).getTime()+(null!==(u=null==i?void 0:i(p))&&void 0!==u?u:e):null;c[t][n]=Object.assign(Object.assign({},c[t][n]),{expireAt:o})}return p}function d(e,t){var n;return null===(n=null==a?void 0:a[e])||void 0===n?void 0:n[t]}const h=(e,t)=>{var n,r;t?(null===(n=a[e])||void 0===n||delete n[t],null===(r=l[e])||void 0===r||delete r[t]):(delete a[e],delete l[e])};function p(e){var t,n,i,o;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===i?void 0:i.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}function v(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function m(e){var t;const{config:n}=r.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function f(e,t,n={},i){const[s]=await(0,o.l)(["esri/request"]),{api:a}=r.c;e.includes("f=")||t.append("f","json");const l=p();return l&&!t.has("token")&&t.append("token",l),new Promise(((r,o)=>{if(3===a){const a={url:!1===n.addSSL?e:m(e),form:t,timeout:n.timeout||0},l="post"===i?Object.assign({usePost:!0},n):n;s(a,l).then(r,o)}else s(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:i||"auto"})).then((e=>{r(e.data)})).catch((e=>o(e)))}))}async function g(e,t={},n={},i,s){const[a]=await(0,o.l)(["esri/request"]),{api:l,portal:c}=r.c,{customToken:u,addTokenManually:d,addSSL:h,useProxy:p}=n,v=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(v.f="json"),u)v.token=u;else if(!1!==d){const e=await y(c,l);e&&(v.token=e)}const f=!1===h?e:m(e);if(3===l){const e=Object.assign({url:f,content:v,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return a(e,"post"===i?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:i||"auto"},n),{timeout:n.timeout||0,useProxy:p}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(f,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const w=async(e,t,n)=>{var r,o;const s=null!==(r=null==t?void 0:t.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const r=await g(e,null==t?void 0:t.requestParams,{},n),o=r.status||r.jobStatus;if(s.includes(o))return await(0,i.t)((u=l++,1e3*b[u>-1&&u<b.length-1?u:b.length-1])),c();if(a.includes(o)||"failed"===o)return r;throw r;var u};try{return c()}catch(e){throw console.error(e),e}},y=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return p(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:i}=await u((()=>k(e,null!=t?t:null===r.c||void 0===r.c?void 0:r.c.api)),"platformSelf",null!==(n=v(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return i},k=async(e,t)=>{const n=await(async(e,t)=>{var n,r,i;const a=3===t,[l]=a?await(0,o.l)(["esri/IdentityManager"]):await(0,o.l)(["esri/identity/IdentityManager"]),c=await u((()=>l.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1})),"credential",v(e.user));return null!==(i=a?null===(n=c._oAuthCred)||void 0===n?void 0:n.appId:null===(r=c.oAuthState)||void 0===r?void 0:r.appId)&&void 0!==i?i:"arcgisonline"})(e,t),r={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return g(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?r:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})}},56462:(e,t,n)=>{n.d(t,{a:()=>c,b:()=>u,c:()=>d,d:()=>h,f:()=>l,g:()=>p});var r=n(96295),i=n(50637),o=n(15332),s=n(87744),a=n(62261);async function l(e,t,n){const r=`${n?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t)}community/users/${e}`,o=(null==r?void 0:r.includes("www.arcgis.com"))&&t.isPortal,a=(null==r?void 0:r.includes(".arcgis.com"))&&!t.isPortal&&!t.user,l=o||a?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>{try{return await(0,i.r)(r,{},l)}catch(t){return{username:e}}}),"user",r)}async function c(e,t,n,r){var i,s;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(i=e.sourceJSON)||void 0===i?void 0:i.contentStatus)){const i=await(0,a.f)(e,n,t,r);if(!i)return l(e.owner,t,r);const{description:c,name:u,thumbnail:d,url:h}=i;return{description:c?(0,o.s)(c):"",fullName:u,username:e.owner,thumbnail:d,id:e.orgId||(null===(s=e.portal)||void 0===s?void 0:s.id),url:h}}return l(e.owner,t,r)}async function u(e,t,n){const r=n?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t),o=n?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>(0,i.r)(`${r}community/groups`,{q:`(owner:"${e}")`,num:100},o)),"userGroups",e)}async function d(e,t,n){const o=n?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t),a=n?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>(await(0,i.r)(`${o}search`,{q:`(owner:"${e}") ${r.H}`,num:1},a)).total),"userItemsTotal",e)}function h(e,t,n=!1){if(null==e?void 0:e.thumbnailUrl)return e.thumbnailUrl;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const r=(0,i.g)(t);return`${n?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t)}community/users/${e.username}/info/${e.thumbnail}${r&&!n?`?token=${r}`:""}`}function p(e,t){const{fullName:n,firstName:r,lastName:i,username:o}=e;return n||(r&&i?"ja"===t?`${i} ${r}`:`${r} ${i}`:o)}},62261:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(50637),i=n(15332);async function o(e,t,n,o){var s,a,l,c,u;const d=null!==(u=null!==(l=null!==(s=e.orgId)&&void 0!==s?s:null===(a=e.sourceJSON)||void 0===a?void 0:a.orgId)&&void 0!==l?l:null===(c=e.portal)||void 0===c?void 0:c.id)&&void 0!==u?u:null==n?void 0:n.id;return(0,r.f)((()=>async function(e,t,n,o,s){var a,l;const c=(null===(a=e.portal)||void 0===a?void 0:a.portalHostname)||(null==o?void 0:o.portalHostname)||(null===(l=null==o?void 0:o.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),u=s?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!s)return null;const d=s?{disableIdentityLookup:!0,addTokenManually:!1}:{},h=await(0,r.r)(u,{},d),{urlKey:p,thumbnail:v,customBaseUrl:m}=h,f=`https://${p}.${m}/`,g=v?`${f}sharing/rest/portals/self/resources/${v}`:null;let b,w;try{const e=await(0,r.r)(`${u}/resources/localizedOrgProperties`,{start:1,num:100},d);if(e){const t=e[n]||e.default;b=t.name,w=t.description||e.description}}catch(e){}return{name:b||h.name,description:(0,i.a)(w||h.description),url:`${f}home/`,thumbnail:g}}(e,d,t,n,o)),"verified",d)}},64099:(e,t,n)=>{n.d(t,{a:()=>s,g:()=>c});var r=n(15332),i=n(81034),o=n(87849);function s(e){var t,n,o;const s=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?i.l.get(a.slice(0,2)):"en"}const a={};function l(e,t){const n=`${e}${t}`;return a[n]||(a[n]=function(e,t){return new Promise(((n,r)=>{fetch((0,o.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?n(e.json()):r()}),(()=>r()))}))}(e,t)),a[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),o=s(e),a=function(e){var t,n,o;const s=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await l(n,o)}catch(e){console.warn(`no locale for ${n} (${o}) loading default locale en.`),c=await l(n,"en")}return[c,o,a]}},81034:(e,t,n)=>{n.d(t,{C:()=>a,a:()=>l,b:()=>u,f:()=>d,g:()=>s,l:()=>o,s:()=>p});var r=n(931),i=n(15332);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,n){const r=(0,i.c)(e,`[${t}]`);return r?r.getAttribute(t):n}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function l(e,t){const{api:n,type:i,places:o}=t||{};if(4===n){const[t]=await(0,r.l)(["esri/intl"]),n=t.convertNumberFormatToIntlOptions({places:o,style:i,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},n),{style:i}))}const[s]=await(0,r.l)(["dojo/number"]);return s.format(e,{type:i,places:o,pattern:null==t?void 0:t.pattern})}const c={};function u(e,t){let n=document.documentElement.lang;const r="bs"===n;if(r&&(n="hr"),t){const t=`${n}-full`,r={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,r)),c[t].format(e)}const i={year:"numeric",month:r?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,i)),c[n].format(e)}function d(e,t,n,r){const i=null!=e?e:"en";let o=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(i))&&(o=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(i)&&(o=t.multiple),p(o,Object.assign(Object.assign({},r),{number:n}))}const h=/\$\{([^}]+)\}/g;function p(e,t,n=h){let r=e;try{r=e.replace(n,((e,n)=>function(e,t){const n=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString()))}catch(e){console.error(e)}return r}},83682:(e,t,n)=>{n.r(t),n.d(t,{arcgis_user_picker:()=>h});var r=n(87849),i=n(59317),o=n(4429),s=n(46227),a=n(64099),l=n(56462),c=n(87744),u=n(26854),d=n(50637);n(37762),n(15332),n(81034),n(931),n(93814),n(62261);const h=class{constructor(e){(0,r.r)(this,e),this.arcgisUserPickerSelect=(0,r.c)(this,"arcgisUserPickerSelect",7),this.arcgisUserPickerUpdate=(0,r.c)(this,"arcgisUserPickerUpdate",7),this.uniqueId=(0,s.g)(),this.scrollToActiveItem=()=>{var e;const t=null===(e=this.list)||void 0===e?void 0:e.querySelector(`li#${this.getActiveDescendantId()}`);if(!t||!this.list)return;const n=this.list.parentElement;(t.offsetTop<n.scrollTop||t.offsetTop+t.offsetHeight>n.offsetTop+n.offsetHeight)&&t.scrollIntoView({behavior:"smooth"})},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.shiftActiveItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.shiftActiveItemIndex(1);break;case"Home":e.preventDefault(),this.activeItemIndex=0,this.scrollToActiveItem();break;case"End":if(!this.open)return;e.preventDefault(),this.activeItemIndex=this.getResultsLength()-1,this.scrollToActiveItem();break;case"Escape":this.reset(),e.preventDefault(),this.waitAndFocusButton();break;case"Enter":const t=this.getActiveUser();t&&(this.selectedUser=t,this.arcgisUserPickerSelect.emit(t),e.preventDefault(),this.reset(),this.waitAndFocusButton())}},this.searchUsers=async()=>{const{portal:e,query:t,search:n,group:r}=this,i=await async function({portal:e,query:t,searchTerm:n,group:r,config:i}){const o=function(e){return"enterprise"===(null==e?void 0:e.provider)&&!!(null==e?void 0:e.providerGroupName)}(r)||function(e){var t;return(null===(t=null==e?void 0:e.provider)||void 0===t?void 0:t.includes("oidc_"))&&!!(null==e?void 0:e.providerGroupName)}(r),s=(0,u.c)(n),a=o?s:s?`(${s}) `:"",l=o?`${(0,c.g)(e)}community/groups/${r.id}/userlist`:`${(0,c.g)(e)}portals/self/users/search`,h=e.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav -username:esri_webstyles":"",p=((null==i?void 0:i.systemUsers)||[]).reduce(((e,t)=>`${e} -username: ${t}`),""),v=(null==l?void 0:l.includes("www.arcgis.com"))&&e.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,d.r)(l,Object.assign({num:100,sortField:"relevance"},o?{name:a}:{q:`${a} ${null!=t?t:""} ${h} ${p}`}),v)}({portal:e,query:t,searchTerm:n.trim(),group:r});i.users&&!i.results&&(i.results=i.users),this.searchResults=i,this.arcgisUserPickerUpdate.emit(i),this.loading=!1,this.computeActiveItemIndex(),this.open=!0},this.computeActiveItemIndex=()=>{var e,t,n;(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)?this.activeItemIndex=Math.max(null===(n=this.searchResults.results)||void 0===n?void 0:n.findIndex((e=>{var t;return e.username===(null===(t=this.selectedUser)||void 0===t?void 0:t.username)})),0):this.activeItemIndex=0},this.inputHandler=(0,o.f)(this.searchUsers,300),this.renderUser=(e,t)=>{const{portal:n,selectedUser:i,activeItemIndex:o}=this,s=this.formatUniqueUserId(e);return(0,r.h)("li",{"aria-selected":(null==i?void 0:i.username)===e.username,key:s,id:s,role:"option",tabindex:"-1",class:{"list-item":!0,"list-item--active":o===t},onClick:()=>{this.selectedUser=e,this.arcgisUserPickerSelect.emit(e),this.reset()}},(0,r.h)("arcgis-user-avatar",{class:"user-avatar",user:e,scale:"m",portal:n,showName:!0,description:e.username}))},this.portal=void 0,this.query="",this.group=void 0,this.config=void 0,this.selectedUser=void 0,this.selection="single",this.status="idle",this.overlayPositioning="absolute",this.search="",this.activeItemIndex=0,this.searchResults=void 0,this.open=!1,this.loading=!0}async componentWillLoad(){var e;const t=await(0,a.g)(this.el);this.i18n=t[0],this.lang=t[1],null!==(e=this.config)&&void 0!==e||(this.config=null===i.c||void 0===i.c?void 0:i.c.config)}async setFocus(){var e;null===(e=this.input)||void 0===e||e.focus()}reset(){this.search="",this.computeActiveItemIndex(),this.open=!1,this.loading=!0}getResultsLength(){var e,t;return(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)||0}getActiveUser(){var e,t;return null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t[this.activeItemIndex]}getActiveDescendantId(){const e=this.getActiveUser();return this.formatUniqueUserId(e)}formatUniqueUserId(e){return(null==e?void 0:e.username)?`${e.username.replace(".","")}-${this.uniqueId}`:""}shiftActiveItemIndex(e){const t=this.getResultsLength(),n=(this.activeItemIndex+t+e)%t;this.activeItemIndex=n,this.scrollToActiveItem()}async waitAndFocusButton(){var e;await(0,o.t)(200),null===(e=this.button)||void 0===e||e.focus()}render(){var e;const{i18n:t,portal:n,selectedUser:i,referenceElement:s,uniqueId:a,open:c,loading:u,lang:d,status:h}=this;return(0,r.h)(r.H,{key:"37d37e1499daa8b50e5ef4dbefd588cf317694af"},(0,r.h)("div",{key:"b723998ab621754ffe7064231960f0ee14ec3ba4",class:"wrapper"},c||!i?(0,r.h)("div",{class:"search-wrapper"},(0,r.h)("calcite-icon",{icon:"search",scale:"s",class:"search"}),(0,r.h)("label",{class:"screen-readers-only",htmlFor:`input-${a}`,id:`label-${a}`},t.selectUser),(0,r.h)("input",{ref:e=>this.input=e,class:"input",id:`input-${a}`,role:"combobox","aria-autocomplete":"none","aria-expanded":"false","aria-controls":`listbox-${a}`,"aria-activedescendant":this.getActiveDescendantId(),onInput:e=>{this.search=e.currentTarget.value,this.loading=!0,this.open=!0,this.inputHandler()},onBlur:async()=>{await(0,o.t)(300),this.open=!1},onFocus:()=>{!this.search&&this.searchResults||this.searchUsers()},onKeyDown:this.keydownHandler,placeholder:this.i18n.searchMembers,type:"text",value:this.search,onClick:e=>{this.open=!0,e.stopPropagation()}}),!!this.search&&(0,r.h)("button",{class:"x","aria-label":this.i18n.clear,onClick:()=>{this.search="",this.searchUsers()},tabIndex:-1},(0,r.h)("calcite-icon",{icon:"x",scale:"m",class:"x--icon"}))):(0,r.h)("button",{class:{edit:!0,invalid:"invalid"===h},onClick:()=>{this.open=!0,this.searchUsers(),setTimeout((()=>{var e;null===(e=this.input)||void 0===e||e.focus()}),200)},"aria-label":i?t.editSelection.replace("${name}",(0,l.g)(i,d)):t.selectUser,ref:e=>this.button=e},i?(0,r.h)(r.F,null,(0,r.h)("arcgis-user-avatar",{class:"user-avatar",user:i,scale:"m",portal:n,showName:!0,description:i.username}),(0,r.h)("calcite-icon",{icon:"pencil",scale:"s"})):(0,r.h)(r.F,null,t.searchMembers,(0,r.h)("calcite-icon",{icon:"chevron-down",scale:"s"}))),(0,r.h)("div",{key:"749b02204bd5287c77afd78f775dfb8e5337b022",class:"reference-element",ref:e=>this.referenceElement=e}),(0,r.h)("slot",{key:"f9f1426dde425f73d762fecd13e2524b44e2f2a8",name:"input-message"})),(0,r.h)("calcite-popover",{key:"55e101941631bc13cb85568489f5b5e57f3488b4",class:"popover",label:t.selectUser,pointerDisabled:!0,referenceElement:s,placement:"bottom-start",open:c&&(u||!!this.getResultsLength()),focusTrapDisabled:!0,offsetDistance:2,overlayPositioning:this.overlayPositioning},(0,r.h)("div",{key:"f7638053abacad15b2ea2577a6e45ec4f0d38b15",class:"list-wrapper"},u?(0,r.h)("calcite-loader",{label:"Loading",class:"loader"}):(0,r.h)("ul",{ref:e=>this.list=e,"aria-label":t.members,"aria-multiselectable":"false",class:"list",id:`listbox-${a}`,role:"listbox",tabIndex:-1},null===(e=this.searchResults)||void 0===e?void 0:e.results.map(this.renderUser)))))}get el(){return(0,r.a)(this)}};h.style=":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{width:100%;padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;width:100%;overflow:auto;max-height:16rem;min-width:min(80vw, 32rem)}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}"},96295:(e,t,n)=>{n.d(t,{H:()=>r,R:()=>i});const r='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',i="Indoors Map Configuration,Code Attachment"}}]);