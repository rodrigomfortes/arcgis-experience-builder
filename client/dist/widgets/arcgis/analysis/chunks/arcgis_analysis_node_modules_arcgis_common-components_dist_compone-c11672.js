/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_compone-c11672.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_compone-c11672"],{25363:(e,t,s)=>{s.r(t),s.d(t,{ArcgisCommonFieldPicker:()=>d});var i=s(6364),l=s(59836),o=s(61833),n=s(70757),a=s(4395),r=s(95437),h=s(45138);const c=s(55088).AH`.panel{min-height:250px}.content{max-height:50vh}.selection-button-div{padding:var(--calcite-spacing-xxs) var(--calcite-spacing-sm-plus)}.no-match-text{padding:var(--calcite-spacing-md)}`;class d extends o.WF{constructor(){super(...arguments),this._messages=(0,h.u)({blocking:!0}),this.popoverNode=(0,n._)(),this.listNode=(0,n._)(),this.flowElement=(0,n._)(),this.panelElement=(0,n._)(),this.dropdownNode=(0,n._)(),this.fieldInfoFlowItemEl=(0,n._)(),this.fieldsOnly=[],this.expressionsOnly=[],this.filterText="",this.panelCutOffHeight=0,this.fields=[],this.selectedFields=[],this.showFieldInfo=!1,this.showFieldName=!1,this.showDescription=!1,this.showSelectionAll=!1,this.hideCancel=!1,this.hideSort=!1,this.showFilterLength=10,this.multiple=!1,this.sortBy="default",this.groupFieldsAndExpressions=!1,this.arcgisChange=(0,o.lh)(),this.arcgisClose=(0,o.lh)(),this.arcgisSortByChange=(0,o.lh)()}static{this.properties={lastSortBy:16,filterFields:16,mapView:0,layer:0,fields:0,selectedFields:0,popoverProps:0,showFieldInfo:5,showFieldName:5,showDescription:5,showSelectionAll:5,hideCancel:5,hideSort:5,showFilterLength:9,multiple:5,heading:1,okBtnText:1,filterPlaceholderText:1,filterNoResultsText:1,sortBy:1,groupFieldsAndExpressions:5,fieldsGroupHeading:1,expressionsGroupHeading:1,customExpressionCheck:0}}static{this.styles=c}async reposition(){await(this.popoverNode.value?.reposition())}async setFocus(){setTimeout((()=>requestAnimationFrame((()=>{this.panelElement.value?.setFocus()}))),1)}load(){!this.multiple&&this.selectedFields.length>1&&(this.selectedFields=[this.selectedFields[0]]),this.lastSortBy=this.sortBy??this.lastSortBy,this.updateGroupedLists()}willUpdate(e){(e.has("fields")||e.has("lastSortBy")||e.has("customExpressionCheck"))&&this.updateGroupedLists()}loaded(){this.setUpObserver(),this.flowElement.value?.setFocus(),this.checkMaxHeight()}disconnectedCallback(){super.disconnectedCallback(),this.observer?.disconnect()}setUpObserver(){this.observer=new MutationObserver((e=>{for(const t of e)"style"===t.attributeName&&this.popoverNode.value&&this.dropdownNode.value&&"hidden"===this.popoverNode.value.style.visibility&&(this.dropdownNode.value.open=!1)}))}checkMaxHeight(){setTimeout((()=>this.checkPanelMaxHeight()),200),setTimeout((()=>this.checkPanelMaxHeight()),500),setTimeout((()=>this.checkPanelMaxHeight()),1e3),setTimeout((()=>this.checkPanelMaxHeight()),1500)}checkPanelMaxHeight(){if(0===this.panelCutOffHeight){const e=this.panelElement.value?.getBoundingClientRect();if(e&&e.bottom>window.innerHeight){this.panelCutOffHeight=e.height-(e.bottom-window.innerHeight)-5;const t=this.listNode.value?.getBoundingClientRect();t&&(this.listNode.value.style.maxHeight=t.height-(e.bottom-window.innerHeight)-5+"px")}}}getSortedList(){const e=[...this.fields];return"display"===this.lastSortBy?e.sort(((e,t)=>e.alias.localeCompare(t.alias))):"field"===this.lastSortBy?e.sort(((e,t)=>e.name.localeCompare(t.name))):"type"===this.lastSortBy&&e.sort(((e,t)=>e.type.localeCompare(t.type))),e}isExpression(e){return this.customExpressionCheck?this.customExpressionCheck(e):e.name.includes(r.f.expression)}canDeselectAll(){return this.filterFields?.length?this.filterContainsAll():this.selectedFields.length===this.fields.length}filterContainsAll(){return!!this.filterFields?.every((e=>this.selectedFields.some((t=>t===e))))}showFieldInfoCheck(e){const{layer:t}=this;return!!this.showFieldInfo&&!(!t||this.isExpression(e)||e.name.includes(r.f.relationship))}updateGroupedLists(){this.fields&&(this.fieldsOnly=[...this.getSortedList()].filter((e=>!this.isExpression(e))),this.expressionsOnly=[...this.getSortedList()].filter((e=>this.isExpression(e))))}addFieldInfoFlowItem(e,t){const s=this.flowElement.value,i=(0,o.dN)(a.qy`<calcite-flow-item selected .heading=${e.alias??e.name} .description=${e.name} class="panel" style=${(0,o.zl)(this.panelCutOffHeight>0?`max-height: ${this.panelCutOffHeight}px`:"max-height: 50vh")} @calciteFlowItemBack=${e=>{const s=e.currentTarget;s.parentElement?.removeChild(s),this.fieldInfoFlowItemEl.value.selected=!1,this.panelElement.value.selected=!0,setTimeout((()=>{t.setFocus()}),300)}} ${(0,n.K)(this.fieldInfoFlowItemEl)}><arcgis-common-field-info lang=${this._messages._lang??o.s6} .fieldName=${e.name} .layer=${this.layer} .view=${this.mapView} class="content"></arcgis-common-field-info></calcite-flow-item>`);s.appendChild(i),this.panelElement.value.selected=!1,this.fieldInfoFlowItemEl?.value.setFocus()}render(){const e=this.heading||(this.multiple?this._messages.headerSelect:this._messages.header),t=this.fields.length>=this.showFilterLength;return a.qy`<calcite-popover class="js-app-flyout" style=${(0,o.zl)({"--calcite-popover-z-index":`${this.popoverProps.zIndex??100}`})} .placement=${this.popoverProps.placement??"leading-start"} open pointer-disabled .referenceElement=${this.popoverProps.refElement} .offsetDistance=${this.popoverProps.offsetDistance??-Math.round(this.popoverProps.refElement.getBoundingClientRect().width)} .offsetSkidding=${this.popoverProps.offsetSkidding??0} .overlayPositioning=${this.popoverProps.overlayPositioning} trigger-disabled .autoClose=${this.popoverProps.autoClose} .label=${this.heading??(this.multiple?this._messages.headerSelect:this._messages.header)??""} @calcitePopoverClose=${()=>this.arcgisClose.emit()} ${(0,n.K)(this.popoverNode)}><calcite-flow style=${(0,o.zl)({width:`${this.popoverProps.popoverWidth??this.popoverProps.refElement.getBoundingClientRect().width}px`})} ${(0,n.K)(this.flowElement)}><calcite-flow-item class="panel" .heading=${e} closable @calciteFlowItemClose=${()=>this.arcgisClose.emit()} ${(0,n.K)(this.panelElement)}>${!this.fields.length&&a.qy`<slot name=no-fields></slot>`||""}<calcite-list .label=${e} .selectionMode=${this.multiple?"multiple":"single"} class="content" .filterEnabled=${t} .filterPlaceholder=${this.filterPlaceholderText??this._messages.filter} @calciteListChange=${()=>{const e=this.listNode.value.selectedItems.map((e=>e.value)),t=this.selectedFields.filter((t=>e.includes(t))),s=e.filter((e=>!this.selectedFields.includes(e)));this.selectedFields=[...new Set([...t,...s])],this.arcgisChange.emit({selectedFields:this.selectedFields}),this.multiple||this.arcgisClose.emit({selectedFields:this.selectedFields})}} @calciteListFilter=${e=>{e.stopPropagation(),this.filterFields=this.listNode.value.filteredItems?.map((e=>e.value)),this.filterText=this.listNode.value.filterText}} ${(0,n.K)(this.listNode)}>${this.renderSortButton()}${this.multiple&&this.showSelectionAll&&this.fields.length&&(!t||!this.filterText||this.filterFields?.length)?this.renderSelectionButton():null}${this.renderListItems()}</calcite-list>${this.filterFields&&!this.filterFields.length&&this.listNode.value?a.qy`<div class="no-match-text">${this.filterNoResultsText??this._messages.noMatches}</div>`:null}${this.renderAddButton()}${this.renderCancelButton()}</calcite-flow-item></calcite-flow></calcite-popover>`}renderSortButton(){if(!(this.fields.length>=this.showFilterLength)||this.hideSort)return;const e=this.fields.every((e=>!!e.type));return a.qy`<calcite-dropdown slot=filter-actions-end placement=bottom-end overlay-positioning=fixed .disabled=${!!this.filterFields&&this.filterFields.length<4} @calciteDropdownOpen=${()=>{this.observer?.disconnect(),this.popoverNode.value&&this.observer?.observe(this.popoverNode.value,{attributes:!0})}} @calciteDropdownClose=${()=>this.observer?.disconnect()} ${(0,n.K)(this.dropdownNode)}><calcite-action slot=trigger .text=${this._messages.sort??""} title=${this._messages.sort??o.s6}><calcite-icon scale=s icon=sortDescending></calcite-icon></calcite-action><calcite-dropdown-group><calcite-dropdown-item .selected=${"default"===this.lastSortBy} @click=${()=>{this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy)}} @keydown=${e=>{e.stopPropagation(),(" "===e.key||"Enter"===e.key)&&(this.lastSortBy="default",this.arcgisSortByChange.emit(this.lastSortBy))}}>${this._messages.default}</calcite-dropdown-item><calcite-dropdown-item .selected=${"display"===this.lastSortBy} @click=${()=>{this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy)}} @keydown=${e=>{e.stopPropagation(),(" "===e.key||"Enter"===e.key)&&(this.lastSortBy="display",this.arcgisSortByChange.emit(this.lastSortBy))}}>${this._messages.displayName}</calcite-dropdown-item>${e&&a.qy`<calcite-dropdown-item .selected=${"type"===this.lastSortBy} @click=${()=>{this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy)}} @keydown=${e=>{e.stopPropagation(),(" "===e.key||"Enter"===e.key)&&(this.lastSortBy="type",this.arcgisSortByChange.emit(this.lastSortBy))}}>${this._messages.type}</calcite-dropdown-item>`||""}<calcite-dropdown-item .selected=${"field"===this.lastSortBy} @click=${()=>{this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy)}} @keydown=${e=>{e.stopPropagation(),(" "===e.key||"Enter"===e.key)&&(this.lastSortBy="field",this.arcgisSortByChange.emit(this.lastSortBy))}}>${this._messages.fieldName}</calcite-dropdown-item></calcite-dropdown-group></calcite-dropdown>`}renderSelectionButton(){return a.qy`<div class="selection-button-div"><calcite-button appearance=transparent scale=s width=full @click=${()=>{this.canDeselectAll()?this.selectedFields=this.filterFields?.length?this.selectedFields.filter((e=>!this.filterFields?.includes(e))):[]:this.selectedFields=this.filterFields?.length?[...new Set([...this.selectedFields,...this.filterFields])]:this.fields.map((e=>e.name)),this.arcgisChange.emit({selectedFields:this.selectedFields})}}>${this.canDeselectAll()?this._messages.deselectAll:this._messages.selectAll}</calcite-button></div>`}renderListItems(){return this.groupFieldsAndExpressions?a.qy`${this.expressionsOnly.length>0&&a.qy`<calcite-list-item-group .heading=${this.expressionsGroupHeading}>${this.expressionsOnly.map((e=>this.renderCalciteListItem(e)))}</calcite-list-item-group>`||""}${this.fieldsOnly.length>0&&a.qy`<calcite-list-item-group .heading=${this.fieldsGroupHeading}>${this.fieldsOnly.map((e=>this.renderCalciteListItem(e)))}</calcite-list-item-group>`||""}`:[...this.getSortedList()].map((e=>this.renderCalciteListItem(e)))}renderCalciteListItem(e){return(0,l.D)(e.name,a.qy`<calcite-list-item .label=${e.alias||e.name} .description=${(()=>this.showFieldName&&!0!==e.hideFieldName?`{${e.name}}`:this.showDescription&&!0!==e.hideDescription&&e.description?e.description:void 0)()} .value=${e.name} .selected=${!this.multiple&&e.name===this.selectedFields[0]||this.multiple&&this.selectedFields.includes(e.name)} .metadata=${{label:e.alias,fieldName:e.name}}>${this.showFieldInfoCheck(e)&&a.qy`<calcite-action slot=actions-end .text=${this._messages.info??""} title=${this._messages.info??o.s6} scale=s icon=information @click=${t=>{t.stopPropagation();const s=t.currentTarget;this.addFieldInfoFlowItem(e,s)}}></calcite-action>`||""}</calcite-list-item>`)}renderAddButton(){if(this.multiple)return a.qy`<calcite-button slot=footer .appearance=${this.hideCancel?"outline-fill":"solid"} .width=${this.hideCancel?"full":"half"} @click=${()=>{this.arcgisClose.emit({selectedFields:this.selectedFields})}}>${this.okBtnText||(this.multiple?this._messages.done:this._messages.ok)}</calcite-button>`}renderCancelButton(){if(!this.hideCancel)return a.qy`<calcite-button slot=footer appearance=outline-fill .width=${this.multiple?"half":"full"} @click=${()=>this.arcgisClose.emit()}>${this._messages.cancel}</calcite-button>`}}(0,i.c)("arcgis-common-field-picker",d)},45138:(e,t,s)=>{s.d(t,{u:()=>p});var i=s(50217);const l=(e,{host:t,key:s,isReactive:l},o)=>{const n=t,a=n[s]!==e.exports,r=n[s]!==o,h=o!==e.exports;a&&!r&&h&&(n[s]=e.exports);if(t===e.component){if(l){const t=e.component.manager;r&&t.W(e,n[s]),e.onUpdate((i=>{if(i.has(s)){const i=n[s];i!==e.exports&&t.W(e,i)}}))}e.O=l?void 0:s}const c=e.component.constructor.elementProperties.get(s)?.readOnly;e.watchExports((()=>{n[s]!==e.exports&&(c?(0,i.h)((()=>{n[s]=e.exports})):n[s]=e.exports)}))};s(4395);var o=s(91021);const n=e=>r(void 0,e);class a extends i.C{constructor(e,t){super(e);const s=this.exports;try{(0,i.s)(this.component);const e=t(this.component,this),l=this.exports!==s;if((0,i.i)(e)){l||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this.P.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else l&&void 0===e||(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this.P.reject(e),console.error(e)}}catchUpLifecycle(){}}const r=(h=a,(...e)=>{const t=(0,i.e)(),s=new h(...e),o=s.exports;(0,i.d)(t.at(-1));const n=s.component.manager;n.W(s,o),s.watchExports(n.W.bind(n,s)),(0,i.o)(s);const a=[s.component,...t].reverse();return(0,i.t)(a,(e=>void 0===e?void 0:l(s,e,o)),o)});var h;i.C;const c=(e,t)=>{if(!t)return e;const s={...e};return Object.entries(t).forEach((([t,i])=>{s[t]="object"==typeof i?c(e[t],i):i??e[t]})),s};var d=s(6364);const p=(m=d.g,(e={})=>n(((t,s)=>{const i=(0,o.kn)(t.el),l={_lang:i.lang,_t9nLocale:i.t9nLocale,_loading:!0},n=t;s.onLifecycle((()=>(0,o.hd)(t.el,(()=>m("./assets")),(({t9nLocale:e,t9nStrings:i,lang:l})=>{const o={...i,_lang:l,_t9nLocale:e,_loading:!1};s.exports=o;const r=i.componentLabel;"string"==typeof r&&"label"in t&&null==t.label&&(t.label??=r),a(n.messageOverrides)}),e.name)));const a=e=>{const t=s.exports,i=t._original??t,l=c(i,e);e&&(l._original=i),s.exports=l};return"messageOverrides"in n&&s.onUpdate((e=>{e.has("messageOverrides")&&a(n.messageOverrides)})),e.blocking?(s.setProvisionalExports(l,!1),s.ready):l})));var m},59836:(e,t,s)=>{s.d(t,{D:()=>n});var i=s(85282),l=s(34670),o=s(42466);const n=(0,l.u$)(class extends l.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,s]){return t!==this.key&&((0,o.mY)(e),this.key=t),s}})},70757:(e,t,s)=>{s.d(t,{_:()=>m,K:()=>f});var i=s(85282),l=s(42466),o=s(34670);const n=(e,t)=>{const s=e._$AN;if(void 0===s)return!1;for(const e of s)e._$AO?.(t,!1),n(e,t);return!0},a=e=>{let t,s;do{if(void 0===(t=e._$AM))break;s=t._$AN,s.delete(e),e=t}while(0===s?.size)},r=e=>{for(let t;t=e._$AM;e=t){let s=t._$AN;if(void 0===s)t._$AN=s=new Set;else if(s.has(e))break;s.add(e),d(t)}};function h(e){void 0!==this._$AN?(a(this),this._$AM=e,r(this)):this._$AM=e}function c(e,t=!1,s=0){const i=this._$AH,l=this._$AN;if(void 0!==l&&0!==l.size)if(t)if(Array.isArray(i))for(let e=s;e<i.length;e++)n(i[e],!1),a(i[e]);else null!=i&&(n(i,!1),a(i));else n(this,e)}const d=e=>{e.type==o.OA.CHILD&&(e._$AP??=c,e._$AQ??=h)};class p extends o.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,s){super._$AT(e,t,s),r(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(n(this,e),a(this))}setValue(e){if((0,l.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const m=()=>new g;class g{}const u=new WeakMap,f=(0,o.u$)(class extends p{render(e){return i.s6}update(e,[t]){const s=t!==this.G;return s&&void 0!==this.G&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),i.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){const t=this.ht??globalThis;let s=u.get(t);void 0===s&&(s=new WeakMap,u.set(t,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?u.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})},95437:(e,t,s)=>{s.d(t,{f:()=>i});var i=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(i||{})}}]);