/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161"],{931:(e,t,r)=>{r.d(t,{l:()=>a});var n=r(93814);const a=async(e,t)=>(await n.e.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},3826:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>o,c:()=>i,d:()=>n});const n=(0,r(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=n.state,o=n.state,i=n.state},4429:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>u,c:()=>o,d:()=>c,e:()=>a,f:()=>n,g:()=>h,i:()=>p,m:()=>i,t:()=>s,u:()=>d});const n=(e,t)=>{let r,n="idle";const a=(...a)=>new Promise((o=>{switch(n){case"flushed":n="idle",r?(clearTimeout(r),o(e(...a))):o(null);break;case"invoked":clearTimeout(r),n="idle",o(e(...a));break;case"cancelled":clearTimeout(r),n="idle",o(null);break;default:r&&clearTimeout(r),n="pending",r=setTimeout((()=>(n="idle",o(e(...a)))),t)}}));return a.flush=function(...e){return n="flushed",a(...e)},a.invoke=function(...e){return n="invoked",a(...e)},a.cancel=function(...e){return n="cancelled",a(...e)},a.getStatus=function(){return n},a};function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function i(e,t){return await Promise.all([e,s(t)]),e}function s(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:r,data:n}=t(e);return[r,n]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,r)=>e&&t.indexOf(r)>-1),!0);function d(e,t){const r=[],n={};return e.forEach((e=>{const a=t(e);null==n[a]&&(n[a]=e,r.push(e))})),r}function u(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)}))}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((r,n)=>e.slice(t*n,t+t*n))),p=(e,t)=>e.includes(t)},5042:(e,t,r)=>{r.d(t,{a:()=>i,g:()=>o,s:()=>a,u:()=>s});var n=r(4429);function a(e,t,r,n){!function(e,t,r){r=r||{};let n=null==r?void 0:r.expires;if("number"==typeof n){const e=new Date,t=24*n*60*60*1e3;e.setTime(Date.now()+t),n=r.expires=e}"string"!=typeof n&&(null==n?void 0:n.toUTCString)&&(r.expires=n.toUTCString());let a,o=`${e}=${encodeURIComponent(t)}`;for(a in r){o+=`; ${a}`;const e=r[a];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,n?JSON.stringify(t):t,r)}function o(e,t){const r=function(e){const t=document.cookie,r=new RegExp(`(?:^|; )${(0,n.e)(e)}=([^;]*)`),a=t.match(r);return a?decodeURIComponent(a[1]):void 0}(e);return r&&t?JSON.parse(r):r}function i(e,t){const r=window.localStorage.getItem(e);return r&&t?JSON.parse(r):r}function s(e,t,r){const n=new Date(t);var o,i,s;n.setFullYear(t.getFullYear()+1),a(e,r,{expires:n}),r?(o=e,i="true",s=!1,window.localStorage.setItem(o,s?JSON.stringify(i):i)):function(e){window.localStorage.removeItem(e)}(e)}},28748:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>h,c:()=>i,d:()=>u,e:()=>y,f:()=>l,g:()=>v,h:()=>S,i:()=>b,j:()=>c,k:()=>d});var n=r(50637),a=r(59317),o=r(63054);function i(e,t){const r={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(r.clientPath=e.publisherFolderPath,r.info.path=e.newServerFolderPath,r.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(r.clientPath=e.publisherFolderPath,r.provider="UserManaged",r.info.datastoreConnectionType="replicated",r.info.fileServerPath=e.nfsSharePath,r.info.fileServerHost=e.nfsHostName,r.info.fileServerType="nfs"),r}function s(e,t){const r={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(r.info.connectionString=e.serverConnectionString,r.info.clientConnectionString=e.publisherConnectionString,r.info.dataStoreConnectionType="replicated"):"bigquery"===e.databaseProvider||"snowflake"===e.databaseProvider?(r.info.JDBCConnection=e.jdbcConnection,r.info.implementation=e.databaseProvider):"databricks"===e.databaseProvider?(r.provider=e.databaseProvider,r.info.connectionProperties=e.connectionProperties,r.info.implementation=e.databaseProvider):r.info.connectionString=e.publisherConnectionString,r}const l=async(e,t,r,n)=>{let a,o;if((null==r?void 0:r.length)>0){try{o=JSON.parse(r)}catch(e){return{error:{code:"invalidJSON"}}}a=function(e,t){const{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:d,client_x509_cert_url:u}=t,h={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:d,client_x509_cert_url:u}};return h}(e,o)}else(null==n?void 0:n.length)>0&&(a=function(e,t,r){const n={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:r};return n}(e,t,n));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{implementation:"bigquery",JDBCConnection:a}}}};function c(e){let t;const{server:r,httpPath:n,catalog:a,clientId:o,secret:i,token:s,authenticationType:l}=e,c=Object.assign({hostname:r,port:443,httpPath:n},a?{catalog:a}:{});return"oAuthMachineToMachine"===l?t=Object.assign({authenticationScheme:"oauth2",authenticationFlow:"machineToMachine",oauth2ClientId:o,oauth2Secret:i},c):"personalAccessToken"===l&&(t=Object.assign({authenticationScheme:"personalAccessToken",token:s},c)),{path:"/enterpriseDatabases/databricks",type:"egdb",provider:"databricks",info:{implementation:"databricks",connectionProperties:t}}}function d(e){let t;const{authenticationType:r,user:n,database:a,role:o,server:i,warehouse:s,schema:l,password:c,keyFile:d,passcode:u}=e,h={user:n,database:a,role:o,connectionUrl:`jdbc:snowflake://${i}`,warehouse:s,schema:l};return t="keyPair"===r?Object.assign(Object.assign({},h),{passcode:u||void 0,authenticator:"snowflake_jwt",keyfile:d}):Object.assign(Object.assign({},h),{password:c,authenticator:"snowflake"}),{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{implementation:"snowflake",JDBCConnection:t}}}function u(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const r={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?r.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete r.info.connectionProperties.fallbackServerAddresses,r}function h(e,t){const r=e.provider,n={info:{}},a={credentialType:"accesskey"};return"amazon"===r&&("accessKey"===e.credentialType?(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey):a.credentialType=e.credentialType,"custom"===e.selectedRegion.id?a.regionEndpointUrl=e.storageURL:(a.regionEndpointUrl=p(e.regions,e.selectedRegion),a.region=e.selectedRegion.id),n.info.objectStore=e.bucketName,n.provider="amazon"),"google"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,a.regionEndpointUrl="https://storage.googleapis.com",n.info.objectStore=e.bucketName,n.provider="Google"),"azure"!==r&&"azuredatalakegen2store"!==r||("sharedKey"===e.azureAuthenticationType?(a.credentialType="accessKey",a.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(a.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(a.tenantId=e.tenantId,a.clientId=e.clientId,a.clientSecret=e.clientSecret,a.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(a.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(a.credentialType=e.azureAuthenticationType,a.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(a.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?a.regionEndpointUrl=e.endpoint:a.accountEndpoint=p(e.regions,e.environment),"azure"===r?(n.info.objectStore=e.containerName,n.provider="azure"):(n.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.j)(e.cloudFolder)}`:e.containerName,n.provider="azureDataLakeStore"),"azureGeocatalog"===e.selectedServiceType?(a.tokenGenerationUrl=e.tokenGenerationUrl,a.scopes=[e.scope]):"microsoftPlanetaryComputers"===e.selectedServiceType&&(a.tokenGenerationUrl=e.tokenGenerationUrl),"anonymous"!==e.azureAuthenticationType&&"microsoftPlanetaryComputers"!==e.selectedServiceType&&(a.accountName=e.accountName)),"alibaba"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,n.info.objectStore=e.bucketName,n.provider="Alibaba",a.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:p(e.regions,e.selectedRegion)),a.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==r&&(n.info.objectStore=n.info.objectStore+"/"+(0,o.j)(e.cloudFolder)),n.type="cloudStore",["azureGeocatalog","microsoftPlanetaryComputers"].includes(e.selectedServiceType)&&("azureGeocatalog"===e.selectedServiceType?n.path="/cloudStores/azureGeocatalog":n.path="/cloudStores/microsoftPlanetaryComputers"),n.path="/cloudStores/"+t,n.info.connectionString=JSON.stringify(a),n}function p(e,t){let r;return e.forEach((function(e){e.id===t.id&&(r=e.blobStoreEndpoint||e.storageEndpointSuffix)})),r}const v=async(e,t)=>{const r=e.results.out_connectionString.paramUrl,a=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${r}`,o=await(0,n.r)(a);return f(o)},f=e=>{const t=e.value;return{connectionStringProps:g(t),connectionString:t}},g=e=>{let t=[];return e&&e.split(";").forEach((e=>{const r=e.split("=");2!==r.length||m(t,r[0])||t.push({key:r[0],value:r[1]})})),t},m=(e,t)=>e.some((e=>e.key===t)),b=()=>{var e;const t=a.c.portal,r=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===r},y=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`},S=(e,t,r,n)=>{var a;return Object.assign(Object.assign({},e),{children:null===(a=e.children)||void 0===a?void 0:a.filter((e=>{const a=e.type;let o=!1;return"folder"===a||("tile-layer"===r?o||(o="tiles"===n&&"cacheDataset"===a||"3dTiles"===n&&"3DTilesDataset"===a||"vectorTiles"===n&&"vectorCacheDataset"===a):"scene-layer"===r&&(o=P(e,a,t)),o)}))})},P=(e,t,r)=>{let n=!1;return r?"lasd"===e.path.split(".").pop().toLowerCase()?n=!1:n||(n="LASDataset"===t||"LIDARExchangeFile"===t):n||(n="extractedScenePackage"===t||"i3sRestCache"===t),n}},39582:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select_folder:()=>s});var n=r(87849),a=r(3826),o=r(28748),i=r(95878);r(37762),r(50637),r(59317),r(931),r(93814),r(87744),r(63054),r(76246),r(15912);const s=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.serverFolderPath=null,this.publisherFolderPath="",this.publisherFolderPathIsDriveLetterLocation=!1,this.publisherFolderPathHostname="",this.newServerFolderPath="",this.nfsHostName="",this.nfsSharePath="",this.error=null}async componentWillLoad(){this.i18n=i.u.i18n.dataStoreSelectFolder,this.checkIfDriveLetterLocation(a.a.publisherFolderPath||""),this.publisherFolderPathHostname=a.a.publisherFolderPathHostname,this.serverFolderPath=a.a.serverFolderPath||null,this.newServerFolderPath=a.a.newServerFolderPath,this.nfsHostName=a.a.nfsHostName,this.nfsSharePath=a.a.nfsSharePath}checkIfDriveLetterLocation(e){this.publisherFolderPath=e,this.publisherFolderPathIsDriveLetterLocation=1===e.split(":")[0].length}validateFolderInputs(){if(!this.publisherFolderPath)return this.error="invalidPublisherFolderPath",!1;if(this.publisherFolderPathIsDriveLetterLocation&&!this.publisherFolderPathHostname)return this.error="invalidPublisherHostName",!1;if("newPath"===this.serverFolderPath&&!this.newServerFolderPath)return this.error="invalidServerFolderPath",!1;if("nfsHostAndPath"===this.serverFolderPath){if(!this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsHostAndPath",!1;if(!this.nfsHostName&&this.nfsSharePath)return this.error="invalidNfsHostName",!1;if(this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsPath",!1}return!0}renderErrorItem(){var e,t;const{i18n:r,error:a}=this;return(0,n.h)("arcgis-new-item-alert",{heading:null===(e=r.errors[a])||void 0===e?void 0:e.heading,description:null===(t=r.errors[a])||void 0===t?void 0:t.description,active:null!==a,onAlertDismiss:()=>{this.error=null}})}handleNext(){this.validateFolderInputs()&&(a.a.publisherFolderPath=this.publisherFolderPath,a.a.serverFolderPath=this.serverFolderPath,this.publisherFolderPathIsDriveLetterLocation&&this.publisherFolderPathHostname?a.a.publisherFolderPathHostname=this.publisherFolderPathHostname:a.a.publisherFolderPathHostname=null,"newPath"===this.serverFolderPath&&this.newServerFolderPath?a.a.newServerFolderPath=this.newServerFolderPath:a.a.newServerFolderPath=null,"nfsHostAndPath"===this.serverFolderPath?(a.a.nfsHostName=this.nfsHostName,a.a.nfsSharePath=this.nfsSharePath):(a.a.nfsHostName=null,a.a.nfsSharePath=null),this.newItemUpdatePage.emit("dataStoreSelectServerList"))}render(){const{i18n:e,publisherFolderPathIsDriveLetterLocation:t}=this;return(0,n.h)("div",{key:"855a5612946bd3c0234cd892ca7cc4843bcab88c"},(0,n.h)("arcgis-new-item-description",{key:"c502f20fbd37b62f59c1bd171dd232f07395c17e",header:e.heading}),(0,n.h)("div",{key:"0d455116f758425048e50d97c9487587bbfbb68d",class:"input-label"},(0,n.h)("calcite-label",{key:"eb5684f495630fe9fc2907cc6c9e2eff41738e5b"},e.publisherFolderPath.heading,(0,n.h)("calcite-input",{key:"publisher-folder-path",placeholder:e.publisherFolderPath.placeholder,value:this.publisherFolderPath,required:!0,onCalciteInputChange:e=>{const t=e.target.value;this.checkIfDriveLetterLocation(t)}}))),t&&(0,n.h)("div",{key:"4312d1bc25af50d3c88446dce0df54b2c1e5d6c4",class:"input-label"},(0,n.h)("calcite-label",{key:"273f8e3d48c75b2ab304988943751be1f774efae"},e.publisherFolderPath.hostname,(0,n.h)("calcite-input",{key:"publisher-folder-path-hostname",type:"textarea",value:this.publisherFolderPathHostname,onCalciteInputChange:e=>{const t=e.target.value;this.publisherFolderPathHostname=t}}),(0,n.h)("div",{key:"264ba8bfee8bb6880bf0f694317b3658a96f1358",class:"hostname-info"},e.publisherFolderPath.hostnameInfo))),(0,n.h)("div",{key:"2365cbdf0a41ec442a5aee074d26e7dc593f58ea",class:"input-label"},(0,n.h)("calcite-label",{key:"11ec436d088fd2790dff830ad82371c69646cc5a"},e.serverFolderPath.heading)),(0,n.h)("calcite-tile-select-group",{layout:"vertical",key:"server-folder-path-select"},(0,n.h)("calcite-tile-select",{class:"tile-select",key:"publisher-folder-path-select",checked:null===this.serverFolderPath,description:e.serverFolderPath.sameAsPublisher,name:"same-as-publisher-folder-path","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverFolderPath=null}}),(0,n.h)("calcite-tile-select",{class:"tile-select",key:"new-server-folder-path-select",checked:"newPath"===this.serverFolderPath,description:e.serverFolderPath.newPath,name:"new-path","input-enabled":!0,width:"full",type:"radio",value:"newPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="newPath"}}),(0,o.i)()&&(0,n.h)("calcite-tile-select",{key:"nfs-host-and-path-select",checked:"nfsHostAndPath"===this.serverFolderPath,description:e.serverFolderPath.nfsHostAndPath.description,name:"nfs-host-and-path","input-enabled":!0,width:"full",type:"radio",value:"nfsHostAndPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="nfsHostAndPath"}})),"newPath"===this.serverFolderPath&&(0,n.h)("div",{key:"0bf845f0ab828b41bc0c2031e42c2f67ac3b4319",class:"input-label"},(0,n.h)("calcite-input",{key:"new-server-folder-path",placeholder:e.serverFolderPath.placeholder,value:this.newServerFolderPath,onCalciteInputChange:e=>{const t=e.target.value;this.newServerFolderPath=t}})),"nfsHostAndPath"===this.serverFolderPath&&(0,n.h)("div",{key:"787d8f5247c9ac0ee89a0086eef264a6bbeca8f9"},(0,n.h)("div",{key:"788a9692c9a8ab744287a6a8a3c43746bcc52521",class:"input-label"},(0,n.h)("calcite-label",{key:"87ea0072a32363d6174c241ad480292dfeddd7ed"},e.serverFolderPath.nfsHostAndPath.hostname,(0,n.h)("calcite-input",{key:"nfs-hostname",type:"textarea",value:this.nfsHostName,placeholder:"mynfshost.domain.com",onCalciteInputChange:e=>{const t=e.target.value;this.nfsHostName=t}}))),(0,n.h)("div",{key:"37c2e83591461d275c199776c59faa393902c636",class:"input-label"},(0,n.h)("calcite-label",{key:"8b1e44843393df1c2b2dd1546690f3a55e075c84"},e.serverFolderPath.nfsHostAndPath.sharePath,(0,n.h)("calcite-input",{key:"nfs-sharepath",type:"textarea",value:this.nfsSharePath,placeholder:"/data",onCalciteInputChange:e=>{const t=e.target.value;this.nfsSharePath=t}})))),this.renderErrorItem())}};s.style=".input-label{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.hostname-info{font-size:0.75rem}"},50637:(e,t,r)=>{r.d(t,{a:()=>g,b:()=>S,c:()=>h,d:()=>v,f:()=>d,g:()=>p,i:()=>u,p:()=>y,r:()=>m});var n=r(59317),a=r(4429),o=r(931),i=r(87744);const s={},l={},c={};async function d(e,t,r,n){var a,o,i,d;const u=null===(o=null===(a=c[t])||void 0===a?void 0:a[r])||void 0===o?void 0:o.expireAt,h=!!u&&(new Date).getTime()>u;if((null===(i=s[t])||void 0===i?void 0:i[r])&&!h)return s[t][r];l[t]||(l[t]={}),l[t][r]&&!h||(l[t][r]=e());const p=await l[t][r];if(s[t]||(s[t]={}),c[t]||(c[t]={}),s[t][r]=p,n){const{expireAfter:e,getExpireAfterFromResult:a}=n,o=a||e?(new Date).getTime()+(null!==(d=null==a?void 0:a(p))&&void 0!==d?d:e):null;c[t][r]=Object.assign(Object.assign({},c[t][r]),{expireAt:o})}return p}function u(e,t){var r;return null===(r=null==s?void 0:s[e])||void 0===r?void 0:r[t]}const h=(e,t)=>{var r,n;t?(null===(r=s[e])||void 0===r||delete r[t],null===(n=l[e])||void 0===n||delete n[t]):(delete s[e],delete l[e])};function p(e){var t,r,a,o;return null!=e||(e=null===n.c||void 0===n.c?void 0:n.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(a=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.credential)||void 0===a?void 0:a.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}function v(e){var t,r;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id}function f(e){var t;const{config:r}=n.c;return"https:"===window.location.protocol||!0===(null===(t=null==r?void 0:r.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function g(e,t,r={},a){const[i]=await(0,o.l)(["esri/request"]),{api:s}=n.c;e.includes("f=")||t.append("f","json");const l=p();return l&&!t.has("token")&&t.append("token",l),new Promise(((n,o)=>{if(3===s){const s={url:!1===r.addSSL?e:f(e),form:t,timeout:r.timeout||0},l="post"===a?Object.assign({usePost:!0},r):r;i(s,l).then(n,o)}else i(e,Object.assign(Object.assign({body:t},r),{timeout:r.timeout||0,method:a||"auto"})).then((e=>{n(e.data)})).catch((e=>o(e)))}))}async function m(e,t={},r={},a,i){const[s]=await(0,o.l)(["esri/request"]),{api:l,portal:c}=n.c,{customToken:d,addTokenManually:u,addSSL:h,useProxy:p}=r,v=Object.assign({},t);if(e.includes("f=")||!0===(null==i?void 0:i.excludeJson)||(v.f="json"),d)v.token=d;else if(!1!==u){const e=await S(c,l);e&&(v.token=e)}const g=!1===h?e:f(e);if(3===l){const e=Object.assign({url:g,content:v,timeout:r.timeout||0},null==i?void 0:i.v3Request);r.withCredentials&&(e.withCredentials=r.withCredentials);return s(e,"post"===a?Object.assign({usePost:!0},r):r)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:a||"auto"},r),{timeout:r.timeout||0,useProxy:p}),(null==r?void 0:r.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(g,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,r)=>{var n,o;const i=null!==(n=null==t?void 0:t.pendingStatuses)&&void 0!==n?n:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const n=await m(e,null==t?void 0:t.requestParams,{},r),o=n.status||n.jobStatus;if(i.includes(o))return await(0,a.t)((d=l++,1e3*b[d>-1&&d<b.length-1?d:b.length-1])),c();if(s.includes(o)||"failed"===o)return n;throw n;var d};try{return c()}catch(e){throw console.error(e),e}},S=async(e,t)=>{var r;if(!(null==e?void 0:e.isPortal)||!(0,i.i)(e))return p(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,i.i)(e))return;const{token:a}=await d((()=>P(e,null!=t?t:null===n.c||void 0===n.c?void 0:n.c.api)),"platformSelf",null!==(r=v(e.user))&&void 0!==r?r:e.id,{getExpireAfterFromResult:e=>e.expires_in});return a},P=async(e,t)=>{const r=await(async(e,t)=>{var r,n,a;const s=3===t,[l]=s?await(0,o.l)(["esri/IdentityManager"]):await(0,o.l)(["esri/identity/IdentityManager"]),c=await d((()=>l.getCredential((0,i.g)(e),{oAuthPopupConfirmation:!1})),"credential",v(e.user));return null!==(a=s?null===(r=c._oAuthCred)||void 0===r?void 0:r.appId:null===(n=c.oAuthState)||void 0===n?void 0:n.appId)&&void 0!==a?a:"arcgisonline"})(e,t),n={"X-Esri-Auth-Client-Id":r,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,i.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?n:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},63054:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>P,c:()=>m,d:()=>v,e:()=>S,f:()=>b,g:()=>p,h:()=>y,i:()=>g,j:()=>d,r:()=>c,s:()=>f,u:()=>u});var n=r(87744),a=r(59317),o=r(931),i=r(5042),s=r(76246),l=r(15912);function c(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function d(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function u(e){var t;const r=null!==(t=null===a.c||void 0===a.c?void 0:a.c.api)&&void 0!==t?t:4,[n]=4===r?await(0,o.l)(["esri/core/urlUtils"]):await(0,o.l)(["esri/urlUtils"]);let i=n.urlToObject(e);i.query=i.query||{};for(let e in i.query||{})i.query.hasOwnProperty(e)&&(Array.isArray(i.query[e])||(i.query[e]=i.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return i}function h(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function p(e){const t=(null==e?void 0:e.replace(/^.*\//,"").replace(/\?+.*/,""))||"",r=t.replace(/^.*\./,"").toLowerCase();return l.A.includes(r)?t:""}function v(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS","WCS"].includes(e)}function f(e){const{config:t,portal:r}=a.c;let n=!1;if(!e)return!1;if((t.httpsDomains||[]).forEach((t=>{(e.indexOf(`.${t}/`)>-1||e.indexOf(`/${t}/`)>-1)&&(n=!0)})),!n){let t=r.portalHostname;t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),e.indexOf(t)>-1&&(n=!0)}return n}function g(e){if(!e)return!1;const{config:t,portal:r}=a.c,o=(0,n.g)(r),i=new URL(o).hostname,s=!1===t.isMultiTenant,l=-1!==e.indexOf(".arcgis.com/"),c=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),d=r.supportsHostedServices&&-1!==e.indexOf(i)&&!s;return l&&c||!l&&d}function m(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const t=(0,i.g)("esri_auth",!0);return"web"!==(null===(e=null==t?void 0:t.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function b(e){let t=e.toLowerCase();-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t=(e="https://"+e).toLowerCase());let r=t.indexOf("//");r=t.indexOf("/",r+2),-1==r?t=(e+="/arcgis/rest/services").toLowerCase():r==t.length-1&&(t=(e+="arcgis/rest/services").toLowerCase());let n=t.indexOf("/arcgis",r);n==t.length-7?t=(e+="/rest/services").toLowerCase():n==t.length-8&&(t=(e+="rest/services").toLowerCase()),n=t.indexOf("/server",r),t.endsWith("/server")?t=(e+="/rest/services").toLowerCase():t.endsWith("/server/")&&(t=(e+="rest/services").toLowerCase());const a=t.indexOf("/rest/services",r),o=t.indexOf("/services",r),i=t.indexOf("/rest",r);return-1==a&&o>-1?t=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==a&&i>-1&&(t=(e=`${e.substring(0,i)}/rest/services${e.substring(i+5)}`).toLowerCase()),t.indexOf("/rest/services"),e}const y=(e,t=!1)=>(e=c(e=e.trim()),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!t&&"https:"!==location.protocol||!g(e)&&!f(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),S=(e,t=!1)=>{var r,a,o;if(!e)return{error:{code:"invalidUrl"}};if(P(e,t))return{error:{code:"httpWarning"}};const i=decodeURIComponent(e),l=i.replace(n.v,"").match(/((\.|\/)*(kml|kmz))/gi),c=i.replace(n.v,"").match(/((\/|\=)(wmts|wms|wfs|wcs))/gi),d=i.replace(n.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),u=i.replace(n.v,"").match(/((\.|\/)*(rss))/gi),h=null===(r=i.replace(n.v,"").match(n.r))||void 0===r?void 0:r[1],p=i.replace(n.v,"").match(n.e),v=i.replace(n.v,"").match(/((\.|\/)*(csv))/gi),f=i.replace(n.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let g=null;if(i.match(n.f))g="GeoJson";else if(!d||c||h)if(h&&!c)g=s.a[h];else if(p)g="Map Service";else if(c){const e="/"===(null==c?void 0:c[0].charAt(0))?"/":"=";g=null===(o=null===(a=null==c?void 0:c[0])||void 0===a?void 0:a.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else l?g="KML":u?g="GeoRSS":v?g="CSV":f?g="Tile Layer":i.endsWith("KnowledgeGraphServer")&&(g="Knowledge Graph");else g="OGCFeatureServer";return{result:g}},P=(e,t)=>!t&&e.includes("http://")},76246:(e,t,r)=>{r.d(t,{a:()=>n,i:()=>a});const n={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service",KnowledgeGraphServer:"Knowledge Graph Layer"},a=e=>!!Object.values(n).includes(e)},95878:(e,t,r)=>{r.d(t,{a:()=>n,u:()=>a});const n=(0,r(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),a=n.state}}]);