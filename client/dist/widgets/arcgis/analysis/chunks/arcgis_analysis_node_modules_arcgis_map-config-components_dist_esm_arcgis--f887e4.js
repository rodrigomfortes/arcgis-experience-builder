/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--f887e4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--f887e4"],{14528:(t,e,i)=>{function s(t){const e=[];h=t,queueMicrotask((()=>{h===t&&(h=void 0)}));const i=t.componentWillLoad;return t.componentWillLoad=async()=>{await Promise.all(e.map((t=>t()))).then((()=>{})),await(i?.call(t))},{onLoad:t=>e.push(t)}}let h;function n(){return h}i.d(e,{r:()=>n,u:()=>s})},96956:(t,e,i)=>{i.r(e),i.d(e,{arcgis_map_config_xy_slider:()=>n});var s=i(11254),h=i(14528);const n=class{constructor(t){(0,s.r)(this,t),this.arcgisChange=(0,s.c)(this,"arcgisChange",7),this.arcgisInput=(0,s.c)(this,"arcgisInput",7),this.manager=(0,h.u)(this),this.gridHovered=!1,this.snapKeyDown=!1,this.dragging=!1,this.width=100,this.height=100,this.gridMouseDownHandler=t=>{const{offsetX:e,offsetY:i}=t;this.dragging=!0,this.captureValue(e,i),t.preventDefault(),document.addEventListener("pointermove",this.globalMouseMoveHandler),document.addEventListener("pointerup",this.globalMouseUpHandler,{once:!0}),this.activeGridRect=this.context.canvas.getBoundingClientRect(),this.setFocus(),this.drawGrid()},this.globalMouseMoveHandler=t=>{const{el:e,activeGridRect:i}=this;if(!e.isConnected)return;let s,h;const n=i,{clientX:a,clientY:o}=t;if(this.gridHovered)s=a-n.x,h=o-n.y;else{const t=n.width,e=n.height;s=a<n.x+t&&a>n.x?a-n.x:a<n.x?0:t,h=o<n.y+e&&o>n.y?o-n.y:o<n.y?0:e}this.captureValue(s,h),this.drawGrid()},this.globalMouseUpHandler=()=>{this.dragging=!1,this.arcgisChange.emit(),document.removeEventListener("mousemove",this.globalMouseMoveHandler),document.removeEventListener("pointermove",this.globalMouseMoveHandler)},this.gridMouseEnter=()=>{this.gridHovered=!0},this.gridMouseLeave=()=>{this.gridHovered=!1},this.handleThumbKeyDown=t=>{let e,i;const{key:s}=t;["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(s)&&(t.preventDefault(),t.stopPropagation()),i="ArrowDown"===s?this.clamp(this.y+this.step,this.maxY,this.minY):"ArrowUp"===s?this.clamp(this.y-this.step,this.maxY,this.minY):this.y,e="ArrowLeft"===s?this.clamp(this.x-this.step,this.maxX,this.minX):"ArrowRight"===s?this.clamp(this.x+this.step,this.maxX,this.minX):this.x,this.userSetXY(e,i),this.drawGrid()},this.handleKeyUp=({shiftKey:t})=>{this.snapKeyDown=t},this.handleKeyDown=({shiftKey:t})=>{this.snapKeyDown=t},this.initGrid=t=>{t&&(this.context=t.getContext("2d"),this.setCanvasContextSize(t,{width:this.width,height:this.height}),this.drawGrid())},this.maxX=10,this.minX=-10,this.maxY=10,this.minY=-10,this.snappable=!1,this.step=1,this.x=0,this.y=0}disconnectedCallback(){document.removeEventListener("pointermove",this.globalMouseMoveHandler),document.removeEventListener("pointerup",this.globalMouseUpHandler)}handleXChange(t){this.x=this.clampX(t),this.drawGrid()}handleYChange(t){this.y=this.clampY(t),this.drawGrid()}clamp(t,e,i){return Math.min(e,Math.max(i,t))}clampX(t){return this.clamp(t,this.maxX,this.minX)}clampY(t){return this.clamp(t,this.maxY,this.minY)}userSetXY(t,e){t=this.normalize(t),e=this.normalize(e),t=Math.round(1e7*t)/1e7,e=Math.round(1e7*e)/1e7,this.x===t&&this.y===e||(this.x=t,this.y=e,this.arcgisInput.emit(),this.dragging||this.arcgisChange.emit())}mapToRange(t,e,i,s,h){return s+(t-e)*(h-s)/(i-e)}setCanvasContextSize(t,{height:e,width:i}){const s=window.devicePixelRatio||1;t.width=i*s,t.height=e*s,t.style.height=`${e}px`,t.style.width=`${i}px`;t.getContext("2d").scale(s,s)}normalize(t){return this.snappable||this.snapKeyDown?Math.floor(t/this.step):t}captureValue(t,e){this.userSetXY(this.mapToRange(t,0,this.width,this.minX,this.maxX),this.mapToRange(e,0,this.height,this.minY,this.maxY))}drawGrid(){const{context:t,height:e,width:i}=this,s=t;s.fillStyle="#ffffff",s.strokeStyle="#d4d4d4",s.lineWidth=2,s.setLineDash([2]),s.fillRect(0,0,i,e),s.strokeRect(0,0,i,e),s.beginPath(),s.moveTo(0,e/2),s.lineTo(i,e/2),s.stroke(),s.beginPath(),s.moveTo(i/2,0),s.lineTo(i/2,e),s.stroke(),s.setLineDash([]);const h=this.mapToRange(this.x,this.minX,this.maxX,0,this.width),n=this.mapToRange(this.y,this.minY,this.maxY,0,this.height);s.strokeStyle="rgba(0, 97, 155, 0.4)",s.lineWidth=2,s.beginPath(),s.moveTo(i/2,e/2),s.lineTo(h,n),s.stroke()}async setFocus(){this.thumbEl?.focus()}render(){const t=`${this.mapToRange(this.x,this.minX,this.maxX,0,this.width)}%`,e=`${this.mapToRange(this.y,this.minY,this.maxY,0,this.height)}%`;return(0,s.h)(s.H,{key:"70741a0b0b65910977c327cd4443d21a13fc6264",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},(0,s.h)("div",{key:"4801aabef448827557a0ed0ea61cf159f1e36187",class:"container"},(0,s.h)("canvas",{key:"0c9aa2a54dba90e2e2bb895edfd15b402a4df5a3",class:"grid",onPointerDown:this.gridMouseDownHandler,onPointerEnter:this.gridMouseEnter,onPointerLeave:this.gridMouseLeave,ref:this.initGrid}),(0,s.h)("div",{key:"3c420e0e782b9bb011f97090ee86c2afff02cb61",class:"thumb",ref:t=>this.thumbEl=t,style:{left:t,top:e},tabIndex:0,onKeyDown:this.handleThumbKeyDown})))}get el(){return(0,s.a)(this)}static get watchers(){return{x:["handleXChange"],y:["handleYChange"]}}};n.style=":host{display:inline-flex}.container{position:relative;width:100px;height:100px}.grid{width:100px;height:100px}.thumb{position:absolute;background-color:var(--calcite-color-brand);width:12px;height:12px;display:inline-block;border-radius:50%;margin-left:-6px;margin-top:-6px;pointer-events:none}"}}]);