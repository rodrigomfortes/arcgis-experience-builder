/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-840a03.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-840a03"],{10602:(e,t,s)=>{s.r(t),s.d(t,{arcgis_delete_items:()=>a});var i=s(87849),n=s(37762),l=s(80021),o=s(64099);s(93814),s(59317),s(90310),s(50637),s(931),s(87744),s(50822),s(83929),s(68194),s(15332),s(81034);const a=class{constructor(e){(0,i.r)(this,e),this.arcgisDeleteItemsDelete=(0,i.c)(this,"arcgisDeleteItemsDelete",7),this.arcgisDeleteItemsError=(0,i.c)(this,"arcgisDeleteItemsError",7),this.arcgisDeleteItemsClose=(0,i.c)(this,"arcgisDeleteItemsClose",7),this.arcgisDeleteItemsModeChange=(0,i.c)(this,"arcgisDeleteItemsModeChange",7),this.compositeItemsTotal=0,this.additionalCompositeItemsTotal=0,this.deletePrimaryAction="RECYCLE",this.headerTitle="",this.configurePermanentlyDeleteOverrideUI=()=>{var e;const{i18n:t}=this;this.headerTitle=t.permanentlyDelete,this.primaryButtonText=t.permanentlyDelete,this.deleteMode="UNRECYCLABLE",this.permanentDeleteOverrideEnabled=!0,null===(e=this.modalRef)||void 0===e||e.setFocus()},this.renderContent=()=>{var e,t;const{portal:s,items:n,inRecycleBin:l,deleteItemsBuckets:o,deleteMode:a,deletePrimaryAction:r,permanentDeleteOverrideEnabled:c,configurePermanentlyDeleteOverrideUI:d,showConfirmDeleteMessage:h,allowPermanentlyDeleteDeselect:m}=this;return(0,i.h)(i.F,null,(0,i.h)("slot",{name:"message"}),this.showCompositeDisclaimer?(0,i.h)("arcgis-delete-items-composite-disclaimer",{buckets:this.deleteItemsBuckets,additionalDependentItemsTotal:this.additionalCompositeItemsTotal}):(null!==(t=null===(e=s.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled)&&void 0!==t?t:s.recycleBinEnabled)&&!l?(0,i.h)("arcgis-delete-items-recycle",{items:n,buckets:o,mode:a,primaryAction:r,primaryBucket:this.primaryBucket,allowPermanentlyDeleteDeselect:m,permanentlyDeleteOverridden:c,disableLinks:this.disableLinks,onArcgisDeleteItemsPermanentlyDeleteOverride:()=>{d()},onArcgisDeleteItemsPermanentlyDeleteBucketToggle:({detail:e})=>{this.preventNonRecyclableItemDelete=e},showSelectedItemsCount:this.showSelectedItemsCount}):h?(0,i.h)("arcgis-delete-items-permanent",{buckets:o,mode:a}):null)},this.handleDelete=async()=>{var e,t;this.isLoading=!0;const{unprotectedItems:s,unrecyclableItems:i}=this.deleteItemsBuckets,n=s.map((e=>e.item)),o=i.map((e=>e.item));let a=[],r=[],c=[];const d=e=>e+this.compositeItemsTotal;try{const e=[...n];!this.preventNonRecyclableItemDelete&&e.push(...o),this.permanentDeleteOverrideEnabled||this.inRecycleBin?a=await this.deleteItems(e,!0):c=e.length>0?await this.deleteItems(e):[];for(const e of c)n.some((t=>t.id===e.itemId))?r.push(e):o.some((t=>t.id===e.itemId))&&a.push(e);const t=(0,l.s)({deletedItems:r,permanentlyDeletedItems:a}),s={deletedItems:[...t.successes.filter((e=>!e.permanentDelete))],permanentlyDeletedItems:[...t.successes.filter((e=>e.permanentDelete))],deletedItemsCount:r.length>0?d(r.length):0,permanentlyDeletedItemsCount:a.length>0?d(a.length):0};t.successes.length>0&&this.arcgisDeleteItemsDelete.emit(s);const{errors:i}=t;i.length>0&&this.arcgisDeleteItemsError.emit(i),this.closeOnConfirm&&(this.active=!1)}catch(s){this.arcgisDeleteItemsError.emit({messageCode:null!==(t=null===(e=s.details)||void 0===e?void 0:e.messageCode)&&void 0!==t?t:"unknown"}),this.isLoading=!1}},this.deleteItems=async(e,t=!1)=>1===e.length?[await(0,l.d)(e[0],this.portal,t)]:(await(0,l.a)(e,this.portal,t)).results,this.user=void 0,this.portal=void 0,this.items=[],this.inRecycleBin=void 0,this.active=void 0,this.showSelectedItemsCount=!0,this.showConfirmDeleteMessage=!0,this.allowPermanentlyDeleteDeselect=!0,this.disableLinks=void 0,this.primaryBucket="unrecyclableItems",this.closeOnConfirm=!0,this.allowDiscouraged=void 0,this.store=(0,n.c)({}),this.deleteItemsBuckets={unrecyclableItems:[],unprotectedItems:[],protectedItems:[],selectedCompositeItems:[]},this.permanentDeleteOverrideEnabled=!1,this.showCompositeDisclaimer=!1,this.isLoading=!1,this.preventNonRecyclableItemDelete=!1}async componentWillLoad(){const e=await(0,o.g)(this.el);this.i18n=e[0],this.store.state.i18n=this.i18n,this.store.state.portal=this.portal,this.store.state.locale=(0,o.a)(this.el),this.determineDeleteState()}async handleItemUpdate(){this.determineDeleteState({fetch:!0})}async determineDeleteState(e={fetch:!0}){const{fetch:t}=e;try{if(this.inRecycleBin)return this.deleteMode="UNRECYCLABLE",this.deletePrimaryAction="PERMANENTLY_DELETE",this.primaryButtonText=this.i18n.permanentlyDelete,this.headerTitle=this.i18n.permanentlyDelete,void(this.deleteItemsBuckets.unrecyclableItems=this.items.map((e=>({item:e}))));t&&(this.isLoading=!0,this.deleteItemsBuckets=Object.assign({},await(0,l.b)(this.items,this.portal,this.allowDiscouraged)),this.compositeItemsTotal=this.countDependentItems(),this.additionalCompositeItemsTotal=this.compositeItemsTotal-this.deleteItemsBuckets.selectedCompositeItems.length,this.showCompositeDisclaimer=this.additionalCompositeItemsTotal>0,this.isLoading=!1),this.deleteMode=(0,l.c)(this.deleteItemsBuckets),this.arcgisDeleteItemsModeChange.emit(this.deleteMode),this.deletePrimaryAction=(0,l.e)(this.deleteMode),this.primaryButtonText=this.i18n["PERMANENTLY_DELETE"===this.deletePrimaryAction?"permanentlyDelete":"delete"],this.headerTitle=this.i18n["PERMANENTLY_DELETE"===this.deletePrimaryAction?"permanentlyDelete":(0,l.i)(this.deleteItemsBuckets.unprotectedItems)||1!==this.items.length?"deleteItems":"deleteItem"]}catch(e){console.error(e)}}countDependentItems(){const{unprotectedItems:e}=this.deleteItemsBuckets;return e.reduce(((e,t)=>{var s,i,n,l;return e+(null!==(l=(null===(s=t.relatedItems)||void 0===s?void 0:s.isComposite)&&(null===(n=null===(i=t.relatedItems)||void 0===i?void 0:i.resultData)||void 0===n?void 0:n.count))&&void 0!==l?l:0)}),0)}renderDeleteButton(){const{isLoading:e,i18n:t,primaryButtonText:s}=this;return(0,i.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"danger","data-id":"nextButton",onClick:async()=>this.handleDelete(),disabled:e||"PROTECTED_UNRECYCLABLE"===this.deleteMode&&this.preventNonRecyclableItemDelete},null!=s?s:t.delete)}renderCompositeDisclaimerNextButton(){const{isLoading:e,i18n:t}=this;return(0,i.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:async()=>this.showCompositeDisclaimer=!1,disabled:e},t.next)}render(){const{i18n:e,active:t,isLoading:s,headerTitle:n,deletePrimaryAction:l,permanentDeleteOverrideEnabled:o,additionalCompositeItemsTotal:a,showCompositeDisclaimer:r,renderContent:c}=this,d=o||!r&&a>0;return(0,i.h)("calcite-dialog",{key:"1e62f531245e0604cd3729865801500b83ec3f4d",modal:!0,open:t,widthScale:"s",kind:r?"info":"danger",outsideCloseDisabled:!0,ref:e=>this.modalRef=e,heading:n,onCalciteDialogClose:()=>{this.arcgisDeleteItemsClose.emit(),this.active=!1}},(0,i.h)("div",{key:"030b6ee713cc4e69e76d348f4bbad30651fd6c80",class:"content"},s?(0,i.h)("calcite-scrim",{loading:!0}):c()),!s&&(0,i.h)(i.F,{key:"cd96f8f45a3c8fbcf9ef7db71deb3bfd010407a0"},(0,i.h)("div",{key:"48e4e2f5ad2bd2c0b3342504ed9c9df8b02c4237",slot:"footer-start"},d&&(0,i.h)("calcite-button",{key:"7431425fdb97aeadc4511a7f7a18eab91cdce88f",appearance:"outline-fill",kind:"neutral","data-id":"backButton",onClick:()=>{o?(this.permanentDeleteOverrideEnabled=!1,this.determineDeleteState({fetch:!1})):this.showCompositeDisclaimer=!0},disabled:s},e.back)),(0,i.h)("calcite-button",{key:"2a1152499f305e9f047f8190288742b49d835eab",slot:"footer-end",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{this.active=!1}},e.cancel),"NONE"!==l&&(this.showCompositeDisclaimer?this.renderCompositeDisclaimerNextButton():this.renderDeleteButton())))}get el(){return(0,i.a)(this)}static get watchers(){return{items:["handleItemUpdate"]}}};a.style=".content{display:flex;min-height:72px;flex-direction:column;justify-content:center}::slotted([slot=message]){margin-bottom:1rem}"},64099:(e,t,s)=>{s.d(t,{a:()=>o,g:()=>c});var i=s(15332),n=s(81034),l=s(87849);function o(e){var t,s,l;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(l=null===(s=e.shadowRoot)||void 0===s?void 0:s.ownerDocument)||void 0===l?void 0:l.documentElement,a=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(a)?n.l.get(a):n.l.has(a.slice(0,2))?n.l.get(a.slice(0,2)):"en"}const a={};function r(e,t){const s=`${e}${t}`;return a[s]||(a[s]=function(e,t){return new Promise(((s,i)=>{fetch((0,l.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then((e=>{e.ok?s(e.json()):i()}),(()=>i()))}))}(e,t)),a[s]}async function c(e,t){const s=t||e.tagName.toLowerCase(),l=o(e),a=function(e){var t,s,l;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(l=null===(s=e.shadowRoot)||void 0===s?void 0:s.ownerDocument)||void 0===l?void 0:l.documentElement,a=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return n.l.has(a)?n.l.get(a):n.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await r(s,l)}catch(e){console.warn(`no locale for ${s} (${l}) loading default locale en.`),c=await r(s,"en")}return[c,l,a]}},81034:(e,t,s)=>{s.d(t,{C:()=>a,a:()=>r,b:()=>d,f:()=>h,g:()=>o,l:()=>l,s:()=>u});var i=s(931),n=s(15332);const l=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,s){const i=(0,n.c)(e,`[${t}]`);return i?i.getAttribute(t):s}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function r(e,t){const{api:s,type:n,places:l}=t||{};if(4===s){const[t]=await(0,i.l)(["esri/intl"]),s=t.convertNumberFormatToIntlOptions({places:l,style:n,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},s),{style:n}))}const[o]=await(0,i.l)(["dojo/number"]);return o.format(e,{type:n,places:l,pattern:null==t?void 0:t.pattern})}const c={};function d(e,t){let s=document.documentElement.lang;const i="bs"===s;if(i&&(s="hr"),t){const t=`${s}-full`,i={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(s,i)),c[t].format(e)}const n={year:"numeric",month:i?"numeric":"short",day:"numeric"};return c[s]||(c[s]=new Intl.DateTimeFormat(s,n)),c[s].format(e)}function h(e,t,s,i){const n=null!=e?e:"en";let l=t.unknown;return(1===s||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(n))&&(l=t.single),1!==s&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(n)&&(l=t.multiple),u(l,Object.assign(Object.assign({},i),{number:s}))}const m=/\$\{([^}]+)\}/g;function u(e,t,s=m){let i=e;try{i=e.replace(s,((e,s)=>function(e,t){const s=e.split(".").reduce(((e,t)=>e[t]),t);return"string"==typeof s||"number"==typeof s?s:e}(s,t).toString()))}catch(e){console.error(e)}return i}}}]);