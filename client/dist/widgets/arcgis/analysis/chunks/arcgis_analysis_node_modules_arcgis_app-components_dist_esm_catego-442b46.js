/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_catego-442b46.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_catego-442b46"],{37362:(r,e,n)=>{n.d(e,{U:()=>t,a:()=>o,b:()=>i,g:()=>l});const t="/Categories",i=(r,e,n=!0)=>{const t=null!=r?r:"";return`${t}${t.endsWith("/")?"":"/"}${n?e.title.toLocaleLowerCase():e.title}`};function o(r){var e;let n=null===(e=null==r?void 0:r[0])||void 0===e?void 0:e.title;return n&&"/"!==n.charAt(0)&&(n=`/${n}`),n||t}const l=(r,e)=>`${r.replace(/\/([^\/]+)$/,`/${e}`)}`},38295:(r,e,n)=>{n.d(e,{a:()=>g,b:()=>d,c:()=>p,d:()=>f,e:()=>v,f:()=>c,g:()=>s,u:()=>m});var t=n(50637),i=n(37362),o=n(59317),l=n(51102),u=n(87744),a=n(56175);const s=async({portal:r,user:e,group:n,useCache:t=!1})=>{var i;try{const o=await(n?d(n.id,r,t):c(r,e,t));return{result:null!==(i=null==o?void 0:o.categorySchema)&&void 0!==i?i:null}}catch(r){return console.error(r),{error:{code:"unhandledError"}}}};async function c(r,e,n=!0){if(null!=r||(r=o.c.portal),null!=e||(e=o.c.user),!(null==r?void 0:r.id)||e&&(0,a.b)(e))return null;const i=()=>(0,t.r)(`${(0,u.g)(r)}portals/${r.id}/categorySchema`);return n?(0,t.f)(i,"categorySchema",r.id):i()}async function d(r,e,n=!0){if(null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.portal),!r||!e)return null;const i=()=>(0,t.r)(`${(0,l.a)(e,{id:r})}categorySchema`);return n?(0,t.f)(i,"categorySchema",r):i()}const v=async({user:r,portal:e,useCache:n=!1})=>{var t;const i=await p(e,r,n);return{result:null!==(t=null==i?void 0:i.memberCategorySchema)&&void 0!==t?t:null}};async function p(r,e,n=!0){if(null!=r||(r=o.c.portal),null!=e||(e=o.c.user),!(null==r?void 0:r.id)||e&&(0,a.b)(e))return null;const i=()=>(0,t.r)(`${(0,u.g)(r)}portals/${r.id}/memberCategorySchema`);return n?(0,t.f)(i,"memberCategorySchema",r.id):i()}async function g(r,e,n=!0){const i=()=>async function(r,e){var n;const i=(0,u.g)(r),o=(0,u.h)(r),a=await(0,t.r)(`${i}portals/self?culture=${o}`),s=await(0,t.r)(`${i}community/groups?q=${a.contentCategorySetsGroupQuery}`),c=null===(n=null==s?void 0:s.results)||void 0===n?void 0:n[0],d=(await(0,t.r)((0,l.g)(r,c),{q:`typekeywords: ${e}`})).results[0];return(0,t.r)(`${i}content/items/${d.id}/data`)}(r,e);return n?(0,t.f)(i,"categorySchema",e):i()}async function m({categories:r,itemIds:e,portal:n,group:i}){try{const o=`${(0,u.g)(n)}/content/${i?`groups/${i.id}/updateCategories`:"updateItems"}`,l=JSON.stringify(e.map((e=>{const n=Array.isArray(r)?r:r[e];return{[e]:i?n:{categories:n}}})));return{result:await(0,t.r)(o,{items:l},{},"post")}}catch(r){return console.error(r),{error:{code:"unhandledError"}}}}const f=async({path:r,portal:e,group:n,updateInfo:t})=>{try{const o=(await h({category:r,portal:e,group:n,num:1})).total;if(0===o)return console.warn(`No items found with category ${r} when updating schema`),{};const l=100,u=Math.ceil(o/l),a=[];for(let o=0;o<u;o++)a.push(h({category:r,portal:e,group:n,start:o*l,num:l}).then((({results:e})=>{const o={};return e.forEach((e=>{var l;const u=null!==(l=n?e.groupCategories:e.categories)&&void 0!==l?l:[],a="change-title"===t.type?u.map((e=>{const n=(0,i.g)(r,t.newTitle);return e===r?n:e.replace(`${r}/`,`${n}/`)})):u.filter((e=>!e.startsWith(r)));o[e.id]=a})),o})));const s=await Promise.all(a);return await Promise.all(s.map((r=>m({categories:r,itemIds:Object.keys(r),portal:e,group:n})))),{}}catch(e){return console.error(`Error ${t.type} items schema from path ${r}:`,e),{error:{code:"unhandledError"}}}},h=({category:r,num:e=100,start:n=0,portal:i,group:o})=>{const a={start:n,num:e,categories:JSON.stringify([r])},s=o?(0,l.g)(i,o):`${(0,u.g)(i)}search`;return(0,t.r)(s,Object.assign(Object.assign({},a),{q:o?void 0:`orgid: ${i.id}`}))}},51102:(r,e,n)=>{n.d(e,{a:()=>i,g:()=>o,i:()=>l});var t=n(87744);const i=(r,e)=>(0,t.a)(`${(0,t.g)(r)}community/groups/${e.id}`),o=(r,e)=>`${((r,e)=>(0,t.a)(`${(0,t.g)(r)}content/groups/${e.id}`))(r,e)}search`,l=r=>{var e;return null===(e=null==r?void 0:r.capabilities)||void 0===e?void 0:e.includes("distributed")}},56175:(r,e,n)=>{n.d(e,{A:()=>E,B:()=>A,C:()=>p,D:()=>G,a:()=>u,b:()=>o,c:()=>l,d:()=>m,e:()=>b,f:()=>y,g:()=>$,h:()=>S,i:()=>v,j:()=>w,k:()=>k,l:()=>a,m:()=>I,n:()=>c,o:()=>d,p:()=>g,q:()=>x,r:()=>q,s:()=>s,t:()=>C,u:()=>P,v:()=>O,w:()=>D,x:()=>f,y:()=>h,z:()=>T});var t=n(50822);const i=r=>{var e,n,t;return"string"==typeof(null==r?void 0:r.role)&&(null==r?void 0:r.role)?null==r?void 0:r.role:null!==(n=null!==(e=null==r?void 0:r.roleId)&&void 0!==e?e:null==r?void 0:r.id)&&void 0!==n?n:null===(t=null==r?void 0:r.sourceJSON)||void 0===t?void 0:t.id};function o(r){return r&&!r.orgId}function l(r,e){return(0,t.u)(r,e)||"update"===r.itemControl||(0,t.c)([r],e)&&y(e)}function u(r,e){const n=(0,t.c)([r],e),i=(0,t.u)(r,e)||y(e)&&n,o=$(e)&&_(e);return!!(i||n&&o)}const a=r=>{var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:manageLicenses"))},s=r=>{var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:changeUserRoles"))},c=r=>{var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:viewGroups"))},d=r=>{var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:viewUsers"))};function v(r){return["Trial Developer","Developer","Developer Subscription"].includes(null==r?void 0:r.type)}function p(r){return["Developer Subscription"].includes(null==r?void 0:r.type)}function g(r){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==r?void 0:r.type)}const m=r=>{var e;return null===(e=null==r?void 0:r.options)||void 0===e?void 0:e.includes("Developer")},f=r=>{var e;return null===(e=null==r?void 0:r.options)||void 0===e?void 0:e.includes("PublicSharingDisabled")},h=r=>{var e;return null===(e=null==r?void 0:r.options)||void 0===e?void 0:e.includes("HostedServicesPublicSharingDisabled")};function y(r){return"org_admin"===i(r)||"account_admin"===i(r)}function b(r){return["org_admin","account_admin"].includes(i(r))&&!(null==r?void 0:r.roleId)}function $(r){return!!(null==r?void 0:r.roleId)&&r.roleId.length>0}function w(r){var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:updateItemCategorySchema"))}function S(r){var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:updateGroups"))}function I(r){var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:assignToGroups"))}const _=r=>{var e;return!!(null===(e=null==r?void 0:r.privileges)||void 0===e?void 0:e.includes("portal:admin:deleteItems"))};function C(r){return((null==r?void 0:r.privileges)||[]).includes("portal:user:shareToGroup")}function P(r){return((null==r?void 0:r.privileges)||[]).includes("portal:user:shareToOrg")}function T(r){return((null==r?void 0:r.privileges)||[]).includes("portal:user:shareToPublic")}function D(r){return((null==r?void 0:r.privileges)||[]).includes("portal:admin:shareToOrg")}function E(r){return((null==r?void 0:r.privileges)||[]).includes("portal:admin:shareToPublic")}function O(r){return((null==r?void 0:r.privileges)||[]).includes("portal:admin:shareToGroup")}function k(r,e,n,t){const i=t&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(t.type),o=((null==e?void 0:e.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==r?void 0:r.collaborationsEnabled)||!e||!y(e)&&!o||!(null==n?void 0:n.isPortal)&&!i)}function G(r){return!!r&&(!$(r)||$(r)&&function(r){return((null==r?void 0:r.privileges)||[]).includes("portal:admin:viewItems")}(r))}const A=({items:r,user:e,portal:n})=>{const i=r[0],o=i.owner;if(n.isPortal&&o!==e.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const u=(0,t.u)(i,e),a=$(e),s=N(e),c=l(i,e)&&function(r){return((null==r?void 0:r.privileges)||[]).includes("portal:admin:updateItems")}(e)&&!a&&(function(r,e){return!function(r){return!(!r.urlKey||!r.customBaseUrl)||!!r.isPortal}(e)||C(r)||P(r)||!!e.canSharePublic&&T(r)}(e,n)||N(e));return u||c||(0,t.c)(r,e)&&s};function N(r){return O(r)||D(r)||E(r)}const j=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function q(r){return r.some((r=>j.includes(r)))}function x(r){return r.filter((r=>j.includes(r)))}}}]);