/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-4e48f0.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-4e48f0"],{16953:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_data_store_list:()=>h});var r=a(87849),i=a(59317),s=a(62296),o=a(49770),n=a(3826),d=a(95878),l=a(77868),c=a(28748);a(37762),a(87744),a(68194),a(50637),a(931),a(93814),a(32710),a(83929),a(76246),a(63054),a(15912),a(24869),a(72257),a(86562),a(15332),a(50020),a(50822),a(75294),a(38295),a(51102),a(56175),a(43555),a(11163);const h=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.selected=void 0,this.items=void 0,this.pagination=void 0,this.loading=!1,this.error=null}async componentWillLoad(){this.selected={id:n.a.dataStoreId,name:n.a.dataStoreName},this.i18n=d.u.i18n.tileLayerFromStore}isValidDataStoreType(e){return e.typeKeywords.some((e=>{const t=e.toLowerCase();return t.startsWith("cloudstore")||t.startsWith("folder")}))}renderErrorItem(){var e,t;const{i18n:a,error:i,loading:s}=this;let o,n;return"failToListDataStoreContents"===i?(o="Unable to list content of the data store",n="An error occurred while listing the data store's contents."):(o=null===(e=a.error[i])||void 0===e?void 0:e.heading,n=null===(t=a.error[i])||void 0===t?void 0:t.description),(0,r.h)("arcgis-new-item-alert",{heading:o,description:n,active:null!==i&&!s,onAlertDismiss:()=>{this.error=null}})}async handleNext(){var e;if(!this.selected||!this.selected.id||!this.selected.name)return void(this.error="noDataStoreSelected");const t=this.selected;this.loading=!0;const a=(await(0,o.g)(t.id)).result;if(0===a.length)return this.error="noRegisteredServersForDataStore",void(this.loading=!1);n.a.serverList=a,n.a.serverId=a[0].id,n.a.dataStoreId=t.id,n.a.dataStoreName=t.name;const r=await(0,s.g)(n.a.dataStoreId,"/","datastore",n.a.serverId);if("failToListDataStoreContents"===(null===(e=r.error)||void 0===e?void 0:e.code))return this.loading=!1,void(this.error="failToListDataStoreContents");const i=r.result,d=this.filterContentsByUserSelection(i);if(!i.children||0===d.children.length)return this.error="noContentInDataStore",void(this.loading=!1);n.a.datastoreContents=d,n.a.dataStoreCachedData=Object.assign(Object.assign({},n.a.dataStoreCachedData),{"/":n.a.datastoreContents}),(0,l.b)(),this.newItemUpdatePage.emit("dataStoreBrowser")}filterContentsByUserSelection(e){const t="tileLayer"===n.a.newItemMode?"tile-layer":"scene-layer";return(0,c.h)(e,!!n.a.addPointCloudOption,t,n.a.tileLayerPublishType)}render(){const{selected:e,pagination:t,i18n:a,loading:s}=this,{portal:o,user:n,api:d}=i.c;return(0,r.h)(r.H,{key:"bcecfa24a7030531c86e1b5742f0b57303a824bd"},(0,r.h)("arcgis-item-browser",{key:"dd05df4f9937d540e9b017592899fd1686cbb4bf",onArcgisItemBrowserUpdate:e=>{const{results:t,num:a,start:r,total:i}=e.detail;this.items=t,this.pagination={start:r,num:a,total:i}},onArcgisItemBrowserSelect:e=>{const t=e.detail[0];this.selected={id:t.id,name:t.title}},q:'type:"Data Store"',portal:o,user:n,api:d,selection:"single"},(0,r.h)("arcgis-item-browser-top-bar",{key:"dc63dbe741a7d66e6c7aab6cb22143509d390fa0",slot:"top-bar"},(0,r.h)("arcgis-item-browser-search",{key:"ac890beb37ac833b903b7c644f9a622bea83aa9e",slot:"search",term:"",placeholder:a.search})),(0,r.h)("arcgis-new-item-description",{key:"d33c6864bf75d2bdf28df2dc7e4d9f27f2549658",header:a.heading,content:a.subHeading,slot:"content-start",class:"header"}),(0,r.h)("arcgis-item-browser-sort",{key:"9e620406df77b0a6d89a5159e9029e9ddb71e270",options:["modified","title","relevance"],slot:"sort"}),(0,r.h)("arcgis-item-browser-content",{key:"5d8ca7b0c68588a15f4396f3006ee34bbbc4c38d",slot:"content"},this.items&&(0,r.h)("calcite-radio-button-group",{key:"f286897020a6fee5115117bd0840757a6b5af531",layout:"vertical",class:"tile-select",name:"data-store-selection-group"},(this.items||[]).map((t=>this.isValidDataStoreType(t)&&(0,r.h)("arcgis-new-item-pages-data-store-browser-card",{dataStoreItem:t,selected:e.id===t.id,key:t.id}))))),(0,r.h)("arcgis-item-browser-pagination",{key:"5fb6a7da2b515f81deaaa501904e9a9e7cfc3b8d",total:null==t?void 0:t.total,start:null==t?void 0:t.start,num:null==t?void 0:t.num,slot:"pagination"})),this.renderErrorItem(),(0,r.h)("arcgis-new-item-loader",{key:"c065272eba45964a696703e8938bdb8f2a070af8",active:s,text:a.processing}))}get el(){return(0,r.a)(this)}};h.style=".header{margin-top:1.25rem;display:block}.tile-select{margin-top:1.5rem}.no-items{margin-bottom:8rem}"},77868:(e,t,a)=>{a.d(t,{a:()=>h,b:()=>c,l:()=>l});var r=a(59317),i=a(3826);const s="create tile layer",o="my content",n=e=>{switch(e){case"store":return"data store";case"existing":return"fs";case"upload":return"upload"}},d=e=>{switch(e){case"tiles":return"raster";case"vectorTiles":return"vector"}},l=()=>{var e;null===(e=r.c.telemetry)||void 0===e||e.startWorkflow(s,{category:"create tile layer",pageName:"my content"})},c=()=>{const e=r.c.telemetry;null==e||e.stepWorkflow(s,"from option",{category:s,attribute:n(i.a.addTileLayerOption),details:d(i.a.tileLayerPublishType),pageName:o})},h=()=>{const e=r.c.telemetry;null==e||e.endWorkflow(s,{category:s,attribute:n(i.a.addTileLayerOption),details:d(i.a.tileLayerPublishType),pageName:o})}}}]);