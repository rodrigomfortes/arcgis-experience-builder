/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-943a3b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-943a3b"],{3175:(e,t,o)=>{o.d(t,{a:()=>s,g:()=>r});var i=o(20173);function s(e){const{customBaseUrl:t,portalHostname:o,urlKey:i}=e,{protocol:s}=window.location;return`${s}//${i?`${i}.${t}`:o}`}function r(e){return(0,i.a)(e.restUrl)}},4573:(e,t,o)=>{function i(e,t,o){window.localStorage.setItem(e,o?JSON.stringify(t):t)}function s(e){window.localStorage.removeItem(e)}function r(e,t){const o=window.localStorage.getItem(e);return o&&t?JSON.parse(o):o}function n(e,t,o){window.sessionStorage.setItem(e,o?JSON.stringify(t):t)}function l(e,t){const o=window.sessionStorage.getItem(e);return o&&t?JSON.parse(o):o}o.d(t,{a:()=>l,b:()=>n,g:()=>r,r:()=>s,s:()=>i})},10465:(e,t,o)=>{o.d(t,{D:()=>i,a:()=>d,b:()=>a,c:()=>l,g:()=>S,s:()=>C});class i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const s=(e,t,o)=>(0,n(t).subscribe)((t=>{const i=t.some((t=>((e,t)=>{let o=e;for(;o;){if(o===t)return!0;if(!o.parentNode)return!1;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e,t.target)));i&&o()})),r={},n=e=>{const t=e.join(","),o=r[t];if(void 0!==o)return o;const i=new Set,s=new MutationObserver((e=>i.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:e=>(i.add(e),()=>{i.delete(e),0===i.size&&(s.disconnect(),r[t]=void 0)})};return r[t]=n,n},l=(e,t)=>{let o=e;for(;o;){const e=o.closest?.(t);if(e)return e;const i=o.getRootNode?.();if(i===globalThis.document)return null;o=i.host}return null},a=e=>c(e,"dir","ltr"),c=(e,t,o)=>{const i=l(e,`[${t}]`);return i?.getAttribute(t)??o},h=e=>{let t="";for(let o=0;o<e;o++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},d=()=>[h(2),h(1),h(1),h(1),h(3)].join("-"),p="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),m=new Set(p),y="en",g={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},b={},u=async(e,t)=>{const o=`${t}${e}.json`;try{const e=await fetch(o);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===y?{}:await u(y,t)},S=e=>{const t=c(e,"lang",globalThis.navigator?.language||y);return{lang:t,t9nLocale:f(t)}},f=e=>{const[t,o]=e.split("-"),i=t.toLowerCase();let s=i;return o&&(s=`${i}-${o.toUpperCase()}`),s=g[s]??s,m.has(s)?s:o?f(i):y},C=(e,t,o,i)=>{let r;const n=()=>k(e,t(),i).then((e=>{r?.lang===e.lang&&r.t9nLocale===e.t9nLocale&&r.t9nStrings===e.t9nStrings||o(e),r=e})).catch(console.error);return queueMicrotask(n),s(e,["lang"],n)},k=async(e,t,o=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:s}=S(e),r=`${t}/${o}/t9n`,n=null===o?{}:await(async(e,t,o="")=>{const i=`${t}/${o}`,s=`${i}${e}.json`;return b[s]??(b[s]=u(e,i)),await b[s]})(s,r,"messages.");return{lang:i,t9nLocale:s,t9nStrings:n}}},10588:(e,t,o)=>{o.d(t,{a:()=>p,b:()=>n,c:()=>d,d:()=>l,e:()=>r,f:()=>h,g:()=>s,h:()=>c,i:()=>m,j:()=>a});var i=o(69811);function s(e){return"cim"===e.type&&e.data.symbol?"CIMLineSymbol"===e.data.symbol.type?"line":"CIMPolygonSymbol"===e.data.symbol.type?"polygon":"point":"simple-marker"===e.type||"picture-marker"===e.type?"point":"simple-line"===e.type?"line":"polygon"}const r={loaded:!1,async load(){this.loaded||(this.intl=await(0,i.z)(),this.EsriColor=await(0,i.ab)(),this.Portal=await(0,i.ac)(),this.CIMSymbol=await(0,i.a8)(),this.WebStyleSymbol=await(0,i.ad)(),this.devEnvironmentUtils=await(0,i.ae)(),this.promiseUtils=await(0,i.af)(),this.urlUtils=await(0,i.ag)(),this.PortalItem=await(0,i.m)(),this.previewSymbol2D=await(0,i.ah)(),this.gfxUtils=await(0,i.ai)(),this.jsonUtils=await(0,i.aj)(),this.styleUtils=await(0,i.ak)(),this.svgUtils=await(0,i.al)(),this.symbolUtils=await(0,i.a4)(),this.cimSymbolUtils=await(0,i.am)(),this.webStyleSymbolUtils=await(0,i.an)(),this.colorRamps=await(0,i.ao)(),this.esriLang=await(0,i.o)(),this.loaded=!0)}};function n(e){return"cim"===e?.type}function l(e){return"simple-marker"===e?.type}function a(e){return"picture-marker"===e?.type}function c(e){return"simple-line"===e?.type}function h(e){return"simple-fill"===e?.type}function d(e){return!!e.data.symbol&&"CIMPointSymbol"===e.data.symbol.type}function p(e){return!!e.data.symbol&&"CIMLineSymbol"===e.data.symbol.type}function m(e){return!!e.data.symbol&&"CIMPolygonSymbol"===e.data.symbol.type}},11115:(e,t,o)=>{o.r(t),o.d(t,{arcgis_popup_color_popover:()=>y,arcgis_popup_styler_popover:()=>g,arcgis_symbol_styler:()=>Ce,arcgis_symbol_styler_browse_styles:()=>ve,arcgis_symbol_styler_color_ramp_input:()=>je,arcgis_symbol_styler_section:()=>Be,arcgis_symbol_styler_symbol_preview:()=>_e});var i=o(11254),s=o(14528),r=o(69811),n=o(10588),l=o(89731),a=o(10465),c=o(17840),h=o(53127),d=o(84260),p=o(3175),m=o(4573);o(56612);const y=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupColorPopoverChange=(0,i.c)(this,"arcgisPopupColorPopoverChange",7),this.arcgisPopupColorPopoverClose=(0,i.c)(this,"arcgisPopupColorPopoverClose",7),this.manager=(0,s.u)(this),this.closedWithEvent=!1,this.popoverProps=void 0,this.hexColor=void 0,this.disabled=!1,this.popupState=void 0,this.open=!1}disabledChanged(e){e&&this.open&&this.close()}async setFocus(){this.panelNode?.setFocus()}async setOpen(e){this.open=e}async close(){this.open=!1,this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0}disconnectedCallback(){this.closedWithEvent||this.arcgisPopupColorPopoverClose.emit()}render(){const{popoverProps:e,popupState:t}=this,{strings:o}=t;return(0,i.h)(i.H,{key:"1890810f15464f449c27378559b017e1fb65f2f3",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"199688e702b3138a43e3c9a55917df51cc75a9f1",referenceElement:e.refElement,open:this.open,pointerDisabled:!0,label:o.selectColor,offsetDistance:e?.offsetDistance??0,offsetSkidding:e?.offsetSkidding??0,flipDisabled:e?.flipDisabled??!1,overlayPositioning:e?.overlayPositioning??"fixed",placement:e?.placement||"bottom",triggerDisabled:!0,onCalcitePopoverOpen:e=>{e.stopPropagation(),this.open&&(e.composedPath().includes(this.el)||(this.open=!1))},onCalcitePopoverClose:e=>{e.stopPropagation(),this.arcgisPopupColorPopoverClose.emit(),this.closedWithEvent=!0},onKeyUp:e=>{"Escape"===e.key&&this.close()}},(0,i.h)("calcite-panel",{key:"b5162db0a01bbc9b732fbc4d99a8ba4bd4ae6cf4",closable:!0,onCalcitePanelClose:e=>{const t=e.currentTarget;t.closed&&(this.close(),t.closed=!1),e.stopPropagation()},heading:o.selectColor,style:e?.maxHeight?{maxHeight:e.maxHeight}:{},ref:e=>this.panelNode=e},(0,i.h)("calcite-color-picker",{key:"d8f1b8f443d35554162c2f06dec81ce211374a5a",clearable:!1,onCalciteColorPickerInput:e=>{e.stopPropagation();const t=e.target.value;this.arcgisPopupColorPopoverChange.emit(t)},value:this.hexColor,storageId:"arcgis-symbol-styler-storage-colors"}),(0,i.h)("calcite-button",{key:"221704d235b6e03bf0a9f59fe05190eb5f26d275",appearance:"solid",slot:"footer",width:"full",label:o.done,onClick:()=>this.close()},o.done))))}get el(){return(0,i.a)(this)}static get watchers(){return{disabled:["disabledChanged"]}}},g=class{constructor(e){(0,i.r)(this,e),this.arcgisClose=(0,i.c)(this,"arcgisClose",7),this.arcgisDisconnected=(0,i.c)(this,"arcgisDisconnected",7),this.manager=(0,s.u)(this),this.referenceElement=void 0,this.open=!1,this.popupState=void 0}async getPopoverRefElement(){return this.closeActionNode?this.closeActionNode:await new Promise((e=>{setTimeout((()=>{e(this.closeActionNode)}),300)}))}async addStyler(e){this.contentNode?.appendChild(e)}async setOpen(e){this.popoverNode&&(this.popoverNode.open=e,e&&(this.panelNode?.setFocus(),this.popoverNode.reposition()))}async reposition(){this.popoverNode?.reposition()}async setFocus(){this.closeActionNode?.setFocus()}componentDidLoad(){this.closeActionNode?.setFocus()}disconnectedCallback(){this.arcgisDisconnected.emit()}render(){const{popupState:e,referenceElement:t,open:o}=this,{strings:s}=e;return(0,i.h)(i.H,{key:"42361d73b04d44544c0e304cda993c978d7b9ffc",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"df5502e98d30ca987c35f4ed44da324dd121c051",referenceElement:t,open:o,pointerDisabled:!0,triggerDisabled:!0,placement:"leading-start",offsetDistance:0,offsetSkidding:45,label:s.chartStyle,onCalcitePopoverOpen:()=>this.closeActionNode?.setFocus(),ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"a7abe8f621b48df72f918e7cccb540a84876e7ff",closable:!1,heading:s.chartStyle,class:"styler-panel",ref:e=>this.panelNode=e,onCalcitePanelClose:()=>{this.arcgisClose.emit(),setTimeout((()=>t.parentElement.focus()),300)}},(0,i.h)("calcite-action",{key:"162058378e73ae8b7ab891c526c7f15a73ca3fef",slot:"header-actions-end",scale:"s",icon:"x",text:s.close,onClick:()=>this.arcgisClose.emit(),ref:e=>this.closeActionNode=e}),(0,i.h)("div",{key:"689418a1eedc1339f9fe490eac9d3225bfee481e",class:"styler-div",ref:e=>this.contentNode=e}))))}get el(){return(0,i.a)(this)}};g.style=".styler-panel{width:328px;min-height:300px}.styler-div{width:100%}";const b="auto-adjust-label",u="style-dropdown",S="arrow-dropdown",f="icon-dropdown",C="icon-dropdown--selected",k="icon-dropdown-item-content",v="color-ramp-flipper",w="scroller",I="color-ramp-selection",x="auto-adjust-checkbox",P="content-group",M="message",R="container",A="label",L="symbol",F="change-symbol-trigger",z="change-symbol-trigger-disabled",T={all:["*"],light:["light"],dark:["dark"],redsAndYellows:["oranges","reds","yellows"],greens:["greens"],blues:["blues"],purplesAndPinks:["purples","pinks"],browns:["browns"],grays:["grays"],bright:["bright"],subdued:["subdued"],colorblindFriendly:["colorblind-friendly"]},O=["none","begin","end","begin-end"],E=["solid","dash","dot","dash-dot","long-dash-dot-dot","short-dash","short-dot","short-dash-dot","short-dash-dot-dot","long-dash","long-dash-dot"],j={size:!0,preview:!0,rotation:!0,alignment:!0},B={style:!0,arrow:!0,width:!0,autoStrokeAdjust:!1},_={suggestedColors:!0,customColor:!0,transparency:!0},N={colorRamps:!0,transparency:!0},$={extra:!0},V="arcgis-symbol-styler-storage-colors",U={size:24,maxSize:24},H={size:{width:60,height:2}},D=100,W=150;function G(e,t,o=!1,i=!0){if(!e||!t)return!1;const s=e.every(((e,i)=>{const s=t[i];return e.r===s.r&&e.g===s.g&&e.b===s.b&&(!o||e.a===s.a)}));return i?s||G(e.slice().reverse(),t,o,!1):s}function J(e,t=!1){return t?function(e){const t=Math.sqrt(e.length),o=X(e).reverse(),i=[];for(let e=0;e<t;e++){const t=[];o.forEach((o=>t.push(o[e]))),i.push(t)}return function(e,t){let o=[];e=e.slice().map((e=>e.slice()));const i=(t||"HH").split(""),s=i[0],r=i[1];"L"===s&&e.reverse();const n="H"===r;return e.forEach((e=>{n&&e.slice().reverse(),o=o.concat(e)})),o}(i).reverse()}(e):e.slice().reverse()}function X(e,t){const o=[],i=Math.sqrt(e.length),s=(t||"HH").split(""),r=s[0],n="H"!==s[1];for(let t=0;t<i;t++){const s=[];for(let o=0;o<i;o++){const r=t*i+o;s.push(e[r])}n&&s.reverse(),o.push(s)}return"L"===r&&o.reverse(),o}function Y(e,t){return K(e,t)}function K(e,t){if(Array.isArray(e)){for(let o=0;o<e.length;o++){const i=K(e[o],t);if(void 0!==i)return i}return}const o=t(e);return void 0!==o?o:"cim"===e?.type?K(e.data.symbol,t):"CIMSymbolReference"===e?.type||"CIMMarkerGraphic"===e?.type?K(e.symbol,t):"CIMPointSymbol"===e?.type||"CIMPolygonSymbol"===e?.type||"CIMLineSymbol"===e?.type?K(e.symbolLayers,t):"CIMHatchFill"===e?.type?K(e.lineSymbol,t):"CIMVectorMarker"===e?.type?K(e.markerGraphics,t):void 0}function q(e,t,o){const i=t.toJSON();Y(e,(e=>{"fill"===o&&("CIMSolidFill"===e?.type&&(e.color=i),"CIMPictureFill"!==e?.type&&"CIMPictureMarker"!==e?.type||(e.tintColor=i)),"stroke"===o&&("CIMSolidStroke"===e?.type&&(e.color=i),"CIMPictureStroke"===e?.type&&(e.tintColor=i))}))}function Q(e){if(e.animations?.length)return e;return Y(e,(e=>{if(e.animations?.length)return e}))}function Z(e,t){const o=Y(e,(e=>{if("fill"===t){if("CIMSolidFill"===e?.type)return e.color;if("CIMPictureFill"===e?.type||"CIMPictureMarker"===e?.type)return e.tintColor}if("stroke"===t){if("CIMSolidStroke"===e?.type)return e.color;if("CIMPictureStroke"===e?.type)return e.tintColor}}));return n.e.EsriColor.fromJSON(o)}function ee(e,t){return 0===e.a&&(t.a=1),t}function te(e){return(0,n.b)(e)&&(de(e)||function(e){return!!n.e.cimSymbolUtils.getCIMSymbolColor(e)}(e))||(0,n.d)(e)&&!ie(e)||(0,n.f)(e)}function oe(e){return(0,n.b)(e)&&de(e)||(0,n.d)(e)||(0,n.h)(e)||(0,n.f)(e)}function ie(e){return!("simple-marker"!==e?.type||"x"!==e.style&&"cross"!==e.style)}function se(e,t=e.size){return{...e,size:void 0!==t?le((0,l.p)(t)):0}}function re(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function ne(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function le(e){const t=Number.isInteger(e)?0:3;return Number(e.toFixed(t))}function ae(e,t){return Number.isNaN(e)?t:re((0,l.a)(e))}function ce(e){return e&&"simple-line"!==e.type&&"simple-fill"!==e.type?(0,n.b)(e)?n.e.cimSymbolUtils.getCIMSymbolRotation(e,!0):e.angle??0:0}function he(e){return"CIMTextSymbol"===e.type}function de(e){if(he(e.data.symbol))return!1;const{symbolLayers:t}=e.data.symbol;if(1===t?.length){const[e]=t;if("CIMVectorMarker"!==e.type||e.colorLocked)return!1;const{markerGraphics:o}=e;return 1===o.length&&!he(o[0].symbol)&&pe(o[0].symbol.symbolLayers)}if(2===t?.length){const[e,o]=t;if("CIMVectorMarker"!==e.type||"CIMVectorMarker"!==o.type||e.colorLocked||e.size>o.size)return!1;const i=e.markerGraphics,s=o.markerGraphics;if(1!==i.length||1!==s.length)return!1;const[{symbol:r}]=i,[{symbol:n}]=s;return r&&n&&!he(r)&&!he(n)&&pe(r.symbolLayers)&&function(e){return function(e){return!!e?.find((({type:e})=>"CIMSolidFill"===e))}(e)&&me(e)}(n.symbolLayers)}return!1}function pe(e){return function(e){return!!function(e){return e?.find((({type:e,colorLocked:t})=>"CIMSolidFill"===e&&!t))}(e)}(e)&&me(e)}function me(e){return!!function(e){return e?.find((({type:e})=>"CIMSolidStroke"===e))}(e)}function ye(e){return e&&function(e){return O.includes(e?.placement)&&"arrow"===e?.style}(e)?e.placement:"none"}function ge(e){if("none"!==e)return{style:"arrow",placement:e}}function be(e,t){if(e&&t&&function(e){return"color-ramp"===e?.type&&"2d"===e.style}(e)){const o=function(e,t){const o=t.map((e=>e.stops)),i=4;let s=e.map((e=>e.clone())),r=0,n=!1;for(let e=0;e<i;e++){if(o.some((e=>G(s,e,!0,!1)))){n=!0;break}s=J(s,!0),r++}return n?(i-r)%i:null}(t.color,e.colorRamps);if(null!==o&&o>0)return e.colorRamps.map((e=>{const t={...e};for(let e=0;e<o;e++)t.stops=J(t.stops,!0);return t}))}return e?.colorRamps}const ue=[0,0,0,0];function Se(e,t=!1){const o=e??ue;return t?n.e.EsriColor.fromJSON(o):new n.e.EsriColor(o)}function fe({r:e,g:t,b:o,a:i}){return 0===e&&0===t&&0===o&&0===i}const Ce=class{constructor(e){(0,i.r)(this,e),this.arcgisEdit=(0,i.c)(this,"arcgisEdit",7),this.arcgisSymbolStylerEdit=(0,i.c)(this,"arcgisSymbolStylerEdit",7),this.arcgisMarkerChange=(0,i.c)(this,"arcgisMarkerChange",7),this.arcgisSymbolStylerMarkerChange=(0,i.c)(this,"arcgisSymbolStylerMarkerChange",7),this.arcgisFillChange=(0,i.c)(this,"arcgisFillChange",7),this.arcgisSymbolStylerFillChange=(0,i.c)(this,"arcgisSymbolStylerFillChange",7),this.arcgisFillEnabledChange=(0,i.c)(this,"arcgisFillEnabledChange",7),this.arcgisStrokeChange=(0,i.c)(this,"arcgisStrokeChange",7),this.arcgisSymbolStylerStrokeChange=(0,i.c)(this,"arcgisSymbolStylerStrokeChange",7),this.arcgisStrokeEnabledChange=(0,i.c)(this,"arcgisStrokeEnabledChange",7),this.arcgisSourceIdChange=(0,i.c)(this,"arcgisSourceIdChange",7),this.arcgisSymbolStylerSourceIdChange=(0,i.c)(this,"arcgisSymbolStylerSourceIdChange",7),this.manager=(0,s.u)(this),this.resizeObserver=new ResizeObserver((e=>{const t=e.pop();t&&(this.narrow=t.contentRect.width<=275)})),this.windowResizeObserver=new ResizeObserver((()=>this.checkPopoverMaxHeight())),this.autoOpenFirstBlock=!1,this.autoCalcHeight=!1,this.colorInputEl=[],this.manualBlockOpen=!1,this.updatePreviewSymbol=(0,h.a)((()=>{const e=this.symbol.clone();this.syncSymbolProps(e,{symbolState:{marker:this.marker,fill:this.fill,stroke:this.stroke}}),this.previewSymbol=e}),150),this.setRampInputRef=e=>{this.rampInputEl=e},this.setColorInputRef=e=>{e&&this.colorInputEl?.push(e)},this.onColorRampFillTransparencyChange=e=>{const t=(0,c.t)(e),o=this.fill,i={color:o.color?.map((e=>Se({...e,a:t})))};this.fill=i,this.arcgisFillChange.emit(i),this.arcgisSymbolStylerFillChange.emit(i),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)},this.onFillColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections?.fill;this.sections={...this.sections,fill:{...o,activeCategory:t}},e.stopPropagation()},this.onColorFillTransparencyChange=e=>{const t=(0,c.t)(e),{fill:o}=this,i={color:Se({...o?.color,a:t})};this.fill=i,this.arcgisFillChange.emit(i),this.arcgisSymbolStylerFillChange.emit(i),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)},this.onStrokeColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections?.stroke;this.sections={...this.sections,stroke:{...o,activeCategory:t}},e.stopPropagation()},this.onColorStrokeTransparencyChange=e=>{const{stroke:t}=this,o=(0,c.t)(e),i={...t,color:Se({...t?.color,a:o})};this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)},this.onColorRampStrokeTransparencyChange=e=>{const t=(0,c.t)(e),o=this.stroke,i={...o,color:o.color?.map((e=>Se({...e,a:t})))};this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)},this.onStrokeStyleChange=e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-style"),{stroke:o}=this,i={...o,style:t};this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},this.onStrokeArrowChange=e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-arrow"),{stroke:o}=this,i={...o,marker:ge(t)};this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},this.onStrokeWidthChange=e=>this.setStrokeWidth(e),this.onAutoAdjustStrokeChange=e=>{const t=e.currentTarget.checked,{stroke:o}=this,i={...o,autoAdjusted:t};this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.syncSymbolProps=(e,t)=>{const o=t?.symbolState||{marker:this.marker,fill:this.fill,stroke:this.stroke},i=t?.cimChangeContext,s=(0,n.g)(e);return"point"===s?this.syncPointSymbolProps(e,o,i):"line"===s?this.syncLineSymbolProps(e,o,i):this.syncPolygonSymbolProps(e,o,i)},this.syncPointSymbolProps=(e,{fill:t,marker:o,stroke:i},s)=>{const{sections:r}=this,a=void 0!==o?.size?le((0,l.p)(o?.size)):0;if((0,n.d)(e)){const o=ie(e);o||(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=r?.fill?.enabled&&t?.color?t.color:Se(null)),e.outline&&(this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():o&&this.isFillColorRamp()?e.outline.color=this.getSampleFillColorRampColor():e.outline.color=r?.stroke?.enabled&&i?.color?i.color:Se(null),e.outline.marker=i?.marker,e.outline.style=i?.style,e.outline.width=void 0!==i?.size?le((0,l.p)(i.size)):0),e.size=a}else(0,n.j)(e)&&(e.height=Math.round(e.height/e.width*a*100)/100,e.width=a);const c=o?.angle?Math.abs(o.angle):0;return(0,n.b)(e)?(s&&["root","original-root"].includes(s)?(n.e.cimSymbolUtils.applyCIMSymbolRotation(e,c,!0),n.e.cimSymbolUtils.scaleCIMSymbolTo(e,a)):e.data.symbol.angle=c,this.isFillColorRamp()?n.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&n.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"})):e.angle=c,e},this.syncLineSymbolProps=(e,{stroke:t},o)=>{const{sections:i}=this,s=void 0!==t?.size?le((0,l.p)(t?.size)):0;return(0,n.h)(e)?(this.isStrokeColorRamp()?e.color=this.getSampleStrokeColorRampColor():e.color=i?.stroke?.enabled&&t?.color?t.color:Se(null),"original-root"!==o&&(e.marker=t?.marker,e.style=t?.style,e.width=s)):(0,n.b)(e)&&("root"===o&&n.e.cimSymbolUtils.scaleCIMSymbolTo(e,s),this.isStrokeColorRamp()&&n.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor())),e},this.syncPolygonSymbolProps=(e,{fill:t,stroke:o},i)=>{const{sections:s}=this,r=void 0!==o?.size?le((0,l.p)(o?.size)):0;return(0,n.f)(e)?(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=s?.fill?.enabled&&t?.color?t.color:Se(null),this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():e.outline.color=s?.stroke?.enabled&&o?.color?o.color:Se(null),"original-root"!==i&&(e.outline.width=r,e.outline.style=o?.style)):(0,n.b)(e)&&(this.isFillColorRamp()?n.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&n.e.cimSymbolUtils.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"}),"root"===i&&((0,n.i)(e)?function(e,t){e.data.symbol?.symbolLayers?.forEach((e=>{["CIMSolidStroke","CIMPictureStroke"].includes(e.type)&&(e.width=t)}))}(e,r):n.e.cimSymbolUtils.scaleCIMSymbolTo(e,r))),e},this.onStrokeEnabledChange=e=>{const{sections:t}=this,o=ie(this.activeSymbol);this.sections={...t,stroke:{...t?.stroke,enabled:!!o||e}},o||(this.arcgisStrokeEnabledChange.emit({enabled:e,stroke:se(this.stroke)}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))},this.onFillEnabledChange=e=>{const{fill:t,sections:o}=this,i=ie(this.activeSymbol);this.sections={...o,fill:{...o?.fill,enabled:!i&&e}},i||(this.arcgisFillEnabledChange.emit({enabled:e,fill:t}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))},this.onAutoAdjustSizeChange=e=>{const t=e.currentTarget.checked,{marker:o}=this,i={...o,autoAdjusted:t};this.marker=i,this.arcgisMarkerChange.emit(se(i)),this.arcgisSymbolStylerMarkerChange.emit(se(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.onSymbolSizeChange=e=>this.setSymbolSize(e),this.onSymbolRotationChange=e=>{const{marker:t,fill:o,stroke:i}=this,s={...t,angle:e,symbol:this.syncSymbolProps(this.symbol,{cimChangeContext:"root",symbolState:{marker:{...t,angle:e},fill:o,stroke:i}})};this.marker=s,this.setInternalSymbol(s.symbol,!0),this.arcgisMarkerChange.emit(se(s)),this.arcgisSymbolStylerMarkerChange.emit(se(s))},this.handleAngleAlignmentChange=e=>{const{symbol:t}=this;t.data.symbol.angleAlignment=e,this.setInternalSymbol(t,!0)},this.onSymbolSelect=e=>{const{fill:t,marker:o,sections:i,stroke:s}=this,r="picture-marker"===this.activeSymbol?.type&&"simple-marker"===e.type,l=ie(this.activeSymbol),a=ie(e),c=l&&!a,h=!l&&a;this.autoOpenFirstBlock=!0;const d=te(e),p=oe(e),m={},y=(0,n.b)(this.activeSymbol)&&!(0,n.b)(e);if(y){if((0,n.d)(e)||(0,n.f)(e)){if(d&&"color"===i?.fill?.type&&(m.fill={...t,color:e.color.clone()}),p&&"color"===i?.stroke?.type){const t=e.outline.color.clone();h&&(t.a=1),m.stroke={...s,color:t},(0,n.f)(e)&&(m.stroke.size=e.outline.width,m.stroke.style=e.outline.style)}}else if((0,n.h)(e)&&p&&"color"===i?.stroke?.type){const t=e;m.stroke={...s,size:t.width,color:t.color.clone()}}}else if((0,n.b)(e)){const o=n.e.cimSymbolUtils.getCIMSymbolColor(e);"color"===i?.fill?.type&&(m.fill={...t,color:o}),m.stroke={...s},"line"===this.editGeometry&&(m.stroke.size=le(n.e.cimSymbolUtils.getCIMSymbolSize(e))),"color"===i?.stroke?.type&&(m.stroke.color=o),this.cimStrokeWidthBounds={min:0,max:18}}else if("color-ramp"===i?.fill?.type&&"color"===i?.stroke?.type)a?(this.tempStrokeColorRampStateActiveCategory=i.fill.activeCategory,this.tempStrokeColorRampStateStops=t?.color,this.tempStrokePreviousColorBeforeColorRampSwitch=s?.color,m.stroke={...s,color:this.tempStrokeColorRampStateStops}):c&&(m.fill={...t,color:this.tempStrokeColorRampStateStops},m.stroke={...s,color:this.tempStrokePreviousColorBeforeColorRampSwitch},this.tempStrokeColorRampStateActiveCategory=void 0,this.tempStrokeColorRampStateStops=void 0);else if("color"===i?.fill?.type&&"color-ramp"===i?.stroke?.type){if(h){const e=s?.color?.map((e=>(e.a=1,e)));m.stroke={...s,color:e}}}else if("color"===i?.fill?.type&&"color"===i?.stroke?.type&&h){const e=s?.color?.clone();h&&e&&(e.a=1),m.stroke={...s,color:e}}this.sections={...i,fill:{...i?.fill,open:!a&&i?.fill?.open,enabled:d&&(!a||(0,n.b)(e)||c||r||i?.fill?.enabled)},stroke:{...i?.stroke,enabled:p&&((0,n.b)(e)||h||y&&!a||r||i?.stroke?.enabled)}};const g=m.fill||t,b=m.stroke||s,u={...o,symbol:this.syncSymbolProps(e,{cimChangeContext:"original-root",symbolState:{marker:o,fill:g,stroke:b}})};this.fill=g,this.stroke=b,this.marker=u,this.activeSymbol=e,this.setInternalSymbol(u.symbol,!0,!0),this.arcgisMarkerChange.emit(se(u)),this.arcgisSymbolStylerMarkerChange.emit(se(u))},this.addStyles=async()=>{const{portal:e,portalOrInterceptor:t,dir:o,editGeometry:i,mergedStrings:s}=this;if(document.querySelector("arcgis-symbol-styler-browse-styles"))return;const n=await(0,r.ac)(),l=document.createElement("arcgis-symbol-styler-browse-styles");l.editGeometry=i,l.dir=o??"rtl",l.portal=t?.portal||t||e||n.getDefault(),l.strings=s,l.excludeItemIds=await(this.symbolPickerElement?.getStyleItemIds())||[],document.body.appendChild(l),l.addEventListener("arcgisSymbolStylerBrowseStylesClose",(e=>{document.body.removeChild(l),e.detail?.length&&(this.activeSourceId=e.detail[0],this.pickerReRenderFlag=!this.pickerReRenderFlag)}))},this.emitEdit=(0,h.d)((async(e,t)=>{const o=e.clone(),i={},{editGeometry:s}=this,r="point"===s,n=!ie(e)&&"point"===s||"polygon"===s;r&&(i.marker={...se(this.marker),symbol:o}),n&&(i.fill={...this.fill}),i.stroke={...se(this.stroke)},this.arcgisEdit.emit({symbol:o,info:i,symbolSwitch:t}),this.arcgisSymbolStylerEdit.emit({symbol:o,info:i,symbolSwitch:t})}),300),this.flipFillColorRamps=()=>{const e=this.sections?.fill,t=this.fill,o="2d"===e.style,i={color:J(t.color,o)};this.sections={...this.sections,fill:{...e,colorRamps:e.colorRamps.map((({stops:e,tags:t,name:i})=>({stops:J(e,o),tags:t,name:i})))}},this.fill=i,this.arcgisFillChange.emit(i),this.arcgisSymbolStylerFillChange.emit(i),this.emitEdit(this.symbol)},this.renderBlock=e=>(0,i.h)("calcite-block",{collapsible:!0,disabled:e.disabled??!1,heading:e.heading,key:e.key,onCalciteBlockOpen:this.onBlockToggle,onCalciteBlockClose:this.onBlockToggle},e.icon,e.content),this.onBlockToggle=e=>{this.manualBlockOpen?this.manualBlockOpen=!1:(this.rampInputEl?.close(),this.colorInputEl?.forEach((async e=>await(e?.close()))))},this.renderSection=({disabled:e,embedded:t=!1,key:o,sectionContent:s})=>(0,i.h)("arcgis-symbol-styler-section",{disabled:e,key:o,embedded:t},s.map((({content:e})=>e))),this.flipStrokeColorRamps=()=>{const e=this.sections?.stroke,t=this.stroke,o="2d"===e.style,i={...t,color:J(t.color,o)};this.sections={...this.sections,stroke:{...e,colorRamps:e.colorRamps.map((({stops:e,tags:t,name:i})=>({stops:J(e,o),tags:t.slice(),name:i})))}},this.stroke=i,this.arcgisStrokeChange.emit(se(i)),this.arcgisSymbolStylerStrokeChange.emit(se(i)),this.emitEdit(this.symbol)},this.config={},this.popoverProps=void 0,this.initialSourceId=void 0,this.portal=void 0,this.stringOverrides=void 0,this.mode="default",this.cimStrokeWidthBounds=void 0,this.stylerProps=void 0,this.editGeometry=void 0,this.fill=void 0,this.marker=void 0,this.narrow=!1,this.preppingEdit=!0,this.previewSymbol=void 0,this.sections=void 0,this.builtInStrings=(0,d.u)({blocking:!0,propertyName:"builtInStrings"}),this.mergedStrings=(0,d.u)({blocking:!0,propertyName:"mergedStrings"}),this.stroke=void 0,this.symbol=void 0,this.tempStrokeColorRampStateActiveCategory="all",this.pickerReRenderFlag=!1,this.activeSymbol=void 0,this.activeSymbolItem=void 0,this.activeSourceId=void 0,this.state="editing"}connectedCallback(){this.resizeObserver.observe(this.el),this.windowResizeObserver.observe(document.body)}disconnectedCallback(){this.resizeObserver.unobserve(this.el),this.windowResizeObserver.unobserve(document.body)}async componentWillLoad(){console.warn("%cmap-config-components","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",'[arcgis-symbol-styler] component in @arcgis/map-config-components is deprecated and will be removed soon. Use "arcgis-map-config-symbol-styler" instead.'),await n.e.load(),this.dir=(0,a.b)(this.el);const e=new Intl.NumberFormat(n.e.intl.getLocale(),{style:"percent"}).format(0);this.percentLabelFlip="rtl"===this.dir?e.endsWith("%"):e.startsWith("%"),this.mergedStrings={...this.builtInStrings,...this.stringOverrides}}componentShouldUpdate(e,t,o){return"preppingEdit"!==o||!e}componentDidRender(){if(this.autoOpenFirstBlock&&!this.preppingEdit){const e=this.el.shadowRoot?.querySelector("calcite-block");e&&(this.autoOpenFirstBlock=!1,this.manualBlockOpen=!0,e.open=!0)}}handleStringChanges(){this.mergedStrings={...this.builtInStrings,...this.stringOverrides}}onPanelBack(e){e.stopPropagation()}async edit(e,t){if(!n.e.loaded)return void await new Promise((o=>{setTimeout((()=>{o(this.edit(e,t))}),300)}));const o=function(e){return e?"text"===e.type||"picture-fill"===e.type?`editing symbol of type ${e.type} is not supported`:null:"missing symbol to edit"}(e);if(o)throw new Error(`[symbol-styler] ${o}`);e=await this.checkLineOnlySymbol(e,t);const i=await(0,r.ac)();this.portalOrInterceptor=t.portal||this.portal||i.getDefault(),this.preppingEdit=!0,this.autoOpenFirstBlock=!0;const s=t.sections?.marker,l=t.sections?.fill,a=t.sections?.stroke;this.symbolFilter=t.symbolFilter||("all"===s?.markerType?void 0:s?.markerType),this.editGeometry=(0,n.g)(e);const c=te(e=e.clone()),h=oe(e);((0,n.d)(e)||(0,n.f)(e))&&(e.outline?e.outline.color||(e.outline.color=Se(null)):e.outline={type:"simple-line",color:Se(null)});const d={autoAdjusted:!1,...t.stroke,size:void 0!==t.stroke?.size?ae(t.stroke.size,2):2,style:E.includes(t.stroke?.style)?t.stroke?.style:"solid"};t.stroke?.marker&&(d.marker=t.stroke.marker),this.sections={marker:{backgroundStyle:"light",optional:!1,enabled:!1,open:s?.open||!1,symbolsOpen:s&&(!("symbolsOpen"in s)||s.symbolsOpen)||!1,sizeOpen:s&&(!("sizeOpen"in s)||s.sizeOpen)||!1,rotationOpen:s&&(!("rotationOpen"in s)||s.rotationOpen)||!1,keepChoice:s?.keepChoice||!1,parts:{...j,...s?.parts}},fill:{activeCategory:"all",open:l?.open||!1,optional:l?.optional||!1,enabled:c&&(t.fillEnabled??!0)&&!(0,n.b)(e)&&"color"===l?.type&&!!this.toColorPickerValue(t.fill?.color),type:l?.type,style:l?.style,suggestedColorsOpen:l?.suggestedColorsOpen||!1,customColorOpen:l?.customColorOpen||!1,colorRampsOpen:l?.colorRampsOpen||!1,colorRamps:be(l,t.fill),transparencyOpen:l?.transparencyOpen||!1,parts:{..._,...N,...l?.parts}},stroke:{activeCategory:"all",optional:a?.optional||!1,open:a?.open||!1,enabled:h&&(t.strokeEnabled??!0)&&!(0,n.b)(e)&&"color"===a?.type&&!!this.toColorPickerValue(t.stroke?.color),type:a?.type,style:a?.style,suggestedColorsOpen:a?.suggestedColorsOpen||!1,customColorOpen:a?.customColorOpen||!1,colorRampsOpen:a?.colorRampsOpen||!1,colorRamps:be(a,t.stroke),transparencyOpen:a?.transparencyOpen||!1,extraOpen:a?.extraOpen||!1,extraParts:{...B,...a?.extraParts},parts:{..._,...N,...$,...a?.parts}}},this.marker={...t.marker,size:t.marker?.size?ae(t.marker.size,0):0,angle:ce(e),autoAdjusted:t.marker?.autoAdjusted||!1,symbol:e},this.fill={...t.fill},this.stroke=d,this.activeSymbol=e,this.activeSourceId=s?.keepChoice?this.activeSourceId:void 0,this.activeSymbolItem=s?.keepChoice?this.activeSymbolItem:void 0,this.stylerProps=t,(0,n.b)(e)&&(this.isFillColorRamp()||this.isStrokeColorRamp())&&this.syncSymbolProps(e,{cimChangeContext:"root"}),(0,n.b)(e)&&(this.cimStrokeWidthBounds={min:0,max:18}),this.setInternalSymbol(e,!1),this.preppingEdit=!1}async checkLineOnlySymbol(e,t){if(ie(e)){return e=new(await(0,r.az)()),t.fill?.color&&(Array.isArray(t.fill.color)?e.color=t.fill.color[t.fill.color.length-1]:e.color=t.fill.color),t.stroke?.color&&(t.stroke.color=e.outline.color.clone()),(t.stroke?.size||0===t.stroke?.size)&&(t.stroke.size=e.outline.width),t.marker?.size&&(e.size=t.marker.size),this.marker={...t.marker,size:t.marker?.size?ae(t.marker.size,0):0,angle:ce(e),autoAdjusted:t.marker?.autoAdjusted||!1,symbol:e},this.emitEdit(e),await Promise.resolve(e)}return await Promise.resolve(e)}async setSize(e,t){"stroke"===e&&this.setStrokeWidth(ne((0,l.a)(t)),!1),"marker"===e&&this.setSymbolSize(ne((0,l.a)(t)),!1)}getLinePatternStyle(e){return{backgroundImage:`url(${(0,i.g)(`./assets/line-patterns/${e}.png`)})`}}getSelectedArrowPatternStyle(){return{backgroundImage:`url(${(0,i.g)("./assets/arrow-pattern-spritesheet.png")})`}}getArrowPatternOptionStyle(){return{backgroundImage:`url(${(0,i.g)("./assets/arrow-pattern-options-spritesheet.png")})`}}hasActiveLineOnlySimpleMarkerSymbol(){const{marker:e,symbol:t}=this;return!!e&&ie(t)}hasActivePictureMarkerSymbol(){return"picture-marker"===this.symbol?.type||"picture-marker"===this.activeSymbol?.type}setStrokeWidth(e,t=!0){const{stroke:o}=this,i={...o,size:e<0?0:ne(e)};this.stroke=i,t&&(this.arcgisStrokeChange.emit(se(i,e)),this.arcgisSymbolStylerStrokeChange.emit(se(i,e))),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),t)}isFillColorRamp(){return"color-ramp"===this.stylerProps?.sections?.fill?.type}isStrokeColorRamp(){return"color-ramp"===this.stylerProps?.sections?.stroke?.type}getSampleFillColorRampColor(){const e=this.sections?.fill,t=this.fill;return this.getSampleColorRampColor(e,t.color)}getSampleStrokeColorRampColor(){const e=this.sections?.stroke,t=this.stroke;return this.getSampleColorRampColor(e,t.color)}getSampleColorRampColor(e,t){const o=t.length;return"2d"===e.style||"discrete"===e.style?t[o-1]:t[Math.floor(o/2)]}setSymbolSize(e,t=!0){const{marker:o,fill:i,stroke:s,symbol:r}=this,n={...o,symbol:this.syncSymbolProps(r,{cimChangeContext:"root",symbolState:{marker:{...o,size:e},fill:i,stroke:s}}),size:e};this.marker=n,this.setInternalSymbol(n.symbol,t),t&&(this.arcgisMarkerChange.emit(se(n,e)),this.arcgisSymbolStylerMarkerChange.emit(se(n,e)))}render(){if(this.preppingEdit)return(0,i.h)(i.H,null);const e=(0,a.b)(this.el),{sections:t}=this.stylerProps,o=(0,n.b)(this.activeSymbol);return(0,i.h)(i.H,null,(0,i.h)("calcite-flow",{ref:e=>{this.flowEl=e,this.checkPopoverMaxHeight()}},(0,i.h)("calcite-flow-item",{dir:e,key:"main",selected:"editing"===this.state},(0,i.h)("div",{class:"content"},[!1!==t?.marker?.parts?.rotation||!1!==t?.marker?.parts?.preview||!1!==t?.marker?.parts?.size||!1!==t?.marker?.parts?.alignment||!1!==t?.marker?.parts?.baseWidth||"minimal"===this.mode||this.config.displaySymbolsSelectionOnly?this.renderSymbolBlock():null,o||!t?.fill||this.config.displaySymbolsSelectionOnly?null:this.renderFillBlock(),o||!t?.stroke||this.config.displaySymbolsSelectionOnly?null:this.renderStrokeBlock()])),"choosing-symbol"===this.state?this.renderSymbolSelectionPanel():(0,i.h)(i.F,null),"animation"===this.state?this.renderAnimationPanel():(0,i.h)(i.F,null)))}renderSymbolBlock(){const{marker:e,stroke:t}=this.sections,{parts:o}=e,{editGeometry:s,symbol:r}=this,l=(0,n.b)(r),a=[];if((o.preview||this.config.displaySymbolsSelectionOnly)&&a.push({content:this.renderSymbolsSelection()}),this.config.displaySymbolsSelectionOnly)return this.renderSection({key:"marker-symbols",sectionContent:a});if(l&&(this.isFillColorRamp()?a.push({content:this.renderColorRampFillBlock(!0)}):this.isStrokeColorRamp()&&a.push({content:this.renderColorRampStrokeBlock(!0)})),"minimal"===this.mode&&(o.color&&a.push({content:this.renderRootCIMSymbolColorContent()}),o.transparency&&a.push({content:this.renderRootCIMSymbolTransparencyContent()})),"point"===s){if(o.size&&a.push({content:l?this.renderRootCIMSymbolSizeContent():this.renderSymbolSizeContent()}),o.rotation&&a.push({content:this.renderSymbolRotationContent()}),o.alignment&&l){const e=r.data.symbol;a.push({content:this.renderAngleAlignmentContent(e.angleAlignment??"Display")})}if(o.baseWidth&&l){const e=r.data.symbol;a.push({content:this.renderBaseWidthContent(e)})}}else l&&t?.extraParts?.width&&(!(0,n.i)(r)||(0,n.i)(r)&&function(e){const t=e.data.symbol?.symbolLayers?.find((({type:e})=>["CIMSolidStroke","CIMPictureStroke"].includes(e)));return!!t}(r))&&a.push({content:this.renderRootCIMSymbolWidthContent()});if(l){const e=r.data.symbol;"CIMPointSymbol"===e.type&&e.animations&&a.push({content:this.renderCIMAnimationEntryPoint(e,"root-symbol","point")}),a.push({content:this.renderRootCIMSymbolContent(r)})}return a.length?this.renderSection({key:"marker-symbols",sectionContent:a}):(0,i.h)(i.F,null)}renderRootCIMSymbolContent(e){const t=this.renderCIMSymbolLayersContent(e.data.symbol,"root-symbol");return t.length>10?[...t.slice(0,10),(0,i.h)("div",{class:M},this.mergedStrings.additionalSymbolLayersNotShown.replace("${count}",10..toString()))]:t}renderCIMSymbolLayersContent({symbolLayers:e},t,o=!1,s){return e.filter((({type:e})=>this.isSupportedSymbolLayerType(e))).map(((e,r)=>{const n=`${t}__symbol-layers__symbol-layer__${r.toString()}`;return"CIMVectorMarker"===e.type?this.renderCIMVectorMarkerSymbolLayerBlocks(e,n):"CIMPictureMarker"===e.type?(0,i.h)(i.F,null,this.renderCIMPictureMarkerSymbolLayerBlock(e,n,o),(e.animatedSymbolProperties||e.animations)&&this.renderCIMAnimationEntryPoint(e,n,"picture-marker")):"CIMSolidStroke"===e.type?this.renderCIMSolidStrokeSymbolLayerBlock(e,n,o,s):"CIMPictureStroke"===e.type?this.renderCIMPictureStrokeSymbolLayerBlock(e,n,o):"CIMGradientStroke"===e.type?this.renderCIMGradientSymbolLayerBlock(e,n,o,"stroke"):"CIMSolidFill"===e.type?this.renderCIMSolidFillSymbolLayerBlock(e,n,o):"CIMHatchFill"===e.type?this.renderCIMHatchFillSymbolLayerBlocks(e,n):"CIMPictureFill"===e.type?this.renderCIMPictureFillSymbolLayerBlock(e,n,o):"CIMGradientFill"===e.type?this.renderCIMGradientSymbolLayerBlock(e,n,o,"fill"):(0,i.h)(i.F,null)})).filter(Boolean).flat()}renderSymbolsSelection(){const e=this.previewSymbol,t=e?n.e.previewSymbol2D.getContrastingBackgroundTheme(e,245):"light",o="rtl"===(0,a.b)(this.el),s=1===this.filteredSources?.length&&1===this.activeSymbolItems?.length;return(0,i.h)("calcite-label",{style:{"--symbol-styler-inline-input-trigger-background-color":"dark"===t?"#f3f3f3":""}},this.mergedStrings.currentSymbol,(0,i.h)("button",{class:F,disabled:s,onClick:()=>this.state="choosing-symbol",type:"button"},(0,i.h)("div",{class:R,tabIndex:0},(0,i.h)("div",{class:L},(0,i.h)("arcgis-symbol-styler-symbol-preview",{symbol:e,options:"point"===this.editGeometry?U:"line"===this.editGeometry?H:void 0})),(0,i.h)("div",{class:A},function(e,t){if(!e)return null;if("picture-marker"===e.type||"simple-marker"===e.type)return t.basicPoint;if("simple-line"===e.type)return t.basicLine;if("simple-fill"===e.type)return t.basicPolygon;if("CIMPointSymbol"===e.data.symbol?.type)return t.vectorPoint;if("CIMLineSymbol"===e.data.symbol?.type)return t.vectorLine;if("CIMPolygonSymbol"===e.data.symbol?.type)return t.vectorPolygon;throw new Error("unsupported symbol provided")}(e,this.mergedStrings))),(0,i.h)("calcite-icon",{icon:s?void 0:"chevron-"+(o?"left":"right"),scale:"s"})))}renderAnimationPanel(){const{mergedStrings:e,currentAnimationSymbolLayer:t}=this,o=t,s="CIMPictureMarker"===o.type?o.animations??[{animatedSymbolProperties:o.animatedSymbolProperties,type:"default"}]:o.animations;return(0,i.h)("calcite-flow-item",{class:"animation-panel",heading:e.animation,selected:"animation"===this.state,beforeBack:async()=>{this.state="editing"}},s.map(((t,o)=>{const s=this.getAnimationBlockHeadingInfo(t.type),r=t.animatedSymbolProperties;return(0,i.h)("calcite-block",{iconStart:s.icon,class:"animation-block",heading:s.heading,collapsible:!0,open:0===o},this.renderAnimationSpecificProperty(t),(0,i.h)("div",{class:"animation-checkbox-container"},(0,i.h)("calcite-checkbox",{checked:r.playAnimation,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;r.playAnimation=t,this.setInternalSymbol(this.symbol,!0)}}),(0,i.h)("div",{class:"animation-checkbox-container-text"},e.playAnimation)),(0,i.h)("div",{class:"animation-checkbox-container"},(0,i.h)("calcite-checkbox",{checked:r.reverseAnimation,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;r.reverseAnimation=t,this.setInternalSymbol(this.symbol,!0)}}),(0,i.h)("div",{class:"animation-checkbox-container-text"},e.reverseAnimation)),(0,i.h)("calcite-label",null,e.startTimeOffset,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;r.randomizeStartTime="random"===t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"random",checked:r.randomizeStartTime},e.randomized),(0,i.h)("calcite-segmented-control-item",{value:"manual",checked:!r.randomizeStartTime},e.manualOffset))),(0,i.h)("calcite-label",null,e.manualOffset,(0,i.h)("arcgis-slider-input",{disabled:r.randomizeStartTime,max:20,min:0,onArcgisValueChange:e=>{const t=e.detail;r.startTimeOffset=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:r.startTimeOffset??0,withSteppers:!this.narrow,label:e.manualOffset})),(0,i.h)("calcite-label",null,e.duration,(0,i.h)("arcgis-slider-input",{max:20,min:0,onArcgisValueChange:e=>{const t=e.detail;r.duration=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:r.duration??0,withSteppers:!this.narrow,label:e.duration})),(0,i.h)("calcite-label",null,e.repeatType,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;r.repeatType=t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"None",checked:"None"===r.repeatType},e.none),(0,i.h)("calcite-segmented-control-item",{value:"Loop",checked:"Loop"===r.repeatType},e.loop),(0,i.h)("calcite-segmented-control-item",{value:"Oscillate",checked:"Oscillate"===r.repeatType},e.oscillate))),(0,i.h)("calcite-label",null,e.repeatDelay,(0,i.h)("arcgis-slider-input",{max:20,min:0,onArcgisValueChange:e=>{const t=e.detail;r.repeatDelay=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:r.repeatDelay??0,withSteppers:!this.narrow,label:e.repeatDelay})),r.easing?(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,e.animations.easingType),(0,i.h)("calcite-combobox",{selectionMode:"single-persist",clearDisabled:!0,label:e.animations.easingType,onCalciteComboboxChange:e=>{const t=e.currentTarget.value;r.easing=t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-combobox-item",{value:"Linear",heading:e.animations.linear,selected:"Linear"===r.easing}),(0,i.h)("calcite-combobox-item",{value:"EaseIn",heading:e.animations.easeIn,selected:"EaseIn"===r.easing}),(0,i.h)("calcite-combobox-item",{value:"EaseOut",heading:e.animations.easeOut,selected:"EaseOut"===r.easing}),(0,i.h)("calcite-combobox-item",{value:"EaseInOut",heading:e.animations.easeInOut,selected:"EaseInOut"===r.easing}))):(0,i.h)(i.F,null))})),(0,i.h)("calcite-button",{width:"full",slot:"footer",onClick:async()=>await(this.flowEl?.back())},e.done))}renderAnimationSpecificProperty(e){const{mergedStrings:t}=this;switch(e.type){case"CIMSymbolAnimationColor":{const o=new n.e.EsriColor(e.toColor),s={...this.popoverProps,offsetDistance:(this.popoverProps?.offsetDistance??10)+50};return(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,t.animations.toColor),(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(o),clearable:!1,onArcgisChange:t=>{const o=Se(t.currentTarget.color),i=new n.e.EsriColor(o).toRgb();e.toColor=[...i,255],this.setInternalSymbol(this.symbol,!0)},popoverProps:s,storageId:V,ref:this.setColorInputRef}))}case"CIMSymbolAnimationSize":return(0,i.h)("calcite-label",null,t.animations.size,(0,i.h)("arcgis-slider-input",{disabled:!1,min:1,max:150,step:1,unitsLabel:t.px,value:ne((0,l.a)(e.toSize)),onArcgisValueChange:t=>{const o=(0,l.p)(t.detail);e.toSize=o,this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:t.animations.size}));case"CIMSymbolAnimationRotation":return(0,i.h)(i.F,null,(0,i.h)("div",{class:"animation-checkbox-container"},(0,i.h)("calcite-checkbox",{checked:!!e.rotateClockwise,onCalciteCheckboxChange:t=>{const{checked:o}=t.currentTarget;e.rotateClockwise=o,e.toRotation&&(e.toRotation=360-e.toRotation),this.setInternalSymbol(this.symbol,!0)}}),(0,i.h)("div",{class:"animation-checkbox-container-text"},t.animations.rotateClockwise)),(0,i.h)("calcite-label",null,t.rotation,(0,i.h)("arcgis-slider-input",{min:0,max:360,step:1,unitsLabel:"\xba",flipLabels:"rtl"===this.dir,value:e.toRotation?e.rotateClockwise?360-e.toRotation:e.toRotation:0,onArcgisValueChange:t=>{const o=e.rotateClockwise?360-t.detail:t.detail;e.toRotation=o,this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:t.rotation})));case"CIMSymbolAnimationOffset":return(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,t.animations.offset),(0,i.h)("div",{class:"offset-div"},(0,i.h)("arcgis-map-config-xy-slider",{x:Math.round((0,l.a)(e.offsetX)),y:-Math.round((0,l.a)(e.offsetY)),minX:-20,minY:-20,maxX:20,maxY:20,step:1,snappable:!0,onArcgisInput:t=>{t.stopPropagation();const o=t.currentTarget;e.offsetX=(0,l.p)(o.x),e.offsetY=-(0,l.p)(o.y),this.setInternalSymbol(this.symbol,!0)}}),(0,i.h)("div",null,(0,i.h)("calcite-label",{scale:"s"},t.animations.xOffset,(0,i.h)("calcite-input-number",{scale:"s",placeholder:t.animations.xOffset,value:`${Math.round((0,l.a)(e.offsetX))}`,inputMode:"decimal",min:-20,max:20,onCalciteInputNumberInput:t=>{const o=t.currentTarget;this.waitOnUser(t,(()=>{e.offsetX=(0,l.p)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)}),0)}})),(0,i.h)("calcite-label",{scale:"s"},t.animations.yOffset,(0,i.h)("calcite-input-number",{scale:"s",placeholder:t.animations.yOffset,value:`${Math.round((0,l.a)(e.offsetY))}`,inputMode:"decimal",min:-20,max:20,onCalciteInputNumberInput:t=>{const o=t.currentTarget;this.waitOnUser(t,(()=>{e.offsetY=(0,l.p)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)}),0)}})))));case"CIMSymbolAnimationScale":return(0,i.h)("div",{class:"scale-animation-wrapper"},(0,i.h)("calcite-label",null,t.animations.scaleFactor),(0,i.h)("calcite-slider",{min:0,max:3.5,step:.01,minLabel:t.animations.small,maxLabel:t.animations.large,value:e.scaleFactor,onCalciteSliderInput:t=>{const o=t.target.value;e.scaleFactor=o,this.setInternalSymbol(this.symbol,!0)}}),(0,i.h)("div",{class:"scale-animation-slider-labels","aria-hidden":"true"},(0,i.h)("calcite-label",null,t.animations.small),(0,i.h)("calcite-label",null,t.animations.large)));case"CIMSymbolAnimationTransparency":return(0,i.h)("calcite-label",null,t.transparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round(e.toTransparency),onArcgisValueChange:t=>{e.toTransparency=t.detail,this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,disabled:!1,label:t.transparency}));default:return(0,i.h)(i.F,null)}}renderSymbolSelectionPanel(){const{dir:e,mergedStrings:t}=this,o=!this.config.hideAddStyles&&window.customElements?.get("arcgis-item-browser");return(0,i.h)("calcite-flow-item",{class:"symbol-selection-panel",dir:e,heading:t.changeSymbol,key:"symbol-selection",selected:"choosing-symbol"===this.state,beforeBack:async()=>{this.state="editing"}},o&&(0,i.h)(i.F,null,(0,i.h)("calcite-action",{id:"add-styles",slot:"header-actions-end",text:t.addStyles,icon:"plus",onClick:async()=>await this.addStyles()}),(0,i.h)("calcite-tooltip",{"reference-element":"add-styles"},t.addStyles)),(0,i.h)("arcgis-map-config-symbol-picker",{hideSvgUploadSymbols:this.config.hideSvgUploadSymbols,hideClassicSymbols:this.config.hideClassicSymbols,onArcgisActiveSymbolChange:e=>{const{detail:t}=e;this.onSymbolSelect(t),e.stopPropagation()},onArcgisActiveSourceIdChange:({detail:e})=>{this.activeSourceId=e,this.arcgisSourceIdChange.emit(e),this.arcgisSymbolStylerSourceIdChange.emit(e)},onArcgisActiveSymbolItemChange:({detail:e})=>{this.activeSymbolItem=e},onArcgisSymbolSourcesChange:({detail:e})=>this.filteredSources=e,onArcgisActiveSourceItemsChange:({detail:e})=>this.activeSymbolItems=e,activeSymbolItem:this.activeSymbolItem,activeSourceId:this.activeSourceId||this.initialSourceId,portal:this.portalOrInterceptor,style:{"--scroller-max-height":"var(--symbol-scroller-max-height)"},symbolFilter:this.symbolFilter,symbol:this.activeSymbol,key:`${this.pickerReRenderFlag}`,ref:e=>this.symbolPickerElement=e}),(0,i.h)("calcite-button",{width:"full",slot:"footer",onClick:async()=>await(this.flowEl?.back())},t.done))}setInternalSymbol(e,t,o){if(this.symbol=e,"animation"===this.state){let e=this.symbol.data.symbol;if("root-symbol"===this.currentAnimationInfo.symbolLayerKey)this.currentAnimationSymbolLayer=e;else{const t=this.currentAnimationInfo.symbolLayerKey.split("__");for(let o=0;o<t.length;o++)if("symbol-layers"===t[o])e=e.symbolLayers;else if("symbol-layer"===t[o]){const i=t[o+1];e=e[Number.parseInt(i)],o++}"picture-marker"===this.currentAnimationInfo.symbolLayerType?this.currentAnimationSymbolLayer=e:this.currentAnimationSymbolLayer=Q(e)}}this.updatePreviewSymbol(),t&&this.emitEdit(e,o)}renderRootCIMSymbolColorContent(){const e=n.e.cimSymbolUtils.getCIMSymbolColor(this.symbol);return(0,c.i)(e)?(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.mergedStrings.color),(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(e),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||fe(e)||(o.a=e.a),n.e.cimSymbolUtils.applyCIMSymbolColor(this.symbol,o),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef})):(0,i.h)(i.F,null)}renderRootCIMSymbolTransparencyContent(){const e=n.e.cimSymbolUtils.getCIMSymbolColor(this.symbol);return(0,c.i)(e)?(0,i.h)("calcite-label",null,this.mergedStrings.transparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,c.p)(e.a??1)),onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o);e.a=i,n.e.cimSymbolUtils.applyCIMSymbolColor(this.symbol,e),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),t.stopPropagation()},withSteppers:!this.narrow,disabled:!1,label:this.mergedStrings.transparency})):(0,i.h)(i.F,null)}renderRootCIMSymbolSizeContent(){const{sections:e,marker:t}=this,o=e?.marker?.parts?.size,s="object"==typeof o&&o?.autoSizeAdjust,r=n.e.cimSymbolUtils.getCIMSymbolSize(this.symbol);return(0,i.h)("div",{class:P},(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:s&&"editable"!==s&&t?.autoAdjusted,min:1,max:150,step:1,unitsLabel:this.mergedStrings.px,value:ne((0,l.a)(r)),onArcgisValueChange:e=>this.onSymbolSizeChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})),s?this.renderAutoAdjust((0,a.b)(this.el),this.marker?.autoAdjusted||!1,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null)}renderRootCIMSymbolWidthContent(){const e=this.symbol,{sections:t,stroke:o}=this,s=t?.stroke?.extraParts?.autoStrokeAdjust,r=(0,a.b)(this.el),c=(0,n.i)(e)?function(e){const t=e.data.symbol?.symbolLayers?.find((e=>["CIMSolidStroke","CIMPictureStroke"].includes(e.type)));return t.width??0}(e):n.e.cimSymbolUtils.getCIMSymbolSize(this.symbol);let h=this.getStrokeString("width"),d=this.cimStrokeWidthBounds?.min,p=this.cimStrokeWidthBounds?.max;if((0,n.a)(e)){const t=e?.data?.symbol?.symbolLayers?.some((e=>["CIMVectorMarker","CIMPictureMarker"].includes(e.type)));t&&(h=this.mergedStrings.symbolSize,d=1,p=W)}return(0,i.h)("div",{class:P},(0,i.h)("calcite-label",{dir:r},h,(0,i.h)("arcgis-slider-input",{disabled:s&&"editable"!==s&&o?.autoAdjusted,min:d,max:p,step:1,unitsLabel:this.mergedStrings.px,value:ne((0,l.a)(c)),onArcgisValueChange:e=>this.onStrokeWidthChange(e.detail),withSteppers:!this.narrow,label:h})),s?this.renderAutoAdjust(r,this.stroke?.autoAdjusted||!1,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null)}renderSymbolSizeContent(){const{sections:e,marker:t}=this,o=e?.marker?.parts?.size,s=(0,a.b)(this.el),r="object"==typeof o&&o?.autoSizeAdjust;return(0,i.h)("div",{class:P},(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:r&&"editable"!==r&&t?.autoAdjusted,min:1,max:150,step:1,unitsLabel:this.mergedStrings.px,value:t?.size,onArcgisValueChange:e=>this.onSymbolSizeChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})),r?this.renderAutoAdjust(s,t?.autoAdjusted??!1,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null)}renderAutoAdjust(e,t,o,s){return(0,i.h)("calcite-label",{class:b,dir:e,layout:"inline",key:"auto-adjust"},(0,i.h)("calcite-checkbox",{checked:t,class:x,onCalciteCheckboxChange:s}),o)}renderSymbolRotationContent(){const{marker:e,mergedStrings:t}=this;return(0,i.h)("calcite-label",null,t.rotation,(0,i.h)("arcgis-slider-input",{min:0,max:360,step:1,unitsLabel:"\xba",flipLabels:"rtl"===this.dir,value:e?.angle,onArcgisValueChange:e=>this.onSymbolRotationChange(e.detail),withSteppers:!this.narrow,label:t.rotation}))}renderAngleAlignmentContent(e){const{mergedStrings:t}=this;return(0,i.h)("calcite-label",null,t.alignment,(0,i.h)("calcite-radio-button-group",{name:"angle-alignment",layout:"horizontal",onCalciteRadioButtonGroupChange:e=>{const t=e.currentTarget.selectedItem.value;this.handleAngleAlignmentChange(t)}},(0,i.h)("calcite-label",{layout:"inline"},(0,i.h)("calcite-radio-button",{value:"Display",checked:"Display"===e}),t.display),(0,i.h)("calcite-label",{layout:"inline"},(0,i.h)("calcite-radio-button",{value:"Map",checked:"Map"===e}),t.map)))}renderBaseWidthContent(e){const{mergedStrings:t}=this,o=e.effects?.find((e=>"CIMGeometricEffectTaperedPolygon"===e.type));return(0,i.h)("calcite-label",null,t.baseWidth,(0,i.h)("arcgis-slider-input",{min:1,max:10,step:.1,unitsLabel:t.px,flipLabels:this.percentLabelFlip,value:o?.fromWidth??10,onArcgisValueChange:e=>{const t=e.detail;o.fromWidth=t,this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:t.baseWidth}))}renderFillBlock(){if(!this.stylerProps?.sections)return(0,i.h)("div",null,";");const{sections:e}=this.stylerProps,{fill:t}=e;return"color"===t?.type?this.renderColorFillBlock():this.renderColorRampFillBlock()}renderColorFillBlock(){const e=this.sections?.fill,{parts:t}=e,o=[];return(t.suggestedColors||t.customColor)&&o.push({content:this.renderFillColorContent()}),t.transparency&&o.push({content:(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:!e.enabled},this.renderColorFillTransparencyContent(this.mergedStrings.fillTransparency,!e.enabled))}),this.renderSection({key:"color-fill",disabled:"non-editable"===e.optional||this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol(),sectionContent:o})}toColorPickerValue(e,t){if(e&&!fe(e)){if(t){const t=(0,c.i)(e.toRgba()[3])?(255*e.toRgba()[3]).toString(16).padStart(2,"0"):"";return`${e.toHex()}${t}`}return e.toHex()}}renderFillColorContent(){const e=this.sections?.fill,t=e?.enabled?this.toColorPickerValue(this.fill?.color):void 0;return(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.mergedStrings.fillColor),(0,i.h)("arcgis-color-input",{color:t,clearable:!1!==e?.optional,onArcgisChange:t=>{const o=t.currentTarget.color;if(!o)return void this.onFillEnabledChange(!1);e?.enabled||this.onFillEnabledChange(!0);const i=Se(o),{color:s}=this.fill,r={color:Se(ee(s,{...s,...i,a:s.a}))};this.fill=r,this.arcgisFillChange.emit(r),this.arcgisSymbolStylerFillChange.emit(r),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))}getStrokeString(e){return this.mergedStrings["line"===this.editGeometry?e:`stroke${t=e,t.charAt(0).toUpperCase()+t.slice(1)}`];var t}isSupportedSymbolLayerType(e){return"CIMVectorMarker"===e||"CIMSolidFill"===e||"CIMSolidStroke"===e||"CIMHatchFill"===e||"CIMPictureFill"===e||"CIMPictureStroke"===e||"CIMPictureMarker"===e||"CIMGradientFill"===e||"CIMGradientStroke"===e}getSymbolLayerPreviewSymbol(e,t){const o={data:{type:"CIMSymbolReference",symbol:{type:"point"===t?"CIMPointSymbol":"line"===t?"CIMLineSymbol":"CIMPolygonSymbol",symbolLayers:[e]}}};return"CIMVectorMarker"===e.type&&((o.data?.symbol).angle=e.rotation??0),new n.e.CIMSymbol(o)}renderCIMVectorMarkerSymbolLayerBlocks(e,t){if("minimal"===this.mode)return(0,i.h)(i.F,null);const{sections:o,marker:s,mergedStrings:r}=this,a=o?.marker?.parts.size,h=o?.marker?.parts.rotation,d=o?.stroke?.extraParts?.autoStrokeAdjust,p="object"==typeof a&&a?.autoSizeAdjust,m=this.getSymbolLayerPreviewSymbol(e,"point"),y=Q(e),g=n.e.cimSymbolUtils.getCIMSymbolSize(m),b=n.e.cimSymbolUtils.getCIMSymbolRotation(m,!0),u=function(e){const t=new Set;let o=Y(e,(e=>{if("CIMSolidFill"===e?.type||"CIMHatchFill"===e?.type||"CIMPictureFill"===e?.type||"CIMPictureMarker"===e?.type)return"fill"}));return o&&t.add(o),o=Y(e,(e=>{if("CIMSolidStroke"===e?.type||"CIMPictureStroke"===e?.type)return"stroke"})),o&&t.add(o),Array.from(t).filter(Boolean)}(e),S=[];if(u.includes("fill")&&(!this.isFillColorRamp()||e.colorLocked)){const t=Z(e,"fill"),o=[(0,i.h)(i.F,null,(0,i.h)("calcite-label",{key:"fill-color"},1===u.length?r.color:r.fillColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(t),clearable:!0,onArcgisChange:o=>{const i=Se(o.currentTarget.color);fe(i)||fe(t)||(i.a=t.a),q(e,i,"fill"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))),(0,i.h)("calcite-label",{key:"fill-transparency"},1===u.length?r.transparency:r.fillTransparency,(0,i.h)("arcgis-slider-input",{min:0,max:D,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,c.p)(t.a)),onArcgisValueChange:o=>{const i=o.detail,s=(0,c.t)(i),r=t.clone();r.a=s,q(e,r,"fill"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===u.length?r.transparency:r.fillTransparency}))];S.push(o)}if(u.includes("stroke")){const t=Z(e,"stroke"),o=function(e,t){let o=0;return Y(e,(e=>{"fill"===t&&("CIMVectorMarker"!==e?.type&&"CIMPictureMarker"!==e?.type||void 0!==e.size&&e.size>o&&(o=e.size)),"stroke"===t&&("CIMSolidStroke"!==e?.type&&"CIMPictureStroke"!==e?.type||void 0!==e.width&&e.width>o&&(o=e.width))})),o}(e,"stroke"),s=[(0,i.h)(i.F,null,(0,i.h)("calcite-label",{key:"stroke-color"},1===u.length?r.color:r.strokeColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(t),clearable:!0,onArcgisChange:o=>{const i=Se(o.currentTarget.color);fe(i)||fe(t)||(i.a=t.a),q(e,i,"stroke"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))),(0,i.h)("calcite-label",{key:"stroke-transparency"},1===u.length?r.transparency:r.strokeTransparency,(0,i.h)("arcgis-slider-input",{min:0,max:D,step:1,unitsLabel:"%",flipLabels:this.percentLabelFlip,value:Math.round((0,c.p)(t.a)),onArcgisValueChange:o=>{const i=o.detail,s=(0,c.t)(i),r=t.clone();r.a=s,q(e,r,"stroke"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===u.length?r.transparency:r.strokeTransparency})),(0,i.h)("calcite-label",{key:"stroke-width"},1===u.length?r.width:r.strokeWidth,(0,i.h)("arcgis-slider-input",{disabled:d&&"editable"!==d&&this.stroke?.autoAdjusted,min:this.cimStrokeWidthBounds?.min,max:this.cimStrokeWidthBounds?.max,step:1,unitsLabel:r.px,value:ne((0,l.a)(o)),onArcgisValueChange:t=>{const o=t.detail;!function(e,t,o){Y(e,(e=>{"fill"===o&&("CIMVectorMarker"!==e?.type&&"CIMPictureMarker"!==e?.type||(e.size=t)),"stroke"===o&&("CIMSolidStroke"!==e?.type&&"CIMPictureStroke"!==e?.type||(e.width=t))}))}(e,le((0,l.p)(o)),"stroke"),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:1===u.length?r.width:r.strokeWidth}))];S.push(s)}const f=(0,i.h)("div",{class:P,key:`${t}__vector-marker-symbol-layer`},[...S],a&&(0,i.h)("calcite-label",null,r.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:p&&"editable"!==p&&s?.autoAdjusted,min:1,max:W,step:1,unitsLabel:r.px,value:ne((0,l.a)(g)),onArcgisValueChange:e=>{const t=e.detail;this.setMarkerSymbolLayerSize(m,t),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:r.symbolSize})),h&&(0,i.h)("calcite-label",null,r.rotation,(0,i.h)("arcgis-slider-input",{min:0,max:360,step:1,unitsLabel:"\xba",flipLabels:"rtl"===this.dir,value:re(b),onArcgisValueChange:e=>{const t=e.detail;n.e.cimSymbolUtils.applyCIMSymbolRotation(m,re(t),!0),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:r.rotation})),this.renderCIMMarkerPlacementSection(e),this.renderCIMAnimationEntryPoint(y,t,"vector-marker")),C=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__symbol-layer-preview`,symbol:C,options:U,slot:"icon"}),key:`${t}__symbol-layer`,heading:r.vectorMarker,content:f})}setMarkerSymbolLayerSize(e,t){(0,n.c)(this.activeSymbol)?(e.data.symbol?.symbolLayers?.[0]).size=le((0,l.p)(t)):n.e.cimSymbolUtils.scaleCIMSymbolTo(e,le((0,l.p)(t)))}renderCIMSolidFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return(0,i.h)(i.F,null);const s=Se(e.color,!0),r=fe(s);let n=null,l=null;this.isFillColorRamp()&&!e.colorLocked||(n=(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.mergedStrings.fillColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(s),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||r||(o.a=s.a),e.color=o.toJSON();const i=this.sections?.stroke?.extraParts?.hideColor;if(i){const e=this.symbol.data.symbol.symbolLayers?.find((e=>"CIMSolidStroke"===e.type));e&&(e.color=[o.r,o.g,o.b,255])}this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))),l=(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:D,step:1,unitsLabel:"%",value:Math.round((0,c.p)(s.a)),disabled:r,onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o),r=s.clone();r.a=i,e.color=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})));const a=n||l?(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__solid-fill-symbol-layer-content`},n,(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:r},l)):(0,i.h)("calcite-label",null,this.mergedStrings.emptySymbolLayerMsg);if(o)return a;const h=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-fill-symbol-layer-preview`,symbol:h,slot:"icon"}),heading:this.mergedStrings.solidFill,key:`${t}__solid-fill-symbol-layer`,content:a})}renderCIMSolidStrokeSymbolLayerBlock(e,t,o=!1,s){if("minimal"===this.mode)return(0,i.h)(i.F,null);const r=Se(e.color,!0),n="CIMHatchFill"===s?.type,a=n&&this.isFillColorRamp(),h=this.sections?.stroke?.extraParts.autoStrokeAdjust,d=fe(r),p=this.sections?.stroke?.extraParts?.hideColor,m=this.sections?.stroke?.extraParts?.hideTransparency;let y=null,g=null;this.isStrokeColorRamp()&&!e.colorLocked||(y=(0,i.h)(i.F,null,(0,i.h)("calcite-label",{key:"stroke-color"},o?this.mergedStrings.strokeColor:this.mergedStrings.color),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(r),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||d||(o.a=r.a),e.color=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))),g=(0,i.h)("calcite-label",{key:"stroke-transparency"},o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:D,step:1,unitsLabel:"%",value:Math.round((0,c.p)(r.a)),disabled:d,onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o),s=r.clone();s.a=i,e.color=s.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency})));const b=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__solid-stroke-symbol-layer-content`},a||p?null:y,(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:d},a||m?null:g,(0,i.h)("calcite-label",null,o?this.mergedStrings.strokeWidth:this.mergedStrings.width,(0,i.h)("arcgis-slider-input",{disabled:d||h&&"editable"!==h&&this.stroke?.autoAdjusted,min:this.cimStrokeWidthBounds?.min,max:this.cimStrokeWidthBounds?.max,step:1,unitsLabel:this.mergedStrings.px,value:void 0!==e.width?ne((0,l.a)(e.width)):0,onArcgisValueChange:t=>{const o=t.detail;e.width=le((0,l.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:o?this.mergedStrings.strokeWidth:this.mergedStrings.width}))),n?this.renderCIMHatchFillPatternSection(s):null);if(o)return b;const u=n?this.getSymbolLayerPreviewSymbol({...s,lineSymbol:{type:"CIMLineSymbol",symbolLayers:[e]}},"polygon"):this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-stroke-symbol-layer-preview`,symbol:u,slot:"icon"}),heading:n?this.mergedStrings.hatchFill:this.mergedStrings.solidStroke,key:`${t}__solid-stroke-symbol-layer`,content:b})}renderCIMHatchFillSymbolLayerBlocks(e,t){return this.renderCIMSymbolLayersContent(e.lineSymbol,`${t}__hatch-symbol-fill-symbol-layers`,!1,e).flat()}renderCIMHatchFillPatternSection(e){const{mergedStrings:t}=this,o=e.offsetX??0;return(0,i.h)("calcite-block-section",{key:"hatch-fill-pattern",text:t.pattern},(0,i.h)("calcite-label",null,t.rotation,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:360,min:0,onArcgisValueChange:t=>{const o=t.detail;e.rotation=Math.abs(o),this.setInternalSymbol(this.symbol,!0)},step:1,unitsLabel:"\xba",value:e.rotation??0,withSteppers:!this.narrow,label:t.rotation})),(0,i.h)("calcite-label",null,t.separation,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:200,min:0,onArcgisValueChange:t=>{const o=t.detail;e.separation=o,this.setInternalSymbol(this.symbol,!0)},step:1,value:e.separation??0,unitsLabel:t.px,withSteppers:!this.narrow,label:t.separation})),(0,i.h)("calcite-label",null,t.offset,(0,i.h)("arcgis-slider-input",{flipLabels:"rtl"===this.dir,max:100,min:0,onArcgisValueChange:t=>{const o=t.detail;e.offsetX=o,e.offsetY=o,this.setInternalSymbol(this.symbol,!0)},step:1,value:o,unitsLabel:t.px,withSteppers:!this.narrow,label:t.offset})))}renderCIMPictureMarkerSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return(0,i.h)(i.F,null);const s=Se(e.tintColor,!0),{sections:r,marker:n}=this,a=r?.marker?.parts.size,h="object"==typeof a&&a?.autoSizeAdjust,d=this.getSymbolLayerPreviewSymbol(e,"point"),p=fe(s),m=(0,i.h)("div",{key:`${t}__picture-marker-symbol-layer`},(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-marker-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(s),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||p||(o.a=s.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef})),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:p},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:D,step:1,unitsLabel:"%",value:Math.round((0,c.p)(s.a)),disabled:p,onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o),r=s.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:p||h&&"editable"!==h&&n?.autoAdjusted,min:1,max:W,step:1,unitsLabel:this.mergedStrings.px,value:void 0!==e.size?ne((0,l.a)(e.size)):0,onArcgisValueChange:e=>{const t=e.detail;this.setMarkerSymbolLayerSize(d,t),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize})))),this.renderCIMMarkerPlacementSection(e));if(o)return m;const y=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__solid-fill-symbol-layer-preview`,symbol:y,options:U,slot:"icon"}),heading:this.mergedStrings.pictureMarker,key:`${t}__picture-marker-symbol-layer`,content:m})}sanitizePointPreviewSymbolLayer(e){return{...e,markerPlacement:void 0}}renderCIMPictureStrokeSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return(0,i.h)(i.F,null);const s=Se(e.tintColor,!0),{sections:r,marker:n}=this,a=r?.marker?.parts.size,h="object"==typeof a&&a?.autoSizeAdjust,d=fe(s),p=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-stroke-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(s),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||d||(o.a=s.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef})),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:d},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:D,step:1,unitsLabel:"%",value:Math.round((0,c.p)(s.a)),disabled:d,onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o),r=s.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:d||h&&"editable"!==h&&n?.autoAdjusted,min:1,max:W,step:1,unitsLabel:this.mergedStrings.px,value:void 0!==e.width?ne((0,l.a)(e.width)):0,onArcgisValueChange:t=>{const o=t.detail;e.width=le((0,l.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize}))));if(o)return p;const m=this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__picture-stroke-symbol-layer-preview`,symbol:m,slot:"icon"}),heading:this.mergedStrings.pictureStroke,key:`${t}__picture-stroke-symbol-layer`,content:p})}renderCIMPictureFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return(0,i.h)(i.F,null);const s=Se(e.tintColor,!0),{sections:r,marker:n}=this,a=r?.marker?.parts.size,h="object"==typeof a&&a?.autoSizeAdjust,d=fe(s),p=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__picture-fill-symbol-layer-content`},(0,i.h)("calcite-label",null,this.mergedStrings.fillColor),(0,i.h)("div",{class:"input-color"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(s),clearable:!0,onArcgisChange:t=>{const o=Se(t.currentTarget.color);fe(o)||d||(o.a=s.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef})),(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:d},(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:D,step:1,unitsLabel:"%",value:Math.round((0,c.p)(s.a)),disabled:d,onArcgisValueChange:t=>{const o=t.detail,i=(0,c.t)(o),r=s.clone();r.a=i,e.tintColor=r.toJSON(),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency})),(0,i.h)("calcite-label",null,this.mergedStrings.symbolSize,(0,i.h)("arcgis-slider-input",{disabled:d||h&&"editable"!==h&&n?.autoAdjusted,min:1,max:W,step:1,unitsLabel:this.mergedStrings.px,value:void 0!==e.height?ne((0,l.a)(e.height)):0,onArcgisValueChange:t=>{const o=t.detail;e.height=le((0,l.p)(o)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:this.mergedStrings.symbolSize}))));if(o)return p;const m=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__picture-fill-symbol-layer-preview`,symbol:m,slot:"icon"}),heading:this.mergedStrings.pictureFill,key:`${t}__picture-fill-symbol-layer`,content:p})}renderCIMGradientSymbolLayerBlock(e,t,o=!1,s){const{mergedStrings:r,sections:n,stroke:c}=this;if("minimal"===this.mode)return(0,i.h)(i.F,null);const h="rtl"===(0,a.b)(this.el),d=this.getSymbolLayerPreviewSymbol(e,"fill"===s?"polygon":"line"),p=n?.stroke?.extraParts?.autoStrokeAdjust,m=this.cimStrokeWidthBounds?.min,y=this.cimStrokeWidthBounds?.max,g="fill"===s&&n?.fill?.parts?.hideColorRamp||"stroke"===s&&n?.stroke?.parts?.hideColorRamp,b=(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,key:`${t}__gradient-${s}-symbol-layer-content`},!g&&(0,i.h)("calcite-block",{collapsible:!1,open:!0},this.renderGradientColorRampsContent(e,s)),(0,i.h)("calcite-block",{heading:r.gradient.pattern,collapsible:!0,open:!0,class:"no-top-margin"},"fill"===s&&(0,i.h)("div",{class:"gradient-margin"},(0,i.h)("calcite-label",null,r.gradient.direction),(0,i.h)("calcite-combobox",{selectionMode:"single-persist",clearDisabled:!0,label:r.gradient.direction,onCalciteComboboxChange:t=>{const o=t.currentTarget.value;e.gradientMethod=o,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-combobox-item",{value:"Linear",heading:r.gradient.linear,selected:"Linear"===e.gradientMethod}),(0,i.h)("calcite-combobox-item",{value:"Rectangular",heading:r.gradient.rectangular,selected:"Rectangular"===e.gradientMethod}),(0,i.h)("calcite-combobox-item",{value:"Circular",heading:r.gradient.circular,selected:"Circular"===e.gradientMethod}))),"stroke"===s&&(0,i.h)("calcite-label",null,r.width,(0,i.h)("arcgis-slider-input",{disabled:p&&"editable"!==p&&c?.autoAdjusted,min:m,max:y,step:1,unitsLabel:this.mergedStrings.px,value:ne((0,l.a)(e.width)),onArcgisValueChange:t=>{e.width=le((0,l.p)(t.detail)),this.setInternalSymbol(this.symbol,!0)},withSteppers:!this.narrow,label:r.width})),(0,i.h)("div",{class:"gradient-margin"},(0,i.h)("calcite-label",null,r.gradient.type),(0,i.h)("calcite-combobox",{selectionMode:"single-persist",clearDisabled:!0,label:r.gradient.type,onCalciteComboboxChange:t=>{const o=t.currentTarget.value;e.gradientType=o,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-combobox-item",{value:"Continuous",heading:r.gradient.continuous,selected:"Continuous"===e.gradientType}),(0,i.h)("calcite-combobox-item",{value:"Discrete",heading:r.gradient.discrete,selected:"Discrete"===e.gradientType}))),"Discrete"===e.gradientType&&(0,i.h)("calcite-label",null,r.gradient.interval,(0,i.h)("arcgis-slider-input",{max:100,min:1,onArcgisValueChange:t=>{e.interval=t.detail,this.setInternalSymbol(this.symbol,!0)},step:1,value:e.interval,withSteppers:!this.narrow,label:r.gradient.interval})),(0,i.h)("div",{class:"gradient-margin"},(0,i.h)("calcite-label",null,r.gradient.extent),(0,i.h)("calcite-combobox",{selectionMode:"single-persist",clearDisabled:!0,label:r.gradient.extent,onCalciteComboboxChange:t=>{const o=t.currentTarget.value;"Relative"===o&&e.gradientSize&&e.gradientSize>100&&(e.gradientSize=100),e.gradientSizeUnits=o,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-combobox-item",{value:"Absolute",heading:r.gradient.absolute,selected:"Absolute"===e.gradientSizeUnits}),(0,i.h)("calcite-combobox-item",{value:"Relative",heading:r.gradient.relative,selected:"Relative"===e.gradientSizeUnits}))),(0,i.h)("calcite-label",null,r.gradient.size,"Relative"===e.gradientSizeUnits?(0,i.h)("arcgis-slider-input",{max:100,min:1,onArcgisValueChange:t=>{e.gradientSize=t.detail,this.setInternalSymbol(this.symbol,!0)},step:1,value:e.gradientSize,flipLabels:this.percentLabelFlip,unitsLabel:"%",withSteppers:!this.narrow,label:r.gradient.size}):(0,i.h)("calcite-input-number",{label:r.gradient.size,scale:"s",inputMode:"decimal",min:1,max:Number.MAX_SAFE_INTEGER,step:1,value:`${ne((0,l.a)(e.gradientSize??75))}`,numberButtonType:this.narrow?"none":"vertical",prefixText:h?r.px:"",suffixText:h?"":r.px,onCalciteInputNumberInput:t=>{const o=t.currentTarget;this.waitOnUser(t,(()=>{e.gradientSize=(0,l.p)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)}),0)}}))));return o?b:this.renderBlock({icon:(0,i.h)("arcgis-symbol-styler-symbol-preview",{contrast:!0,key:`${t}__gradient-${s}-symbol-layer-preview`,symbol:d,slot:"icon"}),heading:"fill"===s?r.gradient.gradientFill:r.gradient.gradientStroke,key:`${t}__gradient-${s}-symbol-layer`,content:b})}renderCIMAnimationEntryPoint(e,t,o){if(!e)return(0,i.h)(i.F,null);const{mergedStrings:s,config:r}=this,{hideAnimation:n}=r,l="rtl"===(0,a.b)(this.el);return e.animations?.length??("CIMPictureMarker"===e.type&&e.animatedSymbolProperties)?(0,i.h)("calcite-label",null,(0,i.h)("button",{disabled:n,class:n?z:F,onClick:()=>{this.currentAnimationSymbolLayer=e,this.currentAnimationInfo={symbolLayerKey:t,symbolLayerType:o},this.state="animation"},type:"button"},(0,i.h)("div",{class:R,tabIndex:0},(0,i.h)("div",{class:`${A} animation-label`},s.animation)),(0,i.h)("calcite-icon",{icon:"chevron-"+(l?"left":"right"),scale:"s"}))):(0,i.h)(i.F,null)}renderCIMMarkerPlacementSection(e){const{dir:t,mergedStrings:o}=this,{markerPlacement:s}=e;return"CIMMarkerPlacementInsidePolygon"!==s?.type||"Random"!==s?.gridType&&"Fixed"!==s?.gridType?(0,i.h)(i.F,null):(0,i.h)("calcite-block-section",{key:"marker-placement",text:o.markerPlacement},(0,i.h)("calcite-label",null,o.gridType,(0,i.h)("calcite-segmented-control",{onCalciteSegmentedControlChange:e=>{const t=e.currentTarget.value;s.gridType=t,this.setInternalSymbol(this.symbol,!0)}},(0,i.h)("calcite-segmented-control-item",{value:"Fixed",checked:"Fixed"===s.gridType},o.fixed),(0,i.h)("calcite-segmented-control-item",{value:"Random",checked:"Random"===s.gridType},o.random))),(0,i.h)("calcite-label",null,o.randomness,(0,i.h)("arcgis-slider-input",{disabled:"Fixed"===s.gridType,flipLabels:this.percentLabelFlip,max:100,min:0,onArcgisValueChange:e=>{const t=e.detail;s.randomness=t,this.setInternalSymbol(this.symbol,!0)},step:1,value:s.randomness,unitsLabel:"%",withSteppers:!this.narrow,label:o.randomness})),(0,i.h)("calcite-label",null,o.stepX,(0,i.h)("arcgis-slider-input",{max:200,min:0,onArcgisValueChange:e=>{const t=e.detail;s.stepX=le((0,l.p)(t)),this.setInternalSymbol(this.symbol,!0)},step:1,value:void 0!==s.stepX?ne((0,l.a)(s.stepX)):0,unitsLabel:o.px,withSteppers:!this.narrow,label:o.stepX})),(0,i.h)("calcite-label",null,o.stepY,(0,i.h)("arcgis-slider-input",{max:200,min:0,onArcgisValueChange:e=>{const t=e.detail;s.stepY=le((0,l.p)(t)),this.setInternalSymbol(this.symbol,!0)},step:1,unitsLabel:o.px,value:void 0!==s.stepY?ne((0,l.a)(s.stepY)):0,withSteppers:!this.narrow,label:o.stepY})),(0,i.h)("calcite-label",{dir:t,layout:"inline"},(0,i.h)("calcite-checkbox",{checked:s.shiftOddRows&&"Fixed"===s.gridType,disabled:"Random"===s.gridType,onCalciteCheckboxChange:e=>{const{checked:t}=e.currentTarget;s.shiftOddRows=t,this.setInternalSymbol(this.symbol,!0)}}),o.shiftOddRows))}renderColorFillTransparencyContent(e,t){const{fill:o}=this;return(0,i.h)("calcite-label",null,e,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,c.p)(o?.color?.a??1)),onArcgisValueChange:e=>this.onColorFillTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:t,label:e}))}renderColorRampFillBlock(e=!1){const t=this.sections?.fill,{parts:o}=t;if(this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol())return(0,i.h)(i.F,null);const s=[];return o.colorRamps&&s.push({content:this.renderFillColorRampsContent()}),o.transparency&&s.push({content:this.renderColorRampFillTransparencyContent()}),this.renderSection({key:"color-ramp-fill",disabled:"non-editable"===t.optional,embedded:e,sectionContent:s})}renderFillColorRampsContent(){const{style:e}=this.stylerProps?.sections?.fill,{activeCategory:t,colorRamps:o}=this.sections?.fill;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.fill?.color,colorRamps:o,heading:this.mergedStrings.colors,onCategoryChange:this.onFillColorRampCategoryChange,isSelected:t=>{const o=this.fill?.color;return G(o,t.stops,"2d"===e)},onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{fill:i}=this,s={...i,color:o};this.fill=s,this.tempStrokeColorRampStateStops=o,this.arcgisFillChange.emit(s),this.arcgisSymbolStylerFillChange.emit(s),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}renderGradientColorRampsContent(e,t){const{activeCategory:o}="fill"===t?this.sections?.fill:this.sections?.stroke,s="fill"===t?this.sections.fill:this.sections.stroke;let r=e.colorRamp,l=[],a=["CIMLinearContinuousColorRamp","CIMPolarContinuousColorRamp"].includes(r.type);if("CIMMultipartColorRamp"===r.type&&1===r.colorRamps.length&&(a=!0,r=r.colorRamps[0]),a){const e=n.e.esriLang.clone(r.fromColor),t=n.e.esriLang.clone(r.toColor);e[3]=e[3]/255,t[3]=t[3]/255,l=[new n.e.EsriColor(e),new n.e.EsriColor(t)]}else{l=r.colorRamps.map((e=>new n.e.EsriColor(e.fromColor)));const e=r.colorRamps[r.colorRamps.length-1];l.push(new n.e.EsriColor(e.toColor))}if("stroke"===t&&this.sections?.stroke&&!this.sections.stroke.colorRamps||"fill"===t&&this.sections?.fill&&!this.sections.fill.colorRamps){const e=n.e.colorRamps.all().filter((e=>e.colors.length<=10)).map((e=>({name:e.name,tags:e.tags,stops:a?[e.colors[0],e.colors[e.colors.length-1]]:e.colors})));s.colorRamps=e}const c=s.colorRamps;return(0,i.h)(i.F,null,this.renderRampsContent({style:"continuous",activeCategory:o,colorRampStops:l,colorRamps:c,allowTransparency:!0,heading:"fill"===t?this.mergedStrings.colors:this.getStrokeString("color"),onCategoryChange:"fill"===t?this.onFillColorRampCategoryChange:this.onStrokeColorRampCategoryChange,isSelected:e=>G(l,e.stops),onSelect:o=>{const{detail:i}=o,s=i.stops.slice(),{fill:r,stroke:n}=this,l="fill"===t?{...r,color:s}:{...n,color:s};"fill"===t?(this.fill=l,this.arcgisFillChange.emit(l),this.arcgisSymbolStylerFillChange.emit(l)):(this.stroke=l,this.arcgisStrokeChange.emit(l),this.arcgisSymbolStylerStrokeChange.emit(l));const a="fill"===t?this.fill:this.stroke;if(2===a.color.length){const t=a.color;"CIMMultipartColorRamp"===e.colorRamp.type?(e.colorRamp.colorRamps[0].fromColor=t[0].toJSON(),e.colorRamp.colorRamps[0].toColor=t[1].toJSON()):(e.colorRamp.fromColor=t[0].toJSON(),e.colorRamp.toColor=t[t.length-1].toJSON())}else{const t=[];for(let e=0;e<l.color.length-1;e++)t.push({type:"CIMLinearContinuousColorRamp",fromColor:l.color[e].toJSON(),toColor:l.color[e+1].toJSON()});const o={type:"CIMMultipartColorRamp",colorRamps:t,weights:new Array(t.length).fill(1/t.length)};e.colorRamp=o}const c=this.sections?.stroke?.extraParts?.hideColor;if(c){const e=this.symbol.data.symbol.symbolLayers?.find((e=>"CIMSolidStroke"===e.type));if(e){const t=s[0];e.color=[t.r,t.g,t.b,255]}}this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},onFlip:()=>{const o=e.colorRamp,i="fill"===t?this.fill:this.stroke,s=J(l,!1);if(["CIMLinearContinuousColorRamp","CIMLinearContinuousColorRamp","CIMPolarContinuousColorRamp"].includes(o.type))o.fromColor=s[0].toJSON(),o.toColor=s[s.length-1].toJSON();else{const e=[];for(let t=0;t<s.length-1;t++)e.push({type:"CIMLinearContinuousColorRamp",fromColor:s[t].toJSON(),toColor:s[t+1].toJSON()});o.colorRamps=e,o.weights=new Array(e.length).fill(1/e.length)}const r=this.sections?.stroke?.extraParts?.hideColor;if(r){const e=this.symbol.data.symbol.symbolLayers?.find((e=>"CIMSolidStroke"===e.type));if(e){const t=s[0];e.color=[t.r,t.g,t.b,255]}}this.setInternalSymbol(this.symbol,!0),i.color=s,"fill"===t?this.flipFillColorRamps():this.flipStrokeColorRamps()}}),2===l.length?(0,i.h)("div",{class:"gradient-color-inputs"},(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l[1],!0),clearable:!1,onArcgisChange:t=>{const o=Se(t.currentTarget.color),i=new n.e.EsriColor(o).toRgba();i[3]=255*i[3],"CIMMultipartColorRamp"===e.colorRamp.type?e.colorRamp.colorRamps[0].toColor=i:e.colorRamp.toColor=i,this.setInternalSymbol(this.symbol,!0)},popoverProps:this.popoverProps,storageId:V,hideRecentColors:!0,showTransparency:!0,ref:this.setColorInputRef}),(0,i.h)("arcgis-color-input",{color:this.toColorPickerValue(l[0],!0),clearable:!1,onArcgisChange:t=>{const o=Se(t.currentTarget.color),i=new n.e.EsriColor(o).toRgba();i[3]=255*i[3],"CIMMultipartColorRamp"===e.colorRamp.type?e.colorRamp.colorRamps[0].fromColor=i:e.colorRamp.fromColor=i;const s=this.sections?.stroke?.extraParts?.hideColor;if(s){const e=this.symbol.data.symbol.symbolLayers?.find((e=>"CIMSolidStroke"===e.type));e&&(e.color=[i[0],i[1],i[2],255])}this.setInternalSymbol(this.symbol,!0)},popoverProps:this.popoverProps,storageId:V,hideRecentColors:!0,showTransparency:!0,ref:this.setColorInputRef})):null)}renderRampsContent(e){return(0,i.h)("calcite-label",null,e.heading,(0,i.h)("arcgis-symbol-styler-color-ramp-input",{options:e,strings:this.mergedStrings,popoverProps:this.popoverProps,style:{"--scroller-max-height":"var(--ramp-scroller-max-height)"},ref:this.setRampInputRef}))}renderColorRampFillTransparencyContent(){const{fill:e}=this,t=e.color[0],o=4===t.length?t[3]/255:t.a;return(0,i.h)("calcite-label",null,this.mergedStrings.fillTransparency,(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,c.p)(o)),onArcgisValueChange:e=>this.onColorRampFillTransparencyChange(e.detail),withSteppers:!this.narrow,label:this.mergedStrings.fillTransparency}))}renderStrokeBlock(){const e=this.stylerProps?.sections?.stroke;return"color"===e?.type?this.renderColorStrokeBlock():this.renderColorRampStrokeBlock()}renderColorStrokeBlock(){const e=this.sections,t=e?.stroke,{parts:o}=t,s=[];if((o.suggestedColors||o.customColor)&&s.push({content:this.renderStrokeColorsContent()}),o.transparency||o.extra){const e=[];o.transparency&&e.push(this.showingRampOptionsInStroke()?this.renderColorRampStrokeTransparencyContent(!t.enabled):this.renderColorStrokeTransparencyContent(!t.enabled)),o.extra&&e.push(this.renderStrokeExtraContent(!t.enabled)),s.push({content:(0,i.h)("arcgis-symbol-styler-section",{embedded:!0,disabled:!t.enabled},e)})}return this.renderSection({key:"color-stroke",disabled:"non-editable"===t.optional||this.hasActivePictureMarkerSymbol(),sectionContent:s})}renderStrokeColorRampsContent(){const{style:e}=this.stylerProps?.sections?.stroke,{activeCategory:t,colorRamps:o}=this.sections?.stroke;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.stroke?.color,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:this.onStrokeColorRampCategoryChange,isSelected:e=>{const t=this.stroke?.color;return G(t,e.stops)},onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,s={...i,color:o};this.stroke=s,this.arcgisStrokeChange.emit(se(s)),this.arcgisSymbolStylerStrokeChange.emit(se(s)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipStrokeColorRamps})}showingRampOptionsInStroke(){const e=this.stylerProps?.sections?.stroke,t=ie(this.activeSymbol),o=this.sections?.fill?.type;return t&&"color-ramp"===o&&"color"===e.type}renderStrokeColorsContent(){const e=this.sections?.stroke;if(this.showingRampOptionsInStroke()){const e=this.tempStrokeColorRampStateActiveCategory,{style:t}=this.stylerProps?.sections?.fill,{colorRamps:o}=this.sections?.fill;return this.renderRampsContent({style:t,activeCategory:e,colorRampStops:this.tempStrokeColorRampStateStops,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-value");this.tempStrokeColorRampStateActiveCategory=t,e.stopPropagation()},isSelected:e=>G(this.tempStrokeColorRampStateStops,e.stops),onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,s={...i,color:o};this.stroke=s,this.tempStrokeColorRampStateStops=o,this.arcgisStrokeChange.emit(se(s)),this.arcgisSymbolStylerStrokeChange.emit(se(s)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}const t=e?.enabled?this.toColorPickerValue(this.stroke?.color):void 0;return(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.getStrokeString("color")),(0,i.h)("arcgis-color-input",{color:t,clearable:!1!==e?.optional,onArcgisChange:t=>{const o=t.currentTarget.color;if(!o)return void this.onStrokeEnabledChange(!1);e?.enabled||this.onStrokeEnabledChange(!0);const i=Se(o),s=this.stroke?.color,{stroke:r}=this,n={...r,color:Se(ee(s,{...s,...i,a:s.a}))};this.stroke=n,this.arcgisStrokeChange.emit(se(n)),this.arcgisSymbolStylerStrokeChange.emit(se(n)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()},popoverProps:this.popoverProps,storageId:V,ref:this.setColorInputRef}))}renderColorStrokeTransparencyContent(e){const{stroke:t}=this;return(0,i.h)("calcite-label",null,this.getStrokeString("transparency"),(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,c.p)((t?.color).a)),onArcgisValueChange:e=>this.onColorStrokeTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:e,label:this.getStrokeString("transparency")}))}renderStrokeExtraContent(e){const{sections:t,stroke:o}=this,s=t?.stroke?.extraParts.arrow,r=t?.stroke?.extraParts.autoStrokeAdjust,l=t?.stroke?.extraParts.style,c=t?.stroke?.extraParts.width,h="line"===this.editGeometry,d="polygon"===this.editGeometry,p=h?.1:0,m=(0,n.b)(this.symbol),y=!m&&l&&(h||d),g=!m&&s&&h,b=!m&&c,v=!m&&r,w=(0,a.b)(this.el),I=ye(o?.marker);return(0,i.h)("div",{class:P},b?(0,i.h)("calcite-label",{dir:w,key:"width-options"},this.getStrokeString("width"),(0,i.h)("arcgis-slider-input",{disabled:e||r&&"editable"!==r&&o?.autoAdjusted,min:p,max:18,step:1,unitsLabel:this.mergedStrings.px,value:o?.size,onArcgisValueChange:e=>this.onStrokeWidthChange(e.detail),withSteppers:!this.narrow,label:this.getStrokeString("width")})):null,v?this.renderAutoAdjust(w,o?.autoAdjusted??!1,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null,g?(0,i.h)("calcite-label",{dir:w,key:"arrow-options"},this.mergedStrings.arrow,(0,i.h)("calcite-dropdown",{class:{[f]:!0,[S]:!0},onCalciteDropdownSelect:this.onStrokeArrowChange,widthScale:"l",placement:"top-end",overlayPositioning:this.popoverProps?.overlayPositioning,scale:"s"},(0,i.h)("div",{role:"button",slot:"trigger",tabIndex:0},(0,i.h)("div",{"data-arrow":I,class:C,style:this.getSelectedArrowPatternStyle()}),(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,i.h)("calcite-dropdown-group",null,O.map((e=>(0,i.h)("calcite-dropdown-item",{selected:e===I,"data-arrow":e},(0,i.h)("div",{class:k,"data-arrow":e,style:this.getArrowPatternOptionStyle()}))))))):null,y?(0,i.h)("calcite-label",{dir:w,key:"pattern-options"},this.mergedStrings.pattern,(0,i.h)("calcite-dropdown",{class:{[f]:!0,[u]:!0},onCalciteDropdownSelect:this.onStrokeStyleChange,widthScale:"l",placement:"top-end",overlayPositioning:this.popoverProps?.overlayPositioning,scale:"s",maxItems:7},(0,i.h)("div",{role:"button",slot:"trigger",tabIndex:0},(0,i.h)("div",{class:C,style:this.getLinePatternStyle(o?.style||"solid")}),(0,i.h)("calcite-icon",{icon:"chevron-down",scale:"s"})),(0,i.h)("calcite-dropdown-group",null,E.map((e=>(0,i.h)("calcite-dropdown-item",{selected:e===o?.style,"data-style":e},(0,i.h)("div",{style:this.getLinePatternStyle(e),class:k}))))))):null)}renderColorRampStrokeBlock(e=!1){const t=this.sections?.stroke,o=t.parts,i=[];return o.colorRamps&&i.push({content:this.renderStrokeColorRampsContent()}),o.transparency&&i.push({content:this.renderColorRampStrokeTransparencyContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),o.extra&&i.push({content:this.renderStrokeExtraContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),this.renderSection({key:"color-ramp-stroke",disabled:"non-editable"===t.optional||this.hasActivePictureMarkerSymbol(),embedded:e,sectionContent:i})}renderColorRampStrokeTransparencyContent(e){const{stroke:t}=this;return(0,i.h)("calcite-label",null,this.getStrokeString("transparency"),(0,i.h)("arcgis-slider-input",{flipLabels:this.percentLabelFlip,min:0,max:100,step:1,unitsLabel:"%",value:Math.round((0,c.p)(t?.color[0].a)),onArcgisValueChange:e=>this.onColorRampStrokeTransparencyChange(e.detail),withSteppers:!this.narrow,disabled:e,label:this.getStrokeString("transparency")}))}checkPopoverMaxHeight(){if(this.flowEl&&this.popoverProps&&(!this.popoverProps.maxHeight||this.autoCalcHeight)){this.autoCalcHeight=!0;const e=this.flowEl.getBoundingClientRect(),t=window.innerHeight||document.documentElement?.clientHeight||document.body?.clientHeight||0,o=t&&e?.top?t-e.top-30:0;this.popoverProps.maxHeight=Math.max(o||e.height,250)-(this.popoverProps.offsetDistance??0)-5+"px"}}getAnimationBlockHeadingInfo(e){const{mergedStrings:t}=this;switch(e){case"CIMSymbolAnimationColor":return{heading:t.animations.color,icon:"styling"};case"CIMSymbolAnimationOffset":return{heading:t.animations.offset,icon:"relative-direction"};case"CIMSymbolAnimationRotation":return{heading:t.animations.rotation,icon:"rotate"};case"CIMSymbolAnimationScale":return{heading:t.animations.scale,icon:"stretch"};case"CIMSymbolAnimationSize":return{heading:t.animations.size,icon:"dimensions-unit"};case"CIMSymbolAnimationTransparency":return{heading:t.animations.transparency,icon:"transparency"};default:return{heading:t.animation,icon:"play"}}}waitOnUser(e,t,o){const i=e.target;this.typingHandle&&(clearTimeout(this.typingHandle),this.typingHandle=void 0);const s=i.value,r=Number.parseFloat(s);s?(0,c.i)(i.min)&&(0,c.i)(i.max)&&(i.min>r||i.max<r)?this.typingHandle=setTimeout((()=>{this.typingHandle=void 0,i.min>r?(i.value=`${i.min}`,t(i)):i.max<r&&(i.value=`${i.max}`,t(i))}),750):s.startsWith("-")&&(0===r||Number.isNaN(r))||t(i):this.typingHandle=setTimeout((()=>{this.typingHandle=void 0,i.value=`${o}`,t(i)}),2e3)}static get assetsDirs(){return["assets"]}get el(){return(0,i.a)(this)}static get watchers(){return{builtInStrings:["handleStringChanges"],stringOverrides:["handleStringChanges"]}}};Ce.style=':host {\n  min-width: 220px;\n  height: -moz-min-content;\n  height: min-content;\n  display: flex;\n  flex: 1 1 auto;\n  flex-flow: column nowrap;\n  align-items: stretch;\n}\n\nbutton {\n  overflow: hidden;\n  align-items: center;\n  border: none;\n  border-radius: 0;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: flex;\n  font-family: inherit;\n  gap: 8px;\n  height: 100%;\n  justify-content: center;\n  outline-color: transparent;\n  outline-offset: 0;\n  padding: 3px 0;\n  padding-inline: 3px 8px;\n  position: relative;\n  text-decoration: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  text-align: center;\n  -webkit-appearance: none;\n  width: 100%;\n  &:focus {\n    outline: 2px solid var(--calcite-color-brand);\n    outline-offset: 2px;\n  }\n  &:hover {\n    text-decoration: none;\n  }\n}\n\ncalcite-dropdown {\n  width: 100%;\n}\n\ncalcite-flow {\n  height: 100%;\n}\n\n.content {\n  background-color: var(--calcite-color-foreground-1);\n}\n\n.color-locked-info {\n  display: flex;\n  gap: 4px;\n  margin: 8px 0;\n  align-items: center;\n\n  calcite-icon {\n    color: var(--calcite-color-text-3);\n  }\n}\n\n.icon-dropdown {\n  padding: 0.25rem 0 0 0;\n  width: 100%;\n  background-color: var(--calcite-color-foreground-1);\n  height: 2.25rem;\n  border: 1px solid #a9a9a9;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);\n}\n\n.icon-dropdown--selected {\n  cursor: pointer;\n  margin-left: 12px;\n  height: 3px;\n  width: 100%;\n}\n\n.icon-dropdown-item-content,\n.icon-dropdown--selected {\n  background-position: center;\n  background-clip: content-box;\n  background-origin: content-box;\n  padding-left: 0;\n  padding-right: 0;\n}\n\n.icon-dropdown-item-content {\n  height: 30px;\n  width: 200px;\n}\n\n:dir(rtl) {\n  .icon-dropdown--selected {\n    margin-right: 12px;\n  }\n}\n\n.style-dropdown {\n  [slot="trigger"] {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    calcite-icon {\n      margin: 8px;\n      background-color: #fff;\n    }\n  }\n\n  [slot="trigger"],\n  .icon-dropdown-item-content {\n    background-repeat: repeat-x;\n  }\n}\n\n.arrow-dropdown {\n  [slot="trigger"] {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .icon-dropdown--selected {\n      height: 30px;\n      background-size: 100% 119px;\n    }\n\n    calcite-icon {\n      margin: 8px;\n      background-color: #fff;\n    }\n  }\n\n  [slot="trigger"] .icon-dropdown--selected,\n  .icon-dropdown-item-content {\n    background-repeat: no-repeat;\n\n    &[data-arrow="none"] {\n      background-position: 0 0;\n    }\n\n    &[data-arrow="begin"] {\n      background-position: 0 -32px;\n    }\n\n    &[data-arrow="end"] {\n      background-position: 0 -61px;\n    }\n\n    &[data-arrow="begin-end"] {\n      background-position: 0 -91px;\n    }\n  }\n}\n\n.content-group {\n  display: flex;\n  flex-direction: column;\n\n  label {\n    margin: 8px 0 0 0;\n  }\n}\n\n.color-ramp-selection {\n  padding: 4px;\n}\n\n.section-toggle--disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n\n.swatch-item {\n  box-sizing: border-box;\n  height: 16px;\n  width: 16px;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.33);\n}\n\n/* workaround for https://github.com/Esri/calcite-components/issues/2582 */\ncalcite-input[disabled] {\n  [data-adjustment] {\n    pointer-events: none;\n  }\n}\n\narcgis-symbol-styler-section {\n  calcite-block {\n    overflow: visible;\n    margin: 0 -12px;\n\n    &[open]:before :not(.no-top-margin) {\n      content: "";\n      height: 16px;\n      display: flex;\n      background-color: var(--calcite-color-foreground-2);\n    }\n\n    &:nth-of-type(n + 1) {\n      border-bottom: 1px solid #f0f0f0;\n    }\n\n    &:last-child {\n      border-bottom: none;\n    }\n\n    arcgis-symbol-styler-section:nth-of-type(2) {\n      margin-top: 12px;\n    }\n  }\n}\n\ncalcite-panel {\n  overflow: visible;\n  /* stopgap to allow styler to be embedded into existing panels */\n  margin-top: 0;\n}\n\n.input-color {\n  flex-wrap: nowrap;\n  gap: 8px;\n  align-items: center;\n}\n\ncalcite-tooltip {\n  max-width: 250px;\n\n  &:not([open]) {\n    visibility: hidden;\n    pointer-events: none;\n  }\n}\n\n.message {\n  margin-top: 8px;\n}\n\n/* symbol layer previews */\narcgis-symbol-styler-symbol-preview[slot="icon"],\narcgis-symbol-styler-symbol-preview.gradient-margin {\n  width: 32px;\n  height: 32px;\n  padding: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container {\n  display: flex;\n  padding: 8px 12px;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  gap: 8px;\n  flex-grow: 1;\n}\n\n.symbol {\n  height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.label {\n  flex-grow: 1;\n  display: flex;\n  justify-content: flex-start;\n}\n\n.animation-label {\n  font-weight: var(--calcite-font-weight-medium);\n}\n\n.change-symbol-trigger {\n  border: 1px solid var(--calcite-color-border-input);\n}\n\n.change-symbol-trigger-disabled {\n  border: 1px solid var(--calcite-color-border-ghost);\n}\n\n.symbol-selection-panel {\n  min-height: min(100vh - 200px, 500px);\n  display: flex;\n  flex-direction: column;\n\n  arcgis-item-palette .palette {\n    gap: 8px;\n  }\n\n  calcite-notice:first-of-type {\n    margin: auto 0 0 0;\n  }\n\n  calcite-label {\n    margin: 16px 12px 0 12px;\n  }\n\n  calcite-panel {\n    overflow: visible;\n  }\n}\n\n.section {\n  display: flex;\n  flex-direction: column;\n  background-color: var(--calcite-color-foreground-1);\n}\n\narcgis-color-input {\n  margin-top: calc(-1 * var(--calcite-spacing-xxs));\n  padding-bottom: var(--calcite-spacing-md);\n}\n\n.animation-panel {\n  min-height: min(100vh - 200px, 500px);\n  display: flex;\n  flex-direction: column;\n}\n\n.animation-checkbox-container {\n  display: flex;\n  align-items: center;\n  padding-bottom: var(--calcite-spacing-sm);\n}\n\n.animation-checkbox-container-text {\n  margin: 0px var(--calcite-spacing-sm);\n}\n\n.offset-div {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  gap: 16px;\n  margin-bottom: var(--calcite-spacing-md);\n}\n\n.offset-animation-content-margin,\n.gradient-margin {\n  margin-bottom: var(--calcite-spacing-md);\n}\n\n.gradient-color-inputs {\n  display: flex;\n  gap: var(--calcite-spacing-md);\n  width: 100%;\n  justify-content: space-between;\n}\n\n.gradient-color-inputs arcgis-color-input {\n  max-width: 64px;\n}\n\n.scale-animation-wrapper {\n  margin: var(--calcite-spacing-md) 0px;\n}\n\n.scale-animation-slider-labels {\n  display: flex;\n  justify-content: space-between;\n}\n';const ke="arcgis-symbol-styler-storage-styles",ve=class{constructor(e){(0,i.r)(this,e),this.arcgisSymbolStylerBrowseStylesClose=(0,i.c)(this,"arcgisSymbolStylerBrowseStylesClose",7),this.manager=(0,s.u)(this),this.cardNodes={},this.editGeometry=void 0,this.excludeItemIds=void 0,this.portal=void 0,this.strings=void 0,this.items=void 0,this.pagination=void 0,this.selectedCount=0}async componentWillLoad(){const{editGeometry:e}=this,t=(0,m.g)(ke,!0)||{};this.savedStyleIds=t?.[e]||[]}render(){const{portal:e,editGeometry:t,savedStyleIds:o,excludeItemIds:s,strings:r}=this,n=e.user;let l="";o?.forEach((e=>l+=` -id:${e}`)),s?.length&&s.forEach((e=>l+=` -id:${e}`));const a=`type:"Style" typekeywords:"web2d" ${"point"===t?'typekeywords:"pointSymbol"':"line"===t?'typekeywords:"lineSymbol"':'typekeywords:"polygonSymbol"'}${l}`,c=`${(0,p.a)(e)}/home/`;return(0,i.h)(i.H,{key:"280bd7ae105af65911511c46e69d5e49837d9b72"},(0,i.h)("calcite-dialog",{key:"02cdf2b9485467555dbacb7d683764cfec8b4fe6",class:"styles-dialog",open:!0,modal:!0,scale:"l",escapeDisabled:!0,outsideCloseDisabled:!0,onCalciteDialogClose:()=>this.arcgisSymbolStylerBrowseStylesClose.emit(),heading:this.strings.addStyles},(0,i.h)("arcgis-item-browser",{key:"fa2c7f842f5033dfd2ff5efe0e9791f89ba413f4",view:"list",selection:"multiple",filter:a,portal:e,user:n,api:4,config:{baseUrl:c},onArcgisItemBrowserUpdate:e=>{const{results:t,num:o,start:i,total:s}=e.detail;this.items=t,this.pagination={start:i,num:o,total:s}},onArcgisItemBrowserSelect:()=>this.selectedCount=this.itemBrowserNode?.selectedItems?.length,ref:e=>this.itemBrowserNode=e},(0,i.h)("arcgis-item-browser-top-bar",{key:"74299d55c4ad1da9ffc3f551f7c291a98b94dc03",slot:"top-bar","filter-toggle":!0},(0,i.h)("arcgis-item-browser-bucket-select",{key:"db8ca6d8d1a8aed4171cf5b3db3e55efced2e91d",slot:"bucket",options:e.isPortal?["my","favorites","group","org","living atlas"]:void 0}),(0,i.h)("arcgis-item-browser-search",{key:"cb366b41d08aca0f49d0abfce7f9da70797b699b",slot:"search",term:""})),(0,i.h)("arcgis-item-browser-sort",{key:"99cb21dc948428a2148a7305af7460210138e976",options:["modified","title","relevance"],slot:"sort"}),(0,i.h)("arcgis-item-browser-filters",{key:"46c772a29977452c81bef59e138f77e35a2badb1",slot:"filters"},e.user&&(0,i.h)("arcgis-item-browser-filter-folder",{key:"18e207f6235451115aa3d4a6c2e638927ad24d61"}),(0,i.h)("arcgis-item-browser-filter-categories",{key:"95954aee82e9212d258f775458920ab773d4a0a7"}),(0,i.h)("arcgis-item-browser-filter-sharing",{key:"7ac97b5ad94268ff0b323c20eb35c919c92d7047"}),(0,i.h)("arcgis-item-browser-filter-collaborations",{key:"f7861ade54a93faaee3c87b98c01580f5b2e87fb"}),(0,i.h)("arcgis-item-browser-filter-tags",{key:"021a9a363d0fdede9054093c60c1e03a5070f059"}),(0,i.h)("arcgis-item-browser-filter-content-status",{key:"315ade8a88f1b1a81b3adc586839aea241390f6a"}),(0,i.h)("arcgis-item-browser-filter-date",{key:"9c7077685fe9a708188118a5e33b25dabf2c3ac3",property:"modified"}),(0,i.h)("arcgis-item-browser-filter-date",{key:"650feb7c8d9cb0b64486d0bc32da0462606928e3",property:"created"})),(0,i.h)("arcgis-item-browser-content",{key:"068af651d721ee5ebe4be5581f10a519c2834d4c",slot:"content"},(this.items||[]).map((t=>(0,i.h)("arcgis-item-browser-card",{key:`card-${t.id}`,item:t,portal:e,baseUrl:c,showItemType:!0,showDateUpdated:!0,showOwner:!0,showSummary:!0,showThumbnail:!0,ref:e=>this.cardNodes[t.id]=e},(0,i.h)("calcite-button",{label:r.viewItemDetail,scale:"s",appearance:"outline-fill",kind:"neutral",slot:"actions-end",target:"_blank",href:`${c}/item.html?id=${t.id}`},r.viewItemDetail))))),(0,i.h)("arcgis-item-browser-pagination",{key:"622ee273eb18a28030a35c607916a84970a8ff72",slot:"pagination",total:this.pagination?.total,start:this.pagination?.start,num:this.pagination?.num})),(0,i.h)("calcite-button",{key:"01fe656a2173f5627a3f1754f3a29a46916f9ae2",slot:"footer-end",appearance:"outline-fill",alignment:"center",onClick:()=>this.arcgisSymbolStylerBrowseStylesClose.emit()},this.strings.cancel),(0,i.h)("calcite-button",{key:"e5a68b3f00178463ffe06ff6da9cf276ef948a86",slot:"footer-end",alignment:"center",appearance:"solid",disabled:!this.selectedCount,onClick:()=>{this.saveNewStyleItemsInLocalStorage(this.itemBrowserNode.selectedItems),this.arcgisSymbolStylerBrowseStylesClose.emit(this.itemBrowserNode.selectedItems.length?this.itemBrowserNode.selectedItems.map((e=>e.id)):[])}},this.strings.add)))}saveNewStyleItemsInLocalStorage(e){const{editGeometry:t}=this,o=(0,m.g)(ke,!0)||{},i=o?.[t]||[];if(e.map((e=>e.id)).forEach((e=>{i.includes(e)||i.push(e)})),this.savedStyleIds=i,o[t]=i,["point","polygon"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("lineSymbol"))).map((e=>e.id)),i=o.line||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.line=i)}if(["point","line"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("polygonSymbol"))).map((e=>e.id)),i=o.polygon||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.polygon=i)}if(["line","polygon"].includes(t)){const t=e.filter((e=>e.typeKeywords.includes("pointSymbol"))).map((e=>e.id)),i=o.point||[];t.forEach((e=>{i.includes(e)||i.push(e)})),i.length&&(o.point=i)}(0,m.s)(ke,o,!0)}get el(){return(0,i.a)(this)}};ve.style=".styles-dialog{--calcite-dialog-size-y:min(900px, calc(80vh + 100px));--calcite-dialog-size-x:1080px;--calcite-dialog-content-space:0px}";const we="color-picker-container";let Ie=0;const xe="color-ramp-item",Pe=({stops:e,style:t="continuous",allowTransparency:o=!1,name:s,layout:r="vertical",width:n=20,height:l=70})=>{const a=Ie+++"-color-ramp-gradient",c="vertical"===r?"rotate(90)":"";return(0,i.h)("span",{title:s,class:xe},(0,i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",height:l,width:n},(0,i.h)("defs",null,(0,i.h)("linearGradient",{id:a,gradientTransform:c},"continuous"===t?function(e,t){const o=1/(e.length-1);return e.slice().map((({r:e,g:s,b:r,a:n},l)=>{const a=l*o*100;return(0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,"stop-opacity":`${t?n:"1"}`,offset:`${a}%`})}))}(e,o):function(e){const t=1/e.length,o=[];return e.slice().forEach((({r:e,g:s,b:r},n)=>{const l=n*t*100,a=(n+1)*t*100;o.push((0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${l}%`}),(0,i.h)("stop",{"stop-color":`rgb(${e}, ${s}, ${r})`,offset:`${a}%`}))})),o}(e))),(0,i.h)("rect",{x:"0",y:"0",fill:`url('#${a}')`,width:"100%",height:"100%"})))};const Me="color-ramp-item",Re=({stops:e,name:t,opacity:o,size:s=48})=>{const{svgUtils:r}=n.e,l=Math.sqrt(e.length),a=X(e),h=Math.sqrt(s**2+s**2)+0;let d;(0,c.i)(o)&&(d={opacity:`${o}`});const p=[],m=[],y=[],g=(s||75)/l;for(let e=0;e<l;e++){const t=e*g;for(let o=0;o<l;o++){const i=o*g,s=Te(a[e][o]),n=Oe(),l={type:"rect",x:i,y:t,width:g,height:g};p.push(Ae(s)),m.push(ze(l,s.fill,n)),y.push(r.getBoundingBox(l))}}const b=r.computeBBox(y),u=r.getTransformMatrix(b,h,h,0,!1,0,!1);return(0,i.h)("span",{title:t,class:Me},(0,i.h)("div",{style:d},(0,i.h)("svg",{width:h,height:h,style:undefined,xmlns:"http://www.w3.org/2000/svg"},(0,i.h)("defs",null,p),(0,i.h)("g",{transform:u},m))))};function Ae(e){const{pattern:t,linearGradient:o}=e;if(t)return(0,i.h)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},(0,i.h)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(o){const e=o.stops.map(((e,t)=>(0,i.h)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color})));return(0,i.h)("linearGradient",{id:o.id,gradientUnits:"userSpaceOnUse",x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},e)}return null}let Le=0,Fe=0;function ze(e,t,o,s){if(e){if("circle"===e.type)return(0,i.h)("circle",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return(0,i.h)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return(0,i.h)("rect",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return(0,i.h)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const s="string"!=typeof e.path?e.path.map((e=>`${e.command} ${e.values.join(" ")}`)).join(" ").trim():e.path;return(0,i.h)("path",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4",d:s})}if("text"===e.type)return(0,i.h)("text",{fill:t,"fill-rule":"evenodd",stroke:o.color,"stroke-width":o.width,"stroke-linecap":o.cap,"stroke-linejoin":o.join,"stroke-dasharray":o.dashArray,"stroke-miterlimit":"4","text-anchor":s?.align,"text-decoration":s?.decoration,kerning:s?.kerning,rotate:s?.rotate,"text-rendering":"auto","font-style":s?.font.style,"font-variant":s?.font.variant,"font-weight":s?.font.weight,"font-size":s?.font.size,"font-family":s?.font.family,x:e.x,y:e.y},e.text)}return null}function Te(e){const t={fill:"none",pattern:void 0,linearGradient:void 0};if(e)if("type"in e&&"pattern"===e.type){const o="patternId-"+ ++Le;t.fill=`url(#${o})`,t.pattern={id:o,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const o="linearGradientId-"+ ++Fe;t.fill=`url(#${o})`,t.linearGradient={id:o,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&Se(e.color).toString()})))}}else if(e){const o=Se(e);t.fill=o.toString()}return t}function Oe(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=Se(e.color).toString()),e.style)){let o="";if(e.style in Ee&&(o=Ee[e.style]),Array.isArray(o)){o=o.slice(0);for(let t=0;t<o.length;++t)o[t]*=e.width??1;if("butt"!==e.cap){for(let t=0;t<o.length;t+=2)o[t]-=e.width??1,o[t]<1&&(o[t]=1);for(let t=1;t<o.length;t+=2)o[t]+=e.width??1}o=o.join(",")}t.dashArray=o}return t}const Ee={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},je=class{constructor(e){(0,i.r)(this,e),this.manager=(0,s.u)(this),this.setInlineInputRef=e=>{this.inlineInputEl=e},this.disabled=!1,this.options=void 0,this.placement="auto",this.popoverProps=void 0,this.strings=void 0}async setFocus(){await(this.inlineInputEl?.setFocus())}async close(){await(this.inlineInputEl?.close())}render(){const{disabled:e,strings:t}=this;return(0,i.h)(i.H,{key:"8c8ad9ab6ff892abaf004a797adf96c528d3b0c3"},(0,i.h)("arcgis-picker-input",{key:"fa6019a7f4dd93dc9be49621fd869bdd0face44a",disabled:e,intlDone:t.done,heading:t.ramp,label:this.options.heading,popoverProps:this.popoverProps,ref:this.setInlineInputRef},(0,i.h)("div",{key:"ee95743168c512a4cea206065d2b062c3024a944",class:we,slot:"content"},this.renderRampsContent(this.options)),(0,i.h)("div",{key:"31ea54a8f6bc66ded684f1938447d34f7ea8ce64",slot:"preview"},(0,i.h)(Pe,{key:"e55c356e41082b9e1f5a881679a9a144abdf7fcf",stops:this.options.colorRampStops.slice().reverse(),allowTransparency:this.options.allowTransparency,style:this.options.style,layout:"horizontal",height:"100%",width:"100%"}))))}renderRampsContent({activeCategory:e,colorRamps:t,isSelected:o,onCategoryChange:s,onFlip:r,onSelect:n,style:l}){const{strings:a}=this,{categories:c,ramps:h}=this.getCategoriesAndColorRampsBySelectedCategory(e,t),d="2d"===l,p=d?"rotate":"arrow-up-down",m=d?a.rotateColors:a.flipColors,y=d?Re:Pe,g=d?3:6;return[(0,i.h)("div",{class:"section"},(0,i.h)("calcite-label",null,this.strings.category,(0,i.h)("calcite-select",{width:"full",label:this.strings.category,onCalciteSelectChange:s},c.map((t=>(0,i.h)("calcite-option",{value:t,label:a.categories[t],selected:t===e}))))),(0,i.h)("calcite-button",{class:v,appearance:"transparent",onClick:e=>{e.preventDefault(),e.stopImmediatePropagation(),r()},scale:"s",width:"full"},(0,i.h)("calcite-icon",{icon:p,scale:"s",style:d?{transform:"rotateY(180deg)"}:void 0}),m)),(0,i.h)("div",{class:{[w]:!0,[I]:!0}},(0,i.h)("arcgis-item-palette",{items:h,extraItemProps:{style:l},ItemRenderer:y,itemsPerRow:g,selected:o,onArcgisItemSelect:n}))]}getCategoriesAndColorRampsBySelectedCategory(e,t){const o=T[e],i=t.filter((t=>"all"===e||o.some((e=>t.tags.includes(e))))),s=new Set;t.forEach((e=>e.tags.forEach((e=>s.add(e)))));return{categories:Object.keys(T).filter((e=>"all"===e||T[e].some((e=>s.has(e))))),ramps:i}}get el(){return(0,i.a)(this)}};je.style='.scroller {\n  max-height: var(--scroller-max-height, 200px);\n  overflow-y: auto;\n  min-width: 200px;\n  overflow-x: hidden;\n  display: flex;\n  justify-content: center;\n}\n\n.color-ramp-item {\n  display: inline-flex;\n  flex-grow: 1;\n  svg {\n    display: flex;\n  }\n}\n\n.color-picker-container {\n  display: flex;\n  flex-direction: column;\n\n  arcgis-item-palette .palette {\n    gap: 20px;\n  }\n}\n\ncalcite-color-picker-swatch {\n  width: 200px;\n}\n\n.section {\n  display: flex;\n  flex-direction: column;\n  padding: 12px;\n  background-color: var(--calcite-color-foreground-1);\n}\n\n.color-ramp-selection {\n  padding: 4px 20px 4px 4px; /* FF needs space for scroll bars */\n  border: 1px solid lightgray;\n  border-top: none;\n}\n\n:dir(rtl) {\n  .color-ramp-selection {\n    padding: 4px 4px 4px 20px; /* FF needs space for scroll bars */\n  }\n}\n\n.color-ramp-flipper {\n  calcite-icon {\n    margin: 0 0.5rem;\n  }\n}\n\n[slot="preview"] {\n  .color-ramp-item {\n    height: 24px;\n  }\n}\n';const Be=class{constructor(e){(0,i.r)(this,e),this.disabled=!1,this.embedded=!1}render(){return(0,i.h)(i.H,{key:"5715a53972963d9aca2fcad65021566a219b6adc",tabindex:this.disabled?-1:""},(0,i.h)("slot",{key:"e87c0f0a147b7d3a69ce8aa912044915381b970e"}))}};Be.style=":host{display:flex;flex-direction:column;background-color:var(---calcite-color-foreground-1);padding:16px 12px}:host([disabled]){opacity:var(--calcite-opacity-disabled);pointer-events:none}:host([embedded]){padding:0}";const _e=class{constructor(e){(0,i.r)(this,e),this.manager=(0,s.u)(this),this.updatePreview=(0,h.d)((async()=>{const{symbol:e}=this;if(!e)return;const t={...this.options,size:this.options?.size&&"object"==typeof this.options.size?{...this.options.size}:this.options?.size};"cim"===e.type&&"CIMPolygonSymbol"===e.data.symbol?.type?delete t?.size:"cim"===e.type&&"CIMLineSymbol"===e.data.symbol.type&&t.size&&"object"==typeof t.size&&(t.size.height=20);const o=e.clone();"picture-marker"===o.type&&t.size&&"number"==typeof t.size?(o.width=o.width/o.height*t.size,o.height=t.size):"simple-line"===o.type&&t.size&&"object"==typeof t.size&&(o.width=t.size.height);const i=n.e.symbolUtils.renderPreviewHTML(o,t);this.lastPreviewRender=i;const s=await i;this.lastPreviewRender!==i||(this.lastPreview?.remove(),this.lastPreview=s,s&&this.el.shadowRoot?.append(s),this.backgroundTheme=n.e.previewSymbol2D.getContrastingBackgroundTheme(e,245))}),250),this.backgroundTheme="light",this.contrast=!1,this.options=void 0,this.symbol=void 0}watchSymbolAndOptions(){this.updatePreview()}async componentDidLoad(){await this.updatePreview()}render(){return(0,i.h)(i.H,{key:"c7583dd6bfd48e386fb3d869e8eef8094d0ddebc",class:{dark:this.contrast&&"dark"===this.backgroundTheme}})}get el(){return(0,i.a)(this)}static get watchers(){return{symbol:["watchSymbolAndOptions"],options:["watchSymbolAndOptions"]}}};_e.style=":host{display:inline-block}:host(.dark){background-color:#f3f3f3}img{vertical-align:middle}"},20173:(e,t,o)=>{o.d(t,{a:()=>i});const i=e=>e&&!e.endsWith("/")?`${e}/`:e},53127:(e,t,o)=>{o.d(t,{a:()=>s,d:()=>i,t:()=>r});const i=(e,t)=>{let o,i="idle";const s=async(...s)=>await new Promise((r=>{switch(i){case"flushed":i="idle",o?(clearTimeout(o),r(e(...s))):r(null);break;case"invoked":clearTimeout(o),i="idle",r(e(...s));break;case"cancelled":clearTimeout(o),i="idle",r(null);break;default:o&&clearTimeout(o),i="pending",o=setTimeout((()=>{i="idle",r(e(...s))}),t)}}));return s.flush=async function(...e){return i="flushed",await s(...e)},s.invoke=async function(...e){return i="invoked",await s(...e)},s.cancel=async function(...e){return i="cancelled",await s(...e)},s.getStatus=function(){return i},s},s=(e,t)=>{let o;return async(...i)=>await new Promise((s=>{o||(o=setTimeout((()=>{clearTimeout(o),o=void 0,s(e(...i))}),t))}))};function r(e){return new Promise((t=>setTimeout(t,e)))}},84260:(e,t,o)=>{o.d(t,{u:()=>n});var i=o(11254),s=o(10465),r=o(14528);function n({propertyName:e="strings",name:t}){let o=(0,r.r)();const n=(0,s.g)(o.el),a=new s.D,c={_lang:n.lang,_t9nLocale:n.t9nLocale};o.manager.onLoad((()=>a.promise));const h=new WeakRef(o);function d(){const e=h.deref();return e||m?.(),e}o=void 0;const p=l((()=>d()?.el)),m=(0,s.s)(p,(()=>(0,i.g)("./assets")),(({t9nLocale:t,t9nStrings:o,lang:i})=>{const s=d();if(!s)return;s[e]={...o,_lang:i,_t9nLocale:t},a.resolve()}),t);return c}const l=e=>new Proxy({},{get(t,o){const i=e();if(!i)return;const s=Reflect.get(i,o,i);return"function"==typeof s?s.bind(i):s}})},89731:(e,t,o)=>{o.d(t,{a:()=>s,p:()=>r});const i=96;function s(e){return e?e/72*i:0}function r(e){return e?72*e/i:0}}}]);