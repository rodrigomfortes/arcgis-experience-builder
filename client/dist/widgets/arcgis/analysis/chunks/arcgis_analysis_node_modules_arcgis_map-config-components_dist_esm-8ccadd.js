/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-8ccadd.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-8ccadd"],{3175:(e,r,i)=>{i.d(r,{a:()=>a,g:()=>o});var t=i(20173);function a(e){const{customBaseUrl:r,portalHostname:i,urlKey:t}=e,{protocol:a}=window.location;return`${a}//${t?`${t}.${r}`:i}`}function o(e){return(0,t.a)(e.restUrl)}},20173:(e,r,i)=>{i.d(r,{a:()=>t});const t=e=>e&&!e.endsWith("/")?`${e}/`:e},84661:(e,r,i)=>{i.d(r,{a:()=>u,b:()=>f,c:()=>d,d:()=>p,e:()=>s,f:()=>c,g:()=>w,i:()=>l,l:()=>m,u:()=>o});var t=i(69811),a=i(3175);function o(e,r){return n(e,r)||function(e,r){const i=e.owner,t="admin"===e.itemControl,a=["esri_livingatlas","esri_demographics","esri_boundaries"];if(e.portal?.isPortal&&!n(e,r)&&t&&i?.includes("esri_")&&!a.includes(i))return!1;return t}(e,r)}function n(e,r){return e.owner===r.username}function s(e){return e.typeKeywords?.includes("Spatiotemporal")}function l(e){return e.typeKeywords?.includes("View Service")}function u(e){return e.typeKeywords?.includes("Hosted Service")}function m(e){return e.typeKeywords?.includes("Multi Services View")}function c(e){return e?.hasViews&&!e.sourceSchemaChangesAllowed}async function f(e){const r=e?.portalItem;if(!r)return await Promise.resolve(null);const i=r.portal,o=await(0,t.p)();if(i?.user){const e=`${(0,a.g)(i)}community/users/${i.user.username}`;return await o(e,{query:{f:"json",token:r.portal.credential?.token},responseType:"json"}).then((e=>{const r=e.data?.groups??[];return Promise.resolve(r)}),(()=>Promise.reject(new Error("Failed to fetch user groups"))))}return await Promise.resolve(null)}async function d(e){const r=e?.portalItem;if(!r)return await Promise.resolve(null);const i=r.portal,o=await(0,t.p)(),n=`${(0,a.g)(i)}content/items/${r.id}/groups`;return await o(n,{query:{f:"json",token:r.portal.credential?.token},responseType:"json"}).then((e=>{const r=[...e.data?.admin??[],...e.data?.member??[],...e.data?.other??[]];return Promise.resolve(r)}),(()=>Promise.reject(new Error("Failed to fetch item groups"))))}async function w(e,r,{relationshipType:i,direction:o}){const n=`${(0,a.g)(r)}content/items/${e}/relatedItems`,s=await(0,t.p)();return await s(n,{query:{f:"json",relationshipType:i,direction:o},responseType:"json"})}function p(e,r){return e?.some((e=>r?.some((r=>e.id===r.id&&e.capabilities.includes("updateitemcontrol")))))}},84947:(e,r,i)=>{i.d(r,{a:()=>u,c:()=>l});var t=i(84661),a=i(17840),o=i(3175),n=i(69811);function s(e,r){return!(!e||!r)&&e.toLocaleLowerCase()===r.toLocaleLowerCase()}async function l(e){const r="feature"===e.type||"oriented-imagery"===e.type,i=e?.portalItem,a=e.sourceJSON;if(!r||!i)return await Promise.resolve(!1);const o=i.portal;if(!o?.user)return await Promise.resolve(!1);if((0,t.i)(i))return await Promise.resolve(!1);if(!(0,t.a)(i))return await Promise.resolve(!1);if((0,t.l)(i))return await Promise.resolve(!1);if((0,t.f)(a))return await Promise.resolve(!1);const n=(0,t.u)(i,o.user),s=await(0,t.b)(e)??[],l=await(0,t.c)(e)??[],u=(0,t.d)(s,l);if(!n&&!u)return await Promise.resolve(!1);const m=await(0,t.g)(i.id,o,{relationshipType:"Service2Service"});if(m?.data?.relatedItems){if(m.data.relatedItems.some((e=>["WMTS","Map Service","Vector Tile Service"].includes(e.type))))return await Promise.resolve(!1)}return await Promise.resolve(!0)}async function u(e,r,i,a){if(!i)return await Promise.resolve(!1);const l="feature"===r.type||"oriented-imagery"===r.type,u=a?.item??r.portalItem,f=r.sourceJSON;if(!l||!u)return await Promise.resolve(!1);if(!u.portal.user)return await Promise.resolve(!1);if(!(0,t.a)(u))return await Promise.resolve(!1);if((0,t.i)(u))return await Promise.resolve(!1);if((0,t.l)(u))return await Promise.resolve(!1);if((0,t.f)(f))return await Promise.resolve(!1);if(u.portal.isPortal&&(0,t.e)(u))return await Promise.resolve(!1);if(["oid","global-id","geometry"].includes(i.type))return await Promise.resolve(!1);const d=await(0,n.aD)(),w=r.sourceJSON.geometryProperties,p=w?.shapeLengthFieldName,v=w?.shapeAreaFieldName;if(s(p,i.name)||s(v,i.name))return await Promise.resolve(!1);const P=r.editFieldsInfo;if(P&&(s(P.creationDateField,i.name)||s(P.creatorField,i.name)||s(P.editDateField,i.name)||s(P.editorField,i.name)))return await Promise.resolve(!1);if(s(r.objectIdField,i.name)||s(r.displayField,i.name))return await Promise.resolve(!1);if(s(r.typeIdField,i.name))return await Promise.resolve(!1);if(s(r.subtypeField,i.name))return await Promise.resolve(!1);if(r.timeInfo&&(s(r.timeInfo.startField,i.name)||s(r.timeInfo.endField,i.name)||s(r.timeInfo.trackIdField,i.name)))return await Promise.resolve(!1);if(!a?.ignoreLayerFeatureReduction&&r.featureReduction){const e=await(0,n.aD)(),t=new Set;await e.collectFeatureReductionFields(t,r,r.featureReduction);if(Array.from(t).some((e=>s(e,i.name))))return await Promise.resolve(!1)}if(!a?.ignoreLayerRenderer){if((await d.getRendererFields(r.renderer,r.fieldsIndex)).some((e=>s(e,i.name))))return await Promise.resolve(!1)}if(!a?.ignoreLayerLabelingInfo){const e=r.labelingInfo?.map((e=>e.labelExpressionInfo?.expression));if(e){if((await d.getExpressionFields(r,e)).some((e=>s(e,i.name))))return await Promise.resolve(!1);if(await m(r,i,"layer"))return await Promise.resolve(!1)}}if(!a?.ignoreLayerDefinitionExpression&&r.definitionExpression){const e=await(0,n.C)();if((await e.parseWhereClause(r.definitionExpression,r.fieldsIndex)).fieldNames.some((e=>s(e,i.name))))return await Promise.resolve(!1)}const y=await async function(e,r,i){const t=e.portalItem;if(!t)return await Promise.resolve(!1);const a=`${(0,o.g)(t.portal)}content/items/${t.id}/data`,l=await(0,n.p)(),u=i?.userItemInfo?.itemData??await l(a,{query:{f:"json"},responseType:"json"}),m=u?.data;if(!m)return await Promise.resolve(!1);if(m?.layers){const[t,a]=await Promise.all([(0,n.aD)(),(0,n.aE)()]),o=m.layers.find((r=>r.id===e.layerId)),l=o?.layerDefinition?.drawingInfo?.renderer,u=o?.layerDefinition?.featureReduction,f=o?.layerDefinition?.definitionExpression;if(!l&&!u&&!f)return await Promise.resolve(!1);if(!i?.ignoreItemRenderer&&l){const i=a.fromJSON(l);if((await t.getRendererFields(i,e.fieldsIndex)).some((e=>s(e,r.name))))return await Promise.resolve(!0)}if(!i?.ignoreItemFeatureReduction&&u){if(await c(e,r,u))return await Promise.resolve(!0)}if(f){const i=await(0,n.C)();if((await i.parseWhereClause(f,e.fieldsIndex)).fieldNames.some((e=>s(e,r.name))))return await Promise.resolve(!0)}}return await Promise.resolve(!1)}(r,i,a);if(y)return await Promise.resolve(!1);const g=await async function(e,r){const i=e.sourceJSON,t=i?.drawingInfo?.renderer,a=i?.featureReduction;if(!t&&!a)return await Promise.resolve(!1);const[o,l]=await Promise.all([(0,n.aD)(),(0,n.aE)()]);if(t){const i=l.fromJSON(t);if((await o.getRendererFields(i,e.fieldsIndex)).some((e=>s(e,r.name))))return await Promise.resolve(!0)}if(a){if(await c(e,r,a))return await Promise.resolve(!0)}return await Promise.resolve(!1)}(r,i);if(g)return await Promise.resolve(!1);const I=await async function(e,r){const i=e.sourceJSON,t=i?.drawingInfo?.labelingInfo;if(!t)return await Promise.resolve(!1);const a=await(0,n.aD)(),o=t?.map((e=>e.labelExpressionInfo?.expression));if(o){if((await a.getExpressionFields(e,o)).some((e=>s(e,r.name))))return await Promise.resolve(!0);if(await m(e,r,"service"))return await Promise.resolve(!0)}return await Promise.resolve(!1)}(r,i);if(I)return await Promise.resolve(!1);const h=await async function(e,r){const i=e.sourceJSON,t=i?.definitionQuery;if(!t)return await Promise.resolve(!1);const a=await(0,n.C)(),o=await a.parseWhereClause(t,e.fieldsIndex),l=o.fieldNames.some((e=>s(e,r.name)));if(l)return await Promise.resolve(!0);return await Promise.resolve(!1)}(r,i);if(h)return await Promise.resolve(!1);const F=function(e,r,i){if(!e)return!1;const t=e.map?.applicationProperties?.viewing?.search;if(t){const e=t.layers?.find((e=>e.id===r.id));if(e){const r=e?.field?.name;if(r)return s(r,i.name)}}return!1}(e,r,i);if(F)return await Promise.resolve(!1);const S=r.relationships,b=S?.map((e=>e.keyField)),x=b?.some((e=>s(e,i.name)));if(x)return await Promise.resolve(!1);const N=(0,t.u)(u,u.portal.user),_=a?.userItemInfo?.userGroups??await(0,t.b)(r)??[],C=a?.userItemInfo?.itemGroups??await(0,t.c)(r)??[],D=(0,t.d)(_,C);if(!N&&!D)return await Promise.resolve(!1);const R=a?.userItemInfo?.relatedItems??await(0,t.g)(u.id,u.portal,{relationshipType:"Service2Service"});if(R?.data?.relatedItems){if(R.data.relatedItems.some((e=>["WMTS","Map Service","Vector Tile Service"].includes(e.type))))return await Promise.resolve(!1)}return await Promise.resolve(!0)}async function m(e,r,i){const t=await(0,n.C)(),o="layer"===i?e.labelingInfo?.filter((e=>(0,a.i)(e.where))):e.sourceJSON?.drawingInfo?.labelingInfo?.filter((e=>(0,a.i)(e.where)));if(!o?.length)return await Promise.resolve(!1);const l=[...await Promise.all(o.map((async r=>r.where?await t.parseWhereClause(r.where,e.fieldsIndex):void await Promise.resolve())))];let u=!1;for(let e=0;e<l.length;e++){const i=l[e].fieldNames?.some((e=>s(e,r.name)));if(!u&&i){u=!0;break}}return await Promise.resolve(u)}async function c(e,r,i){const[t,a,o]=await Promise.all([(0,n.aF)(),(0,n.aG)(),(0,n.aD)()]),l="binning"===i.type?t.fromJSON(i):a.fromJSON(i),u=new Set;await o.collectFeatureReductionFields(u,e,l);return Array.from(u).some((e=>s(e,r.name)))?await Promise.resolve(!0):await Promise.resolve(!1)}}}]);