/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ca7ba6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ca7ba6"],{47640:(t,e,i)=>{i.d(e,{YZ:()=>o});var s=i(50738);const r=Symbol();class o{get taskComplete(){return this.t||(1===this.i?this.t=new Promise(((t,e)=>{this.o=t,this.h=e})):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,e,i){this.p=0,this.i=0,(this._=t).addController(this);const s="object"==typeof e?e:{task:e,args:i};this.v=s.task,this.j=s.args,this.m=s.argsEqual??a,this.k=s.onComplete,this.A=s.onError,this.autoRun=s.autoRun??!0,"initialValue"in s&&(this.u=s.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),e=this.O;this.O=t,t===e||void 0===t||void 0!==e&&this.m(e,t)||await this.run(t)}async run(t){let e,i;t??=this.T(),this.O=t,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask((()=>this._.requestUpdate())):this._.requestUpdate();const s=++this.p;this.q=new AbortController;let o=!1;try{e=await this.v(t,{signal:this.q.signal})}catch(t){o=!0,i=t}if(this.p===s){if(e===r)this.i=0;else{if(!1===o){try{this.k?.(e)}catch{}this.i=2,this.o?.(e)}else{try{this.A?.(i)}catch{}this.i=3,this.h?.(i)}this.u=e,this.l=i}this._.requestUpdate()}}abort(t){1===this.i&&this.q?.abort(t)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){switch(this.i){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const a=(t,e)=>t===e||t.length===e.length&&t.every(((t,i)=>!(0,s.Ec)(t,e[i])))},51546:(t,e,i)=>{function s(t){return null!=t}function r(t,e){const i=e.startsWith("#"),s=e.startsWith(".");for((s||i)&&(e=e.slice(1));t;){if(i){if(t.id===e)return t}else if(s){if(t.classList.contains(e))return t}else if(t.tagName.toLowerCase()===e.toLowerCase())return t;t=t.parentElement??t.getRootNode()?.host??void 0}}async function o(t,e){return"feature"!==t.type||t.url?"feature"===t.type||"csv"===t.type||"scene"===t.type||"wfs"===t.type||"geojson"===t.type||"oriented-imagery"===t.type||"subtype-group"===t.type||"subtype-sublayer"===t.type||"catalog"===t.type||"catalog-footprint"===t.type?await t.queryFeatureCount():!e||"stream"!==t.type&&"ogc-feature"!==t.type?await Promise.reject(new Error(`Can't get feature count for layer of type ${t.type}.`)):await async function(t,e){return await(await e.whenLayerView(t)).queryFeatureCount()}(t,e):await async function(t){const e=t.createQuery();e.outFields=["*"];const i=await t.queryFeatures(e);if(i.features?.length)return i.features.length;throw new Error("could not get feature count")}(t)}i.d(e,{g:()=>o,i:()=>s,q:()=>r})},70757:(t,e,i)=>{i.d(e,{_:()=>u,K:()=>v});var s=i(85282),r=i(42466),o=i(34670);const a=(t,e)=>{const i=t._$AN;if(void 0===i)return!1;for(const t of i)t._$AO?.(e,!1),a(t,e);return!0},n=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===i?.size)},h=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),d(e)}};function c(t){void 0!==this._$AN?(n(this),this._$AM=t,h(this)):this._$AM=t}function l(t,e=!1,i=0){const s=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(s))for(let t=i;t<s.length;t++)a(s[t],!1),n(s[t]);else null!=s&&(a(s,!1),n(s));else a(this,t)}const d=t=>{t.type==o.OA.CHILD&&(t._$AP??=l,t._$AQ??=c)};class p extends o.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),h(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(a(this,t),n(this))}setValue(t){if((0,r.Rt)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const u=()=>new g;class g{}const f=new WeakMap,v=(0,o.u$)(class extends p{render(t){return s.s6}update(t,[e]){const i=e!==this.G;return i&&void 0!==this.G&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),s.s6}rt(t){if(this.isConnected||(t=void 0),"function"==typeof this.G){const e=this.ht??globalThis;let i=f.get(e);void 0===i&&(i=new WeakMap,f.set(e,i)),void 0!==i.get(this.G)&&this.G.call(this.ht,void 0),i.set(this.G,t),void 0!==t&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return"function"==typeof this.G?f.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})},78827:(t,e,i)=>{i.d(e,{C:()=>s});const s={arcgisAppCkeditor:"arcgis-app-ckeditor",arcgisAppCkeditorMentionHeader:"arcgis-app-ckeditor-mention-header",arcgisAppCkeditorMentionItem:"arcgis-app-ckeditor-mention-item",arcgisAppCkeditorMentionItemContainer:"arcgis-app-ckeditor-mention-item-container",arcgisAppCkeditorPopoverContainer:"arcgis-app-ckeditor-popover-container",arcgisAppCkeditorPopoverFooter:"arcgis-app-ckeditor-popover-footer",popover:"popover"}},80648:(t,e,i)=>{i.r(e),i.d(e,{ArcgisCkeditor5Popover:()=>p});var s=i(6364),r=i(85282),o=i(61833),a=i(70757),n=i(47640),h=i(91021),c=i(51546),l=i(78827);const d=i(55088).AH`.arcgis-app-ckeditor-popover-footer{display:flex;justify-content:flex-end;margin-top:var(--calcite-spacing-sm);padding:0 var(--calcite-spacing-lg)}.arcgis-app-ckeditor-popover-container{margin:0 var(--calcite-spacing-md) 0 0;padding-bottom:var(--calcite-spacing-lg);box-shadow:val(--calcite-shadow-1)}.popover{--calcite-popover-z-index: 100}`;class p extends o.WF{constructor(){super(),this.okButton=(0,a._)(),this.popoverNode=(0,a._)(),this._propWatcherTask=new n.YZ(this,{task:async([t])=>{if(!(0,c.i)(t))throw console.error("Required properties are missing."),new Error},args:()=>[this.refElement]}),this.guid=(0,h.DA)(),this.intlOk="Ok",this.intlCancel="Cancel",this.arcgisCkeditor5PopoverClosed=(0,o.lh)(),this.arcgisPopoverClosed=(0,o.lh)(),this.listen("arcgisCreated",this.afterEditorCreated),this.listen("arcgisSourceEditingChanged",this.onSourceEditingStatusChanged)}static{this.properties={guid:1,refElement:0,intlOk:1,intlCancel:1,intlLabel:1}}static{this.styles=d}async reposition(){this.popoverNode.value?.reposition()}afterEditorCreated(t){this.editor=t.target,this.reposition(),this.requestUpdate()}onSourceEditingStatusChanged(t){this.okButton.value&&(this.okButton.value.disabled=t.detail)}render(){return this._propWatcherTask.render({complete:()=>r.qy`<calcite-popover class=${`${l.C.popover} js-app-flyout`} dir=${(0,h.O)(this.el)??o.s6} placement=leading-start open pointer-disabled .referenceElement=${this.refElement} .offsetDistance=${-Math.round(this.refElement.getBoundingClientRect().width)} offset-skidding=50 .label=${this.intlLabel??""} focus-trap-disabled trigger-disabled ${(0,a.K)(this.popoverNode)}><div class=${(0,o.CP)(l.C.arcgisAppCkeditorPopoverContainer)}><slot></slot><div class=${(0,o.CP)(l.C.arcgisAppCkeditorPopoverFooter)}><calcite-button .label=${this.intlOk} @click=${async t=>{this.okButton.value?.disabled||(t.stopPropagation(),this.arcgisCkeditor5PopoverClosed.emit({guid:this.guid,data:await(this.editor?.getData())}),this.arcgisPopoverClosed.emit({guid:this.guid,data:await(this.editor?.getData())}))}} ${(0,a.K)(this.okButton)}>${this.intlOk}</calcite-button><calcite-button appearance=outline-fill .label=${this.intlCancel} @click=${t=>{t.stopPropagation(),this.arcgisCkeditor5PopoverClosed.emit({guid:this.guid}),this.arcgisPopoverClosed.emit({guid:this.guid})}}>${this.intlCancel}</calcite-button></div></div></calcite-popover>`})}}(0,s.c)("arcgis-ckeditor5-popover",p)}}]);