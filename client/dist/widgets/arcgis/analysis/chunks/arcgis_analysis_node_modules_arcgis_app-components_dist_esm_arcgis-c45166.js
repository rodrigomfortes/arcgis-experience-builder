/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c45166.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c45166"],{80150:(t,i,e)=>{e.r(i),e.d(i,{arcgis_item_classification_header_help_tooltip:()=>r,arcgis_item_classification_input_checkbox:()=>n,arcgis_item_classification_input_date:()=>c,arcgis_item_classification_input_grouped_multiple_selection:()=>h,arcgis_item_classification_input_multiple_selection:()=>u,arcgis_item_classification_input_single_selection:()=>d,arcgis_item_classification_input_textbox:()=>f,classification_favorite:()=>b,item_classification_content:()=>m,item_classification_info:()=>v});var a=e(87849),s=e(29828),o=e(87744),l=e(59317);e(931),e(93814),e(50637),e(37762);const r=class{constructor(t){(0,a.r)(this,t),this.renderTooltipLink=()=>this.helpUrl?(0,a.h)("calcite-link",{href:this.helpUrl,target:"_blank",id:"tooltip-button"},this.helpTooltip):this.helpTooltip,this.helpUrl=void 0,this.helpTooltip=void 0}render(){return(0,a.h)("arcgis-information",{key:"093b68dd2bda00e995a9963453b4b78ccbd6c99b",label:this.helpTooltip,paddedContent:!0,placement:"bottom-end",overlayPositioning:"fixed",class:"header-help-tooltip"},this.renderTooltipLink())}};r.style=".header-help-tooltip{margin:1rem}";const n=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.toggleAttribute=t=>{t.currentTarget.checked?(this.itemClassificationValue[this.attributeId]=t.currentTarget.checked,this.itemClassificationValueWithDefaults[this.attributeId]=t.currentTarget.checked):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelClass=this.attributeId,this.attributeLabel=null===(t=this.attributeValue)||void 0===t?void 0:t.label,this.attributeIsRequired=!!(null===(i=this.attributeValue)||void 0===i?void 0:i.isRequired),this.isChecked=!!(null===(e=this.itemClassificationValueWithDefaults)||void 0===e?void 0:e[this.attributeId]);const{invalid:a,errorMsg:o}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=a,this.errorMsg=o}render(){return(0,a.h)("div",{key:"db9b50bd77cfe0f40f75b64ef62a7289e7a7f7b7",class:"classification-checkbox"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId,layout:"inline"},(0,a.h)("calcite-checkbox",{key:"3a1a672f8543626b4c8e87a41c4aca4b13016b50",id:this.attributeId,name:this.attributeLabel,scale:"m",checked:this.isChecked,onCalciteCheckboxChange:this.toggleAttribute,disabled:this.isSaving,required:this.attributeIsRequired,status:this.invalid?"invalid":"idle"}),this.attributeLabel,this.invalid&&(0,a.h)("calcite-input-message",{key:"842b24f695a6193be4645f56dcc053cacdf7a8ab",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg)))}static get watchers(){return{inputData:["loadAttributes"]}}};n.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const c=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.onDateChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelClass=this.attributeId,this.attributeLabel=null===(t=this.attributeValue)||void 0===t?void 0:t.label,this.attributeIsRequired=!!(null===(i=this.attributeValue)||void 0===i?void 0:i.isRequired),this.currentInputValue=null!==(a=null===(e=this.itemClassificationValueWithDefaults)||void 0===e?void 0:e[this.attributeId])&&void 0!==a?a:(0,s.u)(s.i.itemClassificationSchema.attributes[this.attributeId]);const{invalid:o,errorMsg:l}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=o,this.errorMsg=l}disconnectedCallback(){const{itemClassificationValue:t}=s.i;delete t[this.attributeId],s.i.itemClassificationValue=t}render(){return(0,a.h)("div",{key:"c7c63132b8252826313b501e89b2293edfd97a60",class:"classification-date"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId},this.attributeLabel,(0,a.h)("div",{key:"c42c2149534d9c4eaec8015e09fe76d9d4af85b2",class:this.labelClass},(0,a.h)("calcite-input-date-picker",{key:"0844c95df87344e9458cfb47582c5b852eb9ac7b",id:this.attributeId,name:this.attributeLabel,value:this.currentInputValue,onCalciteInputDatePickerChange:this.onDateChange,disabled:this.isSaving,status:this.invalid?"invalid":"idle",required:this.attributeIsRequired,overlayPositioning:"fixed"}),this.invalid&&(0,a.h)("calcite-input-message",{key:"79a126eb17e2606e37f55595f623d8f6b949d105",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg))))}static get watchers(){return{inputData:["loadAttributes"]}}};c.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const h=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{let t=[];for(const i in this.valueExpressionResult){const e=this.valueExpressionResult[i],s=(0,a.h)("calcite-combobox-item",{textLabel:i,value:i,key:i},e.map((({label:t,value:i})=>{var e;const s=!!(null===(e=this.selectedValues)||void 0===e?void 0:e.includes(i));return(0,a.h)("calcite-combobox-item",{key:t,textLabel:t,value:i,selected:s})})));t=[...t,structuredClone(s)]}return t},this.onAttributesChange=t=>{const i=t.currentTarget.selectedItems.length,e=t.currentTarget.value;0===i?(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]):1===i?(this.itemClassificationValue[this.attributeId]=[e],this.itemClassificationValueWithDefaults[this.attributeId]=[e]):i>1&&(this.itemClassificationValue[this.attributeId]=[...e],this.itemClassificationValueWithDefaults[this.attributeId]=[...e]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.valueExpressionResult=this.inputData.valueExpressionResult,this.attributeIsRequired=!!(null===(t=this.attributeValue)||void 0===t?void 0:t.isRequired),this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.selectedValues=this.itemClassificationValueWithDefaults[this.attributeId];const{invalid:e,errorMsg:a}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=e,this.errorMsg=a}render(){return(0,a.h)("div",{key:"6e6db698c3f1f274e75a773aa500c375b3a8c9da",class:"classification-multiple-group-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"b62c3ecb4eb55ddcc9294e340777764ed01aebde",id:this.attributeId,label:this.i18n.multipleSelectionLabel,selectionMode:"multiple",scale:"m",onCalciteComboboxChange:this.onAttributesChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:this.i18n.selectOptions,overlayPositioning:"fixed",status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};h.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const u=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{var t;return Array.isArray(this.valueExpressionResult)?null===(t=this.valueExpressionResult)||void 0===t?void 0:t.map((({label:t,value:i})=>{var e;const s=!!(null===(e=this.selectedValues)||void 0===e?void 0:e.includes(i));return(0,a.h)("calcite-combobox-item",{id:t,selected:s,key:t,value:i,textLabel:t})})):[]},this.onAttributesChange=t=>{const i=t.currentTarget.selectedItems.length,e=t.currentTarget.value;0===i?(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]):1===i?(this.itemClassificationValue[this.attributeId]=[e],this.itemClassificationValueWithDefaults[this.attributeId]=[e]):i>1&&(this.itemClassificationValue[this.attributeId]=[...e],this.itemClassificationValueWithDefaults[this.attributeId]=[...e]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a,o,l;this.attributeValue=null===(t=this.inputData)||void 0===t?void 0:t.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=null===(i=this.inputData)||void 0===i?void 0:i.attributeId,this.valueExpressionResult=null===(e=this.inputData)||void 0===e?void 0:e.valueExpressionResult,this.attributeIsRequired=!!(null===(a=this.attributeValue)||void 0===a?void 0:a.isRequired),this.attributeLabel=null===(o=this.attributeValue)||void 0===o?void 0:o.label,this.selectedValues=null===(l=this.itemClassificationValueWithDefaults)||void 0===l?void 0:l[this.attributeId];const{invalid:r,errorMsg:n}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=r,this.errorMsg=n}render(){return(0,a.h)("div",{key:"7cc4d5f22ede9b03bc47b83abd2d3e138b93b56e",class:"classification-multiple-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"14fe2b8e64e283642077033043957ae34285c653",id:this.attributeId,label:this.i18n.multipleSelectionLabel,overlayPositioning:"fixed",selectionMode:"multiple",scale:"m",onCalciteComboboxChange:this.onAttributesChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:this.i18n.selectOptions,status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};u.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const d=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{var t;return Array.isArray(this.valueExpressionResult)?null===(t=this.valueExpressionResult)||void 0===t?void 0:t.map((({label:t,value:i})=>{var e;const s=!!(null===(e=this.selectedValues)||void 0===e?void 0:e.includes(i));return(0,a.h)("calcite-combobox-item",{id:t,selected:s,key:t,value:i,textLabel:t})})):[]},this.onAttributeChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.valueExpressionResult=this.inputData.valueExpressionResult,this.attributeIsRequired=!!(null===(t=this.attributeValue)||void 0===t?void 0:t.isRequired),this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.selectedValues=this.itemClassificationValueWithDefaults[this.attributeId];const{invalid:e,errorMsg:a}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=e,this.errorMsg=a}render(){return(0,a.h)("div",{key:"303c8e05601b5c307800f1dce014f4164c28091f",class:"classification-single-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"be340cf7ab5f6da349823467c2a03577571508c5",id:this.attributeId,label:this.i18n.singleSelectionLabel,selectionMode:"single",scale:"m",onCalciteComboboxChange:this.onAttributeChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:this.i18n.selectAnOption,overlayPositioning:"fixed",status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};d.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const f=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.getAttributeType=t=>{const i=null==t?void 0:t.type;return"string"===i?"text":["integer","float"].includes(i)?"number":"date"===i?"date":"text"},this.onAttributeChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a,o;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelTooltip=null===(t=this.attributeValue)||void 0===t?void 0:t.labelTooltip,this.labelClass=this.attributeId,this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.attributeDesc=null===(e=this.attributeValue)||void 0===e?void 0:e.description,this.attributeIsRequired=!!(null===(a=this.attributeValue)||void 0===a?void 0:a.isRequired),this.currentInputValue=null===(o=this.itemClassificationValueWithDefaults)||void 0===o?void 0:o[this.attributeId],this.attributeType=this.getAttributeType(this.attributeValue);const{invalid:l,errorMsg:r}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=l,this.errorMsg=r}render(){return(0,a.h)("div",{key:"10b09f29e879d80fed7dc30016c0f1fb4e8e0a02",class:"classification-textbox"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId,id:`${this.attributeId}-label`},(0,a.h)("arcgis-item-classification-attribute-tooltip",{key:"38e9c297dcb0e8240e6cf674b4a5eff322896b4d",attributeId:this.attributeId,label:this.attributeLabel,labelTooltip:this.labelTooltip}),(0,a.h)("div",{key:"449f6c2cde32c172454f4efe6708cf83376e9b54",class:this.labelClass},(0,a.h)("calcite-input",{key:"4a6332413b4807e2ff12f4323e70a0d7a16f7cca",id:this.attributeId,name:this.attributeLabel,scale:"m",type:this.attributeType,value:this.currentInputValue,numberButtonType:"vertical",placeholder:this.attributeDesc,onCalciteInputInput:this.onAttributeChange,disabled:this.isSaving,status:this.invalid?"invalid":"idle",required:this.attributeIsRequired}),this.invalid&&(0,a.h)("calcite-input-message",{key:"4d3e8ca055f2db5c22d82aeb850ffea678708f8b",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg))))}static get watchers(){return{inputData:["loadAttributes"]}}};f.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const b=class{constructor(t){(0,a.r)(this,t),this.selectedFavoriteClassificationChange=(0,a.c)(this,"selectedFavoriteClassificationChange",7),this.favoriteClassificationChange=(0,a.c)(this,"favoriteClassificationChange",7),this.selectFavoriteClassification=t=>{const i=t.target.value;if(i){this.hasUpdateError=!1;const t=this.favoriteClassifications.find((({name:t})=>t===i));this.selectedFavoriteClassificationChange.emit(t)}},this.uploadFavoriteClassificationValueHandle=async t=>{const{error:i}=await(0,s.w)(`${(0,o.g)(l.c.portal)}community/users/${l.c.user.username}/addResource`,this.favoriteClassifications);i?this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:this.i18n.uploadClassificationFavoriteError}):this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"success",alertIndicatorIcon:"check",alertIndicatorInfo:t})},this.retrieveFavoriteClassificationHandle=async()=>{const{result:t,error:i}=await(0,s.a)(`${(0,o.g)(l.c.portal)}community/users/${l.c.user.username}/resources/classification_favorites`);i?this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:this.i18n.retrieveClassificationFavoriteError}):this.favoriteClassificationChange.emit(t.favorites)},this.openSaveNewFavoriteDialog=()=>{this.showSaveClassificationDialog=!0},this.closeSaveClassificationDialog=t=>{t.stopPropagation(),this.showSaveClassificationDialog=!1},this.changeFavoriteClassificationName=t=>{const i=t.target.value;this.newFavoriteClassificationName=i,this.hasDuplicatedClassificationError=this.favoriteClassifications.some((t=>t.name===i))},this.saveNewFavoriteClassification=async()=>{const t=this.newFavoriteClassificationName;if(this.favoriteClassifications.some((i=>i.name===t)))return void(this.hasDuplicatedClassificationError=!0);const i=await(0,s.l)(this.itemClassificationSchema,this.classificationValue),e={name:t,classification:i};this.favoriteClassifications=[...this.favoriteClassifications,e],await this.uploadFavoriteClassificationValueHandle(this.i18n.addClassificationFavoriteSuccessMessage),await this.retrieveFavoriteClassificationHandle(),this.showSaveClassificationDialog=!1},this.updateFavoriteClassification=async()=>{this.selectedFavoriteClassificationName?(await this.addFavoriteClassification(this.selectedFavoriteClassificationName),await this.retrieveFavoriteClassificationHandle()):this.hasUpdateError=!0},this.addFavoriteClassification=async t=>{const i=await(0,s.l)(this.itemClassificationSchema,this.classificationValue),e={name:t,classification:i},a=this.favoriteClassifications.findIndex((i=>i.name===t));a?this.favoriteClassifications[a].classification=i:this.favoriteClassifications=[...this.favoriteClassifications,e],await this.uploadFavoriteClassificationValueHandle(this.i18n.updateClassificationFavoriteSuccessMessage)},this.openManageClassificationDialog=()=>{this.showManageClassificationDialog=!0},this.closeManageClassificationDialog=t=>{t.stopPropagation(),this.showManageClassificationDialog=!1},this.removeFavoriteClassification=async t=>{this.favoriteClassifications=this.favoriteClassifications.filter((i=>i.name!==t)),0===this.favoriteClassifications.length&&(this.showManageClassificationDialog=!1),await this.uploadFavoriteClassificationValueHandle(this.i18n.removeClassificationFavoriteSuccessMessage),await this.retrieveFavoriteClassificationHandle()},this.handleDisplayNotificationModal=t=>{this.alertIndicator=t,this.isNotificationModalActive=!0},this.handleCloseNotificationModal=()=>this.isNotificationModalActive=!1,this.i18n=void 0,this.itemClassificationSchema=void 0,this.classificationValue=void 0,this.favoriteClassifications=void 0,this.currSelectionText="",this.selectedFavoriteClassificationName="",this.newFavoriteClassificationName=this.currSelectionText,this.showManageClassificationDialog=!1,this.showSaveClassificationDialog=!1,this.hasDuplicatedClassificationError=!1,this.hasUpdateError=!1,this.alertIndicator={alertIndicatorActive:!1,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:""},this.isNotificationModalActive=!1}currentSelectionTextChanged(){this.newFavoriteClassificationName=this.currSelectionText}render(){return(0,a.h)(a.F,{key:"657071ec1a14174a919fdc661f64d5cfeafdb4ea"},this.favoriteClassifications.length>0?(0,a.h)(a.F,null,(0,a.h)("calcite-label",null,(0,a.h)("div",{class:"select-favorite-label"},this.i18n.applyClassificationFavoriteLabel,(0,a.h)("calcite-link",{onClick:this.openManageClassificationDialog},this.i18n.manageClassificationFavoriteBtn)),(0,a.h)("calcite-combobox",{label:"select-calcite-combobox",selectionMode:"single",placeholder:this.i18n.selectFavoritePlaceholder,placeholderIcon:"folder-star",onCalciteComboboxChange:this.selectFavoriteClassification,status:this.hasUpdateError?"invalid":"idle",validationIcon:this.hasUpdateError?"exclamation-mark-triangle":"",validationMessage:this.hasUpdateError?this.i18n.updateWarning:""},this.favoriteClassifications.map((({name:t})=>(0,a.h)("calcite-combobox-item",{key:t,selected:this.selectedFavoriteClassificationName===t,icon:"folder-star",value:t,textLabel:t}))))),(0,a.h)("div",{class:"favorite-actions"},(0,a.h)("calcite-link",{iconStart:"refresh",onClick:this.updateFavoriteClassification},this.i18n.updateClassificationFavoriteBtn),(0,a.h)("calcite-link",{iconStart:"star",onClick:this.openSaveNewFavoriteDialog},this.i18n.saveNewClassificationBtn))):(0,a.h)("div",{class:"save-new-favorite-button"},(0,a.h)("calcite-link",{iconStart:"folder-star",onClick:this.openSaveNewFavoriteDialog},this.i18n.saveNewClassificationFavoriteBtn)),(0,a.h)("calcite-dialog",{key:"c48ed529b44a10db42a252356ec00cf6aeed188b",class:"classification-favorite-dialog",overlayPositioning:"fixed",heading:this.i18n.manageClassificationFavoriteLabel,open:this.showManageClassificationDialog,modal:!0,placement:"center",scale:"m",outsideCloseDisabled:!0,onCalciteDialogClose:this.closeManageClassificationDialog},(0,a.h)("calcite-list",{key:"697aa3044299f6daac56caca61942062b5f66b0b",class:"classification-favorite-list",label:"classification-favorite-dialog-content",selectionAppearance:"border",selectionMode:"single-persist"},this.favoriteClassifications.map((({name:t})=>(0,a.h)("calcite-list-item",{key:t,label:t,value:t,class:"classification-favorite-item"},(0,a.h)("div",{slot:"content-end"},(0,a.h)("calcite-icon",{icon:"trash",scale:"s",onClick:()=>this.removeFavoriteClassification(t)})))))),(0,a.h)("calcite-button",{key:"8d295a6e7ecbaede4aa5b62965966c9aed746744",slot:"footer-end",scale:"l",onClick:()=>this.showManageClassificationDialog=!1},(0,a.h)("div",{key:"4b2265a25a60f2ca101b804fbe6ec6e0d4b241cf"},this.i18n.favoriteClassificationBtnDone))),(0,a.h)("calcite-dialog",{key:"1a7f7439973cc8e188100343cda6d1a53223bb9e",class:"classification-favorite-dialog",overlayPositioning:"fixed",heading:this.i18n.addFavoriteDialogHeading,open:this.showSaveClassificationDialog,modal:!0,placement:"center",scale:"m",outsideCloseDisabled:!0,onCalciteDialogClose:this.closeSaveClassificationDialog},(0,a.h)("calcite-label",{key:"215453b13fc815a6b3bc67e691c2b9628b633b66",class:"classification-favorite-input-section"},this.i18n.addClassificationFavorite,(0,a.h)("calcite-input",{key:"799539be770e4a8293a7ee0f044504dc77420f16",id:"classification-favorite-name",name:"classification-favorite-name",scale:"m",value:this.newFavoriteClassificationName,onCalciteInputInput:this.changeFavoriteClassificationName,status:this.hasDuplicatedClassificationError?"invalid":"idle"}),this.hasDuplicatedClassificationError&&(0,a.h)("calcite-input-message",{key:"f4bcc4d62dc9a7be68a70d6e2322a8200bced582",icon:"exclamation-mark-triangle",status:"invalid"},this.i18n.duplicatedClassificationError)),(0,a.h)("calcite-button",{key:"20f611f01f5d4755bc6776b5116dfb8b9a858a7d",scale:"l",slot:"footer-end",onClick:this.saveNewFavoriteClassification},this.i18n.favoriteClassificationBtnDone)),this.isNotificationModalActive&&(0,a.h)("item-classification-notification",{key:"3b5b3e76f57cde9eded03e02fbe561d8f86ffb73",i18n:this.i18n,alertIndicator:this.alertIndicator,onArcgisItemClassificationNotificationClose:()=>{this.handleCloseNotificationModal()}}))}static get watchers(){return{currSelectionText:["currentSelectionTextChanged"]}}};b.style='.classification-favorite-dialog{--calcite-dialog-content-space:0;--calcite-dialog-background-color:"var(--calcite-color-foreground-2)"}.select-favorite-label{display:flex;align-items:center;justify-content:space-between}.favorite-actions{display:flex;align-items:center;justify-content:flex-end;gap:1.5rem}.save-new-favorite-button{margin-top:0.25rem;margin-bottom:1rem;display:flex;justify-content:flex-end}.classification-favorite-item{display:flex;justify-content:space-between;border-bottom-width:1px;border-color:var(--calcite-color-border-1);padding-top:0.5rem;padding-bottom:0.5rem}.classification-favorite-list,.classification-favorite-input-section{margin:1.75rem;margin-left:1rem;margin-right:1rem}';const m=class{constructor(t){(0,a.r)(this,t),this.attributeCategoryChange=(0,a.c)(this,"attributeCategoryChange",7),this.arcgisItemClassificationContentDisplayNotification=(0,a.c)(this,"arcgisItemClassificationContentDisplayNotification",7),this.attributeElementsCopy={},this.getFormDisplayOrder=t=>s.i.itemClassificationSchema.layouts.default.layoutElements[t].formDisplayOrder,this.createUIElements=async(t,i,e)=>{var a;let o;const{itemClassificationSchema:l}=s.i;if(e){const e=(null===(a=l.attributes[t])||void 0===a?void 0:a.uiElement)||"text",r=structuredClone(this.itemClassificationValue),n=structuredClone(this.itemClassificationValueWithDefaults),{classificationErrors:c}=s.i;if(e.includes("-select"))try{const a=await(0,s.x)(t,l,n);"multi-select"===e?o=this.renderMultiSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}):["multi-grouped-select","multi-grouped-select-nested"].includes(e)?o=this.renderGroupedMultiSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}):"single-select"===e&&(o=this.renderSingleSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}))}catch(t){this.arcgisItemClassificationContentDisplayNotification.emit({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:null==t?void 0:t.message})}else"checkbox"===e?o=this.renderCheckbox({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}):"text"===e?o=this.renderInputTextBox({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}):"date"===e&&(o=this.renderDatePickerElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}));this.attributeElementsCopy=Object.assign(Object.assign({},this.attributeElementsCopy),{[t]:o}),this.attributeElements=structuredClone(this.attributeElementsCopy)}},this.renderGroupedMultiSelectElement=t=>(0,a.h)("arcgis-item-classification-input-grouped-multiple-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderSingleSelectElement=t=>(0,a.h)("arcgis-item-classification-input-single-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderCheckbox=t=>(0,a.h)("arcgis-item-classification-input-checkbox",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderInputTextBox=t=>(0,a.h)("arcgis-item-classification-input-textbox",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderDatePickerElement=t=>(0,a.h)("arcgis-item-classification-input-date",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.handleCategorySelectChange=t=>{this.attributeCategoryChange.emit(t.currentTarget.selectedItems[0].value)},this.renderCategoryTabs=()=>(0,a.h)("calcite-list",{label:"attribute-category-select",selectionAppearance:"border",selectionMode:"single-persist",onCalciteListChange:this.handleCategorySelectChange},s.i.itemClassificationSchema.attributeCategories.map((t=>{const{requiredError:i,conflictsError:e}=s.i.classificationErrors,o=i.filter((i=>i.attributeCategory===t)).length+e.filter((i=>i.attributeCategory===t)).length;return(0,a.h)("calcite-list-item",{key:t,label:t,value:t,selected:this.attributeCategory===t,description:(0,s.y)(t,s.i.classificationErrors)?`${o} ${o>1?"errors":"error"}`:void 0},(0,s.y)(t,s.i.classificationErrors)&&(0,a.h)("div",{slot:"content-end",class:"danger"},(0,a.h)("calcite-icon",{icon:"exclamation-mark-triangle",scale:"s"})))}))),this.renderValidationErrors=(t,i)=>{const{requiredError:e,conflictsError:s}=i;return(e.length||s.length)&&(!t||e.some((i=>t===i.attributeCategory))||s.some((i=>t===i.attributeCategory)))?(0,a.h)("calcite-notice",{open:!0,icon:"exclamation-mark-triangle",class:"error-content",kind:"danger"},(0,a.h)("div",{slot:"message"},(0,a.h)("span",{class:"error-spacing"},this.i18n.consolidatedError))):null},this.renderCategoryContent=()=>{var t,i,e;return(0,a.h)(a.F,null,this.renderValidationErrors(this.attributeCategory,s.i.classificationErrors),null===(e=null===(t=this.classificationContentArr)||void 0===t?void 0:t[null!==(i=this.attributeCategory)&&void 0!==i?i:"Default"])||void 0===e?void 0:e.map((t=>(0,a.h)("div",{id:this.attributeCategory,key:this.attributeCategory,class:"Default"!==this.attributeCategory?"classification-input-element":""},t))))},this.i18n=void 0,this.primaryAttribute=void 0,this.currSelectionText=void 0,this.itemClassificationValue=void 0,this.itemClassificationValueWithDefaults=void 0,this.attributeCategory=void 0,this.hasError=void 0,this.isSaving=void 0,this.attributeElements=null,this.classificationContentArr=null}componentWillLoad(){this.createClassificationContent()}errorCheckingHandler(){this.createClassificationContent()}async createClassificationContent(){var t;const{itemClassificationSchema:i,selectedFavoriteClassificationName:e,favoriteClassifications:o}=s.i;this.attributeElementsCopy={favorite:(0,a.h)("classification-favorite",{i18n:this.i18n,itemClassificationSchema:i,classificationValue:this.itemClassificationValueWithDefaults,favoriteClassifications:o,currSelectionText:this.currSelectionText,selectedFavoriteClassificationName:e})};const l=Object.entries(i.attributes).sort((([t],[i])=>this.getFormDisplayOrder(t)-this.getFormDisplayOrder(i)));for(let e in l){const a=l[e][0],o=l[e][1];if(null===(t=i.layouts.default.layoutElements)||void 0===t?void 0:t[a])try{const t=await(0,s.z)(a,i,this.itemClassificationValueWithDefaults);this.createUIElements(a,o,t)}catch(t){this.arcgisItemClassificationContentDisplayNotification.emit({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:null==t?void 0:t.message});break}}}handleAttributeElementsChange(){const t=t=>{var i,e;const a={};this.attributeCategory&&t.attributeCategories.forEach((t=>a[t]=[])),a.Default=[];const s=null!==(e=null===(i=t.attributeCategories)||void 0===i?void 0:i[0])&&void 0!==e?e:"Default";a[s].push(this.attributeElements.favorite);const o=Object.entries(null==t?void 0:t.attributes).sort((([t],[i])=>this.getFormDisplayOrder(t)-this.getFormDisplayOrder(i)));null==o||o.forEach((([i,e])=>{var s,o,l,r,n,c;const h=this.attributeElements[i];if(h){const u=i===this.primaryAttribute?null!==(o=null===(s=t.attributeCategories)||void 0===s?void 0:s[0])&&void 0!==o?o:"Default":null!==(n=null!==(l=null==e?void 0:e.attributeCategory)&&void 0!==l?l:null===(r=t.attributeCategories)||void 0===r?void 0:r[0])&&void 0!==n?n:"Default";null===(c=a[u])||void 0===c||c.push(h)}})),this.classificationContentArr=structuredClone(a)};this.attributeElements&&t(s.i.itemClassificationSchema)}renderMultiSelectElement(t){return(0,a.h)("arcgis-item-classification-input-multiple-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving})}render(){var t;return(0,a.h)("div",{key:"c086c44ae6b5fd26f4ccfbc67ccd7e4556dd0f04",class:"item-classification-content"},(0,a.h)("div",{key:"878faf52ee56e4117df6e42d6c3245e6ac949587",class:"item-classification-form-section"},!!this.attributeCategory&&!(null===(t=this.classificationContentArr)||void 0===t?void 0:t.Default.length)&&(0,a.h)("div",{key:"2c52525e0c205acc300329453835c4258fa4f8b0",class:"form-section__sidebar"},this.renderCategoryTabs()),(0,a.h)("div",{key:"1b9e33929fbbcf90d0724f32b45a73e69f22b45a",class:"form-section__main-content"},this.renderCategoryContent())))}static get watchers(){return{hasError:["errorCheckingHandler"],itemClassificationValueWithDefaults:["createClassificationContent"],currSelectionText:["createClassificationContent"],attributeElements:["handleAttributeElementsChange"]}}};m.style=".classification-input-element{margin:0.25rem}.attribute-error-icon{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.item-classification-form-section{display:flex;border-top:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);padding:var(--calcite-spacing-sm);flex-direction:row}.form-section__sidebar{flex:1;padding:var(--calcite-spacing-sm)}.form-section__main-content{flex:3;padding:var(--calcite-spacing-sm);max-height:50vh;overflow-y:auto}.error-content{margin-bottom:1rem}.danger{color:var(--calcite-color-status-danger)}.error-spacing{margin-block-start:unset;margin-block-end:unset}";const v=class{constructor(t){(0,a.r)(this,t),this.i18n=void 0,this.primaryAttribute=void 0,this.currSelectionText=void 0}getClassificationBgmColor(t){const{itemClassificationValue:i,itemClassificationSchema:e}=s.i,a="UNCLASSIFIED"===(null==i?void 0:i[this.primaryAttribute])?null==e?void 0:e.classificationMetadata.defaultValue:null==i?void 0:i[this.primaryAttribute],o=null==e?void 0:e.classificationMetadata.classificationValueProperties.find((({value:t})=>t==a));return null==o?void 0:o[t]}render(){return(0,a.h)("div",{key:"85e0a73b39d44aba40b7a0c6cccc0e045f67fe21",class:"item-classification-info"},(0,a.h)("div",{key:"2f818aebdec640ed88fc6d1d4ba2cc0ca771e25f",id:"classification-info-label"},this.i18n.documentBannerPreview),(0,a.h)("div",{key:"d39cf673995089e73d08734b7b3374506993ea2c",id:"classification-info","aria-label":this.i18n.documentBannerPreview,style:{backgroundColor:this.getClassificationBgmColor("backgroundColor"),color:this.getClassificationBgmColor("textColor")}},this.currSelectionText))}};v.style="#classification-info{box-sizing:border-box;width:100%;left:0;text-align:center;font-family:var(--calcite-font-family);padding:var(--calcite-spacing-sm);font-size:var(--calcite-font-size);text-transform:uppercase;margin-bottom:1rem;overflow-wrap:break-word}"}}]);