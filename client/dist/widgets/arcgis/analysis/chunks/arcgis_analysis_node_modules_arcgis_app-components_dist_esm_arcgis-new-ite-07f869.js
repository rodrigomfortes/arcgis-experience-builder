/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-07f869.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-07f869"],{3826:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>i,c:()=>l,d:()=>n});const n=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=n.state,i=n.state,l=n.state},11597:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_layer_upload:()=>d});var n=a(87849),s=a(83929),i=a(59317),l=a(24869),o=a(3826),r=a(95878),c=a(45768);a(50637),a(931),a(93814),a(87744),a(37762),a(15912);const d=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.allowedExtensions=[]}componentWillLoad(){this.i18n=r.u.i18n.layerUpload;const{portal:e}=i.c,t={"Tile Package":"tileLayer","3DTiles Package":"tileLayer","Vector Tile Package":"tileLayer","Service Definition":"tileLayer","Scene Package":"sceneLayer"};switch("file"===o.a.newItemMode&&(o.a.newItemMode=t[o.a.type]),this.reset(),o.a.newItemMode){case"tileLayer":const t=o.a.tileLayerPublishType;if("tiles"===t){this.allowedExtensions=(0,s.j)(e)?["tpkx","sd"]:["tpk","tpkx","sd"];break}this.allowedExtensions="3dTiles"===t?["3tz"]:["vtpk"];break;case"sceneLayer":this.allowedExtensions=["slpk","spk"],!e.isPortal&&this.allowedExtensions.push("zip");break;default:this.allowedExtensions=[]}}async fileSelectHandler(e){var t;const a=null===(t=e.detail)||void 0===t?void 0:t.file;let n=[],s="itemProperties";const r="sceneLayer"===o.a.newItemMode;(r||"tileLayer"===o.a.newItemMode)&&(s="publishSelect");const{title:d,fileName:u,extension:f}=(0,l.s)(a);o.a.initialTitle=d,o.a.file=a,o.a.fileName=u,o.a.newItemMode="file",o.a.extension=f;const p=(0,c.f)(f);if(1===p.length){const e=p[0].type;o.a.type=e,this.newItemUpdatePage.emit(s)}else"zip"===f&&r&&(o.a.addSceneLayer=!0,o.a.type="Scene Package",n.push("File Geodatabase"),i.c.allowedItemTypes=n,this.newItemUpdatePage.emit("zipSelect"))}reset(){o.a.addSceneLayer&&(o.a.newItemMode="sceneLayer")}render(){const{i18n:e,allowedExtensions:t}=this,{portal:a,config:s,user:l,userLicensedItems:r}=i.c,c="sceneLayer"!==o.a.newItemMode||a.isPortal?e.tileLayerHeader:e.sceneLayerHeader;return(0,n.h)(n.H,{key:"dc62d3d85035181390d47b3a31011b377648a778"},(0,n.h)("arcgis-new-item-description",{key:"05b24ec0cafe97514d8134c97b9caad616cabee7",header:c}),(0,n.h)("arcgis-file-browser",{key:"a1d69fd1191337e619306e92eb93d533ec0a2543",cloud:!1,allowedExtensions:t,insideModal:!0,fullHeight:!0,portal:a,config:s,user:l,userLicensedItems:r}))}}},24869:(e,t,a)=>{a.d(t,{a:()=>i,f:()=>c,g:()=>r,s:()=>l,v:()=>o});var n=a(15912),s=a(46227);function i(e,t){const a=/(?:\.([^.]+))?$/;let n=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),i=n&&a.exec(n)[1]?a.exec(n)[1].toLowerCase():"",l="";if((null==n?void 0:n.indexOf(".rft."))>-1){const[e,t]=n.split(".rft.");i=`rft.${t}`,l=e}return n&&!l&&(l=-1===n.lastIndexOf(".")?n:n.substring(0,n.lastIndexOf("."))),l=l.replace(/\.|-/g,"_"),t&&(l=function(e){return`${e}_${(0,s.g)()}`}(l),n=`${l}.${i}`),{title:l,fileName:n,extension:i}}function l(e,t){return i(e.name,!!t)}function o(e,t){let a=e;const n=e.lastIndexOf("\\");return n>-1&&(a=a.substring(n+1,a.length)),a.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function r(e){return n.a[e]?n.a[e]:n.a[Object.keys(n.a).find((t=>n.a[t].type===e))]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},45768:(e,t,a)=>{a.d(t,{a:()=>r,f:()=>i,i:()=>o,m:()=>l});var n=a(4429),s=a(15912);function i(e,t){let a;a=t?t.map((e=>e.type)):Object.keys(s.a);let n=[];return a.forEach((t=>{var a;(null===(a=s.a[t].fileExt)||void 0===a?void 0:a.indexOf(e))>=0&&n.push(s.a[t])})),n}function l(e){return e?(0,n.b)(e.flatMap((e=>{var t;return null===(t=s.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const o=e=>e/1024/1024>50,r=e=>e/1024/1024>20},46227:(e,t,a)=>{a.d(t,{g:()=>n});const n=()=>[2,1,1,1,3].map((e=>{let t="";for(let a=0;a<e;a++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},95878:(e,t,a)=>{a.d(t,{a:()=>n,u:()=>s});const n=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=n.state}}]);