/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-aa1a8d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-aa1a8d"],{10465:(e,t,a)=>{a.d(t,{D:()=>i,a:()=>d,b:()=>o,c:()=>c,g:()=>T,s:()=>C});class i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const s=(e,t,a)=>(0,n(t).subscribe)((t=>{const i=t.some((t=>((e,t)=>{let a=e;for(;a;){if(a===t)return!0;if(!a.parentNode)return!1;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(e,t.target)));i&&a()})),l={},n=e=>{const t=e.join(","),a=l[t];if(void 0!==a)return a;const i=new Set,s=new MutationObserver((e=>i.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:e=>(i.add(e),()=>{i.delete(e),0===i.size&&(s.disconnect(),l[t]=void 0)})};return l[t]=n,n},c=(e,t)=>{let a=e;for(;a;){const e=a.closest?.(t);if(e)return e;const i=a.getRootNode?.();if(i===globalThis.document)return null;a=i.host}return null},o=e=>r(e,"dir","ltr"),r=(e,t,a)=>{const i=c(e,`[${t}]`);return i?.getAttribute(t)??a},h=e=>{let t="";for(let a=0;a<e;a++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},d=()=>[h(2),h(1),h(1),h(1),h(3)].join("-"),g="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),b=new Set(g),u="en",p={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},m={},f=async(e,t)=>{const a=`${t}${e}.json`;try{const e=await fetch(a);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===u?{}:await f(u,t)},T=e=>{const t=r(e,"lang",globalThis.navigator?.language||u);return{lang:t,t9nLocale:v(t)}},v=e=>{const[t,a]=e.split("-"),i=t.toLowerCase();let s=i;return a&&(s=`${i}-${a.toUpperCase()}`),s=p[s]??s,b.has(s)?s:a?v(i):u},C=(e,t,a,i)=>{let l;const n=()=>y(e,t(),i).then((e=>{l?.lang===e.lang&&l.t9nLocale===e.t9nLocale&&l.t9nStrings===e.t9nStrings||a(e),l=e})).catch(console.error);return queueMicrotask(n),s(e,["lang"],n)},y=async(e,t,a=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:s}=T(e),l=`${t}/${a}/t9n`,n=null===a?{}:await(async(e,t,a="")=>{const i=`${t}/${a}`,s=`${i}${e}.json`;return m[s]??(m[s]=f(e,i)),await m[s]})(s,l,"messages.");return{lang:i,t9nLocale:s,t9nStrings:n}}},39109:(e,t,a)=>{a.r(t),a.d(t,{arcgis_map_config_tabs_manager:()=>c});var i=a(11254),s=a(84260),l=a(14528),n=a(17840);a(10465),a(56612),a(69811);const c=class{constructor(e){(0,i.r)(this,e),this.arcgisTabsClose=(0,i.c)(this,"arcgisTabsClose",7),this.arcgisTabSelect=(0,i.c)(this,"arcgisTabSelect",7),this.manager=(0,l.u)(this),this.heightSizes=["s","m","l"],this.strings=(0,s.u)({blocking:!0}),this.addEventListeners=e=>{e.addEventListener("calciteTabsClose",this.onCalciteTabsClose),e.addEventListener("calciteTabsActivate",this.onCalciteTabsActivate)},this.removeEventListeners=e=>{e.removeEventListener("calciteTabsClose",this.onCalciteTabsClose),e.removeEventListener("calciteTabsActivate",this.onCalciteTabsActivate)},this.onCalciteTabsClose=e=>{this.onTabClose(e.target.tab)},this.onCalciteTabsActivate=async e=>{const t=e.target.tab,a=await this.findTab(t);null!==a&&(a.selected=!0),this.selectedTabId!==t&&this.arcgisTabSelect.emit({id:t}),this.selectedTabId=t},this.onTabClose=async e=>{const t=await this.findTabTitle(e),a=await this.findTab(e);if(null!==t&&null!==a){if(await(a.firstChild?.close?.(e))??!0){this.closeTab(t,a);0===Array.from(this.el.querySelectorAll("calcite-tab")).length&&this.calcitePanelRef&&(this.closePanel(),this.closeShellPanel());const i=this.calciteTabNavigationRef?.querySelectorAll("calcite-tab-title"),s=i?Array.from(i):[],l=s[0]?.tab;e===this.selectedTabId&&l?this.selectTab(l):this.selectTab(this.selectedTabId??""),1===s.length&&(s[0].closable=!0)}else t.closed=!1,await this.selectTab(e)}return null!==t},this.closeTab=(e,t)=>{null!==e&&(this.removeEventListeners(e),e.remove(),this.updateTabCount()),null!==t&&t.remove()},this.closeShellPanel=()=>{this.calciteShellPanelRef&&(this.calciteShellPanelRef.collapsed=!0)},this.openShellPanel=()=>{this.calciteShellPanelRef&&(this.calciteShellPanelRef.collapsed=!1)},this.closePanel=()=>{this.calcitePanelRef&&(this.calcitePanelRef.closed=!0),this.closed=!0},this.openPanel=()=>{this.calcitePanelRef&&(this.calcitePanelRef.closed=!1,this.calcitePanelRef.collapsed=!1,this.onPanelCollapsed({target:this.calcitePanelRef})),this.closed=!1},this.closeAllTabs=async e=>{const t=this.calciteTabNavigationRef?.querySelectorAll("calcite-tab-title"),a=t?Array.from(t):[];await Promise.all(a.map((async t=>{const a=t.tab,i=await this.findTab(a);e&&null!==i&&await(i.firstChild?.discardChanges?.()),this.closeTab(t,i)}))),this.closePanel(),this.closeShellPanel(),this.arcgisTabsClose.emit()},this.onPanelClose=async()=>{if(this.calcitePanelRef){const e=await this.canClose();if((e?.length??0)>0){const t=e.filter((e=>!e.canClose&&e.isRunning));this.runningTab=t.length>0?await this.findTabTitle(t[0].itemId??""):null,null===this.runningTab&&(this.unsavedTabs=await Promise.all(e.map((e=>this.findTabTitle(e?.itemId??""))))),this.openPanel(),this.openShellPanel()}else await this.closeAllTabs(!1)}},this.onDialogClose=()=>{this.unsavedTabs=[],this.runningTab=null},this.goBack=()=>{this.onDialogClose(),this.openPanel(),this.openShellPanel()},this.discardAll=async()=>{this.onDialogClose(),this.calciteTabNavigationRef&&await this.closeAllTabs(!0)},this.onPanelCollapsed=e=>{if(!this.heightUpElement||!this.heightDownElement)return;e.target.collapsed?(this.heightUpElement.disabled=!0,this.heightDownElement.disabled=!0,this.calciteTabsRef?.classList.add("collapsed"),this.collapsed=!0):(this.calciteTabsRef?.classList.remove("collapsed"),this.collapsed=!1,this.onToggleHeight(0))},this.hideShellPanel=!1,this.closed=!1,this.collapsed=!1,this.height="m",this.selectedTabId=null,this.tabCount=0,this.runningTab=null,this.unsavedTabs=[]}async findTab(e){const t=Array.from(this.el.querySelectorAll("calcite-tab"));return await Promise.resolve(t.find((t=>t.tab===e))??null)}async findTabTitle(e){const t=this.calciteTabNavigationRef?.querySelectorAll("calcite-tab-title"),a=t?Array.from(t):[];return await Promise.resolve(a.find((t=>t.tab===e))??null)}async addTab(e){const{title:t,id:a}=e;let i=null,s=null;return this.openPanel(),this.openShellPanel(),this.calcitePanelRef&&(this.createTabTitleElement(t,a),this.createTabElement(e),i=await this.findTabTitle(a),s=await this.findTab(a),await this.selectTab(a)),null!==i&&null!==s?{tab:s,title:i}:null}async removeTab(e){return await this.onTabClose(e)}async selectTab(e){await this.unSelectCurrentTab();const t=await this.findTabTitle(e),a=await this.findTab(e);return null!==t&&(this.openPanel(),this.openShellPanel(),t.selected=!0,this.selectedTabId!==e&&this.arcgisTabSelect.emit({id:e}),this.selectedTabId=e),null!==a&&(a.selected=!0),setTimeout((()=>requestAnimationFrame((()=>t?.focus?.()))),25),null!==t}async getTabNavElement(){return await Promise.resolve(this.calciteTabNavigationRef)}async canClose(){const e=Array.from(this.calciteTabsRef?.querySelectorAll("calcite-tab")??[]);return(await Promise.all(e.map((e=>e.firstChild?.canClose?.(e.tab))))).map(((t,a)=>({canClose:t?.canClose??!0,isRunning:t?.isRunning??!1,itemId:e[a].tab}))).filter((e=>!e.canClose))}updateTabCount(){const e=this.calciteTabNavigationRef?.querySelectorAll("calcite-tab-title"),t=e?Array.from(e):[];this.tabCount=t.length??0}createTabTitleElement(e,t){const{title:a,iconStart:i,iconEnd:s}=e,l=document.createElement("calcite-tab-title");l.tab=t,i&&(l.iconStart=i),s&&(l.iconEnd=s),l.selected=!0,l.closable=!0,l.textContent=a,this.addEventListeners(l);const n=this.calciteTabNavigationRef?.querySelectorAll("calcite-tab-title"),c=(n?Array.from(n):[]).find((e=>e.tab===t));c&&(this.removeEventListeners(c),c.remove()),this.calciteTabNavigationRef?.appendChild(l),this.updateTabCount()}createTabElement(e){const{id:t,content:a}=e,i=document.createElement("calcite-tab");i.tab=t,i.selected=!0,i.appendChild(a);const s=Array.from(this.el.querySelectorAll("calcite-tab")).find((e=>e.tab===t));s?.remove(),this.calciteTabsRef?.appendChild(i)}async unSelectCurrentTab(){if(null!==this.selectedTabId){const e=await this.findTab(this.selectedTabId);null!==e&&(e.selected=!1);const t=await this.findTabTitle(this.selectedTabId);null!==t&&(t.selected=!1),this.selectedTabId=null}}onToggleHeight(e){const{heightSizes:t,height:a,heightUpElement:i,heightDownElement:s}=this;if(!i||!s)return;const l=(t.indexOf(a)+e)%t.length,n=t[l];this.height=n,this.calciteTabsRef?.classList.remove(a),this.calciteTabsRef?.classList.add(n),n===t[t.length-1]?(i.disabled=!0,s.disabled=!1):n===t[0]?(i.disabled=!1,s.disabled=!0):(i.disabled=!1,s.disabled=!1)}renderTab(){return(0,i.h)("calcite-panel",{closed:!0,closable:!0,collapsible:!0,ref:e=>this.calcitePanelRef=e,heading:`${this.strings.openTabs}: ${this.tabCount}`,onCalcitePanelClose:this.onPanelClose,onCalcitePanelToggle:this.onPanelCollapsed,messageOverrides:{collapse:this.strings.minimizeTooltip,expand:this.strings.restoreTooltip}},(0,i.h)("calcite-action",{icon:"chevrons-up",slot:"header-actions-end",key:"toggle-panel-height-up",ref:e=>this.heightUpElement=e,onClick:()=>this.onToggleHeight(1),text:this.strings.heightUp,title:this.strings.heightUpTooltip}),(0,i.h)("calcite-action",{icon:"chevrons-down",slot:"header-actions-end",key:"toggle-panel-height-down",ref:e=>this.heightDownElement=e,onClick:()=>this.onToggleHeight(-1),text:this.strings.heightDown,title:this.strings.heightDownTooltip}),(0,i.h)("calcite-tabs",{ref:e=>this.calciteTabsRef=e},(0,i.h)("calcite-tab-nav",{key:"center-tabs-tab-title",ref:e=>this.calciteTabNavigationRef=e,slot:"title-group"})))}componentDidUpdate(){const e=this.calciteShellPanelRef?.shadowRoot?.querySelector(".content");(0,n.i)(e)&&"100%"!==e.style.height&&(e.style.height="100%");const t=this.calcitePanelRef?.shadowRoot?.querySelector("calcite-action[id=collapse]"),a=t?.shadowRoot?.querySelector("calcite-icon"),i=a?.getAttribute("icon"),s=t?.getAttribute("aria-expanded");"true"===s&&"chevron-up"===i&&a?.setAttribute("icon","chevron-down"),"false"===s&&"chevron-down"===i&&a?.setAttribute("icon","chevron-up")}renderTabLists(e){return(0,i.h)("ul",{style:{"margin-block-start":"auto"}},e.map((e=>(0,i.h)("li",{key:e.tab},e.textContent))))}renderDialog(){const e=this.unsavedTabs.length>0||null!==this.runningTab;let t="",a=this.strings.unsavedChanges;const s=this.unsavedTabs.filter((e=>null!==e)),l=s.length;return null!==this.runningTab?(a=this.strings.modelIsRunning,t=this.strings.modalRunningWithEditsContent.replaceAll("${modelName}",this.runningTab.textContent??"")):l>0&&(t=1===l?(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.strings.singleModelChangesText),this.renderTabLists(s),(0,i.h)("calcite-label",null,this.strings.promptSaveChanges)):(0,i.h)(i.F,null,(0,i.h)("calcite-label",null,this.strings.multiModelChangesText),this.renderTabLists(s),(0,i.h)("calcite-label",null,this.strings.promptSaveChanges))),e?(0,i.h)("arcgis-tunnel",{reference:this.el},(0,i.h)("calcite-modal",{open:e,id:"tabs-dialog",onCalciteModalClose:this.onDialogClose,kind:"danger"},(0,i.h)("span",{slot:"header"},a),(0,i.h)("div",{slot:"content"},t),null===this.runningTab?(0,i.h)("calcite-button",{slot:"back",kind:"neutral",onClick:this.discardAll},this.strings.discardAll):null,(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",onClick:this.goBack},this.strings.goBack))):null}render(){return(0,i.h)(i.H,{key:"a85a8b6899908d4aa56173b42e3e1b06697a4dce",class:`${this.height} arcgis-map-config-tabs-manager`,closed:this.closed,collapsed:this.collapsed},this.renderDialog(),this.hideShellPanel?this.renderTab():(0,i.h)("calcite-shell-panel",{ref:e=>{this.calciteShellPanelRef=e},displayMode:"float",heightScale:this.height,layout:"horizontal",collapsed:!0},this.renderTab()))}static get assetsDirs(){return["assets"]}get el(){return(0,i.a)(this)}};c.style=".arcgis-map-config-tabs-manager{z-index:var(--calcite-z-index)}.arcgis-map-config-tabs-manager calcite-panel{height:100%;display:flex;flex:1 1 auto;overflow:hidden}.arcgis-map-config-tabs-manager.l{height:100%}.arcgis-map-config-tabs-manager.m{height:66%}.arcgis-map-config-tabs-manager.s{height:33%}.arcgis-map-config-tabs-manager[collapsed]{height:4rem}.arcgis-map-config-tabs-manager[closed]{display:none}.arcgis-map-config-tabs-manager calcite-panel[closed]{display:none}.arcgis-map-config-tabs-manager calcite-tabs{height:100%}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab-nav{--calcite-size-xxl:var(--calcite-spacing-lg);padding:0 var(--calcite-spacing-lg)}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab-title{--calcite-icon-color:var(--calcite-ui-border-input);--calcite-ui-text-3:var(--calcite-ui-text-2)}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab-title calcite-loader{margin-left:var(--calcite-spacing-xs)}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab-title[selected]{--calcite-icon-color:var(--calcite-ui-brand)}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab-title[selected] calcite-loader{color:var(--calcite-color-brand)}.arcgis-map-config-tabs-manager calcite-tabs calcite-tab{--calcite-tab-content-block-padding:0px}.arcgis-map-config-tabs-manager calcite-shell-panel{height:100%;--calcite-shell-panel-max-height:auto;--calcite-shell-panel-min-height:auto;--calcite-shell-panel-height:auto}"},84260:(e,t,a)=>{a.d(t,{u:()=>n});var i=a(11254),s=a(10465),l=a(14528);function n({propertyName:e="strings",name:t}){let a=(0,l.r)();const n=(0,s.g)(a.el),o=new s.D,r={_lang:n.lang,_t9nLocale:n.t9nLocale};a.manager.onLoad((()=>o.promise));const h=new WeakRef(a);function d(){const e=h.deref();return e||b?.(),e}a=void 0;const g=c((()=>d()?.el)),b=(0,s.s)(g,(()=>(0,i.g)("./assets")),(({t9nLocale:t,t9nStrings:a,lang:i})=>{const s=d();if(!s)return;s[e]={...a,_lang:i,_t9nLocale:t},o.resolve()}),t);return r}const c=e=>new Proxy({},{get(t,a){const i=e();if(!i)return;const s=Reflect.get(i,a,i);return"function"==typeof s?s.bind(i):s}})}}]);