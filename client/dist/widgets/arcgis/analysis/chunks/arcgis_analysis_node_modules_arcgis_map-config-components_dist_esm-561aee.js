/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-561aee.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-561aee"],{5511:(e,t,r)=>{function s(e){const{layer:t,layerOriginUtils:r}=e;e.layerOriginInfo=r.getLayerOriginInfo(t,"web-map")}r.d(t,{g:()=>s})},10465:(e,t,r)=>{r.d(t,{D:()=>s,a:()=>h,b:()=>l,c:()=>n,g:()=>b,s:()=>f});class s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const i=(e,t,r)=>(0,a(t).subscribe)((t=>{const s=t.some((t=>((e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1})(e,t.target)));s&&r()})),o={},a=e=>{const t=e.join(","),r=o[t];if(void 0!==r)return r;const s=new Set,i=new MutationObserver((e=>s.forEach((t=>t(e)))));globalThis.document&&i.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const a={subscribe:e=>(s.add(e),()=>{s.delete(e),0===s.size&&(i.disconnect(),o[t]=void 0)})};return o[t]=a,a},n=(e,t)=>{let r=e;for(;r;){const e=r.closest?.(t);if(e)return e;const s=r.getRootNode?.();if(s===globalThis.document)return null;r=s.host}return null},l=e=>c(e,"dir","ltr"),c=(e,t,r)=>{const s=n(e,`[${t}]`);return s?.getAttribute(t)??r},p=e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},h=()=>[p(2),p(1),p(1),p(1),p(3)].join("-"),d="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),u=new Set(d),g="en",v={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},y={},m=async(e,t)=>{const r=`${t}${e}.json`;try{const e=await fetch(r);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===g?{}:await m(g,t)},b=e=>{const t=c(e,"lang",globalThis.navigator?.language||g);return{lang:t,t9nLocale:P(t)}},P=e=>{const[t,r]=e.split("-"),s=t.toLowerCase();let i=s;return r&&(i=`${s}-${r.toUpperCase()}`),i=v[i]??i,u.has(i)?i:r?P(s):g},f=(e,t,r,s)=>{let o;const a=()=>C(e,t(),s).then((e=>{o?.lang===e.lang&&o.t9nLocale===e.t9nLocale&&o.t9nStrings===e.t9nStrings||r(e),o=e})).catch(console.error);return queueMicrotask(a),i(e,["lang"],a)},C=async(e,t,r=e.localName.split("-").slice(1).join("-"))=>{const{lang:s,t9nLocale:i}=b(e),o=`${t}/${r}/t9n`,a=null===r?{}:await(async(e,t,r="")=>{const s=`${t}/${r}`,i=`${s}${e}.json`;return y[i]??(y[i]=m(e,s)),await y[i]})(i,o,"messages.");return{lang:s,t9nLocale:i,t9nStrings:a}}},19061:(e,t,r)=>{r.r(t),r.d(t,{arcgis_layer_override:()=>y});var s=r(11254),i=r(17840),o=r(5511),a=r(10465),n=r(14528),l=r(84260),c=r(69811);r(56612);const p="container",h="details",d="buttons",u="top-button",g="properties",v="properties-icon",y=class{constructor(e){(0,s.r)(this,e),this.arcgisChange=(0,s.c)(this,"arcgisChange",7),this.arcgisLayerOverrideChange=(0,s.c)(this,"arcgisLayerOverrideChange",7),this.arcgisDuplicateClick=(0,s.c)(this,"arcgisDuplicateClick",7),this.arcgisLayerOverrideDuplicateClick=(0,s.c)(this,"arcgisLayerOverrideDuplicateClick",7),this.arcgisSaveLayerClick=(0,s.c)(this,"arcgisSaveLayerClick",7),this.arcgisLayerOverrideSaveLayerClick=(0,s.c)(this,"arcgisLayerOverrideSaveLayerClick",7),this.arcgisSaveAsLayerClick=(0,s.c)(this,"arcgisSaveAsLayerClick",7),this.arcgisLayerOverrideSaveAsLayerClick=(0,s.c)(this,"arcgisLayerOverrideSaveAsLayerClick",7),this.manager=(0,n.u)(this),this.strings=(0,l.u)({blocking:!0}),this.afterCreateSource=e=>{this.sourceNode=e},this.afterCreateStatusButton=e=>{this.statusButtonNode=e},this.afterCreatePropertiesButton=e=>{this.propertiesNode=e},this.onPanelScroll=async()=>{if(this.statusPopover){const e=await(this.statusPopover?.getPopoverRect());(0,i.i)(e?.top)&&e.top<0&&this.closePopovers()}if(this.propertiesPopover){const e=await(this.propertiesPopover?.getPopoverRect());(0,i.i)(e?.top)&&e.top<0&&this.closePopovers()}},this.openDetails=e=>{e.stopPropagation(),e.preventDefault();const{layer:t}=this,{portalItem:r}=t;let s;s=r?.portal?r.portal.urlKey?`//${r.portal.urlKey}.${r.portal.customBaseUrl}/home/item.html?id=${r.id}&sublayer=${t.layerId}`:`//${r.portal.portalHostname}/home/item.html?id=${r.id}&sublayer=${t.layerId}`:`${t.url}/${t.layerId}`,window.open(s)},this.saveLayer=e=>{e.stopPropagation();const{layer:t}=this;this.arcgisLayerOverrideSaveLayerClick.emit(t.id),this.arcgisSaveLayerClick.emit(t.id)},this.saveAsLayer=e=>{e.stopPropagation();const{layer:t}=this;this.arcgisLayerOverrideSaveAsLayerClick.emit(t.id),this.arcgisSaveAsLayerClick.emit(t.id)},this.duplicateLayer=e=>{e.stopPropagation();const{layer:t}=this;this.arcgisLayerOverrideDuplicateClick.emit(t.id),this.arcgisDuplicateClick.emit(t.id)},this.openStatus=async e=>{if(e.stopPropagation(),this.props.containerPanelNode?.disabled||!this.sourceNode)return;if(this.statusPopover){if(this.statusPopover.parentNode)return this.statusPopover?.parentNode.removeChild(this.statusPopover),void(this.statusPopover=void 0);this.statusPopover=void 0}this.closePopovers(),await this.scrollIntoView(this.sourceNode);const{props:t,strings:r}=this,s=document.createElement("arcgis-layer-override-status");s.props=t,s.strings=r,s.popoverReferenceElement=this.sourceNode,document.body.appendChild(s),this.statusPopover=s,this.disableContainer(!0)},this.openManageProps=async()=>{if(!this.sourceNode)return;if(this.propertiesPopover){if(this.propertiesPopover.parentNode)return this.propertiesPopover.parentNode.removeChild(this.propertiesPopover),void(this.propertiesPopover=void 0);this.propertiesPopover=void 0}this.closePopovers(),await this.scrollIntoView(this.sourceNode);const{props:e,strings:t}=this,r=document.createElement("arcgis-layer-override-properties");r.props=e,r.strings=t,r.popoverReferenceElement=this.sourceNode,document.body.appendChild(r),this.propertiesPopover=r,this.disableContainer(!0)},this.layer=void 0,this.config=void 0,this.portal=void 0,this.hideDuplicate=!1,this.props=void 0,this.reRender=!1}closeAllPopoversHandler(){this.closePopovers()}arcgisPropChange(){this.arcgisChange.emit(),this.arcgisLayerOverrideChange.emit(),this.reRender=!this.reRender}arcgisStatusChange(){this.reRender=!this.reRender}async setFocus(){this.sourceActionNode?.setFocus()}async done(){this.closePopovers()}async refresh(){(0,o.g)(this.props),this.reRender=!this.reRender}async componentWillLoad(){console.warn("%cmap-config-components","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",'[arcgis-layer-override] component in @arcgis/map-config-components is deprecated and will be removed soon. Use "arcgis-map-config-layer-override" instead.'),this.props={layer:this.layer,portal:this.portal,config:this.config},this.props.layerOriginUtils=await(0,c.M)(),this.props.layerOriginUtils.isSupportedLayer(this.layer),(0,o.g)(this.props)}async componentDidLoad(){this.props.containerPanelNode=(0,i.q)(this.el,"calcite-panel"),this.props.containerPanelNode||(this.props.containerPanelNode=(0,i.q)(this.el,"calcite-flow-item")),this.props.containerPanelNode?.addEventListener("calcitePanelScroll",this.onPanelScroll)}disconnectedCallback(){this.props.containerPanelNode?.removeEventListener("calcitePanelScroll",this.onPanelScroll),this.closePopovers()}render(){return(0,s.h)(s.H,{key:"a2679fa3ffaca234bb6d66f40526488eddf3529c"},(0,s.h)("div",{key:"8ea59fd5e813055761cb4109f841b41671bf377c",class:p},this.renderSource(),this.renderCopy(),this.renderStatus(),this.renderProperties()))}renderSource(){const{strings:e,layer:t}=this,r=t.portalItem?.title,i=t.title,o="rtl"===(0,a.b)(this.el);return(0,s.h)("calcite-label",{ref:this.afterCreateSource},e.sourceLayer,(0,s.h)("calcite-block",{class:h,heading:(r&&r!==i?o?`${i} / ${r}`:`${r} / ${i}`:i)??void 0,description:t.isTable?"Table":"Feature layer",onClick:e=>this.openDetails(e)},(0,s.h)("calcite-action",{scale:"s",slot:"control",icon:"launch",text:e.sourceLayer,onClick:e=>this.openDetails(e),ref:e=>this.sourceActionNode=e})))}renderCopy(){const{strings:e,layer:t,hideDuplicate:r,props:i}=this,{portal:o}=i,a=this.canCreateItems(o?.user),n=["admin","update"].includes(t.portalItem?.itemControl??"");return n||a||!t.isTable&&!r?(0,s.h)("div",{class:d},n&&(0,s.h)("calcite-button",{width:"full",appearance:"outline-fill",kind:"neutral",iconStart:"save",class:u,label:e.save,onClick:this.saveLayer},e.save),a&&(0,s.h)("calcite-button",{width:"full",appearance:"outline-fill",kind:"neutral",iconStart:"save",class:u,label:e.saveAs,onClick:this.saveAsLayer},e.saveAs),!t.isTable&&!r&&(0,s.h)("calcite-button",{width:"full",appearance:"outline-fill",kind:"neutral",iconStart:"duplicate",label:e.duplicate,onClick:this.duplicateLayer},e.duplicate)):(0,s.h)(s.F,null)}renderStatus(){const{strings:e,layer:t,props:r}=this,{layerOriginInfo:i}=r;return(0,s.h)("calcite-notice",{class:g,width:"full",scale:"s",open:!0,onClick:this.openStatus},(0,s.h)("div",{slot:"title"},"source"===i.status?e.propsFromSource:"overridden"===i.status?e.propsSetInWebmap:e.somePropsSetInWebmap),(0,s.h)("calcite-button",{slot:"actions-end",iconStart:"information",scale:"s",appearance:"transparent",kind:"neutral",class:v,label:t.isTable?e.tableStatus:e.layerStatus,onClick:this.openStatus,ref:this.afterCreateStatusButton}))}renderProperties(){const{strings:e,layer:t}=this;return(0,s.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",width:"full",label:t.isTable?e.manageTableProps:e.manageLayerProps,onClick:this.openManageProps,ref:this.afterCreatePropertiesButton},t.isTable?e.manageTableProps:e.manageLayerProps)}closePopovers(){this.closeStatusPopover(),this.closePropertiesPopover(),this.disableContainer(!1)}closeStatusPopover(){this.statusPopover&&(this.statusPopover.parentNode?.removeChild(this.statusPopover),this.statusPopover=void 0,setTimeout((()=>{this.statusButtonNode?.setFocus()}),300))}closePropertiesPopover(){this.propertiesPopover&&(this.propertiesPopover.parentNode?.removeChild(this.propertiesPopover),this.propertiesPopover=void 0,setTimeout((()=>{this.propertiesNode?.setFocus()}),300))}scrollIntoView(e){return e.getBoundingClientRect()?.top<0?(e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),new Promise((t=>{let r=0;const s=setInterval((()=>{(r>10||e.getBoundingClientRect()?.top>=0)&&(clearInterval(s),t()),r++}),100)}))):Promise.resolve()}disableContainer(e){this.props.containerPanelNode&&(this.props.containerPanelNode.disabled=e)}canCreateItems(e){return e&&(this.isPublicUser(e)||e.privileges?.includes("portal:user:createItem"))}isPublicUser(e){return!e.orgId}static get assetsDirs(){return["assets"]}get el(){return(0,s.a)(this)}};y.style=":host{height:100%}.container{padding:6px;background-color:white}.details{width:100%;margin-bottom:8px;border:1px solid var(--calcite-color-border-3);cursor:pointer}.buttons{margin-bottom:14px}.top-button{margin-bottom:4px}.properties{margin-bottom:16px;cursor:pointer}.properties-icon{height:100%;padding:0 var(--calcite-notice-spacing-token-large)}"},84260:(e,t,r)=>{r.d(t,{u:()=>a});var s=r(11254),i=r(10465),o=r(14528);function a({propertyName:e="strings",name:t}){let r=(0,o.r)();const a=(0,i.g)(r.el),l=new i.D,c={_lang:a.lang,_t9nLocale:a.t9nLocale};r.manager.onLoad((()=>l.promise));const p=new WeakRef(r);function h(){const e=p.deref();return e||u?.(),e}r=void 0;const d=n((()=>h()?.el)),u=(0,i.s)(d,(()=>(0,s.g)("./assets")),(({t9nLocale:t,t9nStrings:r,lang:s})=>{const i=h();if(!i)return;i[e]={...r,_lang:s,_t9nLocale:t},l.resolve()}),t);return c}const n=e=>new Proxy({},{get(t,r){const s=e();if(!s)return;const i=Reflect.get(s,r,s);return"function"==typeof i?i.bind(s):i}})}}]);