/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-187821.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-187821"],{39715:(e,i,n)=>{n.d(i,{a:()=>f,b:()=>c,c:()=>m,d:()=>d,e:()=>u,g:()=>p,r:()=>s,s:()=>b});var a=n(17840),l=n(76744);let o,t;function r(e){e.loading=!1}async function s(e,i){return function(e){e.loading=!0,t=!1,o&&clearTimeout(o),o=setTimeout((()=>{r(e),t=!0}),6e4)}(i),await e.then((e=>{if(r(i),t)throw new Error("timeout");return e})).catch((e=>{throw r(i),e}))}async function d(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:t,mapView:r,supportsArcade:s,modules:d}=e,u=n;if(t&&!s||"subtype-sublayer"===u.type)return await async function(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:t,mapView:r,modules:s}=e,d=n;i=i||{};const u=(0,l.at)(e,(0,l.g)(e)),c=i.fieldInfos?i.fieldInfos[0]:null;return await s.ColorCreator.createClassBreaksRenderer({layer:d,view:r,field:c.field,valueExpression:c.expression,valueExpressionTitle:c.expressionTitle,normalizationField:i.normalizationField,classificationMethod:i.classificationMethod?i.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===i.classificationMethod?i.standardDeviationInterval?i.standardDeviationInterval:1:void 0,numClasses:i.numClasses?i.numClasses:4,minValue:i.min,maxValue:i.max,colorScheme:i.colorScheme||(0,l.aD)(e),outlineOptimizationEnabled:!t&&"subtype-sublayer"!==d.type&&(!(0,a.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"featureReduction"in d&&"binning"===d.featureReduction?.type&&o}).then((e=>((0,l.au)(u,e.renderer),e)))}(e,i);const c=(0,l.g)(e),m=c.authoringInfo,f=(0,l.d)(c,"color");i=i||{};const p=(0,l.k)(e),h=(0,l.at)(e,(0,l.g)(e)),v=i.fieldInfos?i.fieldInfos[0]:null,g=i.theme?i.theme:"high-to-low",z={layer:u,view:r,field:v.field,valueExpression:v.expression,valueExpressionTitle:v.expressionTitle,theme:g,colorScheme:i.colorScheme||(0,l.aD)(e,g),normalizationField:i.normalizationField,minValue:i.min,maxValue:i.max,outlineOptimizationEnabled:!t&&(!(0,a.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!t&&(!(0,a.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===u.featureReduction?.type&&o};return await d.ColorCreator.createContinuousRenderer(z).then((async n=>{const a=(0,l.b)((0,l.g)(e),"color");return a&&!i.noReuse&&["color","color-size","color-size-age"].includes(p)&&b(e,i)&&m&&"above-and-below"!==m?.univariateTheme&&!["centered-on","extremes"].includes(f.theme)&&(n.renderer.visualVariables=(0,l.a)(n.renderer,"color")||[],n.renderer.visualVariables.push(a),h.sizeOutlineVisVar&&(n.renderer.visualVariables=(0,l.a)(n.renderer,"size","outline")||[],n.renderer.visualVariables.push(h.sizeOutlineVisVar)),n.renderer.authoringInfo.visualVariables=(0,l.c)(n.renderer,"color")||[],n.renderer.authoringInfo.visualVariables.push(f),(0,l.aE)(e,n.renderer)),(0,l.au)(h,n.renderer),n}))}async function u(e,i){const{layer:n,mapImageSublayer:o,mapView:t,modules:r}=e,s=n,d=(0,l.g)(e).authoringInfo;i=i||{};const u=(0,l.k)(e),c=(0,l.at)(e,(0,l.g)(e)),m=i.fieldInfos?i.fieldInfos[0]:null,f=i.theme?i.theme:"high-to-low";return await r.ColorCreator.createAgeRenderer({layer:s,view:t,startTime:m.field,endTime:new Date,theme:f,colorScheme:i.colorScheme||(0,l.aD)(e,f),unit:void 0,outlineOptimizationEnabled:!o&&(!(0,a.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!o&&(!(0,a.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1}).then((async n=>{if(["color-age","color-age-size"].includes(u)&&b(e,i)&&d&&"above-and-below"!==d?.univariateTheme){const i=(0,l.b)((0,l.g)(e),"color"),a=(0,l.d)((0,l.g)(e),"color");n.renderer.visualVariables=[i],c.sizeOutlineVisVar&&n.renderer.visualVariables.push(c.sizeOutlineVisVar),n.renderer.authoringInfo.visualVariables=[a],(0,l.aE)(e,n.renderer)}return(0,l.au)(c,n.renderer),n}))}async function c(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:t,mapView:r,supportsArcade:s,modules:d}=e,u=n;if(t&&!s)return await f(e,i);i=i||{};const c=(0,l.g)(e),m=c.authoringInfo||{},p=(0,l.k)(e),b=(0,l.b)(c,"color");if(b&&i.fieldInfos?.[0]&&i.fieldInfos?.[0].field===b.field&&i.fieldInfos?.[0].expression===b.valueExpression&&i.normalizationField===b.normalizationField&&(delete i.fieldInfos,(0,l.aw)(i)))return{renderer:c.clone()};const h=(0,l.at)(e,c),v=(0,l.d)(c,"color"),g=i.fieldInfos?i.fieldInfos[0]:b?{field:b.field,expression:b.valueExpression,expressionTitle:b.valueExpressionTitle,simpleFieldType:l.w.NUMBER}:{field:c.field,expression:c.valueExpression,expressionTitle:c.valueExpressionTitle,simpleFieldType:l.w.NUMBER},z=null===i.normalizationField?void 0:i.normalizationField?i.normalizationField:b?b.normalizationField:c.normalizationField;let y=c.classBreakInfos?.length?c.classBreakInfos[0].symbol:(0,l.f)(e,p);"picture-marker"===y.type&&(y=(0,l.f)(e,p));const E=c.defaultSymbol,x=c.defaultLabel;let I=!1;(null===i.normalizationField||i.normalizationField||i.fieldInfo||"manual"===m.classificationMethod&&!i.theme||"equal-interval"===m.classificationMethod)&&(I=!0);const V=i.discardMinMax?void 0:(0,a.i)(i.min)?i.min:I?void 0:b?v?.minSliderValue:c.classBreakInfos[0].minValue,O=i.discardMinMax?void 0:(0,a.i)(i.max)?i.max:I?void 0:b?v?.maxSliderValue:c.classBreakInfos[c.classBreakInfos.length-1].maxValue,w=i.theme?i.theme:v?v.theme:"high-to-low",S="below"===v?.theme,T="below"===w,k=T&&!S||!T&&S,B=i.colorScheme||(0,l.aD)(e,w),M={layer:u,view:r,field:g.field,valueExpression:g.expression,valueExpressionTitle:g.expressionTitle,theme:w,colorScheme:B,normalizationField:z,minValue:V,maxValue:O,outlineOptimizationEnabled:!t&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!h.sizeOutlineVisVar),sizeOptimizationEnabled:!t&&((0,a.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!h.sizeAutoVisVar),legendOptions:i.legendOptions?.toJSON()||b?.legendOptions?.toJSON()||c.legendOptions?.toJSON(),defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!c.defaultSymbol,forBinning:"binning"===u.featureReduction?.type&&o};return await d.ColorCreator.createContinuousRenderer(M).then((e=>{if(i.discardMinMax){const i=(0,l.b)(c,"color"),n=(0,l.b)(e.renderer,"color");i.stops.forEach(((e,i)=>e.value=n.stops[i].value))}if((0,l.au)(h,e.renderer),y&&e.renderer.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=y),E&&(e.renderer.defaultSymbol=E,e.renderer.defaultLabel=x),k&&B&&b){const i=(0,l.b)(e.renderer,"color"),n=b.stops.length-1;i.stops.forEach(((e,i)=>e.color=b.stops[n-i].color))}return e}))}async function m(e,i){const{layer:n,mapImageSublayer:o,mapView:t,modules:r}=e,s=n;i=i||{};const d=(0,l.g)(e),u=(0,l.k)(e),c=(0,l.b)(d,"color");if(c&&i.fieldInfos?.[0]&&i.fieldInfos[0].field===c.field&&(delete i.fieldInfos,(0,l.aw)(i)))return{renderer:d.clone()};const m=(0,l.at)(e,d),f=(0,l.d)(d,"color"),p=i.startTime?i.startTime:f.startTime,b=i.endTime?i.endTime:f.endTime,h=d.classBreakInfos?.length?d.classBreakInfos[0].symbol:(0,l.f)(e,u),v=d.defaultSymbol,g=d.defaultLabel;let z=!1;(i.startTime||i.endTime||i.units||i.fieldInfo)&&(z=!0);const y=i.discardMinMax?void 0:(0,a.i)(i.min)?i.min:z?void 0:f?f.minSliderValue:d.classBreakInfos[0].minValue,E=i.discardMinMax?void 0:(0,a.i)(i.max)?i.max:z?void 0:f?f.maxSliderValue:d.classBreakInfos[d.classBreakInfos.length-1].maxValue,x=i.theme?i.theme:f?f.theme:"high-to-low",I={layer:s,view:t,startTime:p,endTime:b,unit:i.units?i.units:f.units,theme:x,colorScheme:i.colorScheme||(0,l.aD)(e,x),minValue:y,maxValue:E,outlineOptimizationEnabled:!o&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,a.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!m.sizeAutoVisVar),legendOptions:i.legendOptions?i.legendOptions.toJSON():z?void 0:c?.legendOptions?.toJSON()||d.legendOptions?.toJSON(),defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!d.defaultSymbol};return await r.ColorCreator.createAgeRenderer(I).then((e=>{if(i.discardMinMax){const i=(0,l.b)(d,"color"),n=(0,l.b)(e.renderer,"color");i.stops.forEach(((e,i)=>e.value=n.stops[i].value))}return(0,l.d)(e.renderer,"color").field=f.field,(0,l.au)(m,e.renderer),h&&e.renderer.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=h),v&&(e.renderer.defaultSymbol=v,e.renderer.defaultLabel=g),e}))}async function f(e,i){const{layer:n,useFeatureReduction:o,mapImageSublayer:t,mapView:r,modules:s}=e,d=n;i=i||{};const u=(0,l.g)(e),c=u.authoringInfo||{},m=(0,l.b)(u,"color");if(!m&&i.fieldInfo&&i.fieldInfo.field===u.field&&i.fieldInfo.expression===u.valueExpression&&i.normalizationField===u.normalizationField&&(delete i.fieldInfo,(0,l.aw)(i)))return{renderer:u.clone()};const f=(0,l.d)(u,"color"),p=(0,l.at)(e,u),b={field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:l.w.NUMBER},h=i.fieldInfos?i.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:l.w.NUMBER}:b,v=void 0!==i.normalizationField?i.normalizationField:m?m.normalizationField:u.normalizationField;let g;if(u.classBreakInfos?.length){const e=u.classBreakInfos[0].symbol;["simple-fill","simple-marker","simple-line","cim"].includes(e.type)&&(g=e)}const z=u.defaultSymbol,y=u.defaultLabel,E=i.classificationMethod?i.classificationMethod:c.classificationMethod&&"manual"!==c.classificationMethod?c.classificationMethod:"natural-breaks",x="standard-deviation"===E?i.standardDeviationInterval?i.standardDeviationInterval:c.standardDeviationInterval?c.standardDeviationInterval:1:void 0;let I=!0;!i.classificationMethod||i.classificationMethod===c.classificationMethod||"standard-deviation"!==i.classificationMethod&&"standard-deviation"!==c.classificationMethod||(I=!1);let V=!1;void 0===i.normalizationField&&(0,l.D)(h,b)&&"equal-interval"===E||(V=!0);const O=(0,a.i)(i.min)?i.min:V?void 0:f?f.minSliderValue:u.classBreakInfos[0].minValue,w=(0,a.i)(i.max)?i.max:V?void 0:f?f.maxSliderValue:u.classBreakInfos[u.classBreakInfos.length-1].maxValue;let S=i.colorScheme||(0,l.aD)(e);return S||(S=(0,l.aD)(e,"above-and-below")),await s.ColorCreator.createClassBreaksRenderer({layer:d,view:r,field:h.field,valueExpression:h.expression,valueExpressionTitle:h.expressionTitle,normalizationField:v,classificationMethod:E,standardDeviationInterval:x,numClasses:(0,a.i)(i.numClasses)?i.numClasses:m||!I?4:u.classBreakInfos.length,minValue:O,maxValue:w,colorScheme:S,outlineOptimizationEnabled:!t&&((0,a.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),legendOptions:i.legendOptions||u.legendOptions,defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===d.featureReduction?.type&&o}).then((i=>((0,l.au)(p,i.renderer),p.sizeAutoVisVar&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(p.sizeAutoVisVar)),g&&i.renderer.classBreakInfos&&i.renderer.classBreakInfos.forEach((i=>{const n=g.clone();(0,l.j)(e,n,(0,l.h)(e,i.symbol)),i.symbol=n})),z&&(i.renderer.defaultSymbol=z,i.renderer.defaultLabel=y),i)))}function p(e){const{modules:i}=e;return(0,l.g)(e).classBreakInfos.map((n=>({min:n.minValue,max:n.maxValue,color:(0,l.h)(e,n.symbol)?(0,l.h)(e,n.symbol).clone():new i.EsriColor({r:255,g:255,b:255,a:1})})))}function b(e,i){const n=(0,l.g)(e).clone(),a=(0,l.k)(e);if(["color","color-size","color-size-age","color-age","color-age-size"].includes(a)&&void 0===i.normalizationField){let e;const o=(0,l.b)(n,"color");if(o)if(["color-age","color-age-size"].includes(a)){e={field:(0,l.d)(n,"color").field}}else e={field:o.field,expression:o.valueExpression,expressionTitle:o.valueExpressionTitle};else e={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,l.D)(i.fieldInfos[0],e))return!0}return!1}},53127:(e,i,n)=>{n.d(i,{a:()=>l,d:()=>a,t:()=>o});const a=(e,i)=>{let n,a="idle";const l=async(...l)=>await new Promise((o=>{switch(a){case"flushed":a="idle",n?(clearTimeout(n),o(e(...l))):o(null);break;case"invoked":clearTimeout(n),a="idle",o(e(...l));break;case"cancelled":clearTimeout(n),a="idle",o(null);break;default:n&&clearTimeout(n),a="pending",n=setTimeout((()=>{a="idle",o(e(...l))}),i)}}));return l.flush=async function(...e){return a="flushed",await l(...e)},l.invoke=async function(...e){return a="invoked",await l(...e)},l.cancel=async function(...e){return a="cancelled",await l(...e)},l.getStatus=function(){return a},l},l=(e,i)=>{let n;return async(...a)=>await new Promise((l=>{n||(n=setTimeout((()=>{clearTimeout(n),n=void 0,l(e(...a))}),i))}))};function o(e){return new Promise((i=>setTimeout(i,e)))}}}]);