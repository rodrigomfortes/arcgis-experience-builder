/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-member--fdeb0e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-member--fdeb0e"],{8606:(e,t,r)=>{r.r(t),r.d(t,{arcgis_member_browser_filter_my_groups:()=>c});var s=r(87849),i=r(59317),o=r(74174),n=r(16405),a=r(23966),l=r(70875);r(37762),r(15332),r(64099),r(81034),r(931),r(93814),r(87744),r(50637),r(66337);const c=class{constructor(e){(0,s.r)(this,e),this.arcgisMemberBrowserFilter=(0,s.c)(this,"arcgisMemberBrowserFilter",7),this.loadUserGroups=async()=>{const{user:e,portal:t}=null!==i.c&&void 0!==i.c?i.c:{};if(!this.groups&&e&&t){this.groups=await(0,l.i)(t,e.username);const{groupId:r,excludeGroupId:s}=this.store.state;this.groups=this.groups.filter((e=>!(r&&e.id===r||s&&e.id===s)))}},this.handleSearchInput=e=>{const t=e.target;this.searchTerm=t.value},this.groupId=void 0,this.expanded=void 0,this.groups=void 0,this.searchTerm=""}async componentWillLoad(){var e;this.store=(0,a.g)(this.el),this.i18n=null===(e=await(0,n.g)(this.el))||void 0===e?void 0:e.filterMyGroups}async componentDidLoad(){this.loadUserGroups(),(0,i.o)("user",this.loadUserGroups),(0,i.o)("portal",this.loadUserGroups),(0,o.a)("myGroup",this.store,(()=>{this.groupId=null}))}getEventDetail(){var e;const{groupId:t}=this,r=t?null===(e=this.groups)||void 0===e?void 0:e.find((e=>e.id===t)):null;return{id:"myGroup",param:"group",value:t||"",label:r?this.i18n.label.replace("${name}",r.title):""}}async emitEvent(){const e=await this.getEventDetail();this.arcgisMemberBrowserFilter.emit(e)}render(){const{user:e}=i.c,{groups:t}=this;return e&&(null==t?void 0:t.length)?(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.groupId,onArcgisBrowserFilterRemove:()=>{this.groupId=null},filterID:"myGroup"},(0,s.h)("div",null,t.length>15&&(0,s.h)("calcite-input",{type:"search",icon:"search",placeholder:this.i18n.searchMyGroups,onCalciteInputInput:this.handleSearchInput}),(0,s.h)("div",{class:"tree-wrapper"},(0,s.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:e=>{var t,r;const s=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.groupId)||"";this.groupId===s?this.groupId=null:this.groupId=s,this.emitEvent()}},null==t?void 0:t.filter((e=>!this.searchTerm||e.title.toLowerCase().includes(this.searchTerm))).map((e=>(0,s.h)("calcite-tree-item",{key:e.id,"data-group-id":e.id,selected:e.id===this.groupId},(0,s.h)("a",null,e.title)))))))):null}get el(){return(0,s.a)(this)}};c.style=".tree-wrapper{max-height:14rem;overflow:auto}"},16405:(e,t,r)=>{r.d(t,{g:()=>i});var s=r(64099);async function i(e){const t=await(0,s.g)(e,"arcgis-member-browser");return t&&t.length?t[0]:null}},23966:(e,t,r)=>{r.d(t,{a:()=>n,g:()=>o,o:()=>a});var s=r(37762),i=r(74174);function o(e){return(0,i.g)(e,"arcgis-member-browser")}const n=(e,t)=>{e.onChange("view",(e=>{t(e)}))};(0,s.c)({type:"member-browser",includeExternalUsers:!1});const a=(e,t)=>{e.onChange("sort",(e=>{t(e)}))}},74174:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>a,g:()=>c,i:()=>i,o:()=>n});var s=r(15332);const i=e=>"item-browser"===e.state.type,o=(e,t,r)=>{t.onChange("filters",(t=>{t[e]&&t[e].value||r()}))},n=(e,t)=>{e.onChange("preview",(e=>{t()}))},a=(e,t)=>{e.onChange("groupId",(e=>{t()}))},l=new Map;function c(e,t){const r=l.get(e);if(r)return r;const i=(0,s.c)(e,t);return i?(l.set(e,i.store),i.store):null}}}]);