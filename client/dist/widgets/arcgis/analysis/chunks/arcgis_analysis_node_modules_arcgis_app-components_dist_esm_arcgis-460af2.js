/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2"],{1278:(e,t,a)=>{a.d(t,{a:()=>b,h:()=>g,i:()=>y});var i=a(33483),r=a(50020),o=a(59317),n=a(87744),s=a(5042),c=a(72257),l=a(3826),d=a(15912),p=a(11163),u=a(32710),h=a(49770);const y=async(e,t)=>{var a;const{existingItemType:i,portal:s,existingItemPublishType:y}=t;o.c.initialFolder=null!==(a=await(0,r.b)(e,e.itemOwner))&&void 0!==a?a:(0,r.d)(e.itemOwner);let b=e.type;"GeoJSON"===b&&(b="GeoJson"),l.a.initialTitle=e.title,c.i.categories=e.categories,c.i.snippet=e.snippet;const g=e.tags;switch(Array.isArray(g)?c.i.tags=g||[]:c.i.tags=(null!=g?g:"").split(","),l.a.id=e.id,l.a.type=b,l.a.fileName=e.name,l.a.existingItem=e,l.a.enablePublishing=!0,l.a.newItemMode=i,i){case"file":l.a.extension=d.a[b].fileExt[0];break;case"tileLayer":const{id:t,url:a,title:i}=e,[{layers:r,tables:o,serviceInfo:c}]=await Promise.all([(0,u.v)({serviceUrl:a,restBaseUrl:(0,n.g)(s),forceAddToken:!0})]),{result:g}=await(0,h.f)({itemId:t,itemUrl:a,publishType:"vectorTiles"===y?"vector":"raster",portal:s,fullLayers:r});if(l.a.sourceTitle=i,l.a.tileLayerPublishType=y,"3dTiles"===l.a.tileLayerPublishType){l.a.tilesLayer3dTilesLayerType=p.D;break}l.a.tileLayerData=g,l.a.tileAutoCreation=!s.isPortal,l.a.tileLayerBasemapType="standard",l.a.tileLayerBasemapUrl="",l.a.tileLayerFromFeatureLayer=!0,l.a.tileLayerLayers=r,l.a.tileLayerTables=o,l.a.tileLayerServiceInfo=c}},b=e=>{l.a.newItemMode="dataStore",l.a.type="Data Store",(null==e?void 0:e.portal.isPortal)||(l.a.typeKeywords=["Data Store connection"])},g=async(e,t)=>{var a,r;l.a.newItemMode="developerCredentials",l.a.type="Application";const{result:o}=await(0,i.g)(t,e),n=!(null===(a=null==o?void 0:o.options)||void 0===a?void 0:a.includes("NoApiKeys"))&&(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:user:generateApiTokens")),c=!((0,s.g)("oauth_only_register_app",!0)||window.localStorage.getItem("oauth_only_register_app"));return n?"developerCredentialsSelect":(l.a.developerCredentialsType="oauth",c?"developerCredentialsSelect":(l.a.breadcrumbs=["oauthCredentialType"],"developerCredentialsInput"))}},22777:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_data_store_select:()=>d});var i=a(87849),r=a(83929),o=a(59317),n=a(3826),s=a(95878),c=a(28748),l=a(1278);a(50637),a(931),a(93814),a(87744),a(37762),a(63054),a(76246),a(15912),a(33483),a(50020),a(50822),a(72257),a(86562),a(15332),a(11163),a(32710),a(24869),a(75294),a(38295),a(51102),a(56175),a(43555),a(49770);const d=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.options={folder:{page:"dataStoreSelectFolder",enabled:!0},database:{page:"dataStoreSelectDatabaseType",enabled:!0},cloud:{page:"dataStoreSelectCloud",enabled:!0}},this.cloudOptions=["amazon","azure"],this.databaseOptions=["bigquery","databricks","snowflake"],this.selected="folder",this.pipelineCloudSelection="amazon",this.pipelineDatabaseSelection="bigquery",this.serverList=[]}async componentWillLoad(){const e=o.c.portal,t=o.c.user;(0,l.a)({portal:o.c.portal}),this.i18n=s.u.i18n.dataStoreSelect,this.isPortal=o.c.portal.isPortal,this.isPortal?this.selected="folder":this.selected="database",this.tileStrings=s.u.i18n.dataStoreSelectDatabase.pipelineProviders,this.serverList=await(0,r.b)(t,e),this.filterServers();(await(0,r.f)(e)).blockBetaApps&&(this.databaseOptions=this.databaseOptions.filter((e=>"databricks"!==e)))}filterServers(){if(!o.c.portal.isPortal)return this.options.folder.enabled=!1,this.options.database.enabled=!0,void(this.options.cloud.enabled=!0);const e=this.serverList.filter((function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()}));e.length&&(n.a.hostingServer=e[0]);const t=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("KNOWLEDGE")>-1})),a=o.c.config.noSQLEnabled;n.a.noSqlEnabled=!!(null==t?void 0:t.length)&&a&&!(0,c.i)()}handleNext(){let e;const t=this.selected;if(n.a.addDataStoreType=t,n.a.dataStoreSelectServerList=this.serverList,this.isPortal)e=this.options[t].page;else if("cloud"===this.selected)n.a.addDataStoreType="cloud",n.a.provider=this.pipelineCloudSelection,e="dataStoreSelectCloudCredentials";else switch(n.a.addDataStoreType="database",n.a.databaseProvider=this.pipelineDatabaseSelection,this.pipelineDatabaseSelection){case"bigquery":e="dataStoreBigQueryCredentials";break;case"databricks":e="dataStoreDatabricksCredentials";break;case"snowflake":e="dataStoreSnowflakeCredentials"}this.newItemUpdatePage.emit(e)}render(){const{i18n:e,options:t,cloudOptions:a,databaseOptions:r,tileStrings:o}=this;let s="cloud"===this.selected?a:r;return(0,i.h)("div",{key:"96c44392ff412a776571345cfedfef1ccac5957a"},(0,i.h)("arcgis-new-item-description",{key:"9ef0d456013b4efde30b6e95d6ac207e63a6b598",header:e.heading}),(0,i.h)("calcite-tile-select-group",{key:"f060e39095f0d13a74a5c6b91a85f5ec1e74e9a0",layout:"vertical",class:"tile-select-group"},Object.keys(t).map((a=>{let r;return r=this.isPortal?n.a.noSqlEnabled?e.options.database.descriptionNoSql:e.options.database.description:e.databaseDescriptionForOnline,t[a].enabled&&(0,i.h)("calcite-tile-select",{key:a,class:"tile-select",checked:this.selected===a,heading:e.options[a].title,description:"database"===a?r:e.options[a].description,name:"data-store-selection","input-enabled":!0,width:"full",type:"radio",value:a,onCalciteTileSelectChange:e=>{this.selected=e.currentTarget.value}})}))),!this.isPortal&&(0,i.h)("div",{key:"6e5b181ae3cc6f247de375c71360129e68a1e549",class:"dynamic-select"},(0,i.h)("arcgis-new-item-description",{key:"60336898b798e38c8a656acd95f6e617a72da2d9",class:"dynamic-header",header:"cloud"===this.selected?e.subOptionsCloudDescription:e.subOptionsDatabaseDescription}),(0,i.h)("calcite-tile-select-group",{key:"b82b9551079cd3567695d1832905103c7b453211",layout:"vertical"},s.map((e=>(0,i.h)("calcite-tile-select",{key:e,"input-enabled":!0,checked:s[0]===e,width:"full",type:"radio",value:e,heading:o[e].title,description:o[e].description,onCalciteTileSelectChange:e=>{"cloud"===this.selected?this.pipelineCloudSelection=e.currentTarget.value:this.pipelineDatabaseSelection=e.currentTarget.value}}))))))}};d.style=".tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.dynamic-header{margin-bottom:1.5rem;margin-top:1.5rem;display:block}"},28748:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>u,c:()=>n,d:()=>p,e:()=>m,f:()=>c,g:()=>y,h:()=>S,i:()=>v,j:()=>l,k:()=>d});var i=a(50637),r=a(59317),o=a(63054);function n(e,t){const a={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(a.clientPath=e.publisherFolderPath,a.info.path=e.newServerFolderPath,a.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(a.clientPath=e.publisherFolderPath,a.provider="UserManaged",a.info.datastoreConnectionType="replicated",a.info.fileServerPath=e.nfsSharePath,a.info.fileServerHost=e.nfsHostName,a.info.fileServerType="nfs"),a}function s(e,t){const a={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(a.info.connectionString=e.serverConnectionString,a.info.clientConnectionString=e.publisherConnectionString,a.info.dataStoreConnectionType="replicated"):"bigquery"===e.databaseProvider||"snowflake"===e.databaseProvider?(a.info.JDBCConnection=e.jdbcConnection,a.info.implementation=e.databaseProvider):"databricks"===e.databaseProvider?(a.provider=e.databaseProvider,a.info.connectionProperties=e.connectionProperties,a.info.implementation=e.databaseProvider):a.info.connectionString=e.publisherConnectionString,a}const c=async(e,t,a,i)=>{let r,o;if((null==a?void 0:a.length)>0){try{o=JSON.parse(a)}catch(e){return{error:{code:"invalidJSON"}}}r=function(e,t){const{type:a,project_id:i,private_key_id:r,private_key:o,client_email:n,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:p}=t,u={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:a,project_id:i,private_key_id:r,private_key:o,client_email:n,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:p}};return u}(e,o)}else(null==i?void 0:i.length)>0&&(r=function(e,t,a){const i={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:a};return i}(e,t,i));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{implementation:"bigquery",JDBCConnection:r}}}};function l(e){let t;const{server:a,httpPath:i,catalog:r,clientId:o,secret:n,token:s,authenticationType:c}=e,l=Object.assign({hostname:a,port:443,httpPath:i},r?{catalog:r}:{});return"oAuthMachineToMachine"===c?t=Object.assign({authenticationScheme:"oauth2",authenticationFlow:"machineToMachine",oauth2ClientId:o,oauth2Secret:n},l):"personalAccessToken"===c&&(t=Object.assign({authenticationScheme:"personalAccessToken",token:s},l)),{path:"/enterpriseDatabases/databricks",type:"egdb",provider:"databricks",info:{implementation:"databricks",connectionProperties:t}}}function d(e){let t;const{authenticationType:a,user:i,database:r,role:o,server:n,warehouse:s,schema:c,password:l,keyFile:d,passcode:p}=e,u={user:i,database:r,role:o,connectionUrl:`jdbc:snowflake://${n}`,warehouse:s,schema:c};return t="keyPair"===a?Object.assign(Object.assign({},u),{passcode:p||void 0,authenticator:"snowflake_jwt",keyfile:d}):Object.assign(Object.assign({},u),{password:l,authenticator:"snowflake"}),{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{implementation:"snowflake",JDBCConnection:t}}}function p(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const a={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?a.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete a.info.connectionProperties.fallbackServerAddresses,a}function u(e,t){const a=e.provider,i={info:{}},r={credentialType:"accesskey"};return"amazon"===a&&("accessKey"===e.credentialType?(r.accessKeyId=e.accessKey,r.secretAccessKey=e.secretKey):r.credentialType=e.credentialType,"custom"===e.selectedRegion.id?r.regionEndpointUrl=e.storageURL:(r.regionEndpointUrl=h(e.regions,e.selectedRegion),r.region=e.selectedRegion.id),i.info.objectStore=e.bucketName,i.provider="amazon"),"google"===a&&(r.accessKeyId=e.accessKey,r.secretAccessKey=e.secretKey,r.regionEndpointUrl="https://storage.googleapis.com",i.info.objectStore=e.bucketName,i.provider="Google"),"azure"!==a&&"azuredatalakegen2store"!==a||("sharedKey"===e.azureAuthenticationType?(r.credentialType="accessKey",r.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(r.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(r.tenantId=e.tenantId,r.clientId=e.clientId,r.clientSecret=e.clientSecret,r.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(r.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(r.credentialType=e.azureAuthenticationType,r.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(r.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?r.regionEndpointUrl=e.endpoint:r.accountEndpoint=h(e.regions,e.environment),"azure"===a?(i.info.objectStore=e.containerName,i.provider="azure"):(i.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.j)(e.cloudFolder)}`:e.containerName,i.provider="azureDataLakeStore"),"azureGeocatalog"===e.selectedServiceType?(r.tokenGenerationUrl=e.tokenGenerationUrl,r.scopes=[e.scope]):"microsoftPlanetaryComputers"===e.selectedServiceType&&(r.tokenGenerationUrl=e.tokenGenerationUrl),"anonymous"!==e.azureAuthenticationType&&"microsoftPlanetaryComputers"!==e.selectedServiceType&&(r.accountName=e.accountName)),"alibaba"===a&&(r.accessKeyId=e.accessKey,r.secretAccessKey=e.secretKey,i.info.objectStore=e.bucketName,i.provider="Alibaba",r.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:h(e.regions,e.selectedRegion)),r.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==a&&(i.info.objectStore=i.info.objectStore+"/"+(0,o.j)(e.cloudFolder)),i.type="cloudStore",["azureGeocatalog","microsoftPlanetaryComputers"].includes(e.selectedServiceType)&&("azureGeocatalog"===e.selectedServiceType?i.path="/cloudStores/azureGeocatalog":i.path="/cloudStores/microsoftPlanetaryComputers"),i.path="/cloudStores/"+t,i.info.connectionString=JSON.stringify(r),i}function h(e,t){let a;return e.forEach((function(e){e.id===t.id&&(a=e.blobStoreEndpoint||e.storageEndpointSuffix)})),a}const y=async(e,t)=>{const a=e.results.out_connectionString.paramUrl,r=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${a}`,o=await(0,i.r)(r);return b(o)},b=e=>{const t=e.value;return{connectionStringProps:g(t),connectionString:t}},g=e=>{let t=[];return e&&e.split(";").forEach((e=>{const a=e.split("=");2!==a.length||f(t,a[0])||t.push({key:a[0],value:a[1]})})),t},f=(e,t)=>e.some((e=>e.key===t)),v=()=>{var e;const t=r.c.portal,a=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===a},m=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`},S=(e,t,a,i)=>{var r;return Object.assign(Object.assign({},e),{children:null===(r=e.children)||void 0===r?void 0:r.filter((e=>{const r=e.type;let o=!1;return"folder"===r||("tile-layer"===a?o||(o="tiles"===i&&"cacheDataset"===r||"3dTiles"===i&&"3DTilesDataset"===r||"vectorTiles"===i&&"vectorCacheDataset"===r):"scene-layer"===a&&(o=k(e,r,t)),o)}))})},k=(e,t,a)=>{let i=!1;return a?"lasd"===e.path.split(".").pop().toLowerCase()?i=!1:i||(i="LASDataset"===t||"LIDARExchangeFile"===t):i||(i="extractedScenePackage"===t||"i3sRestCache"===t),i}},33483:(e,t,a)=>{a.d(t,{a:()=>o,g:()=>n});var i=a(50637),r=a(87744);const o=async e=>{try{return{result:await(0,i.r)(`${(0,r.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},n=async(e,t)=>await(0,i.f)((()=>o(e)),"subscriptionType",(0,i.d)(t))}}]);