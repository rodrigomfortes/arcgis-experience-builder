"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-82d556"],{998:(e,t,i)=>{i.d(t,{R:()=>o});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const r="fromUnitHelpClickHandler",l="toUnitHelpClickHandler",o=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.unitTypes={speed:[100,101,102,103,104],temperature:[200,201,202],distance:[1,3,4,5,6,7,8,9,10,12],sound:[300,301,302,303]},this.helpActionClickEventHandlers=new Map,this.unitsEnum=[],this.toUnitsEnum=[],this.handleFromUnitChange=e=>{e.stopPropagation();const t=e.target,i=parseInt(t.value);this.fromUnitValue=i,this.fromUnit.value=i,this.configureFromUnitEnum()},this.handleToUnitChange=e=>{e.stopPropagation();const t=e.target,i=parseInt(t.value);this.toUnitValue=i,this.toUnit.value=i}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setupInitialState(),this.configureFromUnitEnum()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){const e=this.widgetArgs.inputArgs.FromUnit;this.fromUnit=e,this.fromUnitValue=e.value;const t=this.widgetArgs.inputArgs.ToUnit;this.toUnit=t,this.toUnitValue=t.value}setupInitialState(){const{rasterFunctionEnums:e}=this.widgetArgs;!0!==(0,s.i)(e?.esriUnitConversionFxUnitTypes)&&(this.unitsEnum=e.esriUnitConversionFxUnitTypes.map((e=>({key:String(e.key),label:e.label}))))}configureFromUnitEnum(){const e=this.fromUnitValue,t=Object.keys(this.unitTypes).find((t=>this.unitTypes[t].includes(e)));!0!==(0,s.i)(t)&&(this.toUnitsEnum=this.unitsEnum.filter((e=>this.unitTypes[t].includes(parseInt(e.key)))));const i=String(this.toUnitValue);!0!==this.toUnitsEnum.some((e=>e.key===i))&&(this.toUnitValue=parseInt(this.toUnitsEnum[0]?.key),"sound"===t&&(this.toUnitValue=301))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.fromUnit.displayName,referenceElement:this.fromUnitWidgetContainer,helpTextID:this.fromUnit?.helpTextID}),t=this.widgetArgs.onHelpActionClick({heading:this.toUnit.displayName,referenceElement:this.toUnitWidgetContainer,helpTextID:this.toUnit?.helpTextID});this.helpActionClickEventHandlers.set(r,e),this.helpActionClickEventHandlers.set(l,t)}render(){return(0,a.h)("div",{key:"b88a48e450be5fbbd1738dad7873ed2469ce1e97",class:"esriRFxBandCombinationEditor"},(0,a.h)("calcite-label",{key:"80df12dfb82fb068e0f28f100667c494dd7b9a23",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.fromUnitWidgetContainer=e}},(0,a.h)("rfx-label",{key:"16965179294fe940e22fc913833128b5f4211afb",label:this.fromUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dtex-common-select",{key:"335024c49ff0c804965a4998aa42929d5507825f",mode:this.widgetArgs.mode,options:this.unitsEnum,value:String(this.fromUnitValue),onRfxArgumentChange:this.handleFromUnitChange})),(0,a.h)("calcite-label",{key:"dd421d1ae286a82f6d71b286cd55b5a37ea08bf0",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.toUnitWidgetContainer=e}},(0,a.h)("rfx-label",{key:"d4fe0edd81be6dd8c14f3a58e1578e9cb574fbbb",label:this.toUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("rfx-dtex-common-select",{key:"1643c25e62190265237db720d8004743b20b5d9c",mode:this.widgetArgs.mode,options:this.toUnitsEnum,value:String(this.toUnitValue),onRfxArgumentChange:this.handleToUnitChange})))}get hostElement(){return(0,a.g)(this)}}},5085:(e,t,i)=>{i.d(t,{R:()=>u});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),n=i(92991),r=i(93442),l=i(33797),o=i(48001),h=i(42335);i(23795),i(17902),i(56451),i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const d="rfx-cte-named-raster-editor",c={nameColumn:`${d}__name-column`,layerColumn:`${d}__layer-column`,layerValidation:`${d}__layer-validation-msg`},g="rasterVariablesHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.gridLayout={inputName:{uiType:h.G.textInput,style:c.nameColumn},assignment:{uiType:h.G.text,constValue:"="},raster:{uiType:h.G.raster,allowScalar:!0,style:c.layerColumn}},this.helpActionClickEventHandlers=new Map,this.gridOptions=[],this.isValid=!0,this.updateWidgetArgs=e=>{const{detail:{gridOptions:t}}=e,i=[],a=[];t.forEach(((e,s)=>{if(s===t.length-1)return;const r=(0,n.E)(e.raster);if(!(0,n.i)(r)){r._object_id=e?._object_id;const t=r?.name.replace(/[0-9]/g,"");"raster"===t?.toLowerCase()&&(r.name=0===s?t:`${t}${s}`)}i.push(e.inputName),a.push(r)}));const s=this.widgetArgs.inputArgs;s.Rasters&&((0,n.i)(s.Rasters.value)?s.Rasters.value={elements:a,type:"ArgumentArray"}:s.Rasters.value.elements=a),s.InputNames&&(s.InputNames.value=i)}}async checkValidity({required:e}){let t=!0;return e&&(t=this.validateInputArgs(this.widgetArgs)),t}async componentWillLoad(){({strings:this.strings}=await(0,s.c)(this.hostElement,(0,a.a)("."))),await this.readInputArgs()}componentDidLoad(){this.attachHelpClickEventHandlers()}async readInputArgs(){const e=this.widgetArgs.inputArgs,t=e?.InputNames?.value??[],i=e?.Rasters,a=i?.value?.elements||i?.value||[],s=Math.max(t.length,a.length);let l=0;do{const e=a[l],i=(0,o.p)(e);let s;if((0,n.i)(i)){let t=e?.value;"number"==typeof t&&(t={type:"Scalar",value:t},e.value=t),(0,n.i)(t?.url)||(e.value=await(0,r.w)(t,this.widgetArgs.inputLayers))}else s=this.widgetArgs.getRFT(i);this.gridOptions.push({id:l,inputName:t[l],rasterElement:e,raster:s??e,_object_id:e?._object_id}),l++}while(l<=s)}validateInputArgs({inputArgs:e}){this.isValid=!0;const t=e?.InputNames?.value??[],i=e?.Rasters,a=i?.value?.elements||i?.value||[];let s=Math.max(t.length,a.length);s=0===s?1:s;return this.isValid=new Array(s).fill(0).every(((e,i)=>((e,t)=>{let i=!0;return((0,n.i)(e)||(0,n.i)(t))&&(i=!1),i})(t[i],a[i]))),this.isValid}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.rasterVariables,referenceElement:this.variablesContainer,helpTextID:this.widgetArgs.helpTextIDs?.calculator_rastervariables});this.helpActionClickEventHandlers.set(g,e)}render(){return(0,a.h)("div",{key:"719dd4e27efe0e1d40c22374efb22a159e56fe89"},(0,a.h)("calcite-label",{key:"bc44928e3dd5f35b161976b0efbcb1fee421680d",alignment:"start",scale:l.U.Scale,layout:"default",ref:e=>{this.variablesContainer=e}},(0,a.h)("rfx-label",{key:"b7748ad594d64d1f414ca34f8743f0ac16cee72c",label:this.strings.rasterVariables,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),(0,a.h)("rfx-grid",{key:"1437713c6b8c4a5cf9d3f7908ee21960e70d3c24",inputLayers:this.widgetArgs.inputLayers,gridLayout:this.gridLayout,gridOptions:this.gridOptions,onRfxGridOptionChange:this.updateWidgetArgs,hasHeader:!1,hasIdColumn:!1,canAdd:!0,canRemove:!0,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick}),(0,a.h)("calcite-input-message",{key:"995cd9a8adb67fe7f0e738c88557663387bf46ec",class:c.layerValidation,status:"invalid",scale:l.U.Scale,hidden:!0===this.isValid,icon:"exclamationMarkTriangle"},this.strings.inValidInput)))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};u.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-named-raster-editor__name-column{width:5rem}.rfx-cte-named-raster-editor__layer-validation-msg{margin-top:0.5rem}"},20287:(e,t,i)=>{i.d(t,{R:()=>g});var a=i(83628),s=i(5839),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(24360)),r=i(92991),l=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(42335)),o=i(33797),h=(i(23795),i(17902),i(56451),i(95069));i(71802),i(44345),i(32513),i(36596);const d={outputBitColumn:"rfx-cte-transpose-bit__outputBit-column"},c="bitPatternHelpClickHandler",g=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={widgetLabel:void 0,widgetContainer:void 0},this.gridSchema={gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,canAdd:!1,hasIdColumn:!1,canRemove:!1,isStacked:!1},this.store=[],this.helpActionClickEventHandlers=new Map,this.gridStore=[],this.handleBitPatternChange=e=>{e.stopPropagation();const t=e.target.value;this.bitPattern=t,this.widgetArgs.rfxArgs.QualityClass=this.bitPattern;const i=this.createDataObjects(this.bitPattern);this.gridStore=i},this.updateGridValue=e=>{const{detail:{gridOptions:t}}=e;if((0,r.i)(t))return;const i=this.gridStore;this.gridStore=[...i]}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),await this.setupInitialState(this.widgetArgs)}componentWillRender(){this.initGrid(),this.setWidgetValue(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers(this.widgetArgs)}get isBitPatternUserDefined(){return"qcbp_UserDefined"===this.bitPattern}async setupInitialState({rfxArgs:e}){this.uiElements.widgetLabel=this.strings.bitPattern;const t=(await(0,n.g)()).esriTransposeBitPatterns;this.store=(0,r.E)(t),this.store?.forEach((e=>{e.key=e.key.toString()})),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");let i=e?.QualityClass;(0,r.i)(i)&&(i=this.store[0].key,e.QualityClass=i),this.bitPattern=i;const a=this.createDataObjects(this.bitPattern);this.gridStore=a}createDataObjects(e){return Array.from({length:8},((t,i)=>{const a=String(i);let s="";if(this.isBitPatternUserDefined){const{InputBitPositions:e,OutputBitPositions:t}=this.widgetArgs.inputArgs,a=e.value??[],n=(t.value??[]).indexOf(i);s=n>-1?a[n]:void 0}else{s=n.t[e][i]}return{id:i+1,outputBit:a,inputBit:s}}))}initGrid(){const e={outputBit:{uiType:l.G.text,label:this.strings.outputBit,style:d.outputBitColumn},inputBit:{uiType:this.isBitPatternUserDefined?l.G.number:l.G.text,label:this.strings.inputBit}},t=this.gridStore;this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}setWidgetValue({inputArgs:e}){const{inputBit:t,outputBit:i}=this.gridStore.reduce(((e,t)=>((0,h.i)((0,h.p)(t.inputBit))&&(e.inputBit.push((0,h.p)(t.inputBit)),e.outputBit.push((0,h.p)(t.outputBit))),e)),{inputBit:[],outputBit:[]}),{InputBitPositions:a,OutputBitPositions:s}=e;a.value=t,s.value=i}attachHelpClickEventHandlers({helpTextIDs:e}){const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.widgetLabel,referenceElement:this.uiElements.widgetContainer,helpTextID:e.transposebits_bitpattern});this.helpActionClickEventHandlers.set(c,t)}render(){return(0,a.h)("div",{key:"e27fcd0d9fa6ca783dab6d9a12cd7956ee0896c3"},(0,a.h)("calcite-label",{key:"86cc0f114484d03f7bb1b3955e6b4d30f7a1ec1e",alignment:"start",scale:o.U.Scale,layout:"default",ref:e=>{this.uiElements.widgetContainer=e}},(0,a.h)("rfx-label",{key:"212e473001d665823b8fcd018b5520f67357ff47",label:this.uiElements.widgetLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(c)()}),(0,a.h)("rfx-dtex-common-select",{key:"ed0392733c3d04cb988b3c14a1b2f95be85037a5",mode:this.widgetArgs.mode,options:this.store,value:String(this.bitPattern),onRfxArgumentChange:this.handleBitPatternChange}),(0,a.h)("rfx-grid",{key:"4664fa419e4f7e0c74a2b1404d5227a0577db5cf",hasHeader:this.gridSchema.hasHeader,canAdd:this.gridSchema.canAdd,hasIdColumn:this.gridSchema.hasIdColumn,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,canRemove:this.gridSchema.canRemove,isStacked:this.gridSchema.isStacked,onRfxGridOptionChange:this.updateGridValue})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};g.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-transpose-bit__outputBit-column{width:50%}"},20644:(e,t,i)=>{i.d(t,{R:()=>u});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),n=i(92991),r=i(93442),l=i(33797),o=i(42335),h=(i(23795),i(17902),i(56451),i(95069));i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const d="rfx-cte-weighted-sum-table-editor",c={grid:`${d}__grid`,layerColumn:`${d}__layer-column`,fieldColumn:`${d}__field-column`,weightColumn:`${d}__weight-column`},g="weightedSumTableHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.gridSchema={canAdd:!0,gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,hasIdColumn:!0},this.updateValue=e=>{const{detail:{gridOptions:t}}=e,{inputArgs:i}=this.widgetArgs;if((0,n.i)(t)||(0,n.i)(i))return;const a=[],s=[],r=[];t.forEach(((e,i)=>{if(i===t.length-1)return;const{layer:n,field:l,weight:o}=e;a.push(n),s.push(l),r.push((0,h.p)(o)??1)}));const l=i.Rasters,o=i.Fields,d=i.Weights;(0,n.i)(l.value)?l.value={elements:a,type:"ArgumentArray"}:l.value.elements=a,o.value=s,d.value=r}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),await this.initGrid()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){return await this.gridElement.checkValidity()}async createGridOptions(){const{inputArgs:e}=this.widgetArgs;if((0,n.i)(e))return;let t=0,i=0;const a=[],s=e.Rasters,l=e.Fields,o=e.Weights,h=s.value?.elements??s.value??[];if((0,n.i)(s)||(0,n.i)(l)||(0,n.i)(o)||(t=Math.max(h?.length,l.value?.length||0,o.value?.length||0)),(0===t||isNaN(t))&&a.push({id:0}),t>0&&((0,n.i)(o.value)||o.value.length<t)){let e=0;const i=o.value??[];for(;e<t;)(0,n.i)(o.value?.[e])&&i.push(1),e++;o.value=i}for(;i<t;){const e=h?.[i],t=e?.value;(0,n.i)(t?.url)||(e.value=await(0,r.w)(t,this.widgetArgs.inputLayers)),a.push({id:i,rasterElement:e,layer:e,field:l.value?.[i],weight:o.value?.[i]}),i++}return a}async initGrid(){const e={layer:{allowScalar:!1,label:this.strings.layer,uiType:o.G.raster,style:c.layerColumn,validationRule:{required:!0}},field:{label:this.strings.field,uiType:o.G.field,style:c.fieldColumn},weight:{label:this.strings.weight,uiType:o.G.number,style:c.weightColumn,validationRule:{required:!0,defaultValue:0,initialValue:1}}},t=await this.createGridOptions();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.weightedSumTable,referenceElement:this.weightedSumTableElement,helpTextID:this.widgetArgs.helpTextIDs?.weightedsum_weightedsumtable});this.helpActionClickEventHandlers.set(g,e)}render(){return(0,a.h)("div",{key:"9182d2da5878aee982aa2471ee5d2d78941337a2"},(0,a.h)("calcite-label",{key:"ec58b9864fe93aba02a8436d052ea9bbdb430d5f",alignment:"start",scale:l.U.Scale,layout:"default",ref:e=>{this.weightedSumTableElement=e}},(0,a.h)("rfx-label",{key:"e2c46fda33367ea9aed8e1d321222cf40fdd1ab6",label:this.strings.weightedSumTable,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),(0,a.h)("rfx-grid",{key:"dc4bb8b9d8f3aa24a4de62ed8bf4cd39e2b08ed4",canAdd:this.gridSchema.canAdd,class:c.grid,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,hasHeader:this.gridSchema.hasHeader,hasIdColumn:this.gridSchema.hasIdColumn,inputLayers:this.widgetArgs.inputLayers,onRfxGridOptionChange:this.updateValue,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick,ref:e=>{this.gridElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};u.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-weighted-sum-table-editor__grid table{width:100%;table-layout:fixed}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__layer-column{width:40%}.rfx-cte-weighted-sum-table-editor__field-column{width:30%}.rfx-cte-weighted-sum-table-editor__weight-column{width:16%}"},21806:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(83628),s=i(5839),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(33797));i(23795),i(17902),i(56451),i(71802),i(44345),i(32513),i(36596);const l="inputArgHelpClickHandler",o="sizeArgHelpClickHandler",h=1,d=100,c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={sizeArgLabel:void 0,sizeArgContainer:void 0},this.isRasterSet=!1,this.helpActionClickEventHandlers=new Map,this.handleRasterChange=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,i=await t.getSelectedLayer();let a=3;if(i){a=(await(i?.generateRasterInfo(i.rasterFunction))).bandCount,this.isRasterSet=!0}else this.isRasterSet=!1;this.widgetState={...this.widgetState,size:a}}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.setupInitialState()}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){const e=await(this.inputElement?.checkValidity());return Promise.resolve(e)}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement}));const i=t.Raster;i?.input?.addEventListener("rfxArgumentChange",(()=>{this.handleRasterChange()})),(0,n.i)(i.value?.url)||(this.isRasterSet=!0)}setupInitialState(){this.uiElements.sizeArgLabel=this.strings.size;const e=this.inputArg.value,t=(0,n.i)(e)?3:Math.sqrt(e.length);this.widgetState=(0,n.E)({size:t,value:e}),this.value=e}setWidgetValue(){this.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(l,e)}onSizeChange(e){!e||e<=0||(this.widgetState={...this.widgetState,size:e})}render(){return(0,a.h)("div",{key:"7fe9463f30243ec5b571a3513ae6db7be3dfd7b7"},(0,a.h)("calcite-label",{key:"55bcf20e6acab24b836116c62da6246fb5e37580",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"2bebe154d499a2ebff58c9c5189ac37b15d3fe37",label:this.inputArg.displayName,hideHelp:(0,n.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(l)()}),(0,a.h)("rfx-simple-matrix",{key:"e3151269230d435fd4c505006e4ecf0a49c6705f",columns:this.widgetState.size,rows:this.widgetState.size,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,n.v)(this.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:!0,ref:e=>{this.inputElement=e}})),this.isRasterSet?null:(0,a.h)("calcite-label",{alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.uiElements.sizeArgContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.sizeArgLabel,referenceElement:this.uiElements.sizeArgContainer,helpTextID:this.widgetArgs.helpTextIDs.spectralconversion_size});this.helpActionClickEventHandlers.set(o,t)}},(0,a.h)("rfx-label",{label:this.uiElements.sizeArgLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(o)()}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.size,onRfxNumberInputChange:e=>{if(e.stopPropagation(),null!==e.target){const t=(e?.target).value;this.onSizeChange(t)}},min:h,max:d,required:!0,ref:e=>{this.inputElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};c.style=""},25103:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(83628),s=i(5839),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const r="subsetBandCombinationHelpClickHandler",l="range-container",o="dropdown",h="add-button",d=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.rfxArgHelpClick=(0,a.c)(this,"rfxArgHelpClick"),this.helpActionClickEventHandlers=new Map,this.ranges="",this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method);const i=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",a=this.getBandOptions(i);return this.options=a,this.selectedMin=a[0]?.label||"",2!==this.method&&(this.selectedMax=a[1]?.label||a[0]?.label||""),this.ranges="",this.method},this.handleMinimumChange=e=>{const t=e.detail;t&&(this.selectedMin=t.value)},this.handleMaximumChange=e=>{const t=e.detail;t&&(this.selectedMax=t.value)}}connectedCallback(){this.processWidgetArgs()}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.setupInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){if(!this.widgetArgs?.rasterArgs)return;this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",(()=>{this.updateRasterArg()}));const e=this.widgetArgs.triggerArgs.Method;this.method=e,e.input?.addEventListener("rfxArgumentChange",this.onMethodChange.bind(this))}setupInitialState(){this.updateRasterArg(),this.setMethodValue(),this.ranges=this.getRangeValue()}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Bands?.displayName,referenceElement:this.subsetBandCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.subsetbands_combination??this.widgetArgs.helpTextIDs?.labelbadbands_combination});this.helpActionClickEventHandlers.set(r,e)}async setMethodValue(){this.method=this.widgetArgs.triggerArgs?.Method?.value;const e=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",t=this.getBandOptions(e);this.options=t}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map((e=>({key:e.label.toString(),label:e.label})))}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?(await this.updateBandsOnLayerLoad(),await this.setMethodValue()):this.layer.when((async()=>{await this.updateBandsOnLayerLoad(),this._setupValues(),await this.setMethodValue()})))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[],i=[];const a=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),s=a?.keyProperties;if(s?.BandProperties?.forEach(((a,s)=>{e.push({label:String(s+1)}),t.push({label:a.BandName??`Band_${s+1}`}),i.push({label:a.Wavelength})})),!s.BandProperties||s.BandProperties&&!s.BandProperties.length){const i=this._getDefaultBandProperties(a.bandCount);t=i.bandNames,e=i.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelength:i}}_getDefaultBandProperties(e){const t=[],i=[],a=[];for(let s=1;s<=e;s++)t.push({label:String(s)}),i.push({label:`Band_${s}`}),a.push({label:String(s)});return{bandNames:i,bandIds:t,bandWavelength:a}}addRange(){let e;const t=this.options.find((e=>e.key===this.selectedMin))?.label||this.options[0]?.label,i=2!==this.method?this.options.find((e=>e.key===this.selectedMax))?.label||this.options[1]?.label:"";if(t){if(t===i||""===i)e=t;else{const a=[t,i].sort(((e,t)=>e.localeCompare(t)));e=`${a[0]}-${a[1]}`}return this.ranges=this.ranges?`${this.ranges} ${e}`:e,this.updateRangeValue(),this.ranges}}handleRangeInput(e){const t=e.target;this.ranges=t.value.split(" ").map((e=>e.trim())).filter((e=>e.length>0)).join(" ")}updateRangeValue(){const e=this.widgetArgs.inputArgs;e&&(e.Bands.value=this.ranges)}getRangeValue(){const e=this.widgetArgs.inputArgs;return e?.Bands?.value}render(){return(0,a.h)("div",{key:"a3e11426b757b9cd4a2952bf7e22f467841b0d73"},(0,a.h)("div",{key:"ddba88f25026941e99dca7142565b4d956ed83b7",class:l},(0,a.h)("calcite-label",{key:"0f0ce491c61d43a4e4741768708983b3515badad",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"3d80a65a812c72fb45f1f61a952ad73fccc472d0",label:this.strings.minimum,hideHelp:!0}),(0,a.h)("rfx-dtex-common-select",{key:"95e8c36e03dbe276f3be3f1fece7e08d2cb3d92a",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMin?this.selectedMin:this.options[0]?.label,class:o,onRfxArgumentChange:this.handleMinimumChange})),2!==this.method&&(0,a.h)("calcite-label",{key:"0b4c28a7ed83c972134691775505162d22a0ec4a",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"514088fe7f7331e74fe99fe5b7c7cdb2d5a3c335",label:this.strings.maximum,hideHelp:!0}),(0,a.h)("rfx-dtex-common-select",{key:"b40f874d5ced4c51d3224f90cc67ae4c5c37c0dd",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMax?this.selectedMax:this.options[1]?.label,class:o,hidden:2===this.method,onRfxArgumentChange:this.handleMaximumChange})),(0,a.h)("calcite-button",{key:"e3aae140105a068506d27acd717d65faeb0cb2a5",slot:"action","icon-start":"plus",scale:"s",width:"auto",class:h,onClick:()=>this.addRange()})),(0,a.h)("calcite-label",{key:"6412fef7dfff378aff5123dd38df26a72ddb0b0c",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"3e701bb740ab3259cc4b34e062cce76b9f45d457",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("calcite-input-text",{key:"c406c8975d7570ff4fc42ad23bc45f23822ab54d",scale:n.U.Scale,dir:this.direction,value:this.ranges,status:"idle",alignment:"start",onCalciteInputTextChange:e=>this.handleRangeInput(e),ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};d.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.range-container{display:flex;flex-direction:row;justify-content:space-between}.dropdown{width:150px;padding:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.add-button{width:auto;align-self:center;margin-top:1.6rem}"},26374:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(83628),s=i(48001),n=i(33797),r=i(92991),l=i(93442),o=(i(23795),i(17902),i(56451),i(95069));i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const h="changeTypeHelpClickHandler",d=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.alteredStateEnum=["0","1","2","3"],this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target,i=(0,o.p)(t.value);this.inputArg.value=i,this.value=i,this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){const i=e.ChangeType;this.inputArg=i,this.inputArg.key="ChangeType",i.input=this.hostElement,this.value=i.value;const a=t.Raster;this.rasterArg=a,a.input?.addEventListener("rfxArgumentChange",this.handleRasterChange.bind(this))}async setupInitialState({rfxArgs:e,rasterFunctions:t,triggerArgs:i}){this.value=this.inputArg.value;const a=t[(0,s.i)(e)],n=a?.rasterFunctionArguments,o=this.inputArg.key;this.value=this.inputArg.value;const h=n?.[o]?.domain;if("list"===h?.type){const e=h.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store?.forEach((e=>{e.key=e.key.toString()})),this.initialStore=(0,s.m)(this.store),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");const d=i.Raster,c=d?.input,g=await(c?.getSelectedLayer?.());await(0,l.o)(g)?this.handleIsChangeAnalysisTypeCCDC():this.handleIsChangeAnalysisTypeNotCCDC(),this.rfxArgumentChange.emit({value:this.value})}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.widgetArgs.helpTextIDs?.detectchange_changetype});this.helpActionClickEventHandlers.set(h,e)}async handleRasterChange(){const e=this.rasterArg?.input,t=await(e?.getSelectedLayer?.());await(0,l.o)(t)?this.handleIsChangeAnalysisTypeCCDC():this.handleIsChangeAnalysisTypeNotCCDC(),this.rfxArgumentChange.emit({value:this.value})}handleIsChangeAnalysisTypeCCDC(){this.widgetArgs.inputArgs.changeAnalysisType.value="CCDC",this.applyFilterToStore(this.alteredStateEnum)}handleIsChangeAnalysisTypeNotCCDC(){this.widgetArgs.inputArgs.changeAnalysisType.value="",this.resetStore()}applyFilterToStore(e){const t=((e,t)=>e.filter((e=>t.some((t=>e.key===t)))))(this.initialStore,e);this.store=t}resetStore(){this.store=this.initialStore}render(){return(0,a.h)("div",{key:"3b146c48729e2bde0de5204f26fcc4b1eb60067d"},(0,a.h)("calcite-label",{key:"f2881a59a8654694415d10dc4636d1956da3562a",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"dcbc0b3cea9bfed1bad61bb9176d5b9735e27987",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("rfx-dtex-common-select",{key:"2dc672550e7cd005e505e232e3a2d04b35500670",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}get hostElement(){return(0,a.g)(this)}}},32299:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(83628),s=i(48001),n=i(33797),r=i(92991);i(588),i(5294),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const l=[{name:"BlackSky",pansharpenWeights:[.85,.7,.35,1]},{name:"DubaiSat-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"GeoEye-1",pansharpenWeights:[.41,.16,.13,.3]},{name:"GF-1 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"GF-2 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"IKONOS",pansharpenWeights:[.378,.211,0,.411]},{name:"Jilin-1",pansharpenWeights:[.2501,.3646,0,.5]},{name:"KOMPSAT-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"KOMPSAT-3",pansharpenWeights:[.166,.167,.167,.5]},{name:"Landsat 1-5  MSS",pansharpenWeights:[0,0,0,0]},{name:"Landsat 7  ETM+",pansharpenWeights:[.11,.14,.14,.61]},{name:"Landsat 8",pansharpenWeights:[.42,.51,.07,0]},{name:"Landsat 9",pansharpenWeights:[.42,.51,.07,0]},{name:"Pleiades Neo",pansharpenWeights:[.45,.55,0,0]},{name:"Pleiades-1",pansharpenWeights:[.9,.75,.5,.5]},{name:"QuickBird",pansharpenWeights:[.85,.7,.35,1]},{name:"SkySat",pansharpenWeights:[.41,.16,.13,.3]},{name:"SPOT 5",pansharpenWeights:[.166,.167,.167,.5]},{name:"SPOT 6",pansharpenWeights:[.45,.55,0,0]},{name:"SPOT 7",pansharpenWeights:[.45,.55,0,0]},{name:"SuperView-1",pansharpenWeights:[.85,.7,.35,1]},{name:"TH-01",pansharpenWeights:[.329,.509,0,.162]},{name:"UltraCam",pansharpenWeights:[.326,.645,.029,0]},{name:"Vision-1",pansharpenWeights:[.42,.51,.07,0]},{name:"WorldView-2",pansharpenWeights:[.39,.23,.21,.17]},{name:"WorldView-3",pansharpenWeights:[.38,.25,.2,.16]},{name:"WorldView-4",pansharpenWeights:[.39,.23,.21,.17]},{name:"ZY1-02C PMS",pansharpenWeights:[.378,.211,0,.411]},{name:"ZY3-CRESDA",pansharpenWeights:[.329,.509,0,.162]},{name:"ZY3-SASMAC",pansharpenWeights:[.329,.509,0,.162]}],o="inputArgHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.sensorList=l,this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target.value;this.inputArg.value=t,this.value=t;const i=this.sensorList.find((e=>e.name===t)),a=!1===(0,r.i)(i)?i.pansharpenWeights:[.166,.167,.167,.5];this.widgetArgs.triggerArgs.Weights.input.value=a,this.rfxArgumentChange.emit({value:t})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,this.inputArg.key=t,i.input=this.hostElement}))}setupInitialState({rfxArgs:e,rasterFunctions:t}){this.value=this.inputArg.value;const i=t[(0,s.i)(e)],a=i?.rasterFunctionArguments,n=this.inputArg.key;this.value=this.inputArg.value;const l=a?.[n]?.domain;if("list"===l?.type){const e=l.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store=this.store.concat(this.sensorList.map((function(e){return{key:e.name,label:e.name}}))),this.store?.forEach((e=>{e.key=e.key.toString()})),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema"),this.value=this.inputArg.value||this.store[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}render(){return(0,a.h)("div",{key:"bcd00ba48a0c824e9432018760c4fead3c86f616"},(0,a.h)("calcite-label",{key:"9d39c7a14dd9b03cc29d1b9be1bedaa124f69fd7",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"b0ddd7236a079d0aa1bc13481a1069483769a7f9",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"7fb78584ef26fa942cc79a3f764edbc66d4fd638",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}get hostElement(){return(0,a.g)(this)}}},34756:(e,t,i)=>{i.d(t,{R:()=>p});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),n=i(92991),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=i(33797),o=(i(23795),i(17902),i(56451),i(15026)),h=i(38124),d=i(74670);const c="host",g="dialog",u="dialog-heading",p=class{constructor(e){(0,a.r)(this,e),this.rfxEditorWrapperClose=(0,a.c)(this,"rfxEditorWrapperClose"),this.hasBeenOpened=!1,this.initialDocumentOverflowStyle="",this.initState=()=>{n.s.entryPoint=this.entryPoint??r.E.ANALYSIS,n.s.portal=this.portal,n.s.rftId=this.rftItemId??this.portalItem?.id??n.s.rftId,(0,n.i)(this.user)&&!(0,n.i)(this.portal?.user)&&(this.user=this.portal.user),n.s.isViewerUserType=(0,n.M)(this.user)},this.setScale=()=>{this.scale=n.s.entryPoint===r.E.ITEM?l.C.l:l.U.Scale},this.setUIFlags=()=>{n.s.entryPoint===r.E.ITEM?(this.hideCreateNewTemplate=!0,this.hideEditTemplateProperties=!1):(this.hideCreateNewTemplate=!1,this.hideEditTemplateProperties=!0)},this.showReadOnlyAlert=()=>{this.removeReadOnlyAlert();const e=(0,h.c)({modalStrings:{header:this.strings.readOnlyModeTitle,content:this.strings.readOnlyModeMessage}});this.readOnlyAlertElement=e,document.body.appendChild(e)},this.removeReadOnlyAlert=()=>{this.readOnlyAlertElement?.remove(),this.readOnlyAlertElement=void 0},this.canClose=async()=>new Promise((async e=>{void 0!==this.rftItemId?e(await(this.rfxEditorApp?.onPanelClose(this.rftItemId))):e(!0)})),this.handleClose=async()=>{if(!0!==await this.canClose())throw new Error;this.removeReadOnlyAlert(),this.dialogElement.open=!1,this.rfxEditorWrapperClose.emit(),n.s.entryPoint===r.E.ITEM&&!0===this.newItemCreated&&(window.location.href=(0,o.a)(this.portalItem))},this.getDialogHeadingText=()=>this.rfxTemplateName??this.portalItem?.title??this.strings.defaultTemplateName,this.handleRFxTemplateNameChange=e=>{this.rfxTemplateName=e.detail},this.handleRFxTemplateSaved=e=>{const{portalItem:t,template:i}=e.detail;(0,n.i)(t)||(0,n.i)(i)||(t.id!==this.portalItem?.id&&(this.newItemCreated=!0,this.portalItem=t),this.rfxTemplateName=i.name)},this.handleRftItemDetailsLinkClicked=()=>{setTimeout((()=>{this.newItemCreated=!1,this.handleClose()}),1)},this.applyStyleToDialogContainer=e=>{(0,d.n)(e,["shadowRoot","children[0]"],(e=>{const t=document.createElement("style");t.innerHTML="div.container { z-index: 150; }",e.appendChild(t)}))}}onOpenChange(e){this.updateOverflowHiddenClass(e),!0===e&&!0===n.s.isViewerUserType&&this.showReadOnlyAlert(),!1!==this.hasBeenOpened?!0===e&&!1===n.s.isLoadingRFT&&this.rfxEditorApp?.reloadRFTItem():this.hasBeenOpened=!0}async componentWillLoad(){({strings:this.strings}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.initState(),this.setScale(),this.setUIFlags()}updateOverflowHiddenClass(e){!0===e?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()}addOverflowHiddenClass(){this.initialDocumentOverflowStyle=document.body.style.overflow,document.body.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.body.style.setProperty("overflow",this.initialDocumentOverflowStyle)}render(){return(0,a.h)(a.H,{key:"8d15ed53f54cc3634d83e115927a65f9e7fd895f",class:c},(0,a.h)("calcite-dialog",{key:"6ff1d9ce82ee2c9bc441c41a03c6165c89ddeeb3",id:"rfx-editor-dialog",class:g,open:!0===this.open,outsideCloseDisabled:!0,scale:"l",placement:"cover",beforeClose:async()=>this.handleClose(),ref:e=>{this.dialogElement=e,this.applyStyleToDialogContainer(e)}},(0,a.h)("div",{key:"d38d00900bd748cc612a596442d5975b2c67118b",class:u,slot:"header-content"},(0,a.h)("calcite-icon",{key:"7b5328c16c1db7ae14019772528d9f4fd7412491",icon:"function-editor",scale:this.scale,"text-label":"Raster Function Editor"}),this.getDialogHeadingText()),(0,a.h)("rfx-editor-app",{key:`rfx-editor-app-${this.rftItemId}`,mapLayers:this.mapLayers,mapView:this.mapView,portal:n.s.portal,rftItemId:n.s.rftId,scale:this.scale,ref:e=>{this.rfxEditorApp=e},onAnalysisTemplateNameChanged:this.handleRFxTemplateNameChange,onAnalysisTemplateSaved:this.handleRFxTemplateSaved,onRftItemDetailsLinkClicked:this.handleRftItemDetailsLinkClicked},(0,a.h)("rfx-editor-header-actions",{key:"8c35eef42eff314176cd0cf921987cd9f3b8cfd8",slot:"action-bar",templateId:n.s.rftId,hideCreateNewTemplate:this.hideCreateNewTemplate,hideRFxNodeActions:!0===n.s.isViewerUserType,hideEditTemplateProperties:this.hideEditTemplateProperties,scale:(0,l.u)(this.scale),expanded:!1===n.s.isViewerUserType}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}static get watchers(){return{open:["onOpenChange"]}}};p.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.host{height:100%;width:100%}.dialog{--calcite-dialog-content-space:0;z-index:150}.dialog-heading{font-size:var(--calcite-font-size-2);font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-line-height-wrap)}.dialog-heading calcite-icon{padding-left:0.25rem;padding-right:1rem}"},36013:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(83628),s=i(48001),n=i(33797),r=i(92991),l=i(93442);i(23795),i(17902),i(56451),i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const o="inputArgHelpClickHandler",h="pixelType",d="value",c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.pixelTypeFilters={},this.valueFilters={},this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target,i="number"===this.storeType?Number(t.value):t.value;this.inputArg.value=i,this.value=i,this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs),this.initializeTriggerAttributes(this.widgetArgs)}componentWillLoad(){this.setInitialState()}async componentDidLoad(){await this.applyTriggerAttributeFilters(this.widgetArgs),this.attachTriggerArgsChangeListener(this.widgetArgs),this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,this.inputArg.key=t,i.input=this.hostElement}))}attachTriggerArgsChangeListener({triggerArgs:e}){Object.keys(e).forEach((t=>{const i=e[t].input;i?i.addEventListener("rfxArgumentChange",(()=>{this.applyTriggerAttributeFilters({triggerArgs:e})})):console.error(`input not set on ${e[t].displayName}`)}))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}initializeTriggerAttributes({triggerAttributes:e}){const t=e.trim().split(";");for(const e of t){const[t,i]=e.trim().split(":"),a=i.trim().split(","),s={dependFieldName:a[0],dependFieldValue:a[1].trim().split("|"),filteredValue:a[2].trim().split("|"),isApplied:!1};({[h]:()=>this.pixelTypeFilters[s.dependFieldName]=s,[d]:()=>this.valueFilters[s.dependFieldName]=s})[t]()}}async applyPixelTypeFilters({triggerArg:e,inputWidget:t,triggerArgValue:i}){const a=this.pixelTypeFilters[e];if(a.isApplied=!1,!i)return a.isApplied;const s=await(t?.getSelectedLayer?.());await s.load();const n=await s.generateRasterInfo(s.rasterFunction),r=s.pixelType??n?.pixelType;return(0,l.k)(r)?(a.isApplied=!0,a.isApplied):a.isApplied}async applyValueTypeFilter({triggerArg:e,triggerArgValue:t}){const i=this.valueFilters[e];return i.isApplied=!1,i.dependFieldValue.includes(t.toString())?(i.isApplied=!0,Promise.resolve(i.isApplied)):Promise.resolve(i.isApplied)}async applyTriggerAttributeFilters({triggerArgs:e}){let t,i=!1;const a={[h]:this.applyPixelTypeFilters.bind(this),[d]:this.applyValueTypeFilter.bind(this)};for(const s of Object.keys(e)){const n=e[s].input,l=e[s].value??n?n.value:void 0;if(!0===(0,r.i)(l))continue;let o,c;if(this.pixelTypeFilters.hasOwnProperty(s))c=this.pixelTypeFilters[s],o=h;else{if(!this.valueFilters.hasOwnProperty(s))return void console.error("Trigger Arg is not part of triggerAttributes! check schema.");c=this.valueFilters[s],o=d}if(o in a){!0===await a[o]({inputWidget:n,triggerArg:s,triggerArgValue:l})&&(i=!0,t=c.filteredValue)}else console.error("invalid triggerAttributes! check schema.")}!0===i?this.applyFilterToStore(t):this.resetStore();const s=String(this.value);if(!0!==this.store.some((e=>e.key===s))){const e="number"===this.storeType?Number(this.store[0]?.key):this.store[0]?.key;this.value=e}}applyFilterToStore(e){const t=((e,t)=>e.filter((e=>t.some((t=>e.key===t)))))(this.initialStore,e);this.store=t}resetStore(){this.store=this.initialStore}setInitialState(){const{rfxArgs:e,rasterFunctions:t}=this.widgetArgs,i=t[(0,s.i)(e)],a=i?.rasterFunctionArguments,n=this.inputArg.name;this.value=this.inputArg.value;const l=a?.[n]?.domain;if("list"===l?.type){const e=l.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.storeType=typeof this.store?.[0]?.key,this.store?.forEach((e=>{e.key=e.key.toString()})),this.initialStore=(0,s.m)(this.store),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema")}render(){return(0,a.h)("div",{key:"bc1265b39141d8ccacd30e186ad0ac99becd6475"},(0,a.h)("calcite-label",{key:"72ecf02b9d4917995f81d031b16b26982c09964a",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"c88223e1bb858fcdd384c152f7f09275f1ba164b",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"6565775803bfbf1e5e806525e7805e2694080c00",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}},40518:(e,t,i)=>{i.d(t,{R:()=>r});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991));i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const n="denominatorUnitHelpClickHandler",r=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.rfxArgHelpClick=(0,a.c)(this,"rfxArgHelpClick"),this.helpActionClickEventHandlers=new Map,this.denominatorUnitList=[],this.handleGradientDimensionChange=e=>{e.stopPropagation();const t=e.target;this.gradientDimensionArg=t.value,this.setDenominatorUnitListOptions();this.denominatorUnitList.some((e=>e.key===this.value))||(this.value="DEFAULT")},this.handleDimensionUnitUpdate=e=>{const t=e.target;this.value=t.value}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){((0,s.i)(t)||(0,s.i)(t.GradientDimension))&&console.error("Invalid Schema: TriggerArgs is incorrect!"),Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement}));const i=t.GradientDimension;this.gradientDimensionArg=i,i.input?.addEventListener("rfxArgumentChange",this.handleGradientDimensionChange.bind(this))}setupInitialState({triggerArgs:e}){const t=this.widgetArgs.inputArgs?.DenominatorUnit;this.value=t.value;const i=e.GradientDimension;this.gradientDimensionArg=i.value,this.setDenominatorUnitListOptions()}setDenominatorUnitListOptions(){let e=this.widgetArgs.rasterFunctionEnums.denominatorUnitList;switch(this.gradientDimensionArg){case"X":case"Y":case"XY":e=[e[0],e[1]];break;case"StdTime":e=[e[0],...e.slice(2,7)];break;default:e=[e[0],e[e.length-1]]}this.denominatorUnitList=e.map((e=>({key:e.key,label:e.label})))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs.inputArgs.DenominatorUnit.displayName,referenceElement:this.denominatorUnitContainer,helpTextID:this.widgetArgs.helpTextIDs?.gradient_denominatorunit});this.helpActionClickEventHandlers.set(n,e)}render(){return(0,a.h)("div",{key:"22d0103489d90f39e227b71c87ca46fc7a77c870"},(0,a.h)("calcite-label",{key:"09f2091549024a0d9ebe22cc538878b0d534b746",alignment:"start",layout:"default",ref:e=>{this.denominatorUnitContainer=e}},(0,a.h)("rfx-label",{key:"f4235ac1119c6589240bcea08a684c583faa3242",label:this.widgetArgs.inputArgs.DenominatorUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(n)()}),(0,a.h)("rfx-dtex-common-select",{key:"779cf3a475da4206bd4f094a1a3e8a9d7a72a299",options:this.denominatorUnitList,value:this.value,onRfxArgumentChange:this.handleDimensionUnitUpdate})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};r.style=""},52118:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(83628),s=i(5839),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797)),l=(i(23795),i(17902),i(56451),i(95069));i(71802),i(32513),i(36596);const o="inputArgHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.handleInputChange=e=>{if(e.stopPropagation(),null!==e.target){const t=(e?.target).value;this.value=(0,l.p)(t),this.inputArg.value=this.value,this.rfxArgumentChange.emit({value:this.value})}}}async checkValidity(){return await this.rfxDteNumberInputElement.checkValidity()}connectedCallback(){this.setInputArgs(),this.setInitialState()}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.setConstraints()}componentDidLoad(){this.setTriggerArgsInputConstraints(),this.attachHelpClickEventHandlers()}get isFloatType(){return void 0===this.numberType||"float"===this.numberType}setInitialState(){const e=this.inputArg.value||this.inputArg.defaultValue;this.value=e}setInputArgs(){Object.keys(this.widgetArgs.inputArgs).forEach((e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement;const i=this.widgetArgs.argSchema.dataType,a=this.widgetArgs.argSchema.numberType;this.numberType=a??("long"===i||"double"===i?"float":"integer")}))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}extractIdentifier(e,t){return t.find((t=>e.includes(t)))??"Invalid"}setConstraints(){const e=this.widgetArgs.triggerAttributes.split(";"),t=[n.C.MIN_VALUE,n.C.MAX_VALUE,n.C.LESS_THAN_OR_EQUAL,n.C.GREATER_THAN_OR_EQUAL,n.C.LESS_THAN,n.C.GREATER_THAN];e.forEach((e=>{const i=this.extractIdentifier(e,t);({[n.C.MIN_VALUE]:()=>this.minValue=parseInt(e.replace(`${n.C.MIN_VALUE}:`,""),10),[n.C.MAX_VALUE]:()=>this.maxValue=parseInt(e.replace(`${n.C.MAX_VALUE}:`,""),10),[n.C.LESS_THAN]:()=>this.lessThan=e.replace(`${n.C.LESS_THAN}:`,""),[n.C.GREATER_THAN]:()=>this.greaterThan=e.replace(`${n.C.GREATER_THAN}:`,""),[n.C.LESS_THAN_OR_EQUAL]:()=>this.lessThanOrEqual=e.replace(`${n.C.LESS_THAN_OR_EQUAL}:`,""),[n.C.GREATER_THAN_OR_EQUAL]:()=>this.greaterThanOrEqual=e.replace(`${n.C.GREATER_THAN_OR_EQUAL}:`,"")})[i]()}),this),void 0!==this.minValue&&(this.min=this.minValue),void 0!==this.maxValue&&(this.max=this.maxValue)}setTriggerArgsInputConstraints(){void 0!==this.greaterThan&&this.attachTriggerArgsChangeListener(n.C.GREATER_THAN,this.greaterThan),void 0!==this.lessThan&&this.attachTriggerArgsChangeListener(n.C.LESS_THAN,this.lessThan),void 0!==this.greaterThanOrEqual&&this.attachTriggerArgsChangeListener(n.C.GREATER_THAN_OR_EQUAL,this.greaterThanOrEqual),void 0!==this.lessThanOrEqual&&this.attachTriggerArgsChangeListener(n.C.LESS_THAN_OR_EQUAL,this.lessThanOrEqual)}attachTriggerArgsChangeListener(e,t){this.widgetArgs.triggerArgs[t]||console.error("Invalid Schema: Trigger Arg Not passed");const i=this.widgetArgs.triggerArgs[t],a=i.value;this.handleTriggerArgChange(e,a),i.input.addEventListener("rfxArgumentChange",(({detail:{value:t}})=>{this.handleTriggerArgChange(e,t)}))}handleTriggerArgChange(e,t){const i={[n.C.LESS_THAN]:()=>this.max=t,[n.C.GREATER_THAN]:()=>this.min=t,[n.C.LESS_THAN_OR_EQUAL]:()=>this.max=t,[n.C.GREATER_THAN_OR_EQUAL]:()=>this.min=t};i[e]?.()}render(){const e={[n.C.GREATER_THAN]:this.widgetArgs.triggerArgs[this.greaterThan]?.displayName,[n.C.LESS_THAN]:this.widgetArgs.triggerArgs[this.lessThan]?.displayName,[n.C.GREATER_THAN_OR_EQUAL]:this.widgetArgs.triggerArgs[this.greaterThanOrEqual]?.displayName,[n.C.LESS_THAN_OR_EQUAL]:this.widgetArgs.triggerArgs[this.lessThanOrEqual]?.displayName};return(0,a.h)("div",{key:"ddc7b53f13d468caedd7d4067eac680c51b6503e"},(0,a.h)("calcite-label",{key:"7751471ef869617d73a72a8fd3b526d52d6279ef",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"79bd7b9c28d44f5050895186540db8c0875efeed",label:this.inputArg.displayName,hideHelp:(0,n.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dte-number-input",{key:"bb249cc5530a2ad450dccc72d12360296d61dc14",value:this.value,onRfxNumberInputChange:this.handleInputChange,excludeMaxValue:void 0!==e?.lessThan,excludeMinValue:void 0!==e?.greaterThan,min:this.min,max:this.max,dependentFields:e,numberType:this.isFloatType?"float":"integer",ref:e=>{this.rfxDteNumberInputElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}},53564:(e,t,i)=>{i.d(t,{R:()=>l});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const r="cellsizeArgHelpClickHandler",l=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.defaultRasterInfo={blockHeight:256,blockWidth:2048,compressionQuality:0,compressionType:"",firstPyramidLevel:1,format:"",maximumPyramidLevel:30,packetSize:4,pixelType:-1,pyramidResamplingType:-1,type:"RasterInfo"},this.helpActionClickEventHandlers=new Map,this.onRasterInfoPixelSizeChange=e=>{const t=e?.detail?.value,i=(t.x||t.y)??1;this.onPixelSizeChange(i)}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){Object.keys(this.widgetArgs.inputArgs).forEach((e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement}))}setInitialState(){const e=this.value||this.inputArg.value;if((0,s.i)(e))this.cellSizeInputValue=1;else{const{pixelSizeX:t,pixelSizeY:i}=e;this.cellSizeInputValue=t||i||1}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg?.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(r,e)}onPixelSizeChange(e){if(!(0,s.i)(e)||!isNaN(e)){if(0===e)this.value=this.defaultRasterInfo;else{const t=this.value||this.defaultRasterInfo;t.pixelSizeX=e,t.pixelSizeY=e,this.value=t}this.inputArg.value=this.value}}render(){const e={x:this.cellSizeInputValue??1,y:this.cellSizeInputValue??1};return(0,a.h)("div",{key:"08ec0aa7886908b408e79b53db10cbf6ce27d0d9"},(0,a.h)("calcite-label",{key:"4517c0ca3ecf32c9b18945fc1d83c1e78c05ac81",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"77c970e48103e1fbbb34f3eadc8a9e248ad0298c",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dte-cell-size-input",{key:"49e85fca0f1f581afd837d4bf49b0dd9638f1dc3",value:e,onRfxArgumentChange:this.onRasterInfoPixelSizeChange})))}get hostElement(){return(0,a.g)(this)}}},56814:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),n=i(92991),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(23795),i(17902),i(56451),i(71802),i(32513),i(36596);const l="methodHelpClickHandler",o="bandHelpClickHandler",h="combinationHelpClickHandler",d=class{constructor(e){(0,a.r)(this,e),this.helpActionClickEventHandlers=new Map,this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method)},this.onBandChange=e=>{const t=e.target.value,i=this.bandCombinationElement.value?.trim(),a=(0,n.i)(i)?[]:i.indexOf(",")>0?i.split(","):i.split(" ");a.push(t),this._updateBandValues(this._getBandComboFormatedValue(a))},this.onBandCombinationChange=()=>{const e=this._getBandCombinationValue();this._updateBandValues(e)}}connectedCallback(){this.widgetArgs?.rasterArgs&&(this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",(()=>{this.updateRasterArg()})))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.updateRasterArg(),this.setMethodValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}setMethodValue(){this.method=this.widgetArgs.inputArgs?.Method?.value??this.widgetArgs.rasterFunctionEnums[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Method?.displayName,referenceElement:this.bandCombinationMethodContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_method}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandNames?.displayName,referenceElement:this.bandCombinationBandContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_band}),i=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandWavelengths?.displayName,referenceElement:this.bandCombinationCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_combination});this.helpActionClickEventHandlers.set(l,e),this.helpActionClickEventHandlers.set(o,t),this.helpActionClickEventHandlers.set(h,i)}getMethodOptions(){return this.widgetArgs.rasterFunctionEnums.bandComboMethods.map((e=>({key:e.key.toString(),label:e.label})))}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map((e=>({key:e.label.toString(),label:e.label})))}_getBandCombinationValue(){const e=this.bandCombinationElement.value?.trim();if((0,n.i)(e))return[];const t=e.indexOf(",")>0?e.split(","):e.split(" ");return this._getBandComboFormatedValue(t)}_getBandComboFormatedValue(e){return e.map((e=>{let t;return t=1===this.method?parseFloat(e):2===this.method?parseInt(e,10)-1:e.trim(),t}))}_updateBandValues(e){const t=this.widgetArgs.inputArgs;t&&(0===this.method&&t.BandNames?t.BandNames.value=e:1===this.method&&t.BandWavelengths?t.BandWavelengths.value=e:2===this.method&&t.BandIds&&(t.BandIds.value=e)),this.widgetArgs={...this.widgetArgs,inputArgs:t}}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?await this.updateBandsOnLayerLoad():this.layer.when((async()=>{await this.updateBandsOnLayerLoad(),this._setupValues()})))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[];const i=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),a=i?.keyProperties;if(a?.BandProperties?.forEach(((i,a)=>{e.push({label:String(a+1)}),t.push({label:i.BandName??`Band_${a+1}`})})),!a.BandProperties||a.BandProperties&&!a.BandProperties.length){const a=this._getDefaultBandProperties(i.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelengths:[{label:"200"},{label:"400"},{label:"600"}]}}_getDefaultBandProperties(e){const t=[],i=[];for(let a=1;a<=e;a++)t.push({label:String(a)}),i.push({label:`Band_${a}`});return{bandNames:i,bandIds:t}}getBandCombinationValue(){const e=this.widgetArgs.inputArgs;return 0===this.method&&e.BandNames&&e.BandNames.value&&e.BandNames.value.length?e.BandNames.value.join(" "):1===this.method&&e.BandWavelengths&&e.BandWavelengths.value&&e.BandWavelengths.value.length?e.BandWavelengths.value.join(" "):2===this.method&&e.BandIds&&e.BandIds.value&&e.BandIds.value.length?e.BandIds.value.map((function(e){return+e+1})).join(" "):void 0}render(){const e=this.getMethodOptions(),t=this.getBandCombinationValue(),i=0===this.method?"bandNames":1===this.method?"bandWavelengths":"bandIds",s=this.getBandOptions(i);return(0,a.h)("div",{key:"047e519ab39424a1f6fbaa951a686c6fad579c82"},(0,a.h)("calcite-label",{key:"a50259f6161cf8bbbe17d7890810a56232892192",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationMethodContainer=e}},(0,a.h)("rfx-label",{key:"e72cd0936d85c2b470d043e7ecaf2abcf351f4ca",label:this.strings.method,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("rfx-dtex-common-select",{key:"99cc1c3f2137155808e94e35afba612a9c5e8350",mode:this.widgetArgs.mode,options:e,value:this.method.toString(),onRfxArgumentChange:this.onMethodChange})),(0,a.h)("calcite-label",{key:"7e6f25d4aea7d1ba0ea1a144caf3054853140e32",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationBandContainer=e}},(0,a.h)("rfx-label",{key:"b05c578247b59f5572a12d121bc02c26b3330a93",label:this.strings.band,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"49057a33df6a23278789f748f720be49c1edbac2",mode:this.widgetArgs.mode,options:s,onRfxArgumentChange:this.onBandChange,value:void 0})),(0,a.h)("calcite-label",{key:"5e99ac2350c9fdd651f03b2fe8bfc6c868e2592f",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandCombinationCombinationContainer=e}},(0,a.h)("rfx-label",{key:"e5998b9725ec13194cda14ffe07833981af27f8e",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("calcite-input-text",{key:"09043463653d231a3516d48f021c2f6b7b238662",scale:r.U.Scale,dir:this.direction,status:"idle",alignment:"start","prefix-text":"","suffix-text":"",value:t,onCalciteInputTextChange:this.onBandCombinationChange,ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}},57539:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(83628),s=i(5839),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),r=i(33797),l=(i(23795),i(17902),i(56451),i(71802),i(32513),i(36596),i(95069));const o="bandindexesHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map}connectedCallback(){this.widgetArgs.triggerArgs?.Method?.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.handleMethodChange(e),this.setInputMessageVisibiliy(e)}))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}setInitialState(){const e=this.widgetArgs.inputArgs?.BandIndexes.value;this.value=e;const t=this.widgetArgs.triggerArgs?.Method.value;this.handleMethodChange(t),this.setInputMessageVisibiliy(t)}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandIndexes?.displayName,referenceElement:this.bandIndexsEditorContainer,helpTextID:this.widgetArgs.helpTextIDs?.bandarithmetic_bandindexes});this.helpActionClickEventHandlers.set(o,e)}handleMethodChange(e){let t=`${this.strings.example}: `,i=`${this.strings.input}: `,a=`${this.strings.output}: `;const s=` (${this.strings.optional})`,n=`(${this.strings.WNDWIHintText})`,r="</br>";switch(parseInt(e)){case 0:t+="(B3 - B1) / (B3 + B1)",i="",a="";break;case 1:t+="3 1",i+="NIR Red",a+="(NIR - Red) / (NIR + Red)";break;case 2:t+="3 1 0.33",i+="NIR Red L",a+="((NIR - Red) / (NIR + Red + L)) * (1 + L)";break;case 3:t+="3 1 0.33 0.5 1.5",i+="NIR Red s a X",a+="(s * (NIR - s * Red - a)) / (a * NIR + Red - a * s + X * (1 + s * s))";break;case 4:t+="3 1",i+="NIR Red",a+="(2 * NIR + 1 - Sqrt((2 * NIR + 1) ^ 2 - 8 * (NIR - Red))) / 2";break;case 5:t+="3 1",i+="NIR Red",a+="eta * (1 - 0.25 * eta) - ((Red - 0.125) / (1 - Red))",a+=r,a+=r,a+=" *eta = [2 * (NIR ^ 2 \u2013 Red ^ 2) + 1.5 * NIR + 0.5 * Red] / (NIR + Red + 0.5)";break;case 6:t+="3 1 0.33 0.5",i+="NIR Red a b",a+="(NIR - a * Red - b) / (Sqrt(1 + a ^ 2))";break;case 7:t+="1 2 3 4 5 7",i+="TM1 TM2 TM3 TM4 TM5 TM7",i+=s,a+="-0.2848 * TM1 - 0.2435 * TM2 - 0.5436 * TM3 + 0.7243 * TM4 + 0.084 * TM5 - 0.18 * TM7";break;case 8:t+="1 3 4 5 6",i+="Band1 Band3 Band4 Band5 Band6",i+=s,a+=r,a+=" Band1 = (Band5 / Band6) * 100",a+=r,a+=" Band2 = (Band5 / Band1) * 100",a+=r,a+=" Band3 = (Band3 / Band4) * (Band5 / Band4) * 100";break;case 9:t+="3 2 1",i+="Red Green Blue",a+="(Green - Red) / (Green + Red - Blue)";break;case 10:t+="3 1",i+="NIR Green",a+="(NIR - Green) / (NIR + Green)";break;case 11:t+="3 1",i+="NIR Red",a+="NIR / Red";break;case 12:t+="3 1",i+="NIR RedEdge",a+="(NIR - RedEdge) / (NIR + RedEdge)";break;case 13:t+="3 1",i+="NIR RedEdge",a+="NIR / RedEdge";break;case 14:t+="3 1 2",i+="NIR Green Red",a+="(1.5 * (1.2 * (NIR - Green) - 2.5 * (Red - Green) ) / Sqrt( (2 * NIR + 1) ^ 2 - (6 * NIR - 5 * Sqrt(Red) ) - 0.5 ) )";break;case 15:t+="3 2 1",i+="NIR RedEdge Green",a+="(100 * (NIR - RedEdge) - 10 * (NIR - Green))";break;case 16:t+="3 2",i+="NIR RedEdge",a+="(NIR / RedEdge) - 1.0";break;case 17:t+="3 1",i+="NIR Green",a+="(NIR / Green) - 1.0";break;case 18:t+="3 1",i+="NIR Green",a+="(Green - NIR) / (Green + NIR)";break;case 19:t+="3 2 1",i+="NIR Red Blue",a+="2.5 * [(NIR - Red)/ (NIR + (6 * Red) - (7.5 * Blue) + 1.0)]";break;case 20:t+="3 1",i+="Red Blue",a+="Red / Blue";break;case 21:t+="3 1",i+="SWIR NIR",a+="SWIR / NIR";break;case 22:t+="3 1",i+="SWIR1 SWIR2",a+="SWIR1 / SWIR2";break;case 23:t+="3 2 1 0.75",i+="Green NIR SWIR \u03b1",a+="[Green \u2013 \u03b1 * NIR \u2013 (1 \u2013 \u03b1) * SWIR ] / [Green + \u03b1 * NIR + (1 \u2013 \u03b1) * SWIR]",a+=r,a+=n;break;case 24:t+="3 1",i+="Red NIR",a+="1/((0.1 -RED)^2 + (0.06 - NIR)^2)";break;case 25:t+="3 1",i+="NIR SWIR",a+="(NIR - SWIR) / (NIR + SWIR)";break;case 26:t+="3 1",i+="SWIR NIR",a+="(SWIR - NIR) / (SWIR + NIR)";break;case 27:t+="3 1",i+="NIR SWIR1",a+="(NIR - SWIR1) / (NIR + SWIR1)";break;case 28:case 29:t+="3 1",i+="Green SWIR",a+="(Green - SWIR) / (Green + SWIR)"}let o;this.placeholder=t;try{o=(i+r+a).replace(/(\d+(\.\d+)?)/g,(function(e){return(0,l.a)(parseFloat(e))}))}catch{o=i+r+a}this.bandIndexEditorMessage=o}setInputMessageVisibiliy(e){return 0===parseInt(e)?this.showInputMessage=!1:this.showInputMessage=!0,this.showInputMessage}render(){return(0,a.h)("div",{key:"fa4a23153b7803c2f42b9f73e9fcb94baab34d35"},(0,a.h)("calcite-label",{key:"0614259854ba2c16a1acd991d657d06f1204e058",alignment:"start",scale:r.U.Scale,layout:"default",ref:e=>{this.bandIndexsEditorContainer=e}},(0,a.h)("rfx-label",{key:"873e7fdc9f2c4329c10b0c554e24ef6a886b8cd5",label:this.widgetArgs.inputArgs.BandIndexes.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("calcite-input",{key:"655dd3f6280c432e738d046bf7be7c95c2465b08",type:"text",ref:e=>{this.widgetArgs.inputArgs.BandIndexes.input=e},scale:r.U.Scale,placeholder:this.placeholder,value:this.value}),(0,a.h)("calcite-input-message",{key:"32c0814f01381d944fe365309d0cb650009ac5fb",status:n.U.IDLE,icon:this.showInputMessage,"icon-flip-rtl":"rtl"===this.direction,ref:e=>{e.innerHTML=this.bandIndexEditorMessage},hidden:!1===this.showInputMessage})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}},57746:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(83628),s=i(5839),n=i(48001),r=i(74579),l=(i(5294),i(92991)),o=i(93442);i(23795),i(17902),i(56451),i(588),i(71802),i(44345),i(32513),i(33752),i(36596);const h=class{constructor(e){(0,a.r)(this,e),this.analysisToolDataChange=(0,a.c)(this,"analysisToolDataChange"),this.analysisToolClose=(0,a.c)(this,"analysisToolclose"),this.analysisUnsupportedFunction=(0,a.c)(this,"analysisUnsupportedFunction"),this.analysisRFTLoadError=(0,a.c)(this,"analysisRFTLoadError"),this.analysisRFxHelpPopoverChange=(0,a.c)(this,"analysisRFxHelpPopoverChange"),this.analysisRFxBrowseLayerClick=(0,a.c)(this,"analysisRFxBrowseLayerClick"),this.resetPreview=!0,this.usePanel=!0,this.validateOnPreview=!0,this.hasGlobalFunctionInRFT=!1,this.handlePreviewSelectionChange=e=>{this.editorComponent.rfxTemplate=e.detail,setTimeout((()=>{this.validateRFx()}),500)},this.handlePreviewHelpClick=e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail,l=this.portal?.isPortal,o=this.portal?.sourceJSON?.helpBase||n.a.learnMoreDocBaseURL,h=(0,s.f)(o,this.locale);let d;if(!0===l){const e=n.a.learnMoreDocDefaultEnterpriseHelpID,{restUrl:t}=this.portal;d=`${h}${(0,r.a)(e)}${n.a.learnMoreDocPreviewEnterpriseHelpID}`,d=(0,s.a)(d,t)}else{const e=`${n.a.learnMoreDocDefaultHelpID}${n.a.learnMoreDocPreviewHelpID}`;d=(0,r.f)(h,e)}this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a,learnMoreUrl:d})}}async onRfxTemplateChange(){!0===this.resetPreview&&(this.hasGlobalFunctionInRFT=await(0,n.h)(this.rfxTemplate,this.locale),this.previewComponent?.clearPreviewLayers())}async onMapLayersChange(){this.resetPreview=!1,this.rfxTemplate=await this.getUpdatedRFTWithValues()??this.rfxTemplate,setTimeout((()=>{this.resetPreview=!0}),1)}onPortalChange(e){l.s.portal=e}async getUpdatedRFTWithValues(){return this.editorComponent?.getUpdatedRFTWithValues()}async validateRFx(){return await(this.editorComponent?.checkTemplateValidity())}async componentWillLoad(){const{locale:e,rtl:t}=(0,s.g)(this.hostElement);this.locale=e,this.dir=(0,s.b)(t),void 0!==this.portal&&this.onPortalChange(this.portal),void 0===this.rfxTemplate&&void 0!==this.functionName&&(this.rfxTemplate=await(0,n.g)(this.functionName)),void 0!==this.rfxTemplate&&void 0===this.rfxTemplate?.arguments&&this.analysisRFTLoadError.emit(),this.hasGlobalFunctionInRFT=await(0,n.h)(this.rfxTemplate,this.locale)}renderArgsEditor(){const{imageryLayers:e,featureLayers:t}=(0,o.g)(this.mapLayers);return(0,a.h)("rfx-args-editor",{ref:e=>this.editorComponent=e,rfxTemplate:this.rfxTemplate,imageryLayers:e,featureLayers:t,mapView:this.mapView,portal:this.portal,onRfxArgHelpClick:e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail;this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a})},onRfxBrowseClick:e=>{this.analysisRFxBrowseLayerClick.emit(e.detail)},onRfxUnsupportedFunctionFound:e=>this.analysisUnsupportedFunction.emit(e.detail)})}renderPreviewElement(){return(0,a.h)("rfx-preview",{mapView:this.mapView,portal:this.portal,getTemplate:()=>this.getUpdatedRFTWithValues(),validateOnPreview:this.validateOnPreview,validateInputValues:()=>this.validateRFx(),onRfxPreviewSelection:this.handlePreviewSelectionChange,onPreviewHelpClick:this.handlePreviewHelpClick,ref:e=>this.previewComponent=e})}render(){return(0,a.h)(a.H,{key:"42dd501545213600e756782e990d97439948a222"},!0===this.usePanel?(0,a.h)("calcite-panel",{dir:this.dir,heading:this.rfxTemplate.name,closable:!0,onCalcitePanelClose:()=>this.analysisToolClose.emit()},this.renderArgsEditor()):(0,a.h)("div",null,this.renderArgsEditor(),!1===this.hasGlobalFunctionInRFT?this.renderPreviewElement():void 0))}get hostElement(){return(0,a.g)(this)}static get watchers(){return{rfxTemplate:["onRfxTemplateChange"],mapLayers:["onMapLayersChange"],portal:["onPortalChange"]}}}},58331:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(83628),s=i(48001),n=i(33797),r=i(24360),l=i(92991),o=(i(588),i(5294),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(23795),i(17902),i(56451),i(95069));i(71802),i(44345),i(32513),i(36596);const h="typeHelpClickHandler",d="kernelHelpClickHandler",c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={kernelArgLabel:void 0,kernelArgContainer:void 0,rowArgLabel:void 0,columnArgLabel:void 0,rowArgContainer:void 0,columnArgContainer:void 0},this.kernelTypesInfo=r.k,this.helpActionClickEventHandlers=new Map,this.userDefinedOptionKey=-1,this.noneOptionKey=255,this.defaults={rowArgDefaultValue:void 0,columnArgDefaultValue:void 0,kernelArgDefaultValue:[]},this.store=[],this.onConvolutionTypeChange=e=>{e.stopPropagation();const t=e.target,i=(0,o.p)(t.value);this.inputArg.value=i,this.value=i;const a=this.kernelTypesInfo[i?.toString()];this.widgetState={columns:a?.columns??this.defaults.columnArgDefaultValue,rows:a?.rows??this.defaults.rowArgDefaultValue,value:a?.value??this.defaults.kernelArgDefaultValue},this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){let e=!0;return this.value===this.userDefinedOptionKey&&(e=await this.uiElements.rowArgContainer.checkValidity()&&await this.uiElements.columnArgContainer.checkValidity()),e}processWidgetArgs({inputArgs:e}){const t=e.ConvolutionType;this.inputArg=t,this.inputArg.key="ConvolutionType",t.input=this.hostElement,this.uiElements.rowArgLabel=e.Rows.displayName,this.uiElements.columnArgLabel=e.Columns.displayName,this.uiElements.kernelArgLabel=e.Kernel.displayName}setupInitialState({inputArgs:e,rfxArgs:t,rasterFunctions:i}){const a=i[(0,s.i)(t)],n=a?.rasterFunctionArguments,r=this.inputArg.key;this.value=this.inputArg.value;const o=n?.[r]?.domain;if("list"===o?.type){const e=o.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store?.forEach((e=>{e.key=e.key.toString()})),(0,l.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");const h=n?.[r]?.defaultValue;this.value=this.inputArg.value||h;const d=n?.Rows?.defaultValue,c=n?.Columns?.defaultValue,g=this.kernelTypesInfo[this.value?.toString()]?.value;this.defaults.columnArgDefaultValue=c,this.defaults.rowArgDefaultValue=d;const u=e.Kernel.value??g,p=e.Columns.value??c,m=e.Rows.value??d;this.widgetState=(0,l.E)({columns:p,rows:m,value:u})}setWidgetValue(){this.widgetArgs.inputArgs.ConvolutionType.value=this.value,this.widgetArgs.inputArgs.Columns.value=this.widgetState?.columns,this.widgetArgs.inputArgs.Rows.value=this.widgetState?.rows,this.widgetArgs.inputArgs.Kernel.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_type});this.helpActionClickEventHandlers.set(h,e)}onColumnValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,columns:e})}onRowValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,rows:e})}render(){const e=this.value===this.userDefinedOptionKey,t=this.value===this.noneOptionKey;return(0,a.h)("div",{key:"6129ed4757d239a96132f58f8d8b4dc960b9001a"},(0,a.h)("calcite-label",{key:"c03352a5b2743756a9a5943c66260e584f41a8a1",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"61576cfa3ed8d3d0b504812e34679e7f9be317d5",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("rfx-dtex-common-select",{key:"8e5109bf4a397846e962071d1669a18a030060eb",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.onConvolutionTypeChange})),e?(0,a.h)("div",null,(0,a.h)("calcite-label",{alignment:"start",scale:n.U.Scale,layout:"default"},(0,a.h)("rfx-label",{label:this.uiElements.rowArgLabel,hideHelp:!0}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.rows,onRfxNumberInputChange:e=>{e.stopPropagation();const t=e.target?.value;this.onRowValueChange(t)},min:1,max:100,numberType:"integer",ref:e=>{this.uiElements.rowArgContainer=e}})),(0,a.h)("calcite-label",{alignment:"start",scale:n.U.Scale,layout:"default"},(0,a.h)("rfx-label",{label:this.uiElements.columnArgLabel,hideHelp:!0}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.columns,onRfxNumberInputChange:e=>{e.stopPropagation();const t=e.target?.value;this.onColumnValueChange(t)},min:1,max:100,numberType:"integer",ref:e=>{this.uiElements.columnArgContainer=e}}))):null,t?null:(0,a.h)("calcite-label",{alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.uiElements.kernelArgContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.kernelArgLabel,referenceElement:this.uiElements.kernelArgContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_kernel});this.helpActionClickEventHandlers.set(d,t)}},(0,a.h)("rfx-label",{label:this.uiElements.kernelArgLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(d)()}),(0,a.h)("rfx-simple-matrix",{columns:this.widgetState.columns,rows:this.widgetState.rows,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,l.v)(this.widgetState.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:e})))}get hostElement(){return(0,a.g)(this)}}},69633:(e,t,i)=>{i.d(t,{R:()=>o});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(71144)),r=i(33797);i(23795),i(17902),i(56451),i(71802),i(44345),i(32513),i(36596);const l="inputArgHelpClickHandler",o=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.loaded=!1,this.showDimensionLessCheckbox=!0,this.helpActionClickEventHandlers=new Map,this.isRasterSingleSlice=!1,this.mdimDefLeadsToSingleSlice=!1,this.evaluateFilterTriggerArg=async e=>{const t=await this.isMultidimensionalDefinitionAppliedSingleSlice(e);this.mdimDefLeadsToSingleSlice=void 0,this.mdimDefLeadsToSingleSlice=t},this.evaluateRasterTriggerArg=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,i=await t.getSelectedLayer();if(i){const e=await this.checkIfRasterIsSingleSlice(i);this.isRasterSingleSlice=e}else this.mdimDefLeadsToSingleSlice=!1}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentWillRender(){const e=this.isRasterSingleSlice||this.mdimDefLeadsToSingleSlice,t=this.widgetArgs.triggerArgs.Raster?.input,i=!1===Boolean(t?.value)||e;this.showDimensionLessCheckbox=i}componentDidLoad(){}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement}));const i=t.Raster;i?.input?.addEventListener("rfxArgumentChange",(()=>{!1!==this.loaded&&this.evaluateRasterTriggerArg()}));const a=t.Filter;a?.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.evaluateFilterTriggerArg(e)}))}async setupInitialState({triggerArgs:e}){this.value=this.inputArg.value;const t=e.Raster?.input;if(!t||!t.value)return this.isRasterSingleSlice=!1,void(this.mdimDefLeadsToSingleSlice=!1);await this.evaluateRasterTriggerArg();const i=e.Filter?.input,a=i?.value||e.Filter.value;i&&a?this.evaluateFilterTriggerArg(a):this.mdimDefLeadsToSingleSlice=!1,this.loaded=!0}async checkIfRasterIsSingleSlice(e){const t=await(0,n.g)(e),i=(0,n.a)(e,t);if(!t||!i||1!==i.length)return!1;return i[0].dimensions.every((e=>{const t=e&&e.values;return t&&1===t.length}))}async isMultidimensionalDefinitionAppliedSingleSlice(e){"string"==typeof e&&(e=JSON.parse(e));const t=this.widgetArgs.triggerArgs.Raster?.input;if(!t?.value)return!1;const i=await t.getSelectedLayer();if((0,s.i)(i))return;const a=await(0,n.g)(i),r=(0,n.a)(i,a);return(0,n.m)(e,(0,s.E)(r))}render(){return(0,a.h)("div",{key:"617695abab1bc00121701875edff0c31e80df7c7"},this.showDimensionLessCheckbox?(0,a.h)("calcite-label",{alignment:"start",scale:r.U.Scale,layout:"inline-space-between",ref:e=>{this.widgetContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(l,t)}},(0,a.h)("calcite-checkbox",{checked:this.value,onCalciteCheckboxChange:e=>{const t=e.target.checked;this.value=t}}),(0,a.h)("rfx-label",{label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()})):null)}get hostElement(){return(0,a.g)(this)}};o.style=""},75741:(e,t,i)=>{i.d(t,{R:()=>l});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(33797));i(23795),i(17902),i(56451),i(71802),i(44345),i(32513),i(36596);const r="inputArgHelpClickHandler",l=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.renderGrid=!1}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement})),t.Width?.input.addEventListener("rfxArgumentChange",(e=>{e.stopPropagation();const{detail:{value:t}}=e;this.onWidthValueChange(t)})),t.Height?.input.addEventListener("rfxArgumentChange",(e=>{e.stopPropagation();const{detail:{value:t}}=e;this.onHeightValueChange(t)})),t.NeighborhoodType?.input.addEventListener("rfxArgumentChange",(e=>{const{detail:{value:t}}=e;this.onNeighborhoodTypeValueChange(t)}))}setupInitialState({inputArgs:e,triggerArgs:t}){const i=e.NeighborhoodValues.value,a=t.Width?.value??3,n=t.Height?.value??3;this.widgetState=(0,s.E)({columns:a,rows:n,value:i}),this.value=i,this.renderGrid=5===t.NeighborhoodType.value||6===t.NeighborhoodType.value}setWidgetValue(){this.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(r,e)}onWidthValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,columns:e})}onHeightValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,rows:e})}onNeighborhoodTypeValueChange(e){this.renderGrid=5===e||6===e}render(){return(0,a.h)("div",{key:"9cdd59ce3208c5b4eff8f4216a35d82c02559c90"},this.renderGrid?(0,a.h)("calcite-label",{alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e,this.attachHelpClickEventHandlers()}},(0,a.h)("rfx-label",{label:this.inputArg.displayName,hideHelp:(0,s.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(r)()}),(0,a.h)("rfx-simple-matrix",{columns:this.widgetState.columns,rows:this.widgetState.rows,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,s.v)(this.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:!0})):null)}get hostElement(){return(0,a.g)(this)}};l.style=""},76159:(e,t,i)=>{i.d(t,{$Jr:()=>d.p,$Lx:()=>l.c,$Ql:()=>c.g,$Zk:()=>p.F,$_T:()=>l.H,$kB:()=>r.E,$mZ:()=>x.R,$t5:()=>l.i,$w6:()=>a.r,ABh:()=>l.g,AuT:()=>n.c,AvT:()=>o.A,B3Z:()=>o.t,BUO:()=>m.R,BsA:()=>o.w,CEN:()=>a.v,CkQ:()=>a.x,Cty:()=>n.f,DDy:()=>o.a,DTo:()=>l.z,DVJ:()=>o.f,D_p:()=>h.R,Dnx:()=>o.d,Dq8:()=>h.f,E4:()=>a.j,EmE:()=>l.r,EnT:()=>p.c,EtT:()=>l.d,FaQ:()=>E.R,Fv3:()=>o.p,FvE:()=>S.R,G6k:()=>I.R,GIw:()=>c.e,GMw:()=>d.a,GTU:()=>n.d,GZJ:()=>V.R,GgE:()=>h.s,GrH:()=>a.c,Hn1:()=>a.g,HpT:()=>o.c,HyN:()=>r.G,J_r:()=>r.J,JfT:()=>o.s,JnC:()=>B.R,Jv5:()=>l.K,KC_:()=>o.q,KcO:()=>a.h,Kcd:()=>l.A,Kjm:()=>a.o,Kt4:()=>r.M,LDF:()=>a.C,LPT:()=>l.u,LcM:()=>l.k,Lwk:()=>l.I,Mrf:()=>a.s,My8:()=>a.u,NQ6:()=>a.d,Oom:()=>l.D,P$C:()=>D.R,P9C:()=>r.c,PiZ:()=>l.h,Q3P:()=>a.y,QGI:()=>O,QHA:()=>u.l,Qcn:()=>n.g,RIC:()=>c.c,RKz:()=>m.F,RTy:()=>c.u,Rmw:()=>l.y,Rnp:()=>W.R,S9A:()=>a.w,STZ:()=>a.S,SVg:()=>a.m,Sbx:()=>C.R,T1:()=>a.F,T9l:()=>k.R,Tfi:()=>s.a,Trr:()=>b.R,Twb:()=>n.a,UBY:()=>h.D,UPr:()=>a.b,UbH:()=>o.o,UvL:()=>l.M,VLP:()=>o.i,VTd:()=>r.a,VbK:()=>o.m,Vew:()=>c.R,VpO:()=>o.j,XIo:()=>a.k,Xpf:()=>T.R,Xxn:()=>p.u,XyP:()=>r.U,Y5s:()=>h.d,YBQ:()=>l.L,YOy:()=>h.h,ZP5:()=>l.o,ZVp:()=>d.f,Zrt:()=>U,_0X:()=>N.R,_tg:()=>s.u,aLH:()=>a.A,aLq:()=>h.i,aib:()=>l.f,aj6:()=>l.E,asn:()=>o.e,az7:()=>o.u,b$Q:()=>o.g,bte:()=>m.N,bxl:()=>a.z,cHq:()=>a.q,cI:()=>c.a,cOi:()=>a.f,cY9:()=>h.g,d1F:()=>o.z,dAP:()=>l.T,dpS:()=>h.e,eDx:()=>l.b,eH:()=>u.g,ezA:()=>l.j,fPx:()=>g.c,fSJ:()=>h.a,fUh:()=>g.a,fhg:()=>a.e,gLh:()=>u.a,gRj:()=>o.l,gf6:()=>d.i,h6_:()=>r.P,hPV:()=>o.v,hQ5:()=>g.R,hcS:()=>l.a,hfr:()=>h.b,hwK:()=>l.t,hyQ:()=>l.B,ivH:()=>h.c,j_:()=>a.t,jym:()=>n.b,kel:()=>o.x,klB:()=>n.e,lwI:()=>a.E,mlI:()=>l.J,nEo:()=>o.y,nRR:()=>A.R,o5y:()=>o.b,o8K:()=>l.e,okm:()=>a.D,ol9:()=>l.w,omp:()=>l.n,oqQ:()=>o.k,pLv:()=>o.n,pV:()=>h.l,qCC:()=>l.q,qJB:()=>R.R,qQn:()=>a.i,qW0:()=>u.c,qa0:()=>l.R,qgM:()=>l.p,r8Q:()=>h.C,rF$:()=>o.h,rNp:()=>l.F,rW6:()=>h.k,sYC:()=>_.R,tXL:()=>a.n,tsW:()=>y.R,uHA:()=>L.R,uWi:()=>v.R,u_o:()=>c.b,uaT:()=>h.j,vBi:()=>o.r,vC_:()=>d.s,vH3:()=>o.B,w$_:()=>p.I,w68:()=>c.d,wEq:()=>w.R,wUB:()=>l.v,waU:()=>M.R,wjg:()=>l.C,wxz:()=>H.R,x38:()=>r.d,xBP:()=>a.B,y2W:()=>f.R,y7T:()=>s.C,yGI:()=>r.A,yL5:()=>l.l,yOJ:()=>l.G,yRx:()=>a.l,yZP:()=>l.m,zI8:()=>a.p,zPL:()=>l.x,zfv:()=>s.U});var a=i(48001),s=i(33797),n=i(74579),r=i(42335),l=i(92991),o=i(93442),h=i(15320),d=i(95069),c=i(70053),g=i(86343),u=i(15026),p=i(38306),m=i(19956),f=i(57746),b=i(34756),A=i(32299),v=i(57539),C=i(56814),y=i(24852),x=i(21806),w=i(26374),k=i(69633),E=i(56160),R=i(36013),S=i(58331),I=i(5085),T=i(75741),H=i(52118),L=i(53564),N=i(83934),D=i(20287),B=i(998),W=i(9430),V=i(20644),M=i(40518),_=i(25103);i(5294),i(24360),i(5839),i(13661),i(18423),i(21255),i(35431),i(71144),i(83628),i(32513),i(44345),i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(23795),i(17902),i(56451),i(71802),i(36596),i(38124),i(74670),i(48640);function U(e){return`${e?.charAt(0).toUpperCase()}${e.slice(1)}`}function O(e){window.rfe$=Object.freeze({getDisplayData:async()=>await e.getModelJSON()})}},83934:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(5839)),n=i(92991),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=(i(23795),i(17902),i(56451),i(95069));i(71802),i(32513),i(36596);const o={base:"rfx-cte-remap-grid"},h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.gridSchema={gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,canAdd:!0,hasIdColumn:!0},this.updateValue=e=>{const{detail:{gridOptions:t}}=e,i=[],a=[],s=[];if((0,n.i)(t))return;t.forEach(((e,r)=>{if(r===t.length-1)return;const{NoData:o}=e;let{Minimum:h=0,Maximum:d=0,Output:c=0}=e;h=(0,l.p)(h),d=(0,l.p)(d),c=(0,l.p)(c),d<h&&(d=h),o?(s.push(h,d),c=null):(0,n.i)(c)||(i.push(h,d),a.push(c))}));const{inputArgs:r}=this.widgetArgs;r.InputRanges.value=i,r.OutputValues.value=a,r.NoDataRanges.value=s}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.a)("."))),this.initGrid()}createDataObjects(){const{inputArgs:e}=this.widgetArgs,t=e.InputRanges?.value||[],i=e.OutputValues?.value||[];let a=e.NoDataRanges?.value||[];"string"==typeof a&&(a=a.trim().split(/[ ,]+/));const s=[];if(0===t.length&&0===i.length&&0===a.length)return s.push({id:0,Minimum:0,Maximum:0,Output:0,NoData:!1}),s;if(i.length>0&&t.length===2*i.length)for(let e=0;e<i.length;e++)s.push({id:e,Minimum:t[2*e],Maximum:t[2*e+1],Output:i[e],NoData:!1});const n=s.length;if(a.length>0)for(let e=0;e<a.length/2;e++)s.push({id:n+e,Minimum:a[2*e],Maximum:a[2*e+1],Output:null,NoData:!0});return s.push({id:n+1,Minimum:void 0,Maximum:void 0,Output:void 0,NoData:!1}),s}initGrid(){const e={Minimum:{label:this.strings.minimum,uiType:r.G.textInput},Maximum:{label:this.strings.maximum,uiType:r.G.textInput},Output:{label:this.strings.output,uiType:r.G.textInput},NoData:{label:this.strings.noData,uiType:r.G.boolean}},t=this.createDataObjects();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}render(){return(0,a.h)("calcite-label",{key:"98bd28a9e4546e2feb30338b68992983b81bbb26"},(0,a.h)("rfx-grid",{key:"1891ff8ce608e24d5636999b336d09b107af551d",class:o.base,hasHeader:this.gridSchema.hasHeader,canAdd:this.gridSchema.canAdd,hasIdColumn:this.gridSchema.hasIdColumn,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,onRfxGridOptionChange:this.updateValue}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}};h.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-remap-grid{overflow-x:auto}"},86343:(e,t,i)=>{i.d(t,{R:()=>u,a:()=>c,c:()=>d});var a=i(83628),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(92991)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797)),r=(i(23795),i(17902),i(56451),i(95069));i(71802),i(32513),i(36596);const l=1,o=[.299,.587,.114];function h(e){if(e<=0||e>=255)return l;let t=0;150!==e&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const i=e+t,a=Math.log(e/255),s=Math.log(i/255);if(0===s)return l;const n=a/s;return isNaN(n)?l:Math.min(9.9,Math.max(.01,n))}function d(e,t,i){const a=[];for(let s=0;s<t.length;s++){let n=0,r=0,l=0;"min"in t[s]?({min:n,max:r,avg:l}=t[s]):[n,r,l]=t[s];let d=l;"u8"!==e&&(d=255*(d-n)/(r-n)),i&&(d*=o[s]),a.push(h(d))}return a}async function c(e){const t=await e.generateRasterInfo(e.rasterFunction),i=t?.statistics,a=t?.pixelType;if(0===i?.length||!a)return;return d(a,i)}const g="inputArgHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.defaultMin=-1,this.defaultMax=10,this.bandCount=1,this.defaultValue=1,this.helpActionClickEventHandlers=new Map,this.handleSliderChange=(e,t)=>{const i=e.target.value;this.value[t]=i,this.rfxArgumentChange.emit({value:this.value})}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){Object.keys(this.widgetArgs.inputArgs).forEach((e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement}));const{triggerArgs:e}=this.widgetArgs,t=e?.Raster;void 0===t&&console.error("Invalid Schema: Raster is not passed in TriggerArgs"),this.rasterArg=t,t?.input?.addEventListener("rfxArgumentChange",(()=>{this.handleRasterChange()}))}async setInitialState(){const e=this.inputArg.value,t=this.rasterArg?.input,i=await(t?.getSelectedLayer?.()),a=i&&await i.generateRasterInfo(i.rasterFunction);if(!0!==(0,s.i)(e))return(0,s.i)(a?.bandCount)||(this.bandCount=a?.bandCount),void(this.value=e);(0,s.i)(t?.value)?this.value=[]:(this.bandCount=a?.bandCount,this.value=await c(i))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(g,e)}async handleRasterChange(){const e=this.rasterArg?.input,t=await(e?.getSelectedLayer?.()),i=t&&await t.generateRasterInfo(t.rasterFunction);this.bandCount=i.bandCount,this.value=await c(t)}render(){const e=this.bandCount,t=this.value;return(0,a.h)("div",{key:"d2c6025a8dd0aa5ca0d84a7ed3706e91674dd3cb"},(0,a.h)("calcite-label",{key:"185f7c5e183cd2400eb406cfbabdc9095e7bb6e5",alignment:"start",scale:n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"a4e9a9d6721fca4abc77592f24a642f52ecab7c4",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),Array.from({length:e}).map(((e,i)=>(0,a.h)("rfx-dtex-arg-slider",{min:this.defaultMin,max:this.defaultMax,value:(0,r.f)(t?.[i]??this.defaultValue,3),step:.01,onRfxArgumentChange:e=>{this.handleSliderChange(e,i)}})))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.g)(this)}}}}]);