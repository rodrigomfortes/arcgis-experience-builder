/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-7fa41c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-7fa41c"],{4470:(e,t,o)=>{o.r(t),o.d(t,{arcgis_popup_add_content_popover:()=>u,arcgis_popup_chart:()=>f,arcgis_popup_color_button:()=>g,arcgis_popup_image:()=>v});var i=o(11254),s=o(17840),a=o(56612),r=o(82780),n=o(14528),l=o(69811),c=o(53127),h=o(92030),d=o(10465),p=o(39020);const u=class{constructor(e){(0,i.r)(this,e),this.arcgisAddPopoverContent=(0,i.c)(this,"arcgisAddPopoverContent",7),this.arcgisAddMultimediaContent=(0,i.c)(this,"arcgisAddMultimediaContent",7),this.closePopupPopovers=(0,i.c)(this,"closePopupPopovers",7),this.manager=(0,n.u)(this),this.referenceElement=void 0,this.popoverPanelWidth=void 0,this.popupHasAttachmentInfo=void 0,this.isMultimediaContent=!1,this.popupState=void 0}async reposition(){this.popoverNode?.reposition()}componentDidLoad(){this.panelNode?.setFocus()}render(){const{popupState:e,isMultimediaContent:t}=this,{strings:o}=e,a=(0,s.q)(this.referenceElement,"calcite-flow-item"),r=a?.getBoundingClientRect().top??56,n=a?.getBoundingClientRect().bottom??0,l=this.referenceElement.getBoundingClientRect().top,c=l-r<n-(l+25)?0:l-r-50-10,h={maxHeight:c>0?`${c}px`:"60vh"};return(0,i.h)(i.H,{key:"3b3ff63fd30dc199eb8a295ebd63a03a220153a5",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"a07c813c47677bbdedf3fc13fd7f772fbc452809",referenceElement:this.referenceElement,open:!0,placement:"bottom",class:"popover",label:t?o.addMedia:o.addContent,triggerDisabled:!0,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"c3e7ea9c73844743343e1590204c723b1499c53e",closable:!0,style:{width:`${this.popoverPanelWidth}px`},onCalcitePanelClose:()=>this.closePopupPopovers.emit(),ref:e=>this.panelNode=e},(0,i.h)("div",{key:"1bb3758d1ca2fa9b9847ea546278289ccc83889b",slot:"header-content"},t?o.addMedia:o.content),t?(0,i.h)("div",{style:h},this.renderCharts(),this.renderImages()):(0,i.h)("div",{style:h},this.renderAttributes(),this.renderAttachments(),this.renderCharts(),this.renderImages(),this.renderText(),this.renderArcade(),this.renderRelatedRecords(),this.renderAssociations(),this.renderLastEditedSummary()))))}renderAttributes(){const{popupState:e}=this,{strings:t,layerHasAttributes:o}=e;return o?(0,i.h)("calcite-action",{label:t.fieldsList,text:t.fieldsList,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.ATTRIBUTES)},(0,i.h)("calcite-icon",{scale:"s",icon:"feature-details"})):(0,i.h)(i.F,null)}renderAttachments(){const{popupState:e}=this,{strings:t,layerSupportsAttachments:o}=e;return o?(0,i.h)("calcite-action",{label:t.attachments,text:t.attachments,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.ATTACHMENTS),disabled:!!this.popupHasAttachmentInfo},(0,i.h)("calcite-icon",{scale:"s",icon:"attachment"})):(0,i.h)(i.F,null)}renderCharts(){const{popupState:e}=this,{strings:t,layerHasCharts:o}=e;return o?(0,i.h)("calcite-action",{label:t.chart,text:t.chart,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.CHARTS)},(0,i.h)("calcite-icon",{scale:"s",icon:"graph-bar"})):(0,i.h)(i.F,null)}renderImages(){const{popupState:e}=this,{strings:t,layerHasImages:o}=e;return o?(0,i.h)("calcite-action",{label:t.image,text:t.image,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.IMAGES)},(0,i.h)("calcite-icon",{scale:"s",icon:"image"})):(0,i.h)(i.F,null)}renderText(){const{popupState:e}=this,{strings:t,layerHasText:o}=e;return o?(0,i.h)("calcite-action",{label:t.text,text:t.text,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.RICH_TEXT)},(0,i.h)("calcite-icon",{scale:"s",icon:"text"})):(0,i.h)(i.F,null)}renderArcade(){const{popupState:e}=this,{strings:t,layerSupportsArcade:o}=e;return o?(0,i.h)("calcite-action",{disabled:e.blockFeatureReductionArcade,label:t.arcade,text:t.arcade,icon:"code",textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.ARCADE)}):(0,i.h)(i.F,null)}renderRelatedRecords(){const{popupState:e}=this,{strings:t,layerHasRelatedRecords:o}=e;return o?(0,i.h)("calcite-action",{label:t.relatedRecords,text:t.relatedRecords,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.RELATIONSHIP)},(0,i.h)("calcite-icon",{scale:"s",icon:"link"})):(0,i.h)(i.F,null)}renderAssociations(){const{popupState:e}=this,{strings:t,layerIsUNLayer:o}=e;return o?(0,i.h)("calcite-action",{label:t.associations.associationsList,text:t.associations.associationsList,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.ASSOCIATIONS)},(0,i.h)("calcite-icon",{scale:"s",icon:"view-associations"})):(0,i.h)(i.F,null)}renderLastEditedSummary(){const{popupState:e}=this,{strings:t,popupTemplate:o,layerHasEditInfo:s}=e;return s?(0,i.h)("calcite-action",{label:t.editInfoSummaryHeading,text:t.editInfoSummaryHeading,textEnabled:!0,onClick:()=>this.initiateAddContent(r.C.EDIT_INFO_SUMMARY),disabled:!!o.lastEditInfoEnabled},(0,i.h)("calcite-icon",{scale:"s",icon:"user"})):(0,i.h)(i.F,null)}initiateAddContent(e){const{isMultimediaContent:t}=this;t?this.arcgisAddMultimediaContent.emit(e):this.arcgisAddPopoverContent.emit(e)}get el(){return(0,i.a)(this)}};u.style=".popover{--calcite-popover-z-index:100}";const m=10,f=class{constructor(e){(0,i.r)(this,e),this.arcgisMultimediaChange=(0,i.c)(this,"arcgisMultimediaChange",7),this.closePopupPopovers=(0,i.c)(this,"closePopupPopovers",7),this.manager=(0,n.u)(this),this.arcadeExpMap=new Map,this.listItemNodes=[],this.colorIconNodes=[],this.lastColors={},this.referenceElement=void 0,this.mediaContent=void 0,this.chartMediaInfo=void 0,this.mediaIndexPosition=void 0,this.popupState=void 0}arcadeChangeNotificationHandler(){(0,i.f)(this.el)}closePopupPopoversHandler(){this.removePopovers()}async reposition(){this.popoverNode?.reposition()}async componentWillLoad(){const{popupState:e}=this,{layer:t,layerDisplayType:o}=e;if(await this.loadAllModules(),this.chartMediaInfo.title=this.chartMediaInfo.title||"",this.chartMediaInfo.altText=this.chartMediaInfo.altText||"",this.chartMediaInfo.caption=this.chartMediaInfo.caption||"","renderer"in t){const e=o===a.l.cluster?t.featureReduction.renderer:t.renderer;["class-breaks","dot-density","heatmap","pie-chart","simple","unique-value"].includes(e?.type)&&(this.rendererColors=await this.modules.rendererUtils.getColorsFromRenderer(e))}this.colors=this.modules.esriLang.clone(this.chartMediaInfo?.value.colors)||[],this.setColors()}componentDidLoad(){this.panelNode?.setFocus()}async componentWillRender(){const{popupState:e,modules:t}=this,{popupTemplate:o}=e;this.fieldInfoMap=new Map(o.fieldInfos.map((e=>[e.fieldName,e]))),this.arcadeExpMap=(0,s.m)(o),this.listItemNodes=[],this.chartMediaInfo.value.fields.forEach(((e,o)=>{if(this.fieldInfoMap.has(e)){const t=this.fieldInfoMap.get(e);this.listItemNodes.push(this.renderListItem(t,o))}else if(this.chartMediaInfo.value.fields.splice(o,1),this.chartMediaInfo.type!==r.P.LINE_CHART)if(this.chartMediaInfo.value.colors?.length)this.chartMediaInfo.value.colors.splice(o,1),this.colors.splice(o,1);else{const e=this.getDefaultColorScheme();this.colors=this.chartMediaInfo?.value.fields.map(((o,i)=>this.rendererColors?.get(o)?t.esriLang.clone(this.rendererColors.get(o)[0]):this.colors?.[i]||new t.EsriColor(e.colors[i%m])||new t.EsriColor([0,0,0,1])))}}))}componentDidUpdate(){this.arcgisMultimediaChange.emit(this.mediaIndexPosition),this.popoverNode?.reposition()}disconnectedCallback(){this.removePopovers()}render(){const{popupState:e}=this,{strings:t}=e,o=!!this.chartMediaInfo.value.fields?.length;return(0,i.h)(i.H,{key:"8df8f0effa21a4d4463cda0e7cd5015bb19d2c03",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"fb0bed5f6485cfd4a717f6c9d19b367456d70325",class:"popover",placement:"leading-start",open:!0,pointerDisabled:!0,referenceElement:this.referenceElement,offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50,label:t.configureChart,triggerDisabled:!0,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"4da1acf989cecfd9564cb3d91363acd61356e1bd",class:"panel",closable:!0,style:{width:`${this.referenceElement.getBoundingClientRect().width}px`},onCalcitePanelClose:()=>this.closePopupPopovers.emit(),ref:e=>this.panelNode=e},(0,i.h)("div",{key:"09b08dc2c1f6e531c191c7b2c3df512419720802",slot:"header-content"},t.configureChart),(0,i.h)("div",{key:"d3d9e19228a31ddb1cf42c2042144b92b494a6f9",class:"content"},this.renderChartTypeSelection(),this.renderChartFormInput("title"),this.renderChartFormInput("caption"),this.renderChartFormInput("altText"),o&&this.renderColorButton(),o&&this.renderResetToDefaultColorsButton(),this.renderFieldList(),this.renderHorizontalOrientationSwitch(),this.renderNormalizationSwitch()),this.renderDoneButton())))}renderChartTypeSelection(){const{popupState:e,modules:t}=this,{strings:o}=e;return(0,i.h)("calcite-segmented-control",{class:"segmented-control",width:"full",scale:"s",onCalciteSegmentedControlChange:async e=>{this.colorButtonNode?.closePopover(),this.closeColorPopover();const o=e.target.selectedItem;if(this.chartMediaInfo.type===r.P.LINE_CHART&&o.value!==r.P.LINE_CHART||this.chartMediaInfo.type!==r.P.LINE_CHART&&o.value===r.P.LINE_CHART){const e=this.chartMediaInfo.value.colors;this.chartMediaInfo.type===r.P.LINE_CHART?(this.lastColors.lineColors=e?t.esriLang.clone(e):void 0,this.colors=void 0,this.chartMediaInfo.value.colors=void 0):(this.lastColors.rampColors=e?t.esriLang.clone(e):void 0,o.value===r.P.LINE_CHART&&(this.colors=void 0,this.chartMediaInfo.value.colors=void 0))}o.value!==this.chartMediaInfo.type&&(o.value===r.P.COLUMN_CHART&&this.chartMediaInfo.type===r.P.BAR_CHART||await this.handleChartSelection(o.value)),this.setColors()}},(0,i.h)("calcite-segmented-control-item",{value:r.P.COLUMN_CHART,iconStart:"graph-bar",checked:this.chartMediaInfo.type===r.P.COLUMN_CHART||this.chartMediaInfo.type===r.P.BAR_CHART},o.bar),(0,i.h)("calcite-segmented-control-item",{value:r.P.LINE_CHART,iconStart:"graph-time-series",checked:this.chartMediaInfo.type===r.P.LINE_CHART},o.line),(0,i.h)("calcite-segmented-control-item",{value:r.P.PIE_CHART,iconStart:"pie-chart",checked:this.chartMediaInfo.type===r.P.PIE_CHART},o.pie))}renderChartFormInput(e){const{popupState:t}=this,{strings:o,popupTemplate:s}=t,a=this.getChartInputDescription(e),r=this.getChartInputValue(e),n=this.getChartInputPlaceholder(e);return(0,i.h)("calcite-label",{scale:"s"},a,(0,i.h)("div",{class:"form-input-button"},"caption"!==e?(0,i.h)("calcite-input",{class:"input",autofocus:!0,ref:t=>"title"===e?this.chartTitleNode=t:this.chartAltTextNode=t,value:r,placeholder:n,onCalciteInputInput:(0,c.d)((e=>{e.preventDefault(),e.stopPropagation(),this.changeChartProperties()}),300)}):(0,i.h)("calcite-text-area",{resize:"vertical",autofocus:!0,value:r,placeholder:n,onCalciteTextAreaInput:(0,c.d)((e=>{e.preventDefault(),e.stopPropagation(),this.changeChartProperties()}),300),ref:e=>this.chartCaptionNode=e}),s.fieldInfos?.length&&(0,i.h)("calcite-action",{text:o.attributes,scale:"s",icon:"brackets-curly",onClick:()=>{const{popupState:t}=this;this.removePopovers(),this.colorButtonNode?.closePopover(),this.closeColorPopover(),this.chartFormInputPickListNode||(this.chartFormInputPickListNode=document.createElement("arcgis-popup-field-pick-list"),this.chartFormInputPickListNode.popoverProps={refElement:this.panelNode},this.chartFormInputPickListNode.multiple=!1,this.chartFormInputPickListNode.heading=o.addField,this.chartFormInputPickListNode.popupState=t,this.chartFormInputPickListNode.addEventListener("arcgisChange",(t=>{t.stopPropagation();const o=t.detail.selectedFields[0];this.handleChartFormInputPickListNodeChange(o,e)})),this.chartFormInputPickListNode.addEventListener("arcgisClose",(e=>{e.stopPropagation(),this.removePopovers()})),document.body.appendChild(this.chartFormInputPickListNode),this.panelNode.disabled=!0)}})))}renderColorButton(){const{popupState:e}=this;return(0,i.h)("arcgis-popup-color-button",{referenceElement:this.panelNode,chartMediaInfo:this.chartMediaInfo,colors:this.colors,popupState:e,onArcgisPopupColorButtonBeforeOpen:()=>this.closeColorPopover(),onArcgisPopupColorButtonChange:(0,c.d)((({detail:e})=>{this.colors=e,this.chartMediaInfo.value.colors=this.modules.esriLang.clone(e),(0,i.f)(this.el)}),300),ref:e=>this.colorButtonNode=e})}renderResetToDefaultColorsButton(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("calcite-label",{class:"reset-to-default-colors-button",layout:"inline-space-between"},t.resetColors,(0,i.h)("calcite-action",{appearance:"transparent",text:t.resetColors,disabled:!this.chartMediaInfo.value.colors?.length,onClick:()=>{this.colorButtonNode?.closePopover(),this.closeColorPopover(),this.chartMediaInfo.value.colors=null,this.colors=[],this.chartMediaInfo.type===r.P.LINE_CHART?this.lastColors.lineColors=void 0:this.lastColors.rampColors=void 0,this.setColors(),(0,i.f)(this.el)}},(0,i.h)("calcite-icon",{scale:"s",icon:"reset"})))}renderFieldList(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("div",{class:"fields-div"},(0,i.h)("calcite-button",{class:"select-fields-button",appearance:"transparent",width:"full",onClick:e=>{e.stopPropagation(),this.removePopovers(),this.colorButtonNode?.closePopover(),this.closeColorPopover();const{popupState:o}=this;this.fieldPickListNode||(this.fieldPickListNode=document.createElement("arcgis-popup-field-pick-list"),this.fieldPickListNode.popoverProps={refElement:this.panelNode},this.fieldPickListNode.selectedFields=this.chartMediaInfo?.value?.fields||[],this.fieldPickListNode.hideCancel=!0,this.fieldPickListNode.multiple=!0,this.fieldPickListNode.heading=t.selectFields,this.fieldPickListNode.okBtnText=t.done,this.fieldPickListNode.numbersOnly=!0,this.fieldPickListNode.popupState=o,this.fieldPickListNode.addEventListener("arcgisChange",(e=>{e.stopPropagation();const t=e.detail.selectedFields;this.handleChartFieldPickListChange(t)})),this.fieldPickListNode.addEventListener("arcgisClose",(e=>{e.stopPropagation(),this.removePopovers()})),document.body.appendChild(this.fieldPickListNode),this.panelNode.disabled=!0)}},t.selectAttributes),(0,i.h)("calcite-list",{label:t.attributes,dragEnabled:!0,onCalciteListOrderChange:e=>{e.stopPropagation();const t=e.target.querySelectorAll("calcite-list-item"),o=[];if(t.forEach((e=>{this.chartMediaInfo.value.fields.forEach(((t,i)=>{e.value===t&&o.push(i)}))})),this.chartMediaInfo.type===r.P.LINE_CHART)this.chartMediaInfo.value.fields=Array.from(t).map((e=>e.value));else{this.chartMediaInfo.value.colors?.length||(this.chartMediaInfo.value.colors=this.modules.esriLang.clone(this.colors));const e=[],t=[];o.forEach((o=>{e.push(this.chartMediaInfo.value.fields[o]),t.push(this.modules.esriLang.clone(this.chartMediaInfo.value.colors[o]))})),this.chartMediaInfo.value.fields=e,this.colors=t,this.chartMediaInfo.value.colors=this.modules.esriLang.clone(t)}if(this.lastColors.rampColors?.length){const e=[];o.forEach((t=>{e.push(this.lastColors.rampColors[t])})),this.lastColors.rampColors=e}(0,i.f)(this.el)}},this.listItemNodes))}renderListItem(e,t){const{popupState:o}=this,{strings:a}=o;return(0,i.h)("calcite-list-item",{key:e.fieldName,label:(0,s.o)(e,this.arcadeExpMap),value:e.fieldName},this.renderColorIcon(t),(0,i.h)("calcite-action",{slot:"actions-end",appearance:"transparent",text:a.remove,onClick:()=>{this.removePopovers(),this.colorButtonNode?.closePopover(),this.closeColorPopover(),this.chartMediaInfo.value.colors?.length?this.chartMediaInfo.value.fields.forEach(((t,o)=>{t===e.fieldName&&(this.chartMediaInfo.value.fields.splice(o,1),this.chartMediaInfo.type!==r.P.LINE_CHART&&(this.chartMediaInfo.value.colors.splice(o,1),this.colors.splice(o,1),this.colorButtonNode&&(0,i.f)(this.colorButtonNode)),this.lastColors.rampColors?.length&&this.lastColors.rampColors.splice(o,1))})):(this.chartMediaInfo.value.fields.forEach(((t,o)=>{t===e.fieldName&&this.chartMediaInfo.value.fields.splice(o,1)})),this.colors=[],this.setColors()),(0,i.f)(this.el)}},(0,i.h)("calcite-icon",{scale:"s",icon:"x"})))}renderColorIcon(e){const{colors:t}=this;return this.chartMediaInfo.type===r.P.LINE_CHART?(0,i.h)(i.F,null):(0,i.h)("div",{class:"color-icon",style:{backgroundColor:t[e].toHex()},slot:"content-start",onClick:()=>this.openColorPopover(e),role:"button",tabIndex:0,onKeyUp:t=>{" "!==t.key&&"Enter"!==t.key||this.openColorPopover(e)},ref:t=>this.colorIconNodes[e]=t})}renderHorizontalOrientationSwitch(){const{popupState:e}=this,{strings:t}=e;return this.chartMediaInfo.type!==r.P.BAR_CHART&&this.chartMediaInfo.type!==r.P.COLUMN_CHART?(0,i.h)(i.F,null):(0,i.h)("calcite-label",{layout:"inline-space-between"},t.horizontalOrientation,(0,i.h)("calcite-switch",{scale:"s",checked:this.chartMediaInfo.type===r.P.BAR_CHART,onCalciteSwitchChange:(0,c.d)((async()=>await this.handleChartSelection(this.orientationSwitchNode.checked?r.P.BAR_CHART:r.P.COLUMN_CHART)),300),ref:e=>this.orientationSwitchNode=e}))}renderNormalizationSwitch(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("calcite-block-section",{text:t.normalize,toggleDisplay:"switch",open:!!this.chartMediaInfo.value.normalizeField,onCalciteBlockSectionToggle:()=>{this.normalizationBlockSectionNode.open?this.chartMediaInfo.value.normalizeField=this.tempNormalizedField:(this.tempNormalizedField=this.chartMediaInfo.value.normalizeField,this.chartMediaInfo.value.normalizeField=""),(0,i.f)(this.el)},ref:e=>this.normalizationBlockSectionNode=e},(0,i.h)("calcite-button",{class:"normalize-by-button",alignment:"icon-end-space-between",iconEnd:"pencil",appearance:"outline-fill",kind:"neutral",width:"full",title:t.normalizeBy,onClick:e=>{e.stopPropagation(),this.removePopovers(),this.colorButtonNode?.closePopover(),this.closeColorPopover();const{popupState:t}=this;this.normalizationFieldPickListNode||(this.normalizationFieldPickListNode=document.createElement("arcgis-popup-field-pick-list"),this.normalizationFieldPickListNode.popoverProps={refElement:this.panelNode},this.normalizationFieldPickListNode.selectedFields=this.chartMediaInfo.value.normalizeField?[this.chartMediaInfo.value.normalizeField]:[],this.normalizationFieldPickListNode.numbersOnly=!0,this.normalizationFieldPickListNode.popupState=t,this.normalizationFieldPickListNode.addEventListener("arcgisChange",(e=>{e.stopPropagation();const t=e.detail.selectedFields[0];this.handleNormalizationFieldPickListNodeChange(t)})),this.normalizationFieldPickListNode.addEventListener("arcgisClose",(e=>{e.stopPropagation(),this.normalizationFieldPickListNode?.parentElement?.removeChild(this.normalizationFieldPickListNode),this.normalizationFieldPickListNode=void 0,this.panelNode.disabled=!1})),document.body.appendChild(this.normalizationFieldPickListNode),this.panelNode.disabled=!0)},ref:e=>this.normalizationButtonNode=e},this.fieldInfoMap.has(this.chartMediaInfo.value.normalizeField)?(0,s.o)(this.fieldInfoMap.get(this.chartMediaInfo.value.normalizeField),this.arcadeExpMap):t.normalizeBy))}renderDoneButton(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("calcite-button",{appearance:"outline-fill",slot:"footer",width:"full",onClick:()=>this.closePopupPopovers.emit()},t.done)}async loadAllModules(){const[e,t,o,i]=await Promise.all([(0,l.o)(),(0,l.ab)(),(0,l.aT)(),(0,l.aU)()]);this.modules={esriLang:e,EsriColor:t,pieChartSchemes:o,rendererUtils:i}}async handleChartSelection(e){const[t,o,s,a]=await Promise.all([(0,l.aV)(),(0,l.Y)(),(0,l.aW)(),(0,l.aX)()]);let n=null;e===r.P.BAR_CHART&&(n=new t({title:this.chartMediaInfo.title,caption:this.chartMediaInfo.caption,value:this.chartMediaInfo.value,altText:this.chartMediaInfo.altText})),e===r.P.COLUMN_CHART&&(n=new o({title:this.chartMediaInfo.title,caption:this.chartMediaInfo.caption,value:this.chartMediaInfo.value,altText:this.chartMediaInfo.altText})),e===r.P.LINE_CHART&&(n=new s({title:this.chartMediaInfo.title,caption:this.chartMediaInfo.caption,value:this.chartMediaInfo.value,altText:this.chartMediaInfo.altText})),e===r.P.PIE_CHART&&(n=new a({title:this.chartMediaInfo.title,caption:this.chartMediaInfo.caption,value:this.chartMediaInfo.value,altText:this.chartMediaInfo.altText})),this.chartMediaInfo=n.clone(),this.mediaContent.mediaInfos[this.mediaIndexPosition]=this.chartMediaInfo,(0,i.f)(this.el)}getChartInputDescription(e){const{popupState:t}=this,{strings:o}=t;return"title"===e?o.title:"caption"===e?o.caption:o.description}getChartInputValue(e){return"title"===e?this.chartMediaInfo.title:"caption"===e?this.chartMediaInfo.caption:this.chartMediaInfo.altText}getChartInputPlaceholder(e){const{popupState:t}=this,{strings:o}=t;return"title"===e?o.imageTitlePlaceHolder:"caption"===e?o.imageCaptionPlaceHolder:o.describeChart}changeChartProperties(){this.chartMediaInfo.title=this.chartTitleNode.value,this.chartMediaInfo.caption=this.chartCaptionNode.value,this.chartMediaInfo.altText=this.chartAltTextNode.value,(0,i.f)(this.el)}handleChartFormInputPickListNodeChange(e,t){"title"===t?((0,h.a)(this.chartTitleNode,e),this.chartMediaInfo.title=this.chartTitleNode.value):"caption"===t?((0,h.a)(this.chartCaptionNode,e),this.chartMediaInfo.caption=this.chartCaptionNode.value):"altText"===t&&((0,h.a)(this.chartAltTextNode,e),this.chartMediaInfo.altText=this.chartAltTextNode.value),this.removePopovers(),(0,i.f)(this.el)}setColors(){const{modules:e,lastColors:t,rendererColors:o}=this;if(this.chartMediaInfo.type===r.P.LINE_CHART)if(!this.colors?.length&&t.lineColors&&(this.colors=t.lineColors,this.chartMediaInfo.value.colors=e.esriLang.clone(this.colors)),this.colors?.length)this.colors.length>1&&(this.colors=[this.colors[0]]);else{const e=this.getDefaultColorScheme();this.colors=[e.colors[0]]}else if(!this.colors?.length&&t.rampColors&&(this.colors=e.esriLang.clone(t.rampColors),this.chartMediaInfo.value.colors=e.esriLang.clone(this.colors)),!this.colors?.length||this.colors.length!==this.chartMediaInfo?.value.fields.length){const t=this.getDefaultColorScheme();this.colors=this.chartMediaInfo?.value.fields.map(((i,a)=>o?.get(i)?.[0]?e.esriLang.clone(o.get(i)[0]):(0,s.i)(this.colors?.[a])?this.colors[a]:(0,s.i)(t.colors[a%m])?new e.EsriColor(t.colors[a%m]):new e.EsriColor([0,0,0,1])))}}getDefaultColorScheme(){const{popupState:e,modules:t}=this,{mapView:o}=e,i=t.pieChartSchemes.getSchemes({basemap:o.map?.basemap??"topo",geometryType:"polygon",numColors:Math.min(m,this.chartMediaInfo.value.fields.length)});return[i.primaryScheme].concat(i.secondarySchemes).find((e=>"Olympic Sunset"===e.name))||i.primaryScheme}handleChartFieldPickListChange(e){const{modules:t,rendererColors:o}=this,s=this.chartMediaInfo.value.fields;if(this.chartMediaInfo.value.fields=e,this.chartMediaInfo.type===r.P.LINE_CHART){if(this.chartMediaInfo.value.fields?.length&&!this.chartMediaInfo.value.colors?.length){const e=this.getDefaultColorScheme();this.colors=[e.colors[0]],this.chartMediaInfo.value.colors=t.esriLang.clone(this.colors),(0,i.f)(this.el)}else!this.chartMediaInfo.value.fields?.length&&this.chartMediaInfo.value.colors?.length&&(this.colors=void 0,this.chartMediaInfo.value.colors=void 0,(0,i.f)(this.el));if(this.lastColors.rampColors?.length){const e=this.getDefaultColorScheme();this.lastColors.rampColors=this.chartMediaInfo?.value.fields.map(((o,i)=>{const a=s.indexOf(o);return a>-1&&this.lastColors.rampColors?.[a]||new t.EsriColor(e.colors[i%m])||new t.EsriColor([0,0,0,1])}))}}else if(this.chartMediaInfo.value.fields?.length){const e=this.getDefaultColorScheme();this.colors=this.chartMediaInfo?.value.fields.map(((i,a)=>{const r=s.indexOf(i);return r>-1&&this.colors?.[r]||(o?.get(i)?.[0]?t.esriLang.clone(o.get(i)[0]):new t.EsriColor(e.colors[a%m]))})),this.chartMediaInfo.value.colors?.length?this.chartMediaInfo.value.colors=t.esriLang.clone(this.colors):(this.colors=[],this.setColors(),(0,i.f)(this.el)),s?.length?this.colorButtonNode&&(0,i.f)(this.colorButtonNode):(0,i.f)(this.el)}else this.colors=void 0,this.chartMediaInfo.value.colors=void 0,(0,i.f)(this.el);(0,i.f)(this.el)}handleNormalizationFieldPickListNodeChange(e){e&&(this.chartMediaInfo.value.normalizeField=e,(0,i.f)(this.el)),this.removePopovers(),this.normalizationButtonNode.focus()}openColorPopover(e){const{colors:t,modules:o}=this;this.colorButtonNode?.closePopover(),this.closeColorPopover();const s=document.createElement("arcgis-popup-color-popover");s.hexColor=t[e].toHex(),s.popoverProps={placement:"leading-start",offsetDistance:1,offsetSkidding:52,popoverWidth:315,refElement:this.panelNode},s.popupState=this.popupState,s.addEventListener("arcgisPopupColorPopoverChange",(({detail:s})=>{t[e]=new o.EsriColor(s),this.chartMediaInfo.value.colors=o.esriLang.clone(t),(0,i.f)(this.el),(0,i.f)(this.colorButtonNode)})),s.addEventListener("arcgisPopupColorPopoverClose",(()=>this.colorPopoverNode=void 0)),document.body.appendChild(s),s.setOpen(!0),this.colorPopoverNode=s}closeColorPopover(){this.colorPopoverNode?.parentElement?.removeChild(this.colorPopoverNode),this.colorPopoverNode=void 0}removePopovers(){this.chartFormInputPickListNode&&(document.body.removeChild(this.chartFormInputPickListNode),this.chartFormInputPickListNode=void 0),this.fieldPickListNode&&(document.body.removeChild(this.fieldPickListNode),this.fieldPickListNode=void 0),this.normalizationFieldPickListNode&&(document.body.removeChild(this.normalizationFieldPickListNode),this.normalizationFieldPickListNode=void 0),this.colorPopoverNode&&(document.body.removeChild(this.colorPopoverNode),this.colorPopoverNode=void 0),this.panelNode.disabled=!1}get el(){return(0,i.a)(this)}};f.style=".popover{--calcite-popover-z-index:100}.panel{--calcite-panel-background-color:var(--calcite-color-foreground-1)}.content{padding:var(--calcite-spacing-lg) var(--calcite-spacing-sm);max-height:60vh}.segmented-control{margin-bottom:var(--calcite-spacing-sm)}.form-input-button{display:flex}.input{width:100%}calcite-text-area{width:100%;--calcite-text-area-min-width:0;--calcite-text-area-min-height:42px}.reset-to-default-colors-button{--calcite-label-margin-bottom:0}.select-fields-button{margin-bottom:var(--calcite-spacing-sm)}.color-icon{width:18px;height:18px;border-radius:90%}.fields-div{margin-bottom:var(--calcite-spacing-sm)}.normalize-by-button{margin-top:var(--calcite-spacing-sm)}";const g=class{constructor(e){(0,i.r)(this,e),this.arcgisPopupColorButtonBeforeOpen=(0,i.c)(this,"arcgisPopupColorButtonBeforeOpen",7),this.arcgisPopupColorButtonChange=(0,i.c)(this,"arcgisPopupColorButtonChange",7),this.manager=(0,n.u)(this),this.resizeObserver=new ResizeObserver((()=>(0,i.f)(this.el))),this.referenceElement=void 0,this.chartMediaInfo=void 0,this.colors=void 0,this.popupState=void 0,this.selected=!1}async setFocus(){this.popoverButtonNode?.focus()}async closePopover(){this.closeColorPopover()}async componentWillLoad(){await this.loadAllModules()}async componentDidLoad(){(0,i.f)(this.el),this.resizeObserver.observe(this.popoverButtonNode)}disconnectedCallback(){this.resizeObserver.unobserve(this.popoverButtonNode)}render(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)(i.H,{key:"61dd83291c1b005e2a67ec3307bd33fcbf49f426"},(0,i.h)("calcite-label",{key:"78157f2bbce58fd80c37a64393d8087f3cf1b85b",scale:"s"},t.color,this.renderColorButton()))}renderColorButton(){const{colors:e,selected:t}=this,o=e?.length?e.filter(((e,t)=>t<10)).map(((t,o)=>(0,i.h)("div",{key:`color-button-icon-${o}`,class:"color-icon-section",style:{width:95/Math.min(10,Math.min(10,e.length))+"%",backgroundColor:t?.toHex()??"#ffffff"}}))):null,s={"color-selector":!0,selected:t};return(0,i.h)("div",{class:s,role:"button",tabIndex:0,onClick:()=>this.openColorPopover(),onKeyUp:e=>{" "!==e.key&&"Enter"!==e.key||this.openColorPopover()},ref:e=>this.popoverButtonNode=e},(0,i.h)("div",{class:"color-icon"},o),(0,i.h)("div",{class:"color-edit-button"},(0,i.h)("calcite-icon",{scale:"s",icon:"pencil"})))}async loadAllModules(){const[e,t,o,i]=await Promise.all([(0,l.o)(),(0,l.ab)(),(0,l.aT)(),(0,l.aI)()]);this.modules={esriLang:e,esriColor:t,pieChartSchemes:o,SimpleFillSymbol:i}}async openColorPopover(){const{modules:e,popoverNode:t,popoverButtonNode:o,colors:s}=this,a=(0,p.f)(this.el,"calcite-panel");if(t)this.closeColorPopover();else if(1===s.length){this.arcgisPopupColorButtonBeforeOpen.emit(),this.selected=!0;const t=document.createElement("arcgis-popup-color-popover");t.hexColor=s[0].toHex(),t.popoverProps={placement:"leading-start",offsetDistance:1,offsetSkidding:52,popoverWidth:315,refElement:a},t.popupState=this.popupState,t.addEventListener("arcgisPopupColorPopoverChange",(({detail:t})=>{this.colors[0]=new e.esriColor(t),this.chartMediaInfo.value.colors=e.esriLang.clone(this.colors),this.arcgisPopupColorButtonChange.emit(e.esriLang.clone(this.colors)),(0,i.f)(this.el)})),t.addEventListener("arcgisPopupColorPopoverClose",(()=>this.popoverNode=void 0)),document.body.appendChild(t),t.setOpen(!0),this.popoverNode=t}else{this.arcgisPopupColorButtonBeforeOpen.emit(),this.selected=!0;document.createElement("div").className="symbol-styler-div",this.popoverNode=this.createSymbolStylerPopover({referenceElement:a}),this.popoverNode.addEventListener("arcgisClose",(e=>{e.stopPropagation(),this.closeColorPopover(),setTimeout((()=>o?.focus()),300)})),this.popoverNode.addEventListener("arcgisDisconnected",(e=>{e.stopPropagation(),this.closeColorPopover()})),this.symbolStylerWatchScaleHandle=await this.buildSymbolStylerForRamp({popoverNode:this.popoverNode,onChange:()=>{(this.chartMediaInfo?.value).colors=e.esriLang.clone(this.colors),this.arcgisPopupColorButtonChange.emit(e.esriLang.clone(this.colors))}})}}createSymbolStylerPopover(e){const{popupState:t}=this,{referenceElement:o}=e,i=document.createElement("arcgis-popup-styler-popover");return i.referenceElement=o,i.popupState=t,document.body.appendChild(i),i.open=!0,setTimeout((()=>i.open=!0),300),i.reposition(),i}closeColorPopover(){1===this.colors.length?this.popoverNode&&document.body.removeChild(this.popoverNode):(this.symbolStylerWatchScaleHandle?.remove(),this.popoverNode&&this.closeSymbolStylerPopover()),this.selected=!1,this.popoverNode=void 0}closeSymbolStylerPopover(){this.popoverNode?.parentElement?.removeChild(this.popoverNode),this.popoverNode=void 0}async buildSymbolStylerForRamp(e){const{modules:t,popupState:o}=this,{mapView:s,portal:a,strings:r}=o,{colors:n}=this,{popoverNode:l}=e,c=t.esriLang.clone(n.filter(((e,t)=>t<10))),h=t.pieChartSchemes.getSchemes({basemap:s.map?.basemap??"topo",geometryType:"polygon",numColors:Math.min(10,n.length)}),d=this.getColorRampsWithSchemes(h).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),p=await this.createSymbolStylerElement(l),u=p.edit(new t.SimpleFillSymbol,{portal:a,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:d,parts:{transparency:!1}}},fill:{color:c.reverse()}});p.stringOverrides={fillColor:r.color},p.addEventListener("arcgisSymbolStylerEdit",(({detail:{info:{fill:e}}})=>{const o=t.esriLang.clone(e.color).reverse();if(o.length<this.colors.length){for(let e=o.length;e<this.colors.length;e++)o.push(t.esriLang.clone(o[e%10]))}(this.chartMediaInfo?.value).colors=o,this.colors=o,(0,i.f)(this.el),this.arcgisPopupColorButtonChange.emit(t.esriLang.clone(this.colors))})),l.addStyler(p),await u}getColorRampsWithSchemes(e){const t=[e.primaryScheme].concat(e.secondarySchemes),o=[];return t.forEach((e=>{o.push({colors:e.colors,scheme:e})})),o}async createSymbolStylerElement(e){const t=document.createElement("arcgis-symbol-styler");return t.style="max-height: max(calc(100vh - 200px), 300px)",t.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:"rtl"===(0,d.b)(this.el)?3:-3,refElement:await e.getPopoverRefElement()||this.popoverButtonNode},t}get el(){return(0,i.a)(this)}};g.style=".color-selector{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.color-selector:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.color-selector:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.color-selector:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.color-selector.selected{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.color-icon-section{height:16px;display:inline-block}.color-icon{width:100%;height:16px;overflow:hidden;border-radius:0}.color-icon.transparent{height:15px;width:100%}.color-icon.transparent svg{height:15px;width:95%;stroke:#e0e0e0;stroke-width:1px}.color-edit-button{padding:1px;height:18px;width:18px;border:none;cursor:pointer;color:var(--calcite-ui-icon-color)}.color-edit-button:focus{outline:none}";const v=class{constructor(e){(0,i.r)(this,e),this.arcgisMultimediaChange=(0,i.c)(this,"arcgisMultimediaChange",7),this.closePopupPopovers=(0,i.c)(this,"closePopupPopovers",7),this.manager=(0,n.u)(this),this.referenceElement=void 0,this.imageMediaInfo=void 0,this.mediaIndexPosition=void 0,this.popupState=void 0}closePopupPopoversHandler(){this.removeAttributesSelectionPopover()}async reposition(){this.popoverNode?.reposition()}componentWillLoad(){this.imageMediaInfo.title=this.imageMediaInfo.title||"",this.imageMediaInfo.altText=this.imageMediaInfo.altText||"",this.imageMediaInfo.caption=this.imageMediaInfo.caption||"",this.imageMediaInfo.value.sourceURL=this.imageMediaInfo.value.sourceURL||"",this.imageMediaInfo.value.linkURL=this.imageMediaInfo.value.linkURL||""}componentDidLoad(){this.sourceUrlNode.value=this.imageMediaInfo.value.sourceURL,this.imageTitleNode.value=this.imageMediaInfo.title,this.refreshIntervalNode.value=this.imageMediaInfo.refreshInterval?`${this.imageMediaInfo.refreshInterval}`:"0",this.imageCaptionNode.value=this.imageMediaInfo.caption,this.imageLinkNode.value=this.imageMediaInfo.value.linkURL,this.imageAltTextNode.value=this.imageMediaInfo.altText,this.panelNode?.setFocus()}componentDidUpdate(){this.arcgisMultimediaChange.emit(this.mediaIndexPosition)}disconnectedCallback(){this.pickListNode&&document.body.removeChild(this.pickListNode)}render(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)(i.H,{key:"2b2fd6bed9b113bf6f08aa320e5a365f8afd5186",class:"js-app-flyout"},(0,i.h)("calcite-popover",{key:"dcc6f020cb16f07daa731d92ad6db554c5fd872d",class:"popover",placement:"leading-start",open:!0,pointerDisabled:!0,referenceElement:this.referenceElement,offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50,label:t.configureImage,triggerDisabled:!0,ref:e=>this.popoverNode=e},(0,i.h)("calcite-panel",{key:"bac1ad9db068f4f71c8528563fd8c3acdc1d8c02",closable:!0,style:{width:`${this.referenceElement.getBoundingClientRect().width}px`},onCalcitePanelClose:()=>this.closePopupPopovers.emit(),ref:e=>this.panelNode=e},(0,i.h)("div",{key:"5dd372c61c91b7497005fffa9ebaff0fae86b251",slot:"header-content"},t.configureImage),(0,i.h)("div",{key:"261ba37c67a2a33ec6c583c386f9f34b1e5233e2",class:"popover-image-div"},this.renderImageConfigOptions()),this.renderDoneButton())))}renderImageConfigOptions(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("div",null,this.renderFormInput(r.I.SOURCE_URL),(0,i.h)("calcite-block-section",{open:!0,text:t.options},this.renderFormInput(r.I.TITLE),this.renderFormInput(r.I.CAPTION),this.renderFormInput(r.I.ALT_TEXT),this.renderFormInput(r.I.LINK_URL),this.renderRefreshInterval()))}renderFormInput(e){const{popupState:t}=this,{strings:o,popupTemplate:s}=t,a=this.getImageInputObject(e);return(0,i.h)("calcite-label",{scale:"s"},a.inputLabel,(0,i.h)("div",{id:a.popoverId,class:"form-input-button"},e!==r.I.CAPTION?(0,i.h)("calcite-input",{class:"input",type:"text",autofocus:!0,value:a.inputValue,placeholder:a.placeHolder,onCalciteInputInput:(0,c.d)((e=>{e.preventDefault(),e.stopPropagation(),this.changeImageProperties()}),300),ref:a.referenceElement}):(0,i.h)("calcite-text-area",{resize:"vertical",autofocus:!0,value:a.inputValue,placeholder:a.placeHolder,onCalciteTextAreaInput:(0,c.d)((e=>{e.preventDefault(),e.stopPropagation(),this.changeImageProperties()}),300),ref:a.referenceElement}),s.fieldInfos?.length&&(0,i.h)("calcite-action",{text:o.attributes,"text-display":"hidden",onClick:()=>this.openAttributesList(a.imageInput),scale:"s",icon:"brackets-curly"})))}renderRefreshInterval(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("calcite-block-section",{text:t.refreshInterval,toggleDisplay:"switch",open:!!this.imageMediaInfo.refreshInterval,onCalciteBlockSectionToggle:(0,c.d)((e=>{e.preventDefault(),e.stopPropagation(),this.refreshIntervalNode.value="0",this.changeImageProperties()}),300)},(0,i.h)("calcite-label",{class:"refresh-interval-label",scale:"s",layout:"inline"},(0,i.h)("calcite-input-number",{class:"refresh-image-input",min:0,max:1440,ref:e=>this.refreshIntervalNode=e,value:this.imageMediaInfo.refreshInterval?`${this.imageMediaInfo.refreshInterval}`:"0",onCalciteInputNumberInput:(0,c.d)((()=>{if(this.refreshIntervalNode.value){const e=Number.parseInt(this.refreshIntervalNode.value);e<0?this.refreshIntervalNode.value="0":e>1440&&(this.refreshIntervalNode.value="1440")}this.changeImageProperties()}),300)}),t.minutes))}renderDoneButton(){const{popupState:e}=this,{strings:t}=e;return(0,i.h)("calcite-button",{appearance:"outline-fill",slot:"footer",width:"full",onClick:()=>this.closePopupPopovers.emit()},t.done)}getImageInputObject(e){const{popupState:t}=this,{strings:o}=t,i={};return i.imageInput=e,i.popoverId=`popoverId_${i.imageInput}`,e===r.I.SOURCE_URL?(i.inputLabel=o.url,i.referenceElement=e=>{this.sourceUrlNode=e},i.inputValue=this.imageMediaInfo.value.sourceURL,i.placeHolder=o.imageUrlPlaceHolder):e===r.I.TITLE?(i.inputLabel=o.title,i.referenceElement=e=>{this.imageTitleNode=e},i.inputValue=this.imageMediaInfo.title,i.placeHolder=o.imageTitlePlaceHolder):e===r.I.CAPTION?(i.inputLabel=o.caption,i.referenceElement=e=>{this.imageCaptionNode=e},i.inputValue=this.imageMediaInfo.caption,i.placeHolder=o.imageCaptionPlaceHolder):e===r.I.ALT_TEXT?(i.inputLabel=o.description,i.referenceElement=e=>{this.imageAltTextNode=e},i.inputValue=this.imageMediaInfo.altText,i.placeHolder=o.describeImage):e===r.I.LINK_URL&&(i.inputLabel=o.link,i.referenceElement=e=>{this.imageLinkNode=e},i.inputValue=this.imageMediaInfo.value.linkURL,i.placeHolder=o.imageLinkUrlPlaceHolder),i}openAttributesList(e){const{popupState:t}=this,{strings:o}=t;this.pickListNode||(this.pickListNode=document.createElement("arcgis-popup-field-pick-list"),this.pickListNode.popoverProps={refElement:this.panelNode},this.pickListNode.multiple=!1,this.pickListNode.heading=o.addField,this.pickListNode.popupState=t,this.pickListNode.addEventListener("arcgisChange",(t=>{t.stopPropagation();const o=t.detail.selectedFields[0];this.handleFieldPickListChange(o,e)})),this.pickListNode.addEventListener("arcgisClose",(e=>{e.stopPropagation(),this.removeAttributesSelectionPopover()})),document.body.appendChild(this.pickListNode),this.panelNode.disabled=!0)}handleFieldPickListChange(e,t){switch(t){case r.I.SOURCE_URL:(0,h.a)(this.sourceUrlNode,e);break;case r.I.TITLE:(0,h.a)(this.imageTitleNode,e);break;case r.I.CAPTION:(0,h.a)(this.imageCaptionNode,e);break;case r.I.LINK_URL:(0,h.a)(this.imageLinkNode,e);break;case r.I.ALT_TEXT:(0,h.a)(this.imageAltTextNode,e)}this.changeImageProperties()}changeImageProperties(){this.imageMediaInfo.value.sourceURL=this.sourceUrlNode.value,this.imageMediaInfo.title=this.imageTitleNode.value,this.imageMediaInfo.caption=this.imageCaptionNode.value,this.imageMediaInfo.altText=this.imageAltTextNode.value,this.imageMediaInfo.value.linkURL=this.imageLinkNode.value,this.imageMediaInfo.refreshInterval=Number.isNaN(Number.parseInt(this.refreshIntervalNode.value))?0:Number.parseInt(this.refreshIntervalNode.value),(0,i.f)(this.el)}removeAttributesSelectionPopover(){this.pickListNode&&(document.body.removeChild(this.pickListNode),this.pickListNode=void 0),this.panelNode.disabled=!1}get el(){return(0,i.a)(this)}};v.style=".popover{--calcite-popover-z-index:100}.popover-image-div{background-color:var(--calcite-color-foreground-1);padding:var(--calcite-spacing-sm);max-height:calc(60vh - 102px);}.form-input-button{display:flex}.input{width:100%}calcite-text-area{width:100%;--calcite-text-area-min-width:0;--calcite-text-area-min-height:42px}.refresh-interval-label{margin-top:var(--calcite-spacing-sm)}.refresh-image-input{width:5rem}"},10465:(e,t,o)=>{o.d(t,{D:()=>i,a:()=>d,b:()=>l,c:()=>n,g:()=>C,s:()=>b});class i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const s=(e,t,o)=>(0,r(t).subscribe)((t=>{const i=t.some((t=>((e,t)=>{let o=e;for(;o;){if(o===t)return!0;if(!o.parentNode)return!1;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e,t.target)));i&&o()})),a={},r=e=>{const t=e.join(","),o=a[t];if(void 0!==o)return o;const i=new Set,s=new MutationObserver((e=>i.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const r={subscribe:e=>(i.add(e),()=>{i.delete(e),0===i.size&&(s.disconnect(),a[t]=void 0)})};return a[t]=r,r},n=(e,t)=>{let o=e;for(;o;){const e=o.closest?.(t);if(e)return e;const i=o.getRootNode?.();if(i===globalThis.document)return null;o=i.host}return null},l=e=>c(e,"dir","ltr"),c=(e,t,o)=>{const i=n(e,`[${t}]`);return i?.getAttribute(t)??o},h=e=>{let t="";for(let o=0;o<e;o++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},d=()=>[h(2),h(1),h(1),h(1),h(3)].join("-"),p="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),u=new Set(p),m="en",f={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},g={},v=async(e,t)=>{const o=`${t}${e}.json`;try{const e=await fetch(o);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===m?{}:await v(m,t)},C=e=>{const t=c(e,"lang",globalThis.navigator?.language||m);return{lang:t,t9nLocale:I(t)}},I=e=>{const[t,o]=e.split("-"),i=t.toLowerCase();let s=i;return o&&(s=`${i}-${o.toUpperCase()}`),s=f[s]??s,u.has(s)?s:o?I(i):m},b=(e,t,o,i)=>{let a;const r=()=>P(e,t(),i).then((e=>{a?.lang===e.lang&&a.t9nLocale===e.t9nLocale&&a.t9nStrings===e.t9nStrings||o(e),a=e})).catch(console.error);return queueMicrotask(r),s(e,["lang"],r)},P=async(e,t,o=e.localName.split("-").slice(1).join("-"))=>{const{lang:i,t9nLocale:s}=C(e),a=`${t}/${o}/t9n`,r=null===o?{}:await(async(e,t,o="")=>{const i=`${t}/${o}`,s=`${i}${e}.json`;return g[s]??(g[s]=v(e,i)),await g[s]})(s,a,"messages.");return{lang:i,t9nLocale:s,t9nStrings:r}}},53127:(e,t,o)=>{o.d(t,{a:()=>s,d:()=>i,t:()=>a});const i=(e,t)=>{let o,i="idle";const s=async(...s)=>await new Promise((a=>{switch(i){case"flushed":i="idle",o?(clearTimeout(o),a(e(...s))):a(null);break;case"invoked":clearTimeout(o),i="idle",a(e(...s));break;case"cancelled":clearTimeout(o),i="idle",a(null);break;default:o&&clearTimeout(o),i="pending",o=setTimeout((()=>{i="idle",a(e(...s))}),t)}}));return s.flush=async function(...e){return i="flushed",await s(...e)},s.invoke=async function(...e){return i="invoked",await s(...e)},s.cancel=async function(...e){return i="cancelled",await s(...e)},s.getStatus=function(){return i},s},s=(e,t)=>{let o;return async(...i)=>await new Promise((s=>{o||(o=setTimeout((()=>{clearTimeout(o),o=void 0,s(e(...i))}),t))}))};function a(e){return new Promise((t=>setTimeout(t,e)))}},82780:(e,t,o)=>{var i,s,a,r;o.d(t,{A:()=>s,C:()=>i,I:()=>r,P:()=>a}),function(e){e.ATTRIBUTES="attributes",e.ATTACHMENTS="attachments",e.CHARTS="charts",e.IMAGES="images",e.RICH_TEXT="richText",e.ARCADE="arcade",e.RELATIONSHIP="relationship",e.ASSOCIATIONS="associations",e.EDIT_INFO_SUMMARY="editInfoSummary"}(i||(i={})),function(e){e.PREVIEW="preview",e.LIST="list",e.AUTO="auto"}(s||(s={})),function(e){e.IMAGE="image",e.BAR_CHART="bar-chart",e.COLUMN_CHART="column-chart",e.LINE_CHART="line-chart",e.PIE_CHART="pie-chart"}(a||(a={})),function(e){e.SOURCE_URL="sourceUrl",e.TITLE="title",e.CAPTION="caption",e.LINK_URL="linkUrl",e.ALT_TEXT="altText"}(r||(r={}))},92030:(e,t,o)=>{function i(e,t){const o="CALCITE-INPUT"===e.tagName,i=o?e.shadowRoot.querySelector("input"):e.shadowRoot.querySelector("textarea"),s=i.selectionStart,a=[e.value.slice(0,s),`{${t}}`,e.value.slice(s)].join("");e.value=a;const r=s+2+t.length;setTimeout((()=>{o?e.setFocus():(i?.setSelectionRange(r,r),i?.focus()),i?.setSelectionRange(r,r)}),1)}o.d(t,{a:()=>i})}}]);