/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-0edb69.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm-0edb69"],{10465:(e,t,i)=>{i.d(t,{D:()=>n,a:()=>d,b:()=>c,c:()=>l,g:()=>f,s:()=>x});class n{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}const a=(e,t,i)=>(0,o(t).subscribe)((t=>{const n=t.some((t=>((e,t)=>{let i=e;for(;i;){if(i===t)return!0;if(!i.parentNode)return!1;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(e,t.target)));n&&i()})),s={},o=e=>{const t=e.join(","),i=s[t];if(void 0!==i)return i;const n=new Set,a=new MutationObserver((e=>n.forEach((t=>t(e)))));globalThis.document&&a.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const o={subscribe:e=>(n.add(e),()=>{n.delete(e),0===n.size&&(a.disconnect(),s[t]=void 0)})};return s[t]=o,o},l=(e,t)=>{let i=e;for(;i;){const e=i.closest?.(t);if(e)return e;const n=i.getRootNode?.();if(n===globalThis.document)return null;i=n.host}return null},c=e=>r(e,"dir","ltr"),r=(e,t,i)=>{const n=l(e,`[${t}]`);return n?.getAttribute(t)??i},h=e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},d=()=>[h(2),h(1),h(1),h(1),h(3)].join("-"),p="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),m=new Set(p),u="en",g={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},b={},w=async(e,t)=>{const i=`${t}${e}.json`;try{const e=await fetch(i);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===u?{}:await w(u,t)},f=e=>{const t=r(e,"lang",globalThis.navigator?.language||u);return{lang:t,t9nLocale:k(t)}},k=e=>{const[t,i]=e.split("-"),n=t.toLowerCase();let a=n;return i&&(a=`${n}-${i.toUpperCase()}`),a=g[a]??a,m.has(a)?a:i?k(n):u},x=(e,t,i,n)=>{let s;const o=()=>C(e,t(),n).then((e=>{s?.lang===e.lang&&s.t9nLocale===e.t9nLocale&&s.t9nStrings===e.t9nStrings||i(e),s=e})).catch(console.error);return queueMicrotask(o),a(e,["lang"],o)},C=async(e,t,i=e.localName.split("-").slice(1).join("-"))=>{const{lang:n,t9nLocale:a}=f(e),s=`${t}/${i}/t9n`,o=null===i?{}:await(async(e,t,i="")=>{const n=`${t}/${i}`,a=`${n}${e}.json`;return b[a]??(b[a]=w(e,n)),await b[a]})(a,s,"messages.");return{lang:n,t9nLocale:a,t9nStrings:o}}},50527:(e,t,i)=>{i.r(t),i.d(t,{arcgis_map_config_customize_map:()=>c});var n=i(11254),a=i(14528),s=i(84260),o=i(69811),l=i(53127);i(10465);const c=class{constructor(e){(0,n.r)(this,e),this.arcgisUpdatePermissions=(0,n.c)(this,"arcgisUpdatePermissions",7),this.manager=(0,a.u)(this),this.center=[],this.mapConfig={bookmarksEnabled:!1,legendEnabled:!1,headingEnabled:!1,mapSummaryEnabled:!1,mapView:"scale",shareEnabled:!1,theme:"light"},this.extent=void 0,this.shortenURL=!1,this.strings=(0,s.u)({blocking:!0}),this.handleMapViewChange=(0,l.d)((async e=>{if(this.scale=e.scale,this.extent=e.extent?this.formatExtent(e.extent):void 0,e.extent&&!e.extent.spatialReference.wkid){await this.loadProjectionModule();const t=this.projection.execute(e.extent,{wkid:4326});t?.extent&&(this.extent=this.formatExtent(t.extent))}if(this.center=Array.isArray(e.center)?e.center:e.center.longitude&&e.center.latitude?[e.center.longitude,e.center.latitude]:[e.center.x,e.center.y],"spatialReference"in e.center&&(!e.center.spatialReference.wkid||!e.center.spatialReference.isGeographic)){await this.loadProjectionModule();const t=this.projection.execute(e.center,{wkid:4326});"point"===t?.type&&t.longitude&&t.latitude&&(this.center=[t.longitude,t.latitude])}this.generateCustomOutput()}),300),this.config=void 0,this.mapView=void 0,this.mode=void 0,this.webmap=void 0,this.copied=!1,this.output="",this.scaleTooltipOpen=!1,this.showPermissionsNotice=!1}async componentWillLoad(){if(this.showPermissionsNotice="public"!==this.webmap.portalItem?.access,this.mapView&&(this.initialCenter=this.mapView.center,this.initialScale=this.mapView.scale,!this.mapView?.center.spatialReference.wkid||!this.mapView?.center.spatialReference.isGeographic)){await this.loadProjectionModule();const e=this.projection.execute(this.mapView.center,{wkid:4326},{areaOfInterestExtent:this.mapView.extent});"point"===e?.type&&(this.initialCenter=e)}await this.generateCustomOutput()}async refreshAccess(){if(!this.webmap.portalItem?.access)return;const e=this.webmap.portalItem.clone();await e.reload(),this.showPermissionsNotice="public"!==e.access}render(){return(0,n.h)("calcite-dialog",{key:"b30042d0d790e1124d780b0c9388bbd9c282422c",class:"customize-map-dialog",heading:"embed"===this.mode?this.strings.embed:this.strings.createLink,modal:!0,open:!0,width:"l",scale:"l"},(0,n.h)("div",{key:"864eda5eb05d17ab032cde380d3c576ed927436d",class:"customize-map-content"},this.renderConfigPanel(),this.renderPreviewPanel()),(0,n.h)("div",{key:"e56b086328a72e91ba8164318ec215f37baf51fd",slot:"footer",class:"footer"},this.renderShareOutput()))}renderConfigPanel(){return(0,n.h)("calcite-panel",{class:"config-panel"},this.renderMode(),this.renderMapElements(),this.renderMapActions(),this.renderMapView())}renderMode(){return(0,n.h)("calcite-label",{class:"mode-tiles section-title"},this.strings.mode,(0,n.h)("calcite-tile-group",{alignment:"center",label:this.strings.mode,selectionAppearance:"border",selectionMode:"single"},(0,n.h)("calcite-tile",{alignment:"center",selected:!0,onCalciteTileSelect:()=>{this.mapConfig.theme="light",this.generateCustomOutput()}},(0,n.h)("div",{class:"width-full",slot:"content-top"},(0,n.h)("calcite-label",{alignment:"center"},(0,n.h)("calcite-icon",{class:"width-full",icon:"brightness"}),this.strings.light))),(0,n.h)("calcite-tile",{alignment:"center",onCalciteTileSelect:()=>{this.mapConfig.theme="dark",this.generateCustomOutput()}},(0,n.h)("div",{class:"width-full",slot:"content-top"},(0,n.h)("calcite-label",{alignment:"center"},(0,n.h)("calcite-icon",{class:"width-full",icon:"moon"}),this.strings.dark)))))}renderMapView(){const e=(0,n.g)("./assets/images/centerscale.png");return(0,n.h)(n.F,null,(0,n.h)("calcite-label",{class:"section-title"},this.strings.mapView),(0,n.h)("div",{class:"map-scale-info"},(0,n.h)("calcite-switch",{checked:"scale"===this.mapConfig.mapView,class:"action-switch",onCalciteSwitchChange:e=>{this.mapConfig.mapView=e.target.checked?"scale":"content",this.generateCustomOutput()}}),(0,n.h)("calcite-label",{class:"map-scale-info-label"},this.strings.preserveScale),(0,n.h)("calcite-button",{class:"map-scale-info-icon",scale:"s",iconStart:"information",kind:"neutral",appearance:"transparent",onClick:()=>this.scaleTooltipOpen=!this.scaleTooltipOpen,ref:e=>{e&&(this.scaleTooltipButton=e)}})),(0,n.h)("calcite-popover",{open:this.scaleTooltipOpen,overlayPositioning:"fixed",referenceElement:this.scaleTooltipButton,label:this.strings.preserveScale,onCalcitePopoverClose:()=>this.scaleTooltipButton?.setFocus()},(0,n.h)("calcite-panel",{heading:this.strings.preserveScale,closable:!0,onCalcitePanelClose:()=>{this.scaleTooltipOpen=!1,setTimeout((()=>{this.scaleTooltipButton?.setFocus()}),300)}},(0,n.h)("div",{class:"tooltip-content"},(0,n.h)("img",{src:e}),this.strings.preserveScaleTooltip),this.config.helpBase&&this.config.helpMap&&(0,n.h)("calcite-button",{slot:"footer-end",target:"_blank",href:`${this.config.helpBase}${this.config.helpMap[120004664]}`},this.strings.learnMore))))}renderMapElements(){return(0,n.h)(n.F,null,(0,n.h)("calcite-label",{class:"section-title"}," ",this.strings.mapElements),(0,n.h)("calcite-label",{class:"bottom-padding-sm",layout:"inline"},(0,n.h)("calcite-checkbox",{onCalciteCheckboxChange:e=>{this.mapConfig.headingEnabled=e.target.checked,this.generateCustomOutput()}}),this.strings.mapTitle),(0,n.h)("calcite-label",{class:"bottom-padding-sm",layout:"inline"},(0,n.h)("calcite-checkbox",{onCalciteCheckboxChange:e=>{this.mapConfig.legendEnabled=e.target.checked,this.generateCustomOutput()}}),this.strings.legend),(0,n.h)("calcite-label",{class:"bottom-padding-sm",layout:"inline"},(0,n.h)("calcite-checkbox",{onCalciteCheckboxChange:e=>{this.mapConfig.mapSummaryEnabled=e.target.checked,this.generateCustomOutput()}}),this.strings.mapSummary),(0,n.h)("calcite-label",{class:"bottom-padding-sm",layout:"inline"},(0,n.h)("calcite-checkbox",{onCalciteCheckboxChange:e=>{this.mapConfig.bookmarksEnabled=e.target.checked,this.generateCustomOutput()}}),this.strings.bookmarks))}renderMapActions(){return(0,n.h)(n.F,null,(0,n.h)("calcite-label",{class:"actions section-title"},this.strings.availableActions," "),(0,n.h)("calcite-label",{class:"bottom-padding-md",layout:"inline"},(0,n.h)("calcite-switch",{class:"action-switch",onCalciteSwitchChange:e=>{this.mapConfig.shareEnabled=e.target.checked,this.generateCustomOutput()}}),this.strings.openInMapViewer))}renderPreviewPanel(){const{mapConfig:e}=this;return(0,n.h)("calcite-panel",{class:"map-container"},(0,n.h)("calcite-notice",{class:"bottom-padding-sm permissions-notice",open:"link"===this.mode&&this.showPermissionsNotice,icon:"exclamation-mark-triangle",closable:!0,kind:"warning",width:"full"},(0,n.h)("div",{slot:"title"},this.strings.permissionsNoticeTitle),(0,n.h)("div",{slot:"message"},this.strings.permissionsNoticeDescription),(0,n.h)("calcite-link",{slot:"link",onClick:()=>this.arcgisUpdatePermissions.emit()},this.strings.updatePermissions)),(0,n.h)("arcgis-embedded-map",{"item-id":this.webmap.portalItem?.id,"portal-url":this.webmap.portalItem?.portal.url,theme:e.theme,"bookmarks-enabled":e.bookmarksEnabled,"heading-enabled":e.headingEnabled,"legend-enabled":e.legendEnabled,"information-enabled":e.mapSummaryEnabled,"share-enabled":e.shareEnabled,"scroll-enabled":"link"===this.mode,"strict-portal":this.webmap.portalItem?.portal.isPortal,center:this.initialCenter,scale:this.initialScale,host:void 0,"calcite-script-override":void 0,"calcite-style-override":void 0,ref:e=>{e&&e.addEventListener("arcgisViewChange",(()=>{this.handleMapViewChange(e)}))}}))}renderShareOutput(){return(0,n.h)(n.F,null,(0,n.h)("calcite-input",{class:"code-input-box",type:"text",value:this.output}),"link"===this.mode&&!this.webmap.portalItem?.portal.isPortal&&(0,n.h)("calcite-label",{class:"shorten-url",layout:"inline"},(0,n.h)("calcite-checkbox",{onCalciteCheckboxChange:async e=>{this.shortenURL=e.target.checked,this.output=await this.getSimpleViewLink(),this.copied=!1},ref:e=>{e&&(this.shortenUrlCheckbox=e)}}),this.strings.shortenURL),this.copied?(0,n.h)("calcite-button",{"icon-start":"check",kind:"neutral"},"embed"===this.mode?this.strings.htmlCopied:this.strings.linkCopied):(0,n.h)("calcite-button",{kind:"brand",onClick:()=>{this.copied=!0,navigator.clipboard.writeText(this.output)}},"embed"===this.mode?this.strings.copyHTML:this.strings.copyLink))}formatExtent(e){return`${e.xmin},${e.ymin},${e.xmax},${e.ymax},${e.spatialReference.wkid}`}async generateCustomOutput(){this.shortenUrlCheckbox&&(this.shortenUrlCheckbox.checked=!1),"embed"===this.mode?this.output=this.getEmbedHTML():"link"===this.mode&&(this.output=await this.getSimpleViewLink()),this.copied=!1,this.shortenURL=!1}getEmbedHTML(){const{mapConfig:e}=this,t="\x3c!-- Add script to the <head> of your page to load the embeddable map component --\x3e\n",i=`<script type="module" src="${this.webmap.portalItem?.portal.isPortal?`${this.webmap.portalItem.portal.url}/apps/mapviewer/node_modules/@arcgis/embeddable-components/dist/arcgis-embeddable-components/`:"https://js.arcgis.com/embeddable-components/4.33/"}arcgis-embeddable-components.esm.js"><\/script>\n`;let n=`\n    <arcgis-embedded-map\n    style="height:600px; width:700px;"\n    item-id="${this.webmap.portalItem?.id}"\n    theme="${e.theme}"\n    \n    ${e.bookmarksEnabled?"bookmarks-enabled":""}\n    ${e.headingEnabled?"heading-enabled":""}\n    ${e.legendEnabled?"legend-enabled":""}\n    ${e.mapSummaryEnabled?"information-enabled":""}\n    ${e.shareEnabled?"share-enabled":""}\n    ${"content"===e.mapView&&this.extent?`extent="${this.extent}"`:"scale"===e.mapView&&this.center&&this.scale?`center="${this.center.toString()}" scale="${this.scale}"`:""}\n    ${this.webmap.portalItem?.portal.url?`portal-url="${this.webmap.portalItem.portal.url}"`:""}\n    ${this.webmap.portalItem?.portal.isPortal?"strict-portal":""}></arcgis-embedded-map>`.replaceAll(" ","").replaceAll(/(?<newLine>\n)\1{0,}/gu," ");return n=t.concat(i).concat("\x3c!-- Add custom element to <body> of your page --\x3e\n").concat(n),n}async getShortenedURL(e){const t=await(0,o.p)(),i=await t("https://arcg.is/prod/shorten",{query:{longUrl:e,f:"json"}}),n=i?.data?.data?.url;return n??void 0}async getSimpleViewLink(){const{mapConfig:e}=this;let t=`${`${this.webmap.portalItem?.portal.url}/apps/mapviewer/index.html?`}\n    configurableview=true\n    &webmap=${this.webmap.portalItem?.id}\n    &theme=${e.theme}\n    ${e.bookmarksEnabled?"&bookmarks=true":""}\n    ${e.headingEnabled?"&heading=true":""}\n    ${e.legendEnabled?"&legend=true":""}\n    ${e.mapSummaryEnabled?"&information=true":""}\n    ${e.shareEnabled?"&share=true":""}\n    ${"content"===e.mapView&&this.extent?`&extent=${this.extent}`:"scale"===e.mapView&&this.center&&this.scale?`&center=${this.center.toString()}&scale=${this.scale}`:""}`.replaceAll(" ","").replaceAll(/(?<newLine>\n)\1{0,}/gu,"");if(this.shortenURL){t=await this.getShortenedURL(t)??t}return this.shortenURL=!1,t}async loadProjectionModule(){this.projection||(this.projection=await(0,o.N)(),this.projection.isLoaded()||await this.projection.load())}static get assetsDirs(){return["assets"]}get el(){return(0,n.a)(this)}};c.style=".action-switch{padding-right:5px}arcgis-embedded-map{--calcite-panel-content-space:0}.actions{padding-top:16px}.bottom-padding-sm{padding-bottom:8px}.bottom-padding-md{padding-bottom:12px}.code-input-box{width:100%}.config-panel{--calcite-panel-background-color:white}.customize-map-content{height:750px;display:flex}.embed-dialog{--calcite-dialog-background-color:white}.footer{display:flex;width:100%;-moz-column-gap:10px;column-gap:10px}.info-icon{color:var(--calcite-color-brand)}.map-container{width:250%;position:relative}.map-scale-info{display:flex;align-items:center}.map-scale-info-label{margin-left:var(--calcite-spacing-sm);margin-right:var(--calcite-spacing-xxs);--calcite-label-margin-bottom:0}.map-scale-info-icon:hover{cursor:pointer}.mode-tiles{padding-bottom:16px}.section-title{font-weight:500}.shorten-url{margin:0 20px;--calcite-label-margin-bottom:0px;min-width:-moz-fit-content;min-width:fit-content}.size-info{margin-top:10px;margin-bottom:10px}.size-select{margin-right:10px}.tooltip-content{width:340px}.width-full{width:100%}"},53127:(e,t,i)=>{i.d(t,{a:()=>a,d:()=>n,t:()=>s});const n=(e,t)=>{let i,n="idle";const a=async(...a)=>await new Promise((s=>{switch(n){case"flushed":n="idle",i?(clearTimeout(i),s(e(...a))):s(null);break;case"invoked":clearTimeout(i),n="idle",s(e(...a));break;case"cancelled":clearTimeout(i),n="idle",s(null);break;default:i&&clearTimeout(i),n="pending",i=setTimeout((()=>{n="idle",s(e(...a))}),t)}}));return a.flush=async function(...e){return n="flushed",await a(...e)},a.invoke=async function(...e){return n="invoked",await a(...e)},a.cancel=async function(...e){return n="cancelled",await a(...e)},a.getStatus=function(){return n},a},a=(e,t)=>{let i;return async(...n)=>await new Promise((a=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,a(e(...n))}),t))}))};function s(e){return new Promise((t=>setTimeout(t,e)))}},84260:(e,t,i)=>{i.d(t,{u:()=>o});var n=i(11254),a=i(10465),s=i(14528);function o({propertyName:e="strings",name:t}){let i=(0,s.r)();const o=(0,a.g)(i.el),c=new a.D,r={_lang:o.lang,_t9nLocale:o.t9nLocale};i.manager.onLoad((()=>c.promise));const h=new WeakRef(i);function d(){const e=h.deref();return e||m?.(),e}i=void 0;const p=l((()=>d()?.el)),m=(0,a.s)(p,(()=>(0,n.g)("./assets")),(({t9nLocale:t,t9nStrings:i,lang:n})=>{const a=d();if(!a)return;a[e]={...i,_lang:n,_t9nLocale:t},c.resolve()}),t);return r}const l=e=>new Proxy({},{get(t,i){const n=e();if(!n)return;const a=Reflect.get(n,i,n);return"function"==typeof a?a.bind(n):a}})}}]);