/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--4217bd.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_esm_arcgis--4217bd"],{14528:(t,i,e)=>{function s(t){const i=[];n=t,queueMicrotask((()=>{n===t&&(n=void 0)}));const e=t.componentWillLoad;return t.componentWillLoad=async()=>{await Promise.all(i.map((t=>t()))).then((()=>{})),await(e?.call(t))},{onLoad:t=>i.push(t)}}let n;function h(){return n}e.d(i,{r:()=>h,u:()=>s})},81174:(t,i,e)=>{e.r(i),e.d(i,{arcgis_xy_slider:()=>h});var s=e(11254),n=e(14528);const h=class{constructor(t){(0,s.r)(this,t),this.arcgisChange=(0,s.c)(this,"arcgisChange",7),this.arcgisXYSliderChange=(0,s.c)(this,"arcgisXYSliderChange",7),this.arcgisInput=(0,s.c)(this,"arcgisInput",7),this.arcgisXYSliderInput=(0,s.c)(this,"arcgisXYSliderInput",7),this.manager=(0,n.u)(this),this.gridHovered=!1,this.snapKeyDown=!1,this.dragging=!1,this.width=100,this.height=100,this.gridMouseDownHandler=t=>{const{offsetX:i,offsetY:e}=t;this.dragging=!0,this.captureValue(i,e),t.preventDefault(),document.addEventListener("pointermove",this.globalMouseMoveHandler),document.addEventListener("pointerup",this.globalMouseUpHandler,{once:!0}),this.activeGridRect=this.context.canvas.getBoundingClientRect(),this.setFocus(),this.drawGrid()},this.globalMouseMoveHandler=t=>{const{el:i,activeGridRect:e}=this;if(!i.isConnected)return;let s,n;const h=e,{clientX:a,clientY:o}=t;if(this.gridHovered)s=a-h.x,n=o-h.y;else{const t=h.width,i=h.height;s=a<h.x+t&&a>h.x?a-h.x:a<h.x?0:t,n=o<h.y+i&&o>h.y?o-h.y:o<h.y?0:i}this.captureValue(s,n),this.drawGrid()},this.globalMouseUpHandler=()=>{this.dragging=!1,this.arcgisXYSliderChange.emit(),this.arcgisChange.emit(),document.removeEventListener("mousemove",this.globalMouseMoveHandler),document.removeEventListener("pointermove",this.globalMouseMoveHandler)},this.gridMouseEnter=()=>{this.gridHovered=!0},this.gridMouseLeave=()=>{this.gridHovered=!1},this.handleThumbKeyDown=t=>{let i,e;const{key:s}=t;["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(s)&&(t.preventDefault(),t.stopPropagation()),e="ArrowDown"===s?this.clamp(this.y+this.step,this.maxY,this.minY):"ArrowUp"===s?this.clamp(this.y-this.step,this.maxY,this.minY):this.y,i="ArrowLeft"===s?this.clamp(this.x-this.step,this.maxX,this.minX):"ArrowRight"===s?this.clamp(this.x+this.step,this.maxX,this.minX):this.x,this.userSetXY(i,e),this.drawGrid()},this.handleKeyUp=({shiftKey:t})=>{this.snapKeyDown=t},this.handleKeyDown=({shiftKey:t})=>{this.snapKeyDown=t},this.initGrid=t=>{t&&(this.context=t.getContext("2d"),this.setCanvasContextSize(t,{width:this.width,height:this.height}),this.drawGrid())},this.maxX=10,this.minX=-10,this.maxY=10,this.minY=-10,this.snappable=!1,this.step=1,this.x=0,this.y=0}disconnectedCallback(){document.removeEventListener("pointermove",this.globalMouseMoveHandler),document.removeEventListener("pointerup",this.globalMouseUpHandler)}handleXChange(t){this.x=this.clampX(t),this.drawGrid()}handleYChange(t){this.y=this.clampY(t),this.drawGrid()}async componentWillLoad(){console.warn("%cmap-config-components","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",'[arcgis-xy-slider] component in @arcgis/map-config-components is deprecated and will be removed soon. Use "arcgis-map-config-xy-slider" instead.')}clamp(t,i,e){return Math.min(i,Math.max(e,t))}clampX(t){return this.clamp(t,this.maxX,this.minX)}clampY(t){return this.clamp(t,this.maxY,this.minY)}userSetXY(t,i){t=this.normalize(t),i=this.normalize(i),this.x===t&&this.y===i||(this.x=t,this.y=i,this.arcgisXYSliderInput.emit(),this.arcgisInput.emit(),this.dragging||(this.arcgisXYSliderChange.emit(),this.arcgisChange.emit()))}mapToRange(t,i,e,s,n){return s+(t-i)*(n-s)/(e-i)}setCanvasContextSize(t,{height:i,width:e}){const s=window.devicePixelRatio||1;t.width=e*s,t.height=i*s,t.style.height=`${i}px`,t.style.width=`${e}px`;t.getContext("2d").scale(s,s)}normalize(t){return this.snappable||this.snapKeyDown?Math.floor(t/this.step):t}captureValue(t,i){this.userSetXY(this.mapToRange(t,0,this.width,this.minX,this.maxX),this.mapToRange(i,0,this.height,this.minY,this.maxY))}drawGrid(){const{context:t,height:i,width:e}=this,s=t;s.fillStyle="#ffffff",s.strokeStyle="#d4d4d4",s.lineWidth=2,s.setLineDash([2]),s.fillRect(0,0,e,i),s.strokeRect(0,0,e,i),s.beginPath(),s.moveTo(0,i/2),s.lineTo(e,i/2),s.stroke(),s.beginPath(),s.moveTo(e/2,0),s.lineTo(e/2,i),s.stroke(),s.setLineDash([]);const n=this.mapToRange(this.x,this.minX,this.maxX,0,this.width),h=this.mapToRange(this.y,this.minY,this.maxY,0,this.height);s.strokeStyle="rgba(0, 97, 155, 0.4)",s.lineWidth=2,s.beginPath(),s.moveTo(e/2,i/2),s.lineTo(n,h),s.stroke()}async setFocus(){this.thumbEl?.focus()}render(){const t=`${this.mapToRange(this.x,this.minX,this.maxX,0,this.width)}%`,i=`${this.mapToRange(this.y,this.minY,this.maxY,0,this.height)}%`;return(0,s.h)(s.H,{key:"64b64ffb3444d3de38148dfae7f4fc465295af78",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},(0,s.h)("div",{key:"476809ef40b8e20c20f64156d0b198d65342d346",class:"container"},(0,s.h)("canvas",{key:"e865d1f45eb3b07b680e01d960ffeaf34b97cb85",class:"grid",onPointerDown:this.gridMouseDownHandler,onPointerEnter:this.gridMouseEnter,onPointerLeave:this.gridMouseLeave,ref:this.initGrid}),(0,s.h)("div",{key:"1345da13a6bd55646cf62916aa70322c50eb1571",class:"thumb",ref:t=>this.thumbEl=t,style:{left:t,top:i},tabIndex:0,onKeyDown:this.handleThumbKeyDown})))}get el(){return(0,s.a)(this)}static get watchers(){return{x:["handleXChange"],y:["handleYChange"]}}};h.style=":host{display:inline-flex}.container{position:relative;width:100px;height:100px}.grid{width:100px;height:100px}.thumb{position:absolute;background-color:var(--calcite-color-brand);width:12px;height:12px;display:inline-block;border-radius:50%;margin-left:-6px;margin-top:-6px;pointer-events:none}"}}]);