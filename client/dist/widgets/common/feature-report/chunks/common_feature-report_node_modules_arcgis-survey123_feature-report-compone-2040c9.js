"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_common_feature-report_node_modules_arcgis-survey123_feature-report-compone-2040c9"],{833:(e,t,o)=>{o.r(t),o.d(t,{error_detail_modal:()=>d,success_detail_modal:()=>l});var r=o(826),a=o(938),s=o(291);const d=class{constructor(e){(0,r.r)(this,e),this.job=void 0,this.open=void 0,this.maxFailedOIDLength=void 0}componentWillLoad(){return this.utilService=s.U.getService(),Promise.resolve(!0).then((()=>a.T.getService().getTranslate())).then((e=>{const t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}componentDidRender(){this.updateFailedOIDlength(this.job)}updateFailedOIDlength(e){if(this.maxFailedOIDLength>0)return;let t=120;const o=this.modal.shadowRoot.querySelector(".helperSpan");return e.failedInfo&&e.failedInfo.length&&o&&e.failedInfo.forEach((e=>{o.innerHTML=e.objectIds,o.offsetWidth>t&&(t=o.offsetWidth)})),this.maxFailedOIDLength=t,t}render(){return(0,r.h)(r.H,{key:"a7e3731bee5790fbaae17f37194ed0bfd11da48f"},(0,r.h)("div",{key:"5bbecdbd2fcb6fec52bb460f5b570467a613e977",class:"helper"},(0,r.h)("div",{key:"6bcdce968d88c1ca76e08783ca49c4f577ab56f2"},(0,r.h)("span",{key:"32da692086fd3889e2f92fcad58fc838992897b6",class:"helperSpan"}))),(0,r.h)("calcite-dialog",{key:"c9cfd6b2b8e79e9dbf979aa6ee977ecaad02e929",modal:"true",open:this.open,heading:this.langTasks.detailFailedOIDs+(this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length?" ("+this.job.resultInfo.failedObjectIds.length+") ":""),onCalciteDialogClose:()=>{this.open=!1}},(0,r.h)("div",{key:"ea552942dbcccdec2f45c59802161131f7bc404b",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`,overflow:"auto"}},this.job&&this.job.failedInfo&&this.job.failedInfo.length?(0,r.h)("table",{class:"table table-striped table-bordered error-table"},(0,r.h)("thead",null,(0,r.h)("tr",null,(0,r.h)("th",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength+16}px`}},this.langTasks.detailFailedOIDs),(0,r.h)("th",null,this.langTasks.detailStatusMsg))),(0,r.h)("tbody",null,this.job.failedInfo.map((e=>(0,r.h)("tr",null,(0,r.h)("td",null,(0,r.h)("div",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength}px`}},e.objectIds)),(0,r.h)("td",null,(0,r.h)("div",{class:"message",innerHTML:this.utilService.parseMarkdown(e.messages)}))))))):"")),(0,r.h)("slot",{key:"a5693e8cd754c93dfdc2c0f317713af0c270384d"}))}get modal(){return(0,r.g)(this)}};d.style=":host{display:block}:host .helper{width:0;height:0;overflow:hidden;visibility:hidden}:host .helper div{width:9999px}:host .helper span{padding:8px}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}";const l=class{constructor(e){(0,r.r)(this,e),this.job=void 0,this.open=void 0}componentWillLoad(){return Promise.resolve(!0).then((()=>{const e=a.T.getService().getTranslateSync(),t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}render(){return(0,r.h)(r.H,{key:"ed841fa0579cb7e4823507e3aa080c87c209d276"},(0,r.h)("calcite-dialog",{key:"17966adac965271456c9982ef59cd3af02dd56e9",modal:"true",open:this.open,heading:this.langTasks.detailSucceededOIDs+(this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?" ("+this.job.resultInfo.succeededObjectIds.length+") ":""),onCalciteDialogClose:()=>{this.open=!1}},(0,r.h)("div",{key:"fc137b7ecc9bf93495612a85c1adcebdd8467042",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`}},this.job&&this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?(0,r.h)("table",{class:"table table-striped table-bordered error-table"},(0,r.h)("tbody",null,(0,r.h)("tr",null,(0,r.h)("td",null,(0,r.h)("div",{class:"message",style:{maxWidth:"720px"}},this.job.resultInfo.succeededObjectIds))))):"")),(0,r.h)("slot",{key:"5f870fbde1ed5ba21b2b13d3516343c1aa2d7e98"}))}get modal(){return(0,r.g)(this)}};l.style=":host{display:block}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}"},938:(e,t,o)=>{o.d(t,{P:()=>a,T:()=>l});var r=o(826);class a{static setProps(e){const t=a.paramesWhitelist;let o="";const r=window.location.hostname.match(/survey123(.*?).arcgis.com/);r&&r[1]&&["dev","qa","beta"].includes(r[1])&&(o=r[1]);const s={apiUrl:`https://survey123${o}.arcgis.com/api/featureReport`,itemId:null,token:null,outputFormat:"docx",portalUrl:"https://www.arcgis.com",locale:this.getLocale(),f:"json"};if("object"==typeof e)for(let o in e)t.indexOf(o)>=0&&(a[o]=e[o]||s[o]||e[o],"locale"===o&&e[o]&&(a[o]=this.convertToSupportedLang(e[o])));"docx"!==a.outputFormat&&"pdf"!==a.outputFormat&&(a.outputFormat="docx")}static getLocale(e){let t=(e=Object.assign({},e||{})).userInfo||{},o=e.portalInfo||{};const r=navigator.language||navigator.userLanguage;return this.convertToSupportedLang(e.userDefinedLocale)||this.convertToSupportedLang(t.culture)||this.convertToSupportedLang(o.culture)||this.convertToSupportedLang(r)||"en"}static convertToSupportedLang(e){e=((e=e||"")+"").toLowerCase();const t=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"].find((t=>t.toLowerCase()===e||t.toLowerCase()===e.split("-")[0]||t.toLowerCase().split("-")[0]===e));return["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","it-CH","de-CH","de-AT","fr-CH"].find((t=>t.toLowerCase()===e))||t}}a.paramesWhitelist=["token","portalUrl","apiUrl","featureLayerUrl","surveyItemId","templateItemId","queryParameters","mergeFiles","outputFormat","outputReportName","outputPackageName","packageFiles","uploadInfo","webmapItemId","mapScale","locale","utcOffset","where","username","show","hide","inputFeatureTemplate","label","reportTemplateIds","clientId","requestSource"];const s="en",d=["ar","bg","bs","ca","cs","da","de","el",s,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];class l{static getService(){return this.service||(this.service=new l),this.service}getTranslate(){const e=this.getSupportedLocale(a.locale||"en");return Promise.resolve(!0).then((()=>{if(this.cache&&this.cache[e])try{return JSON.parse(this.cache[e])}catch(e){return null}})).then((t=>t||fetch((0,r.a)(`./assets/i18n/${e}.json`)).then((e=>{if(!e.ok)throw new Error("could not fetch the translate json file");return e.json()})))).then((t=>{if(t){if(this.cache=this.cache||{},!this.cache[e])try{this.cache[e]=JSON.stringify(t)}catch(e){}if(a.label){const e={inputFeatures:"inputFeatures",selectTemplate:"chooseTemplateLabel1",reportSetting:"resultSettingsLabel1",fileOptions:"outputMode",reportName:"saveToAGOItemName",saveToAGSAccount:"saveToAGOFolder",outputFormat:"outputFormat",showCredits:"creditsEstimate",generateReport:"generate",previewMode:"previewReport"},o=JSON.parse(a.label);Object.keys(o).forEach((r=>{const a=o[r];"recentReports"===r&&(t.customPrint.recentTasks.label=a);const s=e[r];["inputFeatures","selectTemplate","reportSetting","fileOptions","reportName","saveToAGSAccount","outputFormat","showCredits","generateReport","previewReport"].indexOf(r)>=0&&(t.customPrint[s]=a)}))}l.currentLangObj=t}return t})).catch((e=>{throw new Error(e)}))}getTranslateSync(){return l.currentLangObj}getSupportedLocale(e){const t=d;return e?t.includes(e)?e:"nb"===(e=e.toLowerCase())?"no":"pt"===e?"pt-br":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,o)=>`${t}-${o.toUpperCase()}`)),t.includes(e)||(e=e.split("-")[0])),"zh"===e?"zh-cn":t.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),s)):s}}}}]);