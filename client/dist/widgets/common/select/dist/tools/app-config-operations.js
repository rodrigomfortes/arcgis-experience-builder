System.register(["jimu-core","jimu-arcgis"],(function(e,t){var o={},i={};return{setters:[function(e){o.dataSourceUtils=e.dataSourceUtils},function(e){i.mapViewUtils=e.mapViewUtils}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=i},79244:e=>{"use strict";e.exports=o}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var a={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(a),r.d(a,{default:()=>o});var e=r(79244),t=r(62686);class o{constructor(){this.id="select-app-config-operation"}afterWidgetCopied(e,o,r,a,n){var s,c,l;if(!n)return a;let d=a;const p=null===(s=null==d?void 0:d.widgets)||void 0===s?void 0:s[r],f=null==p?void 0:p.config;if(f){const e=f.asMutable({deep:!0});if(e){const{dataAttributeInfo:o,mapInfo:r,spatialSelection:a}=e;if((null===(c=null==o?void 0:o.dataSourceItems)||void 0===c?void 0:c.length)>0&&(o.dataSourceItems=o.dataSourceItems.map((e=>i(n,e)))),r){const e=Object.keys(r);e.length>0&&e.forEach((e=>{var o;const a=r[e],u=t.mapViewUtils.getCopiedJimuMapViewId(n,e);u&&u!==e&&(delete r[e],r[u]=a),(null===(o=null==a?void 0:a.dataSourceItems)||void 0===o?void 0:o.length)>0&&(a.dataSourceItems=a.dataSourceItems.map((e=>i(n,e))))}))}a&&(null===(l=a.useDataSources)||void 0===l?void 0:l.length)>0&&(a.useDataSources=a.useDataSources.map((e=>u(n,e))))}d=d.setIn(["widgets",r,"config"],e)}return d}widgetWillRemove(e){return e}}function i(e,o){if(o){if(o.useDataSource){const t=u(e,o.useDataSource);t&&(o.useDataSource=t)}if(o.jimuLayerViewId){const i=t.mapViewUtils.getCopiedJimuLayerViewId(e,o.jimuLayerViewId);i&&(o.jimuLayerViewId=i)}}return o}function u(t,o){let i=o;if(o){const r=e.dataSourceUtils.mapUseDataSource(t,o);i=null==r?void 0:r.useDataSource}return i||(i=o),i}})(),a})())}}}));