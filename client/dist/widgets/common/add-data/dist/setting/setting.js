System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree","jimu-ui/basic/item-selector"],(function(e,t){var a={},n={},r={},l={},o={};return{setters:[function(e){a.Immutable=e.Immutable,a.React=e.React,a.classNames=e.classNames,a.css=e.css,a.focusElementInKeyboardMode=e.focusElementInKeyboardMode,a.hooks=e.hooks,a.i18n=e.i18n,a.indexedDBUtils=e.indexedDBUtils,a.jsx=e.jsx,a.utils=e.utils},function(e){n.Button=e.Button,n.Checkbox=e.Checkbox,n.Link=e.Link,n.MultiSelect=e.MultiSelect,n.MultiSelectItem=e.MultiSelectItem,n.Switch=e.Switch,n.TextInput=e.TextInput,n.defaultMessages=e.defaultMessages},function(e){r.SettingRow=e.SettingRow,r.SettingSection=e.SettingSection},function(e){l.List=e.List,l.TreeItemActionType=e.TreeItemActionType},function(e){o.ItemCategory=e.ItemCategory,o.ItemTypeCategory=e.ItemTypeCategory}],execute:function(){e((()=>{var e={9044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z" clip-rule="evenodd"></path></svg>'},12046:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},14321:e=>{"use strict";e.exports=n},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},56340:e=>{"use strict";e.exports=o},56499:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m6.036 12.157 8.01-8.01a.5.5 0 1 1 .707.707l-8.01 8.01a1 1 0 0 1-1.415 0L1.146 8.682a.5.5 0 1 1 .708-.707z"></path></svg>'},79244:e=>{"use strict";e.exports=a},79298:e=>{"use strict";e.exports=r},96745:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597m.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792s.348-.804.78-.804c.42 0 .768.324.768.804" clip-rule="evenodd"></path></svg>'},98640:e=>{"use strict";e.exports=l}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var i={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(i),s.d(i,{__set_webpack_public_path__:()=>V,default:()=>z});var e=s(79244),t=s(14321),a=s(79298);const n={wayOfAddingData:"Way of adding data",selectFromAccount:"Select from account",inputUrl:"Input URL",uploadFiles:"Upload files",emptyListMessage:"Empty list message",defaultPlaceholderText:"There is currently no added data.",curateACollection:"Curate a collection",allowRenaming:"Allow renaming",allowRemoval:"Allow removal",dataTypeRestriction:"Data type restriction"};var r=s(98640),l=s(56340);const o=t=>e.React.useMemo((()=>t.disableAddBySearch||t.itemCategoriesInfo?t.itemCategoriesInfo:(0,e.Immutable)([{type:l.ItemCategory.MyContent,customLabel:"",enabled:!0,id:l.ItemCategory.MyContent},{type:l.ItemCategory.MyGroup,customLabel:"",enabled:!0,id:l.ItemCategory.MyGroup},{type:l.ItemCategory.MyOrganization,customLabel:"",enabled:!0,id:l.ItemCategory.MyOrganization},{type:l.ItemCategory.Public,customLabel:"",enabled:!0,id:l.ItemCategory.Public},{type:l.ItemCategory.LivingAtlas,customLabel:"",enabled:!0,id:l.ItemCategory.LivingAtlas}])),[t.disableAddBySearch,t.itemCategoriesInfo]),c=t=>{const a=(e=>new Map([[l.ItemCategory.MyContent,e("myContent")],[l.ItemCategory.MyGroup,e("myGroup")],[l.ItemCategory.MyOrganization,e("myOrganization")],[l.ItemCategory.Public,e("public")],[l.ItemCategory.LivingAtlas,e("livingAtlas")],[l.ItemCategory.Curated,e("curated")]]))(t);return e.React.useCallback((e=>{var t;const n=a.get(e.type);if(e.type!==l.ItemCategory.Curated)return n;const r=Number(null===(t=e.id.split("_"))||void 0===t?void 0:t.pop());return!r||r<2?n:`${n} ${r}`}),[a])};var d=s(96745),m=s.n(d),u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const g=t=>{const a=window.SVG,{className:n}=t,r=u(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:l,src:m()},r)):e.React.createElement("svg",Object.assign({className:l},r))};var p=s(9044),y=s.n(p),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const f=t=>{const a=window.SVG,{className:n}=t,r=b(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:l,src:y()},r)):e.React.createElement("svg",Object.assign({className:l},r))};var w=s(12046),h=s.n(w),x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const j=t=>{const a=window.SVG,{className:n}=t,r=x(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:l,src:h()},r)):e.React.createElement("svg",Object.assign({className:l},r))};var v=s(56499),C=s.n(v),I=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const O=t=>{const a=window.SVG,{className:n}=t,r=I(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:l,src:C()},r)):e.React.createElement("svg",Object.assign({className:l},r))},{useMemo:S,useState:T,useRef:N,useEffect:R}=e.React,L=a=>{const{enabled:n,label:r="",canDelete:l,defaultLabel:o,onEnabledChange:s,onDelete:i,onLabelChange:c,translate:d}=a,m=N(),[u,g]=T(!1),p=()=>{u||g(!0)};R((()=>{u&&m.current&&(0,e.focusElementInKeyboardMode)(m.current)}),[u]);const[y,b]=T(r);R((()=>{b(r)}),[r]);return(0,e.jsx)("div",{className:"d-flex align-items-center pr-1",css:e.css`height: 2rem`},(0,e.jsx)("div",{className:"d-flex align-items-center mb-0 flex-grow-1",css:e.css`padding-left: 0.125rem`},(0,e.jsx)(t.Checkbox,{className:"mr-2",checked:n,onChange:s,"aria-label":r||o}),(0,e.jsx)("div",{className:"flex-grow-1",onDoubleClick:p,css:!u&&e.css`max-width: ${l?"7.125rem":"8.525rem"}; overflow: hidden; text-overflow: ellipsis; white-space: nowrap`},u?(0,e.jsx)(t.TextInput,{css:e.css`height: 1.5rem; max-width: ${l?"7.125rem":"8.525rem"}`,size:"sm",ref:m,value:y,onAcceptValue:e=>{g(!1),c(e)},onChange:e=>{b(e.target.value)},placeholder:o}):(0,e.jsx)("span",{title:r||o},r||o))),!u&&(0,e.jsx)(t.Button,{className:"p-0 mx-1",size:"sm",type:"tertiary",icon:!0,onClick:p,"aria-label":d("rename")},(0,e.jsx)(j,{size:"m"})),u&&(0,e.jsx)(t.Button,{className:"p-0 mx-1",size:"sm",type:"tertiary",icon:!0,onClick:()=>{g(!1)},"aria-label":d("done")},(0,e.jsx)(O,{size:"m"})),l&&(0,e.jsx)(t.Button,{className:"p-0 mr-1",size:"sm",type:"tertiary",icon:!0,onClick:i,"aria-label":d("deleteOption")},(0,e.jsx)(f,{size:"m"})))};function M(n){const{widgetId:r,intl:o,theme:s,itemCategoryInfo:i,defaultLabel:c,autoFocusCuratedFilter:d,onEnabledChange:m,onCustomLabelChange:u,onCuratedFilterChange:p,onDelete:y,translate:b}=n,{type:f,enabled:w,customLabel:h}=i,x=S((()=>f===l.ItemCategory.Curated),[f]),[j,v]=T("");R((()=>{v(i.curatedFilter||"")}),[i.curatedFilter]);const[C,I]=T(!1),O=`add-data-${r}-curated-filter-container-${e.React.useId()}`;return(0,e.jsx)("div",{className:"flex-grow-1",css:e.css`flex-basis: 0;`},(0,e.jsx)(a.SettingSection,{title:(0,e.jsx)(L,{enabled:w,label:h,canDelete:x,defaultLabel:c,onEnabledChange:m,onDelete:y,onLabelChange:u,translate:b}),className:"p-0 m-0 flex-grow-1",role:"group",css:e.css`flex-basis: 0`,"aria-label":h||c},x&&(0,e.jsx)(a.SettingRow,{flow:"wrap",className:"mt-1",css:e.css`
              line-height: 1.5rem;
              .jimu-widget-setting--row-label {
                margin-bottom: 0.375rem;
              }
            `,role:"group","aria-label":b("curatedFilter"),label:(0,e.jsx)("div",{className:"d-flex align-items-center",id:O},b("curatedFilter"),(0,e.jsx)(t.Link,{to:"https://doc.arcgis.com/en/arcgis-online/reference/advanced-search.htm",icon:!0,target:"_blank","aria-label":b("help"),"aria-labelledby":O,css:e.css`
                    padding: 0 !important;
                    .svg-component{
                      margin-right: 0;
                      color: ${s.ref.palette.neutral[900]};
                    }
                    :hover {
                      .svg-component{
                        color: ${s.ref.palette.black};
                      }
                    }
                  `},(0,e.jsx)(g,{autoFlip:!e.i18n.isSameLanguage(null==o?void 0:o.locale,"he")})))},(0,e.jsx)(t.TextInput,{"aria-label":b("curatedFilter"),ref:t=>{t&&d&&!C&&(I(!0),(0,e.focusElementInKeyboardMode)(t))},className:"flex-grow-1 mb-2 pr-2","data-draggable":"true",size:"sm",type:"text",value:j,onPointerDown:e=>{e.stopPropagation()},onAcceptValue:p,onChange:e=>{v(e.target.value)},title:i.curatedFilter}))))}var A=s(23662),B=s.n(A),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const k=t=>{const a=window.SVG,{className:n}=t,r=E(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:l,src:B()},r)):e.React.createElement("svg",Object.assign({className:l},r))},{useEffect:P,useRef:D}=e.React,F=(0,e.Immutable)([l.ItemTypeCategory.FeatureLayer,l.ItemTypeCategory.TileLayer,l.ItemTypeCategory.MapImageLayer,l.ItemTypeCategory.ImageryLayer,l.ItemTypeCategory.SceneLayer,l.ItemTypeCategory.TiledImageryLayer,l.ItemTypeCategory.ElevationLayer,l.ItemTypeCategory.Table,l.ItemTypeCategory.LayerFiles,l.ItemTypeCategory.GroupLayer,l.ItemTypeCategory.OrientedImageryLayer]),z=s=>{const{onSettingChange:i,id:d,config:m,theme:u,intl:g}=s,p=e.hooks.useTranslation(t.defaultMessages,n),y=D(null),b=o(m),f=(()=>{const[t,a]=e.React.useState([]);return e.React.useEffect((()=>{"true"===e.utils.readLocalStorage("restrictEnterpriseOnly")&&a([l.ItemCategory.Public,l.ItemCategory.LivingAtlas])}),[]),t})();P((()=>(y.current=new e.indexedDBUtils.IndexedDBCache(d,"add-data","added-data"),y.current.init().catch((e=>{console.error("Failed to read cache.",e)})),()=>{y.current.close()})),[d]);const w=(...e)=>{i(...e),y.current.initialized()&&y.current.clear()},h=e=>{const t=e.target.value,a="disableAddBySearch"===t;if(!0===m[t]){const e=m.without(t);w({id:d,config:Object.assign({},e)})}else w({id:d,config:Object.assign(Object.assign({},a?m.without("itemCategoriesInfo").without("displayedItemTypeCategories"):m),{[t]:!0})})},x=(e,t,a)=>{const n=[...b.asMutable({deep:!0})];n[a]=Object.assign(Object.assign({},n[a]),{[t]:e}),w({id:d,config:Object.assign(Object.assign({},m),{itemCategoriesInfo:n})})},j=(t=>e.React.useMemo((()=>{if(!t)return 1;const e=t.filter((e=>e.type===l.ItemCategory.Curated)).map((e=>e.id));return e.length?Math.max(...e.map((e=>Number(e.split("_")[1]))))+1:1}),[t]))(b),v=c(p),[C,I]=e.React.useState(""),O=(t,a)=>(0,e.jsx)(M,{widgetId:d,intl:g,theme:u,itemCategoryInfo:t,defaultLabel:v(t),autoFocusCuratedFilter:C===t.id,onEnabledChange:(e,t)=>{x(t,"enabled",a)},onCustomLabelChange:e=>{x(e,"customLabel",a)},onCuratedFilterChange:e=>{x(e,"curatedFilter",a)},onDelete:()=>{(e=>{const t=[...b.asMutable()];t.splice(e,1),w({id:d,config:Object.assign(Object.assign({},m),{itemCategoriesInfo:t})})})(a)},translate:p}),S=m.displayedItemTypeCategories||F;return(0,e.jsx)("div",{className:"widget-setting-add-data jimu-widget-setting",css:_},(0,e.jsx)(a.SettingSection,{className:"border-0 way-of-add-data-section",role:"group",title:p("wayOfAddingData"),"aria-label":p("wayOfAddingData")},(0,e.jsx)(a.SettingRow,{className:"way-of-add-data-row",tag:"label",label:p("selectFromAccount")},(0,e.jsx)(t.Switch,{onChange:h,value:"disableAddBySearch",checked:!m.disableAddBySearch})),!m.disableAddBySearch&&b&&(0,e.jsx)(a.SettingRow,{className:"account-config-row",label:p("tabs"),"aria-label":p("tabs"),role:"group",flow:"wrap"},(0,e.jsx)(r.List,{className:"search-config-list w-100",size:"sm",itemsJson:b.asMutable().filter((e=>!f.includes(e.type))).map(((e,t)=>({itemStateDetailContent:e,itemKey:e.id}))),dndEnabled:!0,onUpdateItem:(t,a)=>{if(t.updateType!==r.TreeItemActionType.HandleDidDrop)return;const[,n]=t.itemJsons,l=n.map((e=>e.itemStateDetailContent));l.map((e=>e.id)).join(",")!==b.map((e=>e.id)).join(",")&&w({id:d,config:Object.assign(Object.assign({},m),{itemCategoriesInfo:l.map((t=>(0,e.Immutable)(t)))})})},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:r.TreeItemActionType.RenderOverrideItem,children:[{name:r.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:r.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:r.TreeItemActionType.RenderOverrideItemBody,children:[{name:r.TreeItemActionType.RenderOverrideItemDragHandle},{name:r.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,t)=>{const{itemJsons:a}=t.props,n=a[0],r=a[1];return O(n.itemStateDetailContent,r.indexOf(n))}})),!m.disableAddBySearch&&(0,e.jsx)(a.SettingRow,{className:"account-config-row"},(0,e.jsx)(t.Button,{className:"w-100 my-2",type:"secondary","aria-label":p("curateACollection"),onClick:()=>{const e=`${l.ItemCategory.Curated}_${j}`;I(e),w({id:d,config:Object.assign(Object.assign({},m),{itemCategoriesInfo:[...b,{type:l.ItemCategory.Curated,customLabel:"",enabled:!0,curatedFilter:"",id:e}]})})}},(0,e.jsx)(k,null),p("curateACollection"))),!m.disableAddBySearch&&(0,e.jsx)(a.SettingRow,{className:"account-config-row",label:p("dataTypeRestriction"),flow:"wrap"},(0,e.jsx)(t.MultiSelect,{className:"w-100 mb-2",displayByValues:e=>`${e.length} ${p("SelectionSelected")}`,"aria-label":p("dataTypeRestriction"),onChange:(e,t)=>{w({id:d,config:F.length===t.length?m.without("displayedItemTypeCategories"):m.set("displayedItemTypeCategories",t.sort(((e,t)=>F.indexOf(e)-F.indexOf(t))))})},values:S},F.map((a=>(0,e.jsx)(t.MultiSelectItem,{key:a,value:a,label:a,disabled:1===S.length&&S.includes(a)}))))),(0,e.jsx)(a.SettingRow,{className:"way-of-add-data-row mt-4",tag:"label",label:p("inputUrl")},(0,e.jsx)(t.Switch,{onChange:h,value:"disableAddByUrl",checked:!m.disableAddByUrl})),(0,e.jsx)(a.SettingRow,{className:"way-of-add-data-row",tag:"label",label:p("uploadFiles")},(0,e.jsx)(t.Switch,{onChange:h,value:"disableAddByFile",checked:!m.disableAddByFile}))),(0,e.jsx)(a.SettingSection,{className:"border-0 pt-0",role:"group",title:p("general"),"aria-label":p("general")},(0,e.jsx)(a.SettingRow,{tag:"label",label:p("allowRenaming")},(0,e.jsx)(t.Switch,{onChange:(e,t)=>{const a=e.target.value;w({id:d,config:t?m.without(a):m.set(a,!0)})},value:"disableRenaming",checked:!m.disableRenaming})),(0,e.jsx)(a.SettingRow,{label:p("emptyListMessage"),flow:"wrap",role:"group","aria-label":p("emptyListMessage")},(0,e.jsx)(t.TextInput,{className:"w-100","aria-label":m.placeholderText||p("defaultPlaceholderText"),size:"sm",defaultValue:m.placeholderText,placeholder:p("defaultPlaceholderText"),onAcceptValue:e=>{w({id:d,config:Object.assign(Object.assign({},m),{placeholderText:e})})}}))))},_=e.css`
  .way-of-add-data-section {
    .way-of-add-data-row {
      padding: 0.5rem 0.5rem 0.5rem 0.625rem;
      background-color: var(--ref-palette-neutral-500);
    }
    .account-config-row {
      margin: 0;
      padding: 0 0.5rem;
      background-color: var(--ref-palette-neutral-500);
    }
    .jimu-tree-item .jimu-tree-item__body {
      flex-wrap: nowrap;
      align-items: flex-start;
      .jimu-tree-item__drag-handle {
        margin-top: 0.5rem
      }
    }
  }
`;function V(e){s.p=e}})(),i})())}}}));