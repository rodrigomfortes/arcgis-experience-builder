"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-fb02f9"],{5399:(t,e,s)=>{s.r(e),s.d(e,{ba_accordion:()=>n});var i=s(8796),o=s(983);const n=class{get el(){return(0,i.g)(this)}debugContent=[];_instanceId;_instanceIconId;_instanceContentId;ignoreClick=0;_idPrefix="ba-accordion-";_idItemPrefix="ba-item-";_idIconPrefix="ba-accordion-icon-";_idContentPrefix="ba-content-";_isReport=!1;_dbg=!1;constructor(t){(0,i.r)(this,t),this.accordionOpened=(0,i.c)(this,"accordionOpened",7),this.accordionWillOpen=(0,i.c)(this,"accordionWillOpen",7),this.accordionItemClicked=(0,i.c)(this,"accordionItemClicked",7),this.accordionItemsChecked=(0,i.c)(this,"accordionItemsChecked",7),this.hideOnEmpty="true",this.displayCount=!0,this.displayname=void 0,this.isOpen=!1,this.content=void 0,this.groupid=void 0,this.contentInline="true",this.calciteicon=void 0,this.selectedId=void 0,this.showCheckboxes=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.suglite=void 0,this.reportsGroupId=void 0,this._counter=void 0,this.showDebug=void 0,this.stLangCode=void 0,this.stSourceCountry="US",this.stContent=void 0,this.stDisplayName=void 0,this.stGroupId=void 0,this.stContentInline=void 0,this.stShowCheckboxes=void 0,this.stIsOpen=void 0,this._stCount=void 0,this.stColorTheme=void 0,this.stSelectedId=void 0,this.stSuglite=void 0,this.stTimestamp=void 0,this.defaultReport=void 0,this.stDefaultReport=void 0,this.langCode="en-us",this.sourceCountry="US"}onDefaultReportChanged(){if(o.a.Log("ACCORDION updating defaultReport",this.defaultReport),"string"==typeof this.defaultReport){if(this.defaultReport&&o.A.hasText(this.defaultReport)){const t=JSON.parse(this.defaultReport);t&&t.id&&t.name?this.stDefaultReport=t:this.stDefaultReport=void 0}}else void 0===this.defaultReport?this.stDefaultReport=void 0:this.defaultReport?.id&&this.defaultReport?.name&&o.A.hasText(this.defaultReport?.id)&&o.A.hasText(this.defaultReport?.name)?this.stDefaultReport=this.defaultReport:this.stDefaultReport=void 0}async setDefaultReport(t){o.a.Log("ACCORDION setDefaultReport",t),t&&t.id&&o.A.hasText(t.id)&&t.name&&o.A.hasText(t.name)?this.stDefaultReport=t:this.stDefaultReport=void 0}async setSelectedId(t){this.selectedId=t,this.stSelectedId=t}onSourceCountryChanged(){this.stSourceCountry=this.sourceCountry}onIsOpenChanged(){this.stIsOpen=this.isOpen,this.stIsOpen&&this.showContent()}onSugliteChanged(){this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0)}onContentChanged(){try{this.content&&o.A.hasText(this.content)&&(this.stContent=JSON.parse(this.content))}catch(t){o.a.Error("ba-accordion content error",t)}}onAccordionTextChanged(){this.stDisplayName=this.displayname}onSelectedIdChanged(){this.stSelectedId=this.selectedId}onGroupIdChanged(){this.stGroupId=this.groupid}onContentInlineChanged(){this.stContentInline="true"==this.contentInline}accordionCheckboxChanged(){this.stShowCheckboxes=this.showCheckboxes}accordionOpened;accordionWillOpen;accordionItemClicked;accordionItemsChecked;accordionOpenedEventHandler(t){let e=t.detail.groupid,s=t.detail.instanceId;null!=s&&s!=this._instanceId&&null!=e&&(!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),this.stGroupId&&this.stGroupId==e&&this.closeAccordion(null))}async openAccordion(){}async setShowCheckbox(t){this.stShowCheckboxes=t}async setColorTheme(t){if(t&&o.A.hasText(t)&&this.el){this.stColorTheme=t.trim().toLowerCase();const e=t.trim().toLowerCase();"light"===e?(this.el.style.setProperty("--calcite-color-brand","#007ac2"),this.el.style.setProperty("--calcite-color-brand-hover","#00619b"),this.el.style.setProperty("--calcite-color-brand-press","#004874"),this.el.style.setProperty("--calcite-color-background","#f8f8f8"),this.el.style.setProperty("--calcite-color-foreground-1","#ffffff"),this.el.style.setProperty("--calcite-color-foreground-2","#f3f3f3"),this.el.style.setProperty("--calcite-color-foreground-3","#eaeaea"),this.el.style.setProperty("--calcite-color-text-1","#151515"),this.el.style.setProperty("--calcite-color-text-2","#4a4a4a"),this.el.style.setProperty("--calcite-color-text-3","#6a6a6a"),this.el.style.setProperty("--calcite-color-text-inverse","#ffffff"),this.el.style.setProperty("--calcite-color-text-link","#00619b"),this.el.style.setProperty("--calcite-color-border-1","#cacaca"),this.el.style.setProperty("--calcite-color-border-2","#d4d4d4"),this.el.style.setProperty("--calcite-color-border-3","#dfdfdf"),this.el.style.setProperty("--calcite-color-border-input","#949494"),this.el.style.setProperty("--calcite-color-info","#00619b"),this.el.style.setProperty("--calcite-color-success","#35ac46")):"dark"===e&&(this.el.style.setProperty("--calcite-color-brand","#009af2"),this.el.style.setProperty("--calcite-color-brand-hover","#007ac2"),this.el.style.setProperty("--calcite-color-brand-press","#00619b"),this.el.style.setProperty("--calcite-color-background","#353535"),this.el.style.setProperty("--calcite-color-foreground-1","#2b2b2b"),this.el.style.setProperty("--calcite-color-foreground-2","#202020"),this.el.style.setProperty("--calcite-color-foreground-3","#151515"),this.el.style.setProperty("--calcite-color-text-1","#ffffff"),this.el.style.setProperty("--calcite-color-text-2","#bfbfbf"),this.el.style.setProperty("--calcite-color-text-3","#9f9f9f"),this.el.style.setProperty("--calcite-color-text-inverse","#151515"),this.el.style.setProperty("--calcite-color-text-link","#00a0ff"),this.el.style.setProperty("--calcite-color-border-1","#555555"),this.el.style.setProperty("--calcite-color-border-2","#4a4a4a"),this.el.style.setProperty("--calcite-color-border-3","#404040"),this.el.style.setProperty("--calcite-color-border-input","#757575"),this.el.style.setProperty("--calcite-color-info","#00a0ff"),this.el.style.setProperty("--calcite-color-success","#36da43"))}}componentWillLoad(){if(o.a.Log("ACCORDION: will load"),this.stLangCode=this.langCode,this.stSourceCountry=this.sourceCountry,this.stShowCheckboxes=this.showCheckboxes,this.stIsOpen=this.isOpen,this.defaultReport&&o.A.hasText(this.defaultReport)&&(this.stDefaultReport=JSON.parse(this.defaultReport)),this._instanceId||(this._instanceId=o.E.generateId(this._idPrefix).id),this._instanceContentId||(this._instanceContentId=o.E.generateId(this._idContentPrefix).id),this._instanceIconId||(this._instanceIconId=o.E.generateId(this._idIconPrefix).id),this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0),(!this.stDisplayName||this.stDisplayName.length<=0)&&(this.displayname&&this.displayname.length>0?this.stDisplayName=this.displayname:this.stDisplayName="?"),!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),!this.stContentInline&&this.contentInline&&(this.stContentInline="true"==this.contentInline),!this.stContent&&this.content&&o.A.hasText(this.content))try{this.stContent=JSON.parse(this.content)}catch(t){this.stContent={}}this.stSelectedId=this.selectedId}componentDidLoad(){const t=this;requestAnimationFrame((()=>{t.el&&t.el.addEventListener("click",(e=>{t.onClickAccordion.call(t,e)})),t.applyStyles()}))}componentDidRender(){const t=this;setTimeout((()=>{t.applyStyles()}),10)}applyStyles(){if(o.a.Log("ACCORDION applyStyles"),this.stShowCheckboxes){const t=o.A.queryElement.call(this,"calcite-accordion");if(t){const e=t.querySelector("calcite-accordion-item");if(e){const s=e.shadowRoot;if(s){const t=s.querySelector("div.header-content");t&&(t.style.position="relative",t.style.top="2px",t.style.left="1px",t.style.padding="8px 12px 10px 12px")}const i=e.querySelector("calcite-checkbox");if(i){const t=o.A.queryElement.call(i,"div.toggle");t&&(t.style.position="relative",t.style.left="-3px",t.style.width="16px",t.style.height="14px",t.style.border="solid 1px var(--calcite-color-border-2)")}const n=t.querySelector("calcite-list");if(n){const t=n.querySelectorAll("calcite-list-item");if(t&&t.length>0)for(let e=0;e<t.length;e++){const s=t[e],i=o.A.queryElement.call(s,"div.label");i&&(i.style.position="relative",i.style.left="1px",i.style.padding="0");const n=s.querySelector("calcite-checkbox");if(n){const t=o.A.queryElement.call(n,"div.toggle");t&&(t.style.position="relative",t.style.left="5px",t.style.width="15px",t.style.height="13px",t.style.border="solid 1px var(--calcite-color-border-2)")}}}const c=o.A.queryElement.call(e,"div.actions-start");c&&(c.style.width="24px")}}}}toggleCheckState=(t,e)=>{if(t&&t.length>0&&e)for(let s=0;s<t.length;s++)if(t[s].id===e){const e=t[s].isChecked;return t[s].isChecked=!e,!e}return!1};onCheckboxChanged(t){if(o.a.Log("ACCORDION: onCheckboxChanged"),Array.isArray(this.stContent)){this.stContent=this.stContent.map((e=>e.id===t?{...e,isChecked:!e.isChecked}:e));const e=this.stContent.find((e=>e.id===t));this.accordionItemsChecked.emit({accordion:this,reports:[{id:t,isChecked:e?.isChecked}]}),this.updateCheckboxes()}return!1}closeAccordion(t){let e=t?t.elem:o.A.queryElementById.call(this,this._instanceId),s=t?t.content:o.A.queryElementById.call(this,this._instanceContentId),i=t?t.icon:o.A.queryElementById.call(this,this._instanceIconId);e.classList.remove("accordion__active"),s.style.maxHeight=null,i.setAttribute("icon-end","caret-down"),this.hideContent(s)}isDefaultId(t){let e=!1;if(null!=this.stDefaultReport){e=this.stDefaultReport.id==t}return e}showContent(t){t||(t=o.A.queryElementById.call(this,this._instanceContentId)),t&&t.classList.contains("ba-content-hidden")&&(t.classList.remove("ba-content-hidden"),this.accordionOpened.emit({accordion:this,groupid:this.stGroupId,instanceId:this._instanceId}),this.isOpen=this.stIsOpen=!0)}hideContent(t){t||(t=o.A.queryElementById.call(this,this._instanceContentId)),t.classList.contains("ba-content-hidden")||(t.classList.add("ba-content-hidden"),this.isOpen=this.stIsOpen=!1)}onClickAccordionItem(t,e,s){if(this.stShowCheckboxes){const t=s.id,e=this.toggleCheckState(this.stContent,t);this.notifyCheckedItems(e,t),this.updateCheckboxes()}else{const t=JSON.parse(this.content);if(t){const e=t.findIndex((function(t){return t.id==s.id}));if(e>=0){const i=t[e].reportID;i&&(s.reportID=i)}}this.accordionItemClicked.emit({context:e,item:s})}return t.stopPropagation(),t.preventDefault(),!1}onClickAccordion(t){if(t.target.classList.contains("ba-target-check"))return!1;if(this.ignoreClick>0)return this.ignoreClick--,!1;const e=t.currentTarget,s=o.A.queryElementById.call(this,this._instanceContentId),i=o.A.queryElementById.call(this,this._instanceIconId);if(s)if(s.style.maxHeight)this.stIsOpen||this.closeAccordion({elem:e,content:s,icon:i});else{function n(){s.style.overflow="auto"}e.classList.add("accordion__active"),s.style.maxHeight="100%",i.setAttribute("icon-end","caret-up"),this.showContent(s),setTimeout(n,500)}return!0}_getContent(){if(!this.stContent)if(this.content)this.stContent=JSON.parse(this.content);else if(!this.showDebug){let t=o.A.queryElementById.call(this,this._instanceId);if(t){let e=t.getAttribute("content");e&&e.length>0&&(this.content=e,this.stContent=JSON.parse(this.content))}}return this.stContent}_getContentItem(t){for(let e=0;e<this.stContent.length;e++){let s=this.stContent[e];if(s.id==t)return s}return null}_setContentItem(t,e,s){for(let i=0;i<this.stContent.length;i++){if(this.stContent.stContenttent[i].id==t){this.stContent[i][e]=s;break}}}_toggleContentItem(t,e){let s=this._getContentItem(t);if(s){const i=!s[e];this._setContentItem(t,e,i)}}updateCheckboxes(){this.stTimestamp=(new Date).getTime()}notifyCheckedItems(t,e){const s=!e||!o.A.hasText(e),i=this.el.shadowRoot?.querySelectorAll("calcite-checkbox[data-group]");if(i){const n=[];for(let c=0;c<i.length;c++){const l=i[c];let r=l.checked;const a=l.id;if(a&&o.A.hasText(a)){(s||e==a)&&(r=t);const i={id:a,isChecked:r};n.push(i)}}n.length>0&&this.accordionItemsChecked.emit({accordion:this,reports:n})}}onCheckAllChanged=t=>{const e=t.target.checked;if(Array.isArray(this.stContent)){this.stContent=this.stContent.map((t=>({...t,isChecked:e})));const t=this.stContent.map((t=>({id:t.id,isChecked:e})));this.accordionItemsChecked.emit({accordion:this,reports:t}),this.updateCheckboxes()}};getAccordion(){try{const t=this;let e=t._getContent();const s=t.stDisplayName,o=t.calciteicon||"",n={"text-decoration":"underline"};if(t.stShowCheckboxes){let o=!1,c=!1;if(t.stContent?.length>0){const e=t.stContent.filter((t=>t.isChecked)).length;o=e===t.stContent.length,c=e>0&&e<t.stContent.length}const l={width:"16px",height:"16px",position:"relative",left:"5px",top:"2px","padding-inline-start":"5px"},r={margin:"-4px 0px 0px -4px",width:"15px",height:"13px"};return(0,i.h)("calcite-accordion",{appearance:"solid","icon-position":"end"},(0,i.h)("calcite-accordion-item",{heading:s},(0,i.h)("calcite-checkbox",{slot:"actions-start",style:l,name:"Select All",value:"all",checked:o,indeterminate:c,onCalciteCheckboxChange:t.onCheckAllChanged}),(0,i.h)("calcite-list",{label:""},e?e.map((({id:e,name:s,subText:o})=>{const c=e+"-acc-item",l=this.isDefaultId(e)?n:"";return(0,i.h)("calcite-list-item",{id:c,label:s,value:e,description:o||"",style:"string"==typeof l?{textDecoration:l}:l},(0,i.h)("calcite-checkbox",{style:r,name:s,"data-group":t.reportsGroupId,value:e,id:e,slot:"actions-start",checked:t.stContent&&t.stContent.some((t=>t.id===e&&t.isChecked)),onCalciteCheckboxChange:()=>t.onCheckboxChanged(e)}))})):"")))}{const n={whiteSpace:"wrap",overflowX:"hidden","padding-inline-start":"15px"},c={whiteSpace:"wrap",overflowX:"hidden","text-decoration":"underline"},l=!(!t.isOpen&&!e.some((e=>e.id===t.stSelectedId)));return(0,i.h)("calcite-accordion",{appearance:"solid","icon-position":"end"},e?(0,i.h)("calcite-accordion-item",{"icon-start":o,heading:s,expanded:l},(0,i.h)("calcite-list",{label:""},e?e.map((({id:e,name:s})=>{const o=this.isDefaultId(e)||this.stSelectedId===e?c:n;return(0,i.h)("calcite-list-item",{style:o,value:e,label:s,onClick:i=>t.onClickAccordionItem(i,t,{id:e,name:s})})})):"")):"")}}catch(t){o.a.Error("ba-accordion",t)}}render(){if(this._getContent())return this._isReport=this.el.classList.contains("reportList"),o.a.Log("ACCORDION RENDER def rep=",this.stDefaultReport,this.displayname),this.getAccordion()}static get watchers(){return{defaultReport:["onDefaultReportChanged"],sourceCountry:["onSourceCountryChanged"],isOpen:["onIsOpenChanged"],suglite:["onSugliteChanged"],content:["onContentChanged"],displayname:["onAccordionTextChanged"],selectedId:["onSelectedIdChanged"],groupid:["onGroupIdChanged"],contentInline:["onContentInlineChanged"],showCheckboxes:["accordionCheckboxChanged"]}}};n.style="calcite-list-item{margin-block-end:unset !important;--tw-shadow:unset !important;--tw-shadow-colored:unset !important;box-shadow:unset !important}"}}]);