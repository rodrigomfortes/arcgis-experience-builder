"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-861260"],{8867:(e,t,i)=>{i.r(t),i.d(t,{arcgis_infographic_workflow:()=>n});var s=i(8796),a=i(7640),o=i(983),r=i(4280);const n=class{get el(){return(0,s.g)(this)}baseConfig;_instanceId;_instanceIdNumber;_idPrefix="arcgis-infographic-workflow-";_searchStepId;_idPrefixSearch="workflow-search-step-";_bufferStepId;_idPrefixBuffer="workflow-buffer-step-";_infographicStepId;_idPrefixInfographic="workflow-infographic-step-";_localeSettings={};labels;_dbg=!1;_setInitialStepperTab=null;constructor(e){(0,s.r)(this,e),this.drawPointClick=(0,s.c)(this,"drawPointClick",6),this.drawPolygonClick=(0,s.c)(this,"drawPolygonClick",6),this.selectedFeatureClear=(0,s.c)(this,"selectedFeatureClear",6),this.buffersUpdate=(0,s.c)(this,"buffersUpdate",6),this.runInfographic=(0,s.c)(this,"runInfographic",6),this.useLatestHierarchyChange=(0,s.c)(this,"useLatestHierarchyChange",6),this.drivetimeOptionsChange=(0,s.c)(this,"drivetimeOptionsChange",6),this.baSearchFeatureChange=(0,s.c)(this,"baSearchFeatureChange",6),this.config=void 0,this.selectedFeatureResult=void 0,this.infographicOptions=void 0,this.steps=[a.S.search,a.S.buffers,a.S.infographics],this.numSteps=3,this.modalOpened=void 0,this.currentStep=1,this.searchResultObj=void 0,this.bufferType=a.B.ring,this.bufferVals=[5,10,15],this.bufferUnit=a.a.miles,this.selectedReport=void 0,this.offsetTime=0,this.offsetHr="12:00 PM",this.offsetDay=o.D.mon,this.travelDirection=o.T.away,this.trafficType=o.b.live,this.useTrafficEnabled=!0,this.useTrafficChecked=!1,this.travelModeData={},this.searchTabStatus={},this.bufferTabStatus={},this.infographicTabStatus={},this.infographicTabViewed=!1,this.theme=void 0,this.env=void 0,this.token=void 0,this.username=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.geoenrichmentUrl=void 0,this.portalUrl=void 0,this.geocodeUrl=void 0,this.portalOnlineGEProxy=void 0,this.selectedHierarchy=void 0,this.useLatestDataSource=void 0,this.standardInfographicID=void 0,this.stEnv=void 0,this.stSelectedHierarchy=void 0,this.stUseLatestDataSource=void 0,this.stStandardInfographicID=void 0,this.defaultReport=void 0,this.stDefaultReport=void 0,this.baseConfig=new o.a("workflow",this,this.onUpdateUI),o.A.announceVersion(),this.langCode=this.langCode||"en-us",o.B._initialize(this.langCode),this.setLocaleStrings(),this.sourceCountry=this.sourceCountry||"US",this.baseConfig.updateLocaleSettings({language:this.langCode,country:this.sourceCountry})}onDefaultReportChanged(){o.a.Log("WORKFLOW updating defaultReport",this.defaultReport),this.updateDefaultReport(this.defaultReport)}updateChildrenDefaultReport(e){if(this._infographicStepId){const t=o.A.queryElementById.call(this,this._infographicStepId);t&&(o.a.Log("WORKFLOW infographicsStep setDefaultReport",e),t.setDefaultReport(e))}}updateConfigDefaultReport(e){o.a.Log("WORKFLOW updating CONFIG for defaultReport",e),this.baseConfig.updateConfig(e)}updateDefaultReport(e,t){let i=!1;if("string"==typeof e){if(e&&o.A.hasText(e)){const t=JSON.parse(e);t&&t.id&&t.name?(this.stDefaultReport=t,i=!0):(this.stDefaultReport=void 0,this.selectedReport="")}}else void 0===e?(this.stDefaultReport=void 0,this.selectedReport=""):e?.id&&e?.name&&o.A.hasText(e?.id)&&o.A.hasText(e?.name)?(this.stDefaultReport=e,i=!0):(this.stDefaultReport=void 0,this.selectedReport="");i&&this.stDefaultReport?this.selectedReport=this.stDefaultReport.id:this.selectedReport="",this.updateChildrenDefaultReport(this.stDefaultReport),t||this.updateConfigDefaultReport(this.stDefaultReport)}async setDefaultReport(e){o.a.Log("WORKFLOW setDefaultReport",e),this.updateDefaultReport(e)}drawPointClick;drawPolygonClick;selectedFeatureClear;buffersUpdate;runInfographic;useLatestHierarchyChange;onEnvChanged(){this.stEnv=this.env,r.E.setEnvironment(this.env),this.baseConfig&&this.baseConfig.updateConfig({env:this.env})}onTokenChanged(){const e=this.token,t=this.baseConfig?.config?.username;e&&o.A.hasText(e)&&t&&o.A.hasText(t)&&r.T.setToken(t,e),this.baseConfig&&this.baseConfig.updateConfig({token:this.token})}onUsernameChanged(){const e=this.username,t=this._getToken();t&&o.A.hasText(t)&&e&&o.A.hasText(e)&&r.T.setToken(e,t),this.baseConfig&&this.baseConfig.updateConfig({username:this.username})}onLangCodeChanged(){this.baseConfig&&this.baseConfig.updateConfig({langCode:this.langCode})}onUseLatestDataSourceChanged(){this.stUseLatestDataSource=this.useLatestDataSource,this.baseConfig&&this.baseConfig.updateConfig({useLatestDataSource:this.useLatestDataSource})}onStandardInfographicIDChanged(){this.stStandardInfographicID=this.standardInfographicID,this.baseConfig&&this.baseConfig.updateConfig({standardInfographicID:this.standardInfographicID})}onGeoenrichmentUrlChanged(){this.baseConfig&&this.baseConfig.updateConfig({geoenrichmentUrl:this.geoenrichmentUrl})}onSourceCountryChanged(){this.baseConfig&&this.baseConfig.updateConfig({sourceCountry:this.sourceCountry})}onHierarchyChanged(){this.stSelectedHierarchy=this.selectedHierarchy,this.baseConfig&&this.baseConfig.updateConfig({selectedHierarchy:this.stSelectedHierarchy})}onTravelModeDataChanged(){o.a.Log("WORKFLOW travelModeData state changed",this.travelModeData),this.buildInfographicOptions()}setLocaleStrings(){this.labels={back:o.B.i18n("back"),next:o.B.i18n("next"),runInfographic:o.B.i18n("run-infographic")}}drivetimeOptionsChange;baSearchFeatureChange;_getDefaultReport(){if(this.stDefaultReport&&this.stDefaultReport.id&&this.stDefaultReport.name)return this.stDefaultReport;if(this.defaultReport&&o.A.hasText(this.defaultReport)){const e=JSON.parse(this.defaultReport);if(e&&e.id&&e.name)return e}}onUpdateUI(){this.applyStyles()}applyStyles(){if(this.baseConfig?.config?.colors&&Object.keys(this.baseConfig.config.colors).length>0){o.a.LogConfig("WORKFLOW applyStyles",this.baseConfig?.config?.colors);const e=this.baseConfig.config.colors,t=o.A.queryElement.call(this,"calcite-stepper");t&&("style"in t&&(t.style.setProperty("--calcite-color-brand",e.brand),t.style.setProperty("--calcite-color-background-1",e.background),t.style.setProperty("--calcite-color-foreground-1",e.foreground),t.style.setProperty("--calcite-color-text-3",e.text3),t.style.setProperty("--calcite-font-size--1","0.875rem"),t.style.setProperty("--calcite-font-size--2","0.8125rem"),t.style.setProperty("--calcite-font-size--3","0.75rem")),t.querySelectorAll("calcite-stepper-item").forEach((e=>{if(e.shadowRoot){let t=e.shadowRoot.querySelector("div.stepper-item-header");t&&"style"in t&&t.style.setProperty("height","18px")}})));const i=o.A.queryElement.call(this,"div.wf-layout-nav");i&&i.querySelectorAll("calcite-button").forEach((t=>{if(t.shadowRoot){let i=t.shadowRoot.querySelector("button");i&&(i.style.setProperty("--calcite-color-brand",e.brand),i.style.setProperty("--calcite-color-brand-hover",e.brand),i.style.setProperty("--calcite-color-brand-press",e.brand))}}));const s=o.A.queryElement.call(this,"div.wf-layout-outer");s&&(s.style.setProperty("background-color",e.background),s.style.setProperty("z-index","2003"))}}_loadInstances(){if(!this._instanceId){const e=o.E.generateId(this._idPrefix);this._instanceId=e.id,this._instanceIdNumber=e.counter.toString()}this._searchStepId||(this._searchStepId=o.E.generateId(this._idPrefixSearch).id),this._bufferStepId||(this._bufferStepId=o.E.generateId(this._idPrefixBuffer).id),this._infographicStepId||(this._infographicStepId=o.E.generateId(this._idPrefixInfographic).id)}componentWillLoad(){o.A.announceVersion(),this.env&&this.onEnvChanged(),this.token&&this.onTokenChanged(),this.username&&this.onUsernameChanged(),this.langCode&&this.onLangCodeChanged(),this.geoenrichmentUrl&&this.onGeoenrichmentUrlChanged(),this.sourceCountry&&this.onSourceCountryChanged(),this.config&&this.onConfigChange(this.config,""),this._updateTravelModeDataFromConfig(),this.selectedHierarchy&&this.onHierarchyChanged(),void 0!==this.useLatestDataSource?this.stUseLatestDataSource=this.useLatestDataSource:this.stUseLatestDataSource=!1,this.standardInfographicID&&(this.stStandardInfographicID=this.standardInfographicID),this.theme?this.baseConfig.setTheme(this.theme):this.baseConfig.setTheme("light"),this.defaultReport&&o.A.hasText(this.defaultReport)&&(this.stDefaultReport=JSON.parse(this.defaultReport)),this.portalUrl&&r.E.setPortalUrl(this.portalUrl),this._loadInstances(),this.initSteps(),this.buildInfographicOptions(),this.updateTabStatuses()}componentDidLoad(){const e=this;requestAnimationFrame((()=>{o.a.Log("workflow componentDidLoad"),e._loadInstances();const t=e.baseConfig.config;r.T.setToken(t.username,t.token),t._localeSettings||(t._localeSettings={}),(!t._localeSettings.language||t._localeSettings.language.length<=0||t._localeSettings.language!==t.langCode&&t.langCode)&&(t._localeSettings.language=t.langCode||"en-us",o.B._initialize(t._localeSettings.language),e.setLocaleStrings()),e.baseConfig&&e.baseConfig.onComponentHasRendered(),e._updateTravelModeDataFromConfig()}))}componentDidUpdate(e,t){const i=this;o.a.Log("workflow didUpdate");const s=i.baseConfig.config;r.T.setToken(s.username,s.token),s._localeSettings||(s._localeSettings={}),(!s._localeSettings.language||s._localeSettings.language.length<=0||s._localeSettings.language!==s.langCode&&s.langCode)&&(s._localeSettings.language=s.langCode||"en-us",o.B._initialize(s._localeSettings.language),i.setLocaleStrings()),e!=t&&this.buildInfographicOptions(),i.baseConfig&&i.baseConfig.onComponentHasRendered()}onConfigChange(e,t){if(o.a.LogConfig("WORKFLOW config change",e,t),this.baseConfig){let t=[];if(e&&o.A.hasText(e)){const i=JSON.parse(e);if(o.a.LogConfig("BAC Workflow config changed",i),t=this.baseConfig.updateConfig(i),t.length>0){if((t.includes("workflowEnableSearch")||t.includes("workflowEnableUserConfigBuffers")||t.includes("workflowEnableInfographicChoice")||t.includes("workflowSearchSelectedObject")||t.includes("workflowSelectedReport"))&&(this.initSteps(),this.updateTabStatuses()),i.defaultReport&&i.defaultReport.id&&i.defaultReport.name){const e=!0;this.updateDefaultReport(i.defaultReport,e)}let e=null;i.travelModeData?e=i.travelModeData:i.infographicOptions?.drivetimeOptions?.travelModeData&&(e=i.infographicOptions.drivetimeOptions.travelModeData),e&&"object"==typeof e&&JSON.stringify(this.travelModeData)!==JSON.stringify(e)&&(this.travelModeData=e,o.a.Log("WORKFLOW travelModeData updated from config",e),this.buildInfographicOptions())}}}}_updateTravelModeDataFromConfig(){const e=this.baseConfig?.config;let t=null;e?.travelModeData?t=e.travelModeData:e?.infographicOptions?.drivetimeOptions?.travelModeData&&(t=e.infographicOptions.drivetimeOptions.travelModeData),t&&"object"==typeof t&&JSON.stringify(this.travelModeData)!==JSON.stringify(t)&&(this.travelModeData=t,o.a.Log("WORKFLOW travelModeData updated from config in helper",t),this.buildInfographicOptions())}onsearchResultChange(e){this.searchResultObjChanged(JSON.parse(e)),o.a.Log("arcgis-infographic-workflow Selected Feature changed:",e)}searchResultObjChanged(e){o.a.LogConfig("WORKFLOW search result changed",e),(!e||e&&"{}"!==JSON.stringify(e)&&"{}"===JSON.stringify(e.detail))&&this.selectedFeatureClear.emit(),this.searchResultObj=e.detail,this.initSteps(),this.updateTabStatuses()}searchResultsEventHandler(e){this.baSearchFeatureChange.emit(e)}modalClosed(){this.modalOpened=!1}onBufferTypeChanged(e){this.bufferType=e.detail,this.buildInfographicOptions()}onBufferValsChanged(e){this.bufferVals=e.detail,this.buildInfographicOptions()}onBufferUnitChanged(e){this.bufferUnit=e.detail,this.buildInfographicOptions()}onDrivetimeOptionsChanged(e){const{offsetTime:t,offsetHr:i,offsetDay:s,travelDirection:a,trafficType:r,useTrafficChecked:n,travelModeData:h}=e.detail;this.offsetTime=void 0!==typeof t?t:0,this.offsetHr=void 0!==i?i:"12:00 PM",this.offsetDay=void 0!==s?s:o.D.mon,this.travelDirection=void 0!==typeof a?a:o.T.away,this.trafficType=void 0!==typeof r?r:o.b.live,this.useTrafficEnabled=!0,this.useTrafficChecked=void 0!==n&&n,this.travelModeData=h,console.log("listener onDrivetimeOptionsChanged",{travelModeData:h}),this.buildInfographicOptions()}handleStepperItemClick(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");if(e){const t=Array.from(e.querySelectorAll("calcite-stepper-item")).findIndex((e=>e.selected));-1!==t&&(this.currentStep=t+1)}}handleReportSelectedChange(e){const t=e.detail?.report;this.selectedReport=t?.id,t?.id&&t?.name&&(this.baseConfig.updateConfig({selectedReport:{id:t.id,name:t.name}}),this.standardInfographicID=t.reportID,this.onStandardInfographicIDChanged())}handleDrawPointClick(){this.drawPointClick.emit()}handleDrawPolygonClick(){this.drawPolygonClick.emit()}updateBufferObj(e,t,i){["ringsObj","walktimeObj","drivetimeObj"].includes(e)?this[e]={...this[e],[t]:i}:console.error("Invalid state variable:",e)}async setDrivetimeOptions(e){const t={};function i(i){null!=typeof e[i]&&(t[i]=e[i])}e&&(i("offsetTime"),i("offsetHr"),i("offsetDay"),i("travelDirection"),i("trafficType"),i("useTrafficChecked"),i("travelModeData"),t.useTrafficEnabled=!0,this.offsetTime=void 0!==typeof t.offsetTime?t.offsetTime:0,this.offsetHr=void 0!==t.offsetHr?t.offsetHr:"12:00 PM",this.offsetDay=void 0!==t.offsetDay?t.offsetDay:o.D.mon,this.travelDirection=void 0!==typeof t.travelDirection?t.travelDirection:o.T.away,this.trafficType=void 0!==typeof t.trafficType?t.trafficType:o.b.live,this.useTrafficEnabled=!0,this.useTrafficChecked=void 0!==t.useTrafficChecked&&t.useTrafficChecked,this.travelModeData=void 0!==t.travelModeData?t.travelModeData:{},this.buildInfographicOptions())}async setTheme(e){this.baseConfig.setTheme(e)}async setActiveLevels(e){const t=o.A.queryElementById.call(this,this._searchStepId);t&&t.setActiveLevels(e)}initSteps(){const{workflowEnableSearch:e,workflowEnableUserConfigBuffers:t,workflowEnableInfographicChoice:i,workflowSearchSelectedObject:s,workflowSelectedReport:r}=this.baseConfig.config;!e&&o.A.hasText(s)&&o.A.isEmptyObject(this.searchResultObj)&&(this.searchResultObj=JSON.parse(s)),!i&&o.A.hasText(r)&&(this.selectedReport=r);const n=[];e&&n.push(a.S.search),t&&(o.A.isEmptyObject(this.searchResultObj)||!o.A.isEmptyObject(this.searchResultObj)&&"location"===this.searchResultObj.type)&&n.push(a.S.buffers),i&&n.push(a.S.infographics),this.steps=n,this.numSteps=n.length,this.goToFirstStep()}handleNextButtonClick(){this.currentStep=Math.min(this.currentStep+1,this.numSteps),this.renderBuffers(),this.goToStep(this.currentStep),this.updateTabStatuses()}handleBackButtonClick(){this.currentStep=Math.max(this.currentStep-1,1),this.goToPrevStep(),this.updateTabStatuses()}handleInfographicTabClick(){this.infographicTabViewed=!0,this.updateTabStatuses()}goToStep(e){const t=this.el.shadowRoot?.querySelector("calcite-stepper");t&&t.goToStep(e)}renderBuffers(e=!1){const t=this.steps[Math.max(this.currentStep-2,0)];(t===a.S.buffers||!this.steps.includes(a.S.buffers)&&t===a.S.search||e)&&(this.buildInfographicOptions(),this.buffersUpdate.emit({options:this.baseConfig.config.infographicOptions,searchResultObj:this.searchResultObj}))}goToNextStep(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");e&&e.nextStep()}goToPrevStep(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");e&&e.prevStep()}goToFirstStep(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");e&&e.startStep()}goToLastStep(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");e&&e.endStep()}openModal(){let e;this.steps.includes(a.S.infographics)||this.renderBuffers(!0);const t=this.baseConfig.config.selectedReport,i=this.baseConfig.config.defaultReport;t&&t.id?e=t.id:this.selectedReport?e=this.selectedReport:i&&i.id&&(e=i.id);const s={config:this.baseConfig.config,searchResultObj:this.searchResultObj,selectedReport:e,standardReportId:this.standardInfographicID};this.runInfographic.emit(s)}cleanArray(e){let t=[];for(let i=0;i<e.length;i++)Number.isNaN(e[i])||null===e[i]||t.push(e[i]);return t}handleNoBufferConfig(){if(!this.baseConfig?.config)return;const e=this.baseConfig.config;e.workflowEnableUserConfigBuffers||(e.workflowBuffer===a.B.ring?(this.bufferType=a.B.ring,this.bufferVals=this.cleanArray([e.workflowRingsBuffer1,e.workflowRingsBuffer2,e.workflowRingsBuffer3]),this.bufferUnit=e.workflowRingsBufferUnit):e.workflowBuffer===a.B.drivetime?(this.bufferType=a.B.drivetime,this.bufferVals=this.cleanArray([e.workflowDrivetimeBuffer1,e.workflowDrivetimeBuffer2,e.workflowDrivetimeBuffer3]),this.bufferUnit=e.workflowDrivetimeBufferUnit):e.workflowBuffer===a.B.walktime&&(this.bufferType=a.B.walktime,this.bufferVals=this.cleanArray([e.workflowWalktimeBuffer1,e.workflowWalktimeBuffer2,e.workflowWalktimeBuffer3]),this.bufferUnit=e.workflowWalktimeBufferUnit))}buildInfographicOptions(){let e;if(this.baseConfig?.config)e=this.baseConfig.config;else{if(!o.A.hasText(this.config))return;e=JSON.parse(this.config),this.baseConfig.updateConfig(e)}const t={...{bufferType:this.bufferType,bufferUnits:this.bufferUnit},...{bufferSizes:this.bufferVals,viewMode:e.viewMode||"full",drivetimeOptions:{offsetTime:this.offsetTime,offsetHr:this.offsetHr,offsetDay:this.offsetDay,travelDirection:this.travelDirection,trafficType:this.trafficType,useTrafficEnabled:!0,useTrafficChecked:this.useTrafficChecked,travelModeData:this.travelModeData},report:{showHeader:void 0===e.displayHeader||e.displayHeader,showZoomLevel:void 0===e.zoomLevel||!e.zoomLevel,showFullscreen:!1},export:{excel:void 0===e.excel||e.excel,image:void 0===e.imageExport||e.imageExport,pdf:void 0===e.pdf||e.pdf,dynamicHtml:void 0===e.dynamicHtml||e.dynamicHtml,print:!1},style:{backgroundColor:e.igBackgroundColor||"#ffffff",headerColor:e.headerColor||"#007ac2",headerTextColor:e.headerTextColor||"#ffffff"},map:{runReportOnClick:e.runReportOnClick,showSearch:!1}}};this.baseConfig&&this.baseConfig.updateConfig({infographicOptions:t})}hasSearchResult(){return!o.A.isEmptyObject(this.searchResultObj)}updateTabStatuses(){let e=!1;this.hasSearchResult()&&"complete"!==this.searchTabStatus?.complete?(this.searchTabStatus={complete:"complete"},e=!0):"error"!==this.searchTabStatus?.error&&"complete"!==this.searchTabStatus?.complete?this.searchTabStatus={error:"error"}:this.hasSearchResult()&&"complete"===this.searchTabStatus?.complete&&(e=!0),e?0===this.bufferVals?.length?this.bufferTabStatus={error:"error"}:"complete"!==this.bufferTabStatus?.complete&&(this.bufferTabStatus={complete:"complete"}):"disabled"!==this.bufferTabStatus?.disabled&&(this.bufferTabStatus={disabled:"disabled"}),e?this.selectedReport&&"complete"!==this.infographicTabStatus?.complete?this.infographicTabStatus={complete:"complete"}:this.infographicTabViewed&&"error"!==this.infographicTabStatus?.error?this.infographicTabStatus={error:"error"}:this.infographicTabViewed||"error"===this.infographicTabStatus?.error||(this.infographicTabStatus={}):"disabled"!==this.infographicTabStatus?.disabled&&(this.infographicTabStatus={disabled:"disabled"});const t=this.el.shadowRoot?.querySelector("calcite-stepper");null!==t&&null!==t?.selectedItem||(this.steps[0]===a.S.search?(this._setInitialStepperTab=a.S.search,this.searchTabStatus={}):this.steps[0]===a.S.buffers?(this._setInitialStepperTab=a.S.buffers,this.bufferTabStatus={}):this.steps[0]===a.S.infographics&&(this._setInitialStepperTab=a.S.infographics,this.infographicTabStatus={}))}componentDidRender(){const e=this.el.shadowRoot?.querySelector("calcite-stepper");e&&this._setInitialStepperTab&&(this.goToStep(this.steps.indexOf(this._setInitialStepperTab)+1),this._setInitialStepperTab=null)}_getToken(){let e=r.T.token?.access_token;return e||(e=this.token),e}render(){try{const e=this._instanceIdNumber,t=1===this.currentStep,i=this.currentStep===this.numSteps;o.B._initialize(this.langCode);const r=this._getDefaultReport();return o.a.Log("WORKFLOW RENDER def rep, token:",r,this._getToken()),(0,s.h)("div",{class:"wf-layout-outer"},(0,s.h)("div",{class:"wf-layout-card"},(0,s.h)("div",{class:"wf-layout-stepper"},(0,s.h)("calcite-stepper",{id:"workflow-stepper-"+e},this.steps.includes(a.S.search)&&(0,s.h)("calcite-stepper-item",{heading:o.B.i18n("search-label")},(0,s.h)("div",{class:"step-content wf-step-content wf-step-search"},(0,s.h)("search-step",{id:this._searchStepId,env:this.env,token:this._getToken(),stepId:"workflow-search-step"+e,config:this.baseConfig.getConfigString(),selectedFeatureResult:this.selectedFeatureResult,geocodeUrl:this.geocodeUrl,geoenrichmentUrl:this.geoenrichmentUrl?this.geoenrichmentUrl:void 0},(0,s.h)("div",{class:"draw-components-class",slot:"draw-components"},(0,s.h)("slot",{name:"draw-components"}))))),this.steps.includes(a.S.buffers)&&(0,s.h)("calcite-stepper-item",{heading:o.B.i18n("buffers-label"),complete:"complete"===this.bufferTabStatus.complete,error:"error"===this.bufferTabStatus.error,disabled:"disabled"===this.bufferTabStatus.disabled},(0,s.h)("div",{class:"step-content wf-step-content"},(0,s.h)("buffers-step",{stepId:this._bufferStepId,config:this.baseConfig.getConfigString(),langCode:this.langCode,env:this.stEnv}))),this.steps.includes(a.S.infographics)&&(0,s.h)("calcite-stepper-item",{heading:o.B.i18n("infographics-label"),complete:"complete"===this.infographicTabStatus.complete,error:"error"===this.infographicTabStatus.error,disabled:"disabled"===this.infographicTabStatus.disabled,onClick:()=>this.handleInfographicTabClick()},(0,s.h)("div",{class:"step-content wf-step-content"},(0,s.h)("infographics-step",{stepId:this._infographicStepId,config:this.baseConfig.getConfigString(),selectedReport:this.selectedReport,portalOnlineGEProxy:this.portalOnlineGEProxy}))))),(0,s.h)("div",{class:"wf-layout-nav"},(0,s.h)("div",{class:"separator-line"}),(0,s.h)("div",{class:"navigation-buttons-container"},(0,s.h)("div",{class:"navigation-buttons navigation-buttons-left"},!t&&(0,s.h)("calcite-button",{appearance:"outline",onClick:()=>this.handleBackButtonClick()},this.labels.back)),(0,s.h)("div",{class:"navigation-buttons navigation-buttons-right"},!i&&(0,s.h)("calcite-button",{class:"nav-button",onClick:()=>this.handleNextButtonClick(),disabled:o.A.isEmptyObject(this.searchResultObj)},this.labels.next),(!o.A.isEmptyObject(this.searchResultObj)&&i||1===this.numSteps)&&(0,s.h)("calcite-button",{class:"nav-button",onClick:()=>this.openModal(),disabled:!this.selectedReport||o.A.isEmptyObject(this.searchResultObj)},this.labels.runInfographic))))))}catch(e){o.a.Error("Workflow error:",e)}return(0,s.h)("div",null,"Workflow error")}static get watchers(){return{defaultReport:["onDefaultReportChanged"],env:["onEnvChanged"],token:["onTokenChanged"],username:["onUsernameChanged"],langCode:["onLangCodeChanged"],useLatestDataSource:["onUseLatestDataSourceChanged"],standardInfographicID:["onStandardInfographicIDChanged"],geoenrichmentUrl:["onGeoenrichmentUrlChanged"],sourceCountry:["onSourceCountryChanged"],selectedHierarchy:["onHierarchyChanged"],travelModeData:["onTravelModeDataChanged"],config:["onConfigChange"],selectedFeatureResult:["onsearchResultChange"]}}};n.style=":host{display:block;height:100%;width:100%}calcite-grid{height:100%;width:100%}.separator-line{border-top:1px solid var(--calcite-color-border-3);margin-bottom:10px}.navigation-buttons-container{display:flex;justify-content:space-between;align-items:center}.navigation-buttons{display:flex;gap:0.25rem}.navigation-buttons-left{margin-left:10px}.navigation-buttons-right{margin-right:10px}.nav-button{padding-left:10px}.wf-layout-outer{position:relative;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.stepper-item-header{height:18px}.wf-layout-card{position:absolute;top:0;width:100%;height:100%;min-width:300px;min-height:200px;max-width:700px;display:flex;flex-flow:column}.wf-layout-stepper{width:96%;height:calc(94% - 35px);position:absolute;top:10px;left:2%;background-color:'transparent';flex:2}.wf-layout-nav{width:100%;height:54px;position:absolute;left:0px;bottom:0px;background-color:'transparent'}.wf-layout-buttons{position:absolute;top:2px;right:2px}.draw-components-class{height:45px;width:100%}calcite-stepper{position:relative;height:100%}.wf-step-content{position:absolute;top:65px;width:100%;height:calc(100% - 90px)}::-webkit-scrollbar{background-color:var(--calcite-color-background-1);width:8px;height:8px}::-webkit-scrollbar-thumb{background-color:var(--calcite-color-foreground-3)}::-webkit-scrollbar-track{background-color:transparent}::-webkit-scrollbar-corner{background-color:var(--calcite-color-background-1);width:8px;height:8px}"}}]);