"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dist_stenci-b4f715"],{9542:(t,e,s)=>{s.r(e),s.d(e,{arcgis_infographic_modal:()=>o});var i=s(8796),a=s(983);const o=class{get el(){return(0,i.g)(this)}baseConfig;_instanceId;_idPrefix="arcgis-infographic-modal-";constructor(t){(0,i.r)(this,t),this.modalId=void 0,this.config=void 0,this.searchResultObj=void 0,this.isOpen=!1,this.selectedReport=void 0,this.infographicOptions=void 0,this.portalUrl=void 0,this.portalOnlineGEProxy=void 0,this.selectedHierarchy=void 0,this.useLatestDataSource=void 0,this.standardInfographicID=void 0,this.stSelectedHierarchy="",this.stUseLatestDataSource=void 0,this.stStandardInfographicID=void 0,this.baseConfig=new a.a("modal",this,this.onUpdateUI),this._instanceId=a.E.generateId(this._idPrefix).id}onHierarchyChanged(){this.stSelectedHierarchy=this.selectedHierarchy,this.baseConfig&&this.baseConfig.updateConfig({selectedHierarchy:this.stSelectedHierarchy})}onUseLatestChanged(){this.stUseLatestDataSource=this.useLatestDataSource,this.baseConfig&&this.baseConfig.updateConfig({useLatestDataSource:this.stUseLatestDataSource});const t=document.getElementById(this.modalId);t&&t.setAttribute("useLatestDataSource",this.useLatestDataSource)}onStandardInfographicChanged(){this.stStandardInfographicID=this.standardInfographicID,this.baseConfig&&this.baseConfig.updateConfig({standardInfographicID:this.stStandardInfographicID});const t=document.getElementById(this.modalId);t&&t.setAttribute("standardInfographicID",this.stStandardInfographicID)}onConfigChange(t,e){if(a.a.LogConfig("MODAL config change",t,e),t&&"string"==typeof t&&a.A.hasText(t)){const e=JSON.parse(t);a.a.LogConfig("BAC Modal config changing... ",e,e.username,e.token),this.baseConfig.updateConfig(e)}}async setUseLatestDataSource(t,e){this.useLatestDataSource=t,this.standardInfographicID=e,this.baseConfig?.config&&(this.baseConfig.config.useLatestDataSource=t,this.baseConfig.config.standardInfographicID=e);const s=document.getElementById(this.modalId);s&&s.setUseLatestDataSource(t,e)}onInvalidHierarchy(){this.el.style.setProperty("background-color","#f4f4f4"),this.el.style.setProperty("position","absolute"),this.el.style.setProperty("top","0"),this.el.style.setProperty("left","0"),this.el.style.setProperty("width","100%"),this.el.style.setProperty("height","100%")}onUpdateUI(){}setLocaleStrings(){}async componentWillLoad(){if(a.a.LogConfig("BAC Modal willLoad",this.config),this.config){let t="object"==typeof this.config?JSON.stringify(this.config):this.config;this.onConfigChange(t,""),this.config.selectedHierarchy&&!this.selectedHierarchy&&(this.selectedHierarchy=this.config.selectedHierarchy)}this.baseConfig&&(void 0!==this.standardInfographicID&&a.A.hasText(this.standardInfographicID)&&this.baseConfig.updateConfig({standardInfographicID:this.standardInfographicID}),void 0!==this.useLatestDataSource&&this.baseConfig.updateConfig({useLatestDataSource:this.useLatestDataSource})),this.selectedHierarchy&&this.onHierarchyChanged()}componentDidLoad(){const t=this;requestAnimationFrame((()=>{t.baseConfig&&t.baseConfig.onComponentHasRendered()}))}componentDidUpdate(){this.baseConfig&&this.baseConfig.onComponentHasRendered()}render(){if(!this.searchResultObj)return;const{env:t,username:e,token:s,geoenrichmentUrl:o,sourceCountry:n,langCode:r,useLatestDataSource:h,standardInfographicID:c}=this.baseConfig.config,{name:d,address:g,type:f,attributes:l,geometry:p,geography:u,symbol:y}=this.searchResultObj;let I=d;"location"===f&&g&&g.trim()?I=g:I&&I.trim()||(I=g||d||""),a.a.Log("BAC Modal render [searchResultObj, locationName]",this.searchResultObj,I),a.a.Log("BAC Modal render [config, useLatestDataSource]",this.baseConfig.config,h,c);const C=null!=typeof this.useLatestDataSource?this.useLatestDataSource:void 0!==h&&1==h,b=void 0!==this.standardInfographicID&&a.A.hasText(this.standardInfographicID)?this.standardInfographicID:"";return(0,i.h)("arcgis-infographic",{id:this.modalId,env:t,username:e,token:s,geoenrichmentUrl:o,portalUrl:this.portalUrl,portalOnlineGEProxy:this.portalOnlineGEProxy,locationName:I,locationAttributes:JSON.stringify(l),sourceCountry:n,selectedHierarchy:this.selectedHierarchy,options:JSON.stringify(this.infographicOptions),langCode:r,reportId:this.selectedReport,reportLocation:`${this.searchResultObj.lon},${this.searchResultObj.lat}`,reportgeometry:JSON.stringify(p),reportgeography:JSON.stringify(u),useLatestDataSource:C,standardInfographicID:b,onInvalidHierarchy:()=>this.onInvalidHierarchy(),reportsymbol:JSON.stringify(y)})}static get watchers(){return{selectedHierarchy:["onHierarchyChanged"],useLatestDataSource:["onUseLatestChanged"],standardInfographicID:["onStandardInfographicChanged"],config:["onConfigChange"]}}};o.style=":host{display:block}.arcgisInfographicModalDeprecated{background-color:#f4f4f4;position:absolute;top:0;left:0;width:100%;height:100%}"}}]);